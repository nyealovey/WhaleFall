{% extends "base.html" %}

{% block title %}关于鲸落{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/about.css') }}">
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <!-- 左侧：Logo和项目介绍 -->
        <div class="col-6">
            <div class="text-center mb-5">
                <img src="{{ url_for('static', filename='img/logo.webp') }}" alt="鲸落" height="200"
                    class="mb-4 about-logo">
                <h1 class="artistic-title text-white mb-4">鲸落</h1>
            </div>

            <!-- 项目介绍 -->
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>项目介绍</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        鲸落是一套面向 DBA 的数据库资源管理平台，围绕实例、账户、容量与任务调度等日常运维场景提供统一入口。
                        1.2.2 版本聚焦“大幅重构、精简代码”：调度器只初始化单实例、日志可检索性全面升级，核心链路更稳定、更易运维。
                    </p>
                </div>
            </div>

            <!-- 核心功能 -->
            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="fas fa-cogs me-2"></i>核心功能</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-6">
                            <h6><i class="fas fa-database text-primary me-2"></i>数据库管理</h6>
                            <ul class="list-unstyled small">
                                <li>• 多数据库实例管理</li>
                                <li>• 连接状态测试</li>
                                <li>• 实例标签分类</li>
                            </ul>
                        </div>
                        <div class="col-6">
                            <h6><i class="fas fa-users text-info me-2"></i>账户管理</h6>
                            <ul class="list-unstyled small">
                                <li>• 账户权限扫描</li>
                                <li>• 智能分类管理</li>
                                <li>• 权限规则配置</li>
                                <li>• 账户状态监控</li>
                            </ul>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <h6><i class="fas fa-clock text-warning me-2"></i>任务调度</h6>
                            <ul class="list-unstyled small">
                                <li>• 定时数据同步</li>
                                <li>• 容量同步与回放</li>
                            </ul>
                        </div>
                        <div class="col-6">
                            <h6><i class="fas fa-chart-line text-danger me-2"></i>监控与聚合</h6>
                            <ul class="list-unstyled small">
                                <li>• 统一日志与审计中心</li>
                                <li>• 聚合服务（AggregationService）提供实例/数据库周期统计</li>
                                <li>• 同步会话追踪 scope（instance/database）维度</li>
                                <li>• 手动/定时聚合流程串行化与进度可视化</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 技术栈 -->
            <div class="card mb-4">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="fas fa-code me-2"></i>技术栈</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-6">
                            <h6>后端技术</h6>
                            <ul class="list-unstyled small">
                                <li>• Python 3.11+</li>
                                <li>• Flask 3.1.2+</li>
                                <li>• SQLAlchemy 2.0.43+</li>
                                <li>• APScheduler 3.11.0+</li>
                                <li>• Redis 6.4.0+</li>
                                <li>• Gunicorn 23.0.0+</li>
                                <li>• Gevent 25.9.1+</li>
                            </ul>
                        </div>
                        <div class="col-6">
                            <h6>前端技术</h6>
                            <ul class="list-unstyled small">
                                <li>• Bootstrap 5.3.2</li>
                                <li>• jQuery 3.7.1</li>
                                <li>• Chart.js 4.4.0</li>
                                <li>• Font Awesome 6.4.0</li>
                                <li>• Jinja2 模板引擎</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 支持的数据库 -->
            <div class="card">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0"><i class="fas fa-server me-2"></i>支持的数据库</h5>
                </div>
                <div class="card-body">
                    <div class="row text-center">
                        <div class="col-3">
                            <i class="fas fa-database text-primary fa-2x mb-2"></i>
                            <div class="small">PostgreSQL</div>
                        </div>
                        <div class="col-3">
                            <i class="fas fa-database text-warning fa-2x mb-2"></i>
                            <div class="small">MySQL</div>
                        </div>
                        <div class="col-3">
                            <i class="fas fa-database text-info fa-2x mb-2"></i>
                            <div class="small">SQL Server</div>
                        </div>
                        <div class="col-3">
                            <i class="fas fa-database text-danger fa-2x mb-2"></i>
                            <div class="small">Oracle</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 右侧：更新日志 -->
        <div class="col-6">
            {% set version_timeline = [
                {"version": "1.2.2", "date": "2025-11-13", "summary": "大幅重构与精简：调度器按需初始化 + 文件锁防并发，Scheduler 表单/日志全面瘦身，统一日志支持 JSONB 搜索。"},
                {"version": "1.2.1", "date": "2025-11-05", "summary": "重构核心服务：统一账户同步、权限差异与变更日志链路，提升数据一致性与可观察性。"},
                {"version": "1.2.0", "date": "2025-10-31", "summary": "聚合服务职责梳理，手动/定时聚合流程统一，容量统计体验升级。"},
                {"version": "1.1.4", "date": "2025-10-17", "summary": "时间处理和日志中心显示统一，聚合与日志体验优化。"},
                {"version": "1.1.3", "date": "2025-10-14", "summary": "容量统计页面上线，日志中心体验优化，统计功能重构。"},
                {"version": "1.1.2", "date": "2025-10-13", "summary": "版本统一更新、样式优化、文档同步更新。"},
                {"version": "1.1.1", "date": "2025-10-09", "summary": "容量同步修复脚本、容量趋势图交互优化以及分区与仪表板稳定性修复。"},
                {"version": "1.1.0", "date": "2025-09-25", "summary": "自动分类、标签管理、权限 API 与 JS 模块化修复。"},
                {"version": "1.0.8", "date": "2025-09-24", "summary": "新增批量标签管理功能、标签分组显示、实例分组管理。"},
                {"version": "1.0.7", "date": "2025-09-24", "summary": "自动分类规则与定时任务修复、用户管理增强、代码分离优化。"},
                {"version": "1.0.6", "date": "2025-09-22", "summary": "权限 API 修复、SQL Server 权限修复、日志优化。"},
                {"version": "1.0.5", "date": "2025-09-21", "summary": "账户分类分页功能、SQL Server 权限修复、生产环境优化与关于页面。"},
                {"version": "1.0.2", "date": "2025-09-20", "summary": "版本升级、生产环境部署、页脚版本号显示。"},
                {"version": "1.0.0", "date": "2025-09-19", "summary": "正式版本发布、统一版本号、依赖升级。"}
            ] %}
            <div class="card h-100">
                <div class="card-header bg-dark text-white">
                    <h5 class="mb-0"><i class="fas fa-history me-2"></i>更新日志</h5>
                </div>
                <div class="card-body" style="max-height: 600px; overflow-y: auto;">
                    {% for item in version_timeline %}
                    <div class="mb-4">
                        <h6 class="text-primary">
                            <i class="fas fa-tag me-2"></i>版本 {{ item.version }}
                            <small class="text-muted">({{ item.date }})</small>
                        </h6>
                        <p class="small text-muted mb-0">{{ item.summary }}</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
