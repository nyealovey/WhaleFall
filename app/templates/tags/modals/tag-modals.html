{% set tag_modal_body %}
<form id="tagModalForm" data-form-mode="create">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    <input type="hidden" name="tag_id" id="tagIdInput"/>

    <div class="row">
        <div class="col-6">
            <div class="mb-3">
                <label for="tagName" class="form-label">标签代码 <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="tagName" name="name" placeholder="示例：prod_env" required>
                <div class="form-text">仅支持字母、数字、下划线和中划线，长度 2-30 字</div>
            </div>
        </div>
        <div class="col-6">
            <div class="mb-3">
                <label for="tagDisplayName" class="form-label">显示名称 <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="tagDisplayName" name="display_name" placeholder="示例：生产环境" required>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-6">
            <div class="mb-3">
                <label for="tagCategory" class="form-label">分类 <span class="text-danger">*</span></label>
                <select class="form-select" id="tagCategory" name="category" required>
                    <option value="">请选择分类</option>
                    {% for option in category_options %}
                    {% if option.value %}
                    <option value="{{ option.value }}">{{ option.label }}</option>
                    {% endif %}
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="col-6">
            <div class="mb-3">
                <label for="tagColor" class="form-label">颜色</label>
                <select class="form-select" id="tagColor" name="color">
                    {% for color in ['primary','secondary','success','danger','warning','info','dark'] %}
                    <option value="{{ color }}">{{ color }}</option>
                    {% endfor %}
                </select>
                <div class="form-text"><span class="badge bg-primary" id="tagColorPreview">示例</span></div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-6">
            <div class="mb-3">
                <label for="tagSortOrder" class="form-label">排序</label>
                <input type="number" class="form-control" id="tagSortOrder" name="sort_order" placeholder="0" min="0">
            </div>
        </div>
        <div class="col-6">
            <div class="form-check form-switch mb-3">
                <input class="form-check-input" type="checkbox" id="tagIsActive" name="is_active" value="1" checked>
                <label class="form-check-label" for="tagIsActive">激活标签</label>
            </div>
        </div>
    </div>

    <div class="mb-3">
        <label for="tagDescription" class="form-label">描述</label>
        <textarea class="form-control" id="tagDescription" name="description" rows="3" placeholder="请输入标签描述"></textarea>
    </div>
</form>
{% endset %}

{% set tag_modal_footer %}
<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
<button type="submit" class="btn btn-primary" id="tagModalSubmit" form="tagModalForm">保存</button>
{% endset %}

{% with
    modal_id='tagModal',
    modal_label_id='tagModalLabel',
    title='<i class="fas fa-tag me-2"></i><span id="tagModalTitle">添加标签</span>',
    body=tag_modal_body,
    footer=tag_modal_footer,
    size='lg'
%}
    {% include 'components/ui/modal.html' %}
{% endwith %}
