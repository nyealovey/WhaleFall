# 前端目录重构补充说明

> 发现遗漏：5 个前端目录使用下划线命名
> 
> 更新时间: 2025-11-13

## 🔍 发现的问题

在全面扫描后，发现以下前端目录使用了下划线命名，不符合前端 kebab-case 规范：

### 需要重命名的目录 (5 个)

| 当前目录 | 建议重命名 | 位置 |
|---------|-----------|------|
| `capacity_stats/` | `capacity-stats/` | `app/static/css/pages/` |
| `capacity_stats/` | `capacity-stats/` | `app/static/js/common/` |
| `capacity_stats/` | `capacity-stats/` | `app/static/js/pages/` |
| `classification_rules/` | `classification-rules/` | `app/static/js/pages/accounts/` |
| `classification_rules/` | `classification-rules/` | `app/templates/accounts/` |

> **提示**: `./scripts/refactor_naming.sh` 已自动包含上述目录重命名与引用更新，手动执行时保持相同步骤即可。

## ⚠️ 重要说明

### 为什么后端服务目录不需要重构？

后端服务目录如下使用下划线是**符合 Python 规范**的，不需要修改：

```
app/services/
├── account_classification/    ✅ 正确（Python 包名）
├── account_sync/              ✅ 正确（Python 包名）
├── connection_adapters/       ✅ 正确（Python 包名）
├── database_sync/             ✅ 正确（Python 包名）
└── form_service/              ✅ 正确（Python 包名）
```

**原因**: 
- Python 包名应该使用小写字母和下划线
- 这是 PEP 8 和 Google Python Style Guide 的推荐做法
- 前端目录应该使用 kebab-case（连字符）

## 📋 重构步骤

### 1. 目录重命名

```bash
# CSS 目录
git mv app/static/css/pages/capacity_stats app/static/css/pages/capacity-stats

# JavaScript 目录
git mv app/static/js/common/capacity_stats app/static/js/common/capacity-stats
git mv app/static/js/pages/capacity_stats app/static/js/pages/capacity-stats
git mv app/static/js/pages/accounts/classification_rules app/static/js/pages/accounts/classification-rules

# 模板目录
git mv app/templates/accounts/classification_rules app/templates/accounts/classification-rules
```

### 2. 更新路径引用

需要更新所有引用这些目录的地方：

#### HTML 模板引用

```bash
# 更新 HTML 模板中的路径
find app/templates -name "*.html" -type f -exec sed -i '' \
  -e 's/capacity_stats\//capacity-stats\//g' \
  -e 's/classification_rules\//classification-rules\//g' \
  {} +
```

#### JavaScript 导入路径

```bash
# 更新 JavaScript 文件中的导入路径
find app/static/js -name "*.js" -type f -exec sed -i '' \
  -e 's/capacity_stats\//capacity-stats\//g' \
  -e 's/classification_rules\//classification-rules\//g' \
  {} +
```

### 3. 验证

```bash
# 搜索是否还有旧路径残留
grep -r "capacity_stats/" app/templates/ app/static/
grep -r "classification_rules/" app/templates/ app/static/

# 应该没有结果（或只有注释中的）
```


## 📊 更新后的统计

| 类别 | 原数量 | 新数量 | 变化 |
|-----|-------|-------|------|
| 后端文件命名问题 | 18 个 | 18 个 | - |
| 前端目录命名问题 | 0 个 | **5 个** | +5 |
| 前端 JS 文件命名问题 | 13 个 | 13 个 | - |
| 前端 CSS 文件命名问题 | 8 个 | 8 个 | - |
| 函数命名问题 | 38 个 | 38 个 | - |
| **总计** | **79 项** | **79 项** | - |

## 🎯 影响范围

### 需要更新的文件类型

1. **HTML 模板**: 所有引用这些目录的模板文件
2. **JavaScript 文件**: 所有导入这些目录中模块的 JS 文件
3. **CSS 文件**: 可能有 `@import` 语句引用这些目录

### 潜在影响

- ✅ **低风险**: 目录重命名后，Git 会自动跟踪
- ✅ **可脚本化**: 可将本文命令封装成脚本，减少手工操作
- ⚠️ **需要测试**: 重命名后需要测试前端页面加载

## ✅ 验证清单

- [ ] 所有 5 个目录已重命名
- [ ] HTML 模板中的路径已更新
- [ ] JavaScript 导入路径已更新
- [ ] 没有旧路径残留
- [ ] 前端页面正常加载
- [ ] 浏览器控制台无 404 错误
- [ ] CSS 样式正常应用
- [ ] JavaScript 功能正常工作

## 📝 相关文档已更新

以下文档已更新以包含目录重构：

1. ✅ `命名规范重构指南.md` - 添加了目录命名问题章节
2. ✅ `重构优先级清单.md` - 添加了目录重命名任务
3. ✅ `完整重构清单.md` - 添加了 5 个目录的详细信息
4. ✅ `重构总结.md` - 更新了统计数据
5. ✅ `README.md` - 更新了总体统计
6. ✅ 命令模板 - 在 `README.md` / `完整重构清单.md` 中提供

## 🚀 执行建议

### 推荐执行顺序

1. **先执行目录重命名**: 因为目录重命名会影响文件路径
2. **再执行文件重命名**: 在新目录结构下重命名文件
3. **最后更新引用**: 更新所有路径引用

---

*此补充说明已整合到主要重构文档中；若需自动化，请参照命令模板自建脚本。*
