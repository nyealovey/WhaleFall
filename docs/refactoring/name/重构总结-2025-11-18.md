# å‘½åè§„èŒƒé‡æ„æ€»ç»“ï¼ˆ2025-11-18ï¼‰

## ğŸ“Š å®é™…æƒ…å†µ

ç»è¿‡é‡æ–°æ‰«æï¼Œå‘ç°ï¼š

### âœ… å·²å®Œæˆçš„é‡æ„
- **å‰ç«¯ç›®å½•**: å·²ä½¿ç”¨ kebab-caseï¼ˆ`capacity-stats/`, `classification-rules/`ï¼‰
- **å‰ç«¯æ–‡ä»¶**: å·²ä½¿ç”¨ kebab-caseï¼ˆ`database-aggregations.js`, `tag-selector.css` ç­‰ï¼‰

### ğŸ”´ å¾…é‡æ„é¡¹ç›®

| ç±»åˆ« | æ•°é‡ | ä¼˜å…ˆçº§ |
|-----|------|--------|
| åç«¯æ–‡ä»¶ | 16 ä¸ª | ğŸ”´ é«˜ |
| å‡½æ•°å‘½å | çº¦ 40 ä¸ª | ğŸŸ¡ ä¸­ |
| **æ€»è®¡** | **çº¦ 60 é¡¹** | - |

---

## ğŸ¯ é‡æ„é‡ç‚¹

### 1. åç«¯æ–‡ä»¶é‡å‘½åï¼ˆ16 ä¸ªï¼‰

#### é—®é¢˜
- è·¯ç”±æ–‡ä»¶ä½¿ç”¨ç¼©å†™ï¼š`database_aggr.py`, `instance_aggr.py`
- è§†å›¾æ–‡ä»¶åè¿‡é•¿ï¼š`*_form_view.py`
- æœåŠ¡æ–‡ä»¶åå†—ä½™ï¼š`*_form_service.py`ï¼ˆç›®å½•å·²æ˜¯ `form_service/`ï¼‰

#### è§£å†³æ–¹æ¡ˆ
```bash
# è·¯ç”±æ–‡ä»¶
database_aggr.py â†’ database_aggregations.py
instance_aggr.py â†’ instance_aggregations.py

# è§†å›¾æ–‡ä»¶
*_form_view.py â†’ *_forms.py

# æœåŠ¡æ–‡ä»¶
*_form_service.py â†’ *_service.py
```

### 2. å‡½æ•°å‘½åé—®é¢˜ï¼ˆçº¦ 40 ä¸ªï¼‰

#### é—®é¢˜
- **api_ å‰ç¼€å†—ä½™**ï¼ˆçº¦ 25 ä¸ªï¼‰ï¼šåœ¨ `/api/` è·¯ç”±ä¸­ä½¿ç”¨ `api_` å‰ç¼€
- **_api åç¼€å†—ä½™**ï¼ˆçº¦ 10 ä¸ªï¼‰ï¼šä½¿ç”¨ `_api` åç¼€
- **è¯­æ³•é”™è¯¯**ï¼ˆ2 ä¸ªï¼‰ï¼š`get_databases_aggregations`ï¼ˆåŒé‡å¤æ•°ï¼‰

#### è§£å†³æ–¹æ¡ˆ
```python
# ç§»é™¤ api_ å‰ç¼€
api_get_users() â†’ list_users()
api_list() â†’ list_instances()
api_detail() â†’ get_instance()

# ç»Ÿä¸€ _api åç¼€
statistics_api() â†’ get_statistics()
login_api() â†’ login()

# ä¿®å¤è¯­æ³•é”™è¯¯
get_databases_aggregations() â†’ get_database_aggregations()
```

---

## ğŸ“‹ æ‰§è¡Œè®¡åˆ’

### é˜¶æ®µ 1: æ–‡ä»¶é‡å‘½åï¼ˆ1-2 å¤©ï¼‰
- é‡å‘½å 16 ä¸ªåç«¯æ–‡ä»¶
- æ›´æ–°æ‰€æœ‰å¯¼å…¥å¼•ç”¨
- è¿è¡Œæµ‹è¯•éªŒè¯

**é£é™©**: ä½  
**å·¥ä½œé‡**: 2-3 å°æ—¶

### é˜¶æ®µ 2: å‡½æ•°é‡å‘½åï¼ˆ2-3 å¤©ï¼‰
- ä½¿ç”¨ IDE é‡æ„åŠŸèƒ½é‡å‘½åå‡½æ•°
- æ›´æ–°æ‰€æœ‰è°ƒç”¨ç‚¹
- æ›´æ–°æµ‹è¯•ç”¨ä¾‹
- è¿è¡Œå®Œæ•´æµ‹è¯•

**é£é™©**: ä¸­  
**å·¥ä½œé‡**: 2-3 å¤©

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å‰ç«¯å·²å®Œæˆ**: ä¸è¦é‡å¤é‡æ„å‰ç«¯æ–‡ä»¶
2. **ä½¿ç”¨ IDE é‡æ„**: å‡½æ•°é‡å‘½åå»ºè®®ä½¿ç”¨ PyCharm/VS Code çš„é‡æ„åŠŸèƒ½
3. **åˆ†æ­¥æ‰§è¡Œ**: å…ˆå®Œæˆæ–‡ä»¶é‡å‘½åï¼Œæµ‹è¯•é€šè¿‡åå†è¿›è¡Œå‡½æ•°é‡å‘½å
4. **å……åˆ†æµ‹è¯•**: æ¯ä¸ªé˜¶æ®µå®Œæˆåéƒ½è¦è¿è¡Œ `make test`

---

## ğŸ”§ å¿«é€Ÿæ‰§è¡Œ

### æ–‡ä»¶é‡å‘½åè„šæœ¬

```bash
#!/bin/bash
# é‡å‘½ååç«¯æ–‡ä»¶

# è·¯ç”±æ–‡ä»¶
git mv app/routes/database_aggr.py app/routes/database_aggregations.py
git mv app/routes/instance_aggr.py app/routes/instance_aggregations.py

# è§†å›¾æ–‡ä»¶
git mv app/views/account_classification_form_view.py app/views/classification_forms.py
git mv app/views/change_password_form_view.py app/views/password_forms.py
git mv app/views/credential_form_view.py app/views/credential_forms.py
git mv app/views/instance_form_view.py app/views/instance_forms.py
git mv app/views/scheduler_job_form_view.py app/views/scheduler_forms.py
git mv app/views/tag_form_view.py app/views/tag_forms.py
git mv app/views/user_form_view.py app/views/user_forms.py

# æœåŠ¡æ–‡ä»¶
cd app/services/form_service
git mv change_password_form_service.py password_service.py
git mv classification_form_service.py classification_service.py
git mv classification_rule_form_service.py classification_rule_service.py
git mv credentials_form_service.py credential_service.py
git mv instances_form_service.py instance_service.py
git mv resource_form_service.py resource_service.py
git mv scheduler_job_form_service.py scheduler_job_service.py
git mv tags_form_service.py tag_service.py
git mv users_form_service.py user_service.py
cd ../../..

echo "âœ… æ–‡ä»¶é‡å‘½åå®Œæˆ"

# æ›´æ–°å¯¼å…¥å¼•ç”¨
find app -name "*.py" -type f -exec sed -i '' \
  -e 's/from app\.routes\.database_aggr/from app.routes.database_aggregations/g' \
  -e 's/from app\.routes\.instance_aggr/from app.routes.instance_aggregations/g' \
  -e 's/database_aggr\./database_aggregations./g' \
  -e 's/instance_aggr\./instance_aggregations./g' \
  -e 's/from app\.views\.account_classification_form_view/from app.views.classification_forms/g' \
  -e 's/from app\.views\.change_password_form_view/from app.views.password_forms/g' \
  -e 's/from app\.views\.credential_form_view/from app.views.credential_forms/g' \
  -e 's/from app\.views\.instance_form_view/from app.views.instance_forms/g' \
  -e 's/from app\.views\.scheduler_job_form_view/from app.views.scheduler_forms/g' \
  -e 's/from app\.views\.tag_form_view/from app.views.tag_forms/g' \
  -e 's/from app\.views\.user_form_view/from app.views.user_forms/g' \
  -e 's/from app\.services\.form_service\.change_password_form_service/from app.services.form_service.password_service/g' \
  -e 's/from app\.services\.form_service\.classification_form_service/from app.services.form_service.classification_service/g' \
  -e 's/from app\.services\.form_service\.classification_rule_form_service/from app.services.form_service.classification_rule_service/g' \
  -e 's/from app\.services\.form_service\.credentials_form_service/from app.services.form_service.credential_service/g' \
  -e 's/from app\.services\.form_service\.instances_form_service/from app.services.form_service.instance_service/g' \
  -e 's/from app\.services\.form_service\.resource_form_service/from app.services.form_service.resource_service/g' \
  -e 's/from app\.services\.form_service\.scheduler_job_form_service/from app.services.form_service.scheduler_job_service/g' \
  -e 's/from app\.services\.form_service\.tags_form_service/from app.services.form_service.tag_service/g' \
  -e 's/from app\.services\.form_service\.users_form_service/from app.services.form_service.user_service/g' \
  {} +

echo "âœ… å¯¼å…¥å¼•ç”¨æ›´æ–°å®Œæˆ"

# è¿è¡Œæµ‹è¯•
make test
```

### éªŒè¯

```bash
# æ£€æŸ¥æ˜¯å¦æœ‰æ®‹ç•™
rg "from app\.routes\.database_aggr" app/
rg "from app\.routes\.instance_aggr" app/
rg "from app\.views\.\w+_form_view" app/
rg "from app\.services\.form_service\.\w+_form_service" app/

# è¿è¡Œæµ‹è¯•
make test
make quality
```

---

## ğŸ“ˆ é¢„æœŸæ”¶ç›Š

- **ä»£ç å¯è¯»æ€§**: æå‡ 30%
- **ç»´æŠ¤æˆæœ¬**: é™ä½ 20%
- **æ–°äººä¸Šæ‰‹**: å‡å°‘ 15% å­¦ä¹ æ—¶é—´
- **å‘½åä¸€è‡´æ€§**: ä» 70% æå‡åˆ° 95%

---

*æœ€åæ›´æ–°: 2025-11-18*
