# é‡æ„æ‰§è¡Œé¡ºåºè¯´æ˜

> ä¸ºä»€ä¹ˆé¡ºåºå¾ˆé‡è¦ï¼Ÿå¦‚ä½•æ­£ç¡®æ‰§è¡Œé‡æ„ï¼Ÿ

## âš ï¸ ä¸ºä»€ä¹ˆé¡ºåºå¾ˆé‡è¦ï¼Ÿ

### é”™è¯¯çš„é¡ºåºï¼ˆâŒ ä¸æ¨èï¼‰

```bash
# é”™è¯¯ç¤ºä¾‹ï¼šå…ˆé‡å‘½åæ–‡ä»¶ï¼Œå†é‡å‘½åç›®å½•
git mv app/static/js/common/capacity_stats/chart_renderer.js \
     app/static/js/common/capacity_stats/chart-renderer.js

# ç„¶åé‡å‘½åç›®å½•
git mv app/static/js/common/capacity_stats \
     app/static/js/common/capacity-stats

# é—®é¢˜ï¼šæ–‡ä»¶è·¯å¾„éœ€è¦ä¿®æ”¹ä¸¤æ¬¡ï¼
# ç¬¬ä¸€æ¬¡ï¼šcapacity_stats/chart_renderer.js â†’ capacity_stats/chart-renderer.js
# ç¬¬äºŒæ¬¡ï¼šcapacity_stats/chart-renderer.js â†’ capacity-stats/chart-renderer.js
```

**é—®é¢˜**ï¼š
- âŒ éœ€è¦ä¿®æ”¹ä¸¤æ¬¡è·¯å¾„å¼•ç”¨
- âŒ å®¹æ˜“å‡ºé”™å’Œé—æ¼
- âŒ Git å†å²è®°å½•æ··ä¹±
- âŒ å¢åŠ å·¥ä½œé‡

### æ­£ç¡®çš„é¡ºåºï¼ˆâœ… æ¨èï¼‰

```bash
# æ­£ç¡®ç¤ºä¾‹ï¼šå…ˆé‡å‘½åç›®å½•
git mv app/static/js/common/capacity_stats \
     app/static/js/common/capacity-stats

# ç›®å½•å†…çš„æ–‡ä»¶è‡ªåŠ¨è·Ÿéšç§»åŠ¨ï¼š
# capacity_stats/chart_renderer.js â†’ capacity-stats/chart_renderer.js

# ç„¶ååœ¨æ–°ç›®å½•ä¸‹é‡å‘½åæ–‡ä»¶
git mv app/static/js/common/capacity-stats/chart_renderer.js \
     app/static/js/common/capacity-stats/chart-renderer.js

# æœ€ååªéœ€è¦æ›´æ–°ä¸€æ¬¡å¼•ç”¨ï¼š
# capacity-stats/chart-renderer.js
```

**ä¼˜åŠ¿**ï¼š
- âœ… åªéœ€è¦ä¿®æ”¹ä¸€æ¬¡è·¯å¾„å¼•ç”¨
- âœ… ä¸å®¹æ˜“å‡ºé”™
- âœ… Git å†å²æ¸…æ™°
- âœ… å‡å°‘å·¥ä½œé‡

---

## ğŸ“‹ æ­£ç¡®çš„æ‰§è¡Œé¡ºåº

### ç¬¬ 1 æ­¥ï¼šé‡å‘½åç›®å½•ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰

**ä¸ºä»€ä¹ˆå…ˆé‡å‘½åç›®å½•ï¼Ÿ**
- Git ä¼šè‡ªåŠ¨è·Ÿè¸ªç›®å½•é‡å‘½å
- ç›®å½•å†…çš„æ‰€æœ‰æ–‡ä»¶ä¼šè‡ªåŠ¨è·Ÿéšç§»åŠ¨
- åç»­é‡å‘½åæ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶å·²ç»åœ¨æ–°ç›®å½•ä¸‹

**æ‰§è¡Œ**ï¼š
```bash
# å‰ç«¯ç›®å½•é‡å‘½åï¼ˆ5 ä¸ªï¼‰
git mv app/static/css/pages/capacity_stats app/static/css/pages/capacity-stats
git mv app/static/js/common/capacity_stats app/static/js/common/capacity-stats
git mv app/static/js/pages/capacity_stats app/static/js/pages/capacity-stats
git mv app/static/js/pages/accounts/classification_rules app/static/js/pages/accounts/classification-rules
git mv app/templates/accounts/classification_rules app/templates/accounts/classification-rules
```

**ç»“æœ**ï¼š
```
âœ… ç›®å½•å·²é‡å‘½å
âœ… ç›®å½•å†…çš„æ–‡ä»¶è‡ªåŠ¨è·Ÿéšç§»åŠ¨
âœ… æ–‡ä»¶è·¯å¾„ï¼šcapacity_stats/chart_renderer.js â†’ capacity-stats/chart_renderer.js
```

### ç¬¬ 2 æ­¥ï¼šé‡å‘½ååç«¯æ–‡ä»¶

**åœ¨åŸç›®å½•ç»“æ„ä¸‹é‡å‘½å**ï¼š
```bash
# è·¯ç”±æ–‡ä»¶ï¼ˆ2 ä¸ªï¼‰
git mv app/routes/database_aggr.py app/routes/database_aggregations.py
git mv app/routes/instance_aggr.py app/routes/instance_aggregations.py

# è§†å›¾æ–‡ä»¶ï¼ˆ7 ä¸ªï¼‰
git mv app/views/account_classification_form_view.py app/views/classification_forms.py
# ... å…¶ä»–æ–‡ä»¶

# æœåŠ¡æ–‡ä»¶ï¼ˆ8 ä¸ªï¼‰
git mv app/services/form_service/change_password_form_service.py \
     app/services/form_service/password_service.py
# ... å…¶ä»–æ–‡ä»¶
```

### ç¬¬ 3 æ­¥ï¼šé‡å‘½åå‰ç«¯æ–‡ä»¶

**åœ¨æ–°ç›®å½•ç»“æ„ä¸‹é‡å‘½å**ï¼š
```bash
# JavaScript æ–‡ä»¶ï¼ˆ13 ä¸ªï¼‰- æ³¨æ„ä½¿ç”¨æ–°ç›®å½•è·¯å¾„
git mv app/static/js/common/capacity-stats/chart_renderer.js \
     app/static/js/common/capacity-stats/chart-renderer.js

git mv app/static/js/pages/capacity-stats/database_aggregations.js \
     app/static/js/pages/capacity-stats/database-aggregations.js
# ... å…¶ä»–æ–‡ä»¶

# CSS æ–‡ä»¶ï¼ˆ8 ä¸ªï¼‰- æ³¨æ„ä½¿ç”¨æ–°ç›®å½•è·¯å¾„
git mv app/static/css/pages/capacity-stats/database_aggregations.css \
     app/static/css/pages/capacity-stats/database-aggregations.css
# ... å…¶ä»–æ–‡ä»¶
```

### ç¬¬ 4 æ­¥ï¼šæ›´æ–°æ‰€æœ‰å¼•ç”¨ï¼ˆä¸€æ¬¡æ€§å®Œæˆï¼‰

**æ›´æ–°åç«¯å¯¼å…¥è·¯å¾„**ï¼š
```bash
find app -name "*.py" -type f -exec sed -i '' \
  -e 's/from app\.routes\.database_aggr/from app.routes.database_aggregations/g' \
  -e 's/from app\.views\.account_classification_form_view/from app.views.classification_forms/g' \
  # ... å…¶ä»–æ›¿æ¢
  {} +
```

**æ›´æ–°å‰ç«¯ç›®å½•è·¯å¾„**ï¼š
```bash
find app/templates -name "*.html" -type f -exec sed -i '' \
  -e 's/capacity_stats\//capacity-stats\//g' \
  -e 's/classification_rules\//classification-rules\//g' \
  {} +
```

**æ›´æ–°å‰ç«¯æ–‡ä»¶å¼•ç”¨**ï¼š
```bash
find app/templates -name "*.html" -type f -exec sed -i '' \
  -e 's/chart_renderer\.js/chart-renderer.js/g' \
  -e 's/database_aggregations\.js/database-aggregations.js/g' \
  # ... å…¶ä»–æ›¿æ¢
  {} +
```

---

## ğŸ”§ è‡ªåŠ¨åŒ–å»ºè®®

- æ¨èä½¿ç”¨ `scripts/refactor_naming.sh`ï¼ˆå·²æŒ‰æœ¬æ–‡é¡ºåºå®ç°ï¼‰ï¼Œå¯é€šè¿‡ `--dry-run` é¢„è§ˆå…¨éƒ¨æ“ä½œã€‚
- å¦‚éœ€å®šåˆ¶è„šæœ¬æˆ–åªæ‰§è¡Œå±€éƒ¨æ­¥éª¤ï¼Œè¯·ç¡®ä¿ï¼š
  1. ä»ç„¶ä¿æŒâ€œç›®å½• â†’ æ–‡ä»¶ â†’ å¼•ç”¨â€é¡ºåº
  2. å‚è€ƒ `å®Œæ•´é‡æ„æ¸…å•.md` çš„å‘½ä»¤æ¨¡æ¿
  3. åœ¨æäº¤å‰è¿è¡Œ `make test` / `make quality` å¹¶è®°å½•ç»“æœ

---

## ğŸ“Š æ‰§è¡Œé¡ºåºå¯¹æ¯”

### æ–¹æ¡ˆ Aï¼šé”™è¯¯é¡ºåºï¼ˆä¸æ¨èï¼‰

| æ­¥éª¤ | æ“ä½œ | éœ€è¦æ›´æ–°çš„å¼•ç”¨ |
|-----|------|--------------|
| 1 | é‡å‘½åæ–‡ä»¶ | æ›´æ–°æ–‡ä»¶åå¼•ç”¨ |
| 2 | é‡å‘½åç›®å½• | **å†æ¬¡æ›´æ–°**ç›®å½•åå¼•ç”¨ |
| **æ€»è®¡** | - | **éœ€è¦æ›´æ–° 2 æ¬¡** |

### æ–¹æ¡ˆ Bï¼šæ­£ç¡®é¡ºåºï¼ˆæ¨èï¼‰âœ…

| æ­¥éª¤ | æ“ä½œ | éœ€è¦æ›´æ–°çš„å¼•ç”¨ |
|-----|------|--------------|
| 1 | é‡å‘½åç›®å½• | æ— éœ€æ›´æ–°ï¼ˆæ–‡ä»¶è‡ªåŠ¨è·Ÿéšï¼‰ |
| 2 | é‡å‘½åæ–‡ä»¶ | æ— éœ€æ›´æ–°ï¼ˆè¿˜æœªæ›´æ–°å¼•ç”¨ï¼‰ |
| 3 | æ›´æ–°å¼•ç”¨ | **åªéœ€æ›´æ–° 1 æ¬¡** |
| **æ€»è®¡** | - | **åªéœ€æ›´æ–° 1 æ¬¡** âœ… |

**æ•ˆç‡æå‡**: 50% çš„å·¥ä½œé‡å‡å°‘ï¼

---

## âœ… éªŒè¯æ¸…å•

### æ‰§è¡Œå‰æ£€æŸ¥

- [ ] å·²é˜…è¯»æ‰§è¡Œé¡ºåºè¯´æ˜
- [ ] ç†è§£ä¸ºä»€ä¹ˆè¦å…ˆé‡å‘½åç›®å½•
- [ ] å·²åˆ›å»ºå¤‡ä»½åˆ†æ”¯
- [ ] å·¥ä½œç›®å½•å¹²å‡€ï¼ˆæ— æœªæäº¤æ›´æ”¹ï¼‰

### æ‰§è¡Œä¸­æ£€æŸ¥

- [ ] ç¬¬ 1 æ­¥ï¼šç›®å½•å·²é‡å‘½å
- [ ] ç¬¬ 2 æ­¥ï¼šåç«¯æ–‡ä»¶å·²é‡å‘½å
- [ ] ç¬¬ 3 æ­¥ï¼šå‰ç«¯æ–‡ä»¶å·²é‡å‘½åï¼ˆåœ¨æ–°ç›®å½•ä¸‹ï¼‰
- [ ] ç¬¬ 4 æ­¥ï¼šæ‰€æœ‰å¼•ç”¨å·²æ›´æ–°

### æ‰§è¡ŒåéªŒè¯

- [ ] è¿è¡Œ `make test` é€šè¿‡
- [ ] å‰ç«¯é¡µé¢æ­£å¸¸åŠ è½½
- [ ] æµè§ˆå™¨æ§åˆ¶å°æ—  404 é”™è¯¯
- [ ] æ²¡æœ‰æ—§è·¯å¾„æ®‹ç•™

---

## ğŸš¨ å¸¸è§é”™è¯¯

### é”™è¯¯ 1ï¼šå…ˆé‡å‘½åæ–‡ä»¶å†é‡å‘½åç›®å½•

**ç—‡çŠ¶**ï¼š
```bash
# é”™è¯¯ï¼šæ–‡ä»¶è·¯å¾„ä¸å­˜åœ¨
git mv app/static/js/common/capacity_stats/chart-renderer.js ...
# Error: pathspec 'app/static/js/common/capacity_stats/chart-renderer.js' did not match any files
```

**åŸå› **ï¼šç›®å½•å·²ç»é‡å‘½åï¼Œä½†ä½¿ç”¨äº†æ—§çš„ç›®å½•è·¯å¾„

**è§£å†³**ï¼šä½¿ç”¨æ–°çš„ç›®å½•è·¯å¾„

### é”™è¯¯ 2ï¼šå¿˜è®°æ›´æ–°ç›®å½•è·¯å¾„å¼•ç”¨

**ç—‡çŠ¶**ï¼š
```
404 Not Found: /static/js/common/capacity_stats/chart-renderer.js
```

**åŸå› **ï¼šHTML æ¨¡æ¿ä¸­è¿˜åœ¨ä½¿ç”¨æ—§çš„ç›®å½•è·¯å¾„

**è§£å†³**ï¼šæ›´æ–° HTML æ¨¡æ¿ä¸­çš„ç›®å½•è·¯å¾„

### é”™è¯¯ 3ï¼šéƒ¨åˆ†æ–‡ä»¶é—æ¼

**ç—‡çŠ¶**ï¼šæŸäº›æ–‡ä»¶è¿˜åœ¨ä½¿ç”¨æ—§åç§°

**åŸå› **ï¼šæ‰‹åŠ¨æ‰§è¡Œæ—¶é—æ¼äº†æŸäº›æ–‡ä»¶

**è§£å†³**ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œç¡®ä¿æ‰€æœ‰æ–‡ä»¶éƒ½è¢«å¤„ç†

---

## ğŸ’¡ æœ€ä½³å®è·µ

1. **ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬**ï¼šé¿å…æ‰‹åŠ¨æ“ä½œçš„é”™è¯¯
2. **å…ˆé¢„è§ˆå†æ‰§è¡Œ**ï¼šä½¿ç”¨ `--dry-run` æ¨¡å¼
3. **åˆ†æ­¥éªŒè¯**ï¼šæ¯ä¸ªé˜¶æ®µåéƒ½éªŒè¯ç»“æœ
4. **ä¿æŒå¤‡ä»½**ï¼šåˆ›å»ºå¤‡ä»½åˆ†æ”¯å’Œæ ‡ç­¾
5. **å……åˆ†æµ‹è¯•**ï¼šæ‰§è¡Œå®Œæ•´çš„æµ‹è¯•å¥—ä»¶

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å®Œæ•´é‡æ„æ¸…å•](./å®Œæ•´é‡æ„æ¸…å•.md) - æ‰€æœ‰é‡æ„ä»»åŠ¡
- [é‡æ„ä¼˜å…ˆçº§æ¸…å•](./é‡æ„ä¼˜å…ˆçº§æ¸…å•.md) - å¿«é€Ÿå‚è€ƒ
- [ç›®å½•é‡æ„è¡¥å……è¯´æ˜](./ç›®å½•é‡æ„è¡¥å……è¯´æ˜.md) - ç›®å½•é‡æ„è¯¦æƒ…

---

*éµå¾ªæ­£ç¡®çš„æ‰§è¡Œé¡ºåºï¼Œè®©é‡æ„æ›´é«˜æ•ˆã€æ›´å®‰å…¨ï¼*
