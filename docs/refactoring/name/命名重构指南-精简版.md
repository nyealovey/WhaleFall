# å‘½åè§„èŒƒé‡æ„æŒ‡å—ï¼ˆç²¾ç®€ç‰ˆï¼‰

> 79 é¡¹å‘½åé—®é¢˜çš„å®Œæ•´é‡æ„æ–¹æ¡ˆ

## ğŸ“Š é—®é¢˜æ¦‚è§ˆ

**æ€»è®¡**: 79 é¡¹å‘½åé—®é¢˜
- åç«¯æ–‡ä»¶: 18 ä¸ªï¼ˆè·¯ç”± 2 + è§†å›¾ 7 + æœåŠ¡ 9ï¼‰
- å‰ç«¯ç›®å½•: 5 ä¸ª
- å‰ç«¯æ–‡ä»¶: 21 ä¸ªï¼ˆJS 13 + CSS 8ï¼‰
- å‡½æ•°å‘½å: 38 ä¸ª

**é¢„è®¡æ—¶é—´**: 5-7 å¤© | **é£é™©**: ä½-ä¸­

---

## ğŸš€ æ‰§è¡Œæ–¹æ¡ˆ

### æ–¹æ¡ˆ A: è‡ªåŠ¨åŒ–ï¼ˆæ¨èï¼‰

```bash
# é¢„è§ˆ
./scripts/refactor_naming.sh --dry-run

# æ‰§è¡Œï¼ˆè‡ªåŠ¨æµ‹è¯• + ç”ŸæˆæŠ¥å‘Šï¼‰
./scripts/refactor_naming.sh
```

### æ–¹æ¡ˆ B: æ‰‹åŠ¨æ‰§è¡Œ

æŒ‰ä»¥ä¸‹é¡ºåºæ‰§è¡Œï¼š**ç›®å½• â†’ æ–‡ä»¶ â†’ å¼•ç”¨**

---

## ğŸ“‹ è¯¦ç»†æ¸…å•

### 1. åç«¯æ–‡ä»¶é‡å‘½åï¼ˆ18 ä¸ªï¼‰

#### è·¯ç”±æ–‡ä»¶ï¼ˆ2 ä¸ªï¼‰
```bash
app/routes/database_aggr.py â†’ database_aggregations.py
app/routes/instance_aggr.py â†’ instance_aggregations.py
```

#### è§†å›¾æ–‡ä»¶ï¼ˆ7 ä¸ªï¼‰
```bash
app/views/
  account_classification_form_view.py â†’ classification_forms.py
  change_password_form_view.py â†’ password_forms.py
  credential_form_view.py â†’ credential_forms.py
  instance_form_view.py â†’ instance_forms.py
  scheduler_job_form_view.py â†’ scheduler_forms.py
  tag_form_view.py â†’ tag_forms.py
  user_form_view.py â†’ user_forms.py
```

#### æœåŠ¡æ–‡ä»¶ï¼ˆ9 ä¸ªï¼‰
```bash
app/services/form_service/
  change_password_form_service.py â†’ password_service.py
  classification_form_service.py â†’ classification_service.py
  classification_rule_form_service.py â†’ classification_rule_service.py
  credentials_form_service.py â†’ credential_service.py
  instances_form_service.py â†’ instance_service.py
  resource_form_service.py â†’ resource_service.py
  scheduler_job_form_service.py â†’ scheduler_job_service.py
  tags_form_service.py â†’ tag_service.py
  users_form_service.py â†’ user_service.py
```

### 2. å‰ç«¯ç›®å½•é‡å‘½åï¼ˆ5 ä¸ªï¼‰

```bash
# ä¼˜å…ˆæ‰§è¡Œï¼ˆæ–‡ä»¶ä¼šè‡ªåŠ¨è·Ÿéšï¼‰
app/static/css/pages/capacity_stats/ â†’ capacity-stats/
app/static/js/common/capacity_stats/ â†’ capacity-stats/
app/static/js/pages/capacity_stats/ â†’ capacity-stats/
app/static/js/pages/accounts/classification_rules/ â†’ classification-rules/
app/templates/accounts/classification_rules/ â†’ classification-rules/
```

### 3. å‰ç«¯æ–‡ä»¶é‡å‘½åï¼ˆ21 ä¸ªï¼‰

#### JavaScriptï¼ˆ13 ä¸ªï¼‰
```bash
# ä¸‹åˆ’çº¿ â†’ è¿å­—ç¬¦
permission_policy_center.js â†’ permission-policy-center.js
chart_renderer.js â†’ chart-renderer.js
data_source.js â†’ data-source.js
summary_cards.js â†’ summary-cards.js
tag_selector.js â†’ tag-selector.js
filter_utils.js â†’ filter-utils.js
account_classification.js â†’ account-classification.js
aggregations_chart.js â†’ aggregations-chart.js
change_password.js â†’ change-password.js
database_aggregations.js â†’ database-aggregations.js
instance_aggregations.js â†’ instance-aggregations.js
sync_sessions.js â†’ sync-sessions.js
batch_assign.js â†’ batch-assign.js
```

#### CSSï¼ˆ8 ä¸ªï¼‰
```bash
# ä¸‹åˆ’çº¿ â†’ è¿å­—ç¬¦
tag_selector.css â†’ tag-selector.css
filter_common.css â†’ filter-common.css
account_classification.css â†’ account-classification.css
change_password.css â†’ change-password.css
database_aggregations.css â†’ database-aggregations.css
instance_aggregations.css â†’ instance-aggregations.css
sync_sessions.css â†’ sync-sessions.css
batch_assign.css â†’ batch-assign.css
```

### 4. å‡½æ•°é‡å‘½åï¼ˆ38 ä¸ªï¼‰

#### ç§»é™¤ api_ å‰ç¼€ï¼ˆ28 ä¸ªï¼‰
```python
# routes/users.py
api_get_users() â†’ get_users()
api_create_user() â†’ create_user()
api_update_user() â†’ update_user()
api_delete_user() â†’ delete_user()
api_get_user() â†’ get_user()
api_get_stats() â†’ get_stats()

# routes/instance.py
api_list() â†’ list_instances()
api_detail() â†’ get_instance()
api_get_accounts() â†’ get_accounts()

# routes/credentials.py
api_list() â†’ list_credentials()
api_detail() â†’ get_credential()

# routes/tags.py
api_tags() â†’ list_tags()
api_tag_detail() â†’ get_tag()
api_categories() â†’ list_categories()

# routes/tags_batch.py
api_instance_tags() â†’ get_instance_tags()
api_instances() â†’ list_instances()
api_all_tags() â†’ list_all_tags()

# routes/sync_sessions.py
api_list_sessions() â†’ list_sessions()
api_get_session_detail() â†’ get_session_detail()
api_cancel_session() â†’ cancel_session()
api_get_error_logs() â†’ get_error_logs()

# routes/dashboard.py
api_overview() â†’ get_overview()
api_charts() â†’ get_charts()
api_activities() â†’ get_activities()
api_status() â†’ get_status()

# routes/health.py
api_health() â†’ get_health()
api_cache_health() â†’ get_cache_health()

# routes/instance_statistics.py
api_statistics() â†’ get_statistics()
```

#### ä¿®å¤è¯­æ³•é”™è¯¯ï¼ˆ4 ä¸ªï¼‰
```python
# routes/database_aggr.py
get_databases_aggregations() â†’ get_database_aggregations()
get_databases_aggregations_summary() â†’ get_database_aggregations_summary()

# routes/instance_aggr.py
get_instances_aggregations() â†’ get_instance_aggregations()
get_instances_aggregations_summary() â†’ get_instance_aggregations_summary()
```

#### ç§»é™¤ _optimized åç¼€ï¼ˆ2 ä¸ªï¼‰
```python
# services/account_classification/orchestrator.py
auto_classify_accounts_optimized() â†’ auto_classify_accounts()

# services/account_sync/adapters/sqlserver_adapter.py
_get_all_users_database_permissions_batch_optimized() â†’ _get_all_users_database_permissions_batch()
```

#### ç»Ÿä¸€ _api åç¼€ï¼ˆ4 ä¸ªï¼‰
```python
# routes/account_stat.py
statistics_api() â†’ get_statistics()
statistics_summary_api() â†’ get_statistics_summary()
statistics_db_type_api() â†’ get_statistics_by_db_type()
statistics_classification_api() â†’ get_classification_statistics()
```

---

## âš ï¸ æ‰§è¡Œé¡ºåºï¼ˆå…³é”®ï¼‰

### æ­£ç¡®é¡ºåº âœ…

```
1. é‡å‘½åç›®å½•ï¼ˆ5 ä¸ªï¼‰
   â””â”€> æ–‡ä»¶è‡ªåŠ¨è·Ÿéšç§»åŠ¨
   
2. é‡å‘½ååç«¯æ–‡ä»¶ï¼ˆ18 ä¸ªï¼‰
   â””â”€> åœ¨åŸç›®å½•ç»“æ„ä¸‹
   
3. é‡å‘½åå‰ç«¯æ–‡ä»¶ï¼ˆ21 ä¸ªï¼‰
   â””â”€> åœ¨æ–°ç›®å½•ç»“æ„ä¸‹
   
4. æ›´æ–°æ‰€æœ‰å¼•ç”¨
   â””â”€> åªéœ€æ›´æ–°ä¸€æ¬¡
```

**æ•ˆç‡**: å‡å°‘ 50% å·¥ä½œé‡

### é”™è¯¯é¡ºåº âŒ

```
1. é‡å‘½åæ–‡ä»¶
2. é‡å‘½åç›®å½•
   â””â”€> éœ€è¦ä¿®æ”¹ä¸¤æ¬¡å¼•ç”¨ï¼
```

---

## ğŸ”§ å‘½ä»¤æ¨¡æ¿

### æ­¥éª¤ 1: é‡å‘½åç›®å½•

```bash
#!/bin/bash
# å‰ç«¯ç›®å½•ï¼ˆä¼˜å…ˆæ‰§è¡Œï¼‰
git mv app/static/css/pages/capacity_stats app/static/css/pages/capacity-stats
git mv app/static/js/common/capacity_stats app/static/js/common/capacity-stats
git mv app/static/js/pages/capacity_stats app/static/js/pages/capacity-stats
git mv app/static/js/pages/accounts/classification_rules app/static/js/pages/accounts/classification-rules
git mv app/templates/accounts/classification_rules app/templates/accounts/classification-rules
```

### æ­¥éª¤ 2: é‡å‘½ååç«¯æ–‡ä»¶

```bash
# è·¯ç”±æ–‡ä»¶
git mv app/routes/database_aggr.py app/routes/database_aggregations.py
git mv app/routes/instance_aggr.py app/routes/instance_aggregations.py

# è§†å›¾æ–‡ä»¶
git mv app/views/account_classification_form_view.py app/views/classification_forms.py
git mv app/views/change_password_form_view.py app/views/password_forms.py
git mv app/views/credential_form_view.py app/views/credential_forms.py
git mv app/views/instance_form_view.py app/views/instance_forms.py
git mv app/views/scheduler_job_form_view.py app/views/scheduler_forms.py
git mv app/views/tag_form_view.py app/views/tag_forms.py
git mv app/views/user_form_view.py app/views/user_forms.py

# æœåŠ¡æ–‡ä»¶
git mv app/services/form_service/change_password_form_service.py app/services/form_service/password_service.py
git mv app/services/form_service/classification_form_service.py app/services/form_service/classification_service.py
git mv app/services/form_service/classification_rule_form_service.py app/services/form_service/classification_rule_service.py
git mv app/services/form_service/credentials_form_service.py app/services/form_service/credential_service.py
git mv app/services/form_service/instances_form_service.py app/services/form_service/instance_service.py
git mv app/services/form_service/resource_form_service.py app/services/form_service/resource_service.py
git mv app/services/form_service/scheduler_job_form_service.py app/services/form_service/scheduler_job_service.py
git mv app/services/form_service/tags_form_service.py app/services/form_service/tag_service.py
git mv app/services/form_service/users_form_service.py app/services/form_service/user_service.py
```

### æ­¥éª¤ 3: é‡å‘½åå‰ç«¯æ–‡ä»¶

```bash
# JavaScript æ–‡ä»¶ï¼ˆåœ¨æ–°ç›®å½•ä¸‹ï¼‰
git mv app/static/js/common/permission_policy_center.js app/static/js/common/permission-policy-center.js
git mv app/static/js/common/capacity-stats/chart_renderer.js app/static/js/common/capacity-stats/chart-renderer.js
git mv app/static/js/common/capacity-stats/data_source.js app/static/js/common/capacity-stats/data-source.js
git mv app/static/js/common/capacity-stats/summary_cards.js app/static/js/common/capacity-stats/summary-cards.js
git mv app/static/js/components/tag_selector.js app/static/js/components/tag-selector.js
git mv app/static/js/components/filters/filter_utils.js app/static/js/components/filters/filter-utils.js
git mv app/static/js/pages/accounts/account_classification.js app/static/js/pages/accounts/account-classification.js
git mv app/static/js/pages/admin/aggregations_chart.js app/static/js/pages/admin/aggregations-chart.js
git mv app/static/js/pages/auth/change_password.js app/static/js/pages/auth/change-password.js
git mv app/static/js/pages/capacity-stats/database_aggregations.js app/static/js/pages/capacity-stats/database-aggregations.js
git mv app/static/js/pages/capacity-stats/instance_aggregations.js app/static/js/pages/capacity-stats/instance-aggregations.js
git mv app/static/js/pages/history/sync_sessions.js app/static/js/pages/history/sync-sessions.js
git mv app/static/js/pages/tags/batch_assign.js app/static/js/pages/tags/batch-assign.js

# CSS æ–‡ä»¶
git mv app/static/css/components/tag_selector.css app/static/css/components/tag-selector.css
git mv app/static/css/components/filters/filter_common.css app/static/css/components/filters/filter-common.css
git mv app/static/css/pages/accounts/account_classification.css app/static/css/pages/accounts/account-classification.css
git mv app/static/css/pages/auth/change_password.css app/static/css/pages/auth/change-password.css
git mv app/static/css/pages/capacity-stats/database_aggregations.css app/static/css/pages/capacity-stats/database-aggregations.css
git mv app/static/css/pages/capacity-stats/instance_aggregations.css app/static/css/pages/capacity-stats/instance-aggregations.css
git mv app/static/css/pages/history/sync_sessions.css app/static/css/pages/history/sync-sessions.css
git mv app/static/css/pages/tags/batch_assign.css app/static/css/pages/tags/batch-assign.css
```

### æ­¥éª¤ 4: æ›´æ–°å¼•ç”¨

```bash
# æ›´æ–°åç«¯å¯¼å…¥ï¼ˆmacOSï¼‰
find app -name "*.py" -type f -exec sed -i '' \
  -e 's/from app\.routes\.database_aggr/from app.routes.database_aggregations/g' \
  -e 's/from app\.routes\.instance_aggr/from app.routes.instance_aggregations/g' \
  -e 's/from app\.views\.account_classification_form_view/from app.views.classification_forms/g' \
  -e 's/from app\.views\.change_password_form_view/from app.views.password_forms/g' \
  -e 's/from app\.views\.credential_form_view/from app.views.credential_forms/g' \
  -e 's/from app\.views\.instance_form_view/from app.views.instance_forms/g' \
  -e 's/from app\.views\.scheduler_job_form_view/from app.views.scheduler_forms/g' \
  -e 's/from app\.views\.tag_form_view/from app.views.tag_forms/g' \
  -e 's/from app\.views\.user_form_view/from app.views.user_forms/g' \
  -e 's/from app\.services\.form_service\.change_password_form_service/from app.services.form_service.password_service/g' \
  -e 's/from app\.services\.form_service\.classification_form_service/from app.services.form_service.classification_service/g' \
  -e 's/from app\.services\.form_service\.classification_rule_form_service/from app.services.form_service.classification_rule_service/g' \
  -e 's/from app\.services\.form_service\.credentials_form_service/from app.services.form_service.credential_service/g' \
  -e 's/from app\.services\.form_service\.instances_form_service/from app.services.form_service.instance_service/g' \
  -e 's/from app\.services\.form_service\.resource_form_service/from app.services.form_service.resource_service/g' \
  -e 's/from app\.services\.form_service\.scheduler_job_form_service/from app.services.form_service.scheduler_job_service/g' \
  -e 's/from app\.services\.form_service\.tags_form_service/from app.services.form_service.tag_service/g' \
  -e 's/from app\.services\.form_service\.users_form_service/from app.services.form_service.user_service/g' \
  {} +

# æ›´æ–°å‰ç«¯å¼•ç”¨
find app/templates -name "*.html" -type f -exec sed -i '' \
  -e 's/capacity_stats\//capacity-stats\//g' \
  -e 's/classification_rules\//classification-rules\//g' \
  -e 's/permission_policy_center\.js/permission-policy-center.js/g' \
  -e 's/chart_renderer\.js/chart-renderer.js/g' \
  -e 's/data_source\.js/data-source.js/g' \
  -e 's/summary_cards\.js/summary-cards.js/g' \
  -e 's/tag_selector\.js/tag-selector.js/g' \
  -e 's/filter_utils\.js/filter-utils.js/g' \
  -e 's/account_classification\.js/account-classification.js/g' \
  -e 's/aggregations_chart\.js/aggregations-chart.js/g' \
  -e 's/change_password\.js/change-password.js/g' \
  -e 's/database_aggregations\.js/database-aggregations.js/g' \
  -e 's/instance_aggregations\.js/instance-aggregations.js/g' \
  -e 's/sync_sessions\.js/sync-sessions.js/g' \
  -e 's/batch_assign\.js/batch-assign.js/g' \
  -e 's/tag_selector\.css/tag-selector.css/g' \
  -e 's/filter_common\.css/filter-common.css/g' \
  -e 's/account_classification\.css/account-classification.css/g' \
  -e 's/change_password\.css/change-password.css/g' \
  -e 's/database_aggregations\.css/database-aggregations.css/g' \
  -e 's/instance_aggregations\.css/instance-aggregations.css/g' \
  -e 's/sync_sessions\.css/sync-sessions.css/g' \
  -e 's/batch_assign\.css/batch-assign.css/g' \
  {} +
```

---

## âœ… éªŒè¯æ¸…å•

### æ‰§è¡Œåæ£€æŸ¥

- [ ] è¿è¡Œ `make test` é€šè¿‡
- [ ] è¿è¡Œ `make quality` é€šè¿‡
- [ ] å‰ç«¯é¡µé¢æ­£å¸¸åŠ è½½
- [ ] æµè§ˆå™¨æ§åˆ¶å°æ—  404 é”™è¯¯

### æœç´¢æ®‹ç•™

```bash
# æœç´¢æ—§åç§°
rg "database_aggr" app/
rg "capacity_stats/" app/templates/ app/static/
rg "api_get_users" app/
```

---

## ğŸ“š å‘½åè§„èŒƒ

### Python

| ç±»å‹ | è§„èŒƒ | ç¤ºä¾‹ |
|-----|------|------|
| æ¨¡å— | snake_case | `user_service.py` |
| ç±» | CapWords | `UserService` |
| å‡½æ•° | snake_case | `get_user()` |
| å¸¸é‡ | UPPER_SNAKE_CASE | `MAX_SIZE` |

### JavaScript

| ç±»å‹ | è§„èŒƒ | ç¤ºä¾‹ |
|-----|------|------|
| æ–‡ä»¶ | kebab-case | `user-service.js` |
| ç±» | PascalCase | `UserService` |
| å‡½æ•° | camelCase | `getUser()` |
| å¸¸é‡ | UPPER_SNAKE_CASE | `MAX_SIZE` |

---

## ğŸ”„ å›æ»šæ–¹æ¡ˆ

```bash
# åˆ›å»ºå¤‡ä»½
git tag backup-before-naming-$(date +%Y%m%d%H%M%S)

# å›æ»š
git reset --hard backup-before-naming-XXXXXX
```

---

*æœ€åæ›´æ–°: 2025-11-13*
