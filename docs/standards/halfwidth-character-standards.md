# 半角字符与全角字符禁用规范

> 状态: Active
> 负责人: WhaleFall Team
> 创建: 2025-12-26
> 更新: 2025-12-26
> 范围: `docs/**` 文档, 代码注释, Docstring

## 目的

- 统一文档与注释的标点/符号风格, 降低检索, diff, 复制粘贴带来的噪音.
- 避免全角空格等不可见字符导致的格式错乱与隐性错误.

## 适用范围

- 文档: `docs/**` 下所有 Markdown.
- 注释: Python `#`, docstring, JS/CSS `//` `/* ... */`, Jinja2 注释等.

说明: 本规范仅约束可被 ASCII 表达的字符(标点/符号/空格/英文/数字)必须使用半角 ASCII, 不要求把中文内容翻译为英文.

不适用/不强制:

- 用户可见文案/错误消息/测试夹具等业务数据字符串(它们不是注释). 如产品侧也需要统一, 另行制定文案规范.

## 规则(MUST/SHOULD/MAY)

- MUST: 从 2025-12-26 起, 新增或修改的文档/注释内容必须符合本规范. 存量内容遵循"越改越干净"原则, 在改动附近顺手清理.

### 1) 仅使用半角 ASCII 标点/符号

- MUST: 所有标点/符号/空格, 以及英文与数字, 只使用半角 ASCII 形式.
- MUST NOT: 使用 Unicode 全角版本或非 ASCII 变体, 包括但不限于:
  - 全角标点: `\x{FF0C}`(comma), `\x{FF1A}`(colon), `\x{FF1B}`(semicolon), `\x{FF1F}`(question), `\x{FF01}`(exclamation), `\x{FF08}`/`\x{FF09}`(parentheses)
  - 全角英文字母/数字: `\x{FF10}`-`\x{FF19}`, `\x{FF21}`-`\x{FF3A}`, `\x{FF41}`-`\x{FF5A}`
  - 中文标点: `\x{3001}`(ideographic comma), `\x{3002}`(ideographic full stop), `\x{3010}`/`\x{3011}`(brackets)
  - 全角空格: `\x{3000}`
  - 弯引号/省略号/破折号等变体: `\x{2018}`/`\x{2019}`, `\x{201C}`/`\x{201D}`, `\x{2026}`, `\x{2013}`/`\x{2014}`

### 2) 元信息块与规范文档的格式

- MUST: `docs/standards/**` 内的元信息块统一使用半角冒号 `:`, 例如 `> 状态: Active`.
- SHOULD: 文档内容中避免使用"中文引号/中文括号/中文书名号"等非 ASCII 变体, 统一用 `"`/`'`/`()`.

### 3) 例外(仅限必要场景)

- MAY: 在讨论"字符本身"的技术文档里, 使用 Unicode code point(如 `\x{FF1A}`)表达问题字符, 避免直接粘贴全角字符造成二次污染.

## 正反例

### 文档元信息块

反例:

```text
> 状态\uFF1AActive
```

正例:

```text
> 状态: Active
```

### 注释

反例:

```python
# 注意\uFF1A这里需要兜底
```

正例:

```python
# 注意: 这里需要兜底
```

## 门禁/检查方式

- 评审检查: 发现全角/非 ASCII 标点, 直接要求替换为半角 ASCII.
- 自查命令(示例):

```bash
rg -n -P "[\\x{3000}\\x{3001}\\x{3002}\\x{3010}\\x{3011}\\x{FF01}\\x{FF08}\\x{FF09}\\x{FF0C}\\x{FF1A}\\x{FF1B}\\x{FF1F}\\x{2018}\\x{2019}\\x{201C}\\x{201D}\\x{2013}\\x{2014}\\x{2026}]" docs app scripts tests
```

## 变更历史

- 2025-12-26: 新增半角字符要求, 禁用全角/非 ASCII 标点与全角空格.
