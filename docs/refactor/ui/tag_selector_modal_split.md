# 标签选择模态两列布局调整方案

## 背景
现有“选择标签”模态将标签分类与标签列表堆叠在同一列：上方是 Tab/Chip 样式的分类筛选，下方单列展示所有标签。随着标签数量和分类增多，该布局出现以下问题：

1. **分类上下滚动成本高**：切换分类需要穿过已选标签区域，难以快速定位；
2. **选项密度过高**：单列同时承载分类、标签、操作按钮，视觉噪声大；
3. **空间利用不足**：模态宽度足够，但左侧留白浪费，导致标签列表仍需滚动。

根据最新批量分配页面的治理经验，需要将分类与标签拆分为左右两列，保障信息结构清晰，并对齐 `docs/standards/color-guidelines.md` 中对组件、按钮的限制。

## 目标
- 左列展示“分类清单”，支持滚动与选中态，宽度约模态的 35%-40%；
- 右列展示“标签列表”，与左列同步过滤结果，宽度占 60%-65%；
- 顶部“已选择”区域与底部按钮沿用现有样式；
- 分类列与标签列的可滚动区域高度对齐，避免双滚动条错位；
- 不新增移动端样式，保证桌面端体验稳定。

## 改动范围
1. **模板结构（`app/templates/components/tags/tag-selector-modal.html` 或实际定义文件）**
   - 使用 `modal-grid` 容器，将内容拆成 `category-panel` 与 `tag-panel` 两个 `<section>`；
   - 已选标签展示保持在顶部，只需调整外边距配合两列内容。

2. **样式（`app/static/css/components/tag-selector.css`）**
   - 新增 `display: grid` 布局，`grid-template-columns: 0.4fr 0.6fr`，并在 ≤992px 时回退为单列；
   - 分类列表复用 `chip-outline`/`status-pill`，选中态使用 token 颜色，不增加 HEX；
   - 标签列表保持现有行样式，但补充 `flex` 以适配列缩放。

3. **交互脚本（`app/static/js/modules/views/components/tags/tag-selector-controller.js`）**
   - 初始化分类列时将数据映射为 `categoryList` DOM，并在点击时触发原有筛选逻辑；
   - 确保键盘导航（上下/Enter）仍可选择标签；
   - 保持“确认选择/取消”按钮行为不变。

4. **无障碍与提示**
   - 为两列容器添加 `aria-label`/`role="list"`，方便屏幕阅读器识别；
   - 保留顶部提示文案，动态展示“已选 X 个标签”。

## 实施步骤
1. 调整模态模板为两列结构，保留按钮区。
2. 编写/更新 CSS：布局、滚动、高度对齐、选中态。
3. 更新 JS 控制器：
   - 渲染分类列项；
   - 绑定同步滚动或选中逻辑；
   - 复用现有 TagSelector 事件，避免接口改动。
4. 在本地验证：
   - 切换分类、添加/移除标签、搜索（若有）；
   - 已选标签计数与按钮状态；
   - 浏览器兼容 (Chrome/Edge)。

## 验收标准
- 左右两列布局在 1440px 桌面下居中显示，分类列不再随内容纵向抖动；
- 切换分类后右列即时过滤，无额外闪烁；
- “确认选择/取消”按钮与现有流程一致。

> 完成该调整后，请在 PR 模板附上“前/后”截图，并运行 `./scripts/refactor_naming.sh --dry-run` 与 `npm run lint`（若存在）以确保质量门禁通过。
