FBT001 Boolean-typed positional argument in function definition
  --> app.py:50:53
   |
50 | def _log_startup_instructions(host: str, port: int, debug: bool) -> None:
   |                                                     ^^^^^
51 |     """è¾“å‡ºå¸¸è§çš„æœ¬åœ°è®¿é—®è¯´æ˜Ž, ä¾¿äºŽå¼€å‘è€…æŸ¥é˜…ã€‚."""
52 |     logger = get_system_logger()
   |

D205 1 blank line required between summary line and description
 --> app/__init__.py:1:1
  |
1 | / """é²¸è½ - Flaskåº”ç”¨åˆå§‹åŒ–
2 | | åŸºäºŽFlaskçš„DBAæ•°æ®åº“ç®¡ç†Webåº”ç”¨.
3 | | """
  | |___^
4 |
5 |   import logging
  |
help: Insert single blank line

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/__init__.py:32:13
   |
30 | load_dotenv()
31 |
32 | # åˆå§‹åŒ–åŸºç¡€æ—¥å¿—è®°å½•å™¨ï¼ˆåœ¨structlogé…ç½®ä¹‹å‰ï¼‰
   |                       ^^
33 | logger = logging.getLogger(__name__)
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/__init__.py:32:28
   |
30 | load_dotenv()
31 |
32 | # åˆå§‹åŒ–åŸºç¡€æ—¥å¿—è®°å½•å™¨ï¼ˆåœ¨structlogé…ç½®ä¹‹å‰ï¼‰
   |                                            ^^
33 | logger = logging.getLogger(__name__)
   |

PTH110 `os.path.exists()` should be replaced by `Path.exists()`
  --> app/__init__.py:37:35
   |
35 | # è®¾ç½®Oracle Instant ClientçŽ¯å¢ƒå˜é‡
36 | oracle_instant_client_path = os.getenv("DYLD_LIBRARY_PATH")
37 | if oracle_instant_client_path and os.path.exists(oracle_instant_client_path):
   |                                   ^^^^^^^^^^^^^^
38 |     current_dyld_path = os.environ.get("DYLD_LIBRARY_PATH", "")
39 |     if oracle_instant_client_path not in current_dyld_path:
   |
help: Replace with `Path(...).exists()`

G004 Logging statement uses f-string
  --> app/__init__.py:41:21
   |
39 |     if oracle_instant_client_path not in current_dyld_path:
40 |         os.environ["DYLD_LIBRARY_PATH"] = f"{oracle_instant_client_path}:{current_dyld_path}"
41 |         logger.info(f"ðŸ”§ å·²è®¾ç½®Oracle Instant ClientçŽ¯å¢ƒå˜é‡: {oracle_instant_client_path}")
   |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
42 |
43 | # åˆå§‹åŒ–æ‰©å±•
   |
help: Convert to lazy `%` formatting

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/__init__.py:65:26
   |
64 |     Args:
65 |         config_name: é…ç½®åç§°ï¼Œé»˜è®¤ä¸ºNone
   |                              ^^
66 |         init_scheduler_on_start: æ˜¯å¦åœ¨åˆ›å»ºåº”ç”¨æ—¶åˆå§‹åŒ–è°ƒåº¦å™¨
   |

PLC0415 `import` should be at the top-level of a file
  --> app/__init__.py:90:5
   |
89 |     # é…ç½®ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ
90 |     from app.utils.structlog_config import configure_structlog
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
91 |
92 |     configure_structlog(app)
   |

PLC0415 `import` should be at the top-level of a file
  --> app/__init__.py:98:5
   |
97 |     # æ³¨å†Œå¢žå¼ºçš„é”™è¯¯å¤„ç†å™¨
98 |     from app.utils.response_utils import unified_error_response
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
99 |     from app.utils.structlog_config import ErrorContext, enhanced_error_handler
   |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:99:5
    |
 97 |     # æ³¨å†Œå¢žå¼ºçš„é”™è¯¯å¤„ç†å™¨
 98 |     from app.utils.response_utils import unified_error_response
 99 |     from app.utils.structlog_config import ErrorContext, enhanced_error_handler
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
100 |
101 |     app.enhanced_error_handler = enhanced_error_handler
    |

ANN202 Missing return type annotation for private function `handle_global_exception`
   --> app/__init__.py:105:9
    |
103 |     # æ³¨å†Œå…¨å±€é”™è¯¯å¤„ç†å™¨
104 |     @app.errorhandler(Exception)
105 |     def handle_global_exception(error: Exception):
    |         ^^^^^^^^^^^^^^^^^^^^^^^
106 |         """å…¨å±€é”™è¯¯å¤„ç†."""
107 |         from flask import request
    |
help: Add return type annotation

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:107:9
    |
105 |     def handle_global_exception(error: Exception):
106 |         """å…¨å±€é”™è¯¯å¤„ç†."""
107 |         from flask import request
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^
108 |
109 |         payload, status_code = unified_error_response(error, context=ErrorContext(error, request))
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:118:9
    |
117 |     if init_scheduler_on_start:
118 |         from app.scheduler import init_scheduler
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
119 |
120 |         try:
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:124:13
    |
122 |         except Exception as e:
123 |             # è°ƒåº¦å™¨åˆå§‹åŒ–å¤±è´¥ä¸å½±å“åº”ç”¨å¯åŠ¨
124 |             from app.utils.structlog_config import get_system_logger
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
125 |
126 |             scheduler_logger = get_system_logger()
    |

G004 Logging statement uses f-string
   --> app/__init__.py:127:40
    |
126 |             scheduler_logger = get_system_logger()
127 |             scheduler_logger.exception(f"è°ƒåº¦å™¨åˆå§‹åŒ–å¤±è´¥ï¼Œåº”ç”¨å°†ç»§ç»­å¯åŠ¨: {e}")
    |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
128 |
129 |     return app
    |
help: Convert to lazy `%` formatting

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/__init__.py:127:50
    |
126 |             scheduler_logger = get_system_logger()
127 |             scheduler_logger.exception(f"è°ƒåº¦å™¨åˆå§‹åŒ–å¤±è´¥ï¼Œåº”ç”¨å°†ç»§ç»­å¯åŠ¨: {e}")
    |                                                          ^^
128 |
129 |     return app
    |

TRY401 Redundant exception object included in `logging.exception` call
   --> app/__init__.py:127:61
    |
126 |             scheduler_logger = get_system_logger()
127 |             scheduler_logger.exception(f"è°ƒåº¦å™¨åˆå§‹åŒ–å¤±è´¥ï¼Œåº”ç”¨å°†ç»§ç»­å¯åŠ¨: {e}")
    |                                                                             ^
128 |
129 |     return app
    |

C901 `configure_app` is too complex (11 > 10)
   --> app/__init__.py:132:5
    |
132 | def configure_app(app: Flask, config_name: str | None = None) -> None:  # noqa: ARG001
    |     ^^^^^^^^^^^^^
133 |     """é…ç½® Flask åº”ç”¨çš„æ ¸å¿ƒå‚æ•°ã€‚.
    |

PLR0915 Too many statements (70 > 50)
   --> app/__init__.py:132:5
    |
132 | def configure_app(app: Flask, config_name: str | None = None) -> None:  # noqa: ARG001
    |     ^^^^^^^^^^^^^
133 |     """é…ç½® Flask åº”ç”¨çš„æ ¸å¿ƒå‚æ•°ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/__init__.py:137:26
    |
135 |     Args:
136 |         app: Flask åº”ç”¨å®žä¾‹ã€‚
137 |         config_name: é…ç½®åç§°ï¼Œä¿ç•™ä»¥å…¼å®¹åŽ†å²æŽ¥å£ã€‚
    |                              ^^
138 |
139 |     Returns:
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:150:13
    |
148 |         if app.debug:
149 |             # å¼€å‘çŽ¯å¢ƒä½¿ç”¨éšæœºç”Ÿæˆçš„å¯†é’¥
150 |             import secrets
    |             ^^^^^^^^^^^^^^
151 |
152 |             secret_key = secrets.token_urlsafe(32)
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/__init__.py:153:54
    |
152 |             secret_key = secrets.token_urlsafe(32)
153 |             logger.warning("âš ï¸  å¼€å‘çŽ¯å¢ƒä½¿ç”¨éšæœºç”Ÿæˆçš„SECRET_KEYï¼Œç”Ÿäº§çŽ¯å¢ƒè¯·è®¾ç½®çŽ¯å¢ƒå˜é‡")
    |                                                                ^^
154 |         else:
155 |             error_msg = "SECRET_KEY environment variable must be set in production"
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:161:13
    |
159 |         if app.debug:
160 |             # å¼€å‘çŽ¯å¢ƒä½¿ç”¨éšæœºç”Ÿæˆçš„å¯†é’¥
161 |             import secrets
    |             ^^^^^^^^^^^^^^
162 |
163 |             jwt_secret_key = secrets.token_urlsafe(32)
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/__init__.py:164:58
    |
163 |             jwt_secret_key = secrets.token_urlsafe(32)
164 |             logger.warning("âš ï¸  å¼€å‘çŽ¯å¢ƒä½¿ç”¨éšæœºç”Ÿæˆçš„JWT_SECRET_KEYï¼Œç”Ÿäº§çŽ¯å¢ƒè¯·è®¾ç½®çŽ¯å¢ƒå˜é‡")
    |                                                                    ^^
165 |         else:
166 |             error_msg = "JWT_SECRET_KEY environment variable must be set in production"
    |

PLW1508 Invalid type for environment variable default; expected `str` or `None`
   --> app/__init__.py:171:88
    |
169 |     app.config["SECRET_KEY"] = secret_key
170 |     app.config["JWT_SECRET_KEY"] = jwt_secret_key
171 |     app.config["JWT_ACCESS_TOKEN_EXPIRES"] = int(os.getenv("JWT_ACCESS_TOKEN_EXPIRES", 3600))
    |                                                                                        ^^^^
172 |     app.config["JWT_REFRESH_TOKEN_EXPIRES"] = int(os.getenv("JWT_REFRESH_TOKEN_EXPIRES", 2592000))
    |

PLW1508 Invalid type for environment variable default; expected `str` or `None`
   --> app/__init__.py:172:90
    |
170 |     app.config["JWT_SECRET_KEY"] = jwt_secret_key
171 |     app.config["JWT_ACCESS_TOKEN_EXPIRES"] = int(os.getenv("JWT_ACCESS_TOKEN_EXPIRES", 3600))
172 |     app.config["JWT_REFRESH_TOKEN_EXPIRES"] = int(os.getenv("JWT_REFRESH_TOKEN_EXPIRES", 2592000))
    |                                                                                          ^^^^^^^
173 |
174 |     # æ•°æ®åº“é…ç½®
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/__init__.py:177:21
    |
175 |     database_url = os.getenv("DATABASE_URL") or os.getenv("SQLALCHEMY_DATABASE_URI")
176 |     if not database_url:
177 |         # é»˜è®¤ä½¿ç”¨SQLiteï¼Œä½¿ç”¨ç»å¯¹è·¯å¾„
    |                         ^^
178 |         from pathlib import Path
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:178:9
    |
176 |     if not database_url:
177 |         # é»˜è®¤ä½¿ç”¨SQLiteï¼Œä½¿ç”¨ç»å¯¹è·¯å¾„
178 |         from pathlib import Path
    |         ^^^^^^^^^^^^^^^^^^^^^^^^
179 |
180 |         project_root = Path(__file__).parent.parent
    |

PLW1508 Invalid type for environment variable default; expected `str` or `None`
   --> app/__init__.py:210:82
    |
208 |         app.config["CACHE_REDIS_URL"] = os.getenv("CACHE_REDIS_URL", "redis://localhost:6379/0")
209 |
210 |     app.config["CACHE_DEFAULT_TIMEOUT"] = int(os.getenv("CACHE_DEFAULT_TIMEOUT", 300))
    |                                                                                  ^^^
211 |
212 |     # å®‰å…¨é…ç½®
    |

PLW1508 Invalid type for environment variable default; expected `str` or `None`
   --> app/__init__.py:213:74
    |
212 |     # å®‰å…¨é…ç½®
213 |     app.config["BCRYPT_LOG_ROUNDS"] = int(os.getenv("BCRYPT_LOG_ROUNDS", 12))
    |                                                                          ^^
214 |
215 |     # URL é…ç½® - åŠ¨æ€æ£€æµ‹åè®®
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/__init__.py:225:18
    |
223 |         app.config["PREFERRED_URL_SCHEME"] = "http"
224 |
225 |     # åŠ¨æ€è®¾ç½® URL æ–¹æ¡ˆï¼ˆåŸºäºŽè¯·æ±‚å¤´ï¼‰
    |                        ^^
226 |     @app.before_request
227 |     def detect_protocol() -> None:
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/__init__.py:225:24
    |
223 |         app.config["PREFERRED_URL_SCHEME"] = "http"
224 |
225 |     # åŠ¨æ€è®¾ç½® URL æ–¹æ¡ˆï¼ˆåŸºäºŽè¯·æ±‚å¤´ï¼‰
    |                                    ^^
226 |     @app.before_request
227 |     def detect_protocol() -> None:
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/__init__.py:229:35
    |
227 |     def detect_protocol() -> None:
228 |         """åŠ¨æ€æ£€æµ‹è¯·æ±‚åè®®."""
229 |         # ä¼˜å…ˆæ£€æŸ¥ X-Forwarded-Proto å¤´ï¼ˆNginx ä»£ç†è®¾ç½®ï¼‰
    |                                        ^^
230 |         if request.headers.get(HttpHeaders.X_FORWARDED_PROTO) == "https" or request.is_secure or request.headers.get(HttpHeaders.X_FOâ€¦
231 |             app.config["PREFERRED_URL_SCHEME"] = "https"
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/__init__.py:229:46
    |
227 |     def detect_protocol() -> None:
228 |         """åŠ¨æ€æ£€æµ‹è¯·æ±‚åè®®."""
229 |         # ä¼˜å…ˆæ£€æŸ¥ X-Forwarded-Proto å¤´ï¼ˆNginx ä»£ç†è®¾ç½®ï¼‰
    |                                                        ^^
230 |         if request.headers.get(HttpHeaders.X_FORWARDED_PROTO) == "https" or request.is_secure or request.headers.get(HttpHeaders.X_FOâ€¦
231 |             app.config["PREFERRED_URL_SCHEME"] = "https"
    |

E501 Line too long (154 > 120)
   --> app/__init__.py:230:121
    |
228 | â€¦
229 | â€¦
230 | â€¦" or request.is_secure or request.headers.get(HttpHeaders.X_FORWARDED_SSL) == "on":
    |                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
231 | â€¦
232 | â€¦
    |

PLW1508 Invalid type for environment variable default; expected `str` or `None`
   --> app/__init__.py:236:76
    |
234 |     # æ–‡ä»¶ä¸Šä¼ é…ç½®
235 |     app.config["UPLOAD_FOLDER"] = os.getenv("UPLOAD_FOLDER", "userdata/uploads")
236 |     app.config["MAX_CONTENT_LENGTH"] = int(os.getenv("MAX_CONTENT_LENGTH", 16777216))
    |                                                                            ^^^^^^^^
237 |
238 |     # æ—¥å¿—é…ç½®
    |

PLW1508 Invalid type for environment variable default; expected `str` or `None`
   --> app/__init__.py:241:64
    |
239 |     app.config["LOG_LEVEL"] = os.getenv("LOG_LEVEL", "INFO")
240 |     app.config["LOG_FILE"] = os.getenv("LOG_FILE", "userdata/logs/app.log")
241 |     app.config["LOG_MAX_SIZE"] = int(os.getenv("LOG_MAX_SIZE", 10485760))
    |                                                                ^^^^^^^^
242 |     app.config["LOG_BACKUP_COUNT"] = int(os.getenv("LOG_BACKUP_COUNT", 5))
    |

PLW1508 Invalid type for environment variable default; expected `str` or `None`
   --> app/__init__.py:242:72
    |
240 |     app.config["LOG_FILE"] = os.getenv("LOG_FILE", "userdata/logs/app.log")
241 |     app.config["LOG_MAX_SIZE"] = int(os.getenv("LOG_MAX_SIZE", 10485760))
242 |     app.config["LOG_BACKUP_COUNT"] = int(os.getenv("LOG_BACKUP_COUNT", 5))
    |                                                                        ^
243 |
244 |     # å¤–éƒ¨æ•°æ®åº“é…ç½®
    |

PLW1508 Invalid type for environment variable default; expected `str` or `None`
   --> app/__init__.py:246:70
    |
244 |     # å¤–éƒ¨æ•°æ®åº“é…ç½®
245 |     app.config["SQL_SERVER_HOST"] = os.getenv("SQL_SERVER_HOST", "localhost")
246 |     app.config["SQL_SERVER_PORT"] = int(os.getenv("SQL_SERVER_PORT", 1433))
    |                                                                      ^^^^
247 |     app.config["SQL_SERVER_USERNAME"] = os.getenv("SQL_SERVER_USERNAME", "sa")
248 |     app.config["SQL_SERVER_PASSWORD"] = os.getenv("SQL_SERVER_PASSWORD", "")
    |

PLW1508 Invalid type for environment variable default; expected `str` or `None`
   --> app/__init__.py:251:60
    |
250 |     app.config["MYSQL_HOST"] = os.getenv("MYSQL_HOST", "localhost")
251 |     app.config["MYSQL_PORT"] = int(os.getenv("MYSQL_PORT", 3306))
    |                                                            ^^^^
252 |     app.config["MYSQL_USERNAME"] = os.getenv("MYSQL_USERNAME", "root")
253 |     app.config["MYSQL_PASSWORD"] = os.getenv("MYSQL_PASSWORD", "")
    |

PLW1508 Invalid type for environment variable default; expected `str` or `None`
   --> app/__init__.py:256:62
    |
255 |     app.config["ORACLE_HOST"] = os.getenv("ORACLE_HOST", "localhost")
256 |     app.config["ORACLE_PORT"] = int(os.getenv("ORACLE_PORT", 1521))
    |                                                              ^^^^
257 |     app.config["ORACLE_SERVICE_NAME"] = os.getenv("ORACLE_SERVICE_NAME", "ORCL")
258 |     app.config["ORACLE_USERNAME"] = os.getenv("ORACLE_USERNAME", "system")
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/__init__.py:272:20
    |
271 |     """
272 |     # ä»ŽçŽ¯å¢ƒå˜é‡è¯»å–ä¼šè¯è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤ä¸º1å°æ—¶
    |                                 ^^
273 |     from app.config import Config
274 |     session_lifetime = int(os.getenv("PERMANENT_SESSION_LIFETIME", Config.SESSION_LIFETIME))
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:273:5
    |
271 |     """
272 |     # ä»ŽçŽ¯å¢ƒå˜é‡è¯»å–ä¼šè¯è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤ä¸º1å°æ—¶
273 |     from app.config import Config
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
274 |     session_lifetime = int(os.getenv("PERMANENT_SESSION_LIFETIME", Config.SESSION_LIFETIME))
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/__init__.py:278:63
    |
276 |     # ä¼šè¯é…ç½®
277 |     app.config["PERMANENT_SESSION_LIFETIME"] = session_lifetime  # ä¼šè¯è¶…æ—¶æ—¶é—´
278 |     app.config["SESSION_COOKIE_SECURE"] = False  # æš‚æ—¶ç¦ç”¨HTTPSè¦æ±‚ï¼Œä½¿ç”¨HTTP
    |                                                                     ^^
279 |     app.config["SESSION_COOKIE_HTTPONLY"] = True  # é˜²æ­¢XSSæ”»å‡»
280 |     app.config["SESSION_COOKIE_SAMESITE"] = "Lax"  # CSRFä¿æŠ¤
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:307:5
    |
306 |     # åˆå§‹åŒ–ç¼“å­˜å·¥å…·ä¸Žç¼“å­˜æœåŠ¡
307 |     from app.services.cache_service import init_cache_service
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
308 |     from app.utils.cache_utils import init_cache_manager
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:308:5
    |
306 |     # åˆå§‹åŒ–ç¼“å­˜å·¥å…·ä¸Žç¼“å­˜æœåŠ¡
307 |     from app.services.cache_service import init_cache_service
308 |     from app.utils.cache_utils import init_cache_manager
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
309 |
310 |     init_cache_manager(cache)
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/__init__.py:330:20
    |
328 |     # ä¼šè¯å®‰å…¨é…ç½®
329 |     login_manager.session_protection = "basic"  # åŸºç¡€ä¼šè¯ä¿æŠ¤
330 |     # ä»ŽçŽ¯å¢ƒå˜é‡è¯»å–ä¼šè¯è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤ä¸º1å°æ—¶
    |                                 ^^
331 |     session_lifetime = int(os.getenv("PERMANENT_SESSION_LIFETIME", Config.SESSION_LIFETIME))
332 |     login_manager.remember_cookie_duration = session_lifetime  # è®°ä½æˆ‘åŠŸèƒ½è¿‡æœŸæ—¶é—´
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:339:9
    |
337 |     @login_manager.user_loader
338 |     def load_user(user_id: str) -> "User | None":
339 |         from app.models.user import User
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
340 |
341 |         return User.query.get(int(user_id))
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/__init__.py:360:15
    |
358 |     csrf.init_app(app)
359 |
360 |     # åˆå§‹åŒ–é€ŸçŽ‡é™åˆ¶å™¨ï¼ˆä½¿ç”¨Flask-Cachingï¼‰
    |                       ^^
361 |     from app.utils.rate_limiter import init_rate_limiter
362 |     init_rate_limiter(cache)
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/__init__.py:360:31
    |
358 |     csrf.init_app(app)
359 |
360 |     # åˆå§‹åŒ–é€ŸçŽ‡é™åˆ¶å™¨ï¼ˆä½¿ç”¨Flask-Cachingï¼‰
    |                                          ^^
361 |     from app.utils.rate_limiter import init_rate_limiter
362 |     init_rate_limiter(cache)
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:361:5
    |
360 |     # åˆå§‹åŒ–é€ŸçŽ‡é™åˆ¶å™¨ï¼ˆä½¿ç”¨Flask-Cachingï¼‰
361 |     from app.utils.rate_limiter import init_rate_limiter
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
362 |     init_rate_limiter(cache)
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:376:5
    |
375 |     """
376 |     from app.routes.accounts.classifications import accounts_classifications_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
377 |     from app.routes.accounts.ledgers import accounts_ledgers_bp
378 |     from app.routes.accounts.statistics import accounts_statistics_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:377:5
    |
375 |     """
376 |     from app.routes.accounts.classifications import accounts_classifications_bp
377 |     from app.routes.accounts.ledgers import accounts_ledgers_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
378 |     from app.routes.accounts.statistics import accounts_statistics_bp
379 |     from app.routes.accounts.sync import accounts_sync_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:378:5
    |
376 |     from app.routes.accounts.classifications import accounts_classifications_bp
377 |     from app.routes.accounts.ledgers import accounts_ledgers_bp
378 |     from app.routes.accounts.statistics import accounts_statistics_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
379 |     from app.routes.accounts.sync import accounts_sync_bp
380 |     from app.routes.auth import auth_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:379:5
    |
377 |     from app.routes.accounts.ledgers import accounts_ledgers_bp
378 |     from app.routes.accounts.statistics import accounts_statistics_bp
379 |     from app.routes.accounts.sync import accounts_sync_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
380 |     from app.routes.auth import auth_bp
381 |     from app.routes.cache import cache_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:380:5
    |
378 |     from app.routes.accounts.statistics import accounts_statistics_bp
379 |     from app.routes.accounts.sync import accounts_sync_bp
380 |     from app.routes.auth import auth_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
381 |     from app.routes.cache import cache_bp
382 |     from app.routes.capacity.aggregations import capacity_aggregations_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:381:5
    |
379 |     from app.routes.accounts.sync import accounts_sync_bp
380 |     from app.routes.auth import auth_bp
381 |     from app.routes.cache import cache_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
382 |     from app.routes.capacity.aggregations import capacity_aggregations_bp
383 |     from app.routes.capacity.databases import capacity_databases_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:382:5
    |
380 |     from app.routes.auth import auth_bp
381 |     from app.routes.cache import cache_bp
382 |     from app.routes.capacity.aggregations import capacity_aggregations_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
383 |     from app.routes.capacity.databases import capacity_databases_bp
384 |     from app.routes.capacity.instances import capacity_instances_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:383:5
    |
381 |     from app.routes.cache import cache_bp
382 |     from app.routes.capacity.aggregations import capacity_aggregations_bp
383 |     from app.routes.capacity.databases import capacity_databases_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
384 |     from app.routes.capacity.instances import capacity_instances_bp
385 |     from app.routes.common import common_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:384:5
    |
382 |     from app.routes.capacity.aggregations import capacity_aggregations_bp
383 |     from app.routes.capacity.databases import capacity_databases_bp
384 |     from app.routes.capacity.instances import capacity_instances_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
385 |     from app.routes.common import common_bp
386 |     from app.routes.connections import connections_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:385:5
    |
383 |     from app.routes.capacity.databases import capacity_databases_bp
384 |     from app.routes.capacity.instances import capacity_instances_bp
385 |     from app.routes.common import common_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
386 |     from app.routes.connections import connections_bp
387 |     from app.routes.credentials import credentials_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:386:5
    |
384 |     from app.routes.capacity.instances import capacity_instances_bp
385 |     from app.routes.common import common_bp
386 |     from app.routes.connections import connections_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
387 |     from app.routes.credentials import credentials_bp
388 |     from app.routes.dashboard import dashboard_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:387:5
    |
385 |     from app.routes.common import common_bp
386 |     from app.routes.connections import connections_bp
387 |     from app.routes.credentials import credentials_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
388 |     from app.routes.dashboard import dashboard_bp
389 |     from app.routes.databases.capacity_sync import databases_capacity_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:388:5
    |
386 |     from app.routes.connections import connections_bp
387 |     from app.routes.credentials import credentials_bp
388 |     from app.routes.dashboard import dashboard_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
389 |     from app.routes.databases.capacity_sync import databases_capacity_bp
390 |     from app.routes.databases.ledgers import databases_ledgers_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:389:5
    |
387 |     from app.routes.credentials import credentials_bp
388 |     from app.routes.dashboard import dashboard_bp
389 |     from app.routes.databases.capacity_sync import databases_capacity_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
390 |     from app.routes.databases.ledgers import databases_ledgers_bp
391 |     from app.routes.files import files_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:390:5
    |
388 |     from app.routes.dashboard import dashboard_bp
389 |     from app.routes.databases.capacity_sync import databases_capacity_bp
390 |     from app.routes.databases.ledgers import databases_ledgers_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
391 |     from app.routes.files import files_bp
392 |     from app.routes.health import health_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:391:5
    |
389 |     from app.routes.databases.capacity_sync import databases_capacity_bp
390 |     from app.routes.databases.ledgers import databases_ledgers_bp
391 |     from app.routes.files import files_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
392 |     from app.routes.health import health_bp
393 |     from app.routes.history.logs import history_logs_bp, logs_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:392:5
    |
390 |     from app.routes.databases.ledgers import databases_ledgers_bp
391 |     from app.routes.files import files_bp
392 |     from app.routes.health import health_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
393 |     from app.routes.history.logs import history_logs_bp, logs_bp
394 |     from app.routes.history.sessions import history_sessions_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:393:5
    |
391 |     from app.routes.files import files_bp
392 |     from app.routes.health import health_bp
393 |     from app.routes.history.logs import history_logs_bp, logs_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
394 |     from app.routes.history.sessions import history_sessions_bp
395 |     from app.routes.instances.batch import instances_batch_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:394:5
    |
392 |     from app.routes.health import health_bp
393 |     from app.routes.history.logs import history_logs_bp, logs_bp
394 |     from app.routes.history.sessions import history_sessions_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
395 |     from app.routes.instances.batch import instances_batch_bp
396 |     from app.routes.instances.detail import instances_detail_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:395:5
    |
393 |     from app.routes.history.logs import history_logs_bp, logs_bp
394 |     from app.routes.history.sessions import history_sessions_bp
395 |     from app.routes.instances.batch import instances_batch_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
396 |     from app.routes.instances.detail import instances_detail_bp
397 |     from app.routes.instances.manage import instances_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:396:5
    |
394 |     from app.routes.history.sessions import history_sessions_bp
395 |     from app.routes.instances.batch import instances_batch_bp
396 |     from app.routes.instances.detail import instances_detail_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
397 |     from app.routes.instances.manage import instances_bp
398 |     from app.routes.main import main_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:397:5
    |
395 |     from app.routes.instances.batch import instances_batch_bp
396 |     from app.routes.instances.detail import instances_detail_bp
397 |     from app.routes.instances.manage import instances_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
398 |     from app.routes.main import main_bp
399 |     from app.routes.partition import partition_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:398:5
    |
396 |     from app.routes.instances.detail import instances_detail_bp
397 |     from app.routes.instances.manage import instances_bp
398 |     from app.routes.main import main_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
399 |     from app.routes.partition import partition_bp
400 |     from app.routes.scheduler import scheduler_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:399:5
    |
397 |     from app.routes.instances.manage import instances_bp
398 |     from app.routes.main import main_bp
399 |     from app.routes.partition import partition_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
400 |     from app.routes.scheduler import scheduler_bp
401 |     from app.routes.tags.bulk import tags_bulk_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:400:5
    |
398 |     from app.routes.main import main_bp
399 |     from app.routes.partition import partition_bp
400 |     from app.routes.scheduler import scheduler_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
401 |     from app.routes.tags.bulk import tags_bulk_bp
402 |     from app.routes.tags.manage import tags_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:401:5
    |
399 |     from app.routes.partition import partition_bp
400 |     from app.routes.scheduler import scheduler_bp
401 |     from app.routes.tags.bulk import tags_bulk_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
402 |     from app.routes.tags.manage import tags_bp
403 |     from app.routes.users import users_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:402:5
    |
400 |     from app.routes.scheduler import scheduler_bp
401 |     from app.routes.tags.bulk import tags_bulk_bp
402 |     from app.routes.tags.manage import tags_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
403 |     from app.routes.users import users_bp
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:403:5
    |
401 |     from app.routes.tags.bulk import tags_bulk_bp
402 |     from app.routes.tags.manage import tags_bp
403 |     from app.routes.users import users_bp
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
404 |
405 |     blueprints: list[tuple[Blueprint, str | None]] = [
    |

PTH120 `os.path.dirname()` should be replaced by `Path.parent`
   --> app/__init__.py:456:19
    |
454 |     if not app.debug and not app.testing:
455 |         # åˆ›å»ºæ—¥å¿—ç›®å½•
456 |         log_dir = os.path.dirname(app.config["LOG_FILE"])
    |                   ^^^^^^^^^^^^^^^
457 |         if not os.path.exists(log_dir):
458 |             os.makedirs(log_dir)
    |
help: Replace with `Path(...).parent`

PTH110 `os.path.exists()` should be replaced by `Path.exists()`
   --> app/__init__.py:457:16
    |
455 |         # åˆ›å»ºæ—¥å¿—ç›®å½•
456 |         log_dir = os.path.dirname(app.config["LOG_FILE"])
457 |         if not os.path.exists(log_dir):
    |                ^^^^^^^^^^^^^^
458 |             os.makedirs(log_dir)
    |
help: Replace with `Path(...).exists()`

PTH103 `os.makedirs()` should be replaced by `Path.mkdir(parents=True)`
   --> app/__init__.py:458:13
    |
456 |         log_dir = os.path.dirname(app.config["LOG_FILE"])
457 |         if not os.path.exists(log_dir):
458 |             os.makedirs(log_dir)
    |             ^^^^^^^^^^^
459 |
460 |         # é…ç½®æ–‡ä»¶æ—¥å¿—å¤„ç†å™¨
    |
help: Replace with `Path(...).mkdir(parents=True)`

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/__init__.py:477:15
    |
476 | def configure_error_handlers(app: Flask) -> None:
477 |     """é…ç½®é”™è¯¯å¤„ç†å™¨ï¼ˆä¿ç•™å ä½ï¼Œç»Ÿä¸€é”™è¯¯å¤„ç†ä¸­ä½¿ç”¨ï¼‰ã€‚.
    |                      ^^
478 |
479 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/__init__.py:477:20
    |
476 | def configure_error_handlers(app: Flask) -> None:
477 |     """é…ç½®é”™è¯¯å¤„ç†å™¨ï¼ˆä¿ç•™å ä½ï¼Œç»Ÿä¸€é”™è¯¯å¤„ç†ä¸­ä½¿ç”¨ï¼‰ã€‚.
    |                                ^^
478 |
479 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/__init__.py:477:30
    |
476 | def configure_error_handlers(app: Flask) -> None:
477 |     """é…ç½®é”™è¯¯å¤„ç†å™¨ï¼ˆä¿ç•™å ä½ï¼Œç»Ÿä¸€é”™è¯¯å¤„ç†ä¸­ä½¿ç”¨ï¼‰ã€‚.
    |                                                    ^^
478 |
479 |     Args:
    |

PLC0415 `import` should be at the top-level of a file
   --> app/__init__.py:498:5
    |
497 |     """
498 |     from app.utils.time_utils import time_utils
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
499 |
500 |     @app.template_filter("china_time")
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/__init__.py:533:7
    |
533 | # å¯¼å…¥æ¨¡åž‹ï¼ˆç¡®ä¿æ¨¡åž‹è¢«æ³¨å†Œï¼‰
    |           ^^
534 | from app.models import (  # noqa: F401, E402
535 |     credential,
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/__init__.py:533:15
    |
533 | # å¯¼å…¥æ¨¡åž‹ï¼ˆç¡®ä¿æ¨¡åž‹è¢«æ³¨å†Œï¼‰
    |                           ^^
534 | from app.models import (  # noqa: F401, E402
535 |     credential,
    |

D205 1 blank line required between summary line and description
 --> app/config.py:1:1
  |
1 | / """é²¸è½ - ç»Ÿä¸€é…ç½®ç®¡ç†
2 | | æ”¯æŒå¼€å‘å’Œç”Ÿäº§çŽ¯å¢ƒï¼Œé€šè¿‡çŽ¯å¢ƒå˜é‡æŽ§åˆ¶.
3 | |
4 | | æœ¬æ–‡ä»¶åªåŒ…å«å®žé™…ä½¿ç”¨çš„é…ç½®é¡¹ã€‚
5 | | """
  | |___^
6 |
7 |   import os
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/config.py:2:10
  |
1 | """é²¸è½ - ç»Ÿä¸€é…ç½®ç®¡ç†
2 | æ”¯æŒå¼€å‘å’Œç”Ÿäº§çŽ¯å¢ƒï¼Œé€šè¿‡çŽ¯å¢ƒå˜é‡æŽ§åˆ¶.
  |                   ^^
3 |
4 | æœ¬æ–‡ä»¶åªåŒ…å«å®žé™…ä½¿ç”¨çš„é…ç½®é¡¹ã€‚
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/config.py:14:19
   |
12 |     """ç»Ÿä¸€é…ç½®ç±» - æ”¯æŒå¼€å‘å’Œç”Ÿäº§çŽ¯å¢ƒ.
13 |
14 |     æ‰€æœ‰é…ç½®é¡¹ä¼˜å…ˆä»ŽçŽ¯å¢ƒå˜é‡è¯»å–ï¼Œå¦‚æžœçŽ¯å¢ƒå˜é‡ä¸å­˜åœ¨åˆ™ä½¿ç”¨é»˜è®¤å€¼ã€‚
   |                                 ^^
15 |     åªåŒ…å«å®žé™…è¢«ä»£ç ä½¿ç”¨çš„é…ç½®é¡¹ã€‚
16 |     """
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/config.py:19:14
   |
18 |     # ============================================================================
19 |     # æ•°æ®åº“è¿žæŽ¥é…ç½®ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
   |                     ^^
20 |     # ============================================================================
21 |     CONNECTION_TIMEOUT = int(os.getenv("DB_CONNECTION_TIMEOUT", "30"))
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/config.py:19:19
   |
18 |     # ============================================================================
19 |     # æ•°æ®åº“è¿žæŽ¥é…ç½®ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
   |                               ^^
20 |     # ============================================================================
21 |     CONNECTION_TIMEOUT = int(os.getenv("DB_CONNECTION_TIMEOUT", "30"))
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/config.py:25:11
   |
24 |     # ============================================================================
25 |     # å¯†ç é…ç½®ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
   |               ^^
26 |     # ============================================================================
27 |     PASSWORD_HASH_ROUNDS = int(os.getenv("BCRYPT_LOG_ROUNDS", "12"))
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/config.py:25:16
   |
24 |     # ============================================================================
25 |     # å¯†ç é…ç½®ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
   |                         ^^
26 |     # ============================================================================
27 |     PASSWORD_HASH_ROUNDS = int(os.getenv("BCRYPT_LOG_ROUNDS", "12"))
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/config.py:30:13
   |
29 |     # ============================================================================
30 |     # æ–‡ä»¶ä¸Šä¼ é…ç½®ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
   |                   ^^
31 |     # ============================================================================
32 |     MAX_FILE_SIZE = int(os.getenv("MAX_FILE_SIZE", str(16 * 1024 * 1024)))  # 16MB
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/config.py:30:18
   |
29 |     # ============================================================================
30 |     # æ–‡ä»¶ä¸Šä¼ é…ç½®ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
   |                             ^^
31 |     # ============================================================================
32 |     MAX_FILE_SIZE = int(os.getenv("MAX_FILE_SIZE", str(16 * 1024 * 1024)))  # 16MB
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/config.py:51:15
   |
49 |     # JWTé…ç½®
50 |     # ============================================================================
51 |     # å†…éƒ¨ä½¿ç”¨çš„ç§’æ•°å€¼ï¼ˆç”¨äºŽè®¡ç®—timedeltaï¼‰
   |                       ^^
52 |     _JWT_ACCESS_TOKEN_EXPIRES_SECONDS = int(os.getenv("JWT_ACCESS_TOKEN_EXPIRES", "3600"))  # 1å°æ—¶
53 |     _JWT_REFRESH_TOKEN_EXPIRES_SECONDS = int(os.getenv("JWT_REFRESH_TOKEN_EXPIRES_SECONDS", "2592000"))  # 30å¤©
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/config.py:51:29
   |
49 |     # JWTé…ç½®
50 |     # ============================================================================
51 |     # å†…éƒ¨ä½¿ç”¨çš„ç§’æ•°å€¼ï¼ˆç”¨äºŽè®¡ç®—timedeltaï¼‰
   |                                          ^^
52 |     _JWT_ACCESS_TOKEN_EXPIRES_SECONDS = int(os.getenv("JWT_ACCESS_TOKEN_EXPIRES", "3600"))  # 1å°æ—¶
53 |     _JWT_REFRESH_TOKEN_EXPIRES_SECONDS = int(os.getenv("JWT_REFRESH_TOKEN_EXPIRES_SECONDS", "2592000"))  # 30å¤©
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/config.py:79:33
   |
77 |           raise ValueError(msg)
78 |       SQLALCHEMY_TRACK_MODIFICATIONS = False
79 |       SQLALCHEMY_ENGINE_OPTIONS = {
   |  _________________________________^
80 | |         "pool_pre_ping": True,
81 | |         "pool_recycle": 300,
82 | |         "pool_timeout": CONNECTION_TIMEOUT,
83 | |         "max_overflow": 10,
84 | |         "pool_size": MAX_CONNECTIONS,
85 | |         "echo": DEBUG,  # å¼€å‘çŽ¯å¢ƒæ˜¾ç¤ºSQLï¼Œç”Ÿäº§çŽ¯å¢ƒä¸æ˜¾ç¤º
86 | |     }
   | |_____^
87 |
88 |       # ============================================================================
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/config.py:85:36
   |
83 |         "max_overflow": 10,
84 |         "pool_size": MAX_CONNECTIONS,
85 |         "echo": DEBUG,  # å¼€å‘çŽ¯å¢ƒæ˜¾ç¤ºSQLï¼Œç”Ÿäº§çŽ¯å¢ƒä¸æ˜¾ç¤º
   |                                          ^^
86 |     }
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/config.py:128:14
    |
127 |     # ============================================================================
128 |     # ç¼“å­˜TTLé…ç½®ï¼ˆç§’ï¼‰
    |                  ^^
129 |     # ============================================================================
130 |     CACHE_DEFAULT_TTL = int(os.getenv("CACHE_DEFAULT_TTL", str(7 * 24 * 3600)))  # 7å¤©
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/config.py:128:16
    |
127 |     # ============================================================================
128 |     # ç¼“å­˜TTLé…ç½®ï¼ˆç§’ï¼‰
    |                      ^^
129 |     # ============================================================================
130 |     CACHE_DEFAULT_TTL = int(os.getenv("CACHE_DEFAULT_TTL", str(7 * 24 * 3600)))  # 7å¤©
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/constants/__init__.py:3:11
  |
1 | """å¸¸é‡æ¨¡å—ã€‚.
2 |
3 | é›†ä¸­ç®¡ç†æ‰€æœ‰ç³»ç»Ÿå¸¸é‡ï¼ŒåŒ…æ‹¬é¢œè‰²ã€çŠ¶æ€ã€é”™è¯¯æ¶ˆæ¯ã€HTTP ç›¸å…³å¸¸é‡ç­‰ã€‚
  |                     ^^
4 |
5 | ä¸»è¦å¸¸é‡ï¼š
  |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/constants/__init__.py:5:5
  |
3 | é›†ä¸­ç®¡ç†æ‰€æœ‰ç³»ç»Ÿå¸¸é‡ï¼ŒåŒ…æ‹¬é¢œè‰²ã€çŠ¶æ€ã€é”™è¯¯æ¶ˆæ¯ã€HTTP ç›¸å…³å¸¸é‡ç­‰ã€‚
4 |
5 | ä¸»è¦å¸¸é‡ï¼š
  |         ^^
6 | - ThemeColors: ä¸»é¢˜é¢œè‰²å¸¸é‡
7 | - DatabaseType: æ•°æ®åº“ç±»åž‹å¸¸é‡
  |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/__init__.py:16:14
   |
15 | # å¯¼å…¥é¢œè‰²å¸¸é‡
16 | # å¯¼å…¥HTTPçŠ¶æ€ç å¸¸é‡ï¼ˆä½¿ç”¨Pythonæ ‡å‡†åº“ï¼‰
   |                     ^^
17 | from http import HTTPStatus as HttpStatus
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/__init__.py:16:26
   |
15 | # å¯¼å…¥é¢œè‰²å¸¸é‡
16 | # å¯¼å…¥HTTPçŠ¶æ€ç å¸¸é‡ï¼ˆä½¿ç”¨Pythonæ ‡å‡†åº“ï¼‰
   |                                       ^^
17 | from http import HTTPStatus as HttpStatus
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/colors.py:7:17
   |
 6 |       # Flatlyä¸»é¢˜æ ‡å‡†é¢œè‰²æ˜ å°„
 7 |       COLOR_MAP = {
   |  _________________^
 8 | |         "primary": {
 9 | |             "value": "#18bc9c",
10 | |             "name": "ä¸»è‰²ç»¿",
11 | |             "description": "ä¸»è¦æ“ä½œå’Œé‡è¦ä¿¡æ¯",
12 | |             "css_class": "bg-primary",
13 | |         },
14 | |         "danger": {
15 | |             "value": "#e74c3c",
16 | |             "name": "å±é™©çº¢",
17 | |             "description": "é«˜é£Žé™©å’Œå±é™©æ“ä½œ",
18 | |             "css_class": "bg-danger",
19 | |         },
20 | |         "warning": {
21 | |             "value": "#f39c12",
22 | |             "name": "è­¦å‘Šæ©™",
23 | |             "description": "éœ€è¦æ³¨æ„çš„æ“ä½œ",
24 | |             "css_class": "bg-warning",
25 | |         },
26 | |         "info": {
27 | |             "value": "#3498db",
28 | |             "name": "ä¿¡æ¯è“",
29 | |             "description": "æ™®é€šä¿¡æ¯å’Œæ ‡å‡†æ“ä½œ",
30 | |             "css_class": "bg-info",
31 | |         },
32 | |         "secondary": {
33 | |             "value": "#95a5a6",
34 | |             "name": "æ¬¡è¦ç°",
35 | |             "description": "æ¬¡è¦ä¿¡æ¯å’Œç¦ç”¨çŠ¶æ€",
36 | |             "css_class": "bg-secondary",
37 | |         },
38 | |         "success": {
39 | |             "value": "#18bc9c",
40 | |             "name": "æˆåŠŸç»¿",
41 | |             "description": "æˆåŠŸçŠ¶æ€å’Œå®‰å…¨æ“ä½œ",
42 | |             "css_class": "bg-success",
43 | |         },
44 | |         "dark": {
45 | |             "value": "#2c3e50",
46 | |             "name": "æ·±è‰²",
47 | |             "description": "é‡è¦ä¿¡æ¯å’Œæ ‡é¢˜",
48 | |             "css_class": "bg-dark",
49 | |         },
50 | |         "light": {
51 | |             "value": "#ecf0f1",
52 | |             "name": "æµ…è‰²",
53 | |             "description": "èƒŒæ™¯å’Œè¾…åŠ©ä¿¡æ¯",
54 | |             "css_class": "bg-light",
55 | |         },
56 | |     }
   | |_____^
57 |
58 |       @classmethod
   |

ANN206 Missing return type annotation for classmethod `get_color_value`
  --> app/constants/colors.py:59:9
   |
58 |     @classmethod
59 |     def get_color_value(cls, color_key):
   |         ^^^^^^^^^^^^^^^
60 |         """èŽ·å–é¢œè‰²å€¼ã€‚.
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `color_key`
  --> app/constants/colors.py:59:30
   |
58 |     @classmethod
59 |     def get_color_value(cls, color_key):
   |                              ^^^^^^^^^
60 |         """èŽ·å–é¢œè‰²å€¼ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/constants/colors.py:63:27
   |
62 |         Args:
63 |             color_key: é¢œè‰²é”®ï¼Œä¾‹å¦‚ 'primary'ã€‚
   |                              ^^
64 |
65 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/constants/colors.py:66:22
   |
65 |         Returns:
66 |             HEX é¢œè‰²å­—ç¬¦ä¸²ï¼ŒæœªåŒ¹é…æ—¶è¿”å›žé»˜è®¤ä¿¡æ¯è“ã€‚
   |                           ^^
67 |
68 |         """
   |

ANN206 Missing return type annotation for classmethod `get_color_name`
  --> app/constants/colors.py:72:9
   |
71 |     @classmethod
72 |     def get_color_name(cls, color_key):
   |         ^^^^^^^^^^^^^^
73 |         """èŽ·å–é¢œè‰²åç§°ã€‚.
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `color_key`
  --> app/constants/colors.py:72:29
   |
71 |     @classmethod
72 |     def get_color_name(cls, color_key):
   |                             ^^^^^^^^^
73 |         """èŽ·å–é¢œè‰²åç§°ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/constants/colors.py:79:19
   |
78 |         Returns:
79 |             é¢œè‰²ä¸­æ–‡åç§°ï¼Œæ‰¾ä¸åˆ°æ—¶è¿”å›žâ€œä¿¡æ¯è“â€ã€‚
   |                         ^^
80 |
81 |         """
   |

ANN206 Missing return type annotation for classmethod `get_color_choices`
  --> app/constants/colors.py:85:9
   |
84 |     @classmethod
85 |     def get_color_choices(cls):
   |         ^^^^^^^^^^^^^^^^^
86 |         """èŽ·å–è¡¨å•é€‰æ‹©é¡¹ã€‚.
   |
help: Add return type annotation

ANN206 Missing return type annotation for classmethod `get_css_class`
  --> app/constants/colors.py:96:9
   |
95 |     @classmethod
96 |     def get_css_class(cls, color_key):
   |         ^^^^^^^^^^^^^
97 |         """èŽ·å– CSS ç±»åã€‚.
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `color_key`
  --> app/constants/colors.py:96:28
   |
95 |     @classmethod
96 |     def get_css_class(cls, color_key):
   |                            ^^^^^^^^^
97 |         """èŽ·å– CSS ç±»åã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/constants/colors.py:103:29
    |
102 |         Returns:
103 |             ä¸Žé¢œè‰²å¯¹åº”çš„ CSS classï¼Œé»˜è®¤ä¸º `bg-info`ã€‚
    |                                   ^^
104 |
105 |         """
    |

ANN206 Missing return type annotation for classmethod `is_valid_color`
   --> app/constants/colors.py:109:9
    |
108 |     @classmethod
109 |     def is_valid_color(cls, color_key):
    |         ^^^^^^^^^^^^^^
110 |         """éªŒè¯é¢œè‰²é”®æ˜¯å¦æœ‰æ•ˆã€‚.
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `color_key`
   --> app/constants/colors.py:109:29
    |
108 |     @classmethod
109 |     def is_valid_color(cls, color_key):
    |                             ^^^^^^^^^
110 |         """éªŒè¯é¢œè‰²é”®æ˜¯å¦æœ‰æ•ˆã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/constants/colors.py:116:33
    |
115 |         Returns:
116 |             True è¡¨ç¤ºå­˜åœ¨äºŽ COLOR_MAPï¼ŒFalse è¡¨ç¤ºæœªçŸ¥é¢œè‰²ã€‚
    |                                      ^^
117 |
118 |         """
    |

ANN206 Missing return type annotation for classmethod `get_color_info`
   --> app/constants/colors.py:122:9
    |
121 |     @classmethod
122 |     def get_color_info(cls, color_key):
    |         ^^^^^^^^^^^^^^
123 |         """èŽ·å–å®Œæ•´é¢œè‰²ä¿¡æ¯ã€‚.
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `color_key`
   --> app/constants/colors.py:122:29
    |
121 |     @classmethod
122 |     def get_color_info(cls, color_key):
    |                             ^^^^^^^^^
123 |         """èŽ·å–å®Œæ•´é¢œè‰²ä¿¡æ¯ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/constants/database_types.py:3:13
  |
1 | """æ•°æ®åº“ç±»åž‹å¸¸é‡.
2 |
3 | å®šä¹‰æ‰€æœ‰æ”¯æŒçš„æ•°æ®åº“ç±»åž‹ï¼Œé¿å…é­”æ³•å­—ç¬¦ä¸²ã€‚
  |                         ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/constants/database_types.py:10:18
   |
 8 |     """æ•°æ®åº“ç±»åž‹å¸¸é‡.
 9 |
10 |     æä¾›æ ‡å‡†çš„æ•°æ®åº“ç±»åž‹å­—ç¬¦ä¸²ï¼Œæé«˜ä»£ç å¯è¯»æ€§å’Œç±»åž‹å®‰å…¨ã€‚
   |                               ^^
11 |     """
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/database_types.py:23:11
   |
22 |     # æ‰€æœ‰æ”¯æŒçš„ç±»åž‹
23 |     ALL = [MYSQL, POSTGRESQL, SQLSERVER, ORACLE, SQLITE]
   |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
24 |
25 |     # ä¸»æµå…³ç³»åž‹æ•°æ®åº“
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/database_types.py:26:18
   |
25 |     # ä¸»æµå…³ç³»åž‹æ•°æ®åº“
26 |     RELATIONAL = [MYSQL, POSTGRESQL, SQLSERVER, ORACLE]
   |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
27 |
28 |     # ============================================================================
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/database_types.py:31:21
   |
29 |       # æ˜¾ç¤ºåç§°æ˜ å°„
30 |       # ============================================================================
31 |       DISPLAY_NAMES = {
   |  _____________________^
32 | |         MYSQL: "MySQL",
33 | |         POSTGRESQL: "PostgreSQL",
34 | |         SQLSERVER: "SQL Server",
35 | |         ORACLE: "Oracle Database",
36 | |         SQLITE: "SQLite",
37 | |     }
   | |_____^
38 |
39 |       # ============================================================================
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/database_types.py:42:21
   |
40 |       # é»˜è®¤ç«¯å£æ˜ å°„
41 |       # ============================================================================
42 |       DEFAULT_PORTS = {
   |  _____________________^
43 | |         MYSQL: 3306,
44 | |         POSTGRESQL: 5432,
45 | |         SQLSERVER: 1433,
46 | |         ORACLE: 1521,
47 | |         SQLITE: None,  # SQLiteä¸éœ€è¦ç«¯å£
48 | |     }
   | |_____^
49 |
50 |       # ============================================================================
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/database_types.py:75:22
   |
74 |         Returns:
75 |             str: æ˜¾ç¤ºåç§°ï¼ˆå¦‚æžœæœªçŸ¥åˆ™è¿”å›žåŽŸå§‹ç±»åž‹ï¼‰
   |                          ^^
76 |
77 |         """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/database_types.py:75:34
   |
74 |         Returns:
75 |             str: æ˜¾ç¤ºåç§°ï¼ˆå¦‚æžœæœªçŸ¥åˆ™è¿”å›žåŽŸå§‹ç±»åž‹ï¼‰
   |                                                  ^^
76 |
77 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/constants/database_types.py:88:30
   |
87 |         Returns:
88 |             int | None: é»˜è®¤ç«¯å£å·ï¼Œå¦‚æžœæ²¡æœ‰åˆ™è¿”å›žNone
   |                                   ^^
89 |
90 |         """
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/database_types.py:95:23
   |
93 |     @classmethod
94 |     def normalize(cls, db_type: str) -> str:
95 |         """è§„èŒƒåŒ–æ•°æ®åº“ç±»åž‹å­—ç¬¦ä¸²ï¼ˆè½¬å°å†™ï¼‰.
   |                                  ^^
96 |
97 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/database_types.py:95:27
   |
93 |     @classmethod
94 |     def normalize(cls, db_type: str) -> str:
95 |         """è§„èŒƒåŒ–æ•°æ®åº“ç±»åž‹å­—ç¬¦ä¸²ï¼ˆè½¬å°å†™ï¼‰.
   |                                          ^^
96 |
97 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/constants/filter_options.py:3:19
  |
1 | """ç»Ÿä¸€æœç´¢ç­›é€‰å™¨é…ç½®.
2 |
3 | å°†æ‰€æœ‰çº¯æžšä¸¾/å¸¸é‡åž‹ç­›é€‰é¡¹é›†ä¸­åˆ°æ­¤å¤„ï¼Œé¿å…åˆ†æ•£å®šä¹‰é€ æˆç»´æŠ¤å›°éš¾ã€‚
  |                                    ^^
4 | åŠ¨æ€æ•°æ®è¯·ä½¿ç”¨ ``app.utils.query_filter_utils`` ä¸­çš„æŸ¥è¯¢æ–¹æ³•ã€‚
5 | """
  |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/filter_options.py:13:8
   |
11 | from app.constants.sync_constants import SyncConstants
12 |
13 | # æ•°æ®åº“ç±»åž‹ï¼ˆé»˜è®¤é…ç½®ï¼Œç”¨ä½œå…œåº•æˆ–é™æ€å±•ç¤ºï¼‰
   |             ^^
14 | DATABASE_TYPES: Final[list[dict[str, str]]] = [
15 |     {"name": "mysql", "display_name": "MySQL", "icon": "fa-database", "color": "primary"},
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/constants/filter_options.py:13:13
   |
11 | from app.constants.sync_constants import SyncConstants
12 |
13 | # æ•°æ®åº“ç±»åž‹ï¼ˆé»˜è®¤é…ç½®ï¼Œç”¨ä½œå…œåº•æˆ–é™æ€å±•ç¤ºï¼‰
   |                       ^^
14 | DATABASE_TYPES: Final[list[dict[str, str]]] = [
15 |     {"name": "mysql", "display_name": "MySQL", "icon": "fa-database", "color": "primary"},
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/filter_options.py:13:23
   |
11 | from app.constants.sync_constants import SyncConstants
12 |
13 | # æ•°æ®åº“ç±»åž‹ï¼ˆé»˜è®¤é…ç½®ï¼Œç”¨ä½œå…œåº•æˆ–é™æ€å±•ç¤ºï¼‰
   |                                           ^^
14 | DATABASE_TYPES: Final[list[dict[str, str]]] = [
15 |     {"name": "mysql", "display_name": "MySQL", "icon": "fa-database", "color": "primary"},
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/filter_options.py:28:9
   |
26 | ]
27 |
28 | # åŒæ­¥æ“ä½œæ–¹å¼ï¼ˆä½¿ç”¨å·²æœ‰å¸¸é‡ç”Ÿæˆï¼Œé¿å…é‡å¤ç»´æŠ¤ï¼‰
   |               ^^
29 | SYNC_TYPES: Final[list[dict[str, str]]] = [
30 |     {"value": item["value"], "label": item["label"]}
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/constants/filter_options.py:28:18
   |
26 | ]
27 |
28 | # åŒæ­¥æ“ä½œæ–¹å¼ï¼ˆä½¿ç”¨å·²æœ‰å¸¸é‡ç”Ÿæˆï¼Œé¿å…é‡å¤ç»´æŠ¤ï¼‰
   |                                 ^^
29 | SYNC_TYPES: Final[list[dict[str, str]]] = [
30 |     {"value": item["value"], "label": item["label"]}
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/filter_options.py:28:25
   |
26 | ]
27 |
28 | # åŒæ­¥æ“ä½œæ–¹å¼ï¼ˆä½¿ç”¨å·²æœ‰å¸¸é‡ç”Ÿæˆï¼Œé¿å…é‡å¤ç»´æŠ¤ï¼‰
   |                                               ^^
29 | SYNC_TYPES: Final[list[dict[str, str]]] = [
30 |     {"value": item["value"], "label": item["label"]}
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/filter_options.py:78:9
   |
76 | ]
77 |
78 | # é»˜è®¤åˆ†é¡µå¤§å°ï¼ˆä¾›è¡¨å•/è·¯ç”±ä½¿ç”¨ï¼‰
   |               ^^
79 | PAGINATION_SIZES: Final[list[int]] = [10, 20, 50, 100]
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/filter_options.py:78:18
   |
76 | ]
77 |
78 | # é»˜è®¤åˆ†é¡µå¤§å°ï¼ˆä¾›è¡¨å•/è·¯ç”±ä½¿ç”¨ï¼‰
   |                                ^^
79 | PAGINATION_SIZES: Final[list[int]] = [10, 20, 50, 100]
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/constants/flash_categories.py:3:15
  |
1 | """Flask Flashæ¶ˆæ¯ç±»åˆ«å¸¸é‡.
2 |
3 | å®šä¹‰Flashæ¶ˆæ¯çš„æ ‡å‡†ç±»åˆ«ï¼Œé¿å…é­”æ³•å­—ç¬¦ä¸²ã€‚
  |                        ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/constants/flash_categories.py:10:19
   |
 8 |     """Flask Flashæ¶ˆæ¯ç±»åˆ«å¸¸é‡.
 9 |
10 |     å®šä¹‰æ ‡å‡†çš„Flashæ¶ˆæ¯ç±»åˆ«ï¼Œç”¨äºŽå‰ç«¯æ˜¾ç¤ºä¸åŒæ ·å¼çš„æç¤ºæ¶ˆæ¯ã€‚
   |                            ^^
11 |     è¿™äº›ç±»åˆ«å¯¹åº”Bootstrapçš„alertæ ·å¼ç±»ã€‚
12 |     """
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/flash_categories.py:15:11
   |
14 |     # ============================================================================
15 |     # æ¶ˆæ¯ç±»åˆ«ï¼ˆå¯¹åº”Bootstrap alertç±»ï¼‰
   |               ^^
16 |     # ============================================================================
17 |     SUCCESS = "success"     # æˆåŠŸæ¶ˆæ¯ï¼ˆç»¿è‰²ï¼‰
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/flash_categories.py:15:30
   |
14 |     # ============================================================================
15 |     # æ¶ˆæ¯ç±»åˆ«ï¼ˆå¯¹åº”Bootstrap alertç±»ï¼‰
   |                                      ^^
16 |     # ============================================================================
17 |     SUCCESS = "success"     # æˆåŠŸæ¶ˆæ¯ï¼ˆç»¿è‰²ï¼‰
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/flash_categories.py:17:35
   |
15 |     # æ¶ˆæ¯ç±»åˆ«ï¼ˆå¯¹åº”Bootstrap alertç±»ï¼‰
16 |     # ============================================================================
17 |     SUCCESS = "success"     # æˆåŠŸæ¶ˆæ¯ï¼ˆç»¿è‰²ï¼‰
   |                                       ^^
18 |     ERROR = "error"         # é”™è¯¯æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼‰
19 |     WARNING = "warning"     # è­¦å‘Šæ¶ˆæ¯ï¼ˆé»„è‰²ï¼‰
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/flash_categories.py:17:38
   |
15 |     # æ¶ˆæ¯ç±»åˆ«ï¼ˆå¯¹åº”Bootstrap alertç±»ï¼‰
16 |     # ============================================================================
17 |     SUCCESS = "success"     # æˆåŠŸæ¶ˆæ¯ï¼ˆç»¿è‰²ï¼‰
   |                                             ^^
18 |     ERROR = "error"         # é”™è¯¯æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼‰
19 |     WARNING = "warning"     # è­¦å‘Šæ¶ˆæ¯ï¼ˆé»„è‰²ï¼‰
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/flash_categories.py:18:35
   |
16 |     # ============================================================================
17 |     SUCCESS = "success"     # æˆåŠŸæ¶ˆæ¯ï¼ˆç»¿è‰²ï¼‰
18 |     ERROR = "error"         # é”™è¯¯æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼‰
   |                                       ^^
19 |     WARNING = "warning"     # è­¦å‘Šæ¶ˆæ¯ï¼ˆé»„è‰²ï¼‰
20 |     INFO = "info"           # ä¿¡æ¯æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/flash_categories.py:18:38
   |
16 |     # ============================================================================
17 |     SUCCESS = "success"     # æˆåŠŸæ¶ˆæ¯ï¼ˆç»¿è‰²ï¼‰
18 |     ERROR = "error"         # é”™è¯¯æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼‰
   |                                             ^^
19 |     WARNING = "warning"     # è­¦å‘Šæ¶ˆæ¯ï¼ˆé»„è‰²ï¼‰
20 |     INFO = "info"           # ä¿¡æ¯æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/flash_categories.py:19:35
   |
17 |     SUCCESS = "success"     # æˆåŠŸæ¶ˆæ¯ï¼ˆç»¿è‰²ï¼‰
18 |     ERROR = "error"         # é”™è¯¯æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼‰
19 |     WARNING = "warning"     # è­¦å‘Šæ¶ˆæ¯ï¼ˆé»„è‰²ï¼‰
   |                                       ^^
20 |     INFO = "info"           # ä¿¡æ¯æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
21 |     DANGER = "danger"       # å±é™©æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼ŒåŒerrorï¼‰
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/flash_categories.py:19:38
   |
17 |     SUCCESS = "success"     # æˆåŠŸæ¶ˆæ¯ï¼ˆç»¿è‰²ï¼‰
18 |     ERROR = "error"         # é”™è¯¯æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼‰
19 |     WARNING = "warning"     # è­¦å‘Šæ¶ˆæ¯ï¼ˆé»„è‰²ï¼‰
   |                                             ^^
20 |     INFO = "info"           # ä¿¡æ¯æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
21 |     DANGER = "danger"       # å±é™©æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼ŒåŒerrorï¼‰
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/flash_categories.py:20:35
   |
18 |     ERROR = "error"         # é”™è¯¯æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼‰
19 |     WARNING = "warning"     # è­¦å‘Šæ¶ˆæ¯ï¼ˆé»„è‰²ï¼‰
20 |     INFO = "info"           # ä¿¡æ¯æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
   |                                       ^^
21 |     DANGER = "danger"       # å±é™©æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼ŒåŒerrorï¼‰
22 |     PRIMARY = "primary"     # ä¸»è¦æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/flash_categories.py:20:38
   |
18 |     ERROR = "error"         # é”™è¯¯æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼‰
19 |     WARNING = "warning"     # è­¦å‘Šæ¶ˆæ¯ï¼ˆé»„è‰²ï¼‰
20 |     INFO = "info"           # ä¿¡æ¯æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
   |                                             ^^
21 |     DANGER = "danger"       # å±é™©æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼ŒåŒerrorï¼‰
22 |     PRIMARY = "primary"     # ä¸»è¦æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/flash_categories.py:21:35
   |
19 |     WARNING = "warning"     # è­¦å‘Šæ¶ˆæ¯ï¼ˆé»„è‰²ï¼‰
20 |     INFO = "info"           # ä¿¡æ¯æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
21 |     DANGER = "danger"       # å±é™©æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼ŒåŒerrorï¼‰
   |                                       ^^
22 |     PRIMARY = "primary"     # ä¸»è¦æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
23 |     SECONDARY = "secondary" # æ¬¡è¦æ¶ˆæ¯ï¼ˆç°è‰²ï¼‰
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/constants/flash_categories.py:21:38
   |
19 |     WARNING = "warning"     # è­¦å‘Šæ¶ˆæ¯ï¼ˆé»„è‰²ï¼‰
20 |     INFO = "info"           # ä¿¡æ¯æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
21 |     DANGER = "danger"       # å±é™©æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼ŒåŒerrorï¼‰
   |                                             ^^
22 |     PRIMARY = "primary"     # ä¸»è¦æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
23 |     SECONDARY = "secondary" # æ¬¡è¦æ¶ˆæ¯ï¼ˆç°è‰²ï¼‰
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/flash_categories.py:21:45
   |
19 |     WARNING = "warning"     # è­¦å‘Šæ¶ˆæ¯ï¼ˆé»„è‰²ï¼‰
20 |     INFO = "info"           # ä¿¡æ¯æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
21 |     DANGER = "danger"       # å±é™©æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼ŒåŒerrorï¼‰
   |                                                      ^^
22 |     PRIMARY = "primary"     # ä¸»è¦æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
23 |     SECONDARY = "secondary" # æ¬¡è¦æ¶ˆæ¯ï¼ˆç°è‰²ï¼‰
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/flash_categories.py:22:35
   |
20 |     INFO = "info"           # ä¿¡æ¯æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
21 |     DANGER = "danger"       # å±é™©æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼ŒåŒerrorï¼‰
22 |     PRIMARY = "primary"     # ä¸»è¦æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
   |                                       ^^
23 |     SECONDARY = "secondary" # æ¬¡è¦æ¶ˆæ¯ï¼ˆç°è‰²ï¼‰
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/flash_categories.py:22:38
   |
20 |     INFO = "info"           # ä¿¡æ¯æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
21 |     DANGER = "danger"       # å±é™©æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼ŒåŒerrorï¼‰
22 |     PRIMARY = "primary"     # ä¸»è¦æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
   |                                             ^^
23 |     SECONDARY = "secondary" # æ¬¡è¦æ¶ˆæ¯ï¼ˆç°è‰²ï¼‰
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/flash_categories.py:23:35
   |
21 |     DANGER = "danger"       # å±é™©æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼ŒåŒerrorï¼‰
22 |     PRIMARY = "primary"     # ä¸»è¦æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
23 |     SECONDARY = "secondary" # æ¬¡è¦æ¶ˆæ¯ï¼ˆç°è‰²ï¼‰
   |                                       ^^
24 |
25 |     # æ‰€æœ‰ç±»åˆ«
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/flash_categories.py:23:38
   |
21 |     DANGER = "danger"       # å±é™©æ¶ˆæ¯ï¼ˆçº¢è‰²ï¼ŒåŒerrorï¼‰
22 |     PRIMARY = "primary"     # ä¸»è¦æ¶ˆæ¯ï¼ˆè“è‰²ï¼‰
23 |     SECONDARY = "secondary" # æ¬¡è¦æ¶ˆæ¯ï¼ˆç°è‰²ï¼‰
   |                                             ^^
24 |
25 |     # æ‰€æœ‰ç±»åˆ«
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/flash_categories.py:26:11
   |
25 |     # æ‰€æœ‰ç±»åˆ«
26 |     ALL = [SUCCESS, ERROR, WARNING, INFO, DANGER, PRIMARY, SECONDARY]
   |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
27 |
28 |     # Bootstrapå¯¹åº”çš„CSSç±»
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/flash_categories.py:29:25
   |
28 |       # Bootstrapå¯¹åº”çš„CSSç±»
29 |       BOOTSTRAP_CLASSES = {
   |  _________________________^
30 | |         SUCCESS: "alert-success",
31 | |         ERROR: "alert-danger",
32 | |         WARNING: "alert-warning",
33 | |         INFO: "alert-info",
34 | |         DANGER: "alert-danger",
35 | |         PRIMARY: "alert-primary",
36 | |         SECONDARY: "alert-secondary",
37 | |     }
   | |_____^
38 |
39 |       # ç±»åˆ«å¯¹åº”çš„å›¾æ ‡
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/flash_categories.py:40:13
   |
39 |       # ç±»åˆ«å¯¹åº”çš„å›¾æ ‡
40 |       ICONS = {
   |  _____________^
41 | |         SUCCESS: "check-circle",
42 | |         ERROR: "exclamation-circle",
43 | |         WARNING: "exclamation-triangle",
44 | |         INFO: "info-circle",
45 | |         DANGER: "times-circle",
46 | |         PRIMARY: "star",
47 | |         SECONDARY: "circle",
48 | |     }
   | |_____^
49 |
50 |       # ============================================================================
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/constants/http_headers.py:3:13
  |
1 | """HTTPå¤´å¸¸é‡.
2 |
3 | å®šä¹‰å¸¸ç”¨çš„HTTPå¤´åç§°ï¼Œé¿å…é­”æ³•å­—ç¬¦ä¸²ã€‚
  |                     ^^
4 | """
  |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/http_headers.py:51:15
   |
50 |     # ============================================================================
51 |     # è‡ªå®šä¹‰HTTPå¤´ï¼ˆX-å‰ç¼€ï¼‰
   |                   ^^
52 |     # ============================================================================
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/http_headers.py:51:20
   |
50 |     # ============================================================================
51 |     # è‡ªå®šä¹‰HTTPå¤´ï¼ˆX-å‰ç¼€ï¼‰
   |                           ^^
52 |     # ============================================================================
   |

S105 Possible hardcoded password assigned to: "X_CSRF_TOKEN"
  --> app/constants/http_headers.py:55:20
   |
54 |     # CSRFä¿æŠ¤
55 |     X_CSRF_TOKEN = "X-CSRFToken"
   |                    ^^^^^^^^^^^^^
56 |     X_XSRF_TOKEN = "X-XSRF-TOKEN"
   |

S105 Possible hardcoded password assigned to: "X_XSRF_TOKEN"
  --> app/constants/http_headers.py:56:20
   |
54 |     # CSRFä¿æŠ¤
55 |     X_CSRF_TOKEN = "X-CSRFToken"
56 |     X_XSRF_TOKEN = "X-XSRF-TOKEN"
   |                    ^^^^^^^^^^^^^^
57 |
58 |     # é€ŸçŽ‡é™åˆ¶
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/constants/http_methods.py:3:14
  |
1 | """HTTPæ–¹æ³•å¸¸é‡.
2 |
3 | å®šä¹‰æ ‡å‡†çš„HTTPè¯·æ±‚æ–¹æ³•ï¼Œé¿å…é­”æ³•å­—ç¬¦ä¸²ã€‚
  |                       ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/http_methods.py:10:18
   |
 8 |     """HTTPæ–¹æ³•å¸¸é‡.
 9 |
10 |     å®šä¹‰æ ‡å‡†çš„HTTPè¯·æ±‚æ–¹æ³•ï¼ˆRFC 7231ï¼‰ã€‚
   |                           ^^
11 |     """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/http_methods.py:10:27
   |
 8 |     """HTTPæ–¹æ³•å¸¸é‡.
 9 |
10 |     å®šä¹‰æ ‡å‡†çš„HTTPè¯·æ±‚æ–¹æ³•ï¼ˆRFC 7231ï¼‰ã€‚
   |                                     ^^
11 |     """
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/http_methods.py:18:33
   |
16 |     GET = "GET"           # èŽ·å–èµ„æº
17 |     POST = "POST"         # åˆ›å»ºèµ„æº
18 |     PUT = "PUT"           # æ›´æ–°èµ„æºï¼ˆå®Œæ•´ï¼‰
   |                                     ^^
19 |     PATCH = "PATCH"       # æ›´æ–°èµ„æºï¼ˆéƒ¨åˆ†ï¼‰
20 |     DELETE = "DELETE"     # åˆ é™¤èµ„æº
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/http_methods.py:18:36
   |
16 |     GET = "GET"           # èŽ·å–èµ„æº
17 |     POST = "POST"         # åˆ›å»ºèµ„æº
18 |     PUT = "PUT"           # æ›´æ–°èµ„æºï¼ˆå®Œæ•´ï¼‰
   |                                           ^^
19 |     PATCH = "PATCH"       # æ›´æ–°èµ„æºï¼ˆéƒ¨åˆ†ï¼‰
20 |     DELETE = "DELETE"     # åˆ é™¤èµ„æº
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/http_methods.py:19:33
   |
17 |     POST = "POST"         # åˆ›å»ºèµ„æº
18 |     PUT = "PUT"           # æ›´æ–°èµ„æºï¼ˆå®Œæ•´ï¼‰
19 |     PATCH = "PATCH"       # æ›´æ–°èµ„æºï¼ˆéƒ¨åˆ†ï¼‰
   |                                     ^^
20 |     DELETE = "DELETE"     # åˆ é™¤èµ„æº
21 |     HEAD = "HEAD"         # èŽ·å–èµ„æºå¤´ä¿¡æ¯
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/http_methods.py:19:36
   |
17 |     POST = "POST"         # åˆ›å»ºèµ„æº
18 |     PUT = "PUT"           # æ›´æ–°èµ„æºï¼ˆå®Œæ•´ï¼‰
19 |     PATCH = "PATCH"       # æ›´æ–°èµ„æºï¼ˆéƒ¨åˆ†ï¼‰
   |                                           ^^
20 |     DELETE = "DELETE"     # åˆ é™¤èµ„æº
21 |     HEAD = "HEAD"         # èŽ·å–èµ„æºå¤´ä¿¡æ¯
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/http_methods.py:27:11
   |
26 |     # æ‰€æœ‰æ–¹æ³•
27 |     ALL = [GET, POST, PUT, PATCH, DELETE, HEAD, OPTIONS, TRACE, CONNECT]
   |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
28 |
29 |     # å®‰å…¨æ–¹æ³•ï¼ˆä¸ä¿®æ”¹èµ„æºï¼‰
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/http_methods.py:29:11
   |
27 |     ALL = [GET, POST, PUT, PATCH, DELETE, HEAD, OPTIONS, TRACE, CONNECT]
28 |
29 |     # å®‰å…¨æ–¹æ³•ï¼ˆä¸ä¿®æ”¹èµ„æºï¼‰
   |               ^^
30 |     SAFE_METHODS = [GET, HEAD, OPTIONS]
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/http_methods.py:29:17
   |
27 |     ALL = [GET, POST, PUT, PATCH, DELETE, HEAD, OPTIONS, TRACE, CONNECT]
28 |
29 |     # å®‰å…¨æ–¹æ³•ï¼ˆä¸ä¿®æ”¹èµ„æºï¼‰
   |                           ^^
30 |     SAFE_METHODS = [GET, HEAD, OPTIONS]
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/http_methods.py:30:20
   |
29 |     # å®‰å…¨æ–¹æ³•ï¼ˆä¸ä¿®æ”¹èµ„æºï¼‰
30 |     SAFE_METHODS = [GET, HEAD, OPTIONS]
   |                    ^^^^^^^^^^^^^^^^^^^^
31 |
32 |     # å¹‚ç­‰æ–¹æ³•ï¼ˆå¤šæ¬¡è°ƒç”¨ç»“æžœç›¸åŒï¼‰
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/http_methods.py:32:11
   |
30 |     SAFE_METHODS = [GET, HEAD, OPTIONS]
31 |
32 |     # å¹‚ç­‰æ–¹æ³•ï¼ˆå¤šæ¬¡è°ƒç”¨ç»“æžœç›¸åŒï¼‰
   |               ^^
33 |     IDEMPOTENT_METHODS = [GET, PUT, DELETE, HEAD, OPTIONS]
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/http_methods.py:32:20
   |
30 |     SAFE_METHODS = [GET, HEAD, OPTIONS]
31 |
32 |     # å¹‚ç­‰æ–¹æ³•ï¼ˆå¤šæ¬¡è°ƒç”¨ç»“æžœç›¸åŒï¼‰
   |                                 ^^
33 |     IDEMPOTENT_METHODS = [GET, PUT, DELETE, HEAD, OPTIONS]
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/http_methods.py:33:26
   |
32 |     # å¹‚ç­‰æ–¹æ³•ï¼ˆå¤šæ¬¡è°ƒç”¨ç»“æžœç›¸åŒï¼‰
33 |     IDEMPOTENT_METHODS = [GET, PUT, DELETE, HEAD, OPTIONS]
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
34 |
35 |     # å†™å…¥æ–¹æ³•ï¼ˆä¼šä¿®æ”¹èµ„æºï¼‰
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/http_methods.py:35:11
   |
33 |     IDEMPOTENT_METHODS = [GET, PUT, DELETE, HEAD, OPTIONS]
34 |
35 |     # å†™å…¥æ–¹æ³•ï¼ˆä¼šä¿®æ”¹èµ„æºï¼‰
   |               ^^
36 |     WRITE_METHODS = [POST, PUT, PATCH, DELETE]
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/http_methods.py:35:17
   |
33 |     IDEMPOTENT_METHODS = [GET, PUT, DELETE, HEAD, OPTIONS]
34 |
35 |     # å†™å…¥æ–¹æ³•ï¼ˆä¼šä¿®æ”¹èµ„æºï¼‰
   |                           ^^
36 |     WRITE_METHODS = [POST, PUT, PATCH, DELETE]
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/http_methods.py:36:21
   |
35 |     # å†™å…¥æ–¹æ³•ï¼ˆä¼šä¿®æ”¹èµ„æºï¼‰
36 |     WRITE_METHODS = [POST, PUT, PATCH, DELETE]
   |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^
37 |
38 |     # è¯»å–æ–¹æ³•ï¼ˆä¸ä¿®æ”¹èµ„æºï¼‰
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/http_methods.py:38:11
   |
36 |     WRITE_METHODS = [POST, PUT, PATCH, DELETE]
37 |
38 |     # è¯»å–æ–¹æ³•ï¼ˆä¸ä¿®æ”¹èµ„æºï¼‰
   |               ^^
39 |     READ_METHODS = [GET, HEAD, OPTIONS]
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/http_methods.py:38:17
   |
36 |     WRITE_METHODS = [POST, PUT, PATCH, DELETE]
37 |
38 |     # è¯»å–æ–¹æ³•ï¼ˆä¸ä¿®æ”¹èµ„æºï¼‰
   |                           ^^
39 |     READ_METHODS = [GET, HEAD, OPTIONS]
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/http_methods.py:39:20
   |
38 |     # è¯»å–æ–¹æ³•ï¼ˆä¸ä¿®æ”¹èµ„æºï¼‰
39 |     READ_METHODS = [GET, HEAD, OPTIONS]
   |                    ^^^^^^^^^^^^^^^^^^^^
40 |
41 |     # ============================================================================
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/constants/import_templates.py:5:12
  |
3 | from __future__ import annotations
4 |
5 | # å®žä¾‹æ‰¹é‡å¯¼å…¥æ¨¡æ¿åˆ—ï¼Œéœ€ä¸Žå‰ç«¯æç¤ºä¿æŒä¸€è‡´
  |                     ^^
6 | INSTANCE_IMPORT_TEMPLATE_HEADERS = [
7 |     "name",
  |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/constants/import_templates.py:19:8
   |
17 | INSTANCE_IMPORT_REQUIRED_FIELDS = {"name", "db_type", "host", "port"}
18 |
19 | # æ¨¡æ¿ç¤ºä¾‹è¡Œï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿç†è§£æ ¼å¼
   |             ^^
20 | INSTANCE_IMPORT_TEMPLATE_SAMPLE = [
21 |     "demo-mysql-01",
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/constants/status_types.py:3:10
  |
1 | """çŠ¶æ€ç±»åž‹å¸¸é‡.
2 |
3 | å®šä¹‰å„ç§ä¸šåŠ¡çŠ¶æ€å€¼ï¼Œé¿å…é­”æ³•å­—ç¬¦ä¸²ã€‚
  |                   ^^
4 | """
  |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/status_types.py:24:11
   |
23 |     # æ‰€æœ‰çŠ¶æ€
24 |     ALL = [PENDING, RUNNING, COMPLETED, FAILED, CANCELLED, PAUSED]
   |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
25 |
26 |     # æ´»åŠ¨çŠ¶æ€ï¼ˆæœªç»“æŸï¼‰
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/status_types.py:26:11
   |
24 |     ALL = [PENDING, RUNNING, COMPLETED, FAILED, CANCELLED, PAUSED]
25 |
26 |     # æ´»åŠ¨çŠ¶æ€ï¼ˆæœªç»“æŸï¼‰
   |               ^^
27 |     ACTIVE = [PENDING, RUNNING, PAUSED]
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/status_types.py:26:15
   |
24 |     ALL = [PENDING, RUNNING, COMPLETED, FAILED, CANCELLED, PAUSED]
25 |
26 |     # æ´»åŠ¨çŠ¶æ€ï¼ˆæœªç»“æŸï¼‰
   |                       ^^
27 |     ACTIVE = [PENDING, RUNNING, PAUSED]
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/status_types.py:27:14
   |
26 |     # æ´»åŠ¨çŠ¶æ€ï¼ˆæœªç»“æŸï¼‰
27 |     ACTIVE = [PENDING, RUNNING, PAUSED]
   |              ^^^^^^^^^^^^^^^^^^^^^^^^^^
28 |
29 |     # ç»ˆæ­¢çŠ¶æ€ï¼ˆå·²ç»“æŸï¼‰
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/status_types.py:29:11
   |
27 |     ACTIVE = [PENDING, RUNNING, PAUSED]
28 |
29 |     # ç»ˆæ­¢çŠ¶æ€ï¼ˆå·²ç»“æŸï¼‰
   |               ^^
30 |     TERMINAL = [COMPLETED, FAILED, CANCELLED]
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/status_types.py:29:15
   |
27 |     ACTIVE = [PENDING, RUNNING, PAUSED]
28 |
29 |     # ç»ˆæ­¢çŠ¶æ€ï¼ˆå·²ç»“æŸï¼‰
   |                       ^^
30 |     TERMINAL = [COMPLETED, FAILED, CANCELLED]
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/status_types.py:30:16
   |
29 |     # ç»ˆæ­¢çŠ¶æ€ï¼ˆå·²ç»“æŸï¼‰
30 |     TERMINAL = [COMPLETED, FAILED, CANCELLED]
   |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
31 |
32 |     # æˆåŠŸçŠ¶æ€
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/status_types.py:33:15
   |
32 |     # æˆåŠŸçŠ¶æ€
33 |     SUCCESS = [COMPLETED]
   |               ^^^^^^^^^^^
34 |
35 |     # å¤±è´¥çŠ¶æ€
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/status_types.py:36:13
   |
35 |     # å¤±è´¥çŠ¶æ€
36 |     ERROR = [FAILED, CANCELLED]
   |             ^^^^^^^^^^^^^^^^^^^
37 |
38 |     # ============================================================================
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/status_types.py:44:21
   |
42 |     @classmethod
43 |     def is_terminal(cls, status: str) -> bool:
44 |         """åˆ¤æ–­æ˜¯å¦ä¸ºç»ˆæ­¢çŠ¶æ€ï¼ˆå·²ç»“æŸï¼‰.
   |                              ^^
45 |
46 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/status_types.py:44:25
   |
42 |     @classmethod
43 |     def is_terminal(cls, status: str) -> bool:
44 |         """åˆ¤æ–­æ˜¯å¦ä¸ºç»ˆæ­¢çŠ¶æ€ï¼ˆå·²ç»“æŸï¼‰.
   |                                      ^^
45 |
46 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/status_types.py:57:21
   |
55 |     @classmethod
56 |     def is_active(cls, status: str) -> bool:
57 |         """åˆ¤æ–­æ˜¯å¦ä¸ºæ´»åŠ¨çŠ¶æ€ï¼ˆæœªç»“æŸï¼‰.
   |                              ^^
58 |
59 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/status_types.py:57:25
   |
55 |     @classmethod
56 |     def is_active(cls, status: str) -> bool:
57 |         """åˆ¤æ–­æ˜¯å¦ä¸ºæ´»åŠ¨çŠ¶æ€ï¼ˆæœªç»“æŸï¼‰.
   |                                      ^^
58 |
59 |         Args:
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
   --> app/constants/status_types.py:112:11
    |
111 |     # æ‰€æœ‰çŠ¶æ€
112 |     ALL = [SUCCESS, ERROR, WARNING, INFO, PENDING, RUNNING]
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
113 |
114 |     # å®ŒæˆçŠ¶æ€
    |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
   --> app/constants/status_types.py:115:17
    |
114 |     # å®ŒæˆçŠ¶æ€
115 |     COMPLETED = [SUCCESS, ERROR, WARNING]
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^
116 |
117 |     # è¿›è¡Œä¸­çŠ¶æ€
    |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
   --> app/constants/status_types.py:118:19
    |
117 |     # è¿›è¡Œä¸­çŠ¶æ€
118 |     IN_PROGRESS = [PENDING, RUNNING]
    |                   ^^^^^^^^^^^^^^^^^^
119 |
120 |     # ============================================================================
    |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
   --> app/constants/status_types.py:166:11
    |
165 |     # æ‰€æœ‰çŠ¶æ€
166 |     ALL = [ACTIVE, INACTIVE, MAINTENANCE, ERROR]
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
167 |
168 |     # ============================================================================
    |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
   --> app/constants/status_types.py:201:11
    |
200 |     # æ‰€æœ‰çŠ¶æ€
201 |     ALL = [SCHEDULED, RUNNING, PAUSED, STOPPED]
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |

D205 1 blank line required between summary line and description
 --> app/constants/sync_constants.py:1:1
  |
1 | / """é²¸è½ - åŒæ­¥ç›¸å…³å¸¸é‡å®šä¹‰
2 | | ç»Ÿä¸€ç®¡ç†åŒæ­¥æ“ä½œæ–¹å¼å’ŒåŒæ­¥åˆ†ç±»çš„å¸¸é‡.
3 | | """
  | |___^
4 |
5 |   from enum import Enum
  |
help: Insert single blank line

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/sync_constants.py:31:30
   |
30 |       # æ“ä½œæ–¹å¼æ˜¾ç¤ºåç§°æ˜ å°„
31 |       OPERATION_TYPE_DISPLAY = {
   |  ______________________________^
32 | |         SyncOperationType.MANUAL_SINGLE: "æ‰‹åŠ¨å•å°",
33 | |         SyncOperationType.MANUAL_BATCH: "æ‰‹åŠ¨æ‰¹é‡",
34 | |         SyncOperationType.MANUAL_TASK: "æ‰‹åŠ¨ä»»åŠ¡",
35 | |         SyncOperationType.SCHEDULED_TASK: "å®šæ—¶ä»»åŠ¡",
36 | |     }
   | |_____^
37 |
38 |       # åŒæ­¥åˆ†ç±»æ˜¾ç¤ºåç§°æ˜ å°„
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/sync_constants.py:39:24
   |
38 |       # åŒæ­¥åˆ†ç±»æ˜¾ç¤ºåç§°æ˜ å°„
39 |       CATEGORY_DISPLAY = {
   |  ________________________^
40 | |         SyncCategory.ACCOUNT: "è´¦æˆ·åŒæ­¥",
41 | |         SyncCategory.CAPACITY: "å®¹é‡åŒæ­¥",
42 | |         SyncCategory.CONFIG: "é…ç½®åŒæ­¥",
43 | |         SyncCategory.AGGREGATION: "èšåˆç»Ÿè®¡",
44 | |         SyncCategory.OTHER: "å…¶ä»–",
45 | |     }
   | |_____^
46 |
47 |       # æ“ä½œæ–¹å¼è‹±æ–‡æè¿°
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/sync_constants.py:48:35
   |
47 |       # æ“ä½œæ–¹å¼è‹±æ–‡æè¿°
48 |       OPERATION_TYPE_DESCRIPTIONS = {
   |  ___________________________________^
49 | |         SyncOperationType.MANUAL_SINGLE: "Manual Single Instance Operation",
50 | |         SyncOperationType.MANUAL_BATCH: "Manual Batch Operation",
51 | |         SyncOperationType.MANUAL_TASK: "Manual Task Operation",
52 | |         SyncOperationType.SCHEDULED_TASK: "Scheduled Task Operation",
53 | |     }
   | |_____^
54 |
55 |       # åŒæ­¥åˆ†ç±»è‹±æ–‡æè¿°
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/sync_constants.py:56:29
   |
55 |       # åŒæ­¥åˆ†ç±»è‹±æ–‡æè¿°
56 |       CATEGORY_DESCRIPTIONS = {
   |  _____________________________^
57 | |         SyncCategory.ACCOUNT: "Account Synchronization",
58 | |         SyncCategory.CAPACITY: "Capacity Synchronization",
59 | |         SyncCategory.CONFIG: "Configuration Synchronization",
60 | |         SyncCategory.AGGREGATION: "Aggregation Statistics",
61 | |         SyncCategory.OTHER: "Other Operations",
62 | |     }
   | |_____^
63 |
64 |       # æ•°æ®åº“çº¦æŸå€¼åˆ—è¡¨
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/sync_constants.py:65:29
   |
64 |     # æ•°æ®åº“çº¦æŸå€¼åˆ—è¡¨
65 |     OPERATION_TYPE_VALUES = [t.value for t in SyncOperationType]
   |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
66 |     CATEGORY_VALUES = [c.value for c in SyncCategory]
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/sync_constants.py:66:23
   |
64 |     # æ•°æ®åº“çº¦æŸå€¼åˆ—è¡¨
65 |     OPERATION_TYPE_VALUES = [t.value for t in SyncOperationType]
66 |     CATEGORY_VALUES = [c.value for c in SyncCategory]
   |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
67 |
68 |     @staticmethod
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/constants/sync_constants.py:76:27
   |
75 |         Returns:
76 |             True è¡¨ç¤ºå­˜åœ¨äºŽæ”¯æŒåˆ—è¡¨ï¼Œå¦åˆ™ Falseã€‚
   |                                    ^^
77 |
78 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/constants/sync_constants.py:89:24
   |
88 |         Returns:
89 |             True è¡¨ç¤ºæœ‰æ•ˆåˆ†ç±»ï¼Œå¦åˆ™ Falseã€‚
   |                              ^^
90 |
91 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/constants/sync_constants.py:102:19
    |
101 |         Returns:
102 |             å¯¹åº”ä¸­æ–‡æ ‡ç­¾ï¼Œæ— æ³•è§£æžæ—¶è¿”å›žåŽŸå€¼ã€‚
    |                         ^^
103 |
104 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/constants/sync_constants.py:119:17
    |
118 |         Returns:
119 |             ä¸­æ–‡æ ‡ç­¾ï¼ŒæœªåŒ¹é…æ—¶è¿”å›žåŽŸå€¼ã€‚
    |                     ^^
120 |
121 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/constants/sync_constants.py:136:19
    |
135 |         Returns:
136 |             è‹±æ–‡æè¿°æ–‡æœ¬ï¼ŒæœªçŸ¥å€¼è¿”å›žåŽŸå€¼ã€‚
    |                         ^^
137 |
138 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/constants/sync_constants.py:153:19
    |
152 |         Returns:
153 |             è‹±æ–‡æè¿°æ–‡æœ¬ï¼ŒæœªçŸ¥å€¼è¿”å›žåŽŸå€¼ã€‚
    |                         ^^
154 |
155 |         """
    |

D205 1 blank line required between summary line and description
 --> app/constants/system_constants.py:1:1
  |
1 | / """é²¸è½ - å¸¸é‡å®šä¹‰æ¨¡å—
2 | | ç»Ÿä¸€ç®¡ç†æ‰€æœ‰é­”æ³•æ•°å­—ã€ç¡¬ç¼–ç å€¼å’Œé…ç½®å¸¸é‡.
3 | | """
  | |___^
4 |
5 |   # ç§»é™¤å¾ªçŽ¯å¯¼å…¥
  |
help: Insert single blank line

S105 Possible hardcoded password assigned to: "TOKEN_EXPIRED"
  --> app/constants/system_constants.py:62:21
   |
60 |     # è®¤è¯é”™è¯¯
61 |     INVALID_CREDENTIALS = "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"
62 |     TOKEN_EXPIRED = "ä»¤ç‰Œå·²è¿‡æœŸ"
   |                     ^^^^^^^^^^^^
63 |     TOKEN_INVALID = "æ— æ•ˆçš„ä»¤ç‰Œ"
64 |     ACCOUNT_DISABLED = "è´¦æˆ·å·²è¢«ç¦ç”¨"
   |

S105 Possible hardcoded password assigned to: "TOKEN_INVALID"
  --> app/constants/system_constants.py:63:21
   |
61 |     INVALID_CREDENTIALS = "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"
62 |     TOKEN_EXPIRED = "ä»¤ç‰Œå·²è¿‡æœŸ"
63 |     TOKEN_INVALID = "æ— æ•ˆçš„ä»¤ç‰Œ"
   |                     ^^^^^^^^^^^^
64 |     ACCOUNT_DISABLED = "è´¦æˆ·å·²è¢«ç¦ç”¨"
65 |     ACCOUNT_LOCKED = "è´¦æˆ·å·²è¢«é”å®š"
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/constants/system_constants.py:66:34
   |
64 |     ACCOUNT_DISABLED = "è´¦æˆ·å·²è¢«ç¦ç”¨"
65 |     ACCOUNT_LOCKED = "è´¦æˆ·å·²è¢«é”å®š"
66 |     RATE_LIMIT_EXCEEDED = "è¯·æ±‚è¿‡äºŽé¢‘ç¹ï¼Œè¯·ç¨åŽå†è¯•"
   |                                        ^^
67 |
68 |     # æ•°æ®åº“é”™è¯¯
   |

S105 Possible hardcoded password assigned to: "PASSWORD_CHANGED"
   --> app/constants/system_constants.py:100:24
    |
 98 |     LOGIN_SUCCESS = "ç™»å½•æˆåŠŸ"
 99 |     LOGOUT_SUCCESS = "ç™»å‡ºæˆåŠŸ"
100 |     PASSWORD_CHANGED = "å¯†ç ä¿®æ”¹æˆåŠŸ"
    |                        ^^^^^^^^^^^^^^
101 |     PROFILE_UPDATED = "èµ„æ–™æ›´æ–°æˆåŠŸ"
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/constants/time_constants.py:3:14
  |
1 | """æ—¶é—´å¸¸é‡.
2 |
3 | æä¾›å¸¸ç”¨æ—¶é—´å•ä½çš„ç§’æ•°è¡¨ç¤ºï¼Œæé«˜ä»£ç å¯è¯»æ€§ã€‚
  |                           ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/time_constants.py:8:12
   |
 7 | class TimeConstants:
 8 |     """æ—¶é—´å¸¸é‡ï¼ˆç§’æ•°ï¼‰.
   |                ^^
 9 |
10 |     æä¾›å¸¸ç”¨æ—¶é—´å•ä½çš„ç§’æ•°è¡¨ç¤ºï¼Œé¿å…åœ¨ä»£ç ä¸­ä½¿ç”¨é­”æ³•æ•°å­—ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/time_constants.py:8:15
   |
 7 | class TimeConstants:
 8 |     """æ—¶é—´å¸¸é‡ï¼ˆç§’æ•°ï¼‰.
   |                      ^^
 9 |
10 |     æä¾›å¸¸ç”¨æ—¶é—´å•ä½çš„ç§’æ•°è¡¨ç¤ºï¼Œé¿å…åœ¨ä»£ç ä¸­ä½¿ç”¨é­”æ³•æ•°å­—ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/constants/time_constants.py:10:18
   |
 8 |     """æ—¶é—´å¸¸é‡ï¼ˆç§’æ•°ï¼‰.
 9 |
10 |     æä¾›å¸¸ç”¨æ—¶é—´å•ä½çš„ç§’æ•°è¡¨ç¤ºï¼Œé¿å…åœ¨ä»£ç ä¸­ä½¿ç”¨é­”æ³•æ•°å­—ã€‚
   |                               ^^
11 |     """
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/time_constants.py:14:13
   |
13 |     # ============================================================================
14 |     # åŸºç¡€æ—¶é—´å•ä½ï¼ˆåˆ†é’Ÿï¼‰
   |                   ^^
15 |     # ============================================================================
16 |     ONE_MINUTE = 60
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/time_constants.py:14:16
   |
13 |     # ============================================================================
14 |     # åŸºç¡€æ—¶é—´å•ä½ï¼ˆåˆ†é’Ÿï¼‰
   |                         ^^
15 |     # ============================================================================
16 |     ONE_MINUTE = 60
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/time_constants.py:40:10
   |
39 |     # ============================================================================
40 |     # æœˆå’Œå¹´ï¼ˆè¿‘ä¼¼å€¼ï¼‰
   |             ^^
41 |     # ============================================================================
42 |     ONE_MONTH = 2592000    # 30å¤©
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/time_constants.py:40:14
   |
39 |     # ============================================================================
40 |     # æœˆå’Œå¹´ï¼ˆè¿‘ä¼¼å€¼ï¼‰
   |                     ^^
41 |     # ============================================================================
42 |     ONE_MONTH = 2592000    # 30å¤©
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/constants/user_roles.py:3:10
  |
1 | """ç”¨æˆ·è§’è‰²å¸¸é‡.
2 |
3 | å®šä¹‰ç”¨æˆ·è§’è‰²å’Œæƒé™ï¼Œé¿å…é­”æ³•å­—ç¬¦ä¸²ã€‚
  |                   ^^
4 | """
  |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/constants/user_roles.py:18:38
   |
16 |     ADMIN = "admin"             # ç®¡ç†å‘˜
17 |     USER = "user"               # æ™®é€šç”¨æˆ·
18 |     VIEWER = "viewer"           # æŸ¥çœ‹è€…ï¼ˆåªè¯»ï¼‰
   |                                         ^^
19 |
20 |     # æ‰€æœ‰è§’è‰²
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/constants/user_roles.py:18:41
   |
16 |     ADMIN = "admin"             # ç®¡ç†å‘˜
17 |     USER = "user"               # æ™®é€šç”¨æˆ·
18 |     VIEWER = "viewer"           # æŸ¥çœ‹è€…ï¼ˆåªè¯»ï¼‰
   |                                               ^^
19 |
20 |     # æ‰€æœ‰è§’è‰²
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/user_roles.py:21:11
   |
20 |     # æ‰€æœ‰è§’è‰²
21 |     ALL = [ADMIN, USER, VIEWER]
   |           ^^^^^^^^^^^^^^^^^^^^^
22 |
23 |     # ============================================================================
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/user_roles.py:36:19
   |
35 |       # è§’è‰²æƒé™æ˜ å°„
36 |       PERMISSIONS = {
   |  ___________________^
37 | |         ADMIN: [PERM_READ, PERM_CREATE, PERM_UPDATE, PERM_DELETE, PERM_ADMIN, PERM_EXECUTE],
38 | |         USER: [PERM_READ, PERM_CREATE, PERM_UPDATE, PERM_DELETE, PERM_EXECUTE],
39 | |         VIEWER: [PERM_READ],
40 | |     }
   | |_____^
41 |
42 |       # è§’è‰²æ˜¾ç¤ºåç§°
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/user_roles.py:43:21
   |
42 |       # è§’è‰²æ˜¾ç¤ºåç§°
43 |       DISPLAY_NAMES = {
   |  _____________________^
44 | |         ADMIN: "ç®¡ç†å‘˜",
45 | |         USER: "ç”¨æˆ·",
46 | |         VIEWER: "æŸ¥çœ‹è€…",
47 | |     }
   | |_____^
48 |
49 |       # è§’è‰²æè¿°
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/constants/user_roles.py:50:20
   |
49 |       # è§’è‰²æè¿°
50 |       DESCRIPTIONS = {
   |  ____________________^
51 | |         ADMIN: "æ‹¥æœ‰ç³»ç»Ÿæ‰€æœ‰æƒé™ï¼Œå¯ä»¥ç®¡ç†ç”¨æˆ·å’Œç³»ç»Ÿé…ç½®",
52 | |         USER: "å¯ä»¥åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤æ•°æ®ï¼Œæ‰§è¡ŒåŒæ­¥ä»»åŠ¡",
53 | |         VIEWER: "åªèƒ½æŸ¥çœ‹æ•°æ®ï¼Œä¸èƒ½è¿›è¡Œä»»ä½•ä¿®æ”¹æ“ä½œ",
54 | |     }
   | |_____^
55 |
56 |       # ============================================================================
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/constants/user_roles.py:51:25
   |
49 |     # è§’è‰²æè¿°
50 |     DESCRIPTIONS = {
51 |         ADMIN: "æ‹¥æœ‰ç³»ç»Ÿæ‰€æœ‰æƒé™ï¼Œå¯ä»¥ç®¡ç†ç”¨æˆ·å’Œç³»ç»Ÿé…ç½®",
   |                                 ^^
52 |         USER: "å¯ä»¥åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤æ•°æ®ï¼Œæ‰§è¡ŒåŒæ­¥ä»»åŠ¡",
53 |         VIEWER: "åªèƒ½æŸ¥çœ‹æ•°æ®ï¼Œä¸èƒ½è¿›è¡Œä»»ä½•ä¿®æ”¹æ“ä½œ",
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/constants/user_roles.py:52:28
   |
50 |     DESCRIPTIONS = {
51 |         ADMIN: "æ‹¥æœ‰ç³»ç»Ÿæ‰€æœ‰æƒé™ï¼Œå¯ä»¥ç®¡ç†ç”¨æˆ·å’Œç³»ç»Ÿé…ç½®",
52 |         USER: "å¯ä»¥åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤æ•°æ®ï¼Œæ‰§è¡ŒåŒæ­¥ä»»åŠ¡",
   |                                        ^^
53 |         VIEWER: "åªèƒ½æŸ¥çœ‹æ•°æ®ï¼Œä¸èƒ½è¿›è¡Œä»»ä½•ä¿®æ”¹æ“ä½œ",
54 |     }
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/constants/user_roles.py:53:24
   |
51 |         ADMIN: "æ‹¥æœ‰ç³»ç»Ÿæ‰€æœ‰æƒé™ï¼Œå¯ä»¥ç®¡ç†ç”¨æˆ·å’Œç³»ç»Ÿé…ç½®",
52 |         USER: "å¯ä»¥åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤æ•°æ®ï¼Œæ‰§è¡ŒåŒæ­¥ä»»åŠ¡",
53 |         VIEWER: "åªèƒ½æŸ¥çœ‹æ•°æ®ï¼Œä¸èƒ½è¿›è¡Œä»»ä½•ä¿®æ”¹æ“ä½œ",
   |                              ^^
54 |     }
   |

D205 1 blank line required between summary line and description
 --> app/errors/__init__.py:1:1
  |
1 | / """é²¸è½ - ç»Ÿä¸€å¼‚å¸¸å®šä¹‰
2 | | é›†ä¸­ç»´æŠ¤ä¸šåŠ¡å¼‚å¸¸ç±»åž‹ã€ä¸¥é‡åº¦ä¸Ž HTTP çŠ¶æ€ç æ˜ å°„.
3 | | """
  | |___^
4 |
5 |   from __future__ import annotations
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/errors/__init__.py:53:25
   |
52 |     Args:
53 |         message: è‡ªå®šä¹‰é”™è¯¯æ–‡æ¡ˆï¼Œè‹¥ä¸ºç©ºåˆ™æ ¹æ® ``message_key`` æŽ¨å¯¼ã€‚
   |                                ^^
54 |         message_key: `ErrorMessages` ä¸­çš„å¸¸é‡åç§°ï¼Œä¾¿äºŽç»Ÿä¸€ç®¡ç†/å›½é™…åŒ–ã€‚
55 |         extra: é™„åŠ çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å­—å…¸ï¼ˆä¾‹å¦‚ instance_idã€payload ç­‰å®‰å…¨å­—æ®µï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/errors/__init__.py:54:44
   |
52 |     Args:
53 |         message: è‡ªå®šä¹‰é”™è¯¯æ–‡æ¡ˆï¼Œè‹¥ä¸ºç©ºåˆ™æ ¹æ® ``message_key`` æŽ¨å¯¼ã€‚
54 |         message_key: `ErrorMessages` ä¸­çš„å¸¸é‡åç§°ï¼Œä¾¿äºŽç»Ÿä¸€ç®¡ç†/å›½é™…åŒ–ã€‚
   |                                                  ^^
55 |         extra: é™„åŠ çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å­—å…¸ï¼ˆä¾‹å¦‚ instance_idã€payload ç­‰å®‰å…¨å­—æ®µï¼‰ã€‚
56 |         severity: å¯è¦†ç›–é»˜è®¤ä¸¥é‡åº¦ï¼Œç”¨äºŽåŠ¨æ€è°ƒæ•´å‘Šè­¦çº§åˆ«ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/errors/__init__.py:55:26
   |
53 |         message: è‡ªå®šä¹‰é”™è¯¯æ–‡æ¡ˆï¼Œè‹¥ä¸ºç©ºåˆ™æ ¹æ® ``message_key`` æŽ¨å¯¼ã€‚
54 |         message_key: `ErrorMessages` ä¸­çš„å¸¸é‡åç§°ï¼Œä¾¿äºŽç»Ÿä¸€ç®¡ç†/å›½é™…åŒ–ã€‚
55 |         extra: é™„åŠ çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å­—å…¸ï¼ˆä¾‹å¦‚ instance_idã€payload ç­‰å®‰å…¨å­—æ®µï¼‰ã€‚
   |                                    ^^
56 |         severity: å¯è¦†ç›–é»˜è®¤ä¸¥é‡åº¦ï¼Œç”¨äºŽåŠ¨æ€è°ƒæ•´å‘Šè­¦çº§åˆ«ã€‚
57 |         category: å¯è¦†ç›–é»˜è®¤é”™è¯¯åˆ†ç±»ï¼Œä¾¿äºŽç»Ÿè®¡ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/errors/__init__.py:55:55
   |
53 |         message: è‡ªå®šä¹‰é”™è¯¯æ–‡æ¡ˆï¼Œè‹¥ä¸ºç©ºåˆ™æ ¹æ® ``message_key`` æŽ¨å¯¼ã€‚
54 |         message_key: `ErrorMessages` ä¸­çš„å¸¸é‡åç§°ï¼Œä¾¿äºŽç»Ÿä¸€ç®¡ç†/å›½é™…åŒ–ã€‚
55 |         extra: é™„åŠ çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å­—å…¸ï¼ˆä¾‹å¦‚ instance_idã€payload ç­‰å®‰å…¨å­—æ®µï¼‰ã€‚
   |                                                                          ^^
56 |         severity: å¯è¦†ç›–é»˜è®¤ä¸¥é‡åº¦ï¼Œç”¨äºŽåŠ¨æ€è°ƒæ•´å‘Šè­¦çº§åˆ«ã€‚
57 |         category: å¯è¦†ç›–é»˜è®¤é”™è¯¯åˆ†ç±»ï¼Œä¾¿äºŽç»Ÿè®¡ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/errors/__init__.py:56:27
   |
54 |         message_key: `ErrorMessages` ä¸­çš„å¸¸é‡åç§°ï¼Œä¾¿äºŽç»Ÿä¸€ç®¡ç†/å›½é™…åŒ–ã€‚
55 |         extra: é™„åŠ çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å­—å…¸ï¼ˆä¾‹å¦‚ instance_idã€payload ç­‰å®‰å…¨å­—æ®µï¼‰ã€‚
56 |         severity: å¯è¦†ç›–é»˜è®¤ä¸¥é‡åº¦ï¼Œç”¨äºŽåŠ¨æ€è°ƒæ•´å‘Šè­¦çº§åˆ«ã€‚
   |                                   ^^
57 |         category: å¯è¦†ç›–é»˜è®¤é”™è¯¯åˆ†ç±»ï¼Œä¾¿äºŽç»Ÿè®¡ã€‚
58 |         status_code: HTTP çŠ¶æ€ç ï¼Œé»˜è®¤å– ``metadata`` ä¸­çš„é…ç½®ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/errors/__init__.py:57:28
   |
55 |         extra: é™„åŠ çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å­—å…¸ï¼ˆä¾‹å¦‚ instance_idã€payload ç­‰å®‰å…¨å­—æ®µï¼‰ã€‚
56 |         severity: å¯è¦†ç›–é»˜è®¤ä¸¥é‡åº¦ï¼Œç”¨äºŽåŠ¨æ€è°ƒæ•´å‘Šè­¦çº§åˆ«ã€‚
57 |         category: å¯è¦†ç›–é»˜è®¤é”™è¯¯åˆ†ç±»ï¼Œä¾¿äºŽç»Ÿè®¡ã€‚
   |                                     ^^
58 |         status_code: HTTP çŠ¶æ€ç ï¼Œé»˜è®¤å– ``metadata`` ä¸­çš„é…ç½®ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/errors/__init__.py:58:30
   |
56 |         severity: å¯è¦†ç›–é»˜è®¤ä¸¥é‡åº¦ï¼Œç”¨äºŽåŠ¨æ€è°ƒæ•´å‘Šè­¦çº§åˆ«ã€‚
57 |         category: å¯è¦†ç›–é»˜è®¤é”™è¯¯åˆ†ç±»ï¼Œä¾¿äºŽç»Ÿè®¡ã€‚
58 |         status_code: HTTP çŠ¶æ€ç ï¼Œé»˜è®¤å– ``metadata`` ä¸­çš„é…ç½®ã€‚
   |                                 ^^
59 |
60 |     """
   |

PLR0913 Too many arguments in function definition (6 > 5)
  --> app/errors/__init__.py:69:9
   |
67 |     )
68 |
69 |     def __init__(
   |         ^^^^^^^^
70 |         self,
71 |         message: str | None = None,
   |

D107 Missing docstring in `__init__`
  --> app/errors/__init__.py:69:9
   |
67 |     )
68 |
69 |     def __init__(
   |         ^^^^^^^^
70 |         self,
71 |         message: str | None = None,
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/errors/__init__.py:102:35
    |
101 |         Returns:
102 |             ErrorCategory: ç»Ÿä¸€çš„é”™è¯¯åˆ†ç±»ï¼Œç”¨äºŽç»Ÿè®¡ä¸Žç›‘æŽ§ã€‚
    |                                          ^^
103 |
104 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/errors/__init__.py:112:32
    |
111 |         Returns:
112 |             int: å¯¹å¤–æš´éœ²çš„ HTTP çŠ¶æ€ç ï¼Œé»˜è®¤ä¸ºå¼‚å¸¸å…ƒæ•°æ®é…ç½®ã€‚
    |                                        ^^
113 |
114 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/errors/__init__.py:122:44
    |
121 |         Returns:
122 |             bool: ä¸¥é‡åº¦ä¸º LOW æˆ– MEDIUM æ—¶ä¸º Trueï¼Œè¡¨ç¤ºå¯é‡è¯•æˆ–è‡ªåŠ¨ä¿®å¤ã€‚
    |                                                   ^^
123 |
124 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/errors/__init__.py:131:24
    |
129 |     """è¡¨ç¤ºè¾“å…¥å‚æ•°æˆ–è¯·æ±‚ä½“éªŒè¯å¤±è´¥ã€‚.
130 |
131 |     å¸¸ç”¨äºŽè¡¨å•æ ¡éªŒã€æŽ¥å£å¿…å¡«å­—æ®µç¼ºå¤±ç­‰åœºæ™¯ï¼Œé»˜è®¤è¿”å›ž 400ã€‚
    |                                           ^^
132 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/errors/__init__.py:148:19
    |
146 |     """è¡¨ç¤ºç”¨æˆ·å‡­è¯æ— æ•ˆæˆ–å·²è¿‡æœŸã€‚.
147 |
148 |     é€šå¸¸ç”±ç™»å½•ã€ä»¤ç‰Œåˆ·æ–°æµç¨‹æŠ›å‡ºï¼Œé»˜è®¤è¿”å›ž 401ã€‚
    |                                 ^^
149 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/errors/__init__.py:162:23
    |
160 |     """è¡¨ç¤ºå½“å‰ä¸»ä½“ç¼ºå°‘è®¿é—®ç›®æ ‡èµ„æºçš„æƒé™ã€‚.
161 |
162 |     å¸¸è§äºŽæƒé™æ ¡éªŒæˆ–èµ„æºçº§ ACL åˆ¤æ–­ï¼Œé»˜è®¤è¿”å›ž 403ã€‚
    |                                    ^^
163 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/errors/__init__.py:176:20
    |
174 |     """è¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨æˆ–è¢«åˆ é™¤ã€‚.
175 |
176 |     é€‚ç”¨äºŽå®žä¾‹/è´¦æˆ·æŸ¥æ‰¾å¤±è´¥ç­‰æƒ…å†µï¼Œé»˜è®¤è¿”å›ž 404ã€‚
    |                                  ^^
177 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/errors/__init__.py:190:21
    |
188 |     """è¡¨ç¤ºèµ„æºçŠ¶æ€å†²çªæˆ–è¿åå”¯ä¸€æ€§çº¦æŸã€‚.
189 |
190 |     å…¸åž‹åœºæ™¯ä¸ºé‡å¤åˆ›å»ºã€å¹¶å‘ä¿®æ”¹å†²çªï¼Œé»˜è®¤è¿”å›ž 409ã€‚
    |                                     ^^
191 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/errors/__init__.py:204:17
    |
202 |     """è¡¨ç¤ºè§¦å‘ç½‘å…³æˆ–ä¸šåŠ¡å±‚çš„é™æµç­–ç•¥ã€‚.
203 |
204 |     å½“è¯·æ±‚é¢‘çŽ‡è¶…å‡ºé™åˆ¶æ—¶æŠ›å‡ºï¼Œé»˜è®¤è¿”å›ž 429ã€‚
    |                             ^^
205 |     """
    |

E501 Line too long (122 > 120)
   --> app/errors/__init__.py:211:121
    |
209 |         category=ErrorCategory.SECURITY,
210 |         severity=ErrorSeverity.MEDIUM,
211 |         default_message_key="RATE_LIMIT_EXCEEDED" if hasattr(ErrorMessages, "RATE_LIMIT_EXCEEDED") else "INVALID_REQUEST",
    |                                                                                                                         ^^
212 |     )
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/errors/__init__.py:216:14
    |
215 | class ExternalServiceError(AppError):
216 |     """è¡¨ç¤ºä¸‹æ¸¸ä¾èµ–ï¼ˆå¦‚å¤–éƒ¨ APIã€æœåŠ¡ï¼‰ä¸å¯ç”¨æˆ–è¶…æ—¶ã€‚.
    |                    ^^
217 |
218 |     æŠ›å‡ºåŽæé†’è°ƒç”¨æ–¹é‡è¯•æˆ–é™çº§ï¼Œé»˜è®¤è¿”å›ž 502ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/errors/__init__.py:216:25
    |
215 | class ExternalServiceError(AppError):
216 |     """è¡¨ç¤ºä¸‹æ¸¸ä¾èµ–ï¼ˆå¦‚å¤–éƒ¨ APIã€æœåŠ¡ï¼‰ä¸å¯ç”¨æˆ–è¶…æ—¶ã€‚.
    |                                      ^^
217 |
218 |     æŠ›å‡ºåŽæé†’è°ƒç”¨æ–¹é‡è¯•æˆ–é™çº§ï¼Œé»˜è®¤è¿”å›ž 502ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/errors/__init__.py:218:18
    |
216 |     """è¡¨ç¤ºä¸‹æ¸¸ä¾èµ–ï¼ˆå¦‚å¤–éƒ¨ APIã€æœåŠ¡ï¼‰ä¸å¯ç”¨æˆ–è¶…æ—¶ã€‚.
217 |
218 |     æŠ›å‡ºåŽæé†’è°ƒç”¨æ–¹é‡è¯•æˆ–é™çº§ï¼Œé»˜è®¤è¿”å›ž 502ã€‚
    |                               ^^
219 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/errors/__init__.py:232:23
    |
230 |     """è¡¨ç¤ºæ•°æ®åº“æŸ¥è¯¢æˆ–äº‹åŠ¡æ‰§è¡Œå¤±è´¥ã€‚.
231 |
232 |     å¯ç”¨äºŽ SQL å¼‚å¸¸ã€è¿žæŽ¥å¤±è´¥ç­‰æƒ…å†µï¼Œé»˜è®¤è¿”å›ž 500ã€‚
    |                                    ^^
233 |     """
    |

A001 Variable `SystemError` is shadowing a Python builtin
   --> app/errors/__init__.py:243:7
    |
243 | class SystemError(AppError):
    |       ^^^^^^^^^^^
244 |     """è¡¨ç¤ºç³»ç»Ÿçº§æœªçŸ¥é”™è¯¯æˆ–åº•å±‚æ•…éšœã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/errors/__init__.py:246:16
    |
244 |     """è¡¨ç¤ºç³»ç»Ÿçº§æœªçŸ¥é”™è¯¯æˆ–åº•å±‚æ•…éšœã€‚.
245 |
246 |     ç”¨äºŽæ•èŽ·æ— æ³•å½’ç±»çš„å¼‚å¸¸ï¼Œé»˜è®¤è¿”å›ž 500ã€‚
    |                           ^^
247 |     """
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
 --> app/forms/__init__.py:3:12
  |
1 | """è¡¨å•å®šä¹‰åŒ….
2 |
3 | é›†ä¸­ç®¡ç†èµ„æºçº§è¡¨å•é…ç½®ï¼ˆå­—æ®µã€æ¨¡æ¿ã€æœåŠ¡æ˜ å°„ç­‰ï¼‰ã€‚
  |                       ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
 --> app/forms/__init__.py:3:24
  |
1 | """è¡¨å•å®šä¹‰åŒ….
2 |
3 | é›†ä¸­ç®¡ç†èµ„æºçº§è¡¨å•é…ç½®ï¼ˆå­—æ®µã€æ¨¡æ¿ã€æœåŠ¡æ˜ å°„ç­‰ï¼‰ã€‚
  |                                               ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/forms/definitions/__init__.py:1:12
  |
1 | """èµ„æºè¡¨å•å®šä¹‰é›†åˆï¼ŒæŒ‰éœ€æƒ°æ€§å¯¼å…¥é¿å…å¾ªçŽ¯ä¾èµ–ã€‚."""
  |                    ^^
2 |
3 | from __future__ import annotations
  |

PLE0604 Invalid object in `__all__`, must contain only strings
  --> app/forms/definitions/__init__.py:21:1
   |
19 | }
20 |
21 | __all__ = [
   | ^^^^^^^
22 |     "FieldComponent",
23 |     "FieldOption",
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `__getattr__`
  --> app/forms/definitions/__init__.py:30:31
   |
30 | def __getattr__(name: str) -> Any:
   |                               ^^^
31 |     """åœ¨é¦–æ¬¡è®¿é—®æ—¶åŠ è½½å…·ä½“è¡¨å•å®šä¹‰ï¼Œè§„é¿å¯¼å…¥çŽ¯ã€‚."""
32 |     if name not in _LAZY_ATTRS:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/forms/definitions/__init__.py:31:22
   |
30 | def __getattr__(name: str) -> Any:
31 |     """åœ¨é¦–æ¬¡è®¿é—®æ—¶åŠ è½½å…·ä½“è¡¨å•å®šä¹‰ï¼Œè§„é¿å¯¼å…¥çŽ¯ã€‚."""
   |                                    ^^
32 |     if name not in _LAZY_ATTRS:
33 |         msg = f"module 'app.forms.definitions' æ²¡æœ‰å±žæ€§ {name}"
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/forms/definitions/account_classification.py:47:33
   |
45 |             component=FieldComponent.NUMBER,
46 |             default=0,
47 |             help_text="æ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼Œç”¨äºŽæŽ§åˆ¶æ˜¾ç¤ºé¡ºåºå’Œè§„åˆ™åŒ¹é…é¡ºåº",
   |                                          ^^
48 |         ),
49 |     ],
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/forms/definitions/account_classification_rule.py:41:37
   |
39 |             label="æƒé™é…ç½®",
40 |             component=FieldComponent.TEXTAREA,
41 |             help_text="JSON æ ¼å¼çš„æƒé™è¡¨è¾¾å¼ï¼Œç”±å‰ç«¯æƒé™é…ç½®å™¨ç”Ÿæˆ",
   |                                             ^^
42 |         ),
43 |     ],
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/forms/definitions/base.py:3:24
  |
1 | """åŸºç¡€çš„èµ„æºè¡¨å•å®šä¹‰æ¨¡åž‹ã€‚.
2 |
3 | è¿™äº›å®šä¹‰ä¼šè¢«åŽç«¯è§†å›¾ã€æœåŠ¡å±‚ä»¥åŠå‰ç«¯æŽ§åˆ¶å™¨å…±äº«ï¼Œç¡®ä¿å­—æ®µæè¿°åªæœ‰å”¯ä¸€æ¥æºã€‚
  |                                               ^^
4 | """
  |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `resource`
  --> app/forms/definitions/base.py:64:37
   |
62 |     """
63 |
64 |     def __call__(self, *, resource: Any | None) -> Mapping[str, Any]:
   |                                     ^^^^^^^^^^
65 |         """æž„é€ æ¨¡æ¿æ¸²æŸ“æ‰€éœ€çš„ä¸Šä¸‹æ–‡å­—å…¸ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/forms/definitions/base.py:68:34
   |
67 |         Args:
68 |             resource: å½“å‰æ­£åœ¨ç¼–è¾‘çš„èµ„æºå®žä¾‹ï¼Œåˆ›å»ºåœºæ™¯ä¸‹å¯èƒ½ä¸º Noneã€‚
   |                                             ^^
69 |
70 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/forms/definitions/base.py:71:19
   |
70 |         Returns:
71 |             ä¸€ä¸ªæ˜ å°„å¯¹è±¡ï¼Œåˆå¹¶åˆ°æ¨¡æ¿ä¸Šä¸‹æ–‡ä¸­ã€‚
   |                         ^^
72 |
73 |         """
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/forms/definitions/base.py:82:20
   |
81 |     Attributes:
82 |         name: èµ„æºè‹±æ–‡åï¼ˆå¦‚ instanceã€credentialï¼‰
   |                         ^^
83 |         template: æ¸²æŸ“æ‰€ç”¨çš„æ¨¡æ¿è·¯å¾„
84 |         service_class: è´Ÿè´£æŒä¹…åŒ–çš„æœåŠ¡ç±»åž‹
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/forms/definitions/base.py:82:42
   |
81 |     Attributes:
82 |         name: èµ„æºè‹±æ–‡åï¼ˆå¦‚ instanceã€credentialï¼‰
   |                                                  ^^
83 |         template: æ¸²æŸ“æ‰€ç”¨çš„æ¨¡æ¿è·¯å¾„
84 |         service_class: è´Ÿè´£æŒä¹…åŒ–çš„æœåŠ¡ç±»åž‹
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/forms/definitions/base.py:88:34
   |
86 |         success_message: ä¿å­˜æˆåŠŸåŽçš„æç¤ºè¯­
87 |         redirect_endpoint: ä¿å­˜æˆåŠŸåŽè·³è½¬çš„ç«¯ç‚¹
88 |         context_builder: é¢å¤–ä¸Šä¸‹æ–‡æž„é€ å™¨ï¼ˆå¯é€‰ï¼‰
   |                                          ^^
89 |         extra_config: å…¶ä»–è‡ªå®šä¹‰é…ç½®
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/forms/definitions/base.py:88:37
   |
86 |         success_message: ä¿å­˜æˆåŠŸåŽçš„æç¤ºè¯­
87 |         redirect_endpoint: ä¿å­˜æˆåŠŸåŽè·³è½¬çš„ç«¯ç‚¹
88 |         context_builder: é¢å¤–ä¸Šä¸‹æ–‡æž„é€ å™¨ï¼ˆå¯é€‰ï¼‰
   |                                                ^^
89 |         extra_config: å…¶ä»–è‡ªå®šä¹‰é…ç½®
   |

RUF001 String contains ambiguous `ï¼` (FULLWIDTH EXCLAMATION MARK). Did you mean `!` (EXCLAMATION MARK)?
  --> app/forms/definitions/credential.py:10:28
   |
 8 |     template="credentials/form.html",
 9 |     service_class=CredentialFormService,
10 |     success_message="å‡­æ®ä¿å­˜æˆåŠŸï¼",
   |                                  ^^
11 |     redirect_endpoint="credentials.index",
12 |     fields=[
   |

RUF001 String contains ambiguous `ï¼` (FULLWIDTH EXCLAMATION MARK). Did you mean `!` (EXCLAMATION MARK)?
  --> app/forms/definitions/instance.py:10:28
   |
 8 |     template="instances/form.html",
 9 |     service_class=InstanceFormService,
10 |     success_message="å®žä¾‹ä¿å­˜æˆåŠŸï¼",
   |                                  ^^
11 |     redirect_endpoint="instance.index",
12 |     fields=[
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/forms/definitions/instance.py:17:36
   |
15 |             label="å®žä¾‹åç§°",
16 |             required=True,
17 |             help_text="ç”¨äºŽæ ‡è¯†æ•°æ®åº“å®žä¾‹çš„åç§°ï¼Œå¿…é¡»å”¯ä¸€",
   |                                                ^^
18 |         ),
19 |         ResourceFormField(
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/forms/definitions/instance.py:49:35
   |
47 |             name="database_name",
48 |             label="æ•°æ®åº“åç§°",
49 |             help_text="ä¸åŒæ•°æ®åº“ä¼šæœ‰é»˜è®¤åç§°ï¼Œå¯æ ¹æ®å®žé™…æƒ…å†µè°ƒæ•´",
   |                                              ^^
50 |         ),
51 |         ResourceFormField(
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/forms/definitions/scheduler_job.py:73:31
   |
71 |             label="è¿è¡Œæ—¶é—´",
72 |             component=FieldComponent.TEXT,
73 |             help_text="æ—¥æœŸè§¦å‘å™¨ä½¿ç”¨ï¼Œæ ¼å¼ä¸º YYYY-MM-DD HH:MM",
   |                                      ^^
74 |         ),
75 |     ],
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/forms/definitions/user.py:17:36
   |
15 |             label="ç”¨æˆ·å",
16 |             required=True,
17 |             help_text="ä»…æ”¯æŒå­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œé•¿åº¦3-20ä½",
   |                                                ^^
18 |         ),
19 |         ResourceFormField(
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/forms/definitions/user.py:23:28
   |
21 |             label="å¯†ç ",
22 |             required=True,
23 |             help_text="è‡³å°‘8ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ä¸Žæ•°å­—",
   |                               ^^
24 |         ),
25 |         ResourceFormField(
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/models/__init__.py:3:10
  |
1 | """æ•°æ®æ¨¡åž‹æ¨¡å—ã€‚.
2 |
3 | å®šä¹‰æ‰€æœ‰æ•°æ®åº“æ¨¡åž‹ï¼ŒåŒ…æ‹¬ç”¨æˆ·ã€å®žä¾‹ã€å‡­æ®ã€è´¦æˆ·æƒé™ã€åŒæ­¥è®°å½•ã€ç»Ÿè®¡æ•°æ®ç­‰ã€‚
  |                   ^^
4 |
5 | ä¸»è¦æ¨¡åž‹ï¼š
  |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/models/__init__.py:5:5
  |
3 | å®šä¹‰æ‰€æœ‰æ•°æ®åº“æ¨¡åž‹ï¼ŒåŒ…æ‹¬ç”¨æˆ·ã€å®žä¾‹ã€å‡­æ®ã€è´¦æˆ·æƒé™ã€åŒæ­¥è®°å½•ã€ç»Ÿè®¡æ•°æ®ç­‰ã€‚
4 |
5 | ä¸»è¦æ¨¡åž‹ï¼š
  |         ^^
6 | - User: ç”¨æˆ·æ¨¡åž‹
7 | - Instance: æ•°æ®åº“å®žä¾‹æ¨¡åž‹
  |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/__init__.py:41:15
   |
39 | from .permission_config import PermissionConfig
40 |
41 | # ç§»é™¤SyncDataå¯¼å…¥ï¼Œä½¿ç”¨æ–°çš„ä¼˜åŒ–åŒæ­¥æ¨¡åž‹
   |                   ^^
42 | from .sync_instance_record import SyncInstanceRecord
43 | from .sync_session import SyncSession
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/account_change_log.py:10:14
   |
 8 |     """è´¦æˆ·å˜æ›´æ—¥å¿—è¡¨ã€‚.
 9 |
10 |     è®°å½•è´¦æˆ·çš„å˜æ›´åŽ†å²ï¼ŒåŒ…æ‹¬æ–°å¢žã€æƒé™å˜æ›´ã€å…¶ä»–ä¿®æ”¹å’Œåˆ é™¤æ“ä½œã€‚
   |                       ^^
11 |     æ”¯æŒå˜æ›´å·®å¼‚å¯¹æ¯”å’Œä¼šè¯å…³è”ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_change_log.py:18:26
   |
16 |         db_type: æ•°æ®åº“ç±»åž‹ã€‚
17 |         username: è´¦æˆ·åã€‚
18 |         change_type: å˜æ›´ç±»åž‹ï¼ˆadd/modify_privilege/modify_other/deleteï¼‰ã€‚
   |                              ^^
19 |         change_time: å˜æ›´æ—¶é—´ã€‚
20 |         session_id: å…³è”çš„åŒæ­¥ä¼šè¯ IDã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_change_log.py:18:67
   |
16 |         db_type: æ•°æ®åº“ç±»åž‹ã€‚
17 |         username: è´¦æˆ·åã€‚
18 |         change_type: å˜æ›´ç±»åž‹ï¼ˆadd/modify_privilege/modify_other/deleteï¼‰ã€‚
   |                                                                        ^^
19 |         change_time: å˜æ›´æ—¶é—´ã€‚
20 |         session_id: å…³è”çš„åŒæ­¥ä¼šè¯ IDã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_change_log.py:21:21
   |
19 |         change_time: å˜æ›´æ—¶é—´ã€‚
20 |         session_id: å…³è”çš„åŒæ­¥ä¼šè¯ IDã€‚
21 |         status: å˜æ›´çŠ¶æ€ï¼ˆsuccess/failedï¼‰ã€‚
   |                         ^^
22 |         message: å˜æ›´æ¶ˆæ¯ã€‚
23 |         privilege_diff: æƒé™å˜æ›´å·®å¼‚ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_change_log.py:21:36
   |
19 |         change_time: å˜æ›´æ—¶é—´ã€‚
20 |         session_id: å…³è”çš„åŒæ­¥ä¼šè¯ IDã€‚
21 |         status: å˜æ›´çŠ¶æ€ï¼ˆsuccess/failedï¼‰ã€‚
   |                                         ^^
22 |         message: å˜æ›´æ¶ˆæ¯ã€‚
23 |         privilege_diff: æƒé™å˜æ›´å·®å¼‚ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_change_log.py:23:31
   |
21 |         status: å˜æ›´çŠ¶æ€ï¼ˆsuccess/failedï¼‰ã€‚
22 |         message: å˜æ›´æ¶ˆæ¯ã€‚
23 |         privilege_diff: æƒé™å˜æ›´å·®å¼‚ï¼ˆJSONï¼‰ã€‚
   |                                     ^^
24 |         other_diff: å…¶ä»–å­—æ®µå˜æ›´å·®å¼‚ï¼ˆJSONï¼‰ã€‚
25 |         instance: å…³è”çš„å®žä¾‹å¯¹è±¡ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_change_log.py:23:36
   |
21 |         status: å˜æ›´çŠ¶æ€ï¼ˆsuccess/failedï¼‰ã€‚
22 |         message: å˜æ›´æ¶ˆæ¯ã€‚
23 |         privilege_diff: æƒé™å˜æ›´å·®å¼‚ï¼ˆJSONï¼‰ã€‚
   |                                           ^^
24 |         other_diff: å…¶ä»–å­—æ®µå˜æ›´å·®å¼‚ï¼ˆJSONï¼‰ã€‚
25 |         instance: å…³è”çš„å®žä¾‹å¯¹è±¡ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_change_log.py:24:29
   |
22 |         message: å˜æ›´æ¶ˆæ¯ã€‚
23 |         privilege_diff: æƒé™å˜æ›´å·®å¼‚ï¼ˆJSONï¼‰ã€‚
24 |         other_diff: å…¶ä»–å­—æ®µå˜æ›´å·®å¼‚ï¼ˆJSONï¼‰ã€‚
   |                                     ^^
25 |         instance: å…³è”çš„å®žä¾‹å¯¹è±¡ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_change_log.py:24:34
   |
22 |         message: å˜æ›´æ¶ˆæ¯ã€‚
23 |         privilege_diff: æƒé™å˜æ›´å·®å¼‚ï¼ˆJSONï¼‰ã€‚
24 |         other_diff: å…¶ä»–å­—æ®µå˜æ›´å·®å¼‚ï¼ˆJSONï¼‰ã€‚
   |                                           ^^
25 |         instance: å…³è”çš„å®žä¾‹å¯¹è±¡ã€‚
   |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/models/account_change_log.py:38:14
   |
36 |         db.String(50),
37 |         nullable=False,
38 |     )  # å˜æ›´ç±»åž‹ï¼šaddï¼ˆæ–°å¢žï¼‰ã€modify_privilegeï¼ˆæƒé™å˜æ›´ï¼‰ã€modify_otherï¼ˆå…¶ä»–ä¿®æ”¹ï¼‰ã€deleteï¼ˆåˆ é™¤ï¼‰
   |                  ^^
39 |     change_time = db.Column(db.DateTime(timezone=True), default=time_utils.now, index=True)
40 |     session_id = db.Column(db.String(36), nullable=True)
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_change_log.py:38:18
   |
36 |         db.String(50),
37 |         nullable=False,
38 |     )  # å˜æ›´ç±»åž‹ï¼šaddï¼ˆæ–°å¢žï¼‰ã€modify_privilegeï¼ˆæƒé™å˜æ›´ï¼‰ã€modify_otherï¼ˆå…¶ä»–ä¿®æ”¹ï¼‰ã€deleteï¼ˆåˆ é™¤ï¼‰
   |                       ^^
39 |     change_time = db.Column(db.DateTime(timezone=True), default=time_utils.now, index=True)
40 |     session_id = db.Column(db.String(36), nullable=True)
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_change_log.py:38:21
   |
36 |         db.String(50),
37 |         nullable=False,
38 |     )  # å˜æ›´ç±»åž‹ï¼šaddï¼ˆæ–°å¢žï¼‰ã€modify_privilegeï¼ˆæƒé™å˜æ›´ï¼‰ã€modify_otherï¼ˆå…¶ä»–ä¿®æ”¹ï¼‰ã€deleteï¼ˆåˆ é™¤ï¼‰
   |                             ^^
39 |     change_time = db.Column(db.DateTime(timezone=True), default=time_utils.now, index=True)
40 |     session_id = db.Column(db.String(36), nullable=True)
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_change_log.py:38:39
   |
36 |         db.String(50),
37 |         nullable=False,
38 |     )  # å˜æ›´ç±»åž‹ï¼šaddï¼ˆæ–°å¢žï¼‰ã€modify_privilegeï¼ˆæƒé™å˜æ›´ï¼‰ã€modify_otherï¼ˆå…¶ä»–ä¿®æ”¹ï¼‰ã€deleteï¼ˆåˆ é™¤ï¼‰
   |                                                 ^^
39 |     change_time = db.Column(db.DateTime(timezone=True), default=time_utils.now, index=True)
40 |     session_id = db.Column(db.String(36), nullable=True)
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_change_log.py:38:44
   |
36 |         db.String(50),
37 |         nullable=False,
38 |     )  # å˜æ›´ç±»åž‹ï¼šaddï¼ˆæ–°å¢žï¼‰ã€modify_privilegeï¼ˆæƒé™å˜æ›´ï¼‰ã€modify_otherï¼ˆå…¶ä»–ä¿®æ”¹ï¼‰ã€deleteï¼ˆåˆ é™¤ï¼‰
   |                                                           ^^
39 |     change_time = db.Column(db.DateTime(timezone=True), default=time_utils.now, index=True)
40 |     session_id = db.Column(db.String(36), nullable=True)
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_change_log.py:38:58
   |
36 |         db.String(50),
37 |         nullable=False,
38 |     )  # å˜æ›´ç±»åž‹ï¼šaddï¼ˆæ–°å¢žï¼‰ã€modify_privilegeï¼ˆæƒé™å˜æ›´ï¼‰ã€modify_otherï¼ˆå…¶ä»–ä¿®æ”¹ï¼‰ã€deleteï¼ˆåˆ é™¤ï¼‰
   |                                                                           ^^
39 |     change_time = db.Column(db.DateTime(timezone=True), default=time_utils.now, index=True)
40 |     session_id = db.Column(db.String(36), nullable=True)
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_change_log.py:38:63
   |
36 |         db.String(50),
37 |         nullable=False,
38 |     )  # å˜æ›´ç±»åž‹ï¼šaddï¼ˆæ–°å¢žï¼‰ã€modify_privilegeï¼ˆæƒé™å˜æ›´ï¼‰ã€modify_otherï¼ˆå…¶ä»–ä¿®æ”¹ï¼‰ã€deleteï¼ˆåˆ é™¤ï¼‰
   |                                                                                     ^^
39 |     change_time = db.Column(db.DateTime(timezone=True), default=time_utils.now, index=True)
40 |     session_id = db.Column(db.String(36), nullable=True)
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_change_log.py:38:71
   |
36 |         db.String(50),
37 |         nullable=False,
38 |     )  # å˜æ›´ç±»åž‹ï¼šaddï¼ˆæ–°å¢žï¼‰ã€modify_privilegeï¼ˆæƒé™å˜æ›´ï¼‰ã€modify_otherï¼ˆå…¶ä»–ä¿®æ”¹ï¼‰ã€deleteï¼ˆåˆ é™¤ï¼‰
   |                                                                                               ^^
39 |     change_time = db.Column(db.DateTime(timezone=True), default=time_utils.now, index=True)
40 |     session_id = db.Column(db.String(36), nullable=True)
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_change_log.py:38:74
   |
36 |         db.String(50),
37 |         nullable=False,
38 |     )  # å˜æ›´ç±»åž‹ï¼šaddï¼ˆæ–°å¢žï¼‰ã€modify_privilegeï¼ˆæƒé™å˜æ›´ï¼‰ã€modify_otherï¼ˆå…¶ä»–ä¿®æ”¹ï¼‰ã€deleteï¼ˆåˆ é™¤ï¼‰
   |                                                                                                     ^^
39 |     change_time = db.Column(db.DateTime(timezone=True), default=time_utils.now, index=True)
40 |     session_id = db.Column(db.String(36), nullable=True)
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/account_classification.py:13:14
   |
11 |     """è´¦æˆ·åˆ†ç±»æ¨¡åž‹ã€‚.
12 |
13 |     ç®¡ç†è´¦æˆ·çš„åˆ†ç±»ä¿¡æ¯ï¼Œæ”¯æŒè‡ªå®šä¹‰åˆ†ç±»ã€é£Žé™©ç­‰çº§ã€é¢œè‰²ã€å›¾æ ‡ç­‰ã€‚
   |                       ^^
14 |     å¯ä»¥é€šè¿‡è§„åˆ™è‡ªåŠ¨åˆ†ç±»æˆ–æ‰‹åŠ¨åˆ†é…ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/account_classification.py:18:19
   |
16 |     Attributes:
17 |         id: ä¸»é”® IDã€‚
18 |         name: åˆ†ç±»åç§°ï¼Œå”¯ä¸€ã€‚
   |                       ^^
19 |         description: åˆ†ç±»æè¿°ã€‚
20 |         risk_level: é£Žé™©ç­‰çº§ï¼ˆlow/medium/high/criticalï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_classification.py:20:25
   |
18 |         name: åˆ†ç±»åç§°ï¼Œå”¯ä¸€ã€‚
19 |         description: åˆ†ç±»æè¿°ã€‚
20 |         risk_level: é£Žé™©ç­‰çº§ï¼ˆlow/medium/high/criticalï¼‰ã€‚
   |                             ^^
21 |         color: æ˜¾ç¤ºé¢œè‰²ã€‚
22 |         icon_name: å›¾æ ‡åç§°ï¼ˆFont Awesomeï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_classification.py:20:50
   |
18 |         name: åˆ†ç±»åç§°ï¼Œå”¯ä¸€ã€‚
19 |         description: åˆ†ç±»æè¿°ã€‚
20 |         risk_level: é£Žé™©ç­‰çº§ï¼ˆlow/medium/high/criticalï¼‰ã€‚
   |                                                       ^^
21 |         color: æ˜¾ç¤ºé¢œè‰²ã€‚
22 |         icon_name: å›¾æ ‡åç§°ï¼ˆFont Awesomeï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_classification.py:22:24
   |
20 |         risk_level: é£Žé™©ç­‰çº§ï¼ˆlow/medium/high/criticalï¼‰ã€‚
21 |         color: æ˜¾ç¤ºé¢œè‰²ã€‚
22 |         icon_name: å›¾æ ‡åç§°ï¼ˆFont Awesomeï¼‰ã€‚
   |                            ^^
23 |         priority: ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ã€‚
24 |         is_system: æ˜¯å¦ä¸ºç³»ç»Ÿåˆ†ç±»ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_classification.py:22:37
   |
20 |         risk_level: é£Žé™©ç­‰çº§ï¼ˆlow/medium/high/criticalï¼‰ã€‚
21 |         color: æ˜¾ç¤ºé¢œè‰²ã€‚
22 |         icon_name: å›¾æ ‡åç§°ï¼ˆFont Awesomeï¼‰ã€‚
   |                                          ^^
23 |         priority: ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ã€‚
24 |         is_system: æ˜¯å¦ä¸ºç³»ç»Ÿåˆ†ç±»ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/account_classification.py:23:22
   |
21 |         color: æ˜¾ç¤ºé¢œè‰²ã€‚
22 |         icon_name: å›¾æ ‡åç§°ï¼ˆFont Awesomeï¼‰ã€‚
23 |         priority: ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ã€‚
   |                         ^^
24 |         is_system: æ˜¯å¦ä¸ºç³»ç»Ÿåˆ†ç±»ã€‚
25 |         is_active: æ˜¯å¦å¯ç”¨ã€‚
   |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/models/account_classification.py:42:14
   |
40 |         nullable=False,
41 |         default="medium",
42 |     )  # é£Žé™©ç­‰çº§ï¼šlowï¼ˆä½Žï¼‰ã€mediumï¼ˆä¸­ï¼‰ã€highï¼ˆé«˜ï¼‰ã€criticalï¼ˆä¸¥é‡ï¼‰
   |                  ^^
43 |     color = db.Column(db.String(20), nullable=True)  # æ˜¾ç¤ºé¢œè‰²
44 |     icon_name = db.Column(db.String(50), nullable=True, default="fa-tag")  # å›¾æ ‡åç§°
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_classification.py:42:18
   |
40 |         nullable=False,
41 |         default="medium",
42 |     )  # é£Žé™©ç­‰çº§ï¼šlowï¼ˆä½Žï¼‰ã€mediumï¼ˆä¸­ï¼‰ã€highï¼ˆé«˜ï¼‰ã€criticalï¼ˆä¸¥é‡ï¼‰
   |                       ^^
43 |     color = db.Column(db.String(20), nullable=True)  # æ˜¾ç¤ºé¢œè‰²
44 |     icon_name = db.Column(db.String(50), nullable=True, default="fa-tag")  # å›¾æ ‡åç§°
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_classification.py:42:20
   |
40 |         nullable=False,
41 |         default="medium",
42 |     )  # é£Žé™©ç­‰çº§ï¼šlowï¼ˆä½Žï¼‰ã€mediumï¼ˆä¸­ï¼‰ã€highï¼ˆé«˜ï¼‰ã€criticalï¼ˆä¸¥é‡ï¼‰
   |                           ^^
43 |     color = db.Column(db.String(20), nullable=True)  # æ˜¾ç¤ºé¢œè‰²
44 |     icon_name = db.Column(db.String(50), nullable=True, default="fa-tag")  # å›¾æ ‡åç§°
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_classification.py:42:28
   |
40 |         nullable=False,
41 |         default="medium",
42 |     )  # é£Žé™©ç­‰çº§ï¼šlowï¼ˆä½Žï¼‰ã€mediumï¼ˆä¸­ï¼‰ã€highï¼ˆé«˜ï¼‰ã€criticalï¼ˆä¸¥é‡ï¼‰
   |                                     ^^
43 |     color = db.Column(db.String(20), nullable=True)  # æ˜¾ç¤ºé¢œè‰²
44 |     icon_name = db.Column(db.String(50), nullable=True, default="fa-tag")  # å›¾æ ‡åç§°
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_classification.py:42:30
   |
40 |         nullable=False,
41 |         default="medium",
42 |     )  # é£Žé™©ç­‰çº§ï¼šlowï¼ˆä½Žï¼‰ã€mediumï¼ˆä¸­ï¼‰ã€highï¼ˆé«˜ï¼‰ã€criticalï¼ˆä¸¥é‡ï¼‰
   |                                         ^^
43 |     color = db.Column(db.String(20), nullable=True)  # æ˜¾ç¤ºé¢œè‰²
44 |     icon_name = db.Column(db.String(50), nullable=True, default="fa-tag")  # å›¾æ ‡åç§°
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_classification.py:42:36
   |
40 |         nullable=False,
41 |         default="medium",
42 |     )  # é£Žé™©ç­‰çº§ï¼šlowï¼ˆä½Žï¼‰ã€mediumï¼ˆä¸­ï¼‰ã€highï¼ˆé«˜ï¼‰ã€criticalï¼ˆä¸¥é‡ï¼‰
   |                                                 ^^
43 |     color = db.Column(db.String(20), nullable=True)  # æ˜¾ç¤ºé¢œè‰²
44 |     icon_name = db.Column(db.String(50), nullable=True, default="fa-tag")  # å›¾æ ‡åç§°
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_classification.py:42:38
   |
40 |         nullable=False,
41 |         default="medium",
42 |     )  # é£Žé™©ç­‰çº§ï¼šlowï¼ˆä½Žï¼‰ã€mediumï¼ˆä¸­ï¼‰ã€highï¼ˆé«˜ï¼‰ã€criticalï¼ˆä¸¥é‡ï¼‰
   |                                                     ^^
43 |     color = db.Column(db.String(20), nullable=True)  # æ˜¾ç¤ºé¢œè‰²
44 |     icon_name = db.Column(db.String(50), nullable=True, default="fa-tag")  # å›¾æ ‡åç§°
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_classification.py:42:48
   |
40 |         nullable=False,
41 |         default="medium",
42 |     )  # é£Žé™©ç­‰çº§ï¼šlowï¼ˆä½Žï¼‰ã€mediumï¼ˆä¸­ï¼‰ã€highï¼ˆé«˜ï¼‰ã€criticalï¼ˆä¸¥é‡ï¼‰
   |                                                                 ^^
43 |     color = db.Column(db.String(20), nullable=True)  # æ˜¾ç¤ºé¢œè‰²
44 |     icon_name = db.Column(db.String(50), nullable=True, default="fa-tag")  # å›¾æ ‡åç§°
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_classification.py:42:51
   |
40 |         nullable=False,
41 |         default="medium",
42 |     )  # é£Žé™©ç­‰çº§ï¼šlowï¼ˆä½Žï¼‰ã€mediumï¼ˆä¸­ï¼‰ã€highï¼ˆé«˜ï¼‰ã€criticalï¼ˆä¸¥é‡ï¼‰
   |                                                                       ^^
43 |     color = db.Column(db.String(20), nullable=True)  # æ˜¾ç¤ºé¢œè‰²
44 |     icon_name = db.Column(db.String(50), nullable=True, default="fa-tag")  # å›¾æ ‡åç§°
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/account_classification.py:45:55
   |
43 |     color = db.Column(db.String(20), nullable=True)  # æ˜¾ç¤ºé¢œè‰²
44 |     icon_name = db.Column(db.String(50), nullable=True, default="fa-tag")  # å›¾æ ‡åç§°
45 |     priority = db.Column(db.Integer, default=0)  # ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜
   |                                                          ^^
46 |     is_system = db.Column(db.Boolean, default=False, nullable=False)  # æ˜¯å¦ä¸ºç³»ç»Ÿåˆ†ç±»
47 |     is_active = db.Column(db.Boolean, default=True, nullable=False)
   |

ANN201 Missing return type annotation for public function `color_value`
  --> app/models/account_classification.py:75:9
   |
74 |     @property
75 |     def color_value(self):
   |         ^^^^^^^^^^^
76 |         """èŽ·å–å®žé™…é¢œè‰²å€¼ã€‚.
   |
help: Add return type annotation

ANN201 Missing return type annotation for public function `color_name`
  --> app/models/account_classification.py:85:9
   |
84 |     @property
85 |     def color_name(self):
   |         ^^^^^^^^^^
86 |         """èŽ·å–é¢œè‰²åç§°ã€‚.
   |
help: Add return type annotation

ANN201 Missing return type annotation for public function `css_class`
  --> app/models/account_classification.py:95:9
   |
94 |     @property
95 |     def css_class(self):
   |         ^^^^^^^^^
96 |         """èŽ·å– CSS ç±»åã€‚.
   |
help: Add return type annotation

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/models/account_classification.py:141:15
    |
139 |         db.String(20),
140 |         nullable=False,
141 |     )  # æ•°æ®åº“ç±»åž‹ï¼šmysqlã€postgresqlã€sqlserverã€oracle
    |                    ^^
142 |     rule_name = db.Column(db.String(100), nullable=False)  # è§„åˆ™åç§°
143 |     rule_expression = db.Column(db.Text, nullable=False)  # è§„åˆ™è¡¨è¾¾å¼ï¼ˆJSONæ ¼å¼ï¼‰
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/models/account_classification.py:143:66
    |
141 |     )  # æ•°æ®åº“ç±»åž‹ï¼šmysqlã€postgresqlã€sqlserverã€oracle
142 |     rule_name = db.Column(db.String(100), nullable=False)  # è§„åˆ™åç§°
143 |     rule_expression = db.Column(db.Text, nullable=False)  # è§„åˆ™è¡¨è¾¾å¼ï¼ˆJSONæ ¼å¼ï¼‰
    |                                                                       ^^
144 |     is_active = db.Column(db.Boolean, default=True, nullable=False)
145 |     created_at = db.Column(db.DateTime(timezone=True), default=time_utils.now)
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/models/account_classification.py:143:73
    |
141 |     )  # æ•°æ®åº“ç±»åž‹ï¼šmysqlã€postgresqlã€sqlserverã€oracle
142 |     rule_name = db.Column(db.String(100), nullable=False)  # è§„åˆ™åç§°
143 |     rule_expression = db.Column(db.Text, nullable=False)  # è§„åˆ™è¡¨è¾¾å¼ï¼ˆJSONæ ¼å¼ï¼‰
    |                                                                                 ^^
144 |     is_active = db.Column(db.Boolean, default=True, nullable=False)
145 |     created_at = db.Column(db.DateTime(timezone=True), default=time_utils.now)
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/models/account_classification.py:176:19
    |
175 |     def get_rule_expression(self) -> dict:
176 |         """èŽ·å–è§„åˆ™è¡¨è¾¾å¼ï¼ˆè§£æž JSONï¼‰ã€‚.
    |                          ^^
177 |
178 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/models/account_classification.py:176:27
    |
175 |     def get_rule_expression(self) -> dict:
176 |         """èŽ·å–è§„åˆ™è¡¨è¾¾å¼ï¼ˆè§£æž JSONï¼‰ã€‚.
    |                                     ^^
177 |
178 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/account_classification.py:179:28
    |
178 |         Returns:
179 |             dict: è§£æžåŽçš„è§„åˆ™è¡¨è¾¾å¼ï¼Œå¤±è´¥è¿”å›žç©ºå­—å…¸ã€‚
    |                                     ^^
180 |
181 |         """
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/models/account_classification.py:188:19
    |
187 |     def set_rule_expression(self, expression: dict) -> None:
188 |         """è®¾ç½®è§„åˆ™è¡¨è¾¾å¼ï¼ˆä¿å­˜ä¸º JSONï¼‰ã€‚.
    |                          ^^
189 |
190 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/models/account_classification.py:188:28
    |
187 |     def set_rule_expression(self, expression: dict) -> None:
188 |         """è®¾ç½®è§„åˆ™è¡¨è¾¾å¼ï¼ˆä¿å­˜ä¸º JSONï¼‰ã€‚.
    |                                       ^^
189 |
190 |         Args:
    |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/models/account_classification.py:214:14
    |
212 |         nullable=False,
213 |         default="auto",
214 |     )  # åˆ†é…æ–¹å¼ï¼šautoï¼ˆè‡ªåŠ¨ï¼‰ã€manualï¼ˆæ‰‹åŠ¨ï¼‰
    |                  ^^
215 |     confidence_score = db.Column(db.Float, nullable=True)  # è‡ªåŠ¨åˆ†é…çš„ç½®ä¿¡åº¦åˆ†æ•°
216 |     notes = db.Column(db.Text, nullable=True)  # å¤‡æ³¨
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/models/account_classification.py:214:19
    |
212 |         nullable=False,
213 |         default="auto",
214 |     )  # åˆ†é…æ–¹å¼ï¼šautoï¼ˆè‡ªåŠ¨ï¼‰ã€manualï¼ˆæ‰‹åŠ¨ï¼‰
    |                        ^^
215 |     confidence_score = db.Column(db.Float, nullable=True)  # è‡ªåŠ¨åˆ†é…çš„ç½®ä¿¡åº¦åˆ†æ•°
216 |     notes = db.Column(db.Text, nullable=True)  # å¤‡æ³¨
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/models/account_classification.py:214:22
    |
212 |         nullable=False,
213 |         default="auto",
214 |     )  # åˆ†é…æ–¹å¼ï¼šautoï¼ˆè‡ªåŠ¨ï¼‰ã€manualï¼ˆæ‰‹åŠ¨ï¼‰
    |                              ^^
215 |     confidence_score = db.Column(db.Float, nullable=True)  # è‡ªåŠ¨åˆ†é…çš„ç½®ä¿¡åº¦åˆ†æ•°
216 |     notes = db.Column(db.Text, nullable=True)  # å¤‡æ³¨
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/models/account_classification.py:214:30
    |
212 |         nullable=False,
213 |         default="auto",
214 |     )  # åˆ†é…æ–¹å¼ï¼šautoï¼ˆè‡ªåŠ¨ï¼‰ã€manualï¼ˆæ‰‹åŠ¨ï¼‰
    |                                        ^^
215 |     confidence_score = db.Column(db.Float, nullable=True)  # è‡ªåŠ¨åˆ†é…çš„ç½®ä¿¡åº¦åˆ†æ•°
216 |     notes = db.Column(db.Text, nullable=True)  # å¤‡æ³¨
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/models/account_classification.py:214:33
    |
212 |         nullable=False,
213 |         default="auto",
214 |     )  # åˆ†é…æ–¹å¼ï¼šautoï¼ˆè‡ªåŠ¨ï¼‰ã€manualï¼ˆæ‰‹åŠ¨ï¼‰
    |                                              ^^
215 |     confidence_score = db.Column(db.Float, nullable=True)  # è‡ªåŠ¨åˆ†é…çš„ç½®ä¿¡åº¦åˆ†æ•°
216 |     notes = db.Column(db.Text, nullable=True)  # å¤‡æ³¨
    |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/models/account_classification.py:222:11
    |
220 |     updated_at = db.Column(db.DateTime(timezone=True), default=time_utils.now, onupdate=time_utils.now)
221 |
222 |     # å”¯ä¸€çº¦æŸï¼šä¸€ä¸ªè´¦æˆ·åœ¨åŒä¸€ä¸ªæ‰¹æ¬¡ä¸­åªèƒ½æœ‰ä¸€ä¸ªåˆ†ç±»åˆ†é…
    |               ^^
223 |     __table_args__ = (
224 |         db.UniqueConstraint(
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/account_classification.py:260:59
    |
258 |             "created_at": self.created_at.isoformat(),
259 |             "updated_at": self.updated_at.isoformat(),
260 |             "account_username": self.account_id,  # ç›´æŽ¥ä½¿ç”¨IDï¼Œé¿å…å…³è”æŸ¥è¯¢
    |                                                               ^^
261 |             "classification_name": (self.classification.name if self.classification else None),
262 |         }
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_permission.py:10:14
   |
 9 | class AccountPermission(BaseSyncData):
10 |     """è´¦æˆ·æƒé™å¿«ç…§ï¼ˆæ”¯æŒå¤æ‚æƒé™ç»“æž„ï¼‰ã€‚.
   |                    ^^
11 |
12 |     å­˜å‚¨ä¸åŒæ•°æ®åº“ç±»åž‹è´¦æˆ·çš„æƒé™ä¿¡æ¯å¿«ç…§ï¼Œæ”¯æŒ MySQLã€PostgreSQLã€
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_permission.py:10:23
   |
 9 | class AccountPermission(BaseSyncData):
10 |     """è´¦æˆ·æƒé™å¿«ç…§ï¼ˆæ”¯æŒå¤æ‚æƒé™ç»“æž„ï¼‰ã€‚.
   |                                      ^^
11 |
12 |     å­˜å‚¨ä¸åŒæ•°æ®åº“ç±»åž‹è´¦æˆ·çš„æƒé™ä¿¡æ¯å¿«ç…§ï¼Œæ”¯æŒ MySQLã€PostgreSQLã€
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/account_permission.py:12:23
   |
10 |     """è´¦æˆ·æƒé™å¿«ç…§ï¼ˆæ”¯æŒå¤æ‚æƒé™ç»“æž„ï¼‰ã€‚.
11 |
12 |     å­˜å‚¨ä¸åŒæ•°æ®åº“ç±»åž‹è´¦æˆ·çš„æƒé™ä¿¡æ¯å¿«ç…§ï¼Œæ”¯æŒ MySQLã€PostgreSQLã€
   |                                         ^^
13 |     SQL Server å’Œ Oracle çš„æƒé™ç»“æž„ã€‚ç»§æ‰¿è‡ª BaseSyncDataã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_permission.py:20:38
   |
18 |         is_superuser: æ˜¯å¦ä¸ºè¶…çº§ç”¨æˆ·ã€‚
19 |         is_locked: æ˜¯å¦è¢«é”å®šã€‚
20 |         global_privileges: MySQL å…¨å±€æƒé™ï¼ˆJSONï¼‰ã€‚
   |                                          ^^
21 |         database_privileges: MySQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
22 |         predefined_roles: PostgreSQL é¢„å®šä¹‰è§’è‰²ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_permission.py:20:43
   |
18 |         is_superuser: æ˜¯å¦ä¸ºè¶…çº§ç”¨æˆ·ã€‚
19 |         is_locked: æ˜¯å¦è¢«é”å®šã€‚
20 |         global_privileges: MySQL å…¨å±€æƒé™ï¼ˆJSONï¼‰ã€‚
   |                                                ^^
21 |         database_privileges: MySQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
22 |         predefined_roles: PostgreSQL é¢„å®šä¹‰è§’è‰²ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_permission.py:21:41
   |
19 |         is_locked: æ˜¯å¦è¢«é”å®šã€‚
20 |         global_privileges: MySQL å…¨å±€æƒé™ï¼ˆJSONï¼‰ã€‚
21 |         database_privileges: MySQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
   |                                              ^^
22 |         predefined_roles: PostgreSQL é¢„å®šä¹‰è§’è‰²ï¼ˆJSONï¼‰ã€‚
23 |         role_attributes: PostgreSQL è§’è‰²å±žæ€§ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_permission.py:21:46
   |
19 |         is_locked: æ˜¯å¦è¢«é”å®šã€‚
20 |         global_privileges: MySQL å…¨å±€æƒé™ï¼ˆJSONï¼‰ã€‚
21 |         database_privileges: MySQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
   |                                                    ^^
22 |         predefined_roles: PostgreSQL é¢„å®šä¹‰è§’è‰²ï¼ˆJSONï¼‰ã€‚
23 |         role_attributes: PostgreSQL è§’è‰²å±žæ€§ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_permission.py:22:43
   |
20 |         global_privileges: MySQL å…¨å±€æƒé™ï¼ˆJSONï¼‰ã€‚
21 |         database_privileges: MySQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
22 |         predefined_roles: PostgreSQL é¢„å®šä¹‰è§’è‰²ï¼ˆJSONï¼‰ã€‚
   |                                                ^^
23 |         role_attributes: PostgreSQL è§’è‰²å±žæ€§ï¼ˆJSONï¼‰ã€‚
24 |         database_privileges_pg: PostgreSQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_permission.py:22:48
   |
20 |         global_privileges: MySQL å…¨å±€æƒé™ï¼ˆJSONï¼‰ã€‚
21 |         database_privileges: MySQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
22 |         predefined_roles: PostgreSQL é¢„å®šä¹‰è§’è‰²ï¼ˆJSONï¼‰ã€‚
   |                                                      ^^
23 |         role_attributes: PostgreSQL è§’è‰²å±žæ€§ï¼ˆJSONï¼‰ã€‚
24 |         database_privileges_pg: PostgreSQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_permission.py:23:41
   |
21 |         database_privileges: MySQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
22 |         predefined_roles: PostgreSQL é¢„å®šä¹‰è§’è‰²ï¼ˆJSONï¼‰ã€‚
23 |         role_attributes: PostgreSQL è§’è‰²å±žæ€§ï¼ˆJSONï¼‰ã€‚
   |                                             ^^
24 |         database_privileges_pg: PostgreSQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
25 |         tablespace_privileges: PostgreSQL è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_permission.py:23:46
   |
21 |         database_privileges: MySQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
22 |         predefined_roles: PostgreSQL é¢„å®šä¹‰è§’è‰²ï¼ˆJSONï¼‰ã€‚
23 |         role_attributes: PostgreSQL è§’è‰²å±žæ€§ï¼ˆJSONï¼‰ã€‚
   |                                                   ^^
24 |         database_privileges_pg: PostgreSQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
25 |         tablespace_privileges: PostgreSQL è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_permission.py:24:49
   |
22 |         predefined_roles: PostgreSQL é¢„å®šä¹‰è§’è‰²ï¼ˆJSONï¼‰ã€‚
23 |         role_attributes: PostgreSQL è§’è‰²å±žæ€§ï¼ˆJSONï¼‰ã€‚
24 |         database_privileges_pg: PostgreSQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
   |                                                      ^^
25 |         tablespace_privileges: PostgreSQL è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
26 |         server_roles: SQL Server æœåŠ¡å™¨è§’è‰²ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_permission.py:24:54
   |
22 |         predefined_roles: PostgreSQL é¢„å®šä¹‰è§’è‰²ï¼ˆJSONï¼‰ã€‚
23 |         role_attributes: PostgreSQL è§’è‰²å±žæ€§ï¼ˆJSONï¼‰ã€‚
24 |         database_privileges_pg: PostgreSQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
   |                                                            ^^
25 |         tablespace_privileges: PostgreSQL è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
26 |         server_roles: SQL Server æœåŠ¡å™¨è§’è‰²ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_permission.py:25:48
   |
23 |         role_attributes: PostgreSQL è§’è‰²å±žæ€§ï¼ˆJSONï¼‰ã€‚
24 |         database_privileges_pg: PostgreSQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
25 |         tablespace_privileges: PostgreSQL è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
   |                                                     ^^
26 |         server_roles: SQL Server æœåŠ¡å™¨è§’è‰²ï¼ˆJSONï¼‰ã€‚
27 |         server_permissions: SQL Server æœåŠ¡å™¨æƒé™ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_permission.py:25:53
   |
23 |         role_attributes: PostgreSQL è§’è‰²å±žæ€§ï¼ˆJSONï¼‰ã€‚
24 |         database_privileges_pg: PostgreSQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
25 |         tablespace_privileges: PostgreSQL è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
   |                                                           ^^
26 |         server_roles: SQL Server æœåŠ¡å™¨è§’è‰²ï¼ˆJSONï¼‰ã€‚
27 |         server_permissions: SQL Server æœåŠ¡å™¨æƒé™ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_permission.py:26:39
   |
24 |         database_privileges_pg: PostgreSQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
25 |         tablespace_privileges: PostgreSQL è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
26 |         server_roles: SQL Server æœåŠ¡å™¨è§’è‰²ï¼ˆJSONï¼‰ã€‚
   |                                            ^^
27 |         server_permissions: SQL Server æœåŠ¡å™¨æƒé™ï¼ˆJSONï¼‰ã€‚
28 |         database_roles: SQL Server æ•°æ®åº“è§’è‰²ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_permission.py:26:44
   |
24 |         database_privileges_pg: PostgreSQL æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
25 |         tablespace_privileges: PostgreSQL è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
26 |         server_roles: SQL Server æœåŠ¡å™¨è§’è‰²ï¼ˆJSONï¼‰ã€‚
   |                                                  ^^
27 |         server_permissions: SQL Server æœåŠ¡å™¨æƒé™ï¼ˆJSONï¼‰ã€‚
28 |         database_roles: SQL Server æ•°æ®åº“è§’è‰²ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_permission.py:27:45
   |
25 |         tablespace_privileges: PostgreSQL è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
26 |         server_roles: SQL Server æœåŠ¡å™¨è§’è‰²ï¼ˆJSONï¼‰ã€‚
27 |         server_permissions: SQL Server æœåŠ¡å™¨æƒé™ï¼ˆJSONï¼‰ã€‚
   |                                                  ^^
28 |         database_roles: SQL Server æ•°æ®åº“è§’è‰²ï¼ˆJSONï¼‰ã€‚
29 |         database_permissions: SQL Server æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_permission.py:27:50
   |
25 |         tablespace_privileges: PostgreSQL è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
26 |         server_roles: SQL Server æœåŠ¡å™¨è§’è‰²ï¼ˆJSONï¼‰ã€‚
27 |         server_permissions: SQL Server æœåŠ¡å™¨æƒé™ï¼ˆJSONï¼‰ã€‚
   |                                                        ^^
28 |         database_roles: SQL Server æ•°æ®åº“è§’è‰²ï¼ˆJSONï¼‰ã€‚
29 |         database_permissions: SQL Server æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_permission.py:28:41
   |
26 |         server_roles: SQL Server æœåŠ¡å™¨è§’è‰²ï¼ˆJSONï¼‰ã€‚
27 |         server_permissions: SQL Server æœåŠ¡å™¨æƒé™ï¼ˆJSONï¼‰ã€‚
28 |         database_roles: SQL Server æ•°æ®åº“è§’è‰²ï¼ˆJSONï¼‰ã€‚
   |                                              ^^
29 |         database_permissions: SQL Server æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
30 |         oracle_roles: Oracle è§’è‰²ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_permission.py:28:46
   |
26 |         server_roles: SQL Server æœåŠ¡å™¨è§’è‰²ï¼ˆJSONï¼‰ã€‚
27 |         server_permissions: SQL Server æœåŠ¡å™¨æƒé™ï¼ˆJSONï¼‰ã€‚
28 |         database_roles: SQL Server æ•°æ®åº“è§’è‰²ï¼ˆJSONï¼‰ã€‚
   |                                                    ^^
29 |         database_permissions: SQL Server æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
30 |         oracle_roles: Oracle è§’è‰²ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_permission.py:29:47
   |
27 |         server_permissions: SQL Server æœåŠ¡å™¨æƒé™ï¼ˆJSONï¼‰ã€‚
28 |         database_roles: SQL Server æ•°æ®åº“è§’è‰²ï¼ˆJSONï¼‰ã€‚
29 |         database_permissions: SQL Server æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
   |                                                    ^^
30 |         oracle_roles: Oracle è§’è‰²ï¼ˆJSONï¼‰ã€‚
31 |         system_privileges: Oracle ç³»ç»Ÿæƒé™ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_permission.py:29:52
   |
27 |         server_permissions: SQL Server æœåŠ¡å™¨æƒé™ï¼ˆJSONï¼‰ã€‚
28 |         database_roles: SQL Server æ•°æ®åº“è§’è‰²ï¼ˆJSONï¼‰ã€‚
29 |         database_permissions: SQL Server æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
   |                                                          ^^
30 |         oracle_roles: Oracle è§’è‰²ï¼ˆJSONï¼‰ã€‚
31 |         system_privileges: Oracle ç³»ç»Ÿæƒé™ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_permission.py:30:32
   |
28 |         database_roles: SQL Server æ•°æ®åº“è§’è‰²ï¼ˆJSONï¼‰ã€‚
29 |         database_permissions: SQL Server æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
30 |         oracle_roles: Oracle è§’è‰²ï¼ˆJSONï¼‰ã€‚
   |                                  ^^
31 |         system_privileges: Oracle ç³»ç»Ÿæƒé™ï¼ˆJSONï¼‰ã€‚
32 |         tablespace_privileges_oracle: Oracle è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_permission.py:30:37
   |
28 |         database_roles: SQL Server æ•°æ®åº“è§’è‰²ï¼ˆJSONï¼‰ã€‚
29 |         database_permissions: SQL Server æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
30 |         oracle_roles: Oracle è§’è‰²ï¼ˆJSONï¼‰ã€‚
   |                                        ^^
31 |         system_privileges: Oracle ç³»ç»Ÿæƒé™ï¼ˆJSONï¼‰ã€‚
32 |         tablespace_privileges_oracle: Oracle è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_permission.py:31:39
   |
29 |         database_permissions: SQL Server æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
30 |         oracle_roles: Oracle è§’è‰²ï¼ˆJSONï¼‰ã€‚
31 |         system_privileges: Oracle ç³»ç»Ÿæƒé™ï¼ˆJSONï¼‰ã€‚
   |                                           ^^
32 |         tablespace_privileges_oracle: Oracle è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
33 |         type_specific: å…¶ä»–ç±»åž‹ç‰¹å®šå­—æ®µï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_permission.py:31:44
   |
29 |         database_permissions: SQL Server æ•°æ®åº“æƒé™ï¼ˆJSONï¼‰ã€‚
30 |         oracle_roles: Oracle è§’è‰²ï¼ˆJSONï¼‰ã€‚
31 |         system_privileges: Oracle ç³»ç»Ÿæƒé™ï¼ˆJSONï¼‰ã€‚
   |                                                 ^^
32 |         tablespace_privileges_oracle: Oracle è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
33 |         type_specific: å…¶ä»–ç±»åž‹ç‰¹å®šå­—æ®µï¼ˆJSONï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_permission.py:32:51
   |
30 |         oracle_roles: Oracle è§’è‰²ï¼ˆJSONï¼‰ã€‚
31 |         system_privileges: Oracle ç³»ç»Ÿæƒé™ï¼ˆJSONï¼‰ã€‚
32 |         tablespace_privileges_oracle: Oracle è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
   |                                                        ^^
33 |         type_specific: å…¶ä»–ç±»åž‹ç‰¹å®šå­—æ®µï¼ˆJSONï¼‰ã€‚
34 |         last_sync_time: æœ€åŽåŒæ­¥æ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_permission.py:32:56
   |
30 |         oracle_roles: Oracle è§’è‰²ï¼ˆJSONï¼‰ã€‚
31 |         system_privileges: Oracle ç³»ç»Ÿæƒé™ï¼ˆJSONï¼‰ã€‚
32 |         tablespace_privileges_oracle: Oracle è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
   |                                                              ^^
33 |         type_specific: å…¶ä»–ç±»åž‹ç‰¹å®šå­—æ®µï¼ˆJSONï¼‰ã€‚
34 |         last_sync_time: æœ€åŽåŒæ­¥æ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_permission.py:33:32
   |
31 |         system_privileges: Oracle ç³»ç»Ÿæƒé™ï¼ˆJSONï¼‰ã€‚
32 |         tablespace_privileges_oracle: Oracle è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
33 |         type_specific: å…¶ä»–ç±»åž‹ç‰¹å®šå­—æ®µï¼ˆJSONï¼‰ã€‚
   |                                        ^^
34 |         last_sync_time: æœ€åŽåŒæ­¥æ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_permission.py:33:37
   |
31 |         system_privileges: Oracle ç³»ç»Ÿæƒé™ï¼ˆJSONï¼‰ã€‚
32 |         tablespace_privileges_oracle: Oracle è¡¨ç©ºé—´æƒé™ï¼ˆJSONï¼‰ã€‚
33 |         type_specific: å…¶ä»–ç±»åž‹ç‰¹å®šå­—æ®µï¼ˆJSONï¼‰ã€‚
   |                                              ^^
34 |         last_sync_time: æœ€åŽåŒæ­¥æ—¶é—´ã€‚
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_permission.py:67:17
   |
65 |     database_permissions = db.Column(db.JSON, nullable=True)  # SQL Serveræ•°æ®åº“æƒé™
66 |
67 |     # Oracleæƒé™å­—æ®µï¼ˆç§»é™¤è¡¨ç©ºé—´é…é¢ï¼‰
   |                     ^^
68 |     oracle_roles = db.Column(db.JSON, nullable=True)  # Oracleè§’è‰²
69 |     system_privileges = db.Column(db.JSON, nullable=True)  # Oracleç³»ç»Ÿæƒé™
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_permission.py:67:25
   |
65 |     database_permissions = db.Column(db.JSON, nullable=True)  # SQL Serveræ•°æ®åº“æƒé™
66 |
67 |     # Oracleæƒé™å­—æ®µï¼ˆç§»é™¤è¡¨ç©ºé—´é…é¢ï¼‰
   |                                     ^^
68 |     oracle_roles = db.Column(db.JSON, nullable=True)  # Oracleè§’è‰²
69 |     system_privileges = db.Column(db.JSON, nullable=True)  # Oracleç³»ç»Ÿæƒé™
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/account_permission.py:80:11
   |
78 |     last_change_time = db.Column(db.DateTime(timezone=True), default=time_utils.now, index=True)
79 |
80 |     # åˆ é™¤æ ‡è®°ï¼ˆä¸æ”¯æŒæ¢å¤ï¼‰
   |               ^^
81 |     # å…³è”å®žä¾‹ä¸Žè´¦æˆ·
82 |     instance = db.relationship("Instance", backref="account_permissions")
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/account_permission.py:80:17
   |
78 |     last_change_time = db.Column(db.DateTime(timezone=True), default=time_utils.now, index=True)
79 |
80 |     # åˆ é™¤æ ‡è®°ï¼ˆä¸æ”¯æŒæ¢å¤ï¼‰
   |                           ^^
81 |     # å…³è”å®žä¾‹ä¸Žè´¦æˆ·
82 |     instance = db.relationship("Instance", backref="account_permissions")
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/base_sync_data.py:10:16
   |
 9 | class BaseSyncData(db.Model):
10 |     """åŸºç¡€åŒæ­¥æ•°æ®æ¨¡åž‹ï¼ˆæŠ½è±¡åŸºç±»ï¼‰ã€‚.
   |                        ^^
11 |
12 |     ä¸ºåŒæ­¥æ•°æ®æ¨¡åž‹æä¾›é€šç”¨å­—æ®µå’Œæ–¹æ³•çš„æŠ½è±¡åŸºç±»ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/base_sync_data.py:10:21
   |
 9 | class BaseSyncData(db.Model):
10 |     """åŸºç¡€åŒæ­¥æ•°æ®æ¨¡åž‹ï¼ˆæŠ½è±¡åŸºç±»ï¼‰ã€‚.
   |                                  ^^
11 |
12 |     ä¸ºåŒæ­¥æ•°æ®æ¨¡åž‹æä¾›é€šç”¨å­—æ®µå’Œæ–¹æ³•çš„æŠ½è±¡åŸºç±»ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/base_sync_data.py:13:14
   |
12 |     ä¸ºåŒæ­¥æ•°æ®æ¨¡åž‹æä¾›é€šç”¨å­—æ®µå’Œæ–¹æ³•çš„æŠ½è±¡åŸºç±»ã€‚
13 |     æ‰€æœ‰åŒæ­¥ç›¸å…³çš„æ¨¡åž‹ï¼ˆå¦‚ AccountPermissionï¼‰éƒ½åº”ç»§æ‰¿æ­¤ç±»ã€‚
   |                       ^^
14 |
15 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/base_sync_data.py:13:34
   |
12 |     ä¸ºåŒæ­¥æ•°æ®æ¨¡åž‹æä¾›é€šç”¨å­—æ®µå’Œæ–¹æ³•çš„æŠ½è±¡åŸºç±»ã€‚
13 |     æ‰€æœ‰åŒæ­¥ç›¸å…³çš„æ¨¡åž‹ï¼ˆå¦‚ AccountPermissionï¼‰éƒ½åº”ç»§æ‰¿æ­¤ç±»ã€‚
   |                                             ^^
14 |
15 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/base_sync_data.py:17:30
   |
15 |     Attributes:
16 |         id: ä¸»é”® IDã€‚
17 |         instance_id: å…³è”çš„å®žä¾‹ IDï¼ˆå¤–é”®ï¼‰ã€‚
   |                                   ^^
18 |         db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysql/postgresql/sqlserver/oracleï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/base_sync_data.py:17:33
   |
15 |     Attributes:
16 |         id: ä¸»é”® IDã€‚
17 |         instance_id: å…³è”çš„å®žä¾‹ IDï¼ˆå¤–é”®ï¼‰ã€‚
   |                                         ^^
18 |         db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysql/postgresql/sqlserver/oracleï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/base_sync_data.py:18:23
   |
16 |         id: ä¸»é”® IDã€‚
17 |         instance_id: å…³è”çš„å®žä¾‹ IDï¼ˆå¤–é”®ï¼‰ã€‚
18 |         db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysql/postgresql/sqlserver/oracleï¼‰ã€‚
   |                            ^^
19 |
20 |     """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/base_sync_data.py:18:57
   |
16 |         id: ä¸»é”® IDã€‚
17 |         instance_id: å…³è”çš„å®žä¾‹ IDï¼ˆå¤–é”®ï¼‰ã€‚
18 |         db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysql/postgresql/sqlserver/oracleï¼‰ã€‚
   |                                                               ^^
19 |
20 |     """
   |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/models/base_sync_data.py:40:15
   |
38 |         nullable=False,
39 |         index=True,
40 |     )  # æ•°æ®åº“ç±»åž‹ï¼šmysqlã€postgresqlã€sqlserverã€oracle
   |                    ^^
41 |
42 |     # å…³è”å®žä¾‹ - åœ¨å­ç±»ä¸­å®šä¹‰
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/credential.py:11:14
   |
 9 |     """å‡­æ®æ¨¡åž‹ã€‚.
10 |
11 |     å­˜å‚¨æ•°æ®åº“è¿žæŽ¥å‡­æ®ï¼Œæ”¯æŒå¯†ç åŠ å¯†å­˜å‚¨ã€‚
   |                       ^^
12 |
13 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/credential.py:15:19
   |
13 |     Attributes:
14 |         id: å‡­æ®ä¸»é”®ã€‚
15 |         name: å‡­æ®åç§°ï¼Œå”¯ä¸€ã€‚
   |                       ^^
16 |         credential_type: å‡­æ®ç±»åž‹ï¼ˆdatabaseã€sshã€windowsç­‰ï¼‰ã€‚
17 |         db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/credential.py:16:30
   |
14 |         id: å‡­æ®ä¸»é”®ã€‚
15 |         name: å‡­æ®åç§°ï¼Œå”¯ä¸€ã€‚
16 |         credential_type: å‡­æ®ç±»åž‹ï¼ˆdatabaseã€sshã€windowsç­‰ï¼‰ã€‚
   |                                  ^^
17 |         db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰ã€‚
18 |         username: ç”¨æˆ·åã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/credential.py:16:52
   |
14 |         id: å‡­æ®ä¸»é”®ã€‚
15 |         name: å‡­æ®åç§°ï¼Œå”¯ä¸€ã€‚
16 |         credential_type: å‡­æ®ç±»åž‹ï¼ˆdatabaseã€sshã€windowsç­‰ï¼‰ã€‚
   |                                                            ^^
17 |         db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰ã€‚
18 |         username: ç”¨æˆ·åã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/credential.py:17:23
   |
15 |         name: å‡­æ®åç§°ï¼Œå”¯ä¸€ã€‚
16 |         credential_type: å‡­æ®ç±»åž‹ï¼ˆdatabaseã€sshã€windowsç­‰ï¼‰ã€‚
17 |         db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰ã€‚
   |                            ^^
18 |         username: ç”¨æˆ·åã€‚
19 |         password: åŠ å¯†åŽçš„å¯†ç ã€‚
   |

PLR0913 Too many arguments in function definition (8 > 5)
  --> app/models/credential.py:46:9
   |
44 |     deleted_at = db.Column(db.DateTime(timezone=True), nullable=True)
45 |
46 |     def __init__(
   |         ^^^^^^^^
47 |         self,
48 |         name: str,
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/credential.py:60:23
   |
59 |         Args:
60 |             name: å‡­æ®åç§°ï¼Œå¿…é¡»å”¯ä¸€ã€‚
   |                           ^^
61 |             credential_type: å‡­æ®ç±»åž‹ã€‚
62 |             username: ç”¨æˆ·åã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/credential.py:63:27
   |
61 |             credential_type: å‡­æ®ç±»åž‹ã€‚
62 |             username: ç”¨æˆ·åã€‚
63 |             password: åŽŸå§‹å¯†ç ï¼ˆå°†è¢«åŠ å¯†å­˜å‚¨ï¼‰ã€‚
   |                               ^^
64 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰ã€‚
65 |             instance_ids: å…³è”å®žä¾‹IDåˆ—è¡¨ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/credential.py:63:34
   |
61 |             credential_type: å‡­æ®ç±»åž‹ã€‚
62 |             username: ç”¨æˆ·åã€‚
63 |             password: åŽŸå§‹å¯†ç ï¼ˆå°†è¢«åŠ å¯†å­˜å‚¨ï¼‰ã€‚
   |                                             ^^
64 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰ã€‚
65 |             instance_ids: å…³è”å®žä¾‹IDåˆ—è¡¨ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/credential.py:64:27
   |
62 |             username: ç”¨æˆ·åã€‚
63 |             password: åŽŸå§‹å¯†ç ï¼ˆå°†è¢«åŠ å¯†å­˜å‚¨ï¼‰ã€‚
64 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰ã€‚
   |                                ^^
65 |             instance_ids: å…³è”å®žä¾‹IDåˆ—è¡¨ï¼Œå¯é€‰ã€‚
66 |             category_id: åˆ†ç±»IDï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/credential.py:65:35
   |
63 |             password: åŽŸå§‹å¯†ç ï¼ˆå°†è¢«åŠ å¯†å­˜å‚¨ï¼‰ã€‚
64 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰ã€‚
65 |             instance_ids: å…³è”å®žä¾‹IDåˆ—è¡¨ï¼Œå¯é€‰ã€‚
   |                                         ^^
66 |             category_id: åˆ†ç±»IDï¼Œå¯é€‰ã€‚
67 |             description: æè¿°ä¿¡æ¯ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/credential.py:66:30
   |
64 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰ã€‚
65 |             instance_ids: å…³è”å®žä¾‹IDåˆ—è¡¨ï¼Œå¯é€‰ã€‚
66 |             category_id: åˆ†ç±»IDï¼Œå¯é€‰ã€‚
   |                                ^^
67 |             description: æè¿°ä¿¡æ¯ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/credential.py:67:30
   |
65 |             instance_ids: å…³è”å®žä¾‹IDåˆ—è¡¨ï¼Œå¯é€‰ã€‚
66 |             category_id: åˆ†ç±»IDï¼Œå¯é€‰ã€‚
67 |             description: æè¿°ä¿¡æ¯ï¼Œå¯é€‰ã€‚
   |                                  ^^
68 |
69 |         """
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/credential.py:80:16
   |
79 |     def set_password(self, password: str) -> None:
80 |         """è®¾ç½®å¯†ç ï¼ˆåŠ å¯†å­˜å‚¨ï¼‰ã€‚.
   |                    ^^
81 |
82 |         ä½¿ç”¨åŠ å¯†ç®¡ç†å™¨å¯¹å¯†ç è¿›è¡ŒåŠ å¯†åŽå­˜å‚¨ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/credential.py:80:21
   |
79 |     def set_password(self, password: str) -> None:
80 |         """è®¾ç½®å¯†ç ï¼ˆåŠ å¯†å­˜å‚¨ï¼‰ã€‚.
   |                              ^^
81 |
82 |         ä½¿ç”¨åŠ å¯†ç®¡ç†å™¨å¯¹å¯†ç è¿›è¡ŒåŠ å¯†åŽå­˜å‚¨ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/credential.py:88:23
   |
87 |         Returns:
88 |             None: æ— è¿”å›žå€¼ï¼Œæ–¹æ³•æ‰§è¡Œå®Œæˆå³è¡¨ç¤ºå¯†ç å·²åŠ å¯†å­˜å‚¨ã€‚
   |                           ^^
89 |
90 |         """
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/models/credential.py:97:17
   |
95 |         """éªŒè¯å¯†ç ã€‚.
96 |
97 |         æ”¯æŒå¤šç§å¯†ç æ ¼å¼ï¼šbcrypt å“ˆå¸Œï¼ˆæ—§æ ¼å¼ï¼‰ã€åŠ å¯†æ ¼å¼å’Œæ˜Žæ–‡ã€‚
   |                         ^^
98 |
99 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/credential.py:97:27
   |
95 |         """éªŒè¯å¯†ç ã€‚.
96 |
97 |         æ”¯æŒå¤šç§å¯†ç æ ¼å¼ï¼šbcrypt å“ˆå¸Œï¼ˆæ—§æ ¼å¼ï¼‰ã€åŠ å¯†æ ¼å¼å’Œæ˜Žæ–‡ã€‚
   |                                      ^^
98 |
99 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/credential.py:97:31
   |
95 |         """éªŒè¯å¯†ç ã€‚.
96 |
97 |         æ”¯æŒå¤šç§å¯†ç æ ¼å¼ï¼šbcrypt å“ˆå¸Œï¼ˆæ—§æ ¼å¼ï¼‰ã€åŠ å¯†æ ¼å¼å’Œæ˜Žæ–‡ã€‚
   |                                              ^^
98 |
99 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/credential.py:103:24
    |
102 |         Returns:
103 |             å¯†ç æ­£ç¡®è¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚
    |                              ^^
104 |
105 |         """
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/models/credential.py:106:22
    |
105 |         """
106 |         # å¦‚æžœæ˜¯bcryptå“ˆå¸Œï¼ˆæ—§æ ¼å¼ï¼‰ï¼Œä½¿ç”¨bcryptéªŒè¯
    |                           ^^
107 |         if self.password.startswith("$2b$"):
108 |             return bcrypt.check_password_hash(self.password, password)
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/models/credential.py:106:26
    |
105 |         """
106 |         # å¦‚æžœæ˜¯bcryptå“ˆå¸Œï¼ˆæ—§æ ¼å¼ï¼‰ï¼Œä½¿ç”¨bcryptéªŒè¯
    |                                   ^^
107 |         if self.password.startswith("$2b$"):
108 |             return bcrypt.check_password_hash(self.password, password)
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/credential.py:106:27
    |
105 |         """
106 |         # å¦‚æžœæ˜¯bcryptå“ˆå¸Œï¼ˆæ—§æ ¼å¼ï¼‰ï¼Œä½¿ç”¨bcryptéªŒè¯
    |                                     ^^
107 |         if self.password.startswith("$2b$"):
108 |             return bcrypt.check_password_hash(self.password, password)
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/credential.py:110:21
    |
108 |             return bcrypt.check_password_hash(self.password, password)
109 |
110 |         # å¦‚æžœæ˜¯æˆ‘ä»¬çš„åŠ å¯†æ ¼å¼ï¼Œè§£å¯†åŽæ¯”è¾ƒ
    |                               ^^
111 |         if get_password_manager().is_encrypted(self.password):
112 |             decrypted_password = get_password_manager().decrypt_password(self.password)
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/models/credential.py:115:18
    |
113 |             return decrypted_password == password
114 |
115 |         # å¦‚æžœæ˜¯æ˜Žæ–‡å¯†ç ï¼ˆä¸å®‰å…¨ï¼‰ï¼Œç›´æŽ¥æ¯”è¾ƒ
    |                         ^^
116 |         return self.password == password
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/models/credential.py:115:22
    |
113 |             return decrypted_password == password
114 |
115 |         # å¦‚æžœæ˜¯æ˜Žæ–‡å¯†ç ï¼ˆä¸å®‰å…¨ï¼‰ï¼Œç›´æŽ¥æ¯”è¾ƒ
    |                                 ^^
116 |         return self.password == password
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/credential.py:115:23
    |
113 |             return decrypted_password == password
114 |
115 |         # å¦‚æžœæ˜¯æ˜Žæ–‡å¯†ç ï¼ˆä¸å®‰å…¨ï¼‰ï¼Œç›´æŽ¥æ¯”è¾ƒ
    |                                   ^^
116 |         return self.password == password
    |

PLR2004 Magic value used in comparison, consider replacing `8` with a constant variable
   --> app/models/credential.py:125:33
    |
124 |         """
125 |         if len(self.password) > 8:
    |                                 ^
126 |             return "*" * (len(self.password) - 4) + self.password[-4:]
127 |         return "*" * len(self.password)
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/models/credential.py:130:18
    |
129 |     def get_plain_password(self) -> str:
130 |         """èŽ·å–åŽŸå§‹å¯†ç ï¼ˆç”¨äºŽæ•°æ®åº“è¿žæŽ¥ï¼‰ã€‚.
    |                        ^^
131 |
132 |         è§£å¯†å­˜å‚¨çš„å¯†ç å¹¶è¿”å›žæ˜Žæ–‡ã€‚å¯¹äºŽæ—§æ ¼å¼çš„ bcrypt å“ˆå¸Œï¼Œ
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/models/credential.py:130:26
    |
129 |     def get_plain_password(self) -> str:
130 |         """èŽ·å–åŽŸå§‹å¯†ç ï¼ˆç”¨äºŽæ•°æ®åº“è¿žæŽ¥ï¼‰ã€‚.
    |                                        ^^
131 |
132 |         è§£å¯†å­˜å‚¨çš„å¯†ç å¹¶è¿”å›žæ˜Žæ–‡ã€‚å¯¹äºŽæ—§æ ¼å¼çš„ bcrypt å“ˆå¸Œï¼Œ
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/credential.py:132:38
    |
130 |         """èŽ·å–åŽŸå§‹å¯†ç ï¼ˆç”¨äºŽæ•°æ®åº“è¿žæŽ¥ï¼‰ã€‚.
131 |
132 |         è§£å¯†å­˜å‚¨çš„å¯†ç å¹¶è¿”å›žæ˜Žæ–‡ã€‚å¯¹äºŽæ—§æ ¼å¼çš„ bcrypt å“ˆå¸Œï¼Œ
    |                                                           ^^
133 |         å°è¯•ä»ŽçŽ¯å¢ƒå˜é‡èŽ·å–é»˜è®¤å¯†ç ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/credential.py:136:21
    |
135 |         Returns:
136 |             è§£å¯†åŽçš„åŽŸå§‹å¯†ç ï¼Œå¤±è´¥æ—¶è¿”å›žç©ºå­—ç¬¦ä¸²ã€‚
    |                             ^^
137 |
138 |         """
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/credential.py:139:24
    |
138 |         """
139 |         # å¦‚æžœå¯†ç æ˜¯bcryptå“ˆå¸Œï¼Œè¯´æ˜Žæ˜¯æ—§æ ¼å¼ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†
    |                               ^^
140 |         if self.password.startswith("$2b$"):
141 |             # å¯¹äºŽæ—§æ ¼å¼ï¼Œä»ŽçŽ¯å¢ƒå˜é‡èŽ·å–å¯†ç ï¼Œé¿å…ç¡¬ç¼–ç 
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/credential.py:139:31
    |
138 |         """
139 |         # å¦‚æžœå¯†ç æ˜¯bcryptå“ˆå¸Œï¼Œè¯´æ˜Žæ˜¯æ—§æ ¼å¼ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†
    |                                             ^^
140 |         if self.password.startswith("$2b$"):
141 |             # å¯¹äºŽæ—§æ ¼å¼ï¼Œä»ŽçŽ¯å¢ƒå˜é‡èŽ·å–å¯†ç ï¼Œé¿å…ç¡¬ç¼–ç 
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/credential.py:141:20
    |
139 |         # å¦‚æžœå¯†ç æ˜¯bcryptå“ˆå¸Œï¼Œè¯´æ˜Žæ˜¯æ—§æ ¼å¼ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†
140 |         if self.password.startswith("$2b$"):
141 |             # å¯¹äºŽæ—§æ ¼å¼ï¼Œä»ŽçŽ¯å¢ƒå˜é‡èŽ·å–å¯†ç ï¼Œé¿å…ç¡¬ç¼–ç 
    |                         ^^
142 |             import os
143 |             default_password = os.getenv(f"DEFAULT_{self.db_type.upper()}_PASSWORD")
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/credential.py:141:30
    |
139 |         # å¦‚æžœå¯†ç æ˜¯bcryptå“ˆå¸Œï¼Œè¯´æ˜Žæ˜¯æ—§æ ¼å¼ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†
140 |         if self.password.startswith("$2b$"):
141 |             # å¯¹äºŽæ—§æ ¼å¼ï¼Œä»ŽçŽ¯å¢ƒå˜é‡èŽ·å–å¯†ç ï¼Œé¿å…ç¡¬ç¼–ç 
    |                                             ^^
142 |             import os
143 |             default_password = os.getenv(f"DEFAULT_{self.db_type.upper()}_PASSWORD")
    |

PLC0415 `import` should be at the top-level of a file
   --> app/models/credential.py:142:13
    |
140 |         if self.password.startswith("$2b$"):
141 |             # å¯¹äºŽæ—§æ ¼å¼ï¼Œä»ŽçŽ¯å¢ƒå˜é‡èŽ·å–å¯†ç ï¼Œé¿å…ç¡¬ç¼–ç 
142 |             import os
    |             ^^^^^^^^^
143 |             default_password = os.getenv(f"DEFAULT_{self.db_type.upper()}_PASSWORD")
144 |             if default_password:
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/credential.py:146:25
    |
144 |             if default_password:
145 |                 return default_password
146 |             # å¦‚æžœæ²¡æœ‰è®¾ç½®çŽ¯å¢ƒå˜é‡ï¼Œè¿”å›žç©ºå­—ç¬¦ä¸²å¹¶è®°å½•è­¦å‘Š
    |                                   ^^
147 |             from app.utils.structlog_config import get_system_logger
148 |             system_logger = get_system_logger()
    |

PLC0415 `import` should be at the top-level of a file
   --> app/models/credential.py:147:13
    |
145 |                 return default_password
146 |             # å¦‚æžœæ²¡æœ‰è®¾ç½®çŽ¯å¢ƒå˜é‡ï¼Œè¿”å›žç©ºå­—ç¬¦ä¸²å¹¶è®°å½•è­¦å‘Š
147 |             from app.utils.structlog_config import get_system_logger
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
148 |             system_logger = get_system_logger()
149 |             system_logger.warning(
    |

G004 Logging statement uses f-string
   --> app/models/credential.py:150:17
    |
148 |             system_logger = get_system_logger()
149 |             system_logger.warning(
150 |                 f"æœªè®¾ç½®çŽ¯å¢ƒå˜é‡ DEFAULT_{self.db_type.upper()}_PASSWORDï¼Œæ— æ³•èŽ·å–å¯†ç ",
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
151 |                 module="credential_model",
152 |                 db_type=self.db_type,
    |
help: Convert to lazy `%` formatting

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/credential.py:150:66
    |
148 |             system_logger = get_system_logger()
149 |             system_logger.warning(
150 |                 f"æœªè®¾ç½®çŽ¯å¢ƒå˜é‡ DEFAULT_{self.db_type.upper()}_PASSWORDï¼Œæ— æ³•èŽ·å–å¯†ç ",
    |                                                                         ^^
151 |                 module="credential_model",
152 |                 db_type=self.db_type,
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/credential.py:156:21
    |
154 |             return ""
155 |
156 |         # å¦‚æžœæ˜¯æˆ‘ä»¬çš„åŠ å¯†æ ¼å¼ï¼Œå°è¯•è§£å¯†
    |                               ^^
157 |         if get_password_manager().is_encrypted(self.password):
158 |             return get_password_manager().decrypt_password(self.password)
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/credential.py:160:16
    |
158 |             return get_password_manager().decrypt_password(self.password)
159 |
160 |         # å¦‚æžœéƒ½ä¸æ˜¯ï¼Œå¯èƒ½æ˜¯æ˜Žæ–‡å¯†ç ï¼ˆä¸å®‰å…¨ï¼‰
    |                     ^^
161 |         return self.password
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/models/credential.py:160:24
    |
158 |             return get_password_manager().decrypt_password(self.password)
159 |
160 |         # å¦‚æžœéƒ½ä¸æ˜¯ï¼Œå¯èƒ½æ˜¯æ˜Žæ–‡å¯†ç ï¼ˆä¸å®‰å…¨ï¼‰
    |                                     ^^
161 |         return self.password
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/models/credential.py:160:28
    |
158 |             return get_password_manager().decrypt_password(self.password)
159 |
160 |         # å¦‚æžœéƒ½ä¸æ˜¯ï¼Œå¯èƒ½æ˜¯æ˜Žæ–‡å¯†ç ï¼ˆä¸å®‰å…¨ï¼‰
    |                                             ^^
161 |         return self.password
    |

D205 1 blank line required between summary line and description
 --> app/models/database_size_aggregation.py:1:1
  |
1 | / """æ•°æ®åº“å¤§å°èšåˆç»Ÿè®¡æ¨¡åž‹
2 | | å­˜å‚¨æ¯å‘¨ã€æ¯æœˆã€æ¯å­£åº¦çš„ç»Ÿè®¡ä¿¡æ¯.
3 | | """
  | |___^
4 |
5 |   from sqlalchemy import (
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:24:18
   |
23 | class DatabaseSizeAggregation(db.Model):
24 |     """æ•°æ®åº“å¤§å°èšåˆç»Ÿè®¡è¡¨ï¼ˆåˆ†åŒºè¡¨ï¼‰ã€‚.
   |                            ^^
25 |
26 |     å­˜å‚¨æ¯å‘¨ã€æ¯æœˆã€æ¯å­£åº¦çš„æ•°æ®åº“å¤§å°èšåˆç»Ÿè®¡ä¿¡æ¯ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:24:22
   |
23 | class DatabaseSizeAggregation(db.Model):
24 |     """æ•°æ®åº“å¤§å°èšåˆç»Ÿè®¡è¡¨ï¼ˆåˆ†åŒºè¡¨ï¼‰ã€‚.
   |                                    ^^
25 |
26 |     å­˜å‚¨æ¯å‘¨ã€æ¯æœˆã€æ¯å­£åº¦çš„æ•°æ®åº“å¤§å°èšåˆç»Ÿè®¡ä¿¡æ¯ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_aggregation.py:27:26
   |
26 |     å­˜å‚¨æ¯å‘¨ã€æ¯æœˆã€æ¯å­£åº¦çš„æ•°æ®åº“å¤§å°èšåˆç»Ÿè®¡ä¿¡æ¯ã€‚
27 |     æŒ‰ period_start å­—æ®µæŒ‰æœˆåˆ†åŒºï¼Œæ”¯æŒå¢žé‡/å‡é‡ç»Ÿè®¡ã€‚
   |                                 ^^
28 |
29 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:30:18
   |
29 |     Attributes:
30 |         id: ä¸»é”® IDï¼ˆBigIntegerï¼‰ã€‚
   |                    ^^
31 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
32 |         database_name: æ•°æ®åº“åç§°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:30:29
   |
29 |     Attributes:
30 |         id: ä¸»é”® IDï¼ˆBigIntegerï¼‰ã€‚
   |                                ^^
31 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
32 |         database_name: æ•°æ®åº“åç§°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:33:28
   |
31 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
32 |         database_name: æ•°æ®åº“åç§°ã€‚
33 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼ˆweekly/monthly/quarterlyï¼‰ã€‚
   |                                  ^^
34 |         period_start: ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
35 |         period_end: ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:33:53
   |
31 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
32 |         database_name: æ•°æ®åº“åç§°ã€‚
33 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼ˆweekly/monthly/quarterlyï¼‰ã€‚
   |                                                            ^^
34 |         period_start: ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
35 |         period_end: ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:34:31
   |
32 |         database_name: æ•°æ®åº“åç§°ã€‚
33 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼ˆweekly/monthly/quarterlyï¼‰ã€‚
34 |         period_start: ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
   |                                       ^^
35 |         period_end: ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸã€‚
36 |         avg_size_mb: å¹³å‡å¤§å°ï¼ˆMBï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:34:36
   |
32 |         database_name: æ•°æ®åº“åç§°ã€‚
33 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼ˆweekly/monthly/quarterlyï¼‰ã€‚
34 |         period_start: ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
   |                                                 ^^
35 |         period_end: ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸã€‚
36 |         avg_size_mb: å¹³å‡å¤§å°ï¼ˆMBï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:36:26
   |
34 |         period_start: ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
35 |         period_end: ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸã€‚
36 |         avg_size_mb: å¹³å‡å¤§å°ï¼ˆMBï¼‰ã€‚
   |                              ^^
37 |         max_size_mb: æœ€å¤§å¤§å°ï¼ˆMBï¼‰ã€‚
38 |         min_size_mb: æœ€å°å¤§å°ï¼ˆMBï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:36:29
   |
34 |         period_start: ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
35 |         period_end: ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸã€‚
36 |         avg_size_mb: å¹³å‡å¤§å°ï¼ˆMBï¼‰ã€‚
   |                                  ^^
37 |         max_size_mb: æœ€å¤§å¤§å°ï¼ˆMBï¼‰ã€‚
38 |         min_size_mb: æœ€å°å¤§å°ï¼ˆMBï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:37:26
   |
35 |         period_end: ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸã€‚
36 |         avg_size_mb: å¹³å‡å¤§å°ï¼ˆMBï¼‰ã€‚
37 |         max_size_mb: æœ€å¤§å¤§å°ï¼ˆMBï¼‰ã€‚
   |                              ^^
38 |         min_size_mb: æœ€å°å¤§å°ï¼ˆMBï¼‰ã€‚
39 |         data_count: ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:37:29
   |
35 |         period_end: ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸã€‚
36 |         avg_size_mb: å¹³å‡å¤§å°ï¼ˆMBï¼‰ã€‚
37 |         max_size_mb: æœ€å¤§å¤§å°ï¼ˆMBï¼‰ã€‚
   |                                  ^^
38 |         min_size_mb: æœ€å°å¤§å°ï¼ˆMBï¼‰ã€‚
39 |         data_count: ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:38:26
   |
36 |         avg_size_mb: å¹³å‡å¤§å°ï¼ˆMBï¼‰ã€‚
37 |         max_size_mb: æœ€å¤§å¤§å°ï¼ˆMBï¼‰ã€‚
38 |         min_size_mb: æœ€å°å¤§å°ï¼ˆMBï¼‰ã€‚
   |                              ^^
39 |         data_count: ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡ã€‚
40 |         avg_data_size_mb: å¹³å‡æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:38:29
   |
36 |         avg_size_mb: å¹³å‡å¤§å°ï¼ˆMBï¼‰ã€‚
37 |         max_size_mb: æœ€å¤§å¤§å°ï¼ˆMBï¼‰ã€‚
38 |         min_size_mb: æœ€å°å¤§å°ï¼ˆMBï¼‰ã€‚
   |                                  ^^
39 |         data_count: ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡ã€‚
40 |         avg_data_size_mb: å¹³å‡æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:40:33
   |
38 |         min_size_mb: æœ€å°å¤§å°ï¼ˆMBï¼‰ã€‚
39 |         data_count: ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡ã€‚
40 |         avg_data_size_mb: å¹³å‡æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
   |                                       ^^
41 |         max_data_size_mb: æœ€å¤§æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
42 |         min_data_size_mb: æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:40:36
   |
38 |         min_size_mb: æœ€å°å¤§å°ï¼ˆMBï¼‰ã€‚
39 |         data_count: ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡ã€‚
40 |         avg_data_size_mb: å¹³å‡æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
   |                                           ^^
41 |         max_data_size_mb: æœ€å¤§æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
42 |         min_data_size_mb: æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:41:33
   |
39 |         data_count: ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡ã€‚
40 |         avg_data_size_mb: å¹³å‡æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
41 |         max_data_size_mb: æœ€å¤§æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
   |                                       ^^
42 |         min_data_size_mb: æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
43 |         avg_log_size_mb: å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:41:36
   |
39 |         data_count: ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡ã€‚
40 |         avg_data_size_mb: å¹³å‡æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
41 |         max_data_size_mb: æœ€å¤§æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
   |                                           ^^
42 |         min_data_size_mb: æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
43 |         avg_log_size_mb: å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:42:33
   |
40 |         avg_data_size_mb: å¹³å‡æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
41 |         max_data_size_mb: æœ€å¤§æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
42 |         min_data_size_mb: æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
   |                                       ^^
43 |         avg_log_size_mb: å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
44 |         max_log_size_mb: æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:42:36
   |
40 |         avg_data_size_mb: å¹³å‡æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
41 |         max_data_size_mb: æœ€å¤§æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
42 |         min_data_size_mb: æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
   |                                           ^^
43 |         avg_log_size_mb: å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
44 |         max_log_size_mb: æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:43:32
   |
41 |         max_data_size_mb: æœ€å¤§æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
42 |         min_data_size_mb: æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
43 |         avg_log_size_mb: å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
   |                                      ^^
44 |         max_log_size_mb: æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
45 |         min_log_size_mb: æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_aggregation.py:43:35
   |
41 |         max_data_size_mb: æœ€å¤§æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
42 |         min_data_size_mb: æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
43 |         avg_log_size_mb: å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
   |                                          ^^
44 |         max_log_size_mb: æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
45 |         min_log_size_mb: æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:43:46
   |
41 |         max_data_size_mb: æœ€å¤§æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
42 |         min_data_size_mb: æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
43 |         avg_log_size_mb: å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
   |                                                      ^^
44 |         max_log_size_mb: æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
45 |         min_log_size_mb: æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:44:32
   |
42 |         min_data_size_mb: æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
43 |         avg_log_size_mb: å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
44 |         max_log_size_mb: æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
   |                                      ^^
45 |         min_log_size_mb: æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
46 |         size_change_mb: æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_aggregation.py:44:35
   |
42 |         min_data_size_mb: æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
43 |         avg_log_size_mb: å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
44 |         max_log_size_mb: æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
   |                                          ^^
45 |         min_log_size_mb: æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
46 |         size_change_mb: æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:44:46
   |
42 |         min_data_size_mb: æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰ã€‚
43 |         avg_log_size_mb: å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
44 |         max_log_size_mb: æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
   |                                                      ^^
45 |         min_log_size_mb: æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
46 |         size_change_mb: æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:45:32
   |
43 |         avg_log_size_mb: å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
44 |         max_log_size_mb: æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
45 |         min_log_size_mb: æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
   |                                      ^^
46 |         size_change_mb: æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
47 |         size_change_percent: æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_aggregation.py:45:35
   |
43 |         avg_log_size_mb: å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
44 |         max_log_size_mb: æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
45 |         min_log_size_mb: æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
   |                                          ^^
46 |         size_change_mb: æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
47 |         size_change_percent: æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:45:46
   |
43 |         avg_log_size_mb: å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
44 |         max_log_size_mb: æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
45 |         min_log_size_mb: æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
   |                                                      ^^
46 |         size_change_mb: æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
47 |         size_change_percent: æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:46:31
   |
44 |         max_log_size_mb: æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
45 |         min_log_size_mb: æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
46 |         size_change_mb: æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |                                     ^^
47 |         size_change_percent: æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
48 |         data_size_change_mb: æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_aggregation.py:46:34
   |
44 |         max_log_size_mb: æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
45 |         min_log_size_mb: æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
46 |         size_change_mb: æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |                                         ^^
47 |         size_change_percent: æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
48 |         data_size_change_mb: æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:46:39
   |
44 |         max_log_size_mb: æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
45 |         min_log_size_mb: æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
46 |         size_change_mb: æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |                                                   ^^
47 |         size_change_percent: æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
48 |         data_size_change_mb: æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:47:38
   |
45 |         min_log_size_mb: æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
46 |         size_change_mb: æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
47 |         size_change_percent: æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |                                              ^^
48 |         data_size_change_mb: æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_aggregation.py:47:40
   |
45 |         min_log_size_mb: æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
46 |         size_change_mb: æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
47 |         size_change_percent: æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |                                                 ^^
48 |         data_size_change_mb: æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:47:45
   |
45 |         min_log_size_mb: æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼ŒSQL Serverï¼‰ã€‚
46 |         size_change_mb: æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
47 |         size_change_percent: æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |                                                           ^^
48 |         data_size_change_mb: æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:48:37
   |
46 |         size_change_mb: æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
47 |         size_change_percent: æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
48 |         data_size_change_mb: æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |                                            ^^
49 |
50 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_aggregation.py:48:40
   |
46 |         size_change_mb: æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
47 |         size_change_percent: æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
48 |         data_size_change_mb: æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |                                                ^^
49 |
50 |     """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:48:45
   |
46 |         size_change_mb: æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
47 |         size_change_percent: æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
48 |         data_size_change_mb: æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰ã€‚
   |                                                          ^^
49 |
50 |     """
   |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/models/database_size_aggregation.py:59:69
   |
58 |     # ç»Ÿè®¡å‘¨æœŸ
59 |     period_type = Column(String(20), nullable=False, comment="ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼šweekly, monthly, quarterly")
   |                                                                           ^^
60 |     period_start = Column(Date, nullable=False, comment="ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰")
61 |     period_end = Column(Date, nullable=False, comment="ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸ")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:60:66
   |
58 |     # ç»Ÿè®¡å‘¨æœŸ
59 |     period_type = Column(String(20), nullable=False, comment="ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼šweekly, monthly, quarterly")
60 |     period_start = Column(Date, nullable=False, comment="ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰")
   |                                                                          ^^
61 |     period_end = Column(Date, nullable=False, comment="ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸ")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:60:71
   |
58 |     # ç»Ÿè®¡å‘¨æœŸ
59 |     period_type = Column(String(20), nullable=False, comment="ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼šweekly, monthly, quarterly")
60 |     period_start = Column(Date, nullable=False, comment="ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰")
   |                                                                                    ^^
61 |     period_end = Column(Date, nullable=False, comment="ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸ")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:64:67
   |
63 |     # ç»Ÿè®¡æŒ‡æ ‡
64 |     avg_size_mb = Column(BigInteger, nullable=False, comment="å¹³å‡å¤§å°ï¼ˆMBï¼‰")
   |                                                                       ^^
65 |     max_size_mb = Column(BigInteger, nullable=False, comment="æœ€å¤§å¤§å°ï¼ˆMBï¼‰")
66 |     min_size_mb = Column(BigInteger, nullable=False, comment="æœ€å°å¤§å°ï¼ˆMBï¼‰")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:64:70
   |
63 |     # ç»Ÿè®¡æŒ‡æ ‡
64 |     avg_size_mb = Column(BigInteger, nullable=False, comment="å¹³å‡å¤§å°ï¼ˆMBï¼‰")
   |                                                                           ^^
65 |     max_size_mb = Column(BigInteger, nullable=False, comment="æœ€å¤§å¤§å°ï¼ˆMBï¼‰")
66 |     min_size_mb = Column(BigInteger, nullable=False, comment="æœ€å°å¤§å°ï¼ˆMBï¼‰")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:65:67
   |
63 |     # ç»Ÿè®¡æŒ‡æ ‡
64 |     avg_size_mb = Column(BigInteger, nullable=False, comment="å¹³å‡å¤§å°ï¼ˆMBï¼‰")
65 |     max_size_mb = Column(BigInteger, nullable=False, comment="æœ€å¤§å¤§å°ï¼ˆMBï¼‰")
   |                                                                       ^^
66 |     min_size_mb = Column(BigInteger, nullable=False, comment="æœ€å°å¤§å°ï¼ˆMBï¼‰")
67 |     data_count = Column(Integer, nullable=False, comment="ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:65:70
   |
63 |     # ç»Ÿè®¡æŒ‡æ ‡
64 |     avg_size_mb = Column(BigInteger, nullable=False, comment="å¹³å‡å¤§å°ï¼ˆMBï¼‰")
65 |     max_size_mb = Column(BigInteger, nullable=False, comment="æœ€å¤§å¤§å°ï¼ˆMBï¼‰")
   |                                                                           ^^
66 |     min_size_mb = Column(BigInteger, nullable=False, comment="æœ€å°å¤§å°ï¼ˆMBï¼‰")
67 |     data_count = Column(Integer, nullable=False, comment="ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:66:67
   |
64 |     avg_size_mb = Column(BigInteger, nullable=False, comment="å¹³å‡å¤§å°ï¼ˆMBï¼‰")
65 |     max_size_mb = Column(BigInteger, nullable=False, comment="æœ€å¤§å¤§å°ï¼ˆMBï¼‰")
66 |     min_size_mb = Column(BigInteger, nullable=False, comment="æœ€å°å¤§å°ï¼ˆMBï¼‰")
   |                                                                       ^^
67 |     data_count = Column(Integer, nullable=False, comment="ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:66:70
   |
64 |     avg_size_mb = Column(BigInteger, nullable=False, comment="å¹³å‡å¤§å°ï¼ˆMBï¼‰")
65 |     max_size_mb = Column(BigInteger, nullable=False, comment="æœ€å¤§å¤§å°ï¼ˆMBï¼‰")
66 |     min_size_mb = Column(BigInteger, nullable=False, comment="æœ€å°å¤§å°ï¼ˆMBï¼‰")
   |                                                                           ^^
67 |     data_count = Column(Integer, nullable=False, comment="ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡")
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:69:13
   |
67 |     data_count = Column(Integer, nullable=False, comment="ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡")
68 |
69 |     # æ•°æ®å¤§å°ç»Ÿè®¡ï¼ˆå¦‚æžœå¯èŽ·å–ï¼‰
   |                   ^^
70 |     avg_data_size_mb = Column(BigInteger, nullable=True, comment="å¹³å‡æ•°æ®å¤§å°ï¼ˆMBï¼‰")
71 |     max_data_size_mb = Column(BigInteger, nullable=True, comment="æœ€å¤§æ•°æ®å¤§å°ï¼ˆMBï¼‰")
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:69:19
   |
67 |     data_count = Column(Integer, nullable=False, comment="ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡")
68 |
69 |     # æ•°æ®å¤§å°ç»Ÿè®¡ï¼ˆå¦‚æžœå¯èŽ·å–ï¼‰
   |                               ^^
70 |     avg_data_size_mb = Column(BigInteger, nullable=True, comment="å¹³å‡æ•°æ®å¤§å°ï¼ˆMBï¼‰")
71 |     max_data_size_mb = Column(BigInteger, nullable=True, comment="æœ€å¤§æ•°æ®å¤§å°ï¼ˆMBï¼‰")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:70:73
   |
69 |     # æ•°æ®å¤§å°ç»Ÿè®¡ï¼ˆå¦‚æžœå¯èŽ·å–ï¼‰
70 |     avg_data_size_mb = Column(BigInteger, nullable=True, comment="å¹³å‡æ•°æ®å¤§å°ï¼ˆMBï¼‰")
   |                                                                               ^^
71 |     max_data_size_mb = Column(BigInteger, nullable=True, comment="æœ€å¤§æ•°æ®å¤§å°ï¼ˆMBï¼‰")
72 |     min_data_size_mb = Column(BigInteger, nullable=True, comment="æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:70:76
   |
69 |     # æ•°æ®å¤§å°ç»Ÿè®¡ï¼ˆå¦‚æžœå¯èŽ·å–ï¼‰
70 |     avg_data_size_mb = Column(BigInteger, nullable=True, comment="å¹³å‡æ•°æ®å¤§å°ï¼ˆMBï¼‰")
   |                                                                                   ^^
71 |     max_data_size_mb = Column(BigInteger, nullable=True, comment="æœ€å¤§æ•°æ®å¤§å°ï¼ˆMBï¼‰")
72 |     min_data_size_mb = Column(BigInteger, nullable=True, comment="æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:71:73
   |
69 |     # æ•°æ®å¤§å°ç»Ÿè®¡ï¼ˆå¦‚æžœå¯èŽ·å–ï¼‰
70 |     avg_data_size_mb = Column(BigInteger, nullable=True, comment="å¹³å‡æ•°æ®å¤§å°ï¼ˆMBï¼‰")
71 |     max_data_size_mb = Column(BigInteger, nullable=True, comment="æœ€å¤§æ•°æ®å¤§å°ï¼ˆMBï¼‰")
   |                                                                               ^^
72 |     min_data_size_mb = Column(BigInteger, nullable=True, comment="æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:71:76
   |
69 |     # æ•°æ®å¤§å°ç»Ÿè®¡ï¼ˆå¦‚æžœå¯èŽ·å–ï¼‰
70 |     avg_data_size_mb = Column(BigInteger, nullable=True, comment="å¹³å‡æ•°æ®å¤§å°ï¼ˆMBï¼‰")
71 |     max_data_size_mb = Column(BigInteger, nullable=True, comment="æœ€å¤§æ•°æ®å¤§å°ï¼ˆMBï¼‰")
   |                                                                                   ^^
72 |     min_data_size_mb = Column(BigInteger, nullable=True, comment="æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:72:73
   |
70 |     avg_data_size_mb = Column(BigInteger, nullable=True, comment="å¹³å‡æ•°æ®å¤§å°ï¼ˆMBï¼‰")
71 |     max_data_size_mb = Column(BigInteger, nullable=True, comment="æœ€å¤§æ•°æ®å¤§å°ï¼ˆMBï¼‰")
72 |     min_data_size_mb = Column(BigInteger, nullable=True, comment="æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰")
   |                                                                               ^^
73 |
74 |     # æ—¥å¿—å¤§å°ç»Ÿè®¡ï¼ˆSQL Serverï¼‰
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:72:76
   |
70 |     avg_data_size_mb = Column(BigInteger, nullable=True, comment="å¹³å‡æ•°æ®å¤§å°ï¼ˆMBï¼‰")
71 |     max_data_size_mb = Column(BigInteger, nullable=True, comment="æœ€å¤§æ•°æ®å¤§å°ï¼ˆMBï¼‰")
72 |     min_data_size_mb = Column(BigInteger, nullable=True, comment="æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰")
   |                                                                                   ^^
73 |
74 |     # æ—¥å¿—å¤§å°ç»Ÿè®¡ï¼ˆSQL Serverï¼‰
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:74:13
   |
72 |     min_data_size_mb = Column(BigInteger, nullable=True, comment="æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰")
73 |
74 |     # æ—¥å¿—å¤§å°ç»Ÿè®¡ï¼ˆSQL Serverï¼‰
   |                   ^^
75 |     avg_log_size_mb = Column(BigInteger, nullable=True, comment="å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
76 |     max_log_size_mb = Column(BigInteger, nullable=True, comment="æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:74:24
   |
72 |     min_data_size_mb = Column(BigInteger, nullable=True, comment="æœ€å°æ•°æ®å¤§å°ï¼ˆMBï¼‰")
73 |
74 |     # æ—¥å¿—å¤§å°ç»Ÿè®¡ï¼ˆSQL Serverï¼‰
   |                               ^^
75 |     avg_log_size_mb = Column(BigInteger, nullable=True, comment="å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
76 |     max_log_size_mb = Column(BigInteger, nullable=True, comment="æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:75:72
   |
74 |     # æ—¥å¿—å¤§å°ç»Ÿè®¡ï¼ˆSQL Serverï¼‰
75 |     avg_log_size_mb = Column(BigInteger, nullable=True, comment="å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
   |                                                                              ^^
76 |     max_log_size_mb = Column(BigInteger, nullable=True, comment="æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
77 |     min_log_size_mb = Column(BigInteger, nullable=True, comment="æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:75:75
   |
74 |     # æ—¥å¿—å¤§å°ç»Ÿè®¡ï¼ˆSQL Serverï¼‰
75 |     avg_log_size_mb = Column(BigInteger, nullable=True, comment="å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
   |                                                                                  ^^
76 |     max_log_size_mb = Column(BigInteger, nullable=True, comment="æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
77 |     min_log_size_mb = Column(BigInteger, nullable=True, comment="æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:76:72
   |
74 |     # æ—¥å¿—å¤§å°ç»Ÿè®¡ï¼ˆSQL Serverï¼‰
75 |     avg_log_size_mb = Column(BigInteger, nullable=True, comment="å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
76 |     max_log_size_mb = Column(BigInteger, nullable=True, comment="æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
   |                                                                              ^^
77 |     min_log_size_mb = Column(BigInteger, nullable=True, comment="æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:76:75
   |
74 |     # æ—¥å¿—å¤§å°ç»Ÿè®¡ï¼ˆSQL Serverï¼‰
75 |     avg_log_size_mb = Column(BigInteger, nullable=True, comment="å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
76 |     max_log_size_mb = Column(BigInteger, nullable=True, comment="æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
   |                                                                                  ^^
77 |     min_log_size_mb = Column(BigInteger, nullable=True, comment="æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:77:72
   |
75 |     avg_log_size_mb = Column(BigInteger, nullable=True, comment="å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
76 |     max_log_size_mb = Column(BigInteger, nullable=True, comment="æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
77 |     min_log_size_mb = Column(BigInteger, nullable=True, comment="æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
   |                                                                              ^^
78 |
79 |     # å¢žé‡/å‡é‡ç»Ÿè®¡å­—æ®µ
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:77:75
   |
75 |     avg_log_size_mb = Column(BigInteger, nullable=True, comment="å¹³å‡æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
76 |     max_log_size_mb = Column(BigInteger, nullable=True, comment="æœ€å¤§æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
77 |     min_log_size_mb = Column(BigInteger, nullable=True, comment="æœ€å°æ—¥å¿—å¤§å°ï¼ˆMBï¼‰")
   |                                                                                  ^^
78 |
79 |     # å¢žé‡/å‡é‡ç»Ÿè®¡å­—æ®µ
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:80:83
   |
79 |     # å¢žé‡/å‡é‡ç»Ÿè®¡å­—æ®µ
80 |     size_change_mb = Column(BigInteger, nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                         ^^
81 |     size_change_percent = Column(Numeric(10, 2), nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
82 |     data_size_change_mb = Column(BigInteger, nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_aggregation.py:80:86
   |
79 |     # å¢žé‡/å‡é‡ç»Ÿè®¡å­—æ®µ
80 |     size_change_mb = Column(BigInteger, nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                             ^^
81 |     size_change_percent = Column(Numeric(10, 2), nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
82 |     data_size_change_mb = Column(BigInteger, nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:80:91
   |
79 |     # å¢žé‡/å‡é‡ç»Ÿè®¡å­—æ®µ
80 |     size_change_mb = Column(BigInteger, nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                                       ^^
81 |     size_change_percent = Column(Numeric(10, 2), nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
82 |     data_size_change_mb = Column(BigInteger, nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:81:94
   |
79 |     # å¢žé‡/å‡é‡ç»Ÿè®¡å­—æ®µ
80 |     size_change_mb = Column(BigInteger, nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
81 |     size_change_percent = Column(Numeric(10, 2), nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                                      ^^
82 |     data_size_change_mb = Column(BigInteger, nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
83 |     data_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_aggregation.py:81:96
   |
79 |     # å¢žé‡/å‡é‡ç»Ÿè®¡å­—æ®µ
80 |     size_change_mb = Column(BigInteger, nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
81 |     size_change_percent = Column(Numeric(10, 2), nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                                         ^^
82 |     data_size_change_mb = Column(BigInteger, nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
83 |     data_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:81:101
   |
79 |     # å¢žé‡/å‡é‡ç»Ÿè®¡å­—æ®µ
80 |     size_change_mb = Column(BigInteger, nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
81 |     size_change_percent = Column(Numeric(10, 2), nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                                                   ^^
82 |     data_size_change_mb = Column(BigInteger, nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
83 |     data_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:82:77
   |
80 |     size_change_mb = Column(BigInteger, nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
81 |     size_change_percent = Column(Numeric(10, 2), nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
82 |     data_size_change_mb = Column(BigInteger, nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                    ^^
83 |     data_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
84 |     log_size_change_mb = Column(BigInteger, nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_aggregation.py:82:80
   |
80 |     size_change_mb = Column(BigInteger, nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
81 |     size_change_percent = Column(Numeric(10, 2), nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
82 |     data_size_change_mb = Column(BigInteger, nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                        ^^
83 |     data_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
84 |     log_size_change_mb = Column(BigInteger, nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:82:85
   |
80 |     size_change_mb = Column(BigInteger, nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
81 |     size_change_percent = Column(Numeric(10, 2), nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
82 |     data_size_change_mb = Column(BigInteger, nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                                  ^^
83 |     data_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
84 |     log_size_change_mb = Column(BigInteger, nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:83:88
   |
81 |     size_change_percent = Column(Numeric(10, 2), nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
82 |     data_size_change_mb = Column(BigInteger, nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
83 |     data_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                                 ^^
84 |     log_size_change_mb = Column(BigInteger, nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
85 |     log_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_aggregation.py:83:90
   |
81 |     size_change_percent = Column(Numeric(10, 2), nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
82 |     data_size_change_mb = Column(BigInteger, nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
83 |     data_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                                    ^^
84 |     log_size_change_mb = Column(BigInteger, nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
85 |     log_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:83:95
   |
81 |     size_change_percent = Column(Numeric(10, 2), nullable=False, default=0, comment="æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
82 |     data_size_change_mb = Column(BigInteger, nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
83 |     data_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                                              ^^
84 |     log_size_change_mb = Column(BigInteger, nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
85 |     log_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:84:76
   |
82 |     data_size_change_mb = Column(BigInteger, nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
83 |     data_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
84 |     log_size_change_mb = Column(BigInteger, nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                   ^^
85 |     log_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_aggregation.py:84:79
   |
82 |     data_size_change_mb = Column(BigInteger, nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
83 |     data_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
84 |     log_size_change_mb = Column(BigInteger, nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                       ^^
85 |     log_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:84:84
   |
82 |     data_size_change_mb = Column(BigInteger, nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
83 |     data_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
84 |     log_size_change_mb = Column(BigInteger, nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                                 ^^
85 |     log_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:85:87
   |
83 |     data_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
84 |     log_size_change_mb = Column(BigInteger, nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
85 |     log_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                                ^^
86 |
87 |     # å¢žé•¿çŽ‡å­—æ®µ
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_aggregation.py:85:89
   |
83 |     data_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
84 |     log_size_change_mb = Column(BigInteger, nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
85 |     log_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                                   ^^
86 |
87 |     # å¢žé•¿çŽ‡å­—æ®µ
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:85:94
   |
83 |     data_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ•°æ®å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
84 |     log_size_change_mb = Column(BigInteger, nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–é‡ï¼ˆMBï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
85 |     log_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ—¥å¿—å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                                             ^^
86 |
87 |     # å¢žé•¿çŽ‡å­—æ®µ
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:88:81
   |
87 |     # å¢žé•¿çŽ‡å­—æ®µ
88 |     growth_rate = Column(Numeric(10, 2), nullable=False, default=0, comment="å¢žé•¿çŽ‡ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                    ^^
89 |
90 |     # æ—¶é—´å­—æ®µ
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_aggregation.py:88:83
   |
87 |     # å¢žé•¿çŽ‡å­—æ®µ
88 |     growth_rate = Column(Numeric(10, 2), nullable=False, default=0, comment="å¢žé•¿çŽ‡ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                       ^^
89 |
90 |     # æ—¶é—´å­—æ®µ
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_aggregation.py:88:88
   |
87 |     # å¢žé•¿çŽ‡å­—æ®µ
88 |     growth_rate = Column(Numeric(10, 2), nullable=False, default=0, comment="å¢žé•¿çŽ‡ï¼ˆ%ï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰")
   |                                                                                                 ^^
89 |
90 |     # æ—¶é—´å­—æ®µ
   |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/models/database_size_aggregation.py:98:13
    |
 96 |     __table_args__ = (
 97 |         # åˆ†åŒºè¡¨çº¦æŸ - ä¸»é”®å¿…é¡»åŒ…å«åˆ†åŒºé”®
 98 |         # æ³¨æ„ï¼šåœ¨åˆ†åŒºè¡¨ä¸­ï¼Œä¸»é”®çº¦æŸä¼šè‡ªåŠ¨åŒ…å«åˆ†åŒºé”®
    |               ^^
 99 |         # æŸ¥è¯¢ä¼˜åŒ–ç´¢å¼•
100 |         Index(
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/database_size_aggregation.py:98:19
    |
 96 |     __table_args__ = (
 97 |         # åˆ†åŒºè¡¨çº¦æŸ - ä¸»é”®å¿…é¡»åŒ…å«åˆ†åŒºé”®
 98 |         # æ³¨æ„ï¼šåœ¨åˆ†åŒºè¡¨ä¸­ï¼Œä¸»é”®çº¦æŸä¼šè‡ªåŠ¨åŒ…å«åˆ†åŒºé”®
    |                           ^^
 99 |         # æŸ¥è¯¢ä¼˜åŒ–ç´¢å¼•
100 |         Index(
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/models/database_size_aggregation.py:111:15
    |
109 |             "period_start",
110 |         ),
111 |         # å”¯ä¸€çº¦æŸï¼ˆåœ¨åˆ†åŒºè¡¨ä¸­ï¼Œå”¯ä¸€çº¦æŸä¼šè‡ªåŠ¨åŒ…å«åˆ†åŒºé”®ï¼‰
    |                   ^^
112 |         UniqueConstraint(
113 |             "instance_id",
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/database_size_aggregation.py:111:21
    |
109 |             "period_start",
110 |         ),
111 |         # å”¯ä¸€çº¦æŸï¼ˆåœ¨åˆ†åŒºè¡¨ä¸­ï¼Œå”¯ä¸€çº¦æŸä¼šè‡ªåŠ¨åŒ…å«åˆ†åŒºé”®ï¼‰
    |                               ^^
112 |         UniqueConstraint(
113 |             "instance_id",
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/models/database_size_aggregation.py:111:34
    |
109 |             "period_start",
110 |         ),
111 |         # å”¯ä¸€çº¦æŸï¼ˆåœ¨åˆ†åŒºè¡¨ä¸­ï¼Œå”¯ä¸€çº¦æŸä¼šè‡ªåŠ¨åŒ…å«åˆ†åŒºé”®ï¼‰
    |                                                         ^^
112 |         UniqueConstraint(
113 |             "instance_id",
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/database_size_aggregation.py:136:41
    |
134 |         """åºåˆ—åŒ–èšåˆè®°å½•ã€‚.
135 |
136 |         å°†æ—¥æœŸä¸Ž Decimal ç­‰å­—æ®µè½¬æ¢ä¸º JSON å‹å¥½çš„åŸºç¡€ç±»åž‹ï¼Œä¾¿äºŽå“åº”ä½“æˆ–æ—¥å¿—è¾“å‡ºã€‚
    |                                                          ^^
137 |
138 |         Returns:
    |

D205 1 blank line required between summary line and description
 --> app/models/database_size_stat.py:1:1
  |
1 | / """æ•°æ®åº“å¤§å°ç»Ÿè®¡æ¨¡åž‹
2 | | å­˜å‚¨æ¯ä¸ªæ•°æ®åº“åœ¨ç‰¹å®šæ—¶é—´ç‚¹çš„å¤§å°ç»Ÿè®¡ä¿¡æ¯
3 | | æ”¯æŒ PostgreSQL åˆ†åŒºè¡¨ï¼ŒæŒ‰æ—¥æœŸåˆ†åŒº.
4 | | """
  | |___^
5 |
6 |   from sqlalchemy import (
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/models/database_size_stat.py:3:18
  |
1 | """æ•°æ®åº“å¤§å°ç»Ÿè®¡æ¨¡åž‹
2 | å­˜å‚¨æ¯ä¸ªæ•°æ®åº“åœ¨ç‰¹å®šæ—¶é—´ç‚¹çš„å¤§å°ç»Ÿè®¡ä¿¡æ¯
3 | æ”¯æŒ PostgreSQL åˆ†åŒºè¡¨ï¼ŒæŒ‰æ—¥æœŸåˆ†åŒº.
  |                       ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_stat.py:27:22
   |
26 |     å­˜å‚¨æ¯ä¸ªæ•°æ®åº“åœ¨ç‰¹å®šæ—¶é—´ç‚¹çš„å¤§å°ç»Ÿè®¡ä¿¡æ¯ã€‚
27 |     æ”¯æŒ PostgreSQL åˆ†åŒºè¡¨ï¼ŒæŒ‰æ—¥æœŸï¼ˆcollected_dateï¼‰åˆ†åŒºã€‚
   |                           ^^
28 |
29 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_stat.py:27:26
   |
26 |     å­˜å‚¨æ¯ä¸ªæ•°æ®åº“åœ¨ç‰¹å®šæ—¶é—´ç‚¹çš„å¤§å°ç»Ÿè®¡ä¿¡æ¯ã€‚
27 |     æ”¯æŒ PostgreSQL åˆ†åŒºè¡¨ï¼ŒæŒ‰æ—¥æœŸï¼ˆcollected_dateï¼‰åˆ†åŒºã€‚
   |                                   ^^
28 |
29 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_stat.py:27:41
   |
26 |     å­˜å‚¨æ¯ä¸ªæ•°æ®åº“åœ¨ç‰¹å®šæ—¶é—´ç‚¹çš„å¤§å°ç»Ÿè®¡ä¿¡æ¯ã€‚
27 |     æ”¯æŒ PostgreSQL åˆ†åŒºè¡¨ï¼ŒæŒ‰æ—¥æœŸï¼ˆcollected_dateï¼‰åˆ†åŒºã€‚
   |                                                   ^^
28 |
29 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_stat.py:30:18
   |
29 |     Attributes:
30 |         id: ä¸»é”® IDï¼ˆBigIntegerï¼‰ã€‚
   |                    ^^
31 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
32 |         database_name: æ•°æ®åº“åç§°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_stat.py:30:29
   |
29 |     Attributes:
30 |         id: ä¸»é”® IDï¼ˆBigIntegerï¼‰ã€‚
   |                                ^^
31 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
32 |         database_name: æ•°æ®åº“åç§°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_stat.py:33:24
   |
31 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
32 |         database_name: æ•°æ®åº“åç§°ã€‚
33 |         size_mb: æ•°æ®åº“æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
   |                              ^^
34 |         data_size_mb: æ•°æ®éƒ¨åˆ†å¤§å°ï¼ˆMBï¼Œå¦‚æžœå¯èŽ·å–ï¼‰ã€‚
35 |         log_size_mb: æ—¥å¿—éƒ¨åˆ†å¤§å°ï¼ˆMBï¼ŒSQL Server ç‰¹æœ‰ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_stat.py:33:27
   |
31 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
32 |         database_name: æ•°æ®åº“åç§°ã€‚
33 |         size_mb: æ•°æ®åº“æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
   |                                  ^^
34 |         data_size_mb: æ•°æ®éƒ¨åˆ†å¤§å°ï¼ˆMBï¼Œå¦‚æžœå¯èŽ·å–ï¼‰ã€‚
35 |         log_size_mb: æ—¥å¿—éƒ¨åˆ†å¤§å°ï¼ˆMBï¼ŒSQL Server ç‰¹æœ‰ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_stat.py:34:29
   |
32 |         database_name: æ•°æ®åº“åç§°ã€‚
33 |         size_mb: æ•°æ®åº“æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
34 |         data_size_mb: æ•°æ®éƒ¨åˆ†å¤§å°ï¼ˆMBï¼Œå¦‚æžœå¯èŽ·å–ï¼‰ã€‚
   |                                   ^^
35 |         log_size_mb: æ—¥å¿—éƒ¨åˆ†å¤§å°ï¼ˆMBï¼ŒSQL Server ç‰¹æœ‰ï¼‰ã€‚
36 |         collected_date: é‡‡é›†æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_stat.py:34:32
   |
32 |         database_name: æ•°æ®åº“åç§°ã€‚
33 |         size_mb: æ•°æ®åº“æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
34 |         data_size_mb: æ•°æ®éƒ¨åˆ†å¤§å°ï¼ˆMBï¼Œå¦‚æžœå¯èŽ·å–ï¼‰ã€‚
   |                                       ^^
35 |         log_size_mb: æ—¥å¿—éƒ¨åˆ†å¤§å°ï¼ˆMBï¼ŒSQL Server ç‰¹æœ‰ï¼‰ã€‚
36 |         collected_date: é‡‡é›†æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_stat.py:34:38
   |
32 |         database_name: æ•°æ®åº“åç§°ã€‚
33 |         size_mb: æ•°æ®åº“æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
34 |         data_size_mb: æ•°æ®éƒ¨åˆ†å¤§å°ï¼ˆMBï¼Œå¦‚æžœå¯èŽ·å–ï¼‰ã€‚
   |                                                   ^^
35 |         log_size_mb: æ—¥å¿—éƒ¨åˆ†å¤§å°ï¼ˆMBï¼ŒSQL Server ç‰¹æœ‰ï¼‰ã€‚
36 |         collected_date: é‡‡é›†æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_stat.py:35:28
   |
33 |         size_mb: æ•°æ®åº“æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
34 |         data_size_mb: æ•°æ®éƒ¨åˆ†å¤§å°ï¼ˆMBï¼Œå¦‚æžœå¯èŽ·å–ï¼‰ã€‚
35 |         log_size_mb: æ—¥å¿—éƒ¨åˆ†å¤§å°ï¼ˆMBï¼ŒSQL Server ç‰¹æœ‰ï¼‰ã€‚
   |                                  ^^
36 |         collected_date: é‡‡é›†æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
37 |         collected_at: é‡‡é›†æ—¶é—´æˆ³ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_stat.py:35:31
   |
33 |         size_mb: æ•°æ®åº“æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
34 |         data_size_mb: æ•°æ®éƒ¨åˆ†å¤§å°ï¼ˆMBï¼Œå¦‚æžœå¯èŽ·å–ï¼‰ã€‚
35 |         log_size_mb: æ—¥å¿—éƒ¨åˆ†å¤§å°ï¼ˆMBï¼ŒSQL Server ç‰¹æœ‰ï¼‰ã€‚
   |                                      ^^
36 |         collected_date: é‡‡é›†æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
37 |         collected_at: é‡‡é›†æ—¶é—´æˆ³ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_stat.py:35:45
   |
33 |         size_mb: æ•°æ®åº“æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
34 |         data_size_mb: æ•°æ®éƒ¨åˆ†å¤§å°ï¼ˆMBï¼Œå¦‚æžœå¯èŽ·å–ï¼‰ã€‚
35 |         log_size_mb: æ—¥å¿—éƒ¨åˆ†å¤§å°ï¼ˆMBï¼ŒSQL Server ç‰¹æœ‰ï¼‰ã€‚
   |                                                       ^^
36 |         collected_date: é‡‡é›†æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
37 |         collected_at: é‡‡é›†æ—¶é—´æˆ³ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_stat.py:36:29
   |
34 |         data_size_mb: æ•°æ®éƒ¨åˆ†å¤§å°ï¼ˆMBï¼Œå¦‚æžœå¯èŽ·å–ï¼‰ã€‚
35 |         log_size_mb: æ—¥å¿—éƒ¨åˆ†å¤§å°ï¼ˆMBï¼ŒSQL Server ç‰¹æœ‰ï¼‰ã€‚
36 |         collected_date: é‡‡é›†æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
   |                                 ^^
37 |         collected_at: é‡‡é›†æ—¶é—´æˆ³ã€‚
38 |         created_at: è®°å½•åˆ›å»ºæ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_stat.py:36:34
   |
34 |         data_size_mb: æ•°æ®éƒ¨åˆ†å¤§å°ï¼ˆMBï¼Œå¦‚æžœå¯èŽ·å–ï¼‰ã€‚
35 |         log_size_mb: æ—¥å¿—éƒ¨åˆ†å¤§å°ï¼ˆMBï¼ŒSQL Server ç‰¹æœ‰ï¼‰ã€‚
36 |         collected_date: é‡‡é›†æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
   |                                           ^^
37 |         collected_at: é‡‡é›†æ—¶é—´æˆ³ã€‚
38 |         created_at: è®°å½•åˆ›å»ºæ—¶é—´ã€‚
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_stat.py:49:65
   |
47 |     instance_id = Column(Integer, ForeignKey("instances.id"), nullable=False)
48 |     database_name = Column(String(255), nullable=False, comment="æ•°æ®åº“åç§°")
49 |     size_mb = Column(BigInteger, nullable=False, comment="æ•°æ®åº“æ€»å¤§å°ï¼ˆMBï¼‰")
   |                                                                       ^^
50 |     data_size_mb = Column(
51 |         BigInteger, nullable=True, comment="æ•°æ®éƒ¨åˆ†å¤§å°ï¼ˆMBï¼‰ï¼Œå¦‚æžœå¯èŽ·å–",
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_stat.py:49:68
   |
47 |     instance_id = Column(Integer, ForeignKey("instances.id"), nullable=False)
48 |     database_name = Column(String(255), nullable=False, comment="æ•°æ®åº“åç§°")
49 |     size_mb = Column(BigInteger, nullable=False, comment="æ•°æ®åº“æ€»å¤§å°ï¼ˆMBï¼‰")
   |                                                                           ^^
50 |     data_size_mb = Column(
51 |         BigInteger, nullable=True, comment="æ•°æ®éƒ¨åˆ†å¤§å°ï¼ˆMBï¼‰ï¼Œå¦‚æžœå¯èŽ·å–",
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_stat.py:51:51
   |
49 |     size_mb = Column(BigInteger, nullable=False, comment="æ•°æ®åº“æ€»å¤§å°ï¼ˆMBï¼‰")
50 |     data_size_mb = Column(
51 |         BigInteger, nullable=True, comment="æ•°æ®éƒ¨åˆ†å¤§å°ï¼ˆMBï¼‰ï¼Œå¦‚æžœå¯èŽ·å–",
   |                                                         ^^
52 |     )
53 |     log_size_mb = Column(
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_stat.py:51:54
   |
49 |     size_mb = Column(BigInteger, nullable=False, comment="æ•°æ®åº“æ€»å¤§å°ï¼ˆMBï¼‰")
50 |     data_size_mb = Column(
51 |         BigInteger, nullable=True, comment="æ•°æ®éƒ¨åˆ†å¤§å°ï¼ˆMBï¼‰ï¼Œå¦‚æžœå¯èŽ·å–",
   |                                                             ^^
52 |     )
53 |     log_size_mb = Column(
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_stat.py:51:55
   |
49 |     size_mb = Column(BigInteger, nullable=False, comment="æ•°æ®åº“æ€»å¤§å°ï¼ˆMBï¼‰")
50 |     data_size_mb = Column(
51 |         BigInteger, nullable=True, comment="æ•°æ®éƒ¨åˆ†å¤§å°ï¼ˆMBï¼‰ï¼Œå¦‚æžœå¯èŽ·å–",
   |                                                               ^^
52 |     )
53 |     log_size_mb = Column(
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_stat.py:54:51
   |
52 |     )
53 |     log_size_mb = Column(
54 |         BigInteger, nullable=True, comment="æ—¥å¿—éƒ¨åˆ†å¤§å°ï¼ˆMBï¼‰ï¼Œå¦‚æžœå¯èŽ·å–ï¼ˆSQL Serverï¼‰",
   |                                                         ^^
55 |     )
56 |     collected_date = Column(Date, nullable=False, comment="é‡‡é›†æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_stat.py:54:54
   |
52 |     )
53 |     log_size_mb = Column(
54 |         BigInteger, nullable=True, comment="æ—¥å¿—éƒ¨åˆ†å¤§å°ï¼ˆMBï¼‰ï¼Œå¦‚æžœå¯èŽ·å–ï¼ˆSQL Serverï¼‰",
   |                                                             ^^
55 |     )
56 |     collected_date = Column(Date, nullable=False, comment="é‡‡é›†æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰")
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_size_stat.py:54:55
   |
52 |     )
53 |     log_size_mb = Column(
54 |         BigInteger, nullable=True, comment="æ—¥å¿—éƒ¨åˆ†å¤§å°ï¼ˆMBï¼‰ï¼Œå¦‚æžœå¯èŽ·å–ï¼ˆSQL Serverï¼‰",
   |                                                               ^^
55 |     )
56 |     collected_date = Column(Date, nullable=False, comment="é‡‡é›†æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_stat.py:54:61
   |
52 |     )
53 |     log_size_mb = Column(
54 |         BigInteger, nullable=True, comment="æ—¥å¿—éƒ¨åˆ†å¤§å°ï¼ˆMBï¼‰ï¼Œå¦‚æžœå¯èŽ·å–ï¼ˆSQL Serverï¼‰",
   |                                                                           ^^
55 |     )
56 |     collected_date = Column(Date, nullable=False, comment="é‡‡é›†æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_stat.py:54:72
   |
52 |     )
53 |     log_size_mb = Column(
54 |         BigInteger, nullable=True, comment="æ—¥å¿—éƒ¨åˆ†å¤§å°ï¼ˆMBï¼‰ï¼Œå¦‚æžœå¯èŽ·å–ï¼ˆSQL Serverï¼‰",
   |                                                                                       ^^
55 |     )
56 |     collected_date = Column(Date, nullable=False, comment="é‡‡é›†æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_size_stat.py:56:64
   |
54 |         BigInteger, nullable=True, comment="æ—¥å¿—éƒ¨åˆ†å¤§å°ï¼ˆMBï¼‰ï¼Œå¦‚æžœå¯èŽ·å–ï¼ˆSQL Serverï¼‰",
55 |     )
56 |     collected_date = Column(Date, nullable=False, comment="é‡‡é›†æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰")
   |                                                                    ^^
57 |     collected_at = Column(
58 |         DateTime(timezone=True), nullable=False, default=time_utils.now, comment="é‡‡é›†æ—¶é—´æˆ³",
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_size_stat.py:56:69
   |
54 |         BigInteger, nullable=True, comment="æ—¥å¿—éƒ¨åˆ†å¤§å°ï¼ˆMBï¼‰ï¼Œå¦‚æžœå¯èŽ·å–ï¼ˆSQL Serverï¼‰",
55 |     )
56 |     collected_date = Column(Date, nullable=False, comment="é‡‡é›†æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰")
   |                                                                              ^^
57 |     collected_at = Column(
58 |         DateTime(timezone=True), nullable=False, default=time_utils.now, comment="é‡‡é›†æ—¶é—´æˆ³",
   |

E501 Line too long (121 > 120)
  --> app/models/database_size_stat.py:64:115
   |
62 |     )
63 |     updated_at = Column(
64 |         DateTime(timezone=True), nullable=False, default=time_utils.now, onupdate=time_utils.now, comment="è®°å½•æ›´æ–°æ—¶é—´",
   |                                                                                                                         ^
65 |     )
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/database_size_stat.py:105:28
    |
103 |         """åºåˆ—åŒ–ç»Ÿè®¡è®°å½•ã€‚.
104 |
105 |         å°†æ—¥æœŸä¸Žæ—¶é—´å­—æ®µè½¬æ¢ä¸º ISO å­—ç¬¦ä¸²ï¼Œä»¥ä¾¿ API å“åº”æˆ–ä»»åŠ¡æ—¥å¿—æ¶ˆè´¹ã€‚
    |                                          ^^
106 |
107 |         Returns:
    |

D205 1 blank line required between summary line and description
 --> app/models/database_type_config.py:1:1
  |
1 | / """é²¸è½ - æ•°æ®åº“ç±»åž‹é…ç½®æ¨¡åž‹
2 | | ç®¡ç†æ•°æ®åº“ç±»åž‹çš„é…ç½®ä¿¡æ¯.
3 | | """
  | |___^
4 |
5 |   import json
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_type_config.py:15:17
   |
13 |     """æ•°æ®åº“ç±»åž‹é…ç½®æ¨¡åž‹ã€‚.
14 |
15 |     ç®¡ç†æ•°æ®åº“ç±»åž‹çš„é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¿žæŽ¥å‚æ•°ã€æ˜¾ç¤ºæ ·å¼ã€ç‰¹æ€§åˆ—è¡¨ç­‰ã€‚
   |                             ^^
16 |     æ”¯æŒç³»ç»Ÿå†…ç½®ç±»åž‹å’Œè‡ªå®šä¹‰ç±»åž‹ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_type_config.py:20:22
   |
18 |     Attributes:
19 |         id: ä¸»é”® IDã€‚
20 |         name: æ•°æ®åº“ç±»åž‹åç§°ï¼ˆå”¯ä¸€ï¼‰ã€‚
   |                             ^^
21 |         display_name: æ˜¾ç¤ºåç§°ã€‚
22 |         driver: é©±åŠ¨åç§°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_type_config.py:20:25
   |
18 |     Attributes:
19 |         id: ä¸»é”® IDã€‚
20 |         name: æ•°æ®åº“ç±»åž‹åç§°ï¼ˆå”¯ä¸€ï¼‰ã€‚
   |                                   ^^
21 |         display_name: æ˜¾ç¤ºåç§°ã€‚
22 |         driver: é©±åŠ¨åç§°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_type_config.py:25:35
   |
23 |         default_port: é»˜è®¤ç«¯å£ã€‚
24 |         default_schema: é»˜è®¤ Schemaã€‚
25 |         connection_timeout: è¿žæŽ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ã€‚
   |                                         ^^
26 |         description: æè¿°ä¿¡æ¯ã€‚
27 |         icon: å›¾æ ‡ç±»åï¼ˆFont Awesomeï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_type_config.py:25:37
   |
23 |         default_port: é»˜è®¤ç«¯å£ã€‚
24 |         default_schema: é»˜è®¤ Schemaã€‚
25 |         connection_timeout: è¿žæŽ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ã€‚
   |                                             ^^
26 |         description: æè¿°ä¿¡æ¯ã€‚
27 |         icon: å›¾æ ‡ç±»åï¼ˆFont Awesomeï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_type_config.py:27:19
   |
25 |         connection_timeout: è¿žæŽ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ã€‚
26 |         description: æè¿°ä¿¡æ¯ã€‚
27 |         icon: å›¾æ ‡ç±»åï¼ˆFont Awesomeï¼‰ã€‚
   |                       ^^
28 |         color: ä¸»é¢˜é¢œè‰²ã€‚
29 |         features: ç‰¹æ€§åˆ—è¡¨ï¼ˆJSON å­—ç¬¦ä¸²ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_type_config.py:27:32
   |
25 |         connection_timeout: è¿žæŽ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ã€‚
26 |         description: æè¿°ä¿¡æ¯ã€‚
27 |         icon: å›¾æ ‡ç±»åï¼ˆFont Awesomeï¼‰ã€‚
   |                                     ^^
28 |         color: ä¸»é¢˜é¢œè‰²ã€‚
29 |         features: ç‰¹æ€§åˆ—è¡¨ï¼ˆJSON å­—ç¬¦ä¸²ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/database_type_config.py:29:23
   |
27 |         icon: å›¾æ ‡ç±»åï¼ˆFont Awesomeï¼‰ã€‚
28 |         color: ä¸»é¢˜é¢œè‰²ã€‚
29 |         features: ç‰¹æ€§åˆ—è¡¨ï¼ˆJSON å­—ç¬¦ä¸²ï¼‰ã€‚
   |                           ^^
30 |         is_active: æ˜¯å¦å¯ç”¨ã€‚
31 |         is_system: æ˜¯å¦ç³»ç»Ÿå†…ç½®ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/database_type_config.py:29:32
   |
27 |         icon: å›¾æ ‡ç±»åï¼ˆFont Awesomeï¼‰ã€‚
28 |         color: ä¸»é¢˜é¢œè‰²ã€‚
29 |         features: ç‰¹æ€§åˆ—è¡¨ï¼ˆJSON å­—ç¬¦ä¸²ï¼‰ã€‚
   |                                        ^^
30 |         is_active: æ˜¯å¦å¯ç”¨ã€‚
31 |         is_system: æ˜¯å¦ç³»ç»Ÿå†…ç½®ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_type_config.py:66:26
   |
65 |         Returns:
66 |             str: å«åç§°çš„å¯è¯»æ–‡æœ¬ï¼Œä¾¿äºŽæ—¥å¿—æŽ’æŸ¥ã€‚
   |                                  ^^
67 |
68 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/database_type_config.py:76:32
   |
75 |         Returns:
76 |             list[str]: è§£ç åŽçš„ç‰¹æ€§é›†åˆï¼Œè§£æžå¤±è´¥æ—¶è¿”å›žç©ºåˆ—è¡¨ã€‚
   |                                        ^^
77 |
78 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/database_type_config.py:143:41
    |
142 |         Returns:
143 |             DatabaseTypeConfig: åŒ¹é…åˆ°çš„é…ç½®å®žä¾‹ï¼Œè‹¥ä¸å­˜åœ¨åˆ™è¿”å›ž Noneã€‚
    |                                                 ^^
144 |
145 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/instance.py:10:17
   |
 8 |     """æ•°æ®åº“å®žä¾‹æ¨¡åž‹ã€‚.
 9 |
10 |     å­˜å‚¨æ•°æ®åº“å®žä¾‹çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¿žæŽ¥é…ç½®ã€ç‰ˆæœ¬ä¿¡æ¯ã€
   |                             ^^
11 |     å…³è”çš„å‡­æ®å’Œæ ‡ç­¾ç­‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/instance.py:15:19
   |
13 |     Attributes:
14 |         id: å®žä¾‹ä¸»é”®ã€‚
15 |         name: å®žä¾‹åç§°ï¼Œå”¯ä¸€ã€‚
   |                       ^^
16 |         db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysqlã€postgresqlã€sqlserverã€oracleç­‰ï¼‰ã€‚
17 |         host: ä¸»æœºåœ°å€ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance.py:16:23
   |
14 |         id: å®žä¾‹ä¸»é”®ã€‚
15 |         name: å®žä¾‹åç§°ï¼Œå”¯ä¸€ã€‚
16 |         db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysqlã€postgresqlã€sqlserverã€oracleç­‰ï¼‰ã€‚
   |                            ^^
17 |         host: ä¸»æœºåœ°å€ã€‚
18 |         port: ç«¯å£å·ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance.py:16:58
   |
14 |         id: å®žä¾‹ä¸»é”®ã€‚
15 |         name: å®žä¾‹åç§°ï¼Œå”¯ä¸€ã€‚
16 |         db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysqlã€postgresqlã€sqlserverã€oracleç­‰ï¼‰ã€‚
   |                                                                    ^^
17 |         host: ä¸»æœºåœ°å€ã€‚
18 |         port: ç«¯å£å·ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/instance.py:19:29
   |
17 |         host: ä¸»æœºåœ°å€ã€‚
18 |         port: ç«¯å£å·ã€‚
19 |         database_name: æ•°æ®åº“åç§°ï¼Œå¯é€‰ã€‚
   |                                  ^^
20 |         database_version: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²ã€‚
21 |         main_version: ä¸»ç‰ˆæœ¬å·ï¼ˆå¦‚ 8.0ã€13.4ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance.py:21:27
   |
19 |         database_name: æ•°æ®åº“åç§°ï¼Œå¯é€‰ã€‚
20 |         database_version: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²ã€‚
21 |         main_version: ä¸»ç‰ˆæœ¬å·ï¼ˆå¦‚ 8.0ã€13.4ï¼‰ã€‚
   |                               ^^
22 |         detailed_version: è¯¦ç»†ç‰ˆæœ¬å·ï¼ˆå¦‚ 8.0.32ã€13.4ï¼‰ã€‚
23 |         sync_count: åŒæ­¥æ¬¡æ•°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance.py:21:38
   |
19 |         database_name: æ•°æ®åº“åç§°ï¼Œå¯é€‰ã€‚
20 |         database_version: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²ã€‚
21 |         main_version: ä¸»ç‰ˆæœ¬å·ï¼ˆå¦‚ 8.0ã€13.4ï¼‰ã€‚
   |                                             ^^
22 |         detailed_version: è¯¦ç»†ç‰ˆæœ¬å·ï¼ˆå¦‚ 8.0.32ã€13.4ï¼‰ã€‚
23 |         sync_count: åŒæ­¥æ¬¡æ•°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance.py:22:32
   |
20 |         database_version: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²ã€‚
21 |         main_version: ä¸»ç‰ˆæœ¬å·ï¼ˆå¦‚ 8.0ã€13.4ï¼‰ã€‚
22 |         detailed_version: è¯¦ç»†ç‰ˆæœ¬å·ï¼ˆå¦‚ 8.0.32ã€13.4ï¼‰ã€‚
   |                                     ^^
23 |         sync_count: åŒæ­¥æ¬¡æ•°ã€‚
24 |         credential_id: å…³è”çš„å‡­æ®IDã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance.py:22:46
   |
20 |         database_version: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²ã€‚
21 |         main_version: ä¸»ç‰ˆæœ¬å·ï¼ˆå¦‚ 8.0ã€13.4ï¼‰ã€‚
22 |         detailed_version: è¯¦ç»†ç‰ˆæœ¬å·ï¼ˆå¦‚ 8.0.32ã€13.4ï¼‰ã€‚
   |                                                      ^^
23 |         sync_count: åŒæ­¥æ¬¡æ•°ã€‚
24 |         credential_id: å…³è”çš„å‡­æ®IDã€‚
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/instance.py:92:20
   |
90 |         cascade="all, delete-orphan",
91 |     )
92 |     # accountså…³ç³»å·²ç§»é™¤ï¼Œå› ä¸ºAccountæ¨¡åž‹å·²åºŸå¼ƒï¼Œä½¿ç”¨AccountPermission
   |                         ^^
93 |     # sync_dataå…³ç³»å·²ç§»é™¤ï¼Œå› ä¸ºSyncDataè¡¨å·²åˆ é™¤
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/instance.py:92:35
   |
90 |         cascade="all, delete-orphan",
91 |     )
92 |     # accountså…³ç³»å·²ç§»é™¤ï¼Œå› ä¸ºAccountæ¨¡åž‹å·²åºŸå¼ƒï¼Œä½¿ç”¨AccountPermission
   |                                                ^^
93 |     # sync_dataå…³ç³»å·²ç§»é™¤ï¼Œå› ä¸ºSyncDataè¡¨å·²åˆ é™¤
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/instance.py:93:21
   |
91 |     )
92 |     # accountså…³ç³»å·²ç§»é™¤ï¼Œå› ä¸ºAccountæ¨¡åž‹å·²åºŸå¼ƒï¼Œä½¿ç”¨AccountPermission
93 |     # sync_dataå…³ç³»å·²ç§»é™¤ï¼Œå› ä¸ºSyncDataè¡¨å·²åˆ é™¤
   |                          ^^
94 |
95 |     def __init__(
   |

PLR0913 Too many arguments in function definition (9 > 5)
  --> app/models/instance.py:95:9
   |
93 |     # sync_dataå…³ç³»å·²ç§»é™¤ï¼Œå› ä¸ºSyncDataè¡¨å·²åˆ é™¤
94 |
95 |     def __init__(
   |         ^^^^^^^^
96 |         self,
97 |         name: str,
   |

D417 Missing argument description in the docstring for `__init__`: `is_active`
  --> app/models/instance.py:95:9
   |
93 |     # sync_dataå…³ç³»å·²ç§»é™¤ï¼Œå› ä¸ºSyncDataè¡¨å·²åˆ é™¤
94 |
95 |     def __init__(
   |         ^^^^^^^^
96 |         self,
97 |         name: str,
   |

ARG002 Unused method argument: `tags`
   --> app/models/instance.py:104:9
    |
102 |         credential_id: int | None = None,
103 |         description: str | None = None,
104 |         tags: list | None = None,
    |         ^^^^
105 |         is_active: bool = True,
106 |     ) -> None:
    |

FBT001 Boolean-typed positional argument in function definition
   --> app/models/instance.py:105:9
    |
103 |         description: str | None = None,
104 |         tags: list | None = None,
105 |         is_active: bool = True,
    |         ^^^^^^^^^
106 |     ) -> None:
107 |         """åˆå§‹åŒ–å®žä¾‹ã€‚.
    |

FBT002 Boolean default positional argument in function definition
   --> app/models/instance.py:105:9
    |
103 |         description: str | None = None,
104 |         tags: list | None = None,
105 |         is_active: bool = True,
    |         ^^^^^^^^^
106 |     ) -> None:
107 |         """åˆå§‹åŒ–å®žä¾‹ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/instance.py:110:23
    |
109 |         Args:
110 |             name: å®žä¾‹åç§°ï¼Œå¿…é¡»å”¯ä¸€ã€‚
    |                           ^^
111 |             db_type: æ•°æ®åº“ç±»åž‹ã€‚
112 |             host: ä¸»æœºåœ°å€ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/instance.py:114:33
    |
112 |             host: ä¸»æœºåœ°å€ã€‚
113 |             port: ç«¯å£å·ã€‚
114 |             database_name: æ•°æ®åº“åç§°ï¼Œå¯é€‰ã€‚
    |                                      ^^
115 |             credential_id: å‡­æ®IDï¼Œå¯é€‰ã€‚
116 |             description: æè¿°ä¿¡æ¯ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/instance.py:115:32
    |
113 |             port: ç«¯å£å·ã€‚
114 |             database_name: æ•°æ®åº“åç§°ï¼Œå¯é€‰ã€‚
115 |             credential_id: å‡­æ®IDï¼Œå¯é€‰ã€‚
    |                                  ^^
116 |             description: æè¿°ä¿¡æ¯ï¼Œå¯é€‰ã€‚
117 |             tags: æ ‡ç­¾åˆ—è¡¨ï¼Œå¯é€‰ï¼ˆæ ‡ç­¾å°†åœ¨åˆ›å»ºåŽé€šè¿‡å…³ç³»æ·»åŠ ï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/instance.py:116:30
    |
114 |             database_name: æ•°æ®åº“åç§°ï¼Œå¯é€‰ã€‚
115 |             credential_id: å‡­æ®IDï¼Œå¯é€‰ã€‚
116 |             description: æè¿°ä¿¡æ¯ï¼Œå¯é€‰ã€‚
    |                                  ^^
117 |             tags: æ ‡ç­¾åˆ—è¡¨ï¼Œå¯é€‰ï¼ˆæ ‡ç­¾å°†åœ¨åˆ›å»ºåŽé€šè¿‡å…³ç³»æ·»åŠ ï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/instance.py:117:23
    |
115 |             credential_id: å‡­æ®IDï¼Œå¯é€‰ã€‚
116 |             description: æè¿°ä¿¡æ¯ï¼Œå¯é€‰ã€‚
117 |             tags: æ ‡ç­¾åˆ—è¡¨ï¼Œå¯é€‰ï¼ˆæ ‡ç­¾å°†åœ¨åˆ›å»ºåŽé€šè¿‡å…³ç³»æ·»åŠ ï¼‰ã€‚
    |                           ^^
118 |
119 |         """
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/models/instance.py:117:26
    |
115 |             credential_id: å‡­æ®IDï¼Œå¯é€‰ã€‚
116 |             description: æè¿°ä¿¡æ¯ï¼Œå¯é€‰ã€‚
117 |             tags: æ ‡ç­¾åˆ—è¡¨ï¼Œå¯é€‰ï¼ˆæ ‡ç­¾å°†åœ¨åˆ›å»ºåŽé€šè¿‡å…³ç³»æ·»åŠ ï¼‰ã€‚
    |                                 ^^
118 |
119 |         """
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/models/instance.py:117:40
    |
115 |             credential_id: å‡­æ®IDï¼Œå¯é€‰ã€‚
116 |             description: æè¿°ä¿¡æ¯ï¼Œå¯é€‰ã€‚
117 |             tags: æ ‡ç­¾åˆ—è¡¨ï¼Œå¯é€‰ï¼ˆæ ‡ç­¾å°†åœ¨åˆ›å»ºåŽé€šè¿‡å…³ç³»æ·»åŠ ï¼‰ã€‚
    |                                                             ^^
118 |
119 |         """
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/instance.py:128:28
    |
126 |         self.description = description
127 |         self.is_active = is_active
128 |         # environment å­—æ®µå·²ç§»é™¤ï¼Œä½¿ç”¨æ ‡ç­¾ç³»ç»Ÿæ›¿ä»£
    |                                 ^^
129 |         # æ ‡ç­¾å°†åœ¨åˆ›å»ºåŽé€šè¿‡å…³ç³»æ·»åŠ 
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/instance.py:135:39
    |
134 |         Args:
135 |             include_password: æ˜¯å¦åŒ…å«å‡­æ®å¯†ç ï¼Œé»˜è®¤ä¸º Falseï¼ˆå®‰å…¨è€ƒè™‘ï¼‰ã€‚
    |                                               ^^
136 |
137 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/models/instance.py:135:49
    |
134 |         Args:
135 |             include_password: æ˜¯å¦åŒ…å«å‡­æ®å¯†ç ï¼Œé»˜è®¤ä¸º Falseï¼ˆå®‰å…¨è€ƒè™‘ï¼‰ã€‚
    |                                                             ^^
136 |
137 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/models/instance.py:135:54
    |
134 |         Args:
135 |             include_password: æ˜¯å¦åŒ…å«å‡­æ®å¯†ç ï¼Œé»˜è®¤ä¸º Falseï¼ˆå®‰å…¨è€ƒè™‘ï¼‰ã€‚
    |                                                                       ^^
136 |
137 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/instance.py:138:24
    |
137 |         Returns:
138 |             åŒ…å«å®žä¾‹å®Œæ•´ä¿¡æ¯çš„å­—å…¸ï¼ŒåŒ…æ‹¬å…³è”çš„å‡­æ®å’Œæ ‡ç­¾ã€‚
    |                                   ^^
139 |
140 |         """
    |

D205 1 blank line required between summary line and description
 --> app/models/instance_account.py:1:1
  |
1 | / """é²¸è½ - å®žä¾‹è´¦æˆ·å…³ç³»æ¨¡åž‹
2 | | ç”¨äºŽç»´æŠ¤å®žä¾‹åŒ…å«å“ªäº›è´¦æˆ·ï¼Œä»¥åŠè´¦æˆ·çš„å­˜åœ¨çŠ¶æ€.
3 | | """
  | |___^
4 |
5 |   from app import db
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/models/instance_account.py:2:13
  |
1 | """é²¸è½ - å®žä¾‹è´¦æˆ·å…³ç³»æ¨¡åž‹
2 | ç”¨äºŽç»´æŠ¤å®žä¾‹åŒ…å«å“ªäº›è´¦æˆ·ï¼Œä»¥åŠè´¦æˆ·çš„å­˜åœ¨çŠ¶æ€.
  |                         ^^
3 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/instance_account.py:12:16
   |
10 |     """å®žä¾‹-è´¦æˆ·å…³ç³»æ¨¡åž‹ã€‚.
11 |
12 |     ç»´æŠ¤å®žä¾‹åŒ…å«çš„è´¦æˆ·ä¿¡æ¯ï¼Œè·Ÿè¸ªè´¦æˆ·çš„å­˜åœ¨çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸã€‚
   |                           ^^
13 |     æ”¯æŒè´¦æˆ·çš„é¦–æ¬¡å‘çŽ°ã€æŒç»­å­˜åœ¨å’Œåˆ é™¤çŠ¶æ€çš„è®°å½•ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_account.py:18:22
   |
16 |         id: ä¸»é”® IDã€‚
17 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
18 |         username: è´¦æˆ·åï¼ˆå«å¿…è¦çš„ä¸»æœºä¿¡æ¯ï¼‰ã€‚
   |                         ^^
19 |         db_type: æ•°æ®åº“ç±»åž‹ã€‚
20 |         is_active: è´¦æˆ·æ˜¯å¦æ´»è·ƒã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_account.py:18:31
   |
16 |         id: ä¸»é”® IDã€‚
17 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
18 |         username: è´¦æˆ·åï¼ˆå«å¿…è¦çš„ä¸»æœºä¿¡æ¯ï¼‰ã€‚
   |                                           ^^
19 |         db_type: æ•°æ®åº“ç±»åž‹ã€‚
20 |         is_active: è´¦æˆ·æ˜¯å¦æ´»è·ƒã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_account.py:23:25
   |
21 |         first_seen_at: é¦–æ¬¡å‘çŽ°æ—¶é—´ã€‚
22 |         last_seen_at: æœ€åŽå‘çŽ°æ—¶é—´ã€‚
23 |         deleted_at: åˆ é™¤æ—¶é—´ï¼ˆè½¯åˆ é™¤ï¼‰ã€‚
   |                             ^^
24 |         created_at: åˆ›å»ºæ—¶é—´ã€‚
25 |         updated_at: æ›´æ–°æ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_account.py:23:29
   |
21 |         first_seen_at: é¦–æ¬¡å‘çŽ°æ—¶é—´ã€‚
22 |         last_seen_at: æœ€åŽå‘çŽ°æ—¶é—´ã€‚
23 |         deleted_at: åˆ é™¤æ—¶é—´ï¼ˆè½¯åˆ é™¤ï¼‰ã€‚
   |                                     ^^
24 |         created_at: åˆ›å»ºæ—¶é—´ã€‚
25 |         updated_at: æ›´æ–°æ—¶é—´ã€‚
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_account.py:34:70
   |
32 |     id = db.Column(db.Integer, primary_key=True)
33 |     instance_id = db.Column(db.Integer, db.ForeignKey("instances.id"), nullable=False, index=True)
34 |     username = db.Column(db.String(255), nullable=False, comment="è´¦æˆ·åï¼ˆå¯¹å¤–å±•ç¤ºï¼Œå«å¿…è¦çš„ä¸»æœºä¿¡æ¯ï¼‰")
   |                                                                         ^^
35 |     db_type = db.Column(db.String(50), nullable=False, comment="æ•°æ®åº“ç±»åž‹")
36 |     is_active = db.Column(db.Boolean, default=True, nullable=False, comment="è´¦æˆ·æ˜¯å¦æ´»è·ƒ")
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/instance_account.py:34:75
   |
32 |     id = db.Column(db.Integer, primary_key=True)
33 |     instance_id = db.Column(db.Integer, db.ForeignKey("instances.id"), nullable=False, index=True)
34 |     username = db.Column(db.String(255), nullable=False, comment="è´¦æˆ·åï¼ˆå¯¹å¤–å±•ç¤ºï¼Œå«å¿…è¦çš„ä¸»æœºä¿¡æ¯ï¼‰")
   |                                                                                   ^^
35 |     db_type = db.Column(db.String(50), nullable=False, comment="æ•°æ®åº“ç±»åž‹")
36 |     is_active = db.Column(db.Boolean, default=True, nullable=False, comment="è´¦æˆ·æ˜¯å¦æ´»è·ƒ")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_account.py:34:84
   |
32 |     id = db.Column(db.Integer, primary_key=True)
33 |     instance_id = db.Column(db.Integer, db.ForeignKey("instances.id"), nullable=False, index=True)
34 |     username = db.Column(db.String(255), nullable=False, comment="è´¦æˆ·åï¼ˆå¯¹å¤–å±•ç¤ºï¼Œå«å¿…è¦çš„ä¸»æœºä¿¡æ¯ï¼‰")
   |                                                                                                     ^^
35 |     db_type = db.Column(db.String(50), nullable=False, comment="æ•°æ®åº“ç±»åž‹")
36 |     is_active = db.Column(db.Boolean, default=True, nullable=False, comment="è´¦æˆ·æ˜¯å¦æ´»è·ƒ")
   |

E501 Line too long (121 > 120)
  --> app/models/instance_account.py:37:115
   |
35 |     db_type = db.Column(db.String(50), nullable=False, comment="æ•°æ®åº“ç±»åž‹")
36 |     is_active = db.Column(db.Boolean, default=True, nullable=False, comment="è´¦æˆ·æ˜¯å¦æ´»è·ƒ")
37 |     first_seen_at = db.Column(db.DateTime(timezone=True), nullable=False, default=time_utils.now, comment="é¦–æ¬¡å‘çŽ°æ—¶é—´")
   |                                                                                                                         ^
38 |     last_seen_at = db.Column(db.DateTime(timezone=True), nullable=False, default=time_utils.now, comment="æœ€åŽå‘çŽ°æ—¶é—´")
39 |     deleted_at = db.Column(db.DateTime(timezone=True), nullable=True, comment="åˆ é™¤æ—¶é—´")
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/instance_account.py:52:33
   |
50 |         db.Index("ix_instance_accounts_last_seen", "last_seen_at"),
51 |         {
52 |             "comment": "å®žä¾‹-è´¦æˆ·å…³ç³»è¡¨ï¼Œç»´æŠ¤è´¦æˆ·å­˜åœ¨çŠ¶æ€",
   |                                        ^^
53 |         },
54 |     )
   |

D205 1 blank line required between summary line and description
 --> app/models/instance_database.py:1:1
  |
1 | / """é²¸è½ - å®žä¾‹æ•°æ®åº“å…³ç³»æ¨¡åž‹
2 | | ç”¨äºŽç»´æŠ¤å®žä¾‹åŒ…å«å“ªäº›æ•°æ®åº“ï¼Œä»¥åŠæ•°æ®åº“çš„çŠ¶æ€å˜åŒ–.
3 | | """
  | |___^
4 |
5 |   from datetime import date
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/models/instance_database.py:2:14
  |
1 | """é²¸è½ - å®žä¾‹æ•°æ®åº“å…³ç³»æ¨¡åž‹
2 | ç”¨äºŽç»´æŠ¤å®žä¾‹åŒ…å«å“ªäº›æ•°æ®åº“ï¼Œä»¥åŠæ•°æ®åº“çš„çŠ¶æ€å˜åŒ–.
  |                           ^^
3 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/instance_database.py:14:17
   |
12 |     """å®žä¾‹-æ•°æ®åº“å…³ç³»æ¨¡åž‹ã€‚.
13 |
14 |     ç»´æŠ¤å®žä¾‹åŒ…å«çš„æ•°æ®åº“ä¿¡æ¯ï¼Œè·Ÿè¸ªæ•°æ®åº“çš„å­˜åœ¨çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸã€‚
   |                             ^^
15 |     æ”¯æŒæ•°æ®åº“çš„é¦–æ¬¡å‘çŽ°ã€æŒç»­å­˜åœ¨å’Œåˆ é™¤çŠ¶æ€çš„è®°å½•ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_database.py:21:27
   |
19 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
20 |         database_name: æ•°æ®åº“åç§°ã€‚
21 |         is_active: æ•°æ®åº“æ˜¯å¦æ´»è·ƒï¼ˆæœªåˆ é™¤ï¼‰ã€‚
   |                                  ^^
22 |         first_seen_date: é¦–æ¬¡å‘çŽ°æ—¥æœŸã€‚
23 |         last_seen_date: æœ€åŽå‘çŽ°æ—¥æœŸã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_database.py:21:31
   |
19 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
20 |         database_name: æ•°æ®åº“åç§°ã€‚
21 |         is_active: æ•°æ®åº“æ˜¯å¦æ´»è·ƒï¼ˆæœªåˆ é™¤ï¼‰ã€‚
   |                                          ^^
22 |         first_seen_date: é¦–æ¬¡å‘çŽ°æ—¥æœŸã€‚
23 |         last_seen_date: æœ€åŽå‘çŽ°æ—¥æœŸã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_database.py:24:25
   |
22 |         first_seen_date: é¦–æ¬¡å‘çŽ°æ—¥æœŸã€‚
23 |         last_seen_date: æœ€åŽå‘çŽ°æ—¥æœŸã€‚
24 |         deleted_at: åˆ é™¤æ—¶é—´ï¼ˆè½¯åˆ é™¤ï¼‰ã€‚
   |                             ^^
25 |         created_at: åˆ›å»ºæ—¶é—´ã€‚
26 |         updated_at: æ›´æ–°æ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_database.py:24:29
   |
22 |         first_seen_date: é¦–æ¬¡å‘çŽ°æ—¥æœŸã€‚
23 |         last_seen_date: æœ€åŽå‘çŽ°æ—¥æœŸã€‚
24 |         deleted_at: åˆ é™¤æ—¶é—´ï¼ˆè½¯åˆ é™¤ï¼‰ã€‚
   |                                     ^^
25 |         created_at: åˆ›å»ºæ—¶é—´ã€‚
26 |         updated_at: æ›´æ–°æ—¶é—´ã€‚
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_database.py:36:85
   |
34 |     instance_id = db.Column(db.Integer, db.ForeignKey("instances.id"), nullable=False, index=True)
35 |     database_name = db.Column(db.String(255), nullable=False, comment="æ•°æ®åº“åç§°")
36 |     is_active = db.Column(db.Boolean, default=True, nullable=False, comment="æ•°æ®åº“æ˜¯å¦æ´»è·ƒï¼ˆæœªåˆ é™¤ï¼‰")
   |                                                                                            ^^
37 |     first_seen_date = db.Column(db.Date, nullable=False, default=date.today, comment="é¦–æ¬¡å‘çŽ°æ—¥æœŸ")
38 |     last_seen_date = db.Column(db.Date, nullable=False, default=date.today, comment="æœ€åŽå‘çŽ°æ—¥æœŸ")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_database.py:36:89
   |
34 |     instance_id = db.Column(db.Integer, db.ForeignKey("instances.id"), nullable=False, index=True)
35 |     database_name = db.Column(db.String(255), nullable=False, comment="æ•°æ®åº“åç§°")
36 |     is_active = db.Column(db.Boolean, default=True, nullable=False, comment="æ•°æ®åº“æ˜¯å¦æ´»è·ƒï¼ˆæœªåˆ é™¤ï¼‰")
   |                                                                                                    ^^
37 |     first_seen_date = db.Column(db.Date, nullable=False, default=date.today, comment="é¦–æ¬¡å‘çŽ°æ—¥æœŸ")
38 |     last_seen_date = db.Column(db.Date, nullable=False, default=date.today, comment="æœ€åŽå‘çŽ°æ—¥æœŸ")
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/instance_database.py:52:34
   |
50 |         db.Index("ix_instance_databases_last_seen", "last_seen_date"),
51 |         {
52 |             "comment": "å®žä¾‹-æ•°æ®åº“å…³ç³»è¡¨ï¼Œç»´æŠ¤æ•°æ®åº“çš„å­˜åœ¨çŠ¶æ€",
   |                                          ^^
53 |         },
54 |     )
   |

D205 1 blank line required between summary line and description
 --> app/models/instance_size_aggregation.py:1:1
  |
1 | / """å®žä¾‹å¤§å°èšåˆç»Ÿè®¡æ¨¡åž‹
2 | | å­˜å‚¨å®žä¾‹çº§åˆ«çš„æ¯å‘¨ã€æ¯æœˆã€æ¯å­£åº¦çš„ç»Ÿè®¡ä¿¡æ¯.
3 | | """
  | |___^
4 |
5 |   from sqlalchemy import (
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:24:17
   |
23 | class InstanceSizeAggregation(db.Model):
24 |     """å®žä¾‹å¤§å°èšåˆç»Ÿè®¡è¡¨ï¼ˆåˆ†åŒºè¡¨ï¼‰ã€‚.
   |                          ^^
25 |
26 |     å­˜å‚¨å®žä¾‹çº§åˆ«çš„æ¯æ—¥ã€æ¯å‘¨ã€æ¯æœˆã€æ¯å­£åº¦çš„èšåˆç»Ÿè®¡ä¿¡æ¯ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:24:21
   |
23 | class InstanceSizeAggregation(db.Model):
24 |     """å®žä¾‹å¤§å°èšåˆç»Ÿè®¡è¡¨ï¼ˆåˆ†åŒºè¡¨ï¼‰ã€‚.
   |                                  ^^
25 |
26 |     å­˜å‚¨å®žä¾‹çº§åˆ«çš„æ¯æ—¥ã€æ¯å‘¨ã€æ¯æœˆã€æ¯å­£åº¦çš„èšåˆç»Ÿè®¡ä¿¡æ¯ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/instance_size_aggregation.py:27:26
   |
26 |     å­˜å‚¨å®žä¾‹çº§åˆ«çš„æ¯æ—¥ã€æ¯å‘¨ã€æ¯æœˆã€æ¯å­£åº¦çš„èšåˆç»Ÿè®¡ä¿¡æ¯ã€‚
27 |     æŒ‰ period_start å­—æ®µæŒ‰æœˆåˆ†åŒºï¼Œæ”¯æŒå®¹é‡å˜åŒ–å’Œå¢žé•¿çŽ‡ç»Ÿè®¡ã€‚
   |                                 ^^
28 |
29 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:30:18
   |
29 |     Attributes:
30 |         id: ä¸»é”® IDï¼ˆBigIntegerï¼‰ã€‚
   |                    ^^
31 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
32 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼ˆdaily/weekly/monthly/quarterlyï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:30:29
   |
29 |     Attributes:
30 |         id: ä¸»é”® IDï¼ˆBigIntegerï¼‰ã€‚
   |                                ^^
31 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
32 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼ˆdaily/weekly/monthly/quarterlyï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:32:28
   |
30 |         id: ä¸»é”® IDï¼ˆBigIntegerï¼‰ã€‚
31 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
32 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼ˆdaily/weekly/monthly/quarterlyï¼‰ã€‚
   |                                  ^^
33 |         period_start: ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
34 |         period_end: ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:32:59
   |
30 |         id: ä¸»é”® IDï¼ˆBigIntegerï¼‰ã€‚
31 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
32 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼ˆdaily/weekly/monthly/quarterlyï¼‰ã€‚
   |                                                                  ^^
33 |         period_start: ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
34 |         period_end: ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:33:31
   |
31 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
32 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼ˆdaily/weekly/monthly/quarterlyï¼‰ã€‚
33 |         period_start: ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
   |                                       ^^
34 |         period_end: ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸã€‚
35 |         total_size_mb: å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:33:36
   |
31 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
32 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼ˆdaily/weekly/monthly/quarterlyï¼‰ã€‚
33 |         period_start: ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
   |                                                 ^^
34 |         period_end: ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸã€‚
35 |         total_size_mb: å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:35:29
   |
33 |         period_start: ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
34 |         period_end: ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸã€‚
35 |         total_size_mb: å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
   |                                  ^^
36 |         avg_size_mb: å¹³å‡å¤§å°ï¼ˆMBï¼‰ã€‚
37 |         max_size_mb: æœ€å¤§å¤§å°ï¼ˆMBï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:35:32
   |
33 |         period_start: ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰ã€‚
34 |         period_end: ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸã€‚
35 |         total_size_mb: å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
   |                                      ^^
36 |         avg_size_mb: å¹³å‡å¤§å°ï¼ˆMBï¼‰ã€‚
37 |         max_size_mb: æœ€å¤§å¤§å°ï¼ˆMBï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:36:26
   |
34 |         period_end: ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸã€‚
35 |         total_size_mb: å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
36 |         avg_size_mb: å¹³å‡å¤§å°ï¼ˆMBï¼‰ã€‚
   |                              ^^
37 |         max_size_mb: æœ€å¤§å¤§å°ï¼ˆMBï¼‰ã€‚
38 |         min_size_mb: æœ€å°å¤§å°ï¼ˆMBï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:36:29
   |
34 |         period_end: ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸã€‚
35 |         total_size_mb: å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
36 |         avg_size_mb: å¹³å‡å¤§å°ï¼ˆMBï¼‰ã€‚
   |                                  ^^
37 |         max_size_mb: æœ€å¤§å¤§å°ï¼ˆMBï¼‰ã€‚
38 |         min_size_mb: æœ€å°å¤§å°ï¼ˆMBï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:37:26
   |
35 |         total_size_mb: å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
36 |         avg_size_mb: å¹³å‡å¤§å°ï¼ˆMBï¼‰ã€‚
37 |         max_size_mb: æœ€å¤§å¤§å°ï¼ˆMBï¼‰ã€‚
   |                              ^^
38 |         min_size_mb: æœ€å°å¤§å°ï¼ˆMBï¼‰ã€‚
39 |         data_count: ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:37:29
   |
35 |         total_size_mb: å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
36 |         avg_size_mb: å¹³å‡å¤§å°ï¼ˆMBï¼‰ã€‚
37 |         max_size_mb: æœ€å¤§å¤§å°ï¼ˆMBï¼‰ã€‚
   |                                  ^^
38 |         min_size_mb: æœ€å°å¤§å°ï¼ˆMBï¼‰ã€‚
39 |         data_count: ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:38:26
   |
36 |         avg_size_mb: å¹³å‡å¤§å°ï¼ˆMBï¼‰ã€‚
37 |         max_size_mb: æœ€å¤§å¤§å°ï¼ˆMBï¼‰ã€‚
38 |         min_size_mb: æœ€å°å¤§å°ï¼ˆMBï¼‰ã€‚
   |                              ^^
39 |         data_count: ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡ã€‚
40 |         database_count: æ•°æ®åº“æ•°é‡ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:38:29
   |
36 |         avg_size_mb: å¹³å‡å¤§å°ï¼ˆMBï¼‰ã€‚
37 |         max_size_mb: æœ€å¤§å¤§å°ï¼ˆMBï¼‰ã€‚
38 |         min_size_mb: æœ€å°å¤§å°ï¼ˆMBï¼‰ã€‚
   |                                  ^^
39 |         data_count: ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡ã€‚
40 |         database_count: æ•°æ®åº“æ•°é‡ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:44:36
   |
42 |         max_database_count: æœ€å¤§æ•°æ®åº“æ•°é‡ã€‚
43 |         min_database_count: æœ€å°æ•°æ®åº“æ•°é‡ã€‚
44 |         total_size_change_mb: æ€»å¤§å°å˜åŒ–ï¼ˆMBï¼‰ã€‚
   |                                         ^^
45 |         total_size_change_percent: æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ã€‚
46 |         database_count_change: æ•°æ®åº“æ•°é‡å˜åŒ–ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:44:39
   |
42 |         max_database_count: æœ€å¤§æ•°æ®åº“æ•°é‡ã€‚
43 |         min_database_count: æœ€å°æ•°æ®åº“æ•°é‡ã€‚
44 |         total_size_change_mb: æ€»å¤§å°å˜åŒ–ï¼ˆMBï¼‰ã€‚
   |                                             ^^
45 |         total_size_change_percent: æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”ã€‚
46 |         database_count_change: æ•°æ®åº“æ•°é‡å˜åŒ–ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:48:25
   |
46 |         database_count_change: æ•°æ®åº“æ•°é‡å˜åŒ–ã€‚
47 |         database_count_change_percent: æ•°æ®åº“æ•°é‡å˜åŒ–ç™¾åˆ†æ¯”ã€‚
48 |         growth_rate: å¢žé•¿çŽ‡ï¼ˆç™¾åˆ†æ¯”ï¼‰ã€‚
   |                            ^^
49 |
50 |     """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:48:29
   |
46 |         database_count_change: æ•°æ®åº“æ•°é‡å˜åŒ–ã€‚
47 |         database_count_change_percent: æ•°æ®åº“æ•°é‡å˜åŒ–ç™¾åˆ†æ¯”ã€‚
48 |         growth_rate: å¢žé•¿çŽ‡ï¼ˆç™¾åˆ†æ¯”ï¼‰ã€‚
   |                                    ^^
49 |
50 |     """
   |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/models/instance_size_aggregation.py:58:69
   |
57 |     # ç»Ÿè®¡å‘¨æœŸ
58 |     period_type = Column(String(20), nullable=False, comment="ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼šdaily, weekly, monthly, quarterly")
   |                                                                           ^^
59 |     period_start = Column(Date, nullable=False, comment="ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰")
60 |     period_end = Column(Date, nullable=False, comment="ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸ")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:59:66
   |
57 |     # ç»Ÿè®¡å‘¨æœŸ
58 |     period_type = Column(String(20), nullable=False, comment="ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼šdaily, weekly, monthly, quarterly")
59 |     period_start = Column(Date, nullable=False, comment="ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰")
   |                                                                          ^^
60 |     period_end = Column(Date, nullable=False, comment="ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸ")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:59:71
   |
57 |     # ç»Ÿè®¡å‘¨æœŸ
58 |     period_type = Column(String(20), nullable=False, comment="ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼šdaily, weekly, monthly, quarterly")
59 |     period_start = Column(Date, nullable=False, comment="ç»Ÿè®¡å‘¨æœŸå¼€å§‹æ—¥æœŸï¼ˆç”¨äºŽåˆ†åŒºï¼‰")
   |                                                                                    ^^
60 |     period_end = Column(Date, nullable=False, comment="ç»Ÿè®¡å‘¨æœŸç»“æŸæ—¥æœŸ")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:63:70
   |
62 |     # å®žä¾‹æ€»å¤§å°ç»Ÿè®¡
63 |     total_size_mb = Column(BigInteger, nullable=False, comment="å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰")
   |                                                                           ^^
64 |     avg_size_mb = Column(BigInteger, nullable=False, comment="å¹³å‡å¤§å°ï¼ˆMBï¼‰")
65 |     max_size_mb = Column(BigInteger, nullable=False, comment="æœ€å¤§å¤§å°ï¼ˆMBï¼‰")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:63:73
   |
62 |     # å®žä¾‹æ€»å¤§å°ç»Ÿè®¡
63 |     total_size_mb = Column(BigInteger, nullable=False, comment="å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰")
   |                                                                               ^^
64 |     avg_size_mb = Column(BigInteger, nullable=False, comment="å¹³å‡å¤§å°ï¼ˆMBï¼‰")
65 |     max_size_mb = Column(BigInteger, nullable=False, comment="æœ€å¤§å¤§å°ï¼ˆMBï¼‰")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:64:67
   |
62 |     # å®žä¾‹æ€»å¤§å°ç»Ÿè®¡
63 |     total_size_mb = Column(BigInteger, nullable=False, comment="å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰")
64 |     avg_size_mb = Column(BigInteger, nullable=False, comment="å¹³å‡å¤§å°ï¼ˆMBï¼‰")
   |                                                                       ^^
65 |     max_size_mb = Column(BigInteger, nullable=False, comment="æœ€å¤§å¤§å°ï¼ˆMBï¼‰")
66 |     min_size_mb = Column(BigInteger, nullable=False, comment="æœ€å°å¤§å°ï¼ˆMBï¼‰")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:64:70
   |
62 |     # å®žä¾‹æ€»å¤§å°ç»Ÿè®¡
63 |     total_size_mb = Column(BigInteger, nullable=False, comment="å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰")
64 |     avg_size_mb = Column(BigInteger, nullable=False, comment="å¹³å‡å¤§å°ï¼ˆMBï¼‰")
   |                                                                           ^^
65 |     max_size_mb = Column(BigInteger, nullable=False, comment="æœ€å¤§å¤§å°ï¼ˆMBï¼‰")
66 |     min_size_mb = Column(BigInteger, nullable=False, comment="æœ€å°å¤§å°ï¼ˆMBï¼‰")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:65:67
   |
63 |     total_size_mb = Column(BigInteger, nullable=False, comment="å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰")
64 |     avg_size_mb = Column(BigInteger, nullable=False, comment="å¹³å‡å¤§å°ï¼ˆMBï¼‰")
65 |     max_size_mb = Column(BigInteger, nullable=False, comment="æœ€å¤§å¤§å°ï¼ˆMBï¼‰")
   |                                                                       ^^
66 |     min_size_mb = Column(BigInteger, nullable=False, comment="æœ€å°å¤§å°ï¼ˆMBï¼‰")
67 |     data_count = Column(Integer, nullable=False, comment="ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:65:70
   |
63 |     total_size_mb = Column(BigInteger, nullable=False, comment="å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰")
64 |     avg_size_mb = Column(BigInteger, nullable=False, comment="å¹³å‡å¤§å°ï¼ˆMBï¼‰")
65 |     max_size_mb = Column(BigInteger, nullable=False, comment="æœ€å¤§å¤§å°ï¼ˆMBï¼‰")
   |                                                                           ^^
66 |     min_size_mb = Column(BigInteger, nullable=False, comment="æœ€å°å¤§å°ï¼ˆMBï¼‰")
67 |     data_count = Column(Integer, nullable=False, comment="ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:66:67
   |
64 |     avg_size_mb = Column(BigInteger, nullable=False, comment="å¹³å‡å¤§å°ï¼ˆMBï¼‰")
65 |     max_size_mb = Column(BigInteger, nullable=False, comment="æœ€å¤§å¤§å°ï¼ˆMBï¼‰")
66 |     min_size_mb = Column(BigInteger, nullable=False, comment="æœ€å°å¤§å°ï¼ˆMBï¼‰")
   |                                                                       ^^
67 |     data_count = Column(Integer, nullable=False, comment="ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:66:70
   |
64 |     avg_size_mb = Column(BigInteger, nullable=False, comment="å¹³å‡å¤§å°ï¼ˆMBï¼‰")
65 |     max_size_mb = Column(BigInteger, nullable=False, comment="æœ€å¤§å¤§å°ï¼ˆMBï¼‰")
66 |     min_size_mb = Column(BigInteger, nullable=False, comment="æœ€å°å¤§å°ï¼ˆMBï¼‰")
   |                                                                           ^^
67 |     data_count = Column(Integer, nullable=False, comment="ç»Ÿè®¡çš„æ•°æ®ç‚¹æ•°é‡")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:76:76
   |
75 |     # å˜åŒ–ç»Ÿè®¡
76 |     total_size_change_mb = Column(BigInteger, nullable=True, comment="æ€»å¤§å°å˜åŒ–ï¼ˆMBï¼‰")
   |                                                                                 ^^
77 |     total_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”")
78 |     database_count_change = Column(Integer, nullable=True, comment="æ•°æ®åº“æ•°é‡å˜åŒ–")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:76:79
   |
75 |     # å˜åŒ–ç»Ÿè®¡
76 |     total_size_change_mb = Column(BigInteger, nullable=True, comment="æ€»å¤§å°å˜åŒ–ï¼ˆMBï¼‰")
   |                                                                                     ^^
77 |     total_size_change_percent = Column(Numeric(10, 2), nullable=True, comment="æ€»å¤§å°å˜åŒ–ç™¾åˆ†æ¯”")
78 |     database_count_change = Column(Integer, nullable=True, comment="æ•°æ®åº“æ•°é‡å˜åŒ–")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:82:69
   |
81 |     # å¢žé•¿çŽ‡
82 |     growth_rate = Column(Numeric(10, 2), nullable=True, comment="å¢žé•¿çŽ‡ï¼ˆç™¾åˆ†æ¯”ï¼‰")
   |                                                                        ^^
83 |     trend_direction = Column(String(20), nullable=True, comment="è¶‹åŠ¿æ–¹å‘ï¼šgrowing, shrinking, stable")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_aggregation.py:82:73
   |
81 |     # å¢žé•¿çŽ‡
82 |     growth_rate = Column(Numeric(10, 2), nullable=True, comment="å¢žé•¿çŽ‡ï¼ˆç™¾åˆ†æ¯”ï¼‰")
   |                                                                                ^^
83 |     trend_direction = Column(String(20), nullable=True, comment="è¶‹åŠ¿æ–¹å‘ï¼šgrowing, shrinking, stable")
   |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/models/instance_size_aggregation.py:83:70
   |
81 |     # å¢žé•¿çŽ‡
82 |     growth_rate = Column(Numeric(10, 2), nullable=True, comment="å¢žé•¿çŽ‡ï¼ˆç™¾åˆ†æ¯”ï¼‰")
83 |     trend_direction = Column(String(20), nullable=True, comment="è¶‹åŠ¿æ–¹å‘ï¼šgrowing, shrinking, stable")
   |                                                                          ^^
84 |
85 |     # æ—¶é—´æˆ³
   |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/models/instance_size_aggregation.py:93:13
   |
91 |     __table_args__ = (
92 |         # åˆ†åŒºè¡¨çº¦æŸ - ä¸»é”®å¿…é¡»åŒ…å«åˆ†åŒºé”®
93 |         # æ³¨æ„ï¼šåœ¨åˆ†åŒºè¡¨ä¸­ï¼Œä¸»é”®çº¦æŸä¼šè‡ªåŠ¨åŒ…å«åˆ†åŒºé”®
   |               ^^
94 |         # æŸ¥è¯¢ä¼˜åŒ–ç´¢å¼•
95 |         Index(
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/instance_size_aggregation.py:93:19
   |
91 |     __table_args__ = (
92 |         # åˆ†åŒºè¡¨çº¦æŸ - ä¸»é”®å¿…é¡»åŒ…å«åˆ†åŒºé”®
93 |         # æ³¨æ„ï¼šåœ¨åˆ†åŒºè¡¨ä¸­ï¼Œä¸»é”®çº¦æŸä¼šè‡ªåŠ¨åŒ…å«åˆ†åŒºé”®
   |                           ^^
94 |         # æŸ¥è¯¢ä¼˜åŒ–ç´¢å¼•
95 |         Index(
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/models/instance_size_aggregation.py:106:15
    |
104 |             "period_start",
105 |         ),
106 |         # å”¯ä¸€çº¦æŸï¼ˆåœ¨åˆ†åŒºè¡¨ä¸­ï¼Œå”¯ä¸€çº¦æŸä¼šè‡ªåŠ¨åŒ…å«åˆ†åŒºé”®ï¼‰
    |                   ^^
107 |         UniqueConstraint(
108 |             "instance_id",
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/instance_size_aggregation.py:106:21
    |
104 |             "period_start",
105 |         ),
106 |         # å”¯ä¸€çº¦æŸï¼ˆåœ¨åˆ†åŒºè¡¨ä¸­ï¼Œå”¯ä¸€çº¦æŸä¼šè‡ªåŠ¨åŒ…å«åˆ†åŒºé”®ï¼‰
    |                               ^^
107 |         UniqueConstraint(
108 |             "instance_id",
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/models/instance_size_aggregation.py:106:34
    |
104 |             "period_start",
105 |         ),
106 |         # å”¯ä¸€çº¦æŸï¼ˆåœ¨åˆ†åŒºè¡¨ä¸­ï¼Œå”¯ä¸€çº¦æŸä¼šè‡ªåŠ¨åŒ…å«åˆ†åŒºé”®ï¼‰
    |                                                         ^^
107 |         UniqueConstraint(
108 |             "instance_id",
    |

ANN202 Missing return type annotation for private function `_to_float`
   --> app/models/instance_size_aggregation.py:134:13
    |
133 |         """
134 |         def _to_float(value):
    |             ^^^^^^^^^
135 |             return float(value) if value is not None else None
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `value`
   --> app/models/instance_size_aggregation.py:134:23
    |
133 |         """
134 |         def _to_float(value):
    |                       ^^^^^
135 |             return float(value) if value is not None else None
    |

D205 1 blank line required between summary line and description
 --> app/models/instance_size_stat.py:1:1
  |
1 | / """é²¸è½ - å®žä¾‹å¤§å°ç»Ÿè®¡æ¨¡åž‹
2 | | å­˜å‚¨æ•°æ®åº“å®žä¾‹çš„æ€»å¤§å°ç»Ÿè®¡æ•°æ®.
3 | | """
  | |___^
4 |
5 |   from app import db
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/instance_size_stat.py:12:20
   |
10 |     """å®žä¾‹å¤§å°ç»Ÿè®¡æ¨¡åž‹ã€‚.
11 |
12 |     å­˜å‚¨æ•°æ®åº“å®žä¾‹çš„æ€»å¤§å°ç»Ÿè®¡æ•°æ®ï¼ŒæŒ‰æ—¥æœŸè®°å½•å®žä¾‹çš„å®¹é‡å˜åŒ–ã€‚
   |                                   ^^
13 |     æ”¯æŒè½¯åˆ é™¤å’ŒåŽ†å²æ•°æ®è¿½è¸ªã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_stat.py:18:29
   |
16 |         id: ä¸»é”® IDã€‚
17 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
18 |         total_size_mb: å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
   |                                  ^^
19 |         database_count: æ•°æ®åº“æ•°é‡ã€‚
20 |         collected_date: é‡‡é›†æ—¥æœŸã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_stat.py:18:32
   |
16 |         id: ä¸»é”® IDã€‚
17 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
18 |         total_size_mb: å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰ã€‚
   |                                      ^^
19 |         database_count: æ•°æ®åº“æ•°é‡ã€‚
20 |         collected_date: é‡‡é›†æ—¥æœŸã€‚
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/instance_size_stat.py:34:84
   |
32 |     id = db.Column(db.Integer, primary_key=True)
33 |     instance_id = db.Column(db.Integer, db.ForeignKey("instances.id"), nullable=False, index=True)
34 |     total_size_mb = db.Column(db.Integer, nullable=False, default=0, comment="å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰")
   |                                                                                         ^^
35 |     database_count = db.Column(db.Integer, nullable=False, default=0, comment="æ•°æ®åº“æ•°é‡")
36 |     collected_date = db.Column(db.Date, nullable=False, index=True, comment="é‡‡é›†æ—¥æœŸ")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/instance_size_stat.py:34:87
   |
32 |     id = db.Column(db.Integer, primary_key=True)
33 |     instance_id = db.Column(db.Integer, db.ForeignKey("instances.id"), nullable=False, index=True)
34 |     total_size_mb = db.Column(db.Integer, nullable=False, default=0, comment="å®žä¾‹æ€»å¤§å°ï¼ˆMBï¼‰")
   |                                                                                             ^^
35 |     database_count = db.Column(db.Integer, nullable=False, default=0, comment="æ•°æ®åº“æ•°é‡")
36 |     collected_date = db.Column(db.Date, nullable=False, index=True, comment="é‡‡é›†æ—¥æœŸ")
   |

E501 Line too long (123 > 120)
  --> app/models/instance_size_stat.py:41:118
   |
39 |     deleted_at = db.Column(db.DateTime(timezone=True), nullable=True, comment="åˆ é™¤æ—¶é—´")
40 |     created_at = db.Column(db.DateTime(timezone=True), default=time_utils.now, comment="åˆ›å»ºæ—¶é—´")
41 |     updated_at = db.Column(db.DateTime(timezone=True), default=time_utils.now, onupdate=time_utils.now, comment="æ›´æ–°æ—¶é—´")
   |                                                                                                                          ^^
42 |
43 |     # å…³ç³»
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/models/permission_config.py:3:21
  |
1 | """é²¸è½ - æƒé™é…ç½®æ•°æ®æ¨¡åž‹.
2 |
3 | é»˜è®¤æƒé™æ•°æ®é€šè¿‡ SQL åˆå§‹åŒ–è„šæœ¬ä¸‹å‘ï¼Œæ¨¡åž‹å±‚ä»…è´Ÿè´£è¯»å–/åºåˆ—åŒ–ã€‚
  |                                    ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/permission_config.py:13:21
   |
11 |     """æƒé™é…ç½®æ•°æ®æ¨¡åž‹ã€‚.
12 |
13 |     å­˜å‚¨ä¸åŒæ•°æ®åº“ç±»åž‹çš„æƒé™é…ç½®ä¿¡æ¯ï¼Œç”¨äºŽæƒé™å±•ç¤ºå’ŒéªŒè¯ã€‚
   |                                     ^^
14 |     é»˜è®¤æƒé™æ•°æ®é€šè¿‡ SQL åˆå§‹åŒ–è„šæœ¬ä¸‹å‘ï¼Œæ¨¡åž‹å±‚ä»…è´Ÿè´£è¯»å–å’Œåºåˆ—åŒ–ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/permission_config.py:14:25
   |
13 |     å­˜å‚¨ä¸åŒæ•°æ®åº“ç±»åž‹çš„æƒé™é…ç½®ä¿¡æ¯ï¼Œç”¨äºŽæƒé™å±•ç¤ºå’ŒéªŒè¯ã€‚
14 |     é»˜è®¤æƒé™æ•°æ®é€šè¿‡ SQL åˆå§‹åŒ–è„šæœ¬ä¸‹å‘ï¼Œæ¨¡åž‹å±‚ä»…è´Ÿè´£è¯»å–å’Œåºåˆ—åŒ–ã€‚
   |                                        ^^
15 |
16 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/permission_config.py:18:23
   |
16 |     Attributes:
17 |         id: ä¸»é”® IDã€‚
18 |         db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysql/postgresql/sqlserver/oracleï¼‰ã€‚
   |                            ^^
19 |         category: æƒé™åˆ†ç±»ï¼ˆå¦‚ global_privilegesã€server_roles ç­‰ï¼‰ã€‚
20 |         permission_name: æƒé™åç§°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/permission_config.py:18:57
   |
16 |     Attributes:
17 |         id: ä¸»é”® IDã€‚
18 |         db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysql/postgresql/sqlserver/oracleï¼‰ã€‚
   |                                                               ^^
19 |         category: æƒé™åˆ†ç±»ï¼ˆå¦‚ global_privilegesã€server_roles ç­‰ï¼‰ã€‚
20 |         permission_name: æƒé™åç§°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/permission_config.py:19:23
   |
17 |         id: ä¸»é”® IDã€‚
18 |         db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysql/postgresql/sqlserver/oracleï¼‰ã€‚
19 |         category: æƒé™åˆ†ç±»ï¼ˆå¦‚ global_privilegesã€server_roles ç­‰ï¼‰ã€‚
   |                           ^^
20 |         permission_name: æƒé™åç§°ã€‚
21 |         description: æƒé™æè¿°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/permission_config.py:19:58
   |
17 |         id: ä¸»é”® IDã€‚
18 |         db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysql/postgresql/sqlserver/oracleï¼‰ã€‚
19 |         category: æƒé™åˆ†ç±»ï¼ˆå¦‚ global_privilegesã€server_roles ç­‰ï¼‰ã€‚
   |                                                                  ^^
20 |         permission_name: æƒé™åç§°ã€‚
21 |         description: æƒé™æè¿°ã€‚
   |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/models/permission_config.py:35:15
   |
33 |         db.String(50),
34 |         nullable=False,
35 |     )  # æ•°æ®åº“ç±»åž‹ï¼šmysql/postgresql/sqlserver/oracle
   |                    ^^
36 |     category = db.Column(
37 |         db.String(50),
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/permission_config.py:39:14
   |
37 |         db.String(50),
38 |         nullable=False,
39 |     )  # æƒé™åˆ†ç±»ï¼Œå¦‚ global_privilegesã€server_roles ç­‰
   |                  ^^
40 |     permission_name = db.Column(db.String(255), nullable=False)
41 |     description = db.Column(db.Text, nullable=True)
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/permission_config.py:83:24
   |
81 |     @classmethod
82 |     def get_permissions_by_db_type(cls, db_type: str) -> dict[str, list[dict[str, str | None]]]:
83 |         """æŒ‰æ•°æ®åº“ç±»åž‹è¿”å›žæƒé™é…ç½®ï¼Œä¾› UI å±•ç¤ºã€‚.
   |                                    ^^
84 |
85 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/permission_config.py:89:25
   |
88 |         Returns:
89 |             æŒ‰åˆ†ç±»åˆ†ç»„çš„æƒé™é…ç½®å­—å…¸ï¼Œæ ¼å¼ï¼š
   |                                     ^^
90 |             {
91 |                 'category1': [{'name': 'perm1', 'description': 'desc1'}, ...],
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/models/permission_config.py:89:28
   |
88 |         Returns:
89 |             æŒ‰åˆ†ç±»åˆ†ç»„çš„æƒé™é…ç½®å­—å…¸ï¼Œæ ¼å¼ï¼š
   |                                           ^^
90 |             {
91 |                 'category1': [{'name': 'perm1', 'description': 'desc1'}, ...],
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/models/sync_instance_record.py:3:20
  |
1 | """åŒæ­¥å®žä¾‹è®°å½•æ¨¡åž‹ã€‚.
2 |
3 | è®°å½•æ¯ä¸ªå®žä¾‹åœ¨åŒæ­¥ä¼šè¯ä¸­çš„è¯¦ç»†æ‰§è¡Œæƒ…å†µï¼ŒåŒ…æ‹¬çŠ¶æ€ã€ç»Ÿè®¡æ•°æ®å’Œé”™è¯¯ä¿¡æ¯ã€‚
  |                                       ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/sync_instance_record.py:13:16
   |
11 |     """åŒæ­¥å®žä¾‹è®°å½•æ¨¡åž‹ã€‚.
12 |
13 |     è®°å½•æ¯ä¸ªå®žä¾‹çš„åŒæ­¥è¯¦æƒ…ï¼ŒåŒ…æ‹¬åŒæ­¥çŠ¶æ€ã€æ—¶é—´ã€ç»Ÿè®¡æ•°æ®å’Œé”™è¯¯ä¿¡æ¯ã€‚
   |                           ^^
14 |
15 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/sync_instance_record.py:20:28
   |
18 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
19 |         instance_name: å®žä¾‹åç§°ã€‚
20 |         sync_category: åŒæ­¥åˆ†ç±»ï¼ˆaccountã€capacityã€aggregationã€configã€otherï¼‰ã€‚
   |                                ^^
21 |         status: åŒæ­¥çŠ¶æ€ï¼ˆpendingã€runningã€completedã€failedï¼‰ã€‚
22 |         started_at: åŒæ­¥å¼€å§‹æ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/sync_instance_record.py:20:70
   |
18 |         instance_id: å…³è”çš„å®žä¾‹ IDã€‚
19 |         instance_name: å®žä¾‹åç§°ã€‚
20 |         sync_category: åŒæ­¥åˆ†ç±»ï¼ˆaccountã€capacityã€aggregationã€configã€otherï¼‰ã€‚
   |                                                                               ^^
21 |         status: åŒæ­¥çŠ¶æ€ï¼ˆpendingã€runningã€completedã€failedï¼‰ã€‚
22 |         started_at: åŒæ­¥å¼€å§‹æ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/sync_instance_record.py:21:21
   |
19 |         instance_name: å®žä¾‹åç§°ã€‚
20 |         sync_category: åŒæ­¥åˆ†ç±»ï¼ˆaccountã€capacityã€aggregationã€configã€otherï¼‰ã€‚
21 |         status: åŒæ­¥çŠ¶æ€ï¼ˆpendingã€runningã€completedã€failedï¼‰ã€‚
   |                         ^^
22 |         started_at: åŒæ­¥å¼€å§‹æ—¶é—´ã€‚
23 |         completed_at: åŒæ­¥å®Œæˆæ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/sync_instance_record.py:21:54
   |
19 |         instance_name: å®žä¾‹åç§°ã€‚
20 |         sync_category: åŒæ­¥åˆ†ç±»ï¼ˆaccountã€capacityã€aggregationã€configã€otherï¼‰ã€‚
21 |         status: åŒæ­¥çŠ¶æ€ï¼ˆpendingã€runningã€completedã€failedï¼‰ã€‚
   |                                                              ^^
22 |         started_at: åŒæ­¥å¼€å§‹æ—¶é—´ã€‚
23 |         completed_at: åŒæ­¥å®Œæˆæ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/sync_instance_record.py:29:29
   |
27 |         items_deleted: åˆ é™¤çš„é¡¹ç›®æ•°é‡ã€‚
28 |         error_message: é”™è¯¯æ¶ˆæ¯ã€‚
29 |         sync_details: åŒæ­¥è¯¦ç»†ä¿¡æ¯ï¼ˆJSONï¼‰ã€‚
   |                                   ^^
30 |         created_at: è®°å½•åˆ›å»ºæ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/sync_instance_record.py:29:34
   |
27 |         items_deleted: åˆ é™¤çš„é¡¹ç›®æ•°é‡ã€‚
28 |         error_message: é”™è¯¯æ¶ˆæ¯ã€‚
29 |         sync_details: åŒæ­¥è¯¦ç»†ä¿¡æ¯ï¼ˆJSONï¼‰ã€‚
   |                                         ^^
30 |         created_at: è®°å½•åˆ›å»ºæ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/models/sync_instance_record.py:186:19
    |
185 |         Returns:
186 |             åŒæ­¥æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œå¦‚æžœæœªå®Œæˆåˆ™è¿”å›ž Noneã€‚
    |                         ^^
187 |
188 |         """
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/models/sync_instance_record.py:186:21
    |
185 |         Returns:
186 |             åŒæ­¥æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œå¦‚æžœæœªå®Œæˆåˆ™è¿”å›ž Noneã€‚
    |                             ^^
187 |
188 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/sync_instance_record.py:186:22
    |
185 |         Returns:
186 |             åŒæ­¥æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œå¦‚æžœæœªå®Œæˆåˆ™è¿”å›ž Noneã€‚
    |                               ^^
187 |
188 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/sync_instance_record.py:201:19
    |
200 |         Returns:
201 |             å®žä¾‹è®°å½•åˆ—è¡¨ï¼ŒæŒ‰åˆ›å»ºæ—¶é—´å‡åºæŽ’åˆ—ã€‚
    |                         ^^
202 |
203 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/sync_session.py:12:18
   |
10 |     """åŒæ­¥ä¼šè¯æ¨¡åž‹ - ç®¡ç†æ‰¹é‡åŒæ­¥ä¼šè¯ã€‚.
11 |
12 |     è®°å½•æ‰¹é‡åŒæ­¥ä»»åŠ¡çš„ä¼šè¯ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŒæ­¥ç±»åž‹ã€çŠ¶æ€ã€æ—¶é—´ã€
   |                               ^^
13 |     å®žä¾‹ç»Ÿè®¡ç­‰ã€‚æ”¯æŒè´¦æˆ·åŒæ­¥ã€å®¹é‡é‡‡é›†ã€èšåˆç­‰å¤šç§åŒæ­¥ç±»åž‹ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/sync_session.py:17:27
   |
15 |     Attributes:
16 |         id: ä¸»é”® IDã€‚
17 |         session_id: ä¼šè¯å”¯ä¸€æ ‡è¯†ï¼ˆUUIDï¼‰ã€‚
   |                                 ^^
18 |         sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼ˆmanual_single/manual_batch/manual_task/scheduled_taskï¼‰ã€‚
19 |         sync_category: åŒæ­¥åˆ†ç±»ï¼ˆaccount/capacity/config/aggregation/otherï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/sync_session.py:17:32
   |
15 |     Attributes:
16 |         id: ä¸»é”® IDã€‚
17 |         session_id: ä¼šè¯å”¯ä¸€æ ‡è¯†ï¼ˆUUIDï¼‰ã€‚
   |                                       ^^
18 |         sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼ˆmanual_single/manual_batch/manual_task/scheduled_taskï¼‰ã€‚
19 |         sync_category: åŒæ­¥åˆ†ç±»ï¼ˆaccount/capacity/config/aggregation/otherï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/sync_session.py:18:26
   |
16 |         id: ä¸»é”® IDã€‚
17 |         session_id: ä¼šè¯å”¯ä¸€æ ‡è¯†ï¼ˆUUIDï¼‰ã€‚
18 |         sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼ˆmanual_single/manual_batch/manual_task/scheduled_taskï¼‰ã€‚
   |                                ^^
19 |         sync_category: åŒæ­¥åˆ†ç±»ï¼ˆaccount/capacity/config/aggregation/otherï¼‰ã€‚
20 |         status: ä¼šè¯çŠ¶æ€ï¼ˆpending/running/completed/failedï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/sync_session.py:18:80
   |
16 |         id: ä¸»é”® IDã€‚
17 |         session_id: ä¼šè¯å”¯ä¸€æ ‡è¯†ï¼ˆUUIDï¼‰ã€‚
18 |         sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼ˆmanual_single/manual_batch/manual_task/scheduled_taskï¼‰ã€‚
   |                                                                                       ^^
19 |         sync_category: åŒæ­¥åˆ†ç±»ï¼ˆaccount/capacity/config/aggregation/otherï¼‰ã€‚
20 |         status: ä¼šè¯çŠ¶æ€ï¼ˆpending/running/completed/failedï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/sync_session.py:19:28
   |
17 |         session_id: ä¼šè¯å”¯ä¸€æ ‡è¯†ï¼ˆUUIDï¼‰ã€‚
18 |         sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼ˆmanual_single/manual_batch/manual_task/scheduled_taskï¼‰ã€‚
19 |         sync_category: åŒæ­¥åˆ†ç±»ï¼ˆaccount/capacity/config/aggregation/otherï¼‰ã€‚
   |                                ^^
20 |         status: ä¼šè¯çŠ¶æ€ï¼ˆpending/running/completed/failedï¼‰ã€‚
21 |         started_at: å¼€å§‹æ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/sync_session.py:19:70
   |
17 |         session_id: ä¼šè¯å”¯ä¸€æ ‡è¯†ï¼ˆUUIDï¼‰ã€‚
18 |         sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼ˆmanual_single/manual_batch/manual_task/scheduled_taskï¼‰ã€‚
19 |         sync_category: åŒæ­¥åˆ†ç±»ï¼ˆaccount/capacity/config/aggregation/otherï¼‰ã€‚
   |                                                                           ^^
20 |         status: ä¼šè¯çŠ¶æ€ï¼ˆpending/running/completed/failedï¼‰ã€‚
21 |         started_at: å¼€å§‹æ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/sync_session.py:20:21
   |
18 |         sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼ˆmanual_single/manual_batch/manual_task/scheduled_taskï¼‰ã€‚
19 |         sync_category: åŒæ­¥åˆ†ç±»ï¼ˆaccount/capacity/config/aggregation/otherï¼‰ã€‚
20 |         status: ä¼šè¯çŠ¶æ€ï¼ˆpending/running/completed/failedï¼‰ã€‚
   |                         ^^
21 |         started_at: å¼€å§‹æ—¶é—´ã€‚
22 |         completed_at: å®Œæˆæ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/sync_session.py:20:54
   |
18 |         sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼ˆmanual_single/manual_batch/manual_task/scheduled_taskï¼‰ã€‚
19 |         sync_category: åŒæ­¥åˆ†ç±»ï¼ˆaccount/capacity/config/aggregation/otherï¼‰ã€‚
20 |         status: ä¼šè¯çŠ¶æ€ï¼ˆpending/running/completed/failedï¼‰ã€‚
   |                                                           ^^
21 |         started_at: å¼€å§‹æ—¶é—´ã€‚
22 |         completed_at: å®Œæˆæ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/sync_session.py:26:28
   |
24 |         successful_instances: æˆåŠŸå®žä¾‹æ•°ã€‚
25 |         failed_instances: å¤±è´¥å®žä¾‹æ•°ã€‚
26 |         created_by: åˆ›å»ºç”¨æˆ· IDï¼ˆæ‰‹åŠ¨åŒæ­¥æ—¶ï¼‰ã€‚
   |                                ^^
27 |         created_at: åˆ›å»ºæ—¶é—´ã€‚
28 |         updated_at: æ›´æ–°æ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/sync_session.py:26:34
   |
24 |         successful_instances: æˆåŠŸå®žä¾‹æ•°ã€‚
25 |         failed_instances: å¤±è´¥å®žä¾‹æ•°ã€‚
26 |         created_by: åˆ›å»ºç”¨æˆ· IDï¼ˆæ‰‹åŠ¨åŒæ­¥æ—¶ï¼‰ã€‚
   |                                            ^^
27 |         created_at: åˆ›å»ºæ—¶é—´ã€‚
28 |         updated_at: æ›´æ–°æ—¶é—´ã€‚
   |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/models/sync_session.py:48:34
   |
46 |         db.String(20),
47 |         nullable=False,
48 |         default="pending",  # å¯é€‰å€¼ï¼špendingï¼ˆå¾…å¤„ç†ï¼‰ã€runningï¼ˆæ‰§è¡Œä¸­ï¼‰ã€completedï¼ˆå·²å®Œæˆï¼‰ã€failedï¼ˆå¤±è´¥ï¼‰
   |                                     ^^
49 |     )
50 |     started_at = db.Column(db.DateTime(timezone=True))
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/sync_session.py:48:42
   |
46 |         db.String(20),
47 |         nullable=False,
48 |         default="pending",  # å¯é€‰å€¼ï¼špendingï¼ˆå¾…å¤„ç†ï¼‰ã€runningï¼ˆæ‰§è¡Œä¸­ï¼‰ã€completedï¼ˆå·²å®Œæˆï¼‰ã€failedï¼ˆå¤±è´¥ï¼‰
   |                                              ^^
49 |     )
50 |     started_at = db.Column(db.DateTime(timezone=True))
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/sync_session.py:48:46
   |
46 |         db.String(20),
47 |         nullable=False,
48 |         default="pending",  # å¯é€‰å€¼ï¼špendingï¼ˆå¾…å¤„ç†ï¼‰ã€runningï¼ˆæ‰§è¡Œä¸­ï¼‰ã€completedï¼ˆå·²å®Œæˆï¼‰ã€failedï¼ˆå¤±è´¥ï¼‰
   |                                                      ^^
49 |     )
50 |     started_at = db.Column(db.DateTime(timezone=True))
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/sync_session.py:48:55
   |
46 |         db.String(20),
47 |         nullable=False,
48 |         default="pending",  # å¯é€‰å€¼ï¼špendingï¼ˆå¾…å¤„ç†ï¼‰ã€runningï¼ˆæ‰§è¡Œä¸­ï¼‰ã€completedï¼ˆå·²å®Œæˆï¼‰ã€failedï¼ˆå¤±è´¥ï¼‰
   |                                                                 ^^
49 |     )
50 |     started_at = db.Column(db.DateTime(timezone=True))
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/sync_session.py:48:59
   |
46 |         db.String(20),
47 |         nullable=False,
48 |         default="pending",  # å¯é€‰å€¼ï¼špendingï¼ˆå¾…å¤„ç†ï¼‰ã€runningï¼ˆæ‰§è¡Œä¸­ï¼‰ã€completedï¼ˆå·²å®Œæˆï¼‰ã€failedï¼ˆå¤±è´¥ï¼‰
   |                                                                         ^^
49 |     )
50 |     started_at = db.Column(db.DateTime(timezone=True))
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/sync_session.py:48:70
   |
46 |         db.String(20),
47 |         nullable=False,
48 |         default="pending",  # å¯é€‰å€¼ï¼špendingï¼ˆå¾…å¤„ç†ï¼‰ã€runningï¼ˆæ‰§è¡Œä¸­ï¼‰ã€completedï¼ˆå·²å®Œæˆï¼‰ã€failedï¼ˆå¤±è´¥ï¼‰
   |                                                                                      ^^
49 |     )
50 |     started_at = db.Column(db.DateTime(timezone=True))
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/sync_session.py:48:74
   |
46 |         db.String(20),
47 |         nullable=False,
48 |         default="pending",  # å¯é€‰å€¼ï¼špendingï¼ˆå¾…å¤„ç†ï¼‰ã€runningï¼ˆæ‰§è¡Œä¸­ï¼‰ã€completedï¼ˆå·²å®Œæˆï¼‰ã€failedï¼ˆå¤±è´¥ï¼‰
   |                                                                                              ^^
49 |     )
50 |     started_at = db.Column(db.DateTime(timezone=True))
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/sync_session.py:48:82
   |
46 |         db.String(20),
47 |         nullable=False,
48 |         default="pending",  # å¯é€‰å€¼ï¼špendingï¼ˆå¾…å¤„ç†ï¼‰ã€runningï¼ˆæ‰§è¡Œä¸­ï¼‰ã€completedï¼ˆå·²å®Œæˆï¼‰ã€failedï¼ˆå¤±è´¥ï¼‰
   |                                                                                                        ^^
49 |     )
50 |     started_at = db.Column(db.DateTime(timezone=True))
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/sync_session.py:48:85
   |
46 |         db.String(20),
47 |         nullable=False,
48 |         default="pending",  # å¯é€‰å€¼ï¼špendingï¼ˆå¾…å¤„ç†ï¼‰ã€runningï¼ˆæ‰§è¡Œä¸­ï¼‰ã€completedï¼ˆå·²å®Œæˆï¼‰ã€failedï¼ˆå¤±è´¥ï¼‰
   |                                                                                                              ^^
49 |     )
50 |     started_at = db.Column(db.DateTime(timezone=True))
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/sync_session.py:55:47
   |
53 |     successful_instances = db.Column(db.Integer, default=0)
54 |     failed_instances = db.Column(db.Integer, default=0)
55 |     created_by = db.Column(db.Integer)  # ç”¨æˆ·IDï¼ˆæ‰‹åŠ¨åŒæ­¥æ—¶ï¼‰
   |                                                 ^^
56 |     created_at = db.Column(db.DateTime(timezone=True), default=time_utils.now)
57 |     updated_at = db.Column(db.DateTime(timezone=True), default=time_utils.now, onupdate=time_utils.now)
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/sync_session.py:55:53
   |
53 |     successful_instances = db.Column(db.Integer, default=0)
54 |     failed_instances = db.Column(db.Integer, default=0)
55 |     created_by = db.Column(db.Integer)  # ç”¨æˆ·IDï¼ˆæ‰‹åŠ¨åŒæ­¥æ—¶ï¼‰
   |                                                             ^^
56 |     created_at = db.Column(db.DateTime(timezone=True), default=time_utils.now)
57 |     updated_at = db.Column(db.DateTime(timezone=True), default=time_utils.now, onupdate=time_utils.now)
   |

ARG002 Unused method argument: `created_by`
  --> app/models/sync_session.py:67:72
   |
65 |     )
66 |
67 |     def __init__(self, sync_type: str, sync_category: str = "account", created_by: int | None = None) -> None:
   |                                                                        ^^^^^^^^^^
68 |         """åˆå§‹åŒ–åŒæ­¥ä¼šè¯.
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/models/sync_session.py:132:30
    |
131 |         Returns:
132 |             int: 0-100 çš„è¿›åº¦ç™¾åˆ†æ¯”ï¼ˆä¿ç•™ä¸¤ä½å°æ•°ï¼‰ã€‚
    |                                    ^^
133 |
134 |         """
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/models/sync_session.py:132:37
    |
131 |         Returns:
132 |             int: 0-100 çš„è¿›åº¦ç™¾åˆ†æ¯”ï¼ˆä¿ç•™ä¸¤ä½å°æ•°ï¼‰ã€‚
    |                                                  ^^
133 |
134 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/sync_session.py:149:41
    |
148 |         Returns:
149 |             list[SyncSession]: æ»¡è¶³æ¡ä»¶çš„ä¼šè¯é›†åˆï¼ŒæŒ‰åˆ›å»ºæ—¶é—´å€’åºã€‚
    |                                                  ^^
150 |
151 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/sync_session.py:165:41
    |
164 |         Returns:
165 |             list[SyncSession]: æ»¡è¶³æ¡ä»¶çš„ä¼šè¯é›†åˆï¼ŒæŒ‰åˆ›å»ºæ—¶é—´å€’åºã€‚
    |                                                  ^^
166 |
167 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/tag.py:11:17
   |
 9 |     """æ ‡ç­¾æ¨¡åž‹ã€‚.
10 |
11 |     ç”¨äºŽå¯¹å®žä¾‹è¿›è¡Œåˆ†ç±»å’Œæ ‡è®°ï¼Œæ”¯æŒå¤šç§åˆ†ç±»ï¼ˆåœ°åŒºã€çŽ¯å¢ƒã€é¡¹ç›®ç­‰ï¼‰ã€‚
   |                             ^^
12 |
13 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/tag.py:11:24
   |
 9 |     """æ ‡ç­¾æ¨¡åž‹ã€‚.
10 |
11 |     ç”¨äºŽå¯¹å®žä¾‹è¿›è¡Œåˆ†ç±»å’Œæ ‡è®°ï¼Œæ”¯æŒå¤šç§åˆ†ç±»ï¼ˆåœ°åŒºã€çŽ¯å¢ƒã€é¡¹ç›®ç­‰ï¼‰ã€‚
   |                                           ^^
12 |
13 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/tag.py:11:34
   |
 9 |     """æ ‡ç­¾æ¨¡åž‹ã€‚.
10 |
11 |     ç”¨äºŽå¯¹å®žä¾‹è¿›è¡Œåˆ†ç±»å’Œæ ‡è®°ï¼Œæ”¯æŒå¤šç§åˆ†ç±»ï¼ˆåœ°åŒºã€çŽ¯å¢ƒã€é¡¹ç›®ç­‰ï¼‰ã€‚
   |                                                               ^^
12 |
13 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/tag.py:15:19
   |
13 |     Attributes:
14 |         id: æ ‡ç­¾ä¸»é”®ã€‚
15 |         name: æ ‡ç­¾ä»£ç ï¼ˆå¦‚ wenzhouï¼‰ï¼Œå”¯ä¸€ã€‚
   |                       ^^
16 |         display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
17 |         category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ locationã€environmentï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/tag.py:15:29
   |
13 |     Attributes:
14 |         id: æ ‡ç­¾ä¸»é”®ã€‚
15 |         name: æ ‡ç­¾ä»£ç ï¼ˆå¦‚ wenzhouï¼‰ï¼Œå”¯ä¸€ã€‚
   |                                   ^^
16 |         display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
17 |         category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ locationã€environmentï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/tag.py:15:30
   |
13 |     Attributes:
14 |         id: æ ‡ç­¾ä¸»é”®ã€‚
15 |         name: æ ‡ç­¾ä»£ç ï¼ˆå¦‚ wenzhouï¼‰ï¼Œå”¯ä¸€ã€‚
   |                                     ^^
16 |         display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
17 |         category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ locationã€environmentï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/tag.py:16:27
   |
14 |         id: æ ‡ç­¾ä¸»é”®ã€‚
15 |         name: æ ‡ç­¾ä»£ç ï¼ˆå¦‚ wenzhouï¼‰ï¼Œå”¯ä¸€ã€‚
16 |         display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
   |                               ^^
17 |         category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ locationã€environmentï¼‰ã€‚
18 |         color: æ ‡ç­¾é¢œè‰²ï¼ˆå¦‚ primaryã€successï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/tag.py:16:32
   |
14 |         id: æ ‡ç­¾ä¸»é”®ã€‚
15 |         name: æ ‡ç­¾ä»£ç ï¼ˆå¦‚ wenzhouï¼‰ï¼Œå”¯ä¸€ã€‚
16 |         display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
   |                                        ^^
17 |         category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ locationã€environmentï¼‰ã€‚
18 |         color: æ ‡ç­¾é¢œè‰²ï¼ˆå¦‚ primaryã€successï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/tag.py:17:23
   |
15 |         name: æ ‡ç­¾ä»£ç ï¼ˆå¦‚ wenzhouï¼‰ï¼Œå”¯ä¸€ã€‚
16 |         display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
17 |         category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ locationã€environmentï¼‰ã€‚
   |                           ^^
18 |         color: æ ‡ç­¾é¢œè‰²ï¼ˆå¦‚ primaryã€successï¼‰ã€‚
19 |         is_active: æ˜¯å¦æ¿€æ´»ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/tag.py:17:46
   |
15 |         name: æ ‡ç­¾ä»£ç ï¼ˆå¦‚ wenzhouï¼‰ï¼Œå”¯ä¸€ã€‚
16 |         display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
17 |         category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ locationã€environmentï¼‰ã€‚
   |                                                     ^^
18 |         color: æ ‡ç­¾é¢œè‰²ï¼ˆå¦‚ primaryã€successï¼‰ã€‚
19 |         is_active: æ˜¯å¦æ¿€æ´»ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/tag.py:18:20
   |
16 |         display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
17 |         category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ locationã€environmentï¼‰ã€‚
18 |         color: æ ‡ç­¾é¢œè‰²ï¼ˆå¦‚ primaryã€successï¼‰ã€‚
   |                        ^^
19 |         is_active: æ˜¯å¦æ¿€æ´»ã€‚
20 |         created_at: åˆ›å»ºæ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/tag.py:18:38
   |
16 |         display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
17 |         category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ locationã€environmentï¼‰ã€‚
18 |         color: æ ‡ç­¾é¢œè‰²ï¼ˆå¦‚ primaryã€successï¼‰ã€‚
   |                                             ^^
19 |         is_active: æ˜¯å¦æ¿€æ´»ã€‚
20 |         created_at: åˆ›å»ºæ—¶é—´ã€‚
   |

FBT001 Boolean-typed positional argument in function definition
  --> app/models/tag.py:45:9
   |
43 |         category: str,
44 |         color: str = "primary",
45 |         is_active: bool = True,
   |         ^^^^^^^^^
46 |     ) -> None:
47 |         """åˆå§‹åŒ–æ ‡ç­¾ã€‚.
   |

FBT002 Boolean default positional argument in function definition
  --> app/models/tag.py:45:9
   |
43 |         category: str,
44 |         color: str = "primary",
45 |         is_active: bool = True,
   |         ^^^^^^^^^
46 |     ) -> None:
47 |         """åˆå§‹åŒ–æ ‡ç­¾ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/tag.py:50:23
   |
49 |         Args:
50 |             name: æ ‡ç­¾ä»£ç ï¼ˆå¦‚ wenzhouï¼‰ï¼Œå¿…é¡»å”¯ä¸€ã€‚
   |                           ^^
51 |             display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
52 |             category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ location=åœ°åŒºã€environment=çŽ¯å¢ƒï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/tag.py:50:33
   |
49 |         Args:
50 |             name: æ ‡ç­¾ä»£ç ï¼ˆå¦‚ wenzhouï¼‰ï¼Œå¿…é¡»å”¯ä¸€ã€‚
   |                                       ^^
51 |             display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
52 |             category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ location=åœ°åŒºã€environment=çŽ¯å¢ƒï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/tag.py:50:34
   |
49 |         Args:
50 |             name: æ ‡ç­¾ä»£ç ï¼ˆå¦‚ wenzhouï¼‰ï¼Œå¿…é¡»å”¯ä¸€ã€‚
   |                                         ^^
51 |             display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
52 |             category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ location=åœ°åŒºã€environment=çŽ¯å¢ƒï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/tag.py:51:31
   |
49 |         Args:
50 |             name: æ ‡ç­¾ä»£ç ï¼ˆå¦‚ wenzhouï¼‰ï¼Œå¿…é¡»å”¯ä¸€ã€‚
51 |             display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
   |                                   ^^
52 |             category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ location=åœ°åŒºã€environment=çŽ¯å¢ƒï¼‰ã€‚
53 |             color: æ ‡ç­¾é¢œè‰²ï¼ˆå¦‚ primary=è“è‰²ã€success=ç»¿è‰²ï¼‰ï¼Œé»˜è®¤ä¸º primaryã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/tag.py:51:36
   |
49 |         Args:
50 |             name: æ ‡ç­¾ä»£ç ï¼ˆå¦‚ wenzhouï¼‰ï¼Œå¿…é¡»å”¯ä¸€ã€‚
51 |             display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
   |                                            ^^
52 |             category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ location=åœ°åŒºã€environment=çŽ¯å¢ƒï¼‰ã€‚
53 |             color: æ ‡ç­¾é¢œè‰²ï¼ˆå¦‚ primary=è“è‰²ã€success=ç»¿è‰²ï¼‰ï¼Œé»˜è®¤ä¸º primaryã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/tag.py:52:27
   |
50 |             name: æ ‡ç­¾ä»£ç ï¼ˆå¦‚ wenzhouï¼‰ï¼Œå¿…é¡»å”¯ä¸€ã€‚
51 |             display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
52 |             category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ location=åœ°åŒºã€environment=çŽ¯å¢ƒï¼‰ã€‚
   |                               ^^
53 |             color: æ ‡ç­¾é¢œè‰²ï¼ˆå¦‚ primary=è“è‰²ã€success=ç»¿è‰²ï¼‰ï¼Œé»˜è®¤ä¸º primaryã€‚
54 |             is_active: æ˜¯å¦æ¿€æ´»ï¼Œé»˜è®¤ä¸º Trueã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/tag.py:52:56
   |
50 |             name: æ ‡ç­¾ä»£ç ï¼ˆå¦‚ wenzhouï¼‰ï¼Œå¿…é¡»å”¯ä¸€ã€‚
51 |             display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
52 |             category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ location=åœ°åŒºã€environment=çŽ¯å¢ƒï¼‰ã€‚
   |                                                                   ^^
53 |             color: æ ‡ç­¾é¢œè‰²ï¼ˆå¦‚ primary=è“è‰²ã€success=ç»¿è‰²ï¼‰ï¼Œé»˜è®¤ä¸º primaryã€‚
54 |             is_active: æ˜¯å¦æ¿€æ´»ï¼Œé»˜è®¤ä¸º Trueã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/tag.py:53:24
   |
51 |             display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
52 |             category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ location=åœ°åŒºã€environment=çŽ¯å¢ƒï¼‰ã€‚
53 |             color: æ ‡ç­¾é¢œè‰²ï¼ˆå¦‚ primary=è“è‰²ã€success=ç»¿è‰²ï¼‰ï¼Œé»˜è®¤ä¸º primaryã€‚
   |                            ^^
54 |             is_active: æ˜¯å¦æ¿€æ´»ï¼Œé»˜è®¤ä¸º Trueã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/tag.py:53:48
   |
51 |             display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
52 |             category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ location=åœ°åŒºã€environment=çŽ¯å¢ƒï¼‰ã€‚
53 |             color: æ ‡ç­¾é¢œè‰²ï¼ˆå¦‚ primary=è“è‰²ã€success=ç»¿è‰²ï¼‰ï¼Œé»˜è®¤ä¸º primaryã€‚
   |                                                           ^^
54 |             is_active: æ˜¯å¦æ¿€æ´»ï¼Œé»˜è®¤ä¸º Trueã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/tag.py:53:49
   |
51 |             display_name: æ˜¾ç¤ºåç§°ï¼ˆå¦‚ æ¸©å·žï¼‰ã€‚
52 |             category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ location=åœ°åŒºã€environment=çŽ¯å¢ƒï¼‰ã€‚
53 |             color: æ ‡ç­¾é¢œè‰²ï¼ˆå¦‚ primary=è“è‰²ã€success=ç»¿è‰²ï¼‰ï¼Œé»˜è®¤ä¸º primaryã€‚
   |                                                             ^^
54 |             is_active: æ˜¯å¦æ¿€æ´»ï¼Œé»˜è®¤ä¸º Trueã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/tag.py:54:28
   |
52 |             category: æ ‡ç­¾åˆ†ç±»ï¼ˆå¦‚ location=åœ°åŒºã€environment=çŽ¯å¢ƒï¼‰ã€‚
53 |             color: æ ‡ç­¾é¢œè‰²ï¼ˆå¦‚ primary=è“è‰²ã€success=ç»¿è‰²ï¼‰ï¼Œé»˜è®¤ä¸º primaryã€‚
54 |             is_active: æ˜¯å¦æ¿€æ´»ï¼Œé»˜è®¤ä¸º Trueã€‚
   |                                ^^
55 |
56 |         """
   |

ANN201 Missing return type annotation for public function `color_value`
  --> app/models/tag.py:64:9
   |
63 |     @property
64 |     def color_value(self):
   |         ^^^^^^^^^^^
65 |         """èŽ·å–å®žé™…é¢œè‰²å€¼ã€‚.
   |
help: Add return type annotation

ANN201 Missing return type annotation for public function `color_name`
  --> app/models/tag.py:74:9
   |
73 |     @property
74 |     def color_name(self):
   |         ^^^^^^^^^^
75 |         """èŽ·å–é¢œè‰²åç§°ã€‚.
   |
help: Add return type annotation

ANN201 Missing return type annotation for public function `css_class`
  --> app/models/tag.py:84:9
   |
83 |     @property
84 |     def css_class(self):
   |         ^^^^^^^^^
85 |         """èŽ·å– CSS ç±»åã€‚.
   |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/tag.py:150:20
    |
149 |         Returns:
150 |             åŒ¹é…çš„æ ‡ç­¾å¯¹è±¡ï¼Œä¸å­˜åœ¨æ—¶è¿”å›ž Noneã€‚
    |                           ^^
151 |
152 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/tag.py:160:22
    |
159 |         Returns:
160 |             æ ‡ç­¾åˆ†ç±»çš„é€‰é¡¹åˆ—è¡¨ï¼Œæ¯é¡¹åŒ…å«åˆ†ç±»ä»£ç å’Œæ˜¾ç¤ºåç§°ã€‚
    |                               ^^
161 |
162 |         """
    |

D205 1 blank line required between summary line and description
 --> app/models/unified_log.py:1:1
  |
1 | / """é²¸è½ - ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿæ•°æ®æ¨¡åž‹
2 | | åŸºäºŽstructlogçš„ç»Ÿä¸€æ—¥å¿—å­˜å‚¨æ¨¡åž‹.
3 | | """
  | |___^
4 |
5 |   from datetime import datetime, timedelta
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/unified_log.py:18:27
   |
16 |     """ç»Ÿä¸€æ—¥å¿—è¡¨ã€‚.
17 |
18 |     åŸºäºŽ structlog çš„ç»Ÿä¸€æ—¥å¿—å­˜å‚¨æ¨¡åž‹ï¼Œè®°å½•ç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­çš„æ‰€æœ‰æ—¥å¿—ä¿¡æ¯ã€‚
   |                                      ^^
19 |     æ”¯æŒå¤šçº§åˆ«æ—¥å¿—ã€æ¨¡å—åˆ†ç±»ã€é”™è¯¯è¿½è¸ªå’Œä¸Šä¸‹æ–‡ä¿¡æ¯å­˜å‚¨ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/unified_log.py:23:25
   |
21 |     Attributes:
22 |         id: ä¸»é”® IDã€‚
23 |         timestamp: æ—¥å¿—æ—¶é—´æˆ³ï¼ˆUTCï¼‰ã€‚
   |                              ^^
24 |         level: æ—¥å¿—çº§åˆ«ï¼ˆDEBUG/INFO/WARNING/ERROR/CRITICALï¼‰ã€‚
25 |         module: æ¨¡å—/ç»„ä»¶åã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/unified_log.py:23:29
   |
21 |     Attributes:
22 |         id: ä¸»é”® IDã€‚
23 |         timestamp: æ—¥å¿—æ—¶é—´æˆ³ï¼ˆUTCï¼‰ã€‚
   |                                   ^^
24 |         level: æ—¥å¿—çº§åˆ«ï¼ˆDEBUG/INFO/WARNING/ERROR/CRITICALï¼‰ã€‚
25 |         module: æ¨¡å—/ç»„ä»¶åã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/unified_log.py:24:20
   |
22 |         id: ä¸»é”® IDã€‚
23 |         timestamp: æ—¥å¿—æ—¶é—´æˆ³ï¼ˆUTCï¼‰ã€‚
24 |         level: æ—¥å¿—çº§åˆ«ï¼ˆDEBUG/INFO/WARNING/ERROR/CRITICALï¼‰ã€‚
   |                        ^^
25 |         module: æ¨¡å—/ç»„ä»¶åã€‚
26 |         message: æ—¥å¿—æ¶ˆæ¯ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/unified_log.py:24:54
   |
22 |         id: ä¸»é”® IDã€‚
23 |         timestamp: æ—¥å¿—æ—¶é—´æˆ³ï¼ˆUTCï¼‰ã€‚
24 |         level: æ—¥å¿—çº§åˆ«ï¼ˆDEBUG/INFO/WARNING/ERROR/CRITICALï¼‰ã€‚
   |                                                           ^^
25 |         module: æ¨¡å—/ç»„ä»¶åã€‚
26 |         message: æ—¥å¿—æ¶ˆæ¯ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/unified_log.py:27:26
   |
25 |         module: æ¨¡å—/ç»„ä»¶åã€‚
26 |         message: æ—¥å¿—æ¶ˆæ¯ã€‚
27 |         traceback: é”™è¯¯å †æ ˆè¿½è¸ªï¼ˆä»… ERROR/CRITICALï¼‰ã€‚
   |                                ^^
28 |         context: é™„åŠ ä¸Šä¸‹æ–‡ï¼ˆJSON æ ¼å¼ï¼‰ã€‚
29 |         created_at: è®°å½•åˆ›å»ºæ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/unified_log.py:27:43
   |
25 |         module: æ¨¡å—/ç»„ä»¶åã€‚
26 |         message: æ—¥å¿—æ¶ˆæ¯ã€‚
27 |         traceback: é”™è¯¯å †æ ˆè¿½è¸ªï¼ˆä»… ERROR/CRITICALï¼‰ã€‚
   |                                                   ^^
28 |         context: é™„åŠ ä¸Šä¸‹æ–‡ï¼ˆJSON æ ¼å¼ï¼‰ã€‚
29 |         created_at: è®°å½•åˆ›å»ºæ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/unified_log.py:28:23
   |
26 |         message: æ—¥å¿—æ¶ˆæ¯ã€‚
27 |         traceback: é”™è¯¯å †æ ˆè¿½è¸ªï¼ˆä»… ERROR/CRITICALï¼‰ã€‚
28 |         context: é™„åŠ ä¸Šä¸‹æ–‡ï¼ˆJSON æ ¼å¼ï¼‰ã€‚
   |                            ^^
29 |         created_at: è®°å½•åˆ›å»ºæ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/unified_log.py:28:31
   |
26 |         message: æ—¥å¿—æ¶ˆæ¯ã€‚
27 |         traceback: é”™è¯¯å †æ ˆè¿½è¸ªï¼ˆä»… ERROR/CRITICALï¼‰ã€‚
28 |         context: é™„åŠ ä¸Šä¸‹æ–‡ï¼ˆJSON æ ¼å¼ï¼‰ã€‚
   |                                       ^^
29 |         created_at: è®°å½•åˆ›å»ºæ—¶é—´ã€‚
   |

ERA001 Found commented-out code
  --> app/models/unified_log.py:38:5
   |
36 |     id = Column(Integer, primary_key=True, autoincrement=True)
37 |
38 |     # æ—¥å¿—æ—¶é—´æˆ³ (UTC)
   |     ^^^^^^^^^^^^^^^^^^
39 |     timestamp = Column(DateTime(timezone=True), nullable=False, index=True)
   |
help: Remove commented-out code

ERA001 Found commented-out code
  --> app/models/unified_log.py:50:5
   |
48 |     message = Column(Text, nullable=False)
49 |
50 |     # é”™è¯¯å †æ ˆè¿½è¸ª (ä»…ERROR/CRITICAL)
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
51 |     traceback = Column(Text, nullable=True)
   |
help: Remove commented-out code

ERA001 Found commented-out code
  --> app/models/unified_log.py:53:5
   |
51 |     traceback = Column(Text, nullable=True)
52 |
53 |     # é™„åŠ ä¸Šä¸‹æ–‡ (JSONæ ¼å¼)
   |     ^^^^^^^^^^^^^^^^^^^^^^^
54 |     context = Column(JSON, nullable=True)
   |
help: Remove commented-out code

PLR0913 Too many arguments in function definition (6 > 5)
   --> app/models/unified_log.py:98:9
    |
 97 |     @classmethod
 98 |     def create_log_entry(
    |         ^^^^^^^^^^^^^^^^
 99 |         cls,
100 |         level: LogLevel,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/unified_log.py:113:30
    |
111 |             module: è®°å½•æ¥æºæ¨¡å—ã€‚
112 |             message: æ—¥å¿—æ¶ˆæ¯ã€‚
113 |             traceback: é”™è¯¯å †æ ˆä¿¡æ¯ï¼Œå¯é€‰ã€‚
    |                                    ^^
114 |             context: é¢å¤–ä¸Šä¸‹æ–‡å­—å…¸ï¼Œå¯é€‰ã€‚
115 |             timestamp: æŒ‡å®šæ—¥å¿—æ—¶é—´ï¼Œæœªæä¾›æ—¶ä½¿ç”¨å½“å‰æ—¶é—´ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/unified_log.py:114:29
    |
112 |             message: æ—¥å¿—æ¶ˆæ¯ã€‚
113 |             traceback: é”™è¯¯å †æ ˆä¿¡æ¯ï¼Œå¯é€‰ã€‚
114 |             context: é¢å¤–ä¸Šä¸‹æ–‡å­—å…¸ï¼Œå¯é€‰ã€‚
    |                                    ^^
115 |             timestamp: æŒ‡å®šæ—¥å¿—æ—¶é—´ï¼Œæœªæä¾›æ—¶ä½¿ç”¨å½“å‰æ—¶é—´ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/unified_log.py:115:30
    |
113 |             traceback: é”™è¯¯å †æ ˆä¿¡æ¯ï¼Œå¯é€‰ã€‚
114 |             context: é¢å¤–ä¸Šä¸‹æ–‡å­—å…¸ï¼Œå¯é€‰ã€‚
115 |             timestamp: æŒ‡å®šæ—¥å¿—æ—¶é—´ï¼Œæœªæä¾›æ—¶ä½¿ç”¨å½“å‰æ—¶é—´ã€‚
    |                                    ^^
116 |
117 |         Returns:
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/unified_log.py:125:23
    |
123 |             timestamp = time_utils.now()
124 |         elif timestamp.tzinfo is None:
125 |             # å¦‚æžœæ²¡æœ‰æ—¶åŒºä¿¡æ¯ï¼Œå‡è®¾ä¸ºUTCæ—¶é—´
    |                               ^^
126 |             from app.utils.time_utils import UTC_TZ
    |

PLC0415 `import` should be at the top-level of a file
   --> app/models/unified_log.py:126:13
    |
124 |         elif timestamp.tzinfo is None:
125 |             # å¦‚æžœæ²¡æœ‰æ—¶åŒºä¿¡æ¯ï¼Œå‡è®¾ä¸ºUTCæ—¶é—´
126 |             from app.utils.time_utils import UTC_TZ
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
127 |
128 |             timestamp = timestamp.replace(tzinfo=UTC_TZ)
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/models/unified_log.py:144:27
    |
143 |         Args:
144 |             hours: ç»Ÿè®¡çš„æ—¶é—´èŒƒå›´ï¼ˆå°æ—¶ï¼‰ï¼Œé»˜è®¤ 24 å°æ—¶ã€‚
    |                                  ^^
145 |
146 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/models/unified_log.py:144:30
    |
143 |         Args:
144 |             hours: ç»Ÿè®¡çš„æ—¶é—´èŒƒå›´ï¼ˆå°æ—¶ï¼‰ï¼Œé»˜è®¤ 24 å°æ—¶ã€‚
    |                                        ^^
145 |
146 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/unified_log.py:144:31
    |
143 |         Args:
144 |             hours: ç»Ÿè®¡çš„æ—¶é—´èŒƒå›´ï¼ˆå°æ—¶ï¼‰ï¼Œé»˜è®¤ 24 å°æ—¶ã€‚
    |                                          ^^
145 |
146 |         Returns:
    |

PLC0415 `import` should be at the top-level of a file
   --> app/models/unified_log.py:150:9
    |
149 |         """
150 |         from sqlalchemy import func
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
151 |
152 |         start_time = time_utils.now() - timedelta(hours=hours)
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/user.py:13:19
   |
11 |     """ç”¨æˆ·æ¨¡åž‹ã€‚.
12 |
13 |     ç®¡ç†ç³»ç»Ÿç”¨æˆ·çš„è®¤è¯å’ŒæŽˆæƒä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·åã€å¯†ç ã€è§’è‰²ç­‰ã€‚
   |                                 ^^
14 |     ç»§æ‰¿ Flask-Login çš„ UserMixin æä¾›ä¼šè¯ç®¡ç†åŠŸèƒ½ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/user.py:17:18
   |
16 |     Attributes:
17 |         id: ç”¨æˆ· IDï¼Œä¸»é”®ã€‚
   |                    ^^
18 |         username: ç”¨æˆ·åï¼Œå”¯ä¸€ç´¢å¼•ã€‚
19 |         password: åŠ å¯†åŽçš„å¯†ç ï¼ˆbcryptï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/user.py:18:22
   |
16 |     Attributes:
17 |         id: ç”¨æˆ· IDï¼Œä¸»é”®ã€‚
18 |         username: ç”¨æˆ·åï¼Œå”¯ä¸€ç´¢å¼•ã€‚
   |                         ^^
19 |         password: åŠ å¯†åŽçš„å¯†ç ï¼ˆbcryptï¼‰ã€‚
20 |         role: ç”¨æˆ·è§’è‰²ï¼Œå¯é€‰å€¼ï¼šadminã€userã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/user.py:19:25
   |
17 |         id: ç”¨æˆ· IDï¼Œä¸»é”®ã€‚
18 |         username: ç”¨æˆ·åï¼Œå”¯ä¸€ç´¢å¼•ã€‚
19 |         password: åŠ å¯†åŽçš„å¯†ç ï¼ˆbcryptï¼‰ã€‚
   |                               ^^
20 |         role: ç”¨æˆ·è§’è‰²ï¼Œå¯é€‰å€¼ï¼šadminã€userã€‚
21 |         created_at: åˆ›å»ºæ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/user.py:19:32
   |
17 |         id: ç”¨æˆ· IDï¼Œä¸»é”®ã€‚
18 |         username: ç”¨æˆ·åï¼Œå”¯ä¸€ç´¢å¼•ã€‚
19 |         password: åŠ å¯†åŽçš„å¯†ç ï¼ˆbcryptï¼‰ã€‚
   |                                       ^^
20 |         role: ç”¨æˆ·è§’è‰²ï¼Œå¯é€‰å€¼ï¼šadminã€userã€‚
21 |         created_at: åˆ›å»ºæ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/models/user.py:20:19
   |
18 |         username: ç”¨æˆ·åï¼Œå”¯ä¸€ç´¢å¼•ã€‚
19 |         password: åŠ å¯†åŽçš„å¯†ç ï¼ˆbcryptï¼‰ã€‚
20 |         role: ç”¨æˆ·è§’è‰²ï¼Œå¯é€‰å€¼ï¼šadminã€userã€‚
   |                       ^^
21 |         created_at: åˆ›å»ºæ—¶é—´ã€‚
22 |         last_login: æœ€åŽç™»å½•æ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/models/user.py:20:23
   |
18 |         username: ç”¨æˆ·åï¼Œå”¯ä¸€ç´¢å¼•ã€‚
19 |         password: åŠ å¯†åŽçš„å¯†ç ï¼ˆbcryptï¼‰ã€‚
20 |         role: ç”¨æˆ·è§’è‰²ï¼Œå¯é€‰å€¼ï¼šadminã€userã€‚
   |                               ^^
21 |         created_at: åˆ›å»ºæ—¶é—´ã€‚
22 |         last_login: æœ€åŽç™»å½•æ—¶é—´ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/models/user.py:56:16
   |
55 |     def set_password(self, password: str) -> None:
56 |         """è®¾ç½®å¯†ç ï¼ˆåŠ å¯†ï¼‰ã€‚.
   |                    ^^
57 |
58 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/models/user.py:56:19
   |
55 |     def set_password(self, password: str) -> None:
56 |         """è®¾ç½®å¯†ç ï¼ˆåŠ å¯†ï¼‰ã€‚.
   |                          ^^
57 |
58 |         Args:
   |

PLR2004 Magic value used in comparison, consider replacing `8` with a constant variable
  --> app/models/user.py:69:28
   |
67 |         """
68 |         # å¢žåŠ å¯†ç å¼ºåº¦éªŒè¯
69 |         if len(password) < 8:
   |                            ^
70 |             error_msg = "å¯†ç é•¿åº¦è‡³å°‘8ä½"
71 |             raise ValueError(error_msg)
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/user.py:124:23
    |
122 |     @classmethod
123 |     def active_admin_count(cls, *, exclude_user_id: int | None = None) -> int:
124 |         """ç»Ÿè®¡å½“å‰æ´»è·ƒç®¡ç†å‘˜æ•°é‡ï¼Œå¯é€‰æŽ’é™¤æŒ‡å®šç”¨æˆ·ã€‚.
    |                                  ^^
125 |
126 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/models/user.py:127:40
    |
126 |         Args:
127 |             exclude_user_id: éœ€è¦æŽ’é™¤çš„ç”¨æˆ· IDï¼Œç”¨äºŽç¼–è¾‘åœºæ™¯ã€‚
    |                                               ^^
128 |
129 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/routes/__init__.py:3:15
  |
1 | """è·¯ç”±æ¨¡å—ã€‚.
2 |
3 | å®šä¹‰æ‰€æœ‰ HTTP è·¯ç”±ç«¯ç‚¹ï¼Œå¤„ç†å®¢æˆ·ç«¯è¯·æ±‚å¹¶è¿”å›žå“åº”ã€‚
  |                       ^^
  |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/routes/__init__.py:6:5
  |
6 | ä¸»è¦è·¯ç”±ï¼š
  |         ^^
7 | - auth: è®¤è¯ç›¸å…³è·¯ç”±ï¼ˆç™»å½•ã€ç™»å‡ºã€ä¿®æ”¹å¯†ç ï¼‰
8 | - instances: å®žä¾‹ç®¡ç†è·¯ç”±
  |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
 --> app/routes/__init__.py:7:15
  |
6 | ä¸»è¦è·¯ç”±ï¼š
7 | - auth: è®¤è¯ç›¸å…³è·¯ç”±ï¼ˆç™»å½•ã€ç™»å‡ºã€ä¿®æ”¹å¯†ç ï¼‰
  |                     ^^
8 | - instances: å®žä¾‹ç®¡ç†è·¯ç”±
9 | - credentials: å‡­æ®ç®¡ç†è·¯ç”±
  |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
 --> app/routes/__init__.py:7:26
  |
6 | ä¸»è¦è·¯ç”±ï¼š
7 | - auth: è®¤è¯ç›¸å…³è·¯ç”±ï¼ˆç™»å½•ã€ç™»å‡ºã€ä¿®æ”¹å¯†ç ï¼‰
  |                                           ^^
8 | - instances: å®žä¾‹ç®¡ç†è·¯ç”±
9 | - credentials: å‡­æ®ç®¡ç†è·¯ç”±
  |

F401 `flask.Blueprint` imported but unused
  --> app/routes/__init__.py:22:19
   |
20 | """
21 |
22 | from flask import Blueprint
   |                   ^^^^^^^^^
23 |
24 | # åˆ›å»ºä¸»è“å›¾
   |
help: Remove unused import: `flask.Blueprint`

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/__init__.py:26:12
   |
24 | # åˆ›å»ºä¸»è“å›¾
25 |
26 | # è¯¥æ–‡ä»¶ä»…ä½œä¸ºåŒ…æ ‡è¯†ï¼Œé¿å…åœ¨å¯¼å…¥é˜¶æ®µå¼•å…¥å¾ªçŽ¯ä¾èµ–ã€‚
   |                     ^^
   |

INP001 File `app/routes/accounts/classifications.py` is part of an implicit namespace package. Add an `__init__.py`.
--> app/routes/accounts/classifications.py:1:1

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/routes/accounts/classifications.py:2:14
  |
2 | """Accounts åŸŸï¼šè´¦æˆ·åˆ†ç±»ç®¡ç†è·¯ç”±ã€‚."""
  |               ^^
3 |
4 | import json
  |

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/accounts/classifications.py:12:24
   |
10 | from app.constants import HttpStatus
11 | from app.constants.colors import ThemeColors
12 | from app.errors import SystemError, ValidationError
   |                        ^^^^^^^^^^^
13 | from app.models.account_classification import (
14 |     AccountClassification,
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/accounts/classifications.py:97:16
   |
95 |     """èŽ·å–æ‰€æœ‰è´¦æˆ·åˆ†ç±»ã€‚.
96 |
97 |     æŒ‰ä¼˜å…ˆçº§å’Œåˆ›å»ºæ—¶é—´æŽ’åºï¼ŒåŒ…å«è§„åˆ™æ•°é‡ç»Ÿè®¡ã€‚
   |                           ^^
98 |
99 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/classifications.py:100:28
    |
 99 |     Returns:
100 |         (JSON å“åº”, HTTP çŠ¶æ€ç )ï¼ŒåŒ…å«åˆ†ç±»åˆ—è¡¨ã€‚
    |                                 ^^
101 |
102 |     Raises:
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/classifications.py:268:20
    |
266 |     if rule_count or assignment_count:
267 |         return jsonify_unified_error_message(
268 |             "åˆ†ç±»ä»åœ¨ä½¿ç”¨ï¼Œè¯·å…ˆè¿ç§»å…³è”è§„åˆ™/è´¦æˆ·åŽå†åˆ é™¤",
    |                          ^^
269 |             status_code=HttpStatus.CONFLICT,
270 |             message_key="CLASSIFICATION_IN_USE",
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/classifications.py:304:28
    |
303 |     Returns:
304 |         (JSON å“åº”, HTTP çŠ¶æ€ç )ï¼ŒåŒ…å«è§„åˆ™åˆ—è¡¨ã€‚
    |                                 ^^
305 |
306 |     Raises:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/classifications.py:310:36
    |
309 |     Query Parameters:
310 |         classification_id: åˆ†ç±» ID ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                                        ^^
311 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/classifications.py:311:25
    |
309 |     Query Parameters:
310 |         classification_id: åˆ†ç±» ID ç­›é€‰ï¼Œå¯é€‰ã€‚
311 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                                ^^
312 |
313 |     """
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/accounts/classifications.py:354:16
    |
352 | @view_required
353 | def list_rules() -> tuple[Response, int]:
354 |     """èŽ·å–æ‰€æœ‰è§„åˆ™åˆ—è¡¨ï¼ˆæŒ‰æ•°æ®åº“ç±»åž‹åˆ†ç»„ï¼‰ã€‚.
    |                        ^^
355 |
356 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/accounts/classifications.py:354:25
    |
352 | @view_required
353 | def list_rules() -> tuple[Response, int]:
354 |     """èŽ·å–æ‰€æœ‰è§„åˆ™åˆ—è¡¨ï¼ˆæŒ‰æ•°æ®åº“ç±»åž‹åˆ†ç»„ï¼‰ã€‚.
    |                                          ^^
355 |
356 |     Returns:
    |

PERF401 Use a list comprehension to create a transformed list
   --> app/routes/accounts/classifications.py:376:9
    |
374 |       result = []
375 |       for rule in rules:
376 | /         result.append(
377 | |             {
378 | |                 "id": rule.id,
379 | |                 "rule_name": rule.rule_name,
380 | |                 "classification_id": rule.classification_id,
381 | |                 "classification_name": rule.classification.name if rule.classification else None,
382 | |                 "db_type": rule.db_type,
383 | |                 "rule_expression": rule.rule_expression,
384 | |                 "is_active": rule.is_active,
385 | |                 "matched_accounts_count": 0,
386 | |                 "created_at": rule.created_at.isoformat() if rule.created_at else None,
387 | |                 "updated_at": rule.updated_at.isoformat() if rule.updated_at else None,
388 | |             },
389 | |         )
    | |_________^
390 |
391 |       rules_by_db_type: dict[str, list[dict[str, object]]] = {}
    |
help: Replace for loop with list comprehension

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/classifications.py:427:38
    |
425 |             ]
426 |         except ValueError as exc:
427 |             msg = "rule_ids å‚æ•°å¿…é¡»ä¸ºæ•´æ•°IDï¼Œä½¿ç”¨é€—å·åˆ†éš”"
    |                                             ^^
428 |             raise ValidationError(msg) from exc
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/classifications.py:580:28
    |
579 |     Returns:
580 |         (JSON å“åº”, HTTP çŠ¶æ€ç )ï¼ŒåŒ…å«åˆ†ç±»ç»“æžœç»Ÿè®¡ã€‚
    |                                 ^^
581 |
582 |     Raises:
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/accounts/classifications.py:722:7
    |
721 | # ---------------------------------------------------------------------------
722 | # è¡¨å•è·¯ç”±ï¼ˆç‹¬ç«‹é¡µé¢ï¼‰
    |           ^^
723 | # ---------------------------------------------------------------------------
724 | _classification_create_view = AccountClassificationFormView.as_view("classification_create_form")
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/accounts/classifications.py:722:12
    |
721 | # ---------------------------------------------------------------------------
722 | # è¡¨å•è·¯ç”±ï¼ˆç‹¬ç«‹é¡µé¢ï¼‰
    |                     ^^
723 | # ---------------------------------------------------------------------------
724 | _classification_create_view = AccountClassificationFormView.as_view("classification_create_form")
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/accounts/classifications.py:773:5
    |
772 |     """
773 |     from app.models.permission_config import PermissionConfig
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
774 |
775 |     # ä»Žæ•°æ®åº“èŽ·å–æƒé™é…ç½®
    |

INP001 File `app/routes/accounts/ledgers.py` is part of an implicit namespace package. Add an `__init__.py`.
--> app/routes/accounts/ledgers.py:1:1

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/routes/accounts/ledgers.py:2:14
  |
2 | """Accounts åŸŸï¼šè´¦æˆ·å°è´¦ï¼ˆLedgersï¼‰è§†å›¾ä¸Ž APIã€‚."""
  |               ^^
3 |
4 | from flask import Blueprint, Response, render_template, request
  |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
 --> app/routes/accounts/ledgers.py:2:19
  |
2 | """Accounts åŸŸï¼šè´¦æˆ·å°è´¦ï¼ˆLedgersï¼‰è§†å›¾ä¸Ž APIã€‚."""
  |                         ^^
3 |
4 | from flask import Blueprint, Response, render_template, request
  |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
 --> app/routes/accounts/ledgers.py:2:27
  |
2 | """Accounts åŸŸï¼šè´¦æˆ·å°è´¦ï¼ˆLedgersï¼‰è§†å›¾ä¸Ž APIã€‚."""
  |                                  ^^
3 |
4 | from flask import Blueprint, Response, render_template, request
  |

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/accounts/ledgers.py:9:24
   |
 8 | from app.constants import DATABASE_TYPES, DatabaseType
 9 | from app.errors import SystemError
   |                        ^^^^^^^^^^^
10 | from app.models.account_classification import (
11 |     AccountClassification,
   |

C901 `list_accounts` is too complex (18 > 10)
  --> app/routes/accounts/ledgers.py:32:5
   |
30 | @login_required
31 | @view_required
32 | def list_accounts(db_type: str | None = None) -> str | tuple[Response, int]:
   |     ^^^^^^^^^^^^^
33 |     """è´¦æˆ·åˆ—è¡¨é¡µé¢ã€‚.
   |

PLR0912 Too many branches (17 > 12)
  --> app/routes/accounts/ledgers.py:32:5
   |
30 | @login_required
31 | @view_required
32 | def list_accounts(db_type: str | None = None) -> str | tuple[Response, int]:
   |     ^^^^^^^^^^^^^
33 |     """è´¦æˆ·åˆ—è¡¨é¡µé¢ã€‚.
   |

PLR0915 Too many statements (65 > 50)
  --> app/routes/accounts/ledgers.py:32:5
   |
30 | @login_required
31 | @view_required
32 | def list_accounts(db_type: str | None = None) -> str | tuple[Response, int]:
   |     ^^^^^^^^^^^^^
33 |     """è´¦æˆ·åˆ—è¡¨é¡µé¢ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/accounts/ledgers.py:35:11
   |
33 |     """è´¦æˆ·åˆ—è¡¨é¡µé¢ã€‚.
34 |
35 |     æ˜¾ç¤ºè´¦æˆ·åˆ—è¡¨ï¼Œæ”¯æŒæŒ‰æ•°æ®åº“ç±»åž‹ã€å®žä¾‹ã€æœç´¢å…³é”®è¯ã€é”å®šçŠ¶æ€ã€
   |                 ^^
36 |     è¶…çº§ç”¨æˆ·çŠ¶æ€ã€æ’ä»¶ã€æ ‡ç­¾å’Œåˆ†ç±»è¿›è¡Œç­›é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/accounts/ledgers.py:39:25
   |
38 |     Args:
39 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰å€¼ï¼šmysql/postgresql/oracle/sqlserver/allã€‚
   |                                ^^
40 |
41 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/routes/accounts/ledgers.py:39:29
   |
38 |     Args:
39 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰å€¼ï¼šmysql/postgresql/oracle/sqlserver/allã€‚
   |                                        ^^
40 |
41 |     Returns:
   |

PLC0415 `import` should be at the top-level of a file
  --> app/routes/accounts/ledgers.py:76:9
   |
74 |     # æœç´¢è¿‡æ»¤ - æ”¯æŒç”¨æˆ·åã€å®žä¾‹åç§°ã€IPåœ°å€æœç´¢
75 |     if search:
76 |         from app import db
   |         ^^^^^^^^^^^^^^^^^^
77 |         # é€šè¿‡JOINå®žä¾‹è¡¨æ¥æœç´¢å®žä¾‹åç§°å’ŒIPåœ°å€
78 |         query = query.join(Instance, AccountPermission.instance_id == Instance.id)
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/accounts/ledgers.py:87:13
   |
85 |         )
86 |
87 |     # é”å®šçŠ¶æ€è¿‡æ»¤ï¼ˆåŸºäºŽ AccountPermission.is_lockedï¼‰
   |                   ^^
88 |     if is_locked is not None:
89 |         if is_locked == "true":
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/accounts/ledgers.py:87:44
   |
85 |         )
86 |
87 |     # é”å®šçŠ¶æ€è¿‡æ»¤ï¼ˆåŸºäºŽ AccountPermission.is_lockedï¼‰
   |                                                     ^^
88 |     if is_locked is not None:
89 |         if is_locked == "true":
   |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/accounts/ledgers.py:104:16
    |
102 |             query = query.join(Instance).join(Instance.tags).filter(Tag.name.in_(tags))
103 |             # åº”ç”¨æ ‡ç­¾è¿‡æ»¤
104 |         except Exception as e:
    |                ^^^^^^^^^
105 |             log_error(
106 |                 "æ ‡ç­¾è¿‡æ»¤å¤±è´¥",
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/ledgers.py:111:23
    |
109 |                 error=str(e),
110 |             )
111 |             # å¦‚æžœæ ‡ç­¾è¿‡æ»¤å¤±è´¥ï¼Œç»§ç»­æ‰§è¡Œä½†ä¸è¿›è¡Œæ ‡ç­¾è¿‡æ»¤
    |                               ^^
112 |     # æ ‡ç­¾è¿‡æ»¤é€»è¾‘
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/accounts/ledgers.py:114:21
    |
112 |     # æ ‡ç­¾è¿‡æ»¤é€»è¾‘
113 |
114 |     # åˆ†ç±»è¿‡æ»¤ - ä½¿ç”¨åˆ†é…è¡¨æŸ¥è¯¢ï¼ˆçŽ°åœ¨åˆ†é…è¡¨æ•°æ®æ˜¯å‡†ç¡®çš„ï¼‰
    |                                ^^
115 |     if classification_filter:
116 |         from app.models.account_classification import AccountClassification, AccountClassificationAssignment
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/accounts/ledgers.py:114:33
    |
112 |     # æ ‡ç­¾è¿‡æ»¤é€»è¾‘
113 |
114 |     # åˆ†ç±»è¿‡æ»¤ - ä½¿ç”¨åˆ†é…è¡¨æŸ¥è¯¢ï¼ˆçŽ°åœ¨åˆ†é…è¡¨æ•°æ®æ˜¯å‡†ç¡®çš„ï¼‰
    |                                                        ^^
115 |     if classification_filter:
116 |         from app.models.account_classification import AccountClassification, AccountClassificationAssignment
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/accounts/ledgers.py:116:9
    |
114 |     # åˆ†ç±»è¿‡æ»¤ - ä½¿ç”¨åˆ†é…è¡¨æŸ¥è¯¢ï¼ˆçŽ°åœ¨åˆ†é…è¡¨æ•°æ®æ˜¯å‡†ç¡®çš„ï¼‰
115 |     if classification_filter:
116 |         from app.models.account_classification import AccountClassification, AccountClassificationAssignment
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
117 |
118 |         try:
    |

E501 Line too long (123 > 120)
   --> app/routes/accounts/ledgers.py:126:121
    |
124 |                 query.join(AccountClassificationAssignment)
125 |                 .join(AccountClassification)
126 |                 .filter(AccountClassification.id == classification_id, AccountClassificationAssignment.is_active.is_(True))
    |                                                                                                                         ^^^
127 |             )
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/ledgers.py:136:21
    |
134 |                 error=str(e),
135 |             )
136 |             # å¦‚æžœè½¬æ¢å¤±è´¥ï¼Œå¿½ç•¥åˆ†ç±»è¿‡æ»¤
    |                           ^^
137 |
138 |     # æŽ’åº
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/accounts/ledgers.py:169:5
    |
168 |     # èŽ·å–è´¦æˆ·åˆ†ç±»ä¿¡æ¯
169 |     from app.models.account_classification import AccountClassificationAssignment
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
170 |
171 |     classifications = {}
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/ledgers.py:248:35
    |
247 |     Returns:
248 |         (payload, status_code) çš„å…ƒç»„ï¼ŒæˆåŠŸæ—¶åŒ…å«æƒé™è¯¦æƒ…ã€‚
    |                                      ^^
249 |
250 |     """
    |

C901 `list_accounts_data` is too complex (18 > 10)
   --> app/routes/accounts/ledgers.py:313:5
    |
311 | @login_required
312 | @view_required
313 | def list_accounts_data() -> Response:
    |     ^^^^^^^^^^^^^^^^^^
314 |     """Grid.js è´¦æˆ·åˆ—è¡¨ APIã€‚.
    |

PLR0912 Too many branches (17 > 12)
   --> app/routes/accounts/ledgers.py:313:5
    |
311 | @login_required
312 | @view_required
313 | def list_accounts_data() -> Response:
    |     ^^^^^^^^^^^^^^^^^^
314 |     """Grid.js è´¦æˆ·åˆ—è¡¨ APIã€‚.
    |

PLR0915 Too many statements (62 > 50)
   --> app/routes/accounts/ledgers.py:313:5
    |
311 | @login_required
312 | @view_required
313 | def list_accounts_data() -> Response:
    |     ^^^^^^^^^^^^^^^^^^
314 |     """Grid.js è´¦æˆ·åˆ—è¡¨ APIã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/ledgers.py:317:18
    |
316 |     Returns:
317 |         JSON å“åº”å¯¹è±¡ï¼ŒåŒ…å«åˆ†é¡µåŽçš„è´¦æˆ·æ•°æ®ã€‚
    |                      ^^
318 |
319 |     """
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/accounts/ledgers.py:369:16
    |
367 |         try:
368 |             query = query.join(Instance).join(Instance.tags).filter(Tag.name.in_(tags))
369 |         except Exception as exc:
    |                ^^^^^^^^^
370 |             log_error(
371 |                 "æ ‡ç­¾è¿‡æ»¤å¤±è´¥",
    |

INP001 File `app/routes/accounts/statistics.py` is part of an implicit namespace package. Add an `__init__.py`.
--> app/routes/accounts/statistics.py:1:1

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/routes/accounts/statistics.py:1:14
  |
1 | """Accounts åŸŸï¼šç»Ÿè®¡è§†å›¾ä¸Ž APIã€‚."""
  |               ^^
2 |
3 | from flask import Blueprint, Response, flash, render_template, request
  |

A004 Import `SystemError` is shadowing a Python builtin
 --> app/routes/accounts/statistics.py:7:24
  |
6 | from app.constants import FlashCategory
7 | from app.errors import SystemError
  |                        ^^^^^^^^^^^
8 | from app.models.instance import Instance
9 | from app.services.statistics.account_statistics_service import (
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/accounts/statistics.py:30:18
   |
29 |     Returns:
30 |         æ¸²æŸ“çš„è´¦æˆ·ç»Ÿè®¡é¡µé¢ï¼ŒåŒ…å«ç»Ÿè®¡æ•°æ®ã€æœ€è¿‘åŒæ­¥è®°å½•å’Œæ´»è·ƒå®žä¾‹åˆ—è¡¨ã€‚
   |                           ^^
31 |
32 |     """
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/accounts/statistics.py:37:26
   |
35 |     except SystemError:
36 |         stats = empty_statistics()
37 |         flash("èŽ·å–è´¦æˆ·ç»Ÿè®¡ä¿¡æ¯å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•", FlashCategory.ERROR)
   |                                    ^^
38 |
39 |     from app.models.sync_session import SyncSession
   |

PLC0415 `import` should be at the top-level of a file
  --> app/routes/accounts/statistics.py:39:5
   |
37 |         flash("èŽ·å–è´¦æˆ·ç»Ÿè®¡ä¿¡æ¯å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•", FlashCategory.ERROR)
38 |
39 |     from app.models.sync_session import SyncSession
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
40 |
41 |     recent_syncs = SyncSession.query.order_by(SyncSession.created_at.desc()).limit(10).all()
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/accounts/statistics.py:60:28
   |
59 |     Returns:
60 |         (JSON å“åº”, HTTP çŠ¶æ€ç )ï¼ŒåŒ…å«èšåˆç»Ÿè®¡æ•°æ®ã€‚
   |                                 ^^
61 |
62 |     Raises:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/accounts/statistics.py:86:28
   |
85 |     Returns:
86 |         (JSON å“åº”, HTTP çŠ¶æ€ç )ï¼ŒåŒ…å«ç»Ÿè®¡æ±‡æ€»æ•°æ®ã€‚
   |                                 ^^
87 |
88 |     Query Parameters:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/accounts/statistics.py:89:30
   |
88 |     Query Parameters:
89 |         instance_id: å®žä¾‹ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
   |                                  ^^
90 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/accounts/statistics.py:90:25
   |
88 |     Query Parameters:
89 |         instance_id: å®žä¾‹ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
90 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
   |                                ^^
91 |
92 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/statistics.py:107:28
    |
106 |     Returns:
107 |         (JSON å“åº”, HTTP çŠ¶æ€ç )ï¼ŒåŒ…å«å„æ•°æ®åº“ç±»åž‹çš„è´¦æˆ·ç»Ÿè®¡ã€‚
    |                                 ^^
108 |
109 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/statistics.py:121:28
    |
120 |     Returns:
121 |         (JSON å“åº”, HTTP çŠ¶æ€ç )ï¼ŒåŒ…å«å„åˆ†ç±»çš„è´¦æˆ·ç»Ÿè®¡ã€‚
    |                                 ^^
122 |
123 |     """
    |

INP001 File `app/routes/accounts/sync.py` is part of an implicit namespace package. Add an `__init__.py`.
--> app/routes/accounts/sync.py:1:1

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/routes/accounts/sync.py:2:14
  |
2 | """Accounts åŸŸï¼šè´¦æˆ·åŒæ­¥ API è·¯ç”±ã€‚."""
  |               ^^
3 |
4 | import threading
  |

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/accounts/sync.py:11:39
   |
 9 | from app import db
10 | from app.constants.sync_constants import SyncOperationType
11 | from app.errors import NotFoundError, SystemError, ValidationError as AppValidationError
   |                                       ^^^^^^^^^^^
12 | from app.models.instance import Instance
13 | from app.services.accounts_sync import accounts_sync_service
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/accounts/sync.py:52:23
   |
51 |     Args:
52 |         result: åŒæ­¥ç»“æžœå­—å…¸ï¼Œå¯èƒ½ä¸º Noneã€‚
   |                             ^^
53 |         context: ä¸Šä¸‹æ–‡æè¿°ï¼Œç”¨äºŽç”Ÿæˆé»˜è®¤æ¶ˆæ¯ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/accounts/sync.py:53:23
   |
51 |     Args:
52 |         result: åŒæ­¥ç»“æžœå­—å…¸ï¼Œå¯èƒ½ä¸º Noneã€‚
53 |         context: ä¸Šä¸‹æ–‡æè¿°ï¼Œç”¨äºŽç”Ÿæˆé»˜è®¤æ¶ˆæ¯ã€‚
   |                            ^^
54 |
55 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/accounts/sync.py:81:19
   |
79 |     """è§¦å‘åŽå°æ‰¹é‡åŒæ­¥æ‰€æœ‰å®žä¾‹çš„è´¦æˆ·ä¿¡æ¯ã€‚.
80 |
81 |     åœ¨åŽå°çº¿ç¨‹ä¸­å¯åŠ¨æ‰¹é‡åŒæ­¥ä»»åŠ¡ï¼Œä¸é˜»å¡žè¯·æ±‚ã€‚
   |                                 ^^
82 |
83 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/accounts/sync.py:84:16
   |
83 |     Returns:
84 |         JSON å“åº”ï¼ŒåŒ…å«ä»»åŠ¡ IDã€‚
   |                  ^^
85 |
86 |     Raises:
   |

TRY301 Abstract `raise` to an inner function
   --> app/routes/accounts/sync.py:102:13
    |
100 |             )
101 |             msg = "æ²¡æœ‰æ‰¾åˆ°æ´»è·ƒçš„æ•°æ®åº“å®žä¾‹"
102 |             raise AppValidationError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
103 |
104 |         created_by = getattr(current_user, "id", None)
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/accounts/sync.py:107:13
    |
106 |         def _run_sync_task(captured_created_by: int | None) -> None:
107 |             from app.tasks.accounts_sync_tasks import sync_accounts
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
108 |
109 |             try:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/accounts/sync.py:111:20
    |
109 |             try:
110 |                 sync_accounts(manual_run=True, created_by=captured_created_by)
111 |             except Exception as exc:  # pragma: no cover - åŽå°çº¿ç¨‹æ—¥å¿—
    |                    ^^^^^^^^^
112 |                 log_error(
113 |                     "åŽå°æ‰¹é‡è´¦æˆ·åŒæ­¥å¤±è´¥",
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/sync.py:135:36
    |
134 |         return jsonify_unified_success(
135 |             message="æ‰¹é‡è´¦æˆ·åŒæ­¥ä»»åŠ¡å·²åœ¨åŽå°å¯åŠ¨ï¼Œè¯·ç¨åŽåœ¨ä¼šè¯ä¸­å¿ƒæŸ¥çœ‹è¿›åº¦ã€‚",
    |                                                  ^^
136 |             data={"manual_job_id": thread.name},
137 |         )
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/sync.py:148:26
    |
146 |             error=str(exc),
147 |         )
148 |         msg = "æ‰¹é‡åŒæ­¥ä»»åŠ¡è§¦å‘å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•"
    |                                    ^^
149 |         raise SystemError(msg) from exc
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/sync.py:157:19
    |
155 | @require_csrf
156 | def sync_instance_accounts(instance_id: int) -> Response:
157 |     """åŒæ­¥æŒ‡å®šå®žä¾‹çš„è´¦æˆ·ä¿¡æ¯ï¼Œç»Ÿä¸€è¿”å›ž JSONã€‚.
    |                              ^^
158 |
159 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/sync.py:163:16
    |
162 |     Returns:
163 |         JSON å“åº”ï¼ŒåŒ…å«åŒæ­¥ç»“æžœå’Œç»Ÿè®¡ä¿¡æ¯ã€‚
    |                  ^^
164 |
165 |     Raises:
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/accounts/sync.py:235:22
    |
233 |             error=str(exc),
234 |         )
235 |         msg = "è´¦æˆ·åŒæ­¥å¤±è´¥ï¼Œè¯·é‡è¯•"
    |                            ^^
236 |         raise SystemError(msg) from exc
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/auth.py:52:13
   |
50 |     """ç”¨æˆ·ç™»å½• APIã€‚.
51 |
52 |     éªŒè¯ç”¨æˆ·åå’Œå¯†ç ï¼ŒæˆåŠŸåŽè¿”å›ž JWT tokenã€‚
   |                     ^^
53 |
54 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/auth.py:55:16
   |
54 |     Returns:
55 |         JSON å“åº”ï¼ŒåŒ…å« access_tokenã€refresh_token å’Œç”¨æˆ·ä¿¡æ¯ã€‚
   |                  ^^
56 |
57 |     Raises:
   |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/routes/auth.py:79:21
   |
77 |     if not username or not password:
78 |         auth_logger.warning(
79 |             "APIç™»å½•å¤±è´¥ï¼šç”¨æˆ·åæˆ–å¯†ç ä¸ºç©º",
   |                         ^^
80 |             username=username,
81 |             ip_address=request.remote_addr,
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/auth.py:103:20
    |
101 |             )
102 |
103 |             # APIç™»å½•ï¼Œè¿”å›žJWT token
    |                      ^^
104 |             access_token = create_access_token(identity=user.id)
105 |             refresh_token = create_refresh_token(identity=user.id)
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/routes/auth.py:122:21
    |
121 |         auth_logger.warning(
122 |             "APIç™»å½•å¤±è´¥ï¼šç”¨æˆ·è´¦æˆ·å·²ç¦ç”¨",
    |                         ^^
123 |             username=username,
124 |             ip_address=request.remote_addr,
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/routes/auth.py:132:17
    |
131 |     auth_logger.warning(
132 |         "APIç™»å½•å¤±è´¥ï¼šç”¨æˆ·åæˆ–å¯†ç é”™è¯¯",
    |                     ^^
133 |         username=username,
134 |         ip_address=request.remote_addr,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/auth.py:148:17
    |
146 |     """ç”¨æˆ·ç™»å½•é¡µé¢ã€‚.
147 |
148 |     GET è¯·æ±‚æ¸²æŸ“ç™»å½•é¡µé¢ï¼ŒPOST è¯·æ±‚å¤„ç†ç™»å½•é€»è¾‘ã€‚
    |                         ^^
149 |
150 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/auth.py:152:24
    |
150 |     Returns:
151 |         GET: æ¸²æŸ“çš„ç™»å½•é¡µé¢ã€‚
152 |         POST: æˆåŠŸæ—¶é‡å®šå‘åˆ°é¦–é¡µï¼Œå¤±è´¥æ—¶é‡æ–°æ¸²æŸ“ç™»å½•é¡µé¢ã€‚
    |                                 ^^
153 |
154 |     Query Parameters:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/auth.py:155:26
    |
154 |     Query Parameters:
155 |         next: ç™»å½•æˆåŠŸåŽçš„é‡å®šå‘åœ°å€ï¼Œå¯é€‰ã€‚
    |                                     ^^
156 |
157 |     """
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/routes/auth.py:174:24
    |
172 |         if not username or not password:
173 |             auth_logger.warning(
174 |                 "é¡µé¢ç™»å½•å¤±è´¥ï¼šç”¨æˆ·åæˆ–å¯†ç ä¸ºç©º",
    |                              ^^
175 |                 username=username,
176 |                 ip_address=request.remote_addr,
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/auth.py:199:23
    |
197 |                 )
198 |
199 |                 # é¡µé¢ç™»å½•ï¼Œé‡å®šå‘åˆ°é¦–é¡µ
    |                           ^^
200 |                 flash("ç™»å½•æˆåŠŸï¼", FlashCategory.SUCCESS)
201 |                 next_page = request.args.get("next")
    |

RUF001 String contains ambiguous `ï¼` (FULLWIDTH EXCLAMATION MARK). Did you mean `!` (EXCLAMATION MARK)?
   --> app/routes/auth.py:200:28
    |
199 |                 # é¡µé¢ç™»å½•ï¼Œé‡å®šå‘åˆ°é¦–é¡µ
200 |                 flash("ç™»å½•æˆåŠŸï¼", FlashCategory.SUCCESS)
    |                                ^^
201 |                 next_page = request.args.get("next")
202 |                 return redirect(next_page) if next_page else redirect(url_for("dashboard.index"))
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/routes/auth.py:204:24
    |
202 |                 return redirect(next_page) if next_page else redirect(url_for("dashboard.index"))
203 |             auth_logger.warning(
204 |                 "é¡µé¢ç™»å½•å¤±è´¥ï¼šè´¦æˆ·å·²è¢«ç¦ç”¨",
    |                              ^^
205 |                 username=username,
206 |                 user_id=user.id,
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/routes/auth.py:212:24
    |
210 |         else:
211 |             auth_logger.warning(
212 |                 "é¡µé¢ç™»å½•å¤±è´¥ï¼šç”¨æˆ·åæˆ–å¯†ç é”™è¯¯",
    |                              ^^
213 |                 username=username,
214 |                 ip_address=request.remote_addr,
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/auth.py:218:12
    |
216 |             flash("ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯", FlashCategory.ERROR)
217 |
218 |     # GETè¯·æ±‚ï¼Œæ˜¾ç¤ºç™»å½•é¡µé¢
    |              ^^
219 |
220 |     return render_template("auth/login.html")
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/auth.py:307:16
    |
306 |     Returns:
307 |         JSON å“åº”ï¼ŒåŒ…å« CSRF tokenã€‚
    |                  ^^
308 |
309 |     """
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/auth.py:310:5
    |
309 |     """
310 |     from flask_wtf.csrf import generate_csrf
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
311 |     return jsonify_unified_success(
312 |         data={"csrf_token": generate_csrf()},
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/auth.py:326:16
    |
325 |     Returns:
326 |         JSON å“åº”ï¼ŒåŒ…å«æ–°çš„ access_tokenã€‚
    |                  ^^
327 |
328 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/auth.py:349:16
    |
348 |     Returns:
349 |         JSON å“åº”ï¼ŒåŒ…å«ç”¨æˆ·ä¿¡æ¯ã€‚
    |                  ^^
350 |
351 |     Raises:
    |

D205 1 blank line required between summary line and description
 --> app/routes/cache.py:2:1
  |
2 | / """é²¸è½ - ç¼“å­˜ç®¡ç†è·¯ç”±
3 | | æä¾›ç¼“å­˜ç®¡ç†ç›¸å…³çš„APIæŽ¥å£.
4 | | """
  | |___^
5 |
6 |   from flask import Blueprint, Response, request
  |
help: Insert single blank line

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/cache.py:9:39
   |
 7 | from flask_login import current_user, login_required
 8 |
 9 | from app.errors import NotFoundError, SystemError, ValidationError
   |                                       ^^^^^^^^^^^
10 | from app.models import Instance
11 | from app.services.account_classification.orchestrator import AccountClassificationService
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/cache.py:107:20
    |
106 |     Returns:
107 |         æˆåŠŸæ—¶è¿”å›žç»Ÿä¸€æˆåŠŸå“åº”ï¼Œå¤±è´¥æŠ›å‡ºä¸šåŠ¡å¼‚å¸¸ã€‚
    |                               ^^
108 |
109 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/cache.py:150:15
    |
149 |     Returns:
150 |         ç»Ÿä¸€æˆåŠŸå“åº”ï¼Œdata ä¸­åŒ…å«å·²æ¸…ç†å®žä¾‹æ•°é‡ã€‚
    |                     ^^
151 |
152 |     """
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/cache.py:165:16
    |
163 |             if cache_manager.invalidate_instance_cache(instance.id):
164 |                 cleared_count += 1
165 |         except Exception as exc:
    |                ^^^^^^^^^
166 |             log_error(f"æ¸…é™¤å®žä¾‹ {instance.id} ç¼“å­˜å¤±è´¥: {exc}", module="cache")
    |

E501 Line too long (121 > 120)
   --> app/routes/cache.py:174:112
    |
172 |         operator_id=getattr(current_user, "id", None),
173 |     )
174 |     return jsonify_unified_success(message=f"å·²æ¸…é™¤ {cleared_count} ä¸ªå®žä¾‹çš„ç¼“å­˜", data={"cleared_count": cleared_count})
    |                                                                                                                         ^
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/cache.py:187:13
    |
186 |     Returns:
187 |         æˆåŠŸå“åº”ï¼Œå¤±è´¥æ—¶æŠ›å‡ºå¼‚å¸¸äº¤ç”±ç»Ÿä¸€å¤„ç†ã€‚
    |                 ^^
188 |
189 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/cache.py:218:26
    |
217 |     Args:
218 |         db_type: æ•°æ®åº“ç±»åž‹å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ mysqlã€‚
    |                                  ^^
219 |
220 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/cache.py:221:13
    |
220 |     Returns:
221 |         æˆåŠŸå“åº”ï¼Œå…¶ä¸­ message æè¿°å·²æ¸…ç†çš„ç±»åž‹ã€‚
    |                 ^^
222 |
223 |     """
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/cache.py:281:16
    |
279 |                 "rules_count": len(rules_cache) if rules_cache else 0,
280 |             }
281 |         except Exception as exc:
    |                ^^^^^^^^^
282 |             log_error(f"èŽ·å–æ•°æ®åº“ç±»åž‹ {db_type} ç¼“å­˜ç»Ÿè®¡å¤±è´¥: {exc}", module="cache")
283 |             db_type_stats[db_type] = {
    |

D104 Missing docstring in public package
--> app/routes/capacity/__init__.py:1:1

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/routes/capacity/aggregations.py:1:14
  |
1 | """Capacity åŸŸï¼šèšåˆç»Ÿè®¡è·¯ç”±."""
  |               ^^
2 |
3 | from typing import TYPE_CHECKING, Any
  |

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/capacity/aggregations.py:11:24
   |
 9 | from app.constants import SyncStatus
10 | from app.constants.sync_constants import SyncCategory, SyncOperationType
11 | from app.errors import SystemError, ValidationError as AppValidationError
   |                        ^^^^^^^^^^^
12 | from app.models.instance import Instance
13 | from app.services.aggregation.aggregation_service import AggregationService
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/capacity/aggregations.py:27:16
   |
25 | capacity_aggregations_bp = Blueprint("capacity_aggregations", __name__)
26 |
27 | # èšåˆæ¨¡å—ä¸“æ³¨äºŽæ ¸å¿ƒèšåˆåŠŸèƒ½ï¼Œä¸åŒ…å«é¡µé¢è·¯ç”±
   |                             ^^
28 |
29 | # æ ¸å¿ƒèšåˆåŠŸèƒ½API
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/capacity/aggregations.py:35:26
   |
33 |     Args:
34 |         result: ä»»åŠ¡æ‰§è¡Œè¿”å›žçš„å­—å…¸ã€‚
35 |         context: å½“å‰ä»»åŠ¡åœºæ™¯æè¿°ï¼Œä¾¿äºŽæ—¥å¿—è¾“å‡ºã€‚
   |                                  ^^
36 |
37 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/capacity/aggregations.py:38:17
   |
37 |     Returns:
38 |         å¤„ç†åŽçš„ç»“æžœå­—å…¸ï¼Œå°† status å­—æ®µç»Ÿä¸€ä¸ºå°å†™ã€‚
   |                         ^^
39 |
40 |     Raises:
   |

C901 `aggregate_current` is too complex (28 > 10)
  --> app/routes/capacity/aggregations.py:58:5
   |
56 | @view_required
57 | @require_csrf
58 | def aggregate_current() -> Response:
   |     ^^^^^^^^^^^^^^^^^
59 |     """æ‰‹åŠ¨è§¦å‘å½“å‰å‘¨æœŸæ•°æ®èšåˆã€‚.
   |

PLR0912 Too many branches (18 > 12)
  --> app/routes/capacity/aggregations.py:58:5
   |
56 | @view_required
57 | @require_csrf
58 | def aggregate_current() -> Response:
   |     ^^^^^^^^^^^^^^^^^
59 |     """æ‰‹åŠ¨è§¦å‘å½“å‰å‘¨æœŸæ•°æ®èšåˆã€‚.
   |

PLR0915 Too many statements (103 > 50)
  --> app/routes/capacity/aggregations.py:58:5
   |
56 | @view_required
57 | @require_csrf
58 | def aggregate_current() -> Response:
   |     ^^^^^^^^^^^^^^^^^
59 |     """æ‰‹åŠ¨è§¦å‘å½“å‰å‘¨æœŸæ•°æ®èšåˆã€‚.
   |

TRY301 Abstract `raise` to an inner function
  --> app/routes/capacity/aggregations.py:78:13
   |
76 |         if scope not in valid_scopes:
77 |             msg = "scope å‚æ•°ä»…æ”¯æŒ instanceã€database æˆ– all"
78 |             raise AppValidationError(msg)
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
79 |
80 |         if requested_period_type != period_type:
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/capacity/aggregations.py:88:17
   |
86 |             )
87 |
88 |         # å½“å‰å‘¨æœŸèšåˆï¼ˆæŒ‰è¯·æ±‚å‘¨æœŸï¼Œå«ä»Šæ—¥ï¼‰ï¼Œå¹¶æŽ¥å…¥åŒæ­¥ä¼šè¯ä¸­å¿ƒ
   |                       ^^
89 |         service = AggregationService()
90 |         start_date, end_date = service.period_calculator.get_current_period(period_type)
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/capacity/aggregations.py:88:23
   |
86 |             )
87 |
88 |         # å½“å‰å‘¨æœŸèšåˆï¼ˆæŒ‰è¯·æ±‚å‘¨æœŸï¼Œå«ä»Šæ—¥ï¼‰ï¼Œå¹¶æŽ¥å…¥åŒæ­¥ä¼šè¯ä¸­å¿ƒ
   |                                   ^^
89 |         service = AggregationService()
90 |         start_date, end_date = service.period_calculator.get_current_period(period_type)
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/capacity/aggregations.py:88:27
   |
86 |             )
87 |
88 |         # å½“å‰å‘¨æœŸèšåˆï¼ˆæŒ‰è¯·æ±‚å‘¨æœŸï¼Œå«ä»Šæ—¥ï¼‰ï¼Œå¹¶æŽ¥å…¥åŒæ­¥ä¼šè¯ä¸­å¿ƒ
   |                                           ^^
89 |         service = AggregationService()
90 |         start_date, end_date = service.period_calculator.get_current_period(period_type)
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/capacity/aggregations.py:88:28
   |
86 |             )
87 |
88 |         # å½“å‰å‘¨æœŸèšåˆï¼ˆæŒ‰è¯·æ±‚å‘¨æœŸï¼Œå«ä»Šæ—¥ï¼‰ï¼Œå¹¶æŽ¥å…¥åŒæ­¥ä¼šè¯ä¸­å¿ƒ
   |                                             ^^
89 |         service = AggregationService()
90 |         start_date, end_date = service.period_calculator.get_current_period(period_type)
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/aggregations.py:205:19
    |
203 |             raise
204 |
205 |         # å¦‚æžœæ²¡æœ‰æ´»è·ƒå®žä¾‹ï¼Œç›´æŽ¥æŠŠä¼šè¯æ ‡è®°ä¸ºå®Œæˆ
    |                           ^^
206 |         if session.total_instances == 0:
207 |             refreshed_session = sync_session_service.get_session_by_id(session.session_id)
    |

D205 1 blank line required between summary line and description
 --> app/routes/capacity/databases.py:1:1
  |
1 | / """æ•°æ®åº“ç»Ÿè®¡ API è·¯ç”±
2 | | æä¾›æ•°æ®åº“å¤§å°ç›‘æŽ§ã€åŽ†å²æ•°æ®ã€ç»Ÿè®¡èšåˆç­‰æŽ¥å£
3 | | ä¸“æ³¨äºŽæ•°æ®åº“å±‚é¢çš„ç»Ÿè®¡åŠŸèƒ½.
4 | | """
  | |___^
5 |
6 |   import contextlib
  |
help: Insert single blank line

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/capacity/databases.py:13:24
   |
12 | from app.constants import DATABASE_TYPES, PERIOD_TYPES
13 | from app.errors import SystemError, ValidationError
   |                        ^^^^^^^^^^^
14 | from app.models.instance_database import InstanceDatabase
15 | from app.services.database_type_service import DatabaseTypeService
   |

ANN201 Missing return type annotation for public function `list_databases`
  --> app/routes/capacity/databases.py:33:5
   |
31 | @login_required
32 | @view_required
33 | def list_databases():
   |     ^^^^^^^^^^^^^^
34 |     """æ•°æ®åº“ç»Ÿè®¡èšåˆé¡µé¢ï¼ˆæ•°æ®åº“ç»Ÿè®¡å±‚é¢ï¼‰ã€‚.
   |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/capacity/databases.py:34:17
   |
32 | @view_required
33 | def list_databases():
34 |     """æ•°æ®åº“ç»Ÿè®¡èšåˆé¡µé¢ï¼ˆæ•°æ®åº“ç»Ÿè®¡å±‚é¢ï¼‰ã€‚.
   |                          ^^
35 |
36 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/capacity/databases.py:34:25
   |
32 | @view_required
33 | def list_databases():
34 |     """æ•°æ®åº“ç»Ÿè®¡èšåˆé¡µé¢ï¼ˆæ•°æ®åº“ç»Ÿè®¡å±‚é¢ï¼‰ã€‚.
   |                                          ^^
35 |
36 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/capacity/databases.py:37:21
   |
36 |     Returns:
37 |         æ¸²æŸ“çš„æ•°æ®åº“ç»Ÿè®¡èšåˆé¡µé¢ï¼ŒåŒ…å«ç­›é€‰é€‰é¡¹å’Œå›¾è¡¨ã€‚
   |                                 ^^
38 |
39 |     Query Parameters:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/capacity/databases.py:40:25
   |
39 |     Query Parameters:
40 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
   |                                ^^
41 |         instance: å®žä¾‹ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
42 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/capacity/databases.py:41:27
   |
39 |     Query Parameters:
40 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
41 |         instance: å®žä¾‹ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
   |                               ^^
42 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
43 |         database: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/capacity/databases.py:42:31
   |
40 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
41 |         instance: å®žä¾‹ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
42 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
   |                                    ^^
43 |         database: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
44 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œé»˜è®¤ 'daily'ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/capacity/databases.py:43:26
   |
41 |         instance: å®žä¾‹ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
42 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
43 |         database: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
   |                                 ^^
44 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œé»˜è®¤ 'daily'ã€‚
45 |         start_date: å¼€å§‹æ—¥æœŸï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/capacity/databases.py:44:28
   |
42 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
43 |         database: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
44 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œé»˜è®¤ 'daily'ã€‚
   |                                  ^^
45 |         start_date: å¼€å§‹æ—¥æœŸï¼Œå¯é€‰ã€‚
46 |         end_date: ç»“æŸæ—¥æœŸï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/capacity/databases.py:45:25
   |
43 |         database: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
44 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œé»˜è®¤ 'daily'ã€‚
45 |         start_date: å¼€å§‹æ—¥æœŸï¼Œå¯é€‰ã€‚
   |                             ^^
46 |         end_date: ç»“æŸæ—¥æœŸï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/capacity/databases.py:46:23
   |
44 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œé»˜è®¤ 'daily'ã€‚
45 |         start_date: å¼€å§‹æ—¥æœŸï¼Œå¯é€‰ã€‚
46 |         end_date: ç»“æŸæ—¥æœŸï¼Œå¯é€‰ã€‚
   |                           ^^
47 |
48 |     """
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/capacity/databases.py:112:19
    |
110 | @view_required
111 | def fetch_database_metrics() -> Response:
112 |     """èŽ·å–æ•°æ®åº“ç»Ÿè®¡èšåˆæ•°æ®ï¼ˆæ•°æ®åº“ç»Ÿè®¡å±‚é¢ï¼‰ã€‚.
    |                              ^^
113 |
114 |     æ”¯æŒåˆ†é¡µã€ç­›é€‰å’Œæ—¥æœŸèŒƒå›´æŸ¥è¯¢ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/capacity/databases.py:112:27
    |
110 | @view_required
111 | def fetch_database_metrics() -> Response:
112 |     """èŽ·å–æ•°æ®åº“ç»Ÿè®¡èšåˆæ•°æ®ï¼ˆæ•°æ®åº“ç»Ÿè®¡å±‚é¢ï¼‰ã€‚.
    |                                              ^^
113 |
114 |     æ”¯æŒåˆ†é¡µã€ç­›é€‰å’Œæ—¥æœŸèŒƒå›´æŸ¥è¯¢ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:117:16
    |
116 |     Returns:
117 |         JSON å“åº”ï¼ŒåŒ…å«èšåˆæ•°æ®åˆ—è¡¨å’Œåˆ†é¡µä¿¡æ¯ã€‚
    |                  ^^
118 |
119 |     Raises:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:124:30
    |
123 |     Query Parameters:
124 |         instance_id: å®žä¾‹ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                                  ^^
125 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
126 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:125:25
    |
123 |     Query Parameters:
124 |         instance_id: å®žä¾‹ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
125 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                                ^^
126 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
127 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:126:31
    |
124 |         instance_id: å®žä¾‹ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
125 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
126 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                                      ^^
127 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
128 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:127:31
    |
125 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
126 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
127 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                                    ^^
128 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
129 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:128:28
    |
126 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
127 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
128 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
    |                                  ^^
129 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
130 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/capacity/databases.py:129:25
    |
127 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
128 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
129 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                             ^^
130 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
131 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/capacity/databases.py:129:36
    |
127 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
128 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
129 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                                         ^^
130 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
131 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:129:37
    |
127 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
128 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
129 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                                           ^^
130 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
131 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/capacity/databases.py:130:23
    |
128 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
129 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
130 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                           ^^
131 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
132 |         per_page: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/capacity/databases.py:130:34
    |
128 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
129 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
130 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                                       ^^
131 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
132 |         per_page: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:130:35
    |
128 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
129 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
130 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                                         ^^
131 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
132 |         per_page: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:131:17
    |
129 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
130 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
131 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
    |                   ^^
132 |         per_page: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ã€‚
133 |         get_all: æ˜¯å¦èŽ·å–å…¨éƒ¨æ•°æ®ï¼Œé»˜è®¤ falseã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:132:23
    |
130 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
131 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
132 |         per_page: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ã€‚
    |                           ^^
133 |         get_all: æ˜¯å¦èŽ·å–å…¨éƒ¨æ•°æ®ï¼Œé»˜è®¤ falseã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:133:26
    |
131 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
132 |         per_page: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ã€‚
133 |         get_all: æ˜¯å¦èŽ·å–å…¨éƒ¨æ•°æ®ï¼Œé»˜è®¤ falseã€‚
    |                                  ^^
134 |
135 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:191:21
    |
190 |     Args:
191 |         value: æ—¥æœŸå­—ç¬¦ä¸²ï¼Œæ ¼å¼ 'YYYY-MM-DD'ã€‚
    |                          ^^
192 |         field: å­—æ®µåç§°ï¼Œç”¨äºŽé”™è¯¯æ¶ˆæ¯ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:192:20
    |
190 |     Args:
191 |         value: æ—¥æœŸå­—ç¬¦ä¸²ï¼Œæ ¼å¼ 'YYYY-MM-DD'ã€‚
192 |         field: å­—æ®µåç§°ï¼Œç”¨äºŽé”™è¯¯æ¶ˆæ¯ã€‚
    |                        ^^
193 |
194 |     Returns:
    |

TRY301 Abstract `raise` to an inner function
   --> app/routes/capacity/databases.py:205:13
    |
203 |         if parsed_dt is None:
204 |             msg = "æ— æ³•è§£æžæ—¥æœŸ"
205 |             raise ValueError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^
206 |         return parsed_dt.date()
207 |     except Exception as exc:
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:208:29
    |
206 |         return parsed_dt.date()
207 |     except Exception as exc:
208 |         msg = f"{field} æ ¼å¼é”™è¯¯ï¼Œåº”ä¸º YYYY-MM-DD"
    |                                 ^^
209 |         raise ValidationError(msg) from exc
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:219:16
    |
218 |     Returns:
219 |         JSON å“åº”ï¼ŒåŒ…å«æ±‡æ€»ç»Ÿè®¡æ•°æ®ã€‚
    |                  ^^
220 |
221 |     Raises:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:226:30
    |
225 |     Query Parameters:
226 |         instance_id: å®žä¾‹ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                                  ^^
227 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
228 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:227:25
    |
225 |     Query Parameters:
226 |         instance_id: å®žä¾‹ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
227 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                                ^^
228 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
229 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:228:31
    |
226 |         instance_id: å®žä¾‹ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
227 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
228 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                                      ^^
229 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
230 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:229:31
    |
227 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
228 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
229 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                                    ^^
230 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
231 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:230:28
    |
228 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
229 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
230 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
    |                                  ^^
231 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
232 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/capacity/databases.py:231:25
    |
229 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
230 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
231 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                             ^^
232 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/capacity/databases.py:231:36
    |
229 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
230 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
231 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                                         ^^
232 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:231:37
    |
229 |         database_id: æ•°æ®åº“ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
230 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
231 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                                           ^^
232 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/capacity/databases.py:232:23
    |
230 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
231 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
232 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                           ^^
233 |
234 |     """
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/capacity/databases.py:232:34
    |
230 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
231 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
232 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                                       ^^
233 |
234 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/databases.py:232:35
    |
230 |         period_type: ç»Ÿè®¡å‘¨æœŸç±»åž‹ï¼Œå¯é€‰ã€‚
231 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
232 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                                         ^^
233 |
234 |     """
    |

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/capacity/instances.py:12:39
   |
10 | from app.constants import DATABASE_TYPES, PERIOD_TYPES
11 | from app.constants.system_constants import SuccessMessages
12 | from app.errors import NotFoundError, SystemError, ValidationError as AppValidationError
   |                                       ^^^^^^^^^^^
13 | from app.models.instance import Instance
14 | from app.models.instance_size_stat import InstanceSizeStat
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/capacity/instances.py:49:21
   |
48 |     Args:
49 |         value: æ—¥æœŸå­—ç¬¦ä¸²ï¼Œæ ¼å¼ 'YYYY-MM-DD'ã€‚
   |                          ^^
50 |         field_name: å­—æ®µåç§°ï¼Œç”¨äºŽé”™è¯¯æ¶ˆæ¯ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/capacity/instances.py:50:25
   |
48 |     Args:
49 |         value: æ—¥æœŸå­—ç¬¦ä¸²ï¼Œæ ¼å¼ 'YYYY-MM-DD'ã€‚
50 |         field_name: å­—æ®µåç§°ï¼Œç”¨äºŽé”™è¯¯æ¶ˆæ¯ã€‚
   |                             ^^
51 |
52 |     Returns:
   |

DTZ007 Naive datetime constructed using `datetime.datetime.strptime()` without %z
  --> app/routes/capacity/instances.py:60:16
   |
58 |     """
59 |     try:
60 |         return datetime.strptime(value, "%Y-%m-%d").date()
   |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
61 |     except ValueError as exc:
62 |         msg = f"{field_name} æ ¼å¼é”™è¯¯ï¼Œéœ€ä½¿ç”¨ YYYY-MM-DD"
   |
help: Call `.replace(tzinfo=<timezone>)` or `.astimezone()` to convert to an aware datetime

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/capacity/instances.py:62:34
   |
60 |         return datetime.strptime(value, "%Y-%m-%d").date()
61 |     except ValueError as exc:
62 |         msg = f"{field_name} æ ¼å¼é”™è¯¯ï¼Œéœ€ä½¿ç”¨ YYYY-MM-DD"
   |                                      ^^
63 |         raise AppValidationError(msg) from exc
   |

ANN201 Missing return type annotation for public function `list_instances`
  --> app/routes/capacity/instances.py:70:5
   |
68 | @login_required
69 | @view_required
70 | def list_instances():
   |     ^^^^^^^^^^^^^^
71 |     """å®žä¾‹ç»Ÿè®¡èšåˆé¡µé¢ã€‚.
   |
help: Add return type annotation

PLC0415 `import` should be at the top-level of a file
  --> app/routes/capacity/instances.py:84:5
   |
82 |     end_date = request.args.get("end_date", "")
83 |
84 |     from app.services.database_type_service import DatabaseTypeService
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
85 |     database_type_configs = DatabaseTypeService.get_active_types()
86 |     if database_type_configs:
   |

C901 `fetch_instance_metrics` is too complex (11 > 10)
   --> app/routes/capacity/instances.py:122:5
    |
120 | @login_required
121 | @view_required
122 | def fetch_instance_metrics():
    |     ^^^^^^^^^^^^^^^^^^^^^^
123 |     """èŽ·å–å®žä¾‹èšåˆæ•°æ®ï¼ˆå®žä¾‹ç»Ÿè®¡å±‚é¢ï¼‰ã€‚.
    |

PLR0915 Too many statements (56 > 50)
   --> app/routes/capacity/instances.py:122:5
    |
120 | @login_required
121 | @view_required
122 | def fetch_instance_metrics():
    |     ^^^^^^^^^^^^^^^^^^^^^^
123 |     """èŽ·å–å®žä¾‹èšåˆæ•°æ®ï¼ˆå®žä¾‹ç»Ÿè®¡å±‚é¢ï¼‰ã€‚.
    |

ANN201 Missing return type annotation for public function `fetch_instance_metrics`
   --> app/routes/capacity/instances.py:122:5
    |
120 | @login_required
121 | @view_required
122 | def fetch_instance_metrics():
    |     ^^^^^^^^^^^^^^^^^^^^^^
123 |     """èŽ·å–å®žä¾‹èšåˆæ•°æ®ï¼ˆå®žä¾‹ç»Ÿè®¡å±‚é¢ï¼‰ã€‚.
    |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/capacity/instances.py:123:16
    |
121 | @view_required
122 | def fetch_instance_metrics():
123 |     """èŽ·å–å®žä¾‹èšåˆæ•°æ®ï¼ˆå®žä¾‹ç»Ÿè®¡å±‚é¢ï¼‰ã€‚.
    |                        ^^
124 |
125 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/capacity/instances.py:123:23
    |
121 | @view_required
122 | def fetch_instance_metrics():
123 |     """èŽ·å–å®žä¾‹èšåˆæ•°æ®ï¼ˆå®žä¾‹ç»Ÿè®¡å±‚é¢ï¼‰ã€‚.
    |                                      ^^
124 |
125 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:126:26
    |
125 |     Args:
126 |         instance_id: è¯·æ±‚å‚æ•°ï¼Œå®žä¾‹IDã€‚
    |                              ^^
127 |         db_type: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åº“ç±»åž‹ã€‚
128 |         period_type: è¯·æ±‚å‚æ•°ï¼Œèšåˆå‘¨æœŸç±»åž‹ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:127:22
    |
125 |     Args:
126 |         instance_id: è¯·æ±‚å‚æ•°ï¼Œå®žä¾‹IDã€‚
127 |         db_type: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åº“ç±»åž‹ã€‚
    |                          ^^
128 |         period_type: è¯·æ±‚å‚æ•°ï¼Œèšåˆå‘¨æœŸç±»åž‹ã€‚
129 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:128:26
    |
126 |         instance_id: è¯·æ±‚å‚æ•°ï¼Œå®žä¾‹IDã€‚
127 |         db_type: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åº“ç±»åž‹ã€‚
128 |         period_type: è¯·æ±‚å‚æ•°ï¼Œèšåˆå‘¨æœŸç±»åž‹ã€‚
    |                              ^^
129 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
130 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:129:25
    |
127 |         db_type: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åº“ç±»åž‹ã€‚
128 |         period_type: è¯·æ±‚å‚æ•°ï¼Œèšåˆå‘¨æœŸç±»åž‹ã€‚
129 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
    |                             ^^
130 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
131 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/capacity/instances.py:129:30
    |
127 |         db_type: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åº“ç±»åž‹ã€‚
128 |         period_type: è¯·æ±‚å‚æ•°ï¼Œèšåˆå‘¨æœŸç±»åž‹ã€‚
129 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
    |                                       ^^
130 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
131 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/capacity/instances.py:129:41
    |
127 |         db_type: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åº“ç±»åž‹ã€‚
128 |         period_type: è¯·æ±‚å‚æ•°ï¼Œèšåˆå‘¨æœŸç±»åž‹ã€‚
129 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
    |                                                   ^^
130 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
131 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:130:23
    |
128 |         period_type: è¯·æ±‚å‚æ•°ï¼Œèšåˆå‘¨æœŸç±»åž‹ã€‚
129 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
130 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
    |                           ^^
131 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
132 |         page: è¯·æ±‚å‚æ•°ï¼Œåˆ†é¡µé¡µç ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/capacity/instances.py:130:28
    |
128 |         period_type: è¯·æ±‚å‚æ•°ï¼Œèšåˆå‘¨æœŸç±»åž‹ã€‚
129 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
130 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
    |                                     ^^
131 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
132 |         page: è¯·æ±‚å‚æ•°ï¼Œåˆ†é¡µé¡µç ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/capacity/instances.py:130:39
    |
128 |         period_type: è¯·æ±‚å‚æ•°ï¼Œèšåˆå‘¨æœŸç±»åž‹ã€‚
129 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
130 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
    |                                                 ^^
131 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
132 |         page: è¯·æ±‚å‚æ•°ï¼Œåˆ†é¡µé¡µç ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:131:25
    |
129 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
130 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
131 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
    |                             ^^
132 |         page: è¯·æ±‚å‚æ•°ï¼Œåˆ†é¡µé¡µç ã€‚
133 |         per_page: è¯·æ±‚å‚æ•°ï¼Œæ¯é¡µæ•°é‡ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/capacity/instances.py:131:32
    |
129 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
130 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
131 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
    |                                           ^^
132 |         page: è¯·æ±‚å‚æ•°ï¼Œåˆ†é¡µé¡µç ã€‚
133 |         per_page: è¯·æ±‚å‚æ•°ï¼Œæ¯é¡µæ•°é‡ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/capacity/instances.py:131:34
    |
129 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
130 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
131 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
    |                                               ^^
132 |         page: è¯·æ±‚å‚æ•°ï¼Œåˆ†é¡µé¡µç ã€‚
133 |         per_page: è¯·æ±‚å‚æ•°ï¼Œæ¯é¡µæ•°é‡ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:132:19
    |
130 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
131 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
132 |         page: è¯·æ±‚å‚æ•°ï¼Œåˆ†é¡µé¡µç ã€‚
    |                       ^^
133 |         per_page: è¯·æ±‚å‚æ•°ï¼Œæ¯é¡µæ•°é‡ã€‚
134 |         get_all: è¯·æ±‚å‚æ•°ï¼Œæ˜¯å¦è¿”å›žå…¨éƒ¨è®°å½•ï¼ˆç”¨äºŽå›¾è¡¨ï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:133:23
    |
131 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
132 |         page: è¯·æ±‚å‚æ•°ï¼Œåˆ†é¡µé¡µç ã€‚
133 |         per_page: è¯·æ±‚å‚æ•°ï¼Œæ¯é¡µæ•°é‡ã€‚
    |                           ^^
134 |         get_all: è¯·æ±‚å‚æ•°ï¼Œæ˜¯å¦è¿”å›žå…¨éƒ¨è®°å½•ï¼ˆç”¨äºŽå›¾è¡¨ï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:134:22
    |
132 |         page: è¯·æ±‚å‚æ•°ï¼Œåˆ†é¡µé¡µç ã€‚
133 |         per_page: è¯·æ±‚å‚æ•°ï¼Œæ¯é¡µæ•°é‡ã€‚
134 |         get_all: è¯·æ±‚å‚æ•°ï¼Œæ˜¯å¦è¿”å›žå…¨éƒ¨è®°å½•ï¼ˆç”¨äºŽå›¾è¡¨ï¼‰ã€‚
    |                          ^^
135 |
136 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/capacity/instances.py:134:31
    |
132 |         page: è¯·æ±‚å‚æ•°ï¼Œåˆ†é¡µé¡µç ã€‚
133 |         per_page: è¯·æ±‚å‚æ•°ï¼Œæ¯é¡µæ•°é‡ã€‚
134 |         get_all: è¯·æ±‚å‚æ•°ï¼Œæ˜¯å¦è¿”å›žå…¨éƒ¨è®°å½•ï¼ˆç”¨äºŽå›¾è¡¨ï¼‰ã€‚
    |                                            ^^
135 |
136 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/capacity/instances.py:134:36
    |
132 |         page: è¯·æ±‚å‚æ•°ï¼Œåˆ†é¡µé¡µç ã€‚
133 |         per_page: è¯·æ±‚å‚æ•°ï¼Œæ¯é¡µæ•°é‡ã€‚
134 |         get_all: è¯·æ±‚å‚æ•°ï¼Œæ˜¯å¦è¿”å›žå…¨éƒ¨è®°å½•ï¼ˆç”¨äºŽå›¾è¡¨ï¼‰ã€‚
    |                                                      ^^
135 |
136 |     Returns:
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:149:25
    |
147 |         time_range = request.args.get("time_range")
148 |
149 |         # å¤„ç†time_rangeå‚æ•°ï¼Œè½¬æ¢ä¸ºstart_dateå’Œend_date
    |                             ^^
150 |         if time_range and not start_date and not end_date:
151 |             end_date_obj = time_utils.now_china()
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/capacity/instances.py:159:19
    |
157 |         page = request.args.get("page", 1, type=int)
158 |         per_page = request.args.get("per_page", 20, type=int)
159 |         # æ˜¯å¦è¿”å›žæ‰€æœ‰æ•°æ®ï¼ˆç”¨äºŽå›¾è¡¨æ˜¾ç¤ºï¼‰
    |                           ^^
160 |         get_all = request.args.get("get_all", "false").lower() == "true"
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/capacity/instances.py:159:26
    |
157 |         page = request.args.get("page", 1, type=int)
158 |         per_page = request.args.get("per_page", 20, type=int)
159 |         # æ˜¯å¦è¿”å›žæ‰€æœ‰æ•°æ®ï¼ˆç”¨äºŽå›¾è¡¨æ˜¾ç¤ºï¼‰
    |                                         ^^
160 |         get_all = request.args.get("get_all", "false").lower() == "true"
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/capacity/instances.py:167:9
    |
166 |         # æž„å»ºæŸ¥è¯¢ - æŸ¥è¯¢å®žä¾‹ç»Ÿè®¡èšåˆè¡¨
167 |         from app.models.instance_size_aggregation import InstanceSizeAggregation
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
168 |         query = (
169 |             InstanceSizeAggregation.query.join(Instance)
    |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/routes/capacity/instances.py:191:21
    |
189 |         # æŽ’åºå’Œåˆ†é¡µ
190 |         if get_all:
191 |             # ç”¨äºŽå›¾è¡¨æ˜¾ç¤ºï¼šæŒ‰æ€»å¤§å°æŽ’åºèŽ·å–TOP Nå®žä¾‹
    |                           ^^
192 |             # å…ˆæŒ‰å®žä¾‹åˆ†ç»„ï¼ŒèŽ·å–æ¯ä¸ªå®žä¾‹çš„æœ€å¤§å®¹é‡
193 |             subquery = query.with_entities(
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:192:21
    |
190 |         if get_all:
191 |             # ç”¨äºŽå›¾è¡¨æ˜¾ç¤ºï¼šæŒ‰æ€»å¤§å°æŽ’åºèŽ·å–TOP Nå®žä¾‹
192 |             # å…ˆæŒ‰å®žä¾‹åˆ†ç»„ï¼ŒèŽ·å–æ¯ä¸ªå®žä¾‹çš„æœ€å¤§å®¹é‡
    |                           ^^
193 |             subquery = query.with_entities(
194 |                 InstanceSizeAggregation.instance_id,
    |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/routes/capacity/instances.py:210:21
    |
208 |             total = len(aggregations)
209 |         else:
210 |             # ç”¨äºŽè¡¨æ ¼æ˜¾ç¤ºï¼šæŒ‰æ—¶é—´æŽ’åºåˆ†é¡µ
    |                           ^^
211 |             query = query.order_by(desc(InstanceSizeAggregation.period_start))
212 |             total = query.count()
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:215:18
    |
213 |             aggregations = query.offset(offset).limit(limit).all()
214 |
215 |         # è½¬æ¢ä¸ºå­—å…¸æ ¼å¼ï¼ŒåŒ…å«å®žä¾‹ä¿¡æ¯
    |                         ^^
216 |         data = []
217 |         for agg in aggregations:
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:225:21
    |
223 |                 "db_type": agg.instance.db_type,
224 |             }
225 |             # ä¸ºäº†å…¼å®¹å‰ç«¯ï¼Œæ·»åŠ  avg_size_mb å­—æ®µ
    |                           ^^
226 |             agg_dict["avg_size_mb"] = agg_dict.get("total_size_mb", 0)
227 |             data.append(agg_dict)
    |

C901 `fetch_instance_summary` is too complex (13 > 10)
   --> app/routes/capacity/instances.py:253:5
    |
251 | @login_required
252 | @view_required
253 | def fetch_instance_summary():
    |     ^^^^^^^^^^^^^^^^^^^^^^
254 |     """èŽ·å–å®žä¾‹èšåˆæ±‡æ€»ä¿¡æ¯ï¼ˆå®žä¾‹ç»Ÿè®¡å±‚é¢ï¼‰ã€‚.
    |

ANN201 Missing return type annotation for public function `fetch_instance_summary`
   --> app/routes/capacity/instances.py:253:5
    |
251 | @login_required
252 | @view_required
253 | def fetch_instance_summary():
    |     ^^^^^^^^^^^^^^^^^^^^^^
254 |     """èŽ·å–å®žä¾‹èšåˆæ±‡æ€»ä¿¡æ¯ï¼ˆå®žä¾‹ç»Ÿè®¡å±‚é¢ï¼‰ã€‚.
    |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/capacity/instances.py:254:18
    |
252 | @view_required
253 | def fetch_instance_summary():
254 |     """èŽ·å–å®žä¾‹èšåˆæ±‡æ€»ä¿¡æ¯ï¼ˆå®žä¾‹ç»Ÿè®¡å±‚é¢ï¼‰ã€‚.
    |                            ^^
255 |
256 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/capacity/instances.py:254:25
    |
252 | @view_required
253 | def fetch_instance_summary():
254 |     """èŽ·å–å®žä¾‹èšåˆæ±‡æ€»ä¿¡æ¯ï¼ˆå®žä¾‹ç»Ÿè®¡å±‚é¢ï¼‰ã€‚.
    |                                          ^^
255 |
256 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:257:26
    |
256 |     Args:
257 |         instance_id: è¯·æ±‚å‚æ•°ï¼Œå®žä¾‹IDã€‚
    |                              ^^
258 |         db_type: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åº“ç±»åž‹ã€‚
259 |         period_type: è¯·æ±‚å‚æ•°ï¼Œå‘¨æœŸç±»åž‹ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:258:22
    |
256 |     Args:
257 |         instance_id: è¯·æ±‚å‚æ•°ï¼Œå®žä¾‹IDã€‚
258 |         db_type: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åº“ç±»åž‹ã€‚
    |                          ^^
259 |         period_type: è¯·æ±‚å‚æ•°ï¼Œå‘¨æœŸç±»åž‹ã€‚
260 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:259:26
    |
257 |         instance_id: è¯·æ±‚å‚æ•°ï¼Œå®žä¾‹IDã€‚
258 |         db_type: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åº“ç±»åž‹ã€‚
259 |         period_type: è¯·æ±‚å‚æ•°ï¼Œå‘¨æœŸç±»åž‹ã€‚
    |                              ^^
260 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
261 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:260:25
    |
258 |         db_type: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åº“ç±»åž‹ã€‚
259 |         period_type: è¯·æ±‚å‚æ•°ï¼Œå‘¨æœŸç±»åž‹ã€‚
260 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
    |                             ^^
261 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
262 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/capacity/instances.py:260:30
    |
258 |         db_type: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åº“ç±»åž‹ã€‚
259 |         period_type: è¯·æ±‚å‚æ•°ï¼Œå‘¨æœŸç±»åž‹ã€‚
260 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
    |                                       ^^
261 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
262 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/capacity/instances.py:260:41
    |
258 |         db_type: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åº“ç±»åž‹ã€‚
259 |         period_type: è¯·æ±‚å‚æ•°ï¼Œå‘¨æœŸç±»åž‹ã€‚
260 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
    |                                                   ^^
261 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
262 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:261:23
    |
259 |         period_type: è¯·æ±‚å‚æ•°ï¼Œå‘¨æœŸç±»åž‹ã€‚
260 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
261 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
    |                           ^^
262 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/capacity/instances.py:261:28
    |
259 |         period_type: è¯·æ±‚å‚æ•°ï¼Œå‘¨æœŸç±»åž‹ã€‚
260 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
261 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
    |                                     ^^
262 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/capacity/instances.py:261:39
    |
259 |         period_type: è¯·æ±‚å‚æ•°ï¼Œå‘¨æœŸç±»åž‹ã€‚
260 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
261 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
    |                                                 ^^
262 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:262:25
    |
260 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
261 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
262 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
    |                             ^^
263 |
264 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/capacity/instances.py:262:32
    |
260 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
261 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
262 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
    |                                           ^^
263 |
264 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/capacity/instances.py:262:34
    |
260 |         start_date: è¯·æ±‚å‚æ•°ï¼Œå¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
261 |         end_date: è¯·æ±‚å‚æ•°ï¼Œç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ã€‚
262 |         time_range: è¯·æ±‚å‚æ•°ï¼Œå¿«æ·æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ã€‚
    |                                               ^^
263 |
264 |     Returns:
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/capacity/instances.py:277:25
    |
275 |         time_range = request.args.get("time_range")
276 |
277 |         # å¤„ç†time_rangeå‚æ•°ï¼Œè½¬æ¢ä¸ºstart_dateå’Œend_date
    |                             ^^
278 |         if time_range and not start_date and not end_date:
279 |             end_date_obj = time_utils.now_china()
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/capacity/instances.py:292:22
    |
290 |             end_date_obj = _parse_iso_date(end_date, "end_date")
291 |
292 |         # ä¼˜å…ˆä½¿ç”¨å®žä¾‹å¤§å°ç»Ÿè®¡è¡¨ï¼ˆä¸Žå®¹é‡åŒæ­¥å®žæ—¶åŒæ­¥ï¼‰
    |                                 ^^
293 |         stat_query = (
294 |             InstanceSizeStat.query.join(Instance)
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/capacity/instances.py:292:32
    |
290 |             end_date_obj = _parse_iso_date(end_date, "end_date")
291 |
292 |         # ä¼˜å…ˆä½¿ç”¨å®žä¾‹å¤§å°ç»Ÿè®¡è¡¨ï¼ˆä¸Žå®¹é‡åŒæ­¥å®žæ—¶åŒæ­¥ï¼‰
    |                                                     ^^
293 |         stat_query = (
294 |             InstanceSizeStat.query.join(Instance)
    |

D205 1 blank line required between summary line and description
 --> app/routes/common.py:1:1
  |
1 | / """é€šç”¨ API è·¯ç”±
2 | | æä¾›è·¨æ¨¡å—ä½¿ç”¨çš„é€šç”¨æŽ¥å£.
3 | | """
  | |___^
4 |
5 |   from flask import Blueprint, Response, request
  |
help: Insert single blank line

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/common.py:9:24
   |
 7 | from sqlalchemy import func
 8 |
 9 | from app.errors import SystemError, ValidationError
   |                        ^^^^^^^^^^^
10 | from app.models.instance import Instance
11 | from app.models.instance_database import InstanceDatabase
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/common.py:25:16
   |
23 | @view_required
24 | def get_instance_options() -> Response:
25 |     """èŽ·å–å®žä¾‹ä¸‹æ‹‰é€‰é¡¹ï¼ˆé€šç”¨ï¼‰ã€‚.
   |                        ^^
26 |
27 |     Args:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/common.py:25:19
   |
23 | @view_required
24 | def get_instance_options() -> Response:
25 |     """èŽ·å–å®žä¾‹ä¸‹æ‹‰é€‰é¡¹ï¼ˆé€šç”¨ï¼‰ã€‚.
   |                              ^^
26 |
27 |     Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/common.py:28:22
   |
27 |     Args:
28 |         db_type: è¯·æ±‚å‚æ•°ï¼Œå¯é€‰çš„æ•°æ®åº“ç±»åž‹ç­›é€‰ã€‚
   |                          ^^
29 |
30 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/common.py:67:22
   |
65 | @view_required
66 | def get_database_options() -> Response:
67 |     """èŽ·å–æŒ‡å®šå®žä¾‹çš„æ•°æ®åº“ä¸‹æ‹‰é€‰é¡¹ï¼ˆé€šç”¨ï¼‰ã€‚.
   |                                    ^^
68 |
69 |     Args:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/common.py:67:25
   |
65 | @view_required
66 | def get_database_options() -> Response:
67 |     """èŽ·å–æŒ‡å®šå®žä¾‹çš„æ•°æ®åº“ä¸‹æ‹‰é€‰é¡¹ï¼ˆé€šç”¨ï¼‰ã€‚.
   |                                          ^^
68 |
69 |     Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/common.py:70:26
   |
69 |     Args:
70 |         instance_id: è¯·æ±‚å‚æ•°ï¼Œå¿…å¡«çš„å®žä¾‹IDã€‚
   |                              ^^
71 |         limit: è¯·æ±‚å‚æ•°ï¼Œè¿”å›žæ•°é‡ï¼ˆé»˜è®¤100ï¼‰ã€‚
72 |         offset: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åç§»é‡ï¼ˆé»˜è®¤0ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/common.py:71:20
   |
69 |     Args:
70 |         instance_id: è¯·æ±‚å‚æ•°ï¼Œå¿…å¡«çš„å®žä¾‹IDã€‚
71 |         limit: è¯·æ±‚å‚æ•°ï¼Œè¿”å›žæ•°é‡ï¼ˆé»˜è®¤100ï¼‰ã€‚
   |                        ^^
72 |         offset: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åç§»é‡ï¼ˆé»˜è®¤0ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/common.py:71:25
   |
69 |     Args:
70 |         instance_id: è¯·æ±‚å‚æ•°ï¼Œå¿…å¡«çš„å®žä¾‹IDã€‚
71 |         limit: è¯·æ±‚å‚æ•°ï¼Œè¿”å›žæ•°é‡ï¼ˆé»˜è®¤100ï¼‰ã€‚
   |                                  ^^
72 |         offset: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åç§»é‡ï¼ˆé»˜è®¤0ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/common.py:71:31
   |
69 |     Args:
70 |         instance_id: è¯·æ±‚å‚æ•°ï¼Œå¿…å¡«çš„å®žä¾‹IDã€‚
71 |         limit: è¯·æ±‚å‚æ•°ï¼Œè¿”å›žæ•°é‡ï¼ˆé»˜è®¤100ï¼‰ã€‚
   |                                           ^^
72 |         offset: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åç§»é‡ï¼ˆé»˜è®¤0ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/common.py:72:21
   |
70 |         instance_id: è¯·æ±‚å‚æ•°ï¼Œå¿…å¡«çš„å®žä¾‹IDã€‚
71 |         limit: è¯·æ±‚å‚æ•°ï¼Œè¿”å›žæ•°é‡ï¼ˆé»˜è®¤100ï¼‰ã€‚
72 |         offset: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åç§»é‡ï¼ˆé»˜è®¤0ï¼‰ã€‚
   |                         ^^
73 |
74 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/common.py:72:27
   |
70 |         instance_id: è¯·æ±‚å‚æ•°ï¼Œå¿…å¡«çš„å®žä¾‹IDã€‚
71 |         limit: è¯·æ±‚å‚æ•°ï¼Œè¿”å›žæ•°é‡ï¼ˆé»˜è®¤100ï¼‰ã€‚
72 |         offset: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åç§»é‡ï¼ˆé»˜è®¤0ï¼‰ã€‚
   |                                     ^^
73 |
74 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/common.py:72:31
   |
70 |         instance_id: è¯·æ±‚å‚æ•°ï¼Œå¿…å¡«çš„å®žä¾‹IDã€‚
71 |         limit: è¯·æ±‚å‚æ•°ï¼Œè¿”å›žæ•°é‡ï¼ˆé»˜è®¤100ï¼‰ã€‚
72 |         offset: è¯·æ±‚å‚æ•°ï¼Œæ•°æ®åç§»é‡ï¼ˆé»˜è®¤0ï¼‰ã€‚
   |                                            ^^
73 |
74 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/common.py:141:17
    |
139 | @view_required
140 | def get_database_type_options() -> Response:
141 |     """èŽ·å–æ•°æ®åº“ç±»åž‹é€‰é¡¹ï¼ˆé€šç”¨ï¼‰ã€‚.
    |                          ^^
142 |
143 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/common.py:141:20
    |
139 | @view_required
140 | def get_database_type_options() -> Response:
141 |     """èŽ·å–æ•°æ®åº“ç±»åž‹é€‰é¡¹ï¼ˆé€šç”¨ï¼‰ã€‚.
    |                                ^^
142 |
143 |     Returns:
    |

A004 Import `SystemError` is shadowing a Python builtin
 --> app/routes/connections.py:7:39
  |
5 | from flask_login import login_required
6 |
7 | from app.errors import NotFoundError, SystemError, ValidationError
  |                                       ^^^^^^^^^^^
8 | from app.models import Instance
9 | from app.services.connection_adapters.connection_factory import ConnectionFactory
  |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/routes/connections.py:26:11
   |
24 |     """æµ‹è¯•æ•°æ®åº“è¿žæŽ¥ APIã€‚.
25 |
26 |     æ”¯æŒä¸¤ç§æ¨¡å¼ï¼š
   |                 ^^
27 |     1. æµ‹è¯•çŽ°æœ‰å®žä¾‹ï¼šä¼ å…¥ instance_id
28 |     2. æµ‹è¯•æ–°è¿žæŽ¥ï¼šä¼ å…¥è¿žæŽ¥å‚æ•°ï¼ˆdb_typeã€hostã€portã€credential_idï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/routes/connections.py:27:14
   |
26 |     æ”¯æŒä¸¤ç§æ¨¡å¼ï¼š
27 |     1. æµ‹è¯•çŽ°æœ‰å®žä¾‹ï¼šä¼ å…¥ instance_id
   |                    ^^
28 |     2. æµ‹è¯•æ–°è¿žæŽ¥ï¼šä¼ å…¥è¿žæŽ¥å‚æ•°ï¼ˆdb_typeã€hostã€portã€credential_idï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/routes/connections.py:28:13
   |
26 |     æ”¯æŒä¸¤ç§æ¨¡å¼ï¼š
27 |     1. æµ‹è¯•çŽ°æœ‰å®žä¾‹ï¼šä¼ å…¥ instance_id
28 |     2. æµ‹è¯•æ–°è¿žæŽ¥ï¼šä¼ å…¥è¿žæŽ¥å‚æ•°ï¼ˆdb_typeã€hostã€portã€credential_idï¼‰
   |                  ^^
29 |
30 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/connections.py:28:20
   |
26 |     æ”¯æŒä¸¤ç§æ¨¡å¼ï¼š
27 |     1. æµ‹è¯•çŽ°æœ‰å®žä¾‹ï¼šä¼ å…¥ instance_id
28 |     2. æµ‹è¯•æ–°è¿žæŽ¥ï¼šä¼ å…¥è¿žæŽ¥å‚æ•°ï¼ˆdb_typeã€hostã€portã€credential_idï¼‰
   |                                ^^
29 |
30 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/connections.py:28:52
   |
26 |     æ”¯æŒä¸¤ç§æ¨¡å¼ï¼š
27 |     1. æµ‹è¯•çŽ°æœ‰å®žä¾‹ï¼šä¼ å…¥ instance_id
28 |     2. æµ‹è¯•æ–°è¿žæŽ¥ï¼šä¼ å…¥è¿žæŽ¥å‚æ•°ï¼ˆdb_typeã€hostã€portã€credential_idï¼‰
   |                                                                    ^^
29 |
30 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/connections.py:31:16
   |
30 |     Returns:
31 |         JSON å“åº”ï¼ŒåŒ…å«è¿žæŽ¥æµ‹è¯•ç»“æžœå’Œæ•°æ®åº“ç‰ˆæœ¬ä¿¡æ¯ã€‚
   |                  ^^
32 |
33 |     Raises:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/connections.py:59:16
   |
58 |     Returns:
59 |         JSON å“åº”ï¼ŒåŒ…å«æµ‹è¯•ç»“æžœã€‚
   |                  ^^
60 |
61 |     Raises:
   |

E501 Line too long (251 > 120)
  --> app/routes/connections.py:72:113
   |
70 | â€¦
71 | â€¦
72 | â€¦ersion=result.get("database_version"), main_version=result.get("main_version"), detailed_version=result.get("detailed_version"))
   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
73 | â€¦
74 | â€¦
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/connections.py:83:34
   |
82 |     Args:
83 |         connection_params: è¿žæŽ¥å‚æ•°å­—å…¸ï¼Œå¿…é¡»åŒ…å« db_typeã€hostã€portã€credential_idã€‚
   |                                        ^^
84 |
85 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/connections.py:86:16
   |
85 |     Returns:
86 |         JSON å“åº”ï¼ŒåŒ…å«æµ‹è¯•ç»“æžœã€‚
   |                  ^^
87 |
88 |     Raises:
   |

PLR2004 Magic value used in comparison, consider replacing `65535` with a constant variable
   --> app/routes/connections.py:108:28
    |
106 |         msg = "ç«¯å£å·å¿…é¡»æ˜¯æœ‰æ•ˆçš„æ•°å­—"
107 |         raise ValidationError(msg) from exc
108 |     if port <= 0 or port > 65535:
    |                            ^^^^^
109 |         msg = "ç«¯å£å·å¿…é¡»åœ¨1-65535ä¹‹é—´"
110 |         raise ValidationError(msg)
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/connections.py:111:5
    |
109 |         msg = "ç«¯å£å·å¿…é¡»åœ¨1-65535ä¹‹é—´"
110 |         raise ValidationError(msg)
111 |     from app.models import Credential
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
112 |     credential = Credential.query.get(connection_params.get("credential_id"))
113 |     if not credential:
    |

E501 Line too long (223 > 120)
   --> app/routes/connections.py:116:121
    |
114 | â€¦
115 | â€¦
116 | â€¦tion_params.get("host"), port=port, credential_id=connection_params.get("credential_id"), description="ä¸´æ—¶æµ‹è¯•è¿žæŽ¥")
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
117 | â€¦
118 | â€¦
    |

TRY301 Abstract `raise` to an inner function
   --> app/routes/connections.py:150:13
    |
148 |         if not ConnectionFactory.is_type_supported(db_type):
149 |             msg = f"ä¸æ”¯æŒçš„æ•°æ®åº“ç±»åž‹: {db_type}"
150 |             raise ValidationError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^
151 |         try:
152 |             port = int(data.get("port", 0))
    |

PLR2004 Magic value used in comparison, consider replacing `65535` with a constant variable
   --> app/routes/connections.py:156:32
    |
154 |             msg = "ç«¯å£å·å¿…é¡»æ˜¯æœ‰æ•ˆçš„æ•°å­—"
155 |             raise ValidationError(msg) from exc
156 |         if port <= 0 or port > 65535:
    |                                ^^^^^
157 |             msg = "ç«¯å£å·å¿…é¡»åœ¨1-65535ä¹‹é—´"
158 |             raise ValidationError(msg)
    |

TRY301 Abstract `raise` to an inner function
   --> app/routes/connections.py:158:13
    |
156 |         if port <= 0 or port > 65535:
157 |             msg = "ç«¯å£å·å¿…é¡»åœ¨1-65535ä¹‹é—´"
158 |             raise ValidationError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^
159 |         if data.get("credential_id"):
160 |             from app.models import Credential
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/connections.py:160:13
    |
158 |             raise ValidationError(msg)
159 |         if data.get("credential_id"):
160 |             from app.models import Credential
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
161 |             credential = Credential.query.get(data.get("credential_id"))
162 |             if not credential:
    |

TRY301 Abstract `raise` to an inner function
   --> app/routes/connections.py:164:17
    |
162 |             if not credential:
163 |                 msg = "å‡­æ®ä¸å­˜åœ¨"
164 |                 raise NotFoundError(msg)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^
165 |         log_info("è¿žæŽ¥å‚æ•°éªŒè¯é€šè¿‡", module="connections", db_type=db_type)
166 |         return jsonify_unified_success(message="è¿žæŽ¥å‚æ•°éªŒè¯é€šè¿‡")
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/connections.py:181:16
    |
180 |     Returns:
181 |         JSON å“åº”ï¼ŒåŒ…å«æ¯ä¸ªå®žä¾‹çš„æµ‹è¯•ç»“æžœå’Œæ±‡æ€»ç»Ÿè®¡ã€‚
    |                  ^^
182 |
183 |     Raises:
    |

PLR2004 Magic value used in comparison, consider replacing `50` with a constant variable
   --> app/routes/connections.py:196:28
    |
194 |         msg = "å®žä¾‹IDåˆ—è¡¨ä¸èƒ½ä¸ºç©º"
195 |         raise ValidationError(msg)
196 |     if len(instance_ids) > 50:
    |                            ^^
197 |         msg = "æ‰¹é‡æµ‹è¯•æ•°é‡ä¸èƒ½è¶…è¿‡50ä¸ª"
198 |         raise ValidationError(msg)
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/connections.py:219:20
    |
217 |                     fail_count += 1
218 |                 results.append(result)
219 |             except Exception as e:
    |                    ^^^^^^^^^
220 |                 results.append({"instance_id": instance_id, "success": False, "error": f"æµ‹è¯•å¤±è´¥: {e!s}"})
221 |                 fail_count += 1
    |

E501 Line too long (125 > 120)
   --> app/routes/connections.py:223:113
    |
221 |                 fail_count += 1
222 |                 log_error("æ‰¹é‡è¿žæŽ¥æµ‹è¯•å•å®žä¾‹å¤±è´¥", module="connections", instance_id=instance_id, error=str(e))
223 |         log_info("æ‰¹é‡è¿žæŽ¥æµ‹è¯•å®Œæˆ", module="connections", total=len(instance_ids), success=success_count, failed=fail_count)
    |                                                                                                                         ^^^^^
224 |         return jsonify_unified_success(data={"results": results, "summary": {"total": len(instance_ids), "success": success_count, "fâ€¦
225 |     except Exception as exc:
    |

E501 Line too long (182 > 120)
   --> app/routes/connections.py:224:121
    |
222 | â€¦d, error=str(e))
223 | â€¦uccess_count, failed=fail_count)
224 | â€¦ len(instance_ids), "success": success_count, "failed": fail_count}}, message="æ‰¹é‡è¿žæŽ¥æµ‹è¯•å®Œæˆ")
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
225 | â€¦
226 | â€¦
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/routes/connections.py:236:17
    |
234 |     """èŽ·å–å®žä¾‹è¿žæŽ¥çŠ¶æ€ã€‚.
235 |
236 |     æ ¹æ®æœ€åŽè¿žæŽ¥æ—¶é—´åˆ¤æ–­çŠ¶æ€ï¼š1å°æ—¶å†…ä¸º goodï¼Œ1å¤©å†…ä¸º warningï¼Œè¶…è¿‡1å¤©ä¸º poorã€‚
    |                             ^^
237 |
238 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/connections.py:236:28
    |
234 |     """èŽ·å–å®žä¾‹è¿žæŽ¥çŠ¶æ€ã€‚.
235 |
236 |     æ ¹æ®æœ€åŽè¿žæŽ¥æ—¶é—´åˆ¤æ–­çŠ¶æ€ï¼š1å°æ—¶å†…ä¸º goodï¼Œ1å¤©å†…ä¸º warningï¼Œè¶…è¿‡1å¤©ä¸º poorã€‚
    |                                             ^^
237 |
238 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/connections.py:236:41
    |
234 |     """èŽ·å–å®žä¾‹è¿žæŽ¥çŠ¶æ€ã€‚.
235 |
236 |     æ ¹æ®æœ€åŽè¿žæŽ¥æ—¶é—´åˆ¤æ–­çŠ¶æ€ï¼š1å°æ—¶å†…ä¸º goodï¼Œ1å¤©å†…ä¸º warningï¼Œè¶…è¿‡1å¤©ä¸º poorã€‚
    |                                                              ^^
237 |
238 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/connections.py:242:16
    |
241 |     Returns:
242 |         JSON å“åº”ï¼ŒåŒ…å«å®žä¾‹ä¿¡æ¯å’Œè¿žæŽ¥çŠ¶æ€ã€‚
    |                  ^^
243 |
244 |     Raises:
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/connections.py:257:13
    |
255 |         status = "unknown"
256 |         if instance.last_connected:
257 |             from datetime import datetime, timedelta
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
258 |             last_connected_time = instance.last_connected
259 |             if isinstance(last_connected_time, str):
    |

E501 Line too long (293 > 120)
   --> app/routes/connections.py:268:121
    |
266 | â€¦
267 | â€¦
268 | â€¦ instance.db_type, "host": instance.host, "port": instance.port, "last_connected": last_connected, "status": status, "is_active": instance.is_active}, message="èŽ·å–è¿žæŽ¥çŠ¶æ€æˆåŠŸ")
    |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
269 | â€¦
270 | â€¦
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/credentials.py:55:25
   |
54 |     Args:
55 |         action: å½“å‰æ‰§è¡ŒåŠ¨ä½œæè¿°ï¼Œå¦‚â€œåˆ›å»ºå‡­æ®â€ã€‚
   |                                 ^^
56 |         error: æ•èŽ·åˆ°çš„å¼‚å¸¸ã€‚
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/credentials.py:65:24
   |
63 |     lowered = message.lower()
64 |     if "unique constraint failed" in lowered or "duplicate key value" in lowered:
65 |         return "å‡­æ®åç§°å·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨å…¶ä»–åç§°"
   |                               ^^
66 |     if "not null constraint failed" in lowered:
67 |         return "å¿…å¡«å­—æ®µä¸èƒ½ä¸ºç©º"
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/credentials.py:68:24
   |
66 |     if "not null constraint failed" in lowered:
67 |         return "å¿…å¡«å­—æ®µä¸èƒ½ä¸ºç©º"
68 |     return f"{action}å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•"
   |                          ^^
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/credentials.py:75:23
   |
74 |     Args:
75 |         action: æ‰§è¡Œçš„åŠ¨ä½œåï¼Œç”¨äºŽæ—¥å¿—ã€‚
   |                             ^^
76 |         error: æ•èŽ·åˆ°çš„åŽŸå§‹å¼‚å¸¸ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/credentials.py:115:27
    |
113 |     Args:
114 |         data: ç»è¿‡æ¸…æ´—çš„è¡¨å•æ•°æ®ã€‚
115 |         credential: çŽ°æœ‰å‡­æ®å®žä¾‹ï¼ˆæ›´æ–°æ—¶ä¼ å…¥ï¼‰ã€‚
    |                                 ^^
116 |
117 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/credentials.py:115:33
    |
113 |     Args:
114 |         data: ç»è¿‡æ¸…æ´—çš„è¡¨å•æ•°æ®ã€‚
115 |         credential: çŽ°æœ‰å‡­æ®å®žä¾‹ï¼ˆæ›´æ–°æ—¶ä¼ å…¥ï¼‰ã€‚
    |                                             ^^
116 |
117 |     Returns:
    |

C901 `index` is too complex (12 > 10)
   --> app/routes/credentials.py:151:5
    |
149 | @login_required
150 | @view_required
151 | def index() -> str:
    |     ^^^^^
152 |     """å‡­æ®ç®¡ç†é¦–é¡µã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:154:13
    |
152 |     """å‡­æ®ç®¡ç†é¦–é¡µã€‚.
153 |
154 |     æ¸²æŸ“å‡­æ®ç®¡ç†é¡µé¢ï¼Œæ”¯æŒæœç´¢ã€ç±»åž‹ã€æ•°æ®åº“ç±»åž‹ã€çŠ¶æ€å’Œæ ‡ç­¾ç­›é€‰ã€‚
    |                     ^^
155 |
156 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/credentials.py:157:30
    |
156 |     Returns:
157 |         æ¸²æŸ“åŽçš„ HTML é¡µé¢æˆ– JSON å“åº”ï¼ˆå½“è¯·æ±‚ä¸º JSON æ—¶ï¼‰ã€‚
    |                                       ^^
158 |
159 |     Query Parameters:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/credentials.py:157:42
    |
156 |     Returns:
157 |         æ¸²æŸ“åŽçš„ HTML é¡µé¢æˆ– JSON å“åº”ï¼ˆå½“è¯·æ±‚ä¸º JSON æ—¶ï¼‰ã€‚
    |                                                         ^^
158 |
159 |     Query Parameters:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:160:17
    |
159 |     Query Parameters:
160 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
    |                   ^^
161 |         per_page: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 10ã€‚
162 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:161:23
    |
159 |     Query Parameters:
160 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
161 |         per_page: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 10ã€‚
    |                           ^^
162 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
163 |         credential_type: å‡­æ®ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:162:22
    |
160 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
161 |         per_page: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 10ã€‚
162 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
    |                           ^^
163 |         credential_type: å‡­æ®ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
164 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:163:32
    |
161 |         per_page: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 10ã€‚
162 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
163 |         credential_type: å‡­æ®ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                                      ^^
164 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
165 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:164:25
    |
162 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
163 |         credential_type: å‡­æ®ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
164 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                                ^^
165 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
166 |         tags: æ ‡ç­¾ç­›é€‰ï¼ˆé€—å·åˆ†éš”æˆ–æ•°ç»„ï¼‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:165:21
    |
163 |         credential_type: å‡­æ®ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
164 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
165 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                         ^^
166 |         tags: æ ‡ç­¾ç­›é€‰ï¼ˆé€—å·åˆ†éš”æˆ–æ•°ç»„ï¼‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/credentials.py:166:19
    |
164 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
165 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
166 |         tags: æ ‡ç­¾ç­›é€‰ï¼ˆé€—å·åˆ†éš”æˆ–æ•°ç»„ï¼‰ï¼Œå¯é€‰ã€‚
    |                       ^^
167 |
168 |     """
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/credentials.py:166:27
    |
164 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
165 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
166 |         tags: æ ‡ç­¾ç­›é€‰ï¼ˆé€—å·åˆ†éš”æˆ–æ•°ç»„ï¼‰ï¼Œå¯é€‰ã€‚
    |                                       ^^
167 |
168 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:166:28
    |
164 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
165 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
166 |         tags: æ ‡ç­¾ç­›é€‰ï¼ˆé€—å·åˆ†éš”æˆ–æ•°ç»„ï¼‰ï¼Œå¯é€‰ã€‚
    |                                         ^^
167 |
168 |     """
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:184:11
    |
182 |             tags = [tag.strip() for tag in tags_str.split(",") if tag.strip()]
183 |
184 |     # æž„å»ºæŸ¥è¯¢ï¼ŒåŒ…å«å®žä¾‹æ•°é‡ç»Ÿè®¡
    |               ^^
185 |     query = db.session.query(Credential, db.func.count(Instance.id).label("instance_count")).outerjoin(
186 |         Instance, Credential.id == Instance.credential_id,
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/credentials.py:212:9
    |
210 |     # æ ‡ç­¾ç­›é€‰
211 |     if tags:
212 |         from app.models.tag import Tag
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
213 |         query = query.join(Credential.tags).filter(Tag.name.in_(tags))
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:221:11
    |
219 |     pagination = query.paginate(page=page, per_page=per_page, error_out=False)
220 |
221 |     # å¤„ç†ç»“æžœï¼Œæ·»åŠ å®žä¾‹æ•°é‡åˆ°å‡­æ®å¯¹è±¡
    |               ^^
222 |     credentials_with_count = []
223 |     for cred, instance_count in pagination.items:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:303:16
    |
302 |     Returns:
303 |         JSON å“åº”ï¼ŒåŒ…å«åˆ›å»ºçš„å‡­æ®ä¿¡æ¯ã€‚
    |                  ^^
304 |
305 |     Raises:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:319:24
    |
317 | @require_csrf
318 | def create_credential_rest() -> "Response":
319 |     """RESTful åˆ›å»ºå‡­æ® APIï¼Œä¾›å‰ç«¯ CredentialsService ä½¿ç”¨ã€‚."""
    |                            ^^
320 |     payload = _parse_payload()
321 |     return _build_create_response(payload)
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/credentials.py:379:16
    |
377 |             db.session.delete(credential)
378 |             db.session.commit()
379 |         except Exception as exc:
    |                ^^^^^^^^^
380 |             _handle_db_exception("åˆ é™¤å‡­æ®", exc)
381 |     except DatabaseError as exc:
    |

RUF001 String contains ambiguous `ï¼` (FULLWIDTH EXCLAMATION MARK). Did you mean `!` (EXCLAMATION MARK)?
   --> app/routes/credentials.py:402:18
    |
400 |         )
401 |
402 |     flash("å‡­æ®åˆ é™¤æˆåŠŸï¼", FlashCategory.SUCCESS)
    |                        ^^
403 |     return redirect(url_for("credentials.index"))
    |

C901 `list_credentials` is too complex (11 > 10)
   --> app/routes/credentials.py:410:5
    |
408 | @login_required
409 | @view_required
410 | def list_credentials() -> "Response":
    |     ^^^^^^^^^^^^^^^^
411 |     """èŽ·å–å‡­æ®åˆ—è¡¨ APIã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:413:18
    |
411 |     """èŽ·å–å‡­æ®åˆ—è¡¨ APIã€‚.
412 |
413 |     æ”¯æŒåˆ†é¡µã€æŽ’åºã€æœç´¢å’Œç­›é€‰ï¼Œè¿”å›žå‡­æ®åˆ—è¡¨åŠå®žä¾‹æ•°é‡ç»Ÿè®¡ã€‚
    |                               ^^
414 |
415 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:419:17
    |
418 |     Query Parameters:
419 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
    |                   ^^
420 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ã€‚
421 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'created_at'ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:420:20
    |
418 |     Query Parameters:
419 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
420 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ã€‚
    |                        ^^
421 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'created_at'ã€‚
422 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:421:19
    |
419 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
420 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ã€‚
421 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'created_at'ã€‚
    |                       ^^
422 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
423 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/credentials.py:422:20
    |
420 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ã€‚
421 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'created_at'ã€‚
422 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
    |                        ^^
423 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
424 |         credential_type: å‡­æ®ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/credentials.py:422:33
    |
420 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ã€‚
421 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'created_at'ã€‚
422 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
    |                                       ^^
423 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
424 |         credential_type: å‡­æ®ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:422:34
    |
420 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ã€‚
421 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'created_at'ã€‚
422 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
    |                                         ^^
423 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
424 |         credential_type: å‡­æ®ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:423:22
    |
421 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'created_at'ã€‚
422 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
423 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
    |                           ^^
424 |         credential_type: å‡­æ®ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
425 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:424:32
    |
422 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
423 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
424 |         credential_type: å‡­æ®ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                                      ^^
425 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
426 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:425:25
    |
423 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
424 |         credential_type: å‡­æ®ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
425 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                                ^^
426 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
427 |         tags: æ ‡ç­¾ç­›é€‰ï¼ˆé€—å·åˆ†éš”æˆ–æ•°ç»„ï¼‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:426:21
    |
424 |         credential_type: å‡­æ®ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
425 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
426 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                         ^^
427 |         tags: æ ‡ç­¾ç­›é€‰ï¼ˆé€—å·åˆ†éš”æˆ–æ•°ç»„ï¼‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/credentials.py:427:19
    |
425 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
426 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
427 |         tags: æ ‡ç­¾ç­›é€‰ï¼ˆé€—å·åˆ†éš”æˆ–æ•°ç»„ï¼‰ï¼Œå¯é€‰ã€‚
    |                       ^^
428 |
429 |     """
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/credentials.py:427:27
    |
425 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
426 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
427 |         tags: æ ‡ç­¾ç­›é€‰ï¼ˆé€—å·åˆ†éš”æˆ–æ•°ç»„ï¼‰ï¼Œå¯é€‰ã€‚
    |                                       ^^
428 |
429 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:427:28
    |
425 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
426 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
427 |         tags: æ ‡ç­¾ç­›é€‰ï¼ˆé€—å·åˆ†éš”æˆ–æ•°ç»„ï¼‰ï¼Œå¯é€‰ã€‚
    |                                         ^^
428 |
429 |     """
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/credentials.py:470:9
    |
469 |     if tag_params:
470 |         from app.models.tag import Tag
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
471 |         query = query.join(Credential.tags).filter(Tag.name.in_(tag_params))
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/credentials.py:557:15
    |
556 | # ---------------------------------------------------------------------------
557 | # è¡¨å•è·¯ç”±å·²ç”±å‰ç«¯æ¨¡æ€æ›¿ä»£ï¼Œä¸å†æš´éœ²ç‹¬ç«‹é¡µé¢å…¥å£
    |                           ^^
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/dashboard.py:14:15
   |
12 | from app.constants.system_constants import SuccessMessages
13 |
14 | # ç§»é™¤SyncDataå¯¼å…¥ï¼Œä½¿ç”¨æ–°çš„åŒæ­¥ä¼šè¯æ¨¡åž‹
   |                   ^^
15 | from app.models.user import User
16 | from app.routes.health import check_cache_health, check_database_health, get_system_uptime
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/dashboard.py:44:13
   |
42 |     """ç³»ç»Ÿä»ªè¡¨æ¿é¦–é¡µã€‚.
43 |
44 |     æ¸²æŸ“ç³»ç»Ÿæ¦‚è§ˆé¡µé¢ï¼Œå±•ç¤ºå®žä¾‹ã€è´¦æˆ·ã€å®¹é‡ç­‰ç»Ÿè®¡ä¿¡æ¯å’Œå›¾è¡¨ã€‚
   |                     ^^
45 |
46 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/dashboard.py:47:30
   |
46 |     Returns:
47 |         æ¸²æŸ“åŽçš„ HTML é¡µé¢æˆ– JSON å“åº”ï¼ˆæ ¹æ®è¯·æ±‚ç±»åž‹ï¼‰ã€‚
   |                                       ^^
48 |
49 |     """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/dashboard.py:47:37
   |
46 |     Returns:
47 |         æ¸²æŸ“åŽçš„ HTML é¡µé¢æˆ– JSON å“åº”ï¼ˆæ ¹æ®è¯·æ±‚ç±»åž‹ï¼‰ã€‚
   |                                                     ^^
48 |
49 |     """
   |

PLC0415 `import` should be at the top-level of a file
  --> app/routes/dashboard.py:50:5
   |
49 |     """
50 |     import time
   |     ^^^^^^^^^^^
51 |
52 |     time.time()
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/dashboard.py:63:13
   |
61 |     system_status = get_system_status()
62 |
63 |     # è®°å½•æ“ä½œæ—¥å¿—ï¼ˆä»…è®°å½•é‡è¦æ“ä½œï¼‰
   |                   ^^
64 |
65 |     if request.is_json:
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/dashboard.py:63:21
   |
61 |     system_status = get_system_status()
62 |
63 |     # è®°å½•æ“ä½œæ—¥å¿—ï¼ˆä»…è®°å½•é‡è¦æ“ä½œï¼‰
   |                                   ^^
64 |
65 |     if request.is_json:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/dashboard.py:88:16
   |
86 |     """èŽ·å–ç³»ç»Ÿæ¦‚è§ˆ APIã€‚.
87 |
88 |     è¿”å›žç³»ç»Ÿçš„ç»Ÿè®¡æ¦‚è§ˆæ•°æ®ï¼ŒåŒ…æ‹¬ç”¨æˆ·ã€å®žä¾‹ã€è´¦æˆ·ã€å®¹é‡ç­‰ä¿¡æ¯ã€‚
   |                           ^^
89 |
90 |     Returns:
   |

PLC0415 `import` should be at the top-level of a file
  --> app/routes/dashboard.py:94:5
   |
93 |     """
94 |     import time
   |     ^^^^^^^^^^^
95 |
96 |     time.time()
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/dashboard.py:100:17
    |
 98 |     overview = get_system_overview()
 99 |
100 |     # æ³¨é‡ŠæŽ‰é¢‘ç¹çš„æ—¥å¿—è®°å½•ï¼Œå‡å°‘æ—¥å¿—å™ªéŸ³
    |                           ^^
101 |     # duration = (time.time() - start_time) * 1000
102 |     # log_info(
    |

ERA001 Found commented-out code
   --> app/routes/dashboard.py:101:5
    |
100 |     # æ³¨é‡ŠæŽ‰é¢‘ç¹çš„æ—¥å¿—è®°å½•ï¼Œå‡å°‘æ—¥å¿—å™ªéŸ³
101 |     # duration = (time.time() - start_time) * 1000
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
102 |     # log_info(
103 |     #     "èŽ·å–ä»ªè¡¨æ¿æ¦‚è§ˆæ•°æ®",
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> app/routes/dashboard.py:104:5
    |
102 |     # log_info(
103 |     #     "èŽ·å–ä»ªè¡¨æ¿æ¦‚è§ˆæ•°æ®",
104 |     #     module="dashboard",
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
105 |     #     user_id=current_user.id,
106 |     #     ip_address=request.remote_addr,
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> app/routes/dashboard.py:105:5
    |
103 |     #     "èŽ·å–ä»ªè¡¨æ¿æ¦‚è§ˆæ•°æ®",
104 |     #     module="dashboard",
105 |     #     user_id=current_user.id,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
106 |     #     ip_address=request.remote_addr,
107 |     #     duration_ms=duration,
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> app/routes/dashboard.py:106:5
    |
104 |     #     module="dashboard",
105 |     #     user_id=current_user.id,
106 |     #     ip_address=request.remote_addr,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
107 |     #     duration_ms=duration,
108 |     # )
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> app/routes/dashboard.py:107:5
    |
105 |     #     user_id=current_user.id,
106 |     #     ip_address=request.remote_addr,
107 |     #     duration_ms=duration,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
108 |     # )
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> app/routes/dashboard.py:108:5
    |
106 |     #     ip_address=request.remote_addr,
107 |     #     duration_ms=duration,
108 |     # )
    |     ^^^
109 |
110 |     return jsonify_unified_success(
    |
help: Remove commented-out code

PLC0415 `import` should be at the top-level of a file
   --> app/routes/dashboard.py:125:5
    |
124 |     """
125 |     import time
    |     ^^^^^^^^^^^
126 |
127 |     time.time()
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/dashboard.py:132:17
    |
130 |     charts = get_chart_data(chart_type)
131 |
132 |     # æ³¨é‡ŠæŽ‰é¢‘ç¹çš„æ—¥å¿—è®°å½•ï¼Œå‡å°‘æ—¥å¿—å™ªéŸ³
    |                           ^^
133 |     # duration = (time.time() - start_time) * 1000
134 |     # log_info(
    |

ERA001 Found commented-out code
   --> app/routes/dashboard.py:133:5
    |
132 |     # æ³¨é‡ŠæŽ‰é¢‘ç¹çš„æ—¥å¿—è®°å½•ï¼Œå‡å°‘æ—¥å¿—å™ªéŸ³
133 |     # duration = (time.time() - start_time) * 1000
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
134 |     # log_info(
135 |     #     "èŽ·å–ä»ªè¡¨æ¿å›¾è¡¨æ•°æ®",
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> app/routes/dashboard.py:136:5
    |
134 |     # log_info(
135 |     #     "èŽ·å–ä»ªè¡¨æ¿å›¾è¡¨æ•°æ®",
136 |     #     module="dashboard",
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
137 |     #     user_id=current_user.id,
138 |     #     ip_address=request.remote_addr,
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> app/routes/dashboard.py:137:5
    |
135 |     #     "èŽ·å–ä»ªè¡¨æ¿å›¾è¡¨æ•°æ®",
136 |     #     module="dashboard",
137 |     #     user_id=current_user.id,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
138 |     #     ip_address=request.remote_addr,
139 |     #     duration_ms=duration,
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> app/routes/dashboard.py:138:5
    |
136 |     #     module="dashboard",
137 |     #     user_id=current_user.id,
138 |     #     ip_address=request.remote_addr,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
139 |     #     duration_ms=duration,
140 |     # )
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> app/routes/dashboard.py:139:5
    |
137 |     #     user_id=current_user.id,
138 |     #     ip_address=request.remote_addr,
139 |     #     duration_ms=duration,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
140 |     # )
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> app/routes/dashboard.py:140:5
    |
138 |     #     ip_address=request.remote_addr,
139 |     #     duration_ms=duration,
140 |     # )
    |     ^^^
141 |
142 |     return jsonify_unified_success(
    |
help: Remove commented-out code

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/dashboard.py:151:18
    |
149 | @login_required
150 | def list_dashboard_activities() -> "Response":
151 |     """èŽ·å–æœ€è¿‘æ´»åŠ¨ APIï¼ˆå·²åºŸå¼ƒï¼‰ã€‚.
    |                        ^^
152 |
153 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/dashboard.py:151:22
    |
149 | @login_required
150 | def list_dashboard_activities() -> "Response":
151 |     """èŽ·å–æœ€è¿‘æ´»åŠ¨ APIï¼ˆå·²åºŸå¼ƒï¼‰ã€‚.
    |                                ^^
152 |
153 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/dashboard.py:184:16
    |
182 | @dashboard_cache(timeout=300)
183 | def get_system_overview() -> dict:
184 |     """èŽ·å–ç³»ç»Ÿæ¦‚è§ˆæ•°æ®ï¼ˆç¼“å­˜ç‰ˆæœ¬ï¼‰ã€‚.
    |                        ^^
185 |
186 |     èšåˆå„æ¨¡å—çš„ç»Ÿè®¡æ•°æ®ï¼ŒåŒ…æ‹¬ç”¨æˆ·ã€å®žä¾‹ã€è´¦æˆ·ã€åˆ†ç±»ã€å®¹é‡å’Œæ•°æ®åº“ä¿¡æ¯ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/dashboard.py:184:21
    |
182 | @dashboard_cache(timeout=300)
183 | def get_system_overview() -> dict:
184 |     """èŽ·å–ç³»ç»Ÿæ¦‚è§ˆæ•°æ®ï¼ˆç¼“å­˜ç‰ˆæœ¬ï¼‰ã€‚.
    |                                  ^^
185 |
186 |     èšåˆå„æ¨¡å—çš„ç»Ÿè®¡æ•°æ®ï¼ŒåŒ…æ‹¬ç”¨æˆ·ã€å®žä¾‹ã€è´¦æˆ·ã€åˆ†ç±»ã€å®¹é‡å’Œæ•°æ®åº“ä¿¡æ¯ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/dashboard.py:186:15
    |
184 |     """èŽ·å–ç³»ç»Ÿæ¦‚è§ˆæ•°æ®ï¼ˆç¼“å­˜ç‰ˆæœ¬ï¼‰ã€‚.
185 |
186 |     èšåˆå„æ¨¡å—çš„ç»Ÿè®¡æ•°æ®ï¼ŒåŒ…æ‹¬ç”¨æˆ·ã€å®žä¾‹ã€è´¦æˆ·ã€åˆ†ç±»ã€å®¹é‡å’Œæ•°æ®åº“ä¿¡æ¯ã€‚
    |                         ^^
187 |     ç»“æžœç¼“å­˜ 5 åˆ†é’Ÿã€‚
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/dashboard.py:232:17
    |
230 |         )
231 |
232 |         # æœ€è¿‘åŒæ­¥æ•°æ®ï¼ˆä¸œå…«åŒºï¼‰ - ä½¿ç”¨æ–°çš„åŒæ­¥ä¼šè¯æ¨¡åž‹
    |                       ^^
233 |
234 |         time_utils.now_china().date()
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/dashboard.py:232:21
    |
230 |         )
231 |
232 |         # æœ€è¿‘åŒæ­¥æ•°æ®ï¼ˆä¸œå…«åŒºï¼‰ - ä½¿ç”¨æ–°çš„åŒæ­¥ä¼šè¯æ¨¡åž‹
    |                               ^^
233 |
234 |         time_utils.now_china().date()
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/dashboard.py:255:12
    |
253 |             },
254 |         }
255 |     except Exception as e:
    |            ^^^^^^^^^
256 |         db.session.rollback()
257 |         log_error(f"èŽ·å–ç³»ç»Ÿæ¦‚è§ˆå¤±è´¥: {e}", module="dashboard")
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/dashboard.py:273:30
    |
272 |     Args:
273 |         chart_type: éœ€è¦èŽ·å–çš„å›¾è¡¨ç±»åž‹ï¼ˆall/logs/tasks/syncsï¼‰ã€‚
    |                                       ^^
274 |
275 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/dashboard.py:273:51
    |
272 |     Args:
273 |         chart_type: éœ€è¦èŽ·å–çš„å›¾è¡¨ç±»åž‹ï¼ˆall/logs/tasks/syncsï¼‰ã€‚
    |                                                             ^^
274 |
275 |     Returns:
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/dashboard.py:284:20
    |
283 |         if chart_type in {"all", "logs"}:
284 |             # æ—¥å¿—è¶‹åŠ¿å›¾ï¼ˆæœ€è¿‘7å¤©ï¼‰
    |                         ^^
285 |             charts["log_trend"] = get_log_trend_data()
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/dashboard.py:284:25
    |
283 |         if chart_type in {"all", "logs"}:
284 |             # æ—¥å¿—è¶‹åŠ¿å›¾ï¼ˆæœ€è¿‘7å¤©ï¼‰
    |                                  ^^
285 |             charts["log_trend"] = get_log_trend_data()
    |

TRY300 Consider moving this statement to an `else` block
   --> app/routes/dashboard.py:298:9
    |
296 |             charts["sync_trend"] = get_sync_trend_data()
297 |
298 |         return charts
    |         ^^^^^^^^^^^^^
299 |     except Exception as e:
300 |         log_error(f"èŽ·å–å›¾è¡¨æ•°æ®å¤±è´¥: {e}", module="dashboard")
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/dashboard.py:299:12
    |
298 |         return charts
299 |     except Exception as e:
    |            ^^^^^^^^^
300 |         log_error(f"èŽ·å–å›¾è¡¨æ•°æ®å¤±è´¥: {e}", module="dashboard")
301 |         return {}
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/dashboard.py:309:47
    |
308 |     Returns:
309 |         list[dict[str, int | str]]: æœ€è¿‘ 7 å¤©çš„æ—¥å¿—æ•°ï¼ŒåŒ…å«æ—¥æœŸä¸Žæ•°é‡ã€‚
    |                                                      ^^
310 |
311 |     """
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/dashboard.py:328:16
    |
326 | @dashboard_cache(timeout=60)
327 | def get_task_status_distribution() -> list[dict[str, int | str]]:
328 |     """èŽ·å–ä»»åŠ¡çŠ¶æ€åˆ†å¸ƒï¼ˆä½¿ç”¨ APSchedulerï¼‰ã€‚.
    |                        ^^
329 |
330 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/dashboard.py:328:31
    |
326 | @dashboard_cache(timeout=60)
327 | def get_task_status_distribution() -> list[dict[str, int | str]]:
328 |     """èŽ·å–ä»»åŠ¡çŠ¶æ€åˆ†å¸ƒï¼ˆä½¿ç”¨ APSchedulerï¼‰ã€‚.
    |                                          ^^
329 |
330 |     Returns:
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/dashboard.py:335:9
    |
333 |     """
334 |     try:
335 |         from app.scheduler import get_scheduler
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
336 |
337 |         scheduler = get_scheduler()
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/dashboard.py:350:12
    |
349 |         return [{"status": status, "count": count} for status, count in status_count.items()]
350 |     except Exception as e:
    |            ^^^^^^^^^
351 |         log_error(f"èŽ·å–ä»»åŠ¡çŠ¶æ€åˆ†å¸ƒå¤±è´¥: {e}", module="dashboard")
352 |         return []
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/dashboard.py:365:9
    |
363 |     try:
364 |         db.session.rollback()
365 |         from app.models.sync_session import SyncSession
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
366 |
367 |         # æœ€è¿‘7å¤©çš„åŒæ­¥æ•°æ®ï¼ˆä¸œå…«åŒºï¼‰
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/dashboard.py:367:20
    |
365 |         from app.models.sync_session import SyncSession
366 |
367 |         # æœ€è¿‘7å¤©çš„åŒæ­¥æ•°æ®ï¼ˆä¸œå…«åŒºï¼‰
    |                            ^^
368 |         end_date = time_utils.now_china().date()
369 |         start_date = end_date - timedelta(days=6)
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/dashboard.py:367:24
    |
365 |         from app.models.sync_session import SyncSession
366 |
367 |         # æœ€è¿‘7å¤©çš„åŒæ­¥æ•°æ®ï¼ˆä¸œå…«åŒºï¼‰
    |                                    ^^
368 |         end_date = time_utils.now_china().date()
369 |         start_date = end_date - timedelta(days=6)
    |

SLF001 Private member accessed: `_mapping`
   --> app/routes/dashboard.py:421:26
    |
419 |             .one_or_none()
420 |         )
421 |         result_mapping = result._mapping if result is not None else {}
    |                          ^^^^^^^^^^^^^^^
422 |
423 |         trend_data: list[dict[str, int | str]] = []
    |

TRY300 Consider moving this statement to an `else` block
   --> app/routes/dashboard.py:432:9
    |
430 |             )
431 |
432 |         return trend_data
    |         ^^^^^^^^^^^^^^^^^
433 |     except Exception as e:
434 |         log_error(f"èŽ·å–åŒæ­¥è¶‹åŠ¿æ•°æ®å¤±è´¥: {e}", module="dashboard")
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/dashboard.py:433:12
    |
432 |         return trend_data
433 |     except Exception as e:
    |            ^^^^^^^^^
434 |         log_error(f"èŽ·å–åŒæ­¥è¶‹åŠ¿æ•°æ®å¤±è´¥: {e}", module="dashboard")
435 |         return []
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/dashboard.py:442:15
    |
440 |     """èŽ·å–ç³»ç»ŸçŠ¶æ€ã€‚.
441 |
442 |     æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ï¼‰å’ŒæœåŠ¡å¥åº·çŠ¶æ€ï¼ˆæ•°æ®åº“ã€Redisï¼‰ã€‚
    |                         ^^
443 |     ç»“æžœç¼“å­˜ 30 ç§’ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/dashboard.py:442:25
    |
440 |     """èŽ·å–ç³»ç»ŸçŠ¶æ€ã€‚.
441 |
442 |     æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ï¼‰å’ŒæœåŠ¡å¥åº·çŠ¶æ€ï¼ˆæ•°æ®åº“ã€Redisï¼‰ã€‚
    |                                          ^^
443 |     ç»“æžœç¼“å­˜ 30 ç§’ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/dashboard.py:442:33
    |
440 |     """èŽ·å–ç³»ç»ŸçŠ¶æ€ã€‚.
441 |
442 |     æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ï¼‰å’ŒæœåŠ¡å¥åº·çŠ¶æ€ï¼ˆæ•°æ®åº“ã€Redisï¼‰ã€‚
    |                                                          ^^
443 |     ç»“æžœç¼“å­˜ 30 ç§’ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/dashboard.py:442:43
    |
440 |     """èŽ·å–ç³»ç»ŸçŠ¶æ€ã€‚.
441 |
442 |     æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ï¼‰å’ŒæœåŠ¡å¥åº·çŠ¶æ€ï¼ˆæ•°æ®åº“ã€Redisï¼‰ã€‚
    |                                                                         ^^
443 |     ç»“æžœç¼“å­˜ 30 ç§’ã€‚
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/dashboard.py:483:12
    |
481 |             "uptime": get_system_uptime(),
482 |         }
483 |     except Exception as e:
    |            ^^^^^^^^^
484 |         log_error(f"èŽ·å–ç³»ç»ŸçŠ¶æ€å¤±è´¥: {e}", module="dashboard")
485 |         return {
    |

D104 Missing docstring in public package
--> app/routes/databases/__init__.py:1:1

D205 1 blank line required between summary line and description
 --> app/routes/databases/capacity_sync.py:1:1
  |
1 | / """æ•°æ®åº“åŸŸï¼šå®¹é‡åŒæ­¥ API è·¯ç”±
2 | | ä¸“æ³¨äºŽæ•°æ®åŒæ­¥åŠŸèƒ½ï¼Œä¸åŒ…å«ç»Ÿè®¡åŠŸèƒ½.
3 | | """
  | |___^
4 |
5 |   from __future__ import annotations
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/routes/databases/capacity_sync.py:1:8
  |
1 | """æ•°æ®åº“åŸŸï¼šå®¹é‡åŒæ­¥ API è·¯ç”±
  |            ^^
2 | ä¸“æ³¨äºŽæ•°æ®åŒæ­¥åŠŸèƒ½ï¼Œä¸åŒ…å«ç»Ÿè®¡åŠŸèƒ½.
3 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/routes/databases/capacity_sync.py:2:10
  |
1 | """æ•°æ®åº“åŸŸï¼šå®¹é‡åŒæ­¥ API è·¯ç”±
2 | ä¸“æ³¨äºŽæ•°æ®åŒæ­¥åŠŸèƒ½ï¼Œä¸åŒ…å«ç»Ÿè®¡åŠŸèƒ½.
  |                   ^^
3 | """
  |

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/databases/capacity_sync.py:11:39
   |
 9 | from flask import Blueprint, Response
10 |
11 | from app.errors import NotFoundError, SystemError
   |                                       ^^^^^^^^^^^
12 | from app.models.instance import Instance
13 | from app.services.aggregation.aggregation_service import AggregationService
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/databases/capacity_sync.py:46:10
   |
44 |     """é‡‡é›†å®žä¾‹å®¹é‡ä¿¡æ¯ã€‚.
45 |
46 |     è¿žæŽ¥æ•°æ®åº“ï¼ŒåŒæ­¥æ•°æ®åº“åˆ—è¡¨ï¼Œé‡‡é›†å¤§å°ä¿¡æ¯å¹¶ä¿å­˜ã€‚
   |               ^^
47 |
48 |     Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/databases/capacity_sync.py:46:18
   |
44 |     """é‡‡é›†å®žä¾‹å®¹é‡ä¿¡æ¯ã€‚.
45 |
46 |     è¿žæŽ¥æ•°æ®åº“ï¼ŒåŒæ­¥æ•°æ®åº“åˆ—è¡¨ï¼Œé‡‡é›†å¤§å°ä¿¡æ¯å¹¶ä¿å­˜ã€‚
   |                               ^^
47 |
48 |     Args:
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/routes/databases/capacity_sync.py:52:18
   |
51 |     Returns:
52 |         åŒ…å«é‡‡é›†ç»“æžœçš„å­—å…¸ï¼š
   |                           ^^
53 |         - success: æ˜¯å¦æˆåŠŸ
54 |         - databases: æ•°æ®åº“åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/databases/capacity_sync.py:56:29
   |
54 |         - databases: æ•°æ®åº“åˆ—è¡¨
55 |         - database_count: æ•°æ®åº“æ•°é‡
56 |         - total_size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
   |                                ^^
57 |         - saved_count: ä¿å­˜çš„è®°å½•æ•°
58 |         - instance_stat_updated: å®žä¾‹ç»Ÿè®¡æ˜¯å¦æ›´æ–°
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/databases/capacity_sync.py:56:32
   |
54 |         - databases: æ•°æ®åº“åˆ—è¡¨
55 |         - database_count: æ•°æ®åº“æ•°é‡
56 |         - total_size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
   |                                    ^^
57 |         - saved_count: ä¿å­˜çš„è®°å½•æ•°
58 |         - instance_stat_updated: å®žä¾‹ç»Ÿè®¡æ˜¯å¦æ›´æ–°
   |

BLE001 Do not catch blind exception: `Exception`
  --> app/routes/databases/capacity_sync.py:74:16
   |
72 |         try:
73 |             inventory_result = collector.synchronize_database_inventory()
74 |         except Exception as inventory_error:
   |                ^^^^^^^^^
75 |             log_error(
76 |                 "åŒæ­¥æ•°æ®åº“åˆ—è¡¨å¤±è´¥",
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/databases/capacity_sync.py:99:37
    |
 97 |                 "instance_stat_updated": False,
 98 |                 "inventory": inventory_result,
 99 |                 "message": "æœªå‘çŽ°æ´»è·ƒæ•°æ®åº“ï¼Œå·²ä»…åŒæ­¥æ•°æ®åº“åˆ—è¡¨",
    |                                             ^^
100 |             }
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/databases/capacity_sync.py:115:16
    |
113 |         try:
114 |             saved_count = collector.save_collected_data(databases_data)
115 |         except Exception as exc:
    |                ^^^^^^^^^
116 |             log_error(
117 |                 "ä¿å­˜æ•°æ®åº“å®¹é‡æ•°æ®å¤±è´¥",
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/databases/capacity_sync.py:136:16
    |
134 |             aggregation_service.calculate_daily_database_aggregations_for_instance(instance.id)
135 |             aggregation_service.calculate_daily_aggregations_for_instance(instance.id)
136 |         except Exception as exc:
    |                ^^^^^^^^^
137 |             log_warning(
138 |                 "å®¹é‡èšåˆåˆ·æ–°å¤±è´¥",
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/databases/capacity_sync.py:164:21
    |
162 |     """åŒæ­¥æŒ‡å®šå®žä¾‹çš„å®¹é‡ä¿¡æ¯ã€‚.
163 |
164 |     é‡‡é›†æ•°æ®åº“å¤§å°ä¿¡æ¯å¹¶ä¿å­˜åˆ°ç»Ÿè®¡è¡¨ï¼ŒåŒæ—¶è§¦å‘èšåˆè®¡ç®—ã€‚
    |                                     ^^
165 |
166 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/databases/capacity_sync.py:170:16
    |
169 |     Returns:
170 |         JSON å“åº”ï¼ŒåŒ…å«å®¹é‡åŒæ­¥ç»“æžœã€æ•°æ®åº“æ•°é‡å’Œæ€»å¤§å°ã€‚
    |                  ^^
171 |
172 |     Raises:
    |

TRY301 Abstract `raise` to an inner function
   --> app/routes/databases/capacity_sync.py:218:9
    |
216 |         )
217 |         error_message = result.get("message") or result.get("error") or "å®žä¾‹å®¹é‡åŒæ­¥å¤±è´¥"
218 |         raise SystemError(error_message)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
219 |
220 |     except NotFoundError:
    |

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/databases/ledgers.py:14:39
   |
13 | from app.constants import DATABASE_TYPES
14 | from app.errors import NotFoundError, SystemError
   |                                       ^^^^^^^^^^^
15 | from app.services.ledgers.database_ledger_service import DatabaseLedgerService
16 | from app.utils.decorators import view_required
   |

D205 1 blank line required between summary line and description
 --> app/routes/files.py:1:1
  |
1 | / """æ–‡ä»¶å¯¼å…¥å¯¼å‡ºè·¯ç”±
2 | | ç»Ÿä¸€å¤„ç†å…¨å±€çš„å¯¼å‡º/ä¸Šä¼ ç›¸å…³æŽ¥å£.
3 | | """
  | |___^
4 |
5 |   from __future__ import annotations
  |
help: Insert single blank line

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/files.py:23:24
   |
21 |     INSTANCE_IMPORT_TEMPLATE_SAMPLE,
22 | )
23 | from app.errors import SystemError, ValidationError
   |                        ^^^^^^^^^^^
24 | from app.models.account_permission import AccountPermission
25 | from app.models.instance import Instance
   |

C901 `export_accounts` is too complex (17 > 10)
  --> app/routes/files.py:39:5
   |
37 | @login_required
38 | @view_required
39 | def export_accounts() -> Response:
   |     ^^^^^^^^^^^^^^^
40 |     """å¯¼å‡ºè´¦æˆ·æ•°æ®ä¸º CSVã€‚.
   |

PLR0912 Too many branches (18 > 12)
  --> app/routes/files.py:39:5
   |
37 | @login_required
38 | @view_required
39 | def export_accounts() -> Response:
   |     ^^^^^^^^^^^^^^^
40 |     """å¯¼å‡ºè´¦æˆ·æ•°æ®ä¸º CSVã€‚.
   |

PLR0915 Too many statements (64 > 50)
  --> app/routes/files.py:39:5
   |
37 | @login_required
38 | @view_required
39 | def export_accounts() -> Response:
   |     ^^^^^^^^^^^^^^^
40 |     """å¯¼å‡ºè´¦æˆ·æ•°æ®ä¸º CSVã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/files.py:51:25
   |
50 |     Query Parameters:
51 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
   |                                ^^
52 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
53 |         instance_id: å®žä¾‹ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/files.py:52:22
   |
50 |     Query Parameters:
51 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
52 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
   |                           ^^
53 |         instance_id: å®žä¾‹ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
54 |         is_locked: é”å®šçŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/files.py:53:30
   |
51 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
52 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
53 |         instance_id: å®žä¾‹ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
   |                                  ^^
54 |         is_locked: é”å®šçŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
55 |         is_superuser: è¶…çº§ç”¨æˆ·ç­›é€‰ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/files.py:54:26
   |
52 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
53 |         instance_id: å®žä¾‹ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
54 |         is_locked: é”å®šçŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
   |                                ^^
55 |         is_superuser: è¶…çº§ç”¨æˆ·ç­›é€‰ï¼Œå¯é€‰ã€‚
56 |         tags: æ ‡ç­¾ç­›é€‰ï¼ˆæ•°ç»„ï¼‰ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/files.py:55:29
   |
53 |         instance_id: å®žä¾‹ ID ç­›é€‰ï¼Œå¯é€‰ã€‚
54 |         is_locked: é”å®šçŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
55 |         is_superuser: è¶…çº§ç”¨æˆ·ç­›é€‰ï¼Œå¯é€‰ã€‚
   |                                   ^^
56 |         tags: æ ‡ç­¾ç­›é€‰ï¼ˆæ•°ç»„ï¼‰ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/files.py:56:19
   |
54 |         is_locked: é”å®šçŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
55 |         is_superuser: è¶…çº§ç”¨æˆ·ç­›é€‰ï¼Œå¯é€‰ã€‚
56 |         tags: æ ‡ç­¾ç­›é€‰ï¼ˆæ•°ç»„ï¼‰ï¼Œå¯é€‰ã€‚
   |                       ^^
57 |
58 |     """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/files.py:56:22
   |
54 |         is_locked: é”å®šçŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
55 |         is_superuser: è¶…çº§ç”¨æˆ·ç­›é€‰ï¼Œå¯é€‰ã€‚
56 |         tags: æ ‡ç­¾ç­›é€‰ï¼ˆæ•°ç»„ï¼‰ï¼Œå¯é€‰ã€‚
   |                             ^^
57 |
58 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/files.py:56:23
   |
54 |         is_locked: é”å®šçŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
55 |         is_superuser: è¶…çº§ç”¨æˆ·ç­›é€‰ï¼Œå¯é€‰ã€‚
56 |         tags: æ ‡ç­¾ç­›é€‰ï¼ˆæ•°ç»„ï¼‰ï¼Œå¯é€‰ã€‚
   |                               ^^
57 |
58 |     """
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/files.py:60:17
   |
58 |     """
59 |     try:
60 |         # èŽ·å–æŸ¥è¯¢å‚æ•°ï¼ˆä¸Žåˆ—è¡¨é¡µä¿æŒä¸€è‡´ï¼‰
   |                       ^^
61 |         db_type = request.args.get("db_type", type=str)
62 |         search = request.args.get("search", "").strip()
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/files.py:60:26
   |
58 |     """
59 |     try:
60 |         # èŽ·å–æŸ¥è¯¢å‚æ•°ï¼ˆä¸Žåˆ—è¡¨é¡µä¿æŒä¸€è‡´ï¼‰
   |                                         ^^
61 |         db_type = request.args.get("db_type", type=str)
62 |         search = request.args.get("search", "").strip()
   |

PLC0415 `import` should be at the top-level of a file
  --> app/routes/files.py:68:9
   |
66 |         tags = [tag for tag in request.args.getlist("tags") if tag.strip()]
67 |
68 |         from app.models.instance_account import InstanceAccount
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
69 |
70 |         # æž„å»ºæŸ¥è¯¢
   |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/files.py:102:20
    |
100 |             try:
101 |                 query = query.join(Instance).join(Instance.tags).filter(Tag.name.in_(tags))
102 |             except Exception as exc:
    |                    ^^^^^^^^^
103 |                 log_error(
104 |                     "å¯¼å‡ºè´¦æˆ·æ—¶æ ‡ç­¾è¿‡æ»¤å¤±è´¥",
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/files.py:112:9
    |
110 |         accounts = query.all()
111 |
112 |         from app.models.account_classification import AccountClassificationAssignment
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
113 |
114 |         classifications: dict[int, list[str]] = {}
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/files.py:194:22
    |
193 |     Query Parameters:
194 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
    |                           ^^
195 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/files.py:195:25
    |
193 |     Query Parameters:
194 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
195 |         db_type: æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                                ^^
196 |
197 |     """
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/files.py:284:5
    |
282 | def export_database_ledger() -> Response:
283 |     """å¯¼å‡ºæ•°æ®åº“å°è´¦åˆ—è¡¨ä¸º CSVã€‚."""
284 |     from app.services.ledgers.database_ledger_service import DatabaseLedgerService
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
285 |
286 |     try:
    |

E501 Line too long (121 > 120)
   --> app/routes/files.py:300:89
    |
298 |         output = io.StringIO()
299 |         writer = csv.writer(output)
300 |         writer.writerow(["æ•°æ®åº“åç§°", "å®žä¾‹åç§°", "ä¸»æœº", "æ•°æ®åº“ç±»åž‹", "æ ‡ç­¾", "æœ€æ–°å®¹é‡", "æœ€åŽé‡‡é›†æ—¶é—´", "åŒæ­¥çŠ¶æ€"])
    |                                                                                                                         ^
301 |
302 |         for row in rows:
    |

C901 `export_logs` is too complex (16 > 10)
   --> app/routes/files.py:343:5
    |
341 | @files_bp.route("/api/log-export", methods=["GET"])
342 | @login_required
343 | def export_logs() -> Response:
    |     ^^^^^^^^^^^
344 |     """å¯¼å‡ºæ—¥å¿— APIã€‚.
    |

PLR0912 Too many branches (15 > 12)
   --> app/routes/files.py:343:5
    |
341 | @files_bp.route("/api/log-export", methods=["GET"])
342 | @login_required
343 | def export_logs() -> Response:
    |     ^^^^^^^^^^^
344 |     """å¯¼å‡ºæ—¥å¿— APIã€‚.
    |

PLR0915 Too many statements (61 > 50)
   --> app/routes/files.py:343:5
    |
341 | @files_bp.route("/api/log-export", methods=["GET"])
342 | @login_required
343 | def export_logs() -> Response:
    |     ^^^^^^^^^^^
344 |     """å¯¼å‡ºæ—¥å¿— APIã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/files.py:346:23
    |
344 |     """å¯¼å‡ºæ—¥å¿— APIã€‚.
345 |
346 |     æ”¯æŒ JSON å’Œ CSV ä¸¤ç§æ ¼å¼ï¼Œå¯æŒ‰çº§åˆ«ã€æ¨¡å—å’Œæ—¶é—´èŒƒå›´ç­›é€‰ã€‚
    |                              ^^
347 |
348 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/files.py:356:21
    |
355 |     Query Parameters:
356 |         format: å¯¼å‡ºæ ¼å¼ï¼ˆ'json' æˆ– 'csv'ï¼‰ï¼Œé»˜è®¤ 'json'ã€‚
    |                         ^^
357 |         level: æ—¥å¿—çº§åˆ«ç­›é€‰ï¼Œå¯é€‰ã€‚
358 |         module: æ¨¡å—åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/files.py:356:36
    |
355 |     Query Parameters:
356 |         format: å¯¼å‡ºæ ¼å¼ï¼ˆ'json' æˆ– 'csv'ï¼‰ï¼Œé»˜è®¤ 'json'ã€‚
    |                                          ^^
357 |         level: æ—¥å¿—çº§åˆ«ç­›é€‰ï¼Œå¯é€‰ã€‚
358 |         module: æ¨¡å—åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/files.py:356:37
    |
355 |     Query Parameters:
356 |         format: å¯¼å‡ºæ ¼å¼ï¼ˆ'json' æˆ– 'csv'ï¼‰ï¼Œé»˜è®¤ 'json'ã€‚
    |                                            ^^
357 |         level: æ—¥å¿—çº§åˆ«ç­›é€‰ï¼Œå¯é€‰ã€‚
358 |         module: æ¨¡å—åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/files.py:357:22
    |
355 |     Query Parameters:
356 |         format: å¯¼å‡ºæ ¼å¼ï¼ˆ'json' æˆ– 'csv'ï¼‰ï¼Œé»˜è®¤ 'json'ã€‚
357 |         level: æ—¥å¿—çº§åˆ«ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                            ^^
358 |         module: æ¨¡å—åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
359 |         start_time: å¼€å§‹æ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/files.py:358:23
    |
356 |         format: å¯¼å‡ºæ ¼å¼ï¼ˆ'json' æˆ– 'csv'ï¼‰ï¼Œé»˜è®¤ 'json'ã€‚
357 |         level: æ—¥å¿—çº§åˆ«ç­›é€‰ï¼Œå¯é€‰ã€‚
358 |         module: æ¨¡å—åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                             ^^
359 |         start_time: å¼€å§‹æ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰ï¼Œå¯é€‰ã€‚
360 |         end_time: ç»“æŸæ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/files.py:359:25
    |
357 |         level: æ—¥å¿—çº§åˆ«ç­›é€‰ï¼Œå¯é€‰ã€‚
358 |         module: æ¨¡å—åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
359 |         start_time: å¼€å§‹æ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰ï¼Œå¯é€‰ã€‚
    |                             ^^
360 |         end_time: ç»“æŸæ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰ï¼Œå¯é€‰ã€‚
361 |         limit: æœ€å¤§å¯¼å‡ºæ•°é‡ï¼Œé»˜è®¤ 1000ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/files.py:359:37
    |
357 |         level: æ—¥å¿—çº§åˆ«ç­›é€‰ï¼Œå¯é€‰ã€‚
358 |         module: æ¨¡å—åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
359 |         start_time: å¼€å§‹æ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰ï¼Œå¯é€‰ã€‚
    |                                            ^^
360 |         end_time: ç»“æŸæ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰ï¼Œå¯é€‰ã€‚
361 |         limit: æœ€å¤§å¯¼å‡ºæ•°é‡ï¼Œé»˜è®¤ 1000ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/files.py:359:38
    |
357 |         level: æ—¥å¿—çº§åˆ«ç­›é€‰ï¼Œå¯é€‰ã€‚
358 |         module: æ¨¡å—åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
359 |         start_time: å¼€å§‹æ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰ï¼Œå¯é€‰ã€‚
    |                                              ^^
360 |         end_time: ç»“æŸæ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰ï¼Œå¯é€‰ã€‚
361 |         limit: æœ€å¤§å¯¼å‡ºæ•°é‡ï¼Œé»˜è®¤ 1000ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/files.py:360:23
    |
358 |         module: æ¨¡å—åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
359 |         start_time: å¼€å§‹æ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰ï¼Œå¯é€‰ã€‚
360 |         end_time: ç»“æŸæ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰ï¼Œå¯é€‰ã€‚
    |                           ^^
361 |         limit: æœ€å¤§å¯¼å‡ºæ•°é‡ï¼Œé»˜è®¤ 1000ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/files.py:360:35
    |
358 |         module: æ¨¡å—åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
359 |         start_time: å¼€å§‹æ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰ï¼Œå¯é€‰ã€‚
360 |         end_time: ç»“æŸæ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰ï¼Œå¯é€‰ã€‚
    |                                          ^^
361 |         limit: æœ€å¤§å¯¼å‡ºæ•°é‡ï¼Œé»˜è®¤ 1000ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/files.py:360:36
    |
358 |         module: æ¨¡å—åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
359 |         start_time: å¼€å§‹æ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰ï¼Œå¯é€‰ã€‚
360 |         end_time: ç»“æŸæ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰ï¼Œå¯é€‰ã€‚
    |                                            ^^
361 |         limit: æœ€å¤§å¯¼å‡ºæ•°é‡ï¼Œé»˜è®¤ 1000ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/files.py:361:22
    |
359 |         start_time: å¼€å§‹æ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰ï¼Œå¯é€‰ã€‚
360 |         end_time: ç»“æŸæ—¶é—´ï¼ˆISO 8601 æ ¼å¼ï¼‰ï¼Œå¯é€‰ã€‚
361 |         limit: æœ€å¤§å¯¼å‡ºæ•°é‡ï¼Œé»˜è®¤ 1000ã€‚
    |                            ^^
362 |
363 |     """
    |

PERF401 Use a list comprehension to create a transformed list
   --> app/routes/files.py:407:17
    |
405 |               logs_data: list[dict[str, Any]] = []
406 |               for log in logs:
407 | /                 logs_data.append(
408 | |                     {
409 | |                         "id": log.id,
410 | |                         "timestamp": log.timestamp.isoformat() if log.timestamp else None,
411 | |                         "level": log.level.value if log.level else None,
412 | |                         "module": log.module,
413 | |                         "message": log.message,
414 | |                         "traceback": log.traceback,
415 | |                         "context": log.context,
416 | |                         "created_at": log.created_at.isoformat() if log.created_at else None,
417 | |                     },
418 | |                 )
    | |_________________^
419 |
420 |               payload = {"logs": logs_data, "exported_at": time_utils.now().isoformat()}
    |
help: Replace for loop with list comprehension

TRY301 Abstract `raise` to an inner function
   --> app/routes/files.py:475:9
    |
474 |         msg = "ä¸æ”¯æŒçš„å¯¼å‡ºæ ¼å¼"
475 |         raise ValidationError(msg)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
476 |
477 |     except Exception as exc:
    |

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/health.py:13:24
   |
11 | from app.constants import TimeConstants
12 | from app.constants.system_constants import SuccessMessages
13 | from app.errors import SystemError
   |                        ^^^^^^^^^^^
14 | from app.services.cache_service import cache_manager
15 | from app.utils.response_utils import jsonify_unified_success
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/health.py:28:16
   |
27 |     Returns:
28 |         JSON å“åº”ï¼ŒåŒ…å«æœåŠ¡çŠ¶æ€å’Œç‰ˆæœ¬ä¿¡æ¯ã€‚
   |                  ^^
29 |
30 |     Raises:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/health.py:52:16
   |
51 |     Returns:
52 |         JSON å“åº”ï¼ŒåŒ…å«å„ç»„ä»¶çš„è¯¦ç»†å¥åº·çŠ¶æ€ã€‚
   |                  ^^
53 |
54 |     Raises:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/health.py:112:12
    |
110 | @health_bp.route("/api/health")
111 | def get_health() -> Response:
112 |     """å¥åº·æ£€æŸ¥ï¼ˆä¾›å¤–éƒ¨ç›‘æŽ§ä½¿ç”¨ï¼‰ã€‚.
    |                ^^
113 |
114 |     å¿«é€Ÿæ£€æŸ¥æ•°æ®åº“å’Œ Redis è¿žæŽ¥çŠ¶æ€ï¼Œé€‚ç”¨äºŽç›‘æŽ§ç³»ç»Ÿã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/health.py:112:20
    |
110 | @health_bp.route("/api/health")
111 | def get_health() -> Response:
112 |     """å¥åº·æ£€æŸ¥ï¼ˆä¾›å¤–éƒ¨ç›‘æŽ§ä½¿ç”¨ï¼‰ã€‚.
    |                                ^^
113 |
114 |     å¿«é€Ÿæ£€æŸ¥æ•°æ®åº“å’Œ Redis è¿žæŽ¥çŠ¶æ€ï¼Œé€‚ç”¨äºŽç›‘æŽ§ç³»ç»Ÿã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/health.py:114:24
    |
112 |     """å¥åº·æ£€æŸ¥ï¼ˆä¾›å¤–éƒ¨ç›‘æŽ§ä½¿ç”¨ï¼‰ã€‚.
113 |
114 |     å¿«é€Ÿæ£€æŸ¥æ•°æ®åº“å’Œ Redis è¿žæŽ¥çŠ¶æ€ï¼Œé€‚ç”¨äºŽç›‘æŽ§ç³»ç»Ÿã€‚
    |                                    ^^
115 |
116 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/health.py:117:16
    |
116 |     Returns:
117 |         JSON å“åº”ï¼ŒåŒ…å«å„ç»„ä»¶çš„è¿žæŽ¥çŠ¶æ€å’Œç³»ç»Ÿè¿è¡Œæ—¶é—´ã€‚
    |                  ^^
118 |
119 |     """
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/health.py:125:9
    |
123 |     db_status = "connected"
124 |     try:
125 |         from sqlalchemy import text
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
126 |
127 |         db.session.execute(text("SELECT 1"))
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/health.py:128:12
    |
127 |         db.session.execute(text("SELECT 1"))
128 |     except Exception:
    |            ^^^^^^^^^
129 |         db_status = "error"
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/health.py:135:12
    |
133 |     try:
134 |         redis_status = "connected" if cache_manager and cache_manager.health_check() else "error"
135 |     except Exception:
    |            ^^^^^^^^^
136 |         redis_status = "error"
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/health.py:167:16
    |
166 |     Returns:
167 |         JSON å“åº”ï¼ŒåŒ…å«ç¼“å­˜å¥åº·çŠ¶æ€ã€‚
    |                  ^^
168 |
169 |     Raises:
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/routes/health.py:189:18
    |
188 |     Returns:
189 |         åŒ…å«å¥åº·çŠ¶æ€çš„å­—å…¸ï¼š
    |                           ^^
190 |         - healthy: æ˜¯å¦å¥åº·
191 |         - response_time_ms: å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/health.py:191:33
    |
189 |         åŒ…å«å¥åº·çŠ¶æ€çš„å­—å…¸ï¼š
190 |         - healthy: æ˜¯å¦å¥åº·
191 |         - response_time_ms: å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
    |                                     ^^
192 |         - status: è¿žæŽ¥çŠ¶æ€ï¼ˆ'connected' æˆ– 'disconnected'ï¼‰
193 |         - error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœå¤±è´¥ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/health.py:191:36
    |
189 |         åŒ…å«å¥åº·çŠ¶æ€çš„å­—å…¸ï¼š
190 |         - healthy: æ˜¯å¦å¥åº·
191 |         - response_time_ms: å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
    |                                           ^^
192 |         - status: è¿žæŽ¥çŠ¶æ€ï¼ˆ'connected' æˆ– 'disconnected'ï¼‰
193 |         - error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœå¤±è´¥ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/health.py:192:23
    |
190 |         - healthy: æ˜¯å¦å¥åº·
191 |         - response_time_ms: å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
192 |         - status: è¿žæŽ¥çŠ¶æ€ï¼ˆ'connected' æˆ– 'disconnected'ï¼‰
    |                           ^^
193 |         - error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœå¤±è´¥ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/health.py:192:52
    |
190 |         - healthy: æ˜¯å¦å¥åº·
191 |         - response_time_ms: å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
192 |         - status: è¿žæŽ¥çŠ¶æ€ï¼ˆ'connected' æˆ– 'disconnected'ï¼‰
    |                                                          ^^
193 |         - error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœå¤±è´¥ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/health.py:193:22
    |
191 |         - response_time_ms: å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
192 |         - status: è¿žæŽ¥çŠ¶æ€ï¼ˆ'connected' æˆ– 'disconnected'ï¼‰
193 |         - error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœå¤±è´¥ï¼‰
    |                          ^^
194 |
195 |     """
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/health.py:193:27
    |
191 |         - response_time_ms: å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
192 |         - status: è¿žæŽ¥çŠ¶æ€ï¼ˆ'connected' æˆ– 'disconnected'ï¼‰
193 |         - error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœå¤±è´¥ï¼‰
    |                                    ^^
194 |
195 |     """
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/health.py:198:9
    |
196 |     try:
197 |         start_time = time.time()
198 |         from sqlalchemy import text
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
199 |         db.session.execute(text("SELECT 1"))
200 |         response_time = (time.time() - start_time) * 1000  # æ¯«ç§’
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/health.py:207:12
    |
205 |             "status": "connected",
206 |         }
207 |     except Exception as exc:
    |            ^^^^^^^^^
208 |         log_error("æ•°æ®åº“å¥åº·æ£€æŸ¥å¤±è´¥", module="health", error=str(exc))
209 |         return {"healthy": False, "error": str(exc), "status": "disconnected"}
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/routes/health.py:216:18
    |
215 |     Returns:
216 |         åŒ…å«å¥åº·çŠ¶æ€çš„å­—å…¸ï¼š
    |                           ^^
217 |         - healthy: æ˜¯å¦å¥åº·
218 |         - response_time_ms: å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/health.py:218:33
    |
216 |         åŒ…å«å¥åº·çŠ¶æ€çš„å­—å…¸ï¼š
217 |         - healthy: æ˜¯å¦å¥åº·
218 |         - response_time_ms: å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
    |                                     ^^
219 |         - status: è¿žæŽ¥çŠ¶æ€ï¼ˆ'connected' æˆ– 'disconnected'ï¼‰
220 |         - error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœå¤±è´¥ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/health.py:218:36
    |
216 |         åŒ…å«å¥åº·çŠ¶æ€çš„å­—å…¸ï¼š
217 |         - healthy: æ˜¯å¦å¥åº·
218 |         - response_time_ms: å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
    |                                           ^^
219 |         - status: è¿žæŽ¥çŠ¶æ€ï¼ˆ'connected' æˆ– 'disconnected'ï¼‰
220 |         - error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœå¤±è´¥ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/health.py:219:23
    |
217 |         - healthy: æ˜¯å¦å¥åº·
218 |         - response_time_ms: å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
219 |         - status: è¿žæŽ¥çŠ¶æ€ï¼ˆ'connected' æˆ– 'disconnected'ï¼‰
    |                           ^^
220 |         - error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœå¤±è´¥ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/health.py:219:52
    |
217 |         - healthy: æ˜¯å¦å¥åº·
218 |         - response_time_ms: å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
219 |         - status: è¿žæŽ¥çŠ¶æ€ï¼ˆ'connected' æˆ– 'disconnected'ï¼‰
    |                                                          ^^
220 |         - error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœå¤±è´¥ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/health.py:220:22
    |
218 |         - response_time_ms: å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
219 |         - status: è¿žæŽ¥çŠ¶æ€ï¼ˆ'connected' æˆ– 'disconnected'ï¼‰
220 |         - error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœå¤±è´¥ï¼‰
    |                          ^^
221 |
222 |     """
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/health.py:220:27
    |
218 |         - response_time_ms: å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
219 |         - status: è¿žæŽ¥çŠ¶æ€ï¼ˆ'connected' æˆ– 'disconnected'ï¼‰
220 |         - error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœå¤±è´¥ï¼‰
    |                                    ^^
221 |
222 |     """
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/health.py:234:12
    |
232 |             "status": "connected" if result == "ok" else "error",
233 |         }
234 |     except Exception as exc:
    |            ^^^^^^^^^
235 |         log_error("ç¼“å­˜å¥åº·æ£€æŸ¥å¤±è´¥", module="health", error=str(exc))
236 |         return {"healthy": False, "error": str(exc), "status": "disconnected"}
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/health.py:242:20
    |
240 |     """æ£€æŸ¥ç³»ç»Ÿèµ„æºå¥åº·çŠ¶æ€ã€‚.
241 |
242 |     æ£€æŸ¥ CPUã€å†…å­˜å’Œç£ç›˜ä½¿ç”¨çŽ‡ï¼Œå½“ä»»ä¸€æŒ‡æ ‡è¶…è¿‡ 90% æ—¶æ ‡è®°ä¸ºä¸å¥åº·ã€‚
    |                               ^^
243 |
244 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/routes/health.py:245:18
    |
244 |     Returns:
245 |         åŒ…å«å¥åº·çŠ¶æ€çš„å­—å…¸ï¼š
    |                           ^^
246 |         - healthy: æ˜¯å¦å¥åº·ï¼ˆæ‰€æœ‰æŒ‡æ ‡ < 90%ï¼‰
247 |         - cpu_percent: CPU ä½¿ç”¨çŽ‡
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/health.py:246:24
    |
244 |     Returns:
245 |         åŒ…å«å¥åº·çŠ¶æ€çš„å­—å…¸ï¼š
246 |         - healthy: æ˜¯å¦å¥åº·ï¼ˆæ‰€æœ‰æŒ‡æ ‡ < 90%ï¼‰
    |                            ^^
247 |         - cpu_percent: CPU ä½¿ç”¨çŽ‡
248 |         - memory_percent: å†…å­˜ä½¿ç”¨çŽ‡
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/health.py:246:35
    |
244 |     Returns:
245 |         åŒ…å«å¥åº·çŠ¶æ€çš„å­—å…¸ï¼š
246 |         - healthy: æ˜¯å¦å¥åº·ï¼ˆæ‰€æœ‰æŒ‡æ ‡ < 90%ï¼‰
    |                                            ^^
247 |         - cpu_percent: CPU ä½¿ç”¨çŽ‡
248 |         - memory_percent: å†…å­˜ä½¿ç”¨çŽ‡
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/health.py:250:21
    |
248 |         - memory_percent: å†…å­˜ä½¿ç”¨çŽ‡
249 |         - disk_percent: ç£ç›˜ä½¿ç”¨çŽ‡
250 |         - status: çŠ¶æ€ï¼ˆ'healthy'ã€'warning' æˆ– 'error'ï¼‰
    |                       ^^
251 |         - error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœå¤±è´¥ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/health.py:250:51
    |
248 |         - memory_percent: å†…å­˜ä½¿ç”¨çŽ‡
249 |         - disk_percent: ç£ç›˜ä½¿ç”¨çŽ‡
250 |         - status: çŠ¶æ€ï¼ˆ'healthy'ã€'warning' æˆ– 'error'ï¼‰
    |                                                        ^^
251 |         - error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœå¤±è´¥ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/health.py:251:22
    |
249 |         - disk_percent: ç£ç›˜ä½¿ç”¨çŽ‡
250 |         - status: çŠ¶æ€ï¼ˆ'healthy'ã€'warning' æˆ– 'error'ï¼‰
251 |         - error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœå¤±è´¥ï¼‰
    |                          ^^
252 |
253 |     """
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/health.py:251:27
    |
249 |         - disk_percent: ç£ç›˜ä½¿ç”¨çŽ‡
250 |         - status: çŠ¶æ€ï¼ˆ'healthy'ã€'warning' æˆ– 'error'ï¼‰
251 |         - error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœå¤±è´¥ï¼‰
    |                                    ^^
252 |
253 |     """
    |

PLR2004 Magic value used in comparison, consider replacing `90` with a constant variable
   --> app/routes/health.py:269:31
    |
267 |         healthy = all(
268 |             [
269 |                 cpu_percent < 90,  # CPUä½¿ç”¨çŽ‡ä½ŽäºŽ90%
    |                               ^^
270 |                 memory_percent < 90,  # å†…å­˜ä½¿ç”¨çŽ‡ä½ŽäºŽ90%
271 |                 disk_percent < 90,  # ç£ç›˜ä½¿ç”¨çŽ‡ä½ŽäºŽ90%
    |

PLR2004 Magic value used in comparison, consider replacing `90` with a constant variable
   --> app/routes/health.py:270:34
    |
268 |             [
269 |                 cpu_percent < 90,  # CPUä½¿ç”¨çŽ‡ä½ŽäºŽ90%
270 |                 memory_percent < 90,  # å†…å­˜ä½¿ç”¨çŽ‡ä½ŽäºŽ90%
    |                                  ^^
271 |                 disk_percent < 90,  # ç£ç›˜ä½¿ç”¨çŽ‡ä½ŽäºŽ90%
272 |             ],
    |

PLR2004 Magic value used in comparison, consider replacing `90` with a constant variable
   --> app/routes/health.py:271:32
    |
269 |                 cpu_percent < 90,  # CPUä½¿ç”¨çŽ‡ä½ŽäºŽ90%
270 |                 memory_percent < 90,  # å†…å­˜ä½¿ç”¨çŽ‡ä½ŽäºŽ90%
271 |                 disk_percent < 90,  # ç£ç›˜ä½¿ç”¨çŽ‡ä½ŽäºŽ90%
    |                                ^^
272 |             ],
273 |         )
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/health.py:282:12
    |
280 |             "status": "healthy" if healthy else "warning",
281 |         }
282 |     except Exception as exc:
    |            ^^^^^^^^^
283 |         log_error("ç³»ç»Ÿå¥åº·æ£€æŸ¥å¤±è´¥", module="health", error=str(exc))
284 |         return {"healthy": False, "error": str(exc), "status": "error"}
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/health.py:291:16
    |
290 |     Returns:
291 |         è¿è¡Œæ—¶é—´å­—ç¬¦ä¸²ï¼Œæ ¼å¼ï¼š'Xå¤© Xå°æ—¶ Xåˆ†é’Ÿ'ã€‚
    |                       ^^
292 |         å¦‚æžœæ— æ³•èŽ·å–è¿”å›ž 'æœªçŸ¥'ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/routes/health.py:291:19
    |
290 |     Returns:
291 |         è¿è¡Œæ—¶é—´å­—ç¬¦ä¸²ï¼Œæ ¼å¼ï¼š'Xå¤© Xå°æ—¶ Xåˆ†é’Ÿ'ã€‚
    |                             ^^
292 |         å¦‚æžœæ— æ³•èŽ·å–è¿”å›ž 'æœªçŸ¥'ã€‚
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/health.py:296:9
    |
294 |     """
295 |     try:
296 |         from app import app_start_time
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
297 |
298 |         current_time = time_utils.now_china()
    |

TRY300 Consider moving this statement to an `else` block
   --> app/routes/health.py:305:9
    |
303 |         minutes, _ = divmod(remainder, 60)
304 |
305 |         return f"{days}å¤© {hours}å°æ—¶ {minutes}åˆ†é’Ÿ"
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
306 |     except Exception:
307 |         return "æœªçŸ¥"
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/health.py:306:12
    |
305 |         return f"{days}å¤© {hours}å°æ—¶ {minutes}åˆ†é’Ÿ"
306 |     except Exception:
    |            ^^^^^^^^^
307 |         return "æœªçŸ¥"
    |

D104 Missing docstring in public package
--> app/routes/history/__init__.py:1:1

D205 1 blank line required between summary line and description
 --> app/routes/history/logs.py:2:1
  |
2 | / """é²¸è½ - ç»Ÿä¸€æ—¥å¿—ç³»ç»ŸAPIè·¯ç”±
3 | | æä¾›æ—¥å¿—æŸ¥è¯¢ã€å±•ç¤ºå’Œç®¡ç†çš„RESTful API.
4 | | """
  | |___^
5 |
6 |   from datetime import datetime, timedelta
  |
help: Insert single blank line

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/history/logs.py:14:24
   |
12 | from app import db
13 | from app.constants import LOG_LEVELS, TIME_RANGES
14 | from app.errors import SystemError, ValidationError
   |                        ^^^^^^^^^^^
15 | from app.models.unified_log import LogLevel, UnifiedLog
16 | from app.utils.query_filter_utils import get_log_modules as load_log_modules
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/history/logs.py:33:16
   |
31 |     """æ—¥å¿—ä¸­å¿ƒä»ªè¡¨æ¿ã€‚.
32 |
33 |     æ¸²æŸ“æ—¥å¿—æŸ¥è¯¢å’Œå±•ç¤ºé¡µé¢ï¼Œæä¾›æ—¥å¿—çº§åˆ«ã€æ¨¡å—å’Œæ—¶é—´èŒƒå›´çš„ç­›é€‰é€‰é¡¹ã€‚
   |                           ^^
34 |
35 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/history/logs.py:85:29
   |
84 |     Args:
85 |         raw_value: ISO æ ¼å¼å­—ç¬¦ä¸²ï¼Œå¯ä¸º Noneã€‚
   |                                  ^^
86 |
87 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/history/logs.py:88:41
   |
87 |     Returns:
88 |         datetime | None: è§£æžæˆåŠŸè¿”å›ž datetimeï¼Œå¦åˆ™ Noneã€‚
   |                                               ^^
89 |
90 |     """
   |

C901 `search_logs` is too complex (17 > 10)
   --> app/routes/history/logs.py:102:5
    |
100 | @logs_bp.route("/api/search", methods=["GET"])
101 | @login_required
102 | def search_logs() -> Response:
    |     ^^^^^^^^^^^
103 |     """æœç´¢æ—¥å¿— APIã€‚.
    |

PLR0912 Too many branches (17 > 12)
   --> app/routes/history/logs.py:102:5
    |
100 | @logs_bp.route("/api/search", methods=["GET"])
101 | @login_required
102 | def search_logs() -> Response:
    |     ^^^^^^^^^^^
103 |     """æœç´¢æ—¥å¿— APIã€‚.
    |

PLR0915 Too many statements (67 > 50)
   --> app/routes/history/logs.py:102:5
    |
100 | @logs_bp.route("/api/search", methods=["GET"])
101 | @login_required
102 | def search_logs() -> Response:
    |     ^^^^^^^^^^^
103 |     """æœç´¢æ—¥å¿— APIã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/history/logs.py:109:17
    |
108 |     Query Parameters:
109 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
    |                   ^^
110 |         per_page: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 50ã€‚
111 |         level: æ—¥å¿—çº§åˆ«ç­›é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/history/logs.py:110:23
    |
108 |     Query Parameters:
109 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
110 |         per_page: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 50ã€‚
    |                           ^^
111 |         level: æ—¥å¿—çº§åˆ«ç­›é€‰ã€‚
112 |         module: æ¨¡å—ç­›é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/history/logs.py:114:25
    |
112 |         module: æ¨¡å—ç­›é€‰ã€‚
113 |         q: æœç´¢å…³é”®è¯ã€‚
114 |         start_time: å¼€å§‹æ—¶é—´ï¼ˆISO æ ¼å¼ï¼‰ã€‚
    |                             ^^
115 |         end_time: ç»“æŸæ—¶é—´ï¼ˆISO æ ¼å¼ï¼‰ã€‚
116 |         hours: æœ€è¿‘ N å°æ—¶ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/history/logs.py:114:32
    |
112 |         module: æ¨¡å—ç­›é€‰ã€‚
113 |         q: æœç´¢å…³é”®è¯ã€‚
114 |         start_time: å¼€å§‹æ—¶é—´ï¼ˆISO æ ¼å¼ï¼‰ã€‚
    |                                       ^^
115 |         end_time: ç»“æŸæ—¶é—´ï¼ˆISO æ ¼å¼ï¼‰ã€‚
116 |         hours: æœ€è¿‘ N å°æ—¶ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/history/logs.py:115:23
    |
113 |         q: æœç´¢å…³é”®è¯ã€‚
114 |         start_time: å¼€å§‹æ—¶é—´ï¼ˆISO æ ¼å¼ï¼‰ã€‚
115 |         end_time: ç»“æŸæ—¶é—´ï¼ˆISO æ ¼å¼ï¼‰ã€‚
    |                           ^^
116 |         hours: æœ€è¿‘ N å°æ—¶ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/history/logs.py:115:30
    |
113 |         q: æœç´¢å…³é”®è¯ã€‚
114 |         start_time: å¼€å§‹æ—¶é—´ï¼ˆISO æ ¼å¼ï¼‰ã€‚
115 |         end_time: ç»“æŸæ—¶é—´ï¼ˆISO æ ¼å¼ï¼‰ã€‚
    |                                     ^^
116 |         hours: æœ€è¿‘ N å°æ—¶ã€‚
    |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/routes/history/logs.py:169:21
    |
167 |                 raise ValidationError(msg) from exc
168 |         elif not start_time and not end_time and not hours:
169 |             # é»˜è®¤æ—¶é—´èŒƒå›´ï¼šæœ€è¿‘24å°æ—¶
    |                           ^^
170 |             default_start = time_utils.now() - timedelta(hours=24)
171 |             query = query.filter(UnifiedLog.timestamp >= default_start)
    |

PERF401 Use a list comprehension to create a transformed list
   --> app/routes/history/logs.py:212:13
    |
210 |         logs = []
211 |         for log_entry in pagination.items:
212 |             logs.append(log_entry.to_dict())
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
213 |
214 |         response_data = {
    |
help: Replace for loop with list comprehension

C901 `list_logs` is too complex (11 > 10)
   --> app/routes/history/logs.py:239:5
    |
237 | @logs_bp.route("/api/list", methods=["GET"])
238 | @login_required
239 | def list_logs() -> Response:
    |     ^^^^^^^^^
240 |     """Grid.js æ—¥å¿—åˆ—è¡¨ APIã€‚.
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/history/logs.py:396:9
    |
394 |     """
395 |     try:
396 |         from sqlalchemy import distinct
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
397 |
398 |         # èŽ·å–æ‰€æœ‰æ¨¡å—
    |

C901 `get_log_stats` is too complex (11 > 10)
   --> app/routes/history/logs.py:414:5
    |
412 | @logs_bp.route("/api/stats", methods=["GET"])
413 | @login_required
414 | def get_log_stats() -> tuple[dict, int]:
    |     ^^^^^^^^^^^^^
415 |     """èŽ·å–æ—¥å¿—ç»Ÿè®¡ APIï¼ˆå…¼å®¹æ—§å‰ç«¯ï¼‰ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/history/logs.py:415:18
    |
413 | @login_required
414 | def get_log_stats() -> tuple[dict, int]:
415 |     """èŽ·å–æ—¥å¿—ç»Ÿè®¡ APIï¼ˆå…¼å®¹æ—§å‰ç«¯ï¼‰ã€‚.
    |                        ^^
416 |
417 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/history/logs.py:415:24
    |
413 | @login_required
414 | def get_log_stats() -> tuple[dict, int]:
415 |     """èŽ·å–æ—¥å¿—ç»Ÿè®¡ APIï¼ˆå…¼å®¹æ—§å‰ç«¯ï¼‰ã€‚.
    |                                    ^^
416 |
417 |     Returns:
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/history/logs.py:465:16
    |
463 |         total_logs = query.count()
464 |
465 |         # é”™è¯¯æ—¥å¿—æ•°ï¼ˆåŒ…å«ERRORå’ŒCRITICALçº§åˆ«ï¼‰
    |                     ^^
466 |         error_query = query.filter(UnifiedLog.level.in_([LogLevel.ERROR, LogLevel.CRITICAL]))
467 |         error_logs = error_query.count()
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/history/logs.py:465:35
    |
463 |         total_logs = query.count()
464 |
465 |         # é”™è¯¯æ—¥å¿—æ•°ï¼ˆåŒ…å«ERRORå’ŒCRITICALçº§åˆ«ï¼‰
    |                                              ^^
466 |         error_query = query.filter(UnifiedLog.level.in_([LogLevel.ERROR, LogLevel.CRITICAL]))
467 |         error_logs = error_query.count()
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/history/logs.py:474:9
    |
473 |         # æ´»è·ƒæ¨¡å—æ•°
474 |         from sqlalchemy import distinct
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
475 |         modules_query = db.session.query(distinct(UnifiedLog.module))
    |

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/history/sessions.py:8:39
   |
 7 | from app.constants import STATUS_SYNC_OPTIONS, SYNC_CATEGORIES, SYNC_TYPES, SyncStatus
 8 | from app.errors import NotFoundError, SystemError
   |                                       ^^^^^^^^^^^
 9 | from app.services.sync_session_service import sync_session_service
10 | from app.utils.decorators import require_csrf, view_required
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/history/sessions.py:53:15
   |
51 |     """èŽ·å–åŒæ­¥ä¼šè¯åˆ—è¡¨ APIã€‚.
52 |
53 |     æ”¯æŒåˆ†é¡µã€æŽ’åºå’Œç­›é€‰ï¼ˆæŒ‰ç±»åž‹ã€åˆ†ç±»ã€çŠ¶æ€ï¼‰ã€‚
   |                         ^^
54 |
55 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/history/sessions.py:53:25
   |
51 |     """èŽ·å–åŒæ­¥ä¼šè¯åˆ—è¡¨ APIã€‚.
52 |
53 |     æ”¯æŒåˆ†é¡µã€æŽ’åºå’Œç­›é€‰ï¼ˆæŒ‰ç±»åž‹ã€åˆ†ç±»ã€çŠ¶æ€ï¼‰ã€‚
   |                                             ^^
54 |
55 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/history/sessions.py:56:16
   |
55 |     Returns:
56 |         JSON å“åº”ï¼ŒåŒ…å«ä¼šè¯åˆ—è¡¨å’Œåˆ†é¡µä¿¡æ¯ã€‚
   |                  ^^
57 |
58 |     Raises:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/history/sessions.py:62:26
   |
61 |     Query Parameters:
62 |         sync_type: åŒæ­¥ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
   |                                ^^
63 |         sync_category: åŒæ­¥åˆ†ç±»ç­›é€‰ï¼Œå¯é€‰ã€‚
64 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/history/sessions.py:63:30
   |
61 |     Query Parameters:
62 |         sync_type: åŒæ­¥ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
63 |         sync_category: åŒæ­¥åˆ†ç±»ç­›é€‰ï¼Œå¯é€‰ã€‚
   |                                    ^^
64 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
65 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/history/sessions.py:64:21
   |
62 |         sync_type: åŒæ­¥ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
63 |         sync_category: åŒæ­¥åˆ†ç±»ç­›é€‰ï¼Œå¯é€‰ã€‚
64 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
   |                         ^^
65 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
66 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ï¼Œæœ€å¤§ 100ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/history/sessions.py:65:17
   |
63 |         sync_category: åŒæ­¥åˆ†ç±»ç­›é€‰ï¼Œå¯é€‰ã€‚
64 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
65 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
   |                   ^^
66 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ï¼Œæœ€å¤§ 100ã€‚
67 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'started_at'ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/history/sessions.py:66:20
   |
64 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
65 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
66 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ï¼Œæœ€å¤§ 100ã€‚
   |                        ^^
67 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'started_at'ã€‚
68 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/history/sessions.py:66:26
   |
64 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
65 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
66 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ï¼Œæœ€å¤§ 100ã€‚
   |                                 ^^
67 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'started_at'ã€‚
68 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/history/sessions.py:67:19
   |
65 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
66 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ï¼Œæœ€å¤§ 100ã€‚
67 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'started_at'ã€‚
   |                       ^^
68 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/history/sessions.py:68:20
   |
66 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ï¼Œæœ€å¤§ 100ã€‚
67 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'started_at'ã€‚
68 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
   |                        ^^
69 |
70 |     """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/history/sessions.py:68:33
   |
66 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ï¼Œæœ€å¤§ 100ã€‚
67 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'started_at'ã€‚
68 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
   |                                       ^^
69 |
70 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/history/sessions.py:68:34
   |
66 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ï¼Œæœ€å¤§ 100ã€‚
67 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'started_at'ã€‚
68 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
   |                                         ^^
69 |
70 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/history/sessions.py:137:16
    |
136 |     Returns:
137 |         JSON å“åº”ï¼ŒåŒ…å«ä¼šè¯è¯¦æƒ…ã€å®žä¾‹è®°å½•å’Œè¿›åº¦ç™¾åˆ†æ¯”ã€‚
    |                  ^^
138 |
139 |     Raises:
    |

TRY301 Abstract `raise` to an inner function
   --> app/routes/history/sessions.py:149:13
    |
147 |         if not session:
148 |             msg = "ä¼šè¯ä¸å­˜åœ¨"
149 |             raise NotFoundError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^
150 |
151 |         # èŽ·å–å®žä¾‹è®°å½•
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/history/sessions.py:207:22
    |
205 |             )
206 |             return jsonify_unified_success(message="ä¼šè¯å·²å–æ¶ˆ")
207 |         msg = "å–æ¶ˆä¼šè¯å¤±è´¥ï¼Œä¼šè¯ä¸å­˜åœ¨æˆ–å·²ç»“æŸ"
    |                            ^^
208 |         raise NotFoundError(msg)
    |

TRY301 Abstract `raise` to an inner function
   --> app/routes/history/sessions.py:208:9
    |
206 |             return jsonify_unified_success(message="ä¼šè¯å·²å–æ¶ˆ")
207 |         msg = "å–æ¶ˆä¼šè¯å¤±è´¥ï¼Œä¼šè¯ä¸å­˜åœ¨æˆ–å·²ç»“æŸ"
208 |         raise NotFoundError(msg)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^
209 |
210 |     except Exception as e:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/history/sessions.py:233:16
    |
232 |     Returns:
233 |         JSON å“åº”ï¼ŒåŒ…å«ä¼šè¯ä¿¡æ¯ã€é”™è¯¯è®°å½•åˆ—è¡¨å’Œé”™è¯¯æ•°é‡ã€‚
    |                  ^^
234 |
235 |     Raises:
    |

TRY301 Abstract `raise` to an inner function
   --> app/routes/history/sessions.py:245:13
    |
243 |         if not session:
244 |             msg = "ä¼šè¯ä¸å­˜åœ¨"
245 |             raise NotFoundError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^
246 |
247 |         # èŽ·å–æ‰€æœ‰å®žä¾‹è®°å½•
    |

INP001 File `app/routes/instances/batch.py` is part of an implicit namespace package. Add an `__init__.py`.
--> app/routes/instances/batch.py:1:1

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/routes/instances/batch.py:1:15
  |
1 | """Instances åŸŸï¼šæ‰¹é‡åˆ›å»ºä¸Žåˆ é™¤è·¯ç”±ã€‚."""
  |                ^^
2 |
3 | from __future__ import annotations
  |

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/instances/batch.py:19:24
   |
17 | )
18 | from app.constants.system_constants import ErrorCategory
19 | from app.errors import SystemError, ValidationError
   |                        ^^^^^^^^^^^
20 | from app.services.instances import InstanceBatchCreationService, InstanceBatchDeletionService
21 | from app.utils.decorators import create_required, delete_required, require_csrf
   |

TRY301 Abstract `raise` to an inner function
   --> app/routes/instances/batch.py:127:13
    |
125 |         if not uploaded_file or not uploaded_file.filename.endswith(".csv"):
126 |             msg = "è¯·ä¸Šä¼ CSVæ ¼å¼æ–‡ä»¶"
127 |             raise ValidationError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^
128 |
129 |         return _process_csv_file(uploaded_file)
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `file_obj`
   --> app/routes/instances/batch.py:145:33
    |
145 | def _process_csv_file(file_obj: Any) -> Response:
    |                                 ^^^
146 |     """è§£æž CSV æ–‡ä»¶å¹¶è§¦å‘æ‰¹é‡åˆ›å»ºã€‚.
    |

TRY301 Abstract `raise` to an inner function
   --> app/routes/instances/batch.py:171:13
    |
169 |         if not instances_data:
170 |             msg = "CSVæ–‡ä»¶ä¸ºç©ºæˆ–æœªåŒ…å«æœ‰æ•ˆæ•°æ®"
171 |             raise ValidationError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^
172 |
173 |         return _create_instances(instances_data)
    |

INP001 File `app/routes/instances/detail.py` is part of an implicit namespace package. Add an `__init__.py`.
--> app/routes/instances/detail.py:1:1

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/instances/detail.py:13:39
   |
11 | from app import db
12 | from app.constants.database_types import DatabaseType
13 | from app.errors import ConflictError, SystemError, ValidationError
   |                                       ^^^^^^^^^^^
14 | from app.models.account_permission import AccountPermission
15 | from app.models.credential import Credential
   |

PLR0911 Too many return statements (7 > 6)
  --> app/routes/instances/detail.py:34:5
   |
34 | def _parse_is_active_value(data: Any, default: bool = False) -> bool:
   |     ^^^^^^^^^^^^^^^^^^^^^^
35 |     """ä»Žè¯·æ±‚æ•°æ®ä¸­è§£æž is_activeï¼Œå…¼å®¹è¡¨å•/JSON/checkboxã€‚.
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `data`
  --> app/routes/instances/detail.py:34:34
   |
34 | def _parse_is_active_value(data: Any, default: bool = False) -> bool:
   |                                  ^^^
35 |     """ä»Žè¯·æ±‚æ•°æ®ä¸­è§£æž is_activeï¼Œå…¼å®¹è¡¨å•/JSON/checkboxã€‚.
   |

FBT001 Boolean-typed positional argument in function definition
  --> app/routes/instances/detail.py:34:39
   |
34 | def _parse_is_active_value(data: Any, default: bool = False) -> bool:
   |                                       ^^^^^^^
35 |     """ä»Žè¯·æ±‚æ•°æ®ä¸­è§£æž is_activeï¼Œå…¼å®¹è¡¨å•/JSON/checkboxã€‚.
   |

FBT002 Boolean default positional argument in function definition
  --> app/routes/instances/detail.py:34:39
   |
34 | def _parse_is_active_value(data: Any, default: bool = False) -> bool:
   |                                       ^^^^^^^
35 |     """ä»Žè¯·æ±‚æ•°æ®ä¸­è§£æž is_activeï¼Œå…¼å®¹è¡¨å•/JSON/checkboxã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/instances/detail.py:35:26
   |
34 | def _parse_is_active_value(data: Any, default: bool = False) -> bool:
35 |     """ä»Žè¯·æ±‚æ•°æ®ä¸­è§£æž is_activeï¼Œå…¼å®¹è¡¨å•/JSON/checkboxã€‚.
   |                                  ^^
36 |
37 |     Args:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/instances/detail.py:38:21
   |
37 |     Args:
38 |         data: è¯·æ±‚æ•°æ®å¯¹è±¡ï¼ˆè¡¨å•æˆ– JSONï¼‰ã€‚
   |                           ^^
39 |         default: é»˜è®¤å€¼ï¼Œé»˜è®¤ä¸º Falseã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/instances/detail.py:38:30
   |
37 |     Args:
38 |         data: è¯·æ±‚æ•°æ®å¯¹è±¡ï¼ˆè¡¨å•æˆ– JSONï¼‰ã€‚
   |                                        ^^
39 |         default: é»˜è®¤å€¼ï¼Œé»˜è®¤ä¸º Falseã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/instances/detail.py:39:21
   |
37 |     Args:
38 |         data: è¯·æ±‚æ•°æ®å¯¹è±¡ï¼ˆè¡¨å•æˆ– JSONï¼‰ã€‚
39 |         default: é»˜è®¤å€¼ï¼Œé»˜è®¤ä¸º Falseã€‚
   |                        ^^
40 |
41 |     Returns:
   |

SIM108 Use ternary operator `value = None if not values else values[-1]` instead of `if`-`else`-block
  --> app/routes/instances/detail.py:48:9
   |
46 |       if hasattr(data, "getlist"):
47 |           values = data.getlist("is_active")
48 | /         if not values:
49 | |             value = None
50 | |         else:
51 | |             value = values[-1]  # å–æœ€åŽä¸€ä¸ªå€¼ï¼ˆcheckboxä¼˜å…ˆäºŽéšè—åŸŸï¼‰
   | |______________________________^
52 |       else:
53 |           value = data.get("is_active", default)
   |
help: Replace `if`-`else`-block with `value = None if not values else values[-1]`

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/instances/detail.py:51:41
   |
49 |             value = None
50 |         else:
51 |             value = values[-1]  # å–æœ€åŽä¸€ä¸ªå€¼ï¼ˆcheckboxä¼˜å…ˆäºŽéšè—åŸŸï¼‰
   |                                               ^^
52 |     else:
53 |         value = data.get("is_active", default)
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/instances/detail.py:51:56
   |
49 |             value = None
50 |         else:
51 |             value = values[-1]  # å–æœ€åŽä¸€ä¸ªå€¼ï¼ˆcheckboxä¼˜å…ˆäºŽéšè—åŸŸï¼‰
   |                                                                     ^^
52 |     else:
53 |         value = data.get("is_active", default)
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/instances/detail.py:59:27
   |
58 |     if isinstance(value, (list, tuple)):
59 |         # å…¼å®¹ JSON ä¸­æä¾›æ•°ç»„çš„æƒ…å†µï¼Œå–æœ€åŽä¸€ä¸ª
   |                                     ^^
60 |         for item in reversed(value):
61 |             parsed = _parse_is_active_value({"is_active": item}, default)
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/instances/detail.py:87:18
   |
86 |     Returns:
87 |         æ¸²æŸ“çš„å®žä¾‹è¯¦æƒ…é¡µé¢ï¼ŒåŒ…å«è´¦æˆ·åˆ—è¡¨å’Œç»Ÿè®¡ä¿¡æ¯ã€‚
   |                           ^^
88 |
89 |     Raises:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/instances/detail.py:93:35
   |
92 |     Query Parameters:
93 |         include_deleted: æ˜¯å¦åŒ…å«å·²åˆ é™¤è´¦æˆ·ï¼Œé»˜è®¤ 'true'ã€‚
   |                                            ^^
94 |
95 |     """
   |

B018 Found useless expression. Either assign it to a variable or remove it.
   --> app/routes/instances/detail.py:99:5
    |
 98 |     # ç¡®ä¿æ ‡ç­¾å…³ç³»è¢«åŠ è½½
 99 |     instance.tags  # è§¦å‘æ ‡ç­¾å…³ç³»çš„åŠ è½½
    |     ^^^^^^^^^^^^^
100 |
101 |     # èŽ·å–æŸ¥è¯¢å‚æ•°
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/instances/detail.py:184:5
    |
182 |     instance = Instance.query.get_or_404(instance_id)
183 |
184 |     from app.models.account_permission import AccountPermission
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
185 |
186 |     account = AccountPermission.query.filter_by(id=account_id, instance_id=instance_id).first_or_404()
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/instances/detail.py:189:9
    |
188 |     try:
189 |         from app.models.account_change_log import AccountChangeLog
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
190 |
191 |         change_logs = (
    |

PERF401 Use a list comprehension to create a transformed list
   --> app/routes/instances/detail.py:204:13
    |
202 |           history = []
203 |           for log in change_logs:
204 | /             history.append(
205 | |                 {
206 | |                     "id": log.id,
207 | |                     "change_type": log.change_type,
208 | |                     "change_time": (time_utils.format_china_time(log.change_time) if log.change_time else "æœªçŸ¥"),
209 | |                     "status": log.status,
210 | |                     "message": log.message,
211 | |                     "privilege_diff": log.privilege_diff,
212 | |                     "other_diff": log.other_diff,
213 | |                     "session_id": log.session_id,
214 | |                 },
215 | |             )
    | |_____________^
216 |
217 |           return jsonify_unified_success(
    |
help: Replace for loop with list comprehension

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/instances/detail.py:251:16
    |
250 |     Returns:
251 |         JSON å“åº”ï¼ŒåŒ…å«æ›´æ–°åŽçš„å®žä¾‹ä¿¡æ¯ã€‚
    |                  ^^
252 |
253 |     Raises:
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/instances/detail.py:271:13
    |
269 |         raise ValidationError(validation_error)
270 |
271 |     # éªŒè¯å‡­æ®IDï¼ˆå¦‚æžœæä¾›ï¼‰
    |                 ^^
272 |     if data.get("credential_id"):
273 |         try:
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/instances/detail.py:271:18
    |
269 |         raise ValidationError(validation_error)
270 |
271 |     # éªŒè¯å‡­æ®IDï¼ˆå¦‚æžœæä¾›ï¼‰
    |                           ^^
272 |     if data.get("credential_id"):
273 |         try:
    |

B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
   --> app/routes/instances/detail.py:281:13
    |
279 |         except (ValueError, TypeError):
280 |             msg = "æ— æ•ˆçš„å‡­æ®ID"
281 |             raise ValidationError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^
282 |
283 |     # éªŒè¯å®žä¾‹åç§°å”¯ä¸€æ€§ï¼ˆæŽ’é™¤å½“å‰å®žä¾‹ï¼‰
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/instances/detail.py:283:16
    |
281 |             raise ValidationError(msg)
282 |
283 |     # éªŒè¯å®žä¾‹åç§°å”¯ä¸€æ€§ï¼ˆæŽ’é™¤å½“å‰å®žä¾‹ï¼‰
    |                         ^^
284 |     existing_instance = Instance.query.filter(
285 |         Instance.name == data.get("name"), Instance.id != instance_id,
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/instances/detail.py:283:23
    |
281 |             raise ValidationError(msg)
282 |
283 |     # éªŒè¯å®žä¾‹åç§°å”¯ä¸€æ€§ï¼ˆæŽ’é™¤å½“å‰å®žä¾‹ï¼‰
    |                                       ^^
284 |     existing_instance = Instance.query.filter(
285 |         Instance.name == data.get("name"), Instance.id != instance_id,
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/instances/detail.py:348:22
    |
346 | @view_required
347 | def get_instance_database_sizes(instance_id: int) -> Response:
348 |     """èŽ·å–æŒ‡å®šå®žä¾‹çš„æ•°æ®åº“å¤§å°æ•°æ®ï¼ˆæœ€æ–°æˆ–åŽ†å²ï¼‰ã€‚.
    |                                    ^^
349 |
350 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/instances/detail.py:348:28
    |
346 | @view_required
347 | def get_instance_database_sizes(instance_id: int) -> Response:
348 |     """èŽ·å–æŒ‡å®šå®žä¾‹çš„æ•°æ®åº“å¤§å°æ•°æ®ï¼ˆæœ€æ–°æˆ–åŽ†å²ï¼‰ã€‚.
    |                                                ^^
349 |
350 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/instances/detail.py:354:16
    |
353 |     Returns:
354 |         JSON å“åº”ï¼ŒåŒ…å«æ•°æ®åº“å¤§å°æ•°æ®åˆ—è¡¨å’Œç»Ÿè®¡ä¿¡æ¯ã€‚
    |                  ^^
355 |
356 |     Raises:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/instances/detail.py:362:25
    |
361 |     Query Parameters:
362 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                             ^^
363 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
364 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/instances/detail.py:362:36
    |
361 |     Query Parameters:
362 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                                         ^^
363 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
364 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/instances/detail.py:362:37
    |
361 |     Query Parameters:
362 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                                           ^^
363 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
364 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/instances/detail.py:363:23
    |
361 |     Query Parameters:
362 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
363 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                           ^^
364 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
365 |         latest_only: æ˜¯å¦åªè¿”å›žæœ€æ–°æ•°æ®ï¼Œé»˜è®¤ falseã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/instances/detail.py:363:34
    |
361 |     Query Parameters:
362 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
363 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                                       ^^
364 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
365 |         latest_only: æ˜¯å¦åªè¿”å›žæœ€æ–°æ•°æ®ï¼Œé»˜è®¤ falseã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/instances/detail.py:363:35
    |
361 |     Query Parameters:
362 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
363 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
    |                                         ^^
364 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
365 |         latest_only: æ˜¯å¦åªè¿”å›žæœ€æ–°æ•°æ®ï¼Œé»˜è®¤ falseã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/instances/detail.py:364:31
    |
362 |         start_date: å¼€å§‹æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
363 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
364 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                                      ^^
365 |         latest_only: æ˜¯å¦åªè¿”å›žæœ€æ–°æ•°æ®ï¼Œé»˜è®¤ falseã€‚
366 |         include_inactive: æ˜¯å¦åŒ…å«éžæ´»è·ƒæ•°æ®åº“ï¼Œé»˜è®¤ falseã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/instances/detail.py:365:31
    |
363 |         end_date: ç»“æŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ï¼Œå¯é€‰ã€‚
364 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
365 |         latest_only: æ˜¯å¦åªè¿”å›žæœ€æ–°æ•°æ®ï¼Œé»˜è®¤ falseã€‚
    |                                        ^^
366 |         include_inactive: æ˜¯å¦åŒ…å«éžæ´»è·ƒæ•°æ®åº“ï¼Œé»˜è®¤ falseã€‚
367 |         limit: è¿”å›žæ•°é‡é™åˆ¶ï¼Œé»˜è®¤ 100ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/instances/detail.py:366:37
    |
364 |         database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
365 |         latest_only: æ˜¯å¦åªè¿”å›žæœ€æ–°æ•°æ®ï¼Œé»˜è®¤ falseã€‚
366 |         include_inactive: æ˜¯å¦åŒ…å«éžæ´»è·ƒæ•°æ®åº“ï¼Œé»˜è®¤ falseã€‚
    |                                               ^^
367 |         limit: è¿”å›žæ•°é‡é™åˆ¶ï¼Œé»˜è®¤ 100ã€‚
368 |         offset: åç§»é‡ï¼Œé»˜è®¤ 0ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/instances/detail.py:367:22
    |
365 |         latest_only: æ˜¯å¦åªè¿”å›žæœ€æ–°æ•°æ®ï¼Œé»˜è®¤ falseã€‚
366 |         include_inactive: æ˜¯å¦åŒ…å«éžæ´»è·ƒæ•°æ®åº“ï¼Œé»˜è®¤ falseã€‚
367 |         limit: è¿”å›žæ•°é‡é™åˆ¶ï¼Œé»˜è®¤ 100ã€‚
    |                            ^^
368 |         offset: åç§»é‡ï¼Œé»˜è®¤ 0ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/instances/detail.py:368:20
    |
366 |         include_inactive: æ˜¯å¦åŒ…å«éžæ´»è·ƒæ•°æ®åº“ï¼Œé»˜è®¤ falseã€‚
367 |         limit: è¿”å›žæ•°é‡é™åˆ¶ï¼Œé»˜è®¤ 100ã€‚
368 |         offset: åç§»é‡ï¼Œé»˜è®¤ 0ã€‚
    |                       ^^
369 |
370 |     """
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/instances/detail.py:393:33
    |
391 |             return parsed_dt.date() if parsed_dt else None
392 |         except Exception as exc:
393 |             msg = f"{field} æ ¼å¼é”™è¯¯ï¼Œåº”ä¸º YYYY-MM-DD"
    |                                     ^^
394 |             raise ValidationError(msg) from exc
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/instances/detail.py:439:21
    |
437 |     """èŽ·å–è´¦æˆ·æƒé™è¯¦æƒ…ã€‚.
438 |
439 |     æ ¹æ®æ•°æ®åº“ç±»åž‹è¿”å›žç›¸åº”çš„æƒé™ä¿¡æ¯ï¼ˆå…¨å±€æƒé™ã€è§’è‰²ã€æ•°æ®åº“æƒé™ç­‰ï¼‰ã€‚
    |                                     ^^
440 |
441 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/instances/detail.py:439:36
    |
437 |     """èŽ·å–è´¦æˆ·æƒé™è¯¦æƒ…ã€‚.
438 |
439 |     æ ¹æ®æ•°æ®åº“ç±»åž‹è¿”å›žç›¸åº”çš„æƒé™ä¿¡æ¯ï¼ˆå…¨å±€æƒé™ã€è§’è‰²ã€æ•°æ®åº“æƒé™ç­‰ï¼‰ã€‚
    |                                                                   ^^
440 |
441 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/instances/detail.py:446:16
    |
445 |     Returns:
446 |         JSON å“åº”ï¼ŒåŒ…å«è´¦æˆ·æƒé™è¯¦æƒ…ã€‚
    |                  ^^
447 |
448 |     Raises:
    |

ANN202 Missing return type annotation for private function `_build_capacity_query`
   --> app/routes/instances/detail.py:497:5
    |
495 |         message="èŽ·å–è´¦æˆ·æƒé™è¯¦æƒ…æˆåŠŸ",
496 |     )
497 | def _build_capacity_query(
    |     ^^^^^^^^^^^^^^^^^^^^^
498 |     instance_id: int,
499 |     database_name: str | None,
    |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/instances/detail.py:512:13
    |
511 |     Returns:
512 |         æŸ¥è¯¢å¯¹è±¡ï¼Œå¯ç»§ç»­é“¾å¼æ“ä½œã€‚
    |                 ^^
513 |
514 |     """
    |

FBT001 Boolean-typed positional argument in function definition
   --> app/routes/instances/detail.py:542:28
    |
542 | def _normalize_active_flag(flag: bool | None) -> bool:
    |                            ^^^^
543 |     """å°†å¯èƒ½ä¸ºç©ºçš„æ¿€æ´»æ ‡è®°æ ‡å‡†åŒ–ä¸º boolã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/instances/detail.py:546:26
    |
545 |     Args:
546 |         flag: æ•°æ®åº“è®°å½•ä¸­çš„æ´»è·ƒæ ‡è®°ï¼Œå¯èƒ½ä¸º Noneã€‚
    |                                     ^^
547 |
548 |     Returns:
    |

FBT001 Boolean-typed positional argument in function definition
   --> app/routes/instances/detail.py:559:5
    |
557 | def _serialize_capacity_entry(
558 |     stat: DatabaseSizeStat,
559 |     is_active: bool,
    |     ^^^^^^^^^
560 |     deleted_at: datetime | None,
561 |     last_seen_date: date | None,
    |

PLR0913 Too many arguments in function definition (7 > 5)
   --> app/routes/instances/detail.py:589:5
    |
589 | def _fetch_latest_database_sizes(
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
590 |     instance_id: int,
591 |     database_name: str | None,
    |

FBT001 Boolean-typed positional argument in function definition
   --> app/routes/instances/detail.py:594:5
    |
592 |     start_date: date | None,
593 |     end_date: date | None,
594 |     include_inactive: bool,
    |     ^^^^^^^^^^^^^^^^
595 |     limit: int,
596 |     offset: int,
    |

PLR0913 Too many arguments in function definition (7 > 5)
   --> app/routes/instances/detail.py:684:5
    |
684 | def _fetch_historical_database_sizes(
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
685 |     instance_id: int,
686 |     database_name: str | None,
    |

FBT001 Boolean-typed positional argument in function definition
   --> app/routes/instances/detail.py:689:5
    |
687 |     start_date: date | None,
688 |     end_date: date | None,
689 |     include_inactive: bool,
    |     ^^^^^^^^^^^^^^^^
690 |     limit: int,
691 |     offset: int,
    |

INP001 File `app/routes/instances/manage.py` is part of an implicit namespace package. Add an `__init__.py`.
--> app/routes/instances/manage.py:1:1

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/instances/manage.py:17:39
   |
15 |     SyncStatus,
16 | )
17 | from app.errors import ConflictError, SystemError, ValidationError
   |                                       ^^^^^^^^^^^
18 | from app.models.credential import Credential
19 | from app.models.instance import Instance
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/instances/manage.py:45:13
   |
43 |     """å®žä¾‹ç®¡ç†é¦–é¡µã€‚.
44 |
45 |     æ¸²æŸ“å®žä¾‹åˆ—è¡¨é¡µé¢ï¼Œæ”¯æŒæœç´¢ã€ç­›é€‰å’Œæ ‡ç­¾è¿‡æ»¤ã€‚
   |                     ^^
46 |
47 |     Returns:
   |

PLC0415 `import` should be at the top-level of a file
  --> app/routes/instances/manage.py:65:5
   |
64 |     # èŽ·å–æ•°æ®åº“ç±»åž‹é…ç½®
65 |     from app.services.database_type_service import DatabaseTypeService
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
66 |
67 |     database_type_configs = DatabaseTypeService.get_active_types()
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/instances/manage.py:111:18
    |
109 |     """åˆ›å»ºå®žä¾‹ APIã€‚.
110 |
111 |     æŽ¥æ”¶ JSON æˆ–è¡¨å•æ•°æ®ï¼ŒéªŒè¯åŽåˆ›å»ºæ–°çš„æ•°æ®åº“å®žä¾‹ã€‚
    |                         ^^
112 |
113 |     Returns:
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/instances/manage.py:132:13
    |
130 |         raise ValidationError(validation_error)
131 |
132 |     # éªŒè¯å‡­æ®IDï¼ˆå¦‚æžœæä¾›ï¼‰
    |                 ^^
133 |     if data.get("credential_id"):
134 |         try:
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/instances/manage.py:132:18
    |
130 |         raise ValidationError(validation_error)
131 |
132 |     # éªŒè¯å‡­æ®IDï¼ˆå¦‚æžœæä¾›ï¼‰
    |                           ^^
133 |     if data.get("credential_id"):
134 |         try:
    |

B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
   --> app/routes/instances/manage.py:142:13
    |
140 |         except (ValueError, TypeError):
141 |             msg = "æ— æ•ˆçš„å‡­æ®ID"
142 |             raise ValidationError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^
143 |
144 |     # éªŒè¯å®žä¾‹åç§°å”¯ä¸€æ€§
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/instances/manage.py:202:20
    |
200 |     """åˆ é™¤å®žä¾‹ã€‚.
201 |
202 |     åˆ é™¤æŒ‡å®šå®žä¾‹åŠå…¶å…³è”çš„æ‰€æœ‰æ•°æ®ï¼ˆè´¦æˆ·ã€åŒæ­¥è®°å½•ã€å˜æ›´æ—¥å¿—ç­‰ï¼‰ã€‚
    |                                   ^^
203 |
204 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/instances/manage.py:202:34
    |
200 |     """åˆ é™¤å®žä¾‹ã€‚.
201 |
202 |     åˆ é™¤æŒ‡å®šå®žä¾‹åŠå…¶å…³è”çš„æ‰€æœ‰æ•°æ®ï¼ˆè´¦æˆ·ã€åŒæ­¥è®°å½•ã€å˜æ›´æ—¥å¿—ç­‰ï¼‰ã€‚
    |                                                               ^^
203 |
204 |     Args:
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/instances/manage.py:248:22
    |
246 |             exception=e,
247 |         )
248 |         msg = "åˆ é™¤å®žä¾‹å¤±è´¥ï¼Œè¯·é‡è¯•"
    |                            ^^
249 |         raise SystemError(msg) from e
    |

C901 `list_instances_data` is too complex (13 > 10)
   --> app/routes/instances/manage.py:256:5
    |
254 | @login_required
255 | @view_required
256 | def list_instances_data() -> Response:
    |     ^^^^^^^^^^^^^^^^^^^
257 |     """Grid.js å®žä¾‹åˆ—è¡¨ APIã€‚.
    |

PLR0915 Too many statements (53 > 50)
   --> app/routes/instances/manage.py:256:5
    |
254 | @login_required
255 | @view_required
256 | def list_instances_data() -> Response:
    |     ^^^^^^^^^^^^^^^^^^^
257 |     """Grid.js å®žä¾‹åˆ—è¡¨ APIã€‚.
    |

PERF401 Use a list comprehension to create a transformed list
   --> app/routes/instances/manage.py:405:13
    |
403 |           items = []
404 |           for instance in pagination.items:
405 | /             items.append(
406 | |                 {
407 | |                     "id": instance.id,
408 | |                     "name": instance.name,
409 | |                     "db_type": instance.db_type,
410 | |                     "host": instance.host,
411 | |                     "port": instance.port,
412 | |                     "description": instance.description or "",
413 | |                     "is_active": instance.is_active,
414 | |                     "main_version": instance.main_version,
415 | |                     "active_db_count": active_database_counts.get(instance.id, 0),
416 | |                     "active_account_count": active_account_counts.get(instance.id, 0),
417 | |                     "last_sync_time": (
418 | |                         last_sync_times.get(instance.id).isoformat()
419 | |                         if last_sync_times.get(instance.id)
420 | |                         else None
421 | |                     ),
422 | |                     "tags": tags_map.get(instance.id, []),
423 | |                 },
424 | |             )
    | |_____________^
425 |
426 |           return jsonify_unified_success(
    |
help: Replace for loop with list comprehension

C901 `list_instance_accounts` is too complex (11 > 10)
   --> app/routes/instances/manage.py:467:5
    |
465 | @login_required
466 | @view_required
467 | def list_instance_accounts(instance_id: int) -> Response:
    |     ^^^^^^^^^^^^^^^^^^^^^^
468 |     """èŽ·å–å®žä¾‹è´¦æˆ·æ•°æ® APIã€‚.
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/instances/manage.py:492:49
    |
490 |             instance_account = account.instance_account
491 |             is_active = bool(instance_account and instance_account.is_active)
492 |             # å¯¹äºŽé”å®šçŠ¶æ€ä¼˜å…ˆä½¿ç”¨å„æ•°æ®åº“çš„ type_specific å­—æ®µåˆ¤å®šï¼Œè‹¥è´¦æˆ·å·²è¢«æ ‡è®°åˆ é™¤å†è¡¥å……ä¸ºé”å®š
    |                                                                    ^^
493 |             is_locked_flag = bool(account.is_locked)
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/instances/manage.py:544:5
    |
544 |     from app.models.account_permission import AccountPermission
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
545 |
546 |     account = AccountPermission.query.filter_by(id=account_id, instance_id=instance_id).first_or_404()
    |

F821 Undefined name `account_id`
   --> app/routes/instances/manage.py:546:52
    |
544 |     from app.models.account_permission import AccountPermission
545 |
546 |     account = AccountPermission.query.filter_by(id=account_id, instance_id=instance_id).first_or_404()
    |                                                    ^^^^^^^^^^
547 |
548 |     try:
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/instances/manage.py:549:17
    |
548 |     try:
549 |         # æž„å»ºæƒé™ä¿¡æ¯ï¼ˆä¸Žè´¦æˆ·ç®¡ç†é¡µé¢ä¿æŒä¸€è‡´çš„æ•°æ®ç»“æž„ï¼‰
    |                       ^^
550 |         permissions = {
551 |             "db_type": instance.db_type.upper() if instance else "",
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/instances/manage.py:549:34
    |
548 |     try:
549 |         # æž„å»ºæƒé™ä¿¡æ¯ï¼ˆä¸Žè´¦æˆ·ç®¡ç†é¡µé¢ä¿æŒä¸€è‡´çš„æ•°æ®ç»“æž„ï¼‰
    |                                                         ^^
550 |         permissions = {
551 |             "db_type": instance.db_type.upper() if instance else "",
    |

F821 Undefined name `account_id`
   --> app/routes/instances/manage.py:598:24
    |
596 |             module="instances",
597 |             instance_id=instance_id,
598 |             account_id=account_id,
    |                        ^^^^^^^^^^
599 |             exception=exc,
600 |         )
    |

E402 Module level import not at top of file
   --> app/routes/instances/manage.py:606:1
    |
605 |   # æ³¨å†Œé¢å¤–è·¯ç”±æ¨¡å—
606 | / from . import (
607 | |     detail,  # noqa: F401
608 | |     statistics,  # noqa: F401
609 | | )
    | |_^
    |

INP001 File `app/routes/instances/statistics.py` is part of an implicit namespace package. Add an `__init__.py`.
--> app/routes/instances/statistics.py:1:1

A004 Import `SystemError` is shadowing a Python builtin
 --> app/routes/instances/statistics.py:7:24
  |
6 | from app.constants import FlashCategory
7 | from app.errors import SystemError
  |                        ^^^^^^^^^^^
8 | from app.routes.instances.manage import instances_bp
9 | from app.services.statistics.instance_statistics_service import (
  |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/instances/statistics.py:31:26
   |
29 |     except SystemError:
30 |         stats = empty_instance_statistics()
31 |         flash("èŽ·å–å®žä¾‹ç»Ÿè®¡ä¿¡æ¯å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•", FlashCategory.ERROR)
   |                                    ^^
32 |     return render_template("instances/statistics.html", stats=stats)
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/main.py:17:14
   |
15 | @main_bp.route("/admin/api/app-info", methods=["GET"])
16 | def app_info() -> tuple[Response, int]:
17 |     """èŽ·å–åº”ç”¨ä¿¡æ¯ï¼ˆä¾›å‰ç«¯å±•ç¤ºåº”ç”¨åç§°ç­‰ï¼‰ã€‚.
   |                    ^^
18 |
19 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/main.py:17:25
   |
15 | @main_bp.route("/admin/api/app-info", methods=["GET"])
16 | def app_info() -> tuple[Response, int]:
17 |     """èŽ·å–åº”ç”¨ä¿¡æ¯ï¼ˆä¾›å‰ç«¯å±•ç¤ºåº”ç”¨åç§°ç­‰ï¼‰ã€‚.
   |                                          ^^
18 |
19 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/main.py:50:25
   |
48 | @main_bp.route("/favicon.ico")
49 | def favicon() -> "Response":
50 |     """æä¾› favicon.ico æ–‡ä»¶ï¼Œé¿å… 404ã€‚.
   |                             ^^
51 |
52 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/main.py:53:22
   |
52 |     Returns:
53 |         Response: ç©ºå“åº”ï¼ŒçŠ¶æ€ç  204ã€‚
   |                         ^^
54 |
55 |     """
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/main.py:56:15
   |
55 |     """
56 |     # è¿”å›žä¸€ä¸ªç©ºçš„å“åº”ï¼Œé¿å…404é”™è¯¯
   |                       ^^
57 |     return "", HTTPStatus.NO_CONTENT
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/main.py:63:27
   |
61 | @main_bp.route("/apple-touch-icon-precomposed.png")
62 | def apple_touch_icon() -> Response:
63 |     """æä¾› Apple Touch Iconï¼Œé¿å…ç§»åŠ¨ç«¯ 404ã€‚.
   |                             ^^
64 |
65 |     Returns:
   |

PTH118 `os.path.join()` should be replaced by `Path` with `/` operator
  --> app/routes/main.py:70:17
   |
68 |     """
69 |     icon_name = "apple-touch-icon-precomposed.png" if "precomposed" in request.path else "apple-touch-icon.png"
70 |     icon_path = os.path.join(current_app.static_folder, "img")
   |                 ^^^^^^^^^^^^
71 |     return send_from_directory(icon_path, icon_name)
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/main.py:79:22
   |
78 |     Returns:
79 |         Response: ç©ºå“åº”ï¼ŒçŠ¶æ€ç  204ã€‚
   |                         ^^
80 |
81 |     """
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/main.py:82:15
   |
81 |     """
82 |     # è¿”å›žä¸€ä¸ªç©ºçš„å“åº”ï¼Œé¿å…404é”™è¯¯
   |                       ^^
83 |     return "", HTTPStatus.NO_CONTENT
   |

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/partition.py:8:24
   |
 6 | from flask_login import current_user, login_required
 7 |
 8 | from app.errors import SystemError, ValidationError
   |                        ^^^^^^^^^^^
 9 | from app.models.database_size_aggregation import DatabaseSizeAggregation
10 | from app.models.database_size_stat import DatabaseSizeStat
   |

ANN201 Missing return type annotation for public function `partitions_page`
  --> app/routes/partition.py:27:5
   |
25 | @login_required
26 | @view_required
27 | def partitions_page():
   |     ^^^^^^^^^^^^^^^
28 |     """åˆ†åŒºç®¡ç†é¡µé¢ã€‚.
   |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/partition.py:44:16
   |
43 |     Returns:
44 |         JSON å“åº”ï¼ŒåŒ…å«åˆ†åŒºä¿¡æ¯ã€çŠ¶æ€å’Œç¼ºå¤±åˆ†åŒºåˆ—è¡¨ã€‚
   |                  ^^
45 |
46 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/partition.py:69:21
   |
67 |         value: å¾…è§£æžçš„å­—ç¬¦ä¸²å€¼ã€‚
68 |         default: é»˜è®¤å€¼ã€‚
69 |         minimum: æœ€å°å€¼ï¼Œé»˜è®¤ 1ã€‚
   |                        ^^
70 |         maximum: æœ€å¤§å€¼ï¼Œé»˜è®¤ 100ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/partition.py:70:21
   |
68 |         default: é»˜è®¤å€¼ã€‚
69 |         minimum: æœ€å°å€¼ï¼Œé»˜è®¤ 1ã€‚
70 |         maximum: æœ€å¤§å€¼ï¼Œé»˜è®¤ 100ã€‚
   |                        ^^
71 |
72 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/partition.py:73:15
   |
72 |     Returns:
73 |         è§£æžåŽçš„æ•´æ•°ï¼Œé™åˆ¶åœ¨ [minimum, maximum] èŒƒå›´å†…ã€‚
   |                     ^^
74 |
75 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/partition.py:95:33
   |
93 |     Args:
94 |         stats_service: åˆ†åŒºç»Ÿè®¡æœåŠ¡å®žä¾‹ã€‚
95 |         partition_info: å·²èŽ·å–çš„åˆ†åŒºä¿¡æ¯ï¼Œç¼ºçœæ—¶å†…éƒ¨æ‹‰å–ã€‚
   |                                         ^^
96 |
97 |     Returns:
   |

DTZ011 `datetime.date.today()` used
   --> app/routes/partition.py:104:20
    |
102 |     partitions = info.get("partitions", [])
103 |
104 |     current_date = date.today()
    |                    ^^^^^^^^^^^^
105 |     required_partitions: list[str] = []
106 |     for offset in range(3):
    |
help: Use `datetime.datetime.now(tz=...).date()` instead

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:132:13
    |
130 |     """èŽ·å–åˆ†åŒºç®¡ç†çŠ¶æ€ã€‚.
131 |
132 |     æ£€æŸ¥åˆ†åŒºå¥åº·çŠ¶æ€ï¼ŒåŒ…æ‹¬ç¼ºå¤±åˆ†åŒºæ£€æµ‹ã€‚
    |                     ^^
133 |
134 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:135:16
    |
134 |     Returns:
135 |         JSON å“åº”ï¼ŒåŒ…å«åˆ†åŒºçŠ¶æ€ã€æ€»æ•°ã€å¤§å°å’Œç¼ºå¤±åˆ†åŒºåˆ—è¡¨ã€‚
    |                  ^^
136 |
137 |     Raises:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:169:16
    |
167 | @view_required
168 | def list_partitions() -> Response:
169 |     """åˆ†é¡µè¿”å›žåˆ†åŒºåˆ—è¡¨ï¼Œä¾› Grid.js ä½¿ç”¨ã€‚.
    |                        ^^
170 |
171 |     æ”¯æŒåˆ†é¡µã€æŽ’åºã€æœç´¢å’Œç­›é€‰ï¼ˆæŒ‰è¡¨ç±»åž‹ã€çŠ¶æ€ï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/partition.py:171:18
    |
169 |     """åˆ†é¡µè¿”å›žåˆ†åŒºåˆ—è¡¨ï¼Œä¾› Grid.js ä½¿ç”¨ã€‚.
170 |
171 |     æ”¯æŒåˆ†é¡µã€æŽ’åºã€æœç´¢å’Œç­›é€‰ï¼ˆæŒ‰è¡¨ç±»åž‹ã€çŠ¶æ€ï¼‰ã€‚
    |                               ^^
172 |
173 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/partition.py:171:26
    |
169 |     """åˆ†é¡µè¿”å›žåˆ†åŒºåˆ—è¡¨ï¼Œä¾› Grid.js ä½¿ç”¨ã€‚.
170 |
171 |     æ”¯æŒåˆ†é¡µã€æŽ’åºã€æœç´¢å’Œç­›é€‰ï¼ˆæŒ‰è¡¨ç±»åž‹ã€çŠ¶æ€ï¼‰ã€‚
    |                                               ^^
172 |
173 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:174:16
    |
173 |     Returns:
174 |         JSON å“åº”ï¼ŒåŒ…å«åˆ†åŒºåˆ—è¡¨å’Œåˆ†é¡µä¿¡æ¯ã€‚
    |                  ^^
175 |
176 |     Query Parameters:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:177:17
    |
176 |     Query Parameters:
177 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
    |                   ^^
178 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ï¼Œæœ€å¤§ 200ã€‚
179 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'name'ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:178:20
    |
176 |     Query Parameters:
177 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
178 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ï¼Œæœ€å¤§ 200ã€‚
    |                        ^^
179 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'name'ã€‚
180 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'asc'ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:178:26
    |
176 |     Query Parameters:
177 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
178 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ï¼Œæœ€å¤§ 200ã€‚
    |                                 ^^
179 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'name'ã€‚
180 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'asc'ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:179:19
    |
177 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
178 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ï¼Œæœ€å¤§ 200ã€‚
179 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'name'ã€‚
    |                       ^^
180 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'asc'ã€‚
181 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/partition.py:180:20
    |
178 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ï¼Œæœ€å¤§ 200ã€‚
179 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'name'ã€‚
180 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'asc'ã€‚
    |                        ^^
181 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
182 |         table_type: è¡¨ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/partition.py:180:33
    |
178 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ï¼Œæœ€å¤§ 200ã€‚
179 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'name'ã€‚
180 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'asc'ã€‚
    |                                       ^^
181 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
182 |         table_type: è¡¨ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:180:34
    |
178 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ï¼Œæœ€å¤§ 200ã€‚
179 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'name'ã€‚
180 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'asc'ã€‚
    |                                         ^^
181 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
182 |         table_type: è¡¨ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:181:22
    |
179 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'name'ã€‚
180 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'asc'ã€‚
181 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
    |                           ^^
182 |         table_type: è¡¨ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
183 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:182:26
    |
180 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'asc'ã€‚
181 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
182 |         table_type: è¡¨ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                               ^^
183 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:183:21
    |
181 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
182 |         table_type: è¡¨ç±»åž‹ç­›é€‰ï¼Œå¯é€‰ã€‚
183 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                         ^^
184 |
185 |     """
    |

TRY301 Abstract `raise` to an inner function
   --> app/routes/partition.py:281:13
    |
279 |         if parsed_dt is None:
280 |             msg = "æ— æ³•è§£æžæ—¥æœŸ"
281 |             raise ValueError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^
282 |         partition_date = parsed_dt.date()
283 |     except Exception as exc:
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:284:22
    |
282 |         partition_date = parsed_dt.date()
283 |     except Exception as exc:
284 |         msg = "æ—¥æœŸæ ¼å¼é”™è¯¯ï¼Œè¯·ä½¿ç”¨ YYYY-MM-DD æ ¼å¼"
    |                            ^^
285 |         raise ValidationError(msg) from exc
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:353:16
    |
352 |     Returns:
353 |         JSON å“åº”ï¼ŒåŒ…å«åˆ†åŒºç»Ÿè®¡æ•°æ®ã€‚
    |                  ^^
354 |
355 |     """
    |

C901 `get_core_aggregation_metrics` is too complex (40 > 10)
   --> app/routes/partition.py:377:5
    |
375 | @login_required
376 | @view_required
377 | def get_core_aggregation_metrics() -> Response:
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
378 |     """èŽ·å–æ ¸å¿ƒèšåˆæŒ‡æ ‡æ•°æ®ã€‚.
    |

PLR0912 Too many branches (33 > 12)
   --> app/routes/partition.py:377:5
    |
375 | @login_required
376 | @view_required
377 | def get_core_aggregation_metrics() -> Response:
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
378 |     """èŽ·å–æ ¸å¿ƒèšåˆæŒ‡æ ‡æ•°æ®ã€‚.
    |

PLR0915 Too many statements (162 > 50)
   --> app/routes/partition.py:377:5
    |
375 | @login_required
376 | @view_required
377 | def get_core_aggregation_metrics() -> Response:
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
378 |     """èŽ·å–æ ¸å¿ƒèšåˆæŒ‡æ ‡æ•°æ®ã€‚.
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:404:41
    |
402 |         valid_periods = {"daily", "weekly", "monthly", "quarterly"}
403 |         if period_type not in valid_periods:
404 |             log_warning("æ— æ•ˆçš„ period_typeï¼Œé»˜è®¤ä½¿ç”¨ daily", module="partition", period_type=period_type)
    |                                            ^^
405 |             period_type = "daily"
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/partition.py:466:9
    |
465 |         # æŒ‰æ—¥æœŸç»Ÿè®¡4ä¸ªæ ¸å¿ƒæŒ‡æ ‡
466 |         from collections import defaultdict
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
467 |         daily_metrics = defaultdict(lambda: {
468 |             "instance_count": 0,      # æ¯å¤©é‡‡é›†çš„å®žä¾‹æ•°æ€»é‡ï¼ˆæ—¥ç»Ÿè®¡ï¼‰æˆ–å¹³å‡å€¼ï¼ˆå‘¨/æœˆ/å­£ç»Ÿè®¡ï¼‰
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/partition.py:468:51
    |
466 |         from collections import defaultdict
467 |         daily_metrics = defaultdict(lambda: {
468 |             "instance_count": 0,      # æ¯å¤©é‡‡é›†çš„å®žä¾‹æ•°æ€»é‡ï¼ˆæ—¥ç»Ÿè®¡ï¼‰æˆ–å¹³å‡å€¼ï¼ˆå‘¨/æœˆ/å­£ç»Ÿè®¡ï¼‰
    |                                                             ^^
469 |             "database_count": 0,      # æ¯å¤©é‡‡é›†çš„æ•°æ®åº“æ•°æ€»é‡ï¼ˆæ—¥ç»Ÿè®¡ï¼‰æˆ–å¹³å‡å€¼ï¼ˆå‘¨/æœˆ/å­£ç»Ÿè®¡ï¼‰
470 |             "instance_aggregation_count": 0,  # èšåˆç»Ÿè®¡ä¸‹çš„å®žä¾‹ç»Ÿè®¡æ•°é‡
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/partition.py:468:55
    |
466 |         from collections import defaultdict
467 |         daily_metrics = defaultdict(lambda: {
468 |             "instance_count": 0,      # æ¯å¤©é‡‡é›†çš„å®žä¾‹æ•°æ€»é‡ï¼ˆæ—¥ç»Ÿè®¡ï¼‰æˆ–å¹³å‡å€¼ï¼ˆå‘¨/æœˆ/å­£ç»Ÿè®¡ï¼‰
    |                                                                     ^^
469 |             "database_count": 0,      # æ¯å¤©é‡‡é›†çš„æ•°æ®åº“æ•°æ€»é‡ï¼ˆæ—¥ç»Ÿè®¡ï¼‰æˆ–å¹³å‡å€¼ï¼ˆå‘¨/æœˆ/å­£ç»Ÿè®¡ï¼‰
470 |             "instance_aggregation_count": 0,  # èšåˆç»Ÿè®¡ä¸‹çš„å®žä¾‹ç»Ÿè®¡æ•°é‡
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/partition.py:468:60
    |
466 |         from collections import defaultdict
467 |         daily_metrics = defaultdict(lambda: {
468 |             "instance_count": 0,      # æ¯å¤©é‡‡é›†çš„å®žä¾‹æ•°æ€»é‡ï¼ˆæ—¥ç»Ÿè®¡ï¼‰æˆ–å¹³å‡å€¼ï¼ˆå‘¨/æœˆ/å­£ç»Ÿè®¡ï¼‰
    |                                                                               ^^
469 |             "database_count": 0,      # æ¯å¤©é‡‡é›†çš„æ•°æ®åº“æ•°æ€»é‡ï¼ˆæ—¥ç»Ÿè®¡ï¼‰æˆ–å¹³å‡å€¼ï¼ˆå‘¨/æœˆ/å­£ç»Ÿè®¡ï¼‰
470 |             "instance_aggregation_count": 0,  # èšåˆç»Ÿè®¡ä¸‹çš„å®žä¾‹ç»Ÿè®¡æ•°é‡
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/partition.py:468:68
    |
466 |         from collections import defaultdict
467 |         daily_metrics = defaultdict(lambda: {
468 |             "instance_count": 0,      # æ¯å¤©é‡‡é›†çš„å®žä¾‹æ•°æ€»é‡ï¼ˆæ—¥ç»Ÿè®¡ï¼‰æˆ–å¹³å‡å€¼ï¼ˆå‘¨/æœˆ/å­£ç»Ÿè®¡ï¼‰
    |                                                                                             ^^
469 |             "database_count": 0,      # æ¯å¤©é‡‡é›†çš„æ•°æ®åº“æ•°æ€»é‡ï¼ˆæ—¥ç»Ÿè®¡ï¼‰æˆ–å¹³å‡å€¼ï¼ˆå‘¨/æœˆ/å­£ç»Ÿè®¡ï¼‰
470 |             "instance_aggregation_count": 0,  # èšåˆç»Ÿè®¡ä¸‹çš„å®žä¾‹ç»Ÿè®¡æ•°é‡
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/partition.py:469:52
    |
467 |         daily_metrics = defaultdict(lambda: {
468 |             "instance_count": 0,      # æ¯å¤©é‡‡é›†çš„å®žä¾‹æ•°æ€»é‡ï¼ˆæ—¥ç»Ÿè®¡ï¼‰æˆ–å¹³å‡å€¼ï¼ˆå‘¨/æœˆ/å­£ç»Ÿè®¡ï¼‰
469 |             "database_count": 0,      # æ¯å¤©é‡‡é›†çš„æ•°æ®åº“æ•°æ€»é‡ï¼ˆæ—¥ç»Ÿè®¡ï¼‰æˆ–å¹³å‡å€¼ï¼ˆå‘¨/æœˆ/å­£ç»Ÿè®¡ï¼‰
    |                                                               ^^
470 |             "instance_aggregation_count": 0,  # èšåˆç»Ÿè®¡ä¸‹çš„å®žä¾‹ç»Ÿè®¡æ•°é‡
471 |             "database_aggregation_count": 0,   # èšåˆç»Ÿè®¡ä¸‹çš„æ•°æ®åº“ç»Ÿè®¡æ•°é‡
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/partition.py:469:56
    |
467 |         daily_metrics = defaultdict(lambda: {
468 |             "instance_count": 0,      # æ¯å¤©é‡‡é›†çš„å®žä¾‹æ•°æ€»é‡ï¼ˆæ—¥ç»Ÿè®¡ï¼‰æˆ–å¹³å‡å€¼ï¼ˆå‘¨/æœˆ/å­£ç»Ÿè®¡ï¼‰
469 |             "database_count": 0,      # æ¯å¤©é‡‡é›†çš„æ•°æ®åº“æ•°æ€»é‡ï¼ˆæ—¥ç»Ÿè®¡ï¼‰æˆ–å¹³å‡å€¼ï¼ˆå‘¨/æœˆ/å­£ç»Ÿè®¡ï¼‰
    |                                                                       ^^
470 |             "instance_aggregation_count": 0,  # èšåˆç»Ÿè®¡ä¸‹çš„å®žä¾‹ç»Ÿè®¡æ•°é‡
471 |             "database_aggregation_count": 0,   # èšåˆç»Ÿè®¡ä¸‹çš„æ•°æ®åº“ç»Ÿè®¡æ•°é‡
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/partition.py:469:61
    |
467 |         daily_metrics = defaultdict(lambda: {
468 |             "instance_count": 0,      # æ¯å¤©é‡‡é›†çš„å®žä¾‹æ•°æ€»é‡ï¼ˆæ—¥ç»Ÿè®¡ï¼‰æˆ–å¹³å‡å€¼ï¼ˆå‘¨/æœˆ/å­£ç»Ÿè®¡ï¼‰
469 |             "database_count": 0,      # æ¯å¤©é‡‡é›†çš„æ•°æ®åº“æ•°æ€»é‡ï¼ˆæ—¥ç»Ÿè®¡ï¼‰æˆ–å¹³å‡å€¼ï¼ˆå‘¨/æœˆ/å­£ç»Ÿè®¡ï¼‰
    |                                                                                 ^^
470 |             "instance_aggregation_count": 0,  # èšåˆç»Ÿè®¡ä¸‹çš„å®žä¾‹ç»Ÿè®¡æ•°é‡
471 |             "database_aggregation_count": 0,   # èšåˆç»Ÿè®¡ä¸‹çš„æ•°æ®åº“ç»Ÿè®¡æ•°é‡
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/partition.py:469:69
    |
467 |         daily_metrics = defaultdict(lambda: {
468 |             "instance_count": 0,      # æ¯å¤©é‡‡é›†çš„å®žä¾‹æ•°æ€»é‡ï¼ˆæ—¥ç»Ÿè®¡ï¼‰æˆ–å¹³å‡å€¼ï¼ˆå‘¨/æœˆ/å­£ç»Ÿè®¡ï¼‰
469 |             "database_count": 0,      # æ¯å¤©é‡‡é›†çš„æ•°æ®åº“æ•°æ€»é‡ï¼ˆæ—¥ç»Ÿè®¡ï¼‰æˆ–å¹³å‡å€¼ï¼ˆå‘¨/æœˆ/å­£ç»Ÿè®¡ï¼‰
    |                                                                                               ^^
470 |             "instance_aggregation_count": 0,  # èšåˆç»Ÿè®¡ä¸‹çš„å®žä¾‹ç»Ÿè®¡æ•°é‡
471 |             "database_aggregation_count": 0,   # èšåˆç»Ÿè®¡ä¸‹çš„æ•°æ®åº“ç»Ÿè®¡æ•°é‡
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:492:20
    |
490 |             daily_metrics[date_str]["instance_aggregation_count"] += 1
491 |
492 |         # å¯¹äºŽå‘¨ã€æœˆã€å­£ç»Ÿè®¡ï¼Œéœ€è¦è®¡ç®—å¹³å‡å€¼
    |                             ^^
493 |         if period_type in ["weekly", "monthly", "quarterly"]:
494 |             # è®¡ç®—æ¯ä¸ªå‘¨æœŸå†…çš„å¹³å‡å€¼
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/partition.py:511:31
    |
510 |                 if period_type == "weekly":
511 |                     # è®¡ç®—å‘¨çš„å¼€å§‹æ—¥æœŸï¼ˆå‘¨ä¸€ï¼‰
    |                                       ^^
512 |                     week_start = period_start - timedelta(days=period_start.weekday())
513 |                     period_key = week_start.isoformat()
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/partition.py:511:34
    |
510 |                 if period_type == "weekly":
511 |                     # è®¡ç®—å‘¨çš„å¼€å§‹æ—¥æœŸï¼ˆå‘¨ä¸€ï¼‰
    |                                             ^^
512 |                     week_start = period_start - timedelta(days=period_start.weekday())
513 |                     period_key = week_start.isoformat()
    |

E501 Line too long (129 > 120)
   --> app/routes/partition.py:540:121
    |
538 |             for period_key, metrics in period_metrics.items():
539 |                 if metrics["days_in_period"] > 0:
540 |                     daily_metrics[period_key]["instance_count"] = round(metrics["instance_count"] / metrics["days_in_period"], 1)
    |                                                                                                                         ^^^^^^^^^
541 |                     daily_metrics[period_key]["database_count"] = round(metrics["database_count"] / metrics["days_in_period"], 1)
542 |                     daily_metrics[period_key]["instance_aggregation_count"] = metrics["instance_aggregation_count"]
    |

E501 Line too long (129 > 120)
   --> app/routes/partition.py:541:121
    |
539 |                 if metrics["days_in_period"] > 0:
540 |                     daily_metrics[period_key]["instance_count"] = round(metrics["instance_count"] / metrics["days_in_period"], 1)
541 |                     daily_metrics[period_key]["database_count"] = round(metrics["database_count"] / metrics["days_in_period"], 1)
    |                                                                                                                         ^^^^^^^^^
542 |                     daily_metrics[period_key]["instance_aggregation_count"] = metrics["instance_aggregation_count"]
543 |                     daily_metrics[period_key]["database_aggregation_count"] = metrics["database_aggregation_count"]
    |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/partition.py:601:37
    |
599 |             database_agg_label = "æ•°æ®åº“æ—¥ç»Ÿè®¡æ•°é‡"
600 |         elif period_type == "weekly":
601 |             instance_label = "å®žä¾‹æ•°å¹³å‡å€¼ï¼ˆå‘¨ï¼‰"
    |                                           ^^
602 |             database_label = "æ•°æ®åº“æ•°å¹³å‡å€¼ï¼ˆå‘¨ï¼‰"
603 |             instance_agg_label = "å®žä¾‹å‘¨ç»Ÿè®¡æ•°é‡"
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/partition.py:601:39
    |
599 |             database_agg_label = "æ•°æ®åº“æ—¥ç»Ÿè®¡æ•°é‡"
600 |         elif period_type == "weekly":
601 |             instance_label = "å®žä¾‹æ•°å¹³å‡å€¼ï¼ˆå‘¨ï¼‰"
    |                                               ^^
602 |             database_label = "æ•°æ®åº“æ•°å¹³å‡å€¼ï¼ˆå‘¨ï¼‰"
603 |             instance_agg_label = "å®žä¾‹å‘¨ç»Ÿè®¡æ•°é‡"
    |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/partition.py:602:38
    |
600 |         elif period_type == "weekly":
601 |             instance_label = "å®žä¾‹æ•°å¹³å‡å€¼ï¼ˆå‘¨ï¼‰"
602 |             database_label = "æ•°æ®åº“æ•°å¹³å‡å€¼ï¼ˆå‘¨ï¼‰"
    |                                             ^^
603 |             instance_agg_label = "å®žä¾‹å‘¨ç»Ÿè®¡æ•°é‡"
604 |             database_agg_label = "æ•°æ®åº“å‘¨ç»Ÿè®¡æ•°é‡"
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/partition.py:602:40
    |
600 |         elif period_type == "weekly":
601 |             instance_label = "å®žä¾‹æ•°å¹³å‡å€¼ï¼ˆå‘¨ï¼‰"
602 |             database_label = "æ•°æ®åº“æ•°å¹³å‡å€¼ï¼ˆå‘¨ï¼‰"
    |                                                 ^^
603 |             instance_agg_label = "å®žä¾‹å‘¨ç»Ÿè®¡æ•°é‡"
604 |             database_agg_label = "æ•°æ®åº“å‘¨ç»Ÿè®¡æ•°é‡"
    |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/partition.py:606:37
    |
604 |             database_agg_label = "æ•°æ®åº“å‘¨ç»Ÿè®¡æ•°é‡"
605 |         elif period_type == "monthly":
606 |             instance_label = "å®žä¾‹æ•°å¹³å‡å€¼ï¼ˆæœˆï¼‰"
    |                                           ^^
607 |             database_label = "æ•°æ®åº“æ•°å¹³å‡å€¼ï¼ˆæœˆï¼‰"
608 |             instance_agg_label = "å®žä¾‹æœˆç»Ÿè®¡æ•°é‡"
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/partition.py:606:39
    |
604 |             database_agg_label = "æ•°æ®åº“å‘¨ç»Ÿè®¡æ•°é‡"
605 |         elif period_type == "monthly":
606 |             instance_label = "å®žä¾‹æ•°å¹³å‡å€¼ï¼ˆæœˆï¼‰"
    |                                               ^^
607 |             database_label = "æ•°æ®åº“æ•°å¹³å‡å€¼ï¼ˆæœˆï¼‰"
608 |             instance_agg_label = "å®žä¾‹æœˆç»Ÿè®¡æ•°é‡"
    |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/partition.py:607:38
    |
605 |         elif period_type == "monthly":
606 |             instance_label = "å®žä¾‹æ•°å¹³å‡å€¼ï¼ˆæœˆï¼‰"
607 |             database_label = "æ•°æ®åº“æ•°å¹³å‡å€¼ï¼ˆæœˆï¼‰"
    |                                             ^^
608 |             instance_agg_label = "å®žä¾‹æœˆç»Ÿè®¡æ•°é‡"
609 |             database_agg_label = "æ•°æ®åº“æœˆç»Ÿè®¡æ•°é‡"
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/partition.py:607:40
    |
605 |         elif period_type == "monthly":
606 |             instance_label = "å®žä¾‹æ•°å¹³å‡å€¼ï¼ˆæœˆï¼‰"
607 |             database_label = "æ•°æ®åº“æ•°å¹³å‡å€¼ï¼ˆæœˆï¼‰"
    |                                                 ^^
608 |             instance_agg_label = "å®žä¾‹æœˆç»Ÿè®¡æ•°é‡"
609 |             database_agg_label = "æ•°æ®åº“æœˆç»Ÿè®¡æ•°é‡"
    |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/partition.py:611:37
    |
609 |             database_agg_label = "æ•°æ®åº“æœˆç»Ÿè®¡æ•°é‡"
610 |         elif period_type == "quarterly":
611 |             instance_label = "å®žä¾‹æ•°å¹³å‡å€¼ï¼ˆå­£ï¼‰"
    |                                           ^^
612 |             database_label = "æ•°æ®åº“æ•°å¹³å‡å€¼ï¼ˆå­£ï¼‰"
613 |             instance_agg_label = "å®žä¾‹å­£ç»Ÿè®¡æ•°é‡"
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/partition.py:611:39
    |
609 |             database_agg_label = "æ•°æ®åº“æœˆç»Ÿè®¡æ•°é‡"
610 |         elif period_type == "quarterly":
611 |             instance_label = "å®žä¾‹æ•°å¹³å‡å€¼ï¼ˆå­£ï¼‰"
    |                                               ^^
612 |             database_label = "æ•°æ®åº“æ•°å¹³å‡å€¼ï¼ˆå­£ï¼‰"
613 |             instance_agg_label = "å®žä¾‹å­£ç»Ÿè®¡æ•°é‡"
    |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/partition.py:612:38
    |
610 |         elif period_type == "quarterly":
611 |             instance_label = "å®žä¾‹æ•°å¹³å‡å€¼ï¼ˆå­£ï¼‰"
612 |             database_label = "æ•°æ®åº“æ•°å¹³å‡å€¼ï¼ˆå­£ï¼‰"
    |                                             ^^
613 |             instance_agg_label = "å®žä¾‹å­£ç»Ÿè®¡æ•°é‡"
614 |             database_agg_label = "æ•°æ®åº“å­£ç»Ÿè®¡æ•°é‡"
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/partition.py:612:40
    |
610 |         elif period_type == "quarterly":
611 |             instance_label = "å®žä¾‹æ•°å¹³å‡å€¼ï¼ˆå­£ï¼‰"
612 |             database_label = "æ•°æ®åº“æ•°å¹³å‡å€¼ï¼ˆå­£ï¼‰"
    |                                                 ^^
613 |             instance_agg_label = "å®žä¾‹å­£ç»Ÿè®¡æ•°é‡"
614 |             database_agg_label = "æ•°æ®åº“å­£ç»Ÿè®¡æ•°é‡"
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:623:27
    |
621 |         # æž„å»ºChart.jsæ•°æ®é›† - ä½¿ç”¨é«˜é€æ˜Žåº¦å®žçŽ°é¢œè‰²æ··åˆæ•ˆæžœ
622 |         datasets = [
623 |             # å®žä¾‹æ•°æ€»é‡ - è“è‰²å®žçº¿ï¼Œè¾ƒç²—ï¼Œé«˜é€æ˜Žåº¦
    |                                    ^^
624 |             {
625 |                 "label": instance_label,
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:623:30
    |
621 |         # æž„å»ºChart.jsæ•°æ®é›† - ä½¿ç”¨é«˜é€æ˜Žåº¦å®žçŽ°é¢œè‰²æ··åˆæ•ˆæžœ
622 |         datasets = [
623 |             # å®žä¾‹æ•°æ€»é‡ - è“è‰²å®žçº¿ï¼Œè¾ƒç²—ï¼Œé«˜é€æ˜Žåº¦
    |                                          ^^
624 |             {
625 |                 "label": instance_label,
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:627:64
    |
625 |                 "label": instance_label,
626 |                 "data": instance_count_data,
627 |                 "borderColor": "rgba(54, 162, 235, 0.7)",  # è“è‰²ï¼Œ70%é€æ˜Žåº¦
    |                                                                  ^^
628 |                 "backgroundColor": "rgba(54, 162, 235, 0.1)",
629 |                 "borderWidth": 4,
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:634:29
    |
632 |                 "fill": False,
633 |             },
634 |             # å®žä¾‹æ—¥ç»Ÿè®¡æ•°é‡ - çº¢è‰²å®žçº¿ï¼Œè¾ƒç»†ï¼Œé«˜é€æ˜Žåº¦å åŠ 
    |                                        ^^
635 |             {
636 |                 "label": instance_agg_label,
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:634:32
    |
632 |                 "fill": False,
633 |             },
634 |             # å®žä¾‹æ—¥ç»Ÿè®¡æ•°é‡ - çº¢è‰²å®žçº¿ï¼Œè¾ƒç»†ï¼Œé«˜é€æ˜Žåº¦å åŠ 
    |                                              ^^
635 |             {
636 |                 "label": instance_agg_label,
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:638:64
    |
636 |                 "label": instance_agg_label,
637 |                 "data": instance_aggregation_data,
638 |                 "borderColor": "rgba(255, 99, 132, 0.7)",  # çº¢è‰²ï¼Œ70%é€æ˜Žåº¦
    |                                                                  ^^
639 |                 "backgroundColor": "rgba(255, 99, 132, 0.05)",
640 |                 "borderWidth": 3,
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:645:28
    |
643 |                 "fill": False,
644 |             },
645 |             # æ•°æ®åº“æ•°æ€»é‡ - ç»¿è‰²å®žçº¿ï¼Œè¾ƒç²—ï¼Œé«˜é€æ˜Žåº¦
    |                                      ^^
646 |             {
647 |                 "label": database_label,
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:645:31
    |
643 |                 "fill": False,
644 |             },
645 |             # æ•°æ®åº“æ•°æ€»é‡ - ç»¿è‰²å®žçº¿ï¼Œè¾ƒç²—ï¼Œé«˜é€æ˜Žåº¦
    |                                            ^^
646 |             {
647 |                 "label": database_label,
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:649:64
    |
647 |                 "label": database_label,
648 |                 "data": database_count_data,
649 |                 "borderColor": "rgba(75, 192, 192, 0.7)",  # ç»¿è‰²ï¼Œ70%é€æ˜Žåº¦
    |                                                                  ^^
650 |                 "backgroundColor": "rgba(75, 192, 192, 0.1)",
651 |                 "borderWidth": 4,
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:656:30
    |
654 |                 "fill": False,
655 |             },
656 |             # æ•°æ®åº“æ—¥ç»Ÿè®¡æ•°é‡ - æ©™è‰²å®žçº¿ï¼Œè¾ƒç»†ï¼Œé«˜é€æ˜Žåº¦å åŠ 
    |                                          ^^
657 |             {
658 |                 "label": database_agg_label,
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:656:33
    |
654 |                 "fill": False,
655 |             },
656 |             # æ•°æ®åº“æ—¥ç»Ÿè®¡æ•°é‡ - æ©™è‰²å®žçº¿ï¼Œè¾ƒç»†ï¼Œé«˜é€æ˜Žåº¦å åŠ 
    |                                                ^^
657 |             {
658 |                 "label": database_agg_label,
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/partition.py:660:64
    |
658 |                 "label": database_agg_label,
659 |                 "data": database_aggregation_data,
660 |                 "borderColor": "rgba(255, 159, 64, 0.7)",  # æ©™è‰²ï¼Œ70%é€æ˜Žåº¦
    |                                                                  ^^
661 |                 "backgroundColor": "rgba(255, 159, 64, 0.05)",
662 |                 "borderWidth": 3,
    |

PGH003 Use specific rule codes when ignoring type issues
  --> app/routes/scheduler.py:8:55
   |
 7 | from flask import Blueprint, Response, render_template
 8 | from flask_login import current_user, login_required  # type: ignore
   |                                                       ^^^^^^^^^^^^^^
 9 |
10 | from app.constants.scheduler_jobs import BUILTIN_TASK_IDS
   |

A004 Import `SystemError` is shadowing a Python builtin
  --> app/routes/scheduler.py:12:39
   |
10 | from app.constants.scheduler_jobs import BUILTIN_TASK_IDS
11 | from app.constants.sync_constants import SyncCategory, SyncOperationType
12 | from app.errors import NotFoundError, SystemError
   |                                       ^^^^^^^^^^^
13 | from app.scheduler import get_scheduler
14 | from app.services.sync_session_service import sync_session_service
   |

PGH003 Use specific rule codes when ignoring type issues
  --> app/routes/scheduler.py:45:95
   |
44 | _scheduler_forms = SchedulerJobFormView.as_view("scheduler_forms")
45 | _scheduler_forms = login_required(scheduler_manage_required(require_csrf(_scheduler_forms)))  # type: ignore
   |                                                                                               ^^^^^^^^^^^^^^
46 | scheduler_bp.add_url_rule(
47 |     "/api/jobs/<job_id>",
   |

PGH003 Use specific rule codes when ignoring type issues
  --> app/routes/scheduler.py:54:18
   |
53 | @scheduler_bp.route("/")
54 | @login_required  # type: ignore
   |                  ^^^^^^^^^^^^^^
55 | @scheduler_view_required  # type: ignore
56 | def index() -> str:
   |

PGH003 Use specific rule codes when ignoring type issues
  --> app/routes/scheduler.py:55:27
   |
53 | @scheduler_bp.route("/")
54 | @login_required  # type: ignore
55 | @scheduler_view_required  # type: ignore
   |                           ^^^^^^^^^^^^^^
56 | def index() -> str:
57 |     """å®šæ—¶ä»»åŠ¡ç®¡ç†é¡µé¢ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/scheduler.py:59:15
   |
57 |     """å®šæ—¶ä»»åŠ¡ç®¡ç†é¡µé¢ã€‚.
58 |
59 |     æ¸²æŸ“å®šæ—¶ä»»åŠ¡ç®¡ç†ç•Œé¢ï¼Œæä¾›ä»»åŠ¡æŸ¥çœ‹ã€æš‚åœã€æ¢å¤ã€æ‰§è¡Œç­‰åŠŸèƒ½ã€‚
   |                         ^^
60 |
61 |     Returns:
   |

PGH003 Use specific rule codes when ignoring type issues
  --> app/routes/scheduler.py:69:18
   |
68 | @scheduler_bp.route("/api/jobs")
69 | @login_required  # type: ignore
   |                  ^^^^^^^^^^^^^^
70 | @scheduler_view_required  # type: ignore
71 | def get_jobs() -> Response:
   |

PGH003 Use specific rule codes when ignoring type issues
  --> app/routes/scheduler.py:70:27
   |
68 | @scheduler_bp.route("/api/jobs")
69 | @login_required  # type: ignore
70 | @scheduler_view_required  # type: ignore
   |                           ^^^^^^^^^^^^^^
71 | def get_jobs() -> Response:
72 |     """èŽ·å–æ‰€æœ‰å®šæ—¶ä»»åŠ¡ã€‚.
   |

C901 `get_jobs` is too complex (31 > 10)
  --> app/routes/scheduler.py:71:5
   |
69 | @login_required  # type: ignore
70 | @scheduler_view_required  # type: ignore
71 | def get_jobs() -> Response:
   |     ^^^^^^^^
72 |     """èŽ·å–æ‰€æœ‰å®šæ—¶ä»»åŠ¡ã€‚.
   |

PLR0912 Too many branches (33 > 12)
  --> app/routes/scheduler.py:71:5
   |
69 | @login_required  # type: ignore
70 | @scheduler_view_required  # type: ignore
71 | def get_jobs() -> Response:
   |     ^^^^^^^^
72 |     """èŽ·å–æ‰€æœ‰å®šæ—¶ä»»åŠ¡ã€‚.
   |

PLR0915 Too many statements (117 > 50)
  --> app/routes/scheduler.py:71:5
   |
69 | @login_required  # type: ignore
70 | @scheduler_view_required  # type: ignore
71 | def get_jobs() -> Response:
   |     ^^^^^^^^
72 |     """èŽ·å–æ‰€æœ‰å®šæ—¶ä»»åŠ¡ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/scheduler.py:74:16
   |
72 |     """èŽ·å–æ‰€æœ‰å®šæ—¶ä»»åŠ¡ã€‚.
73 |
74 |     æŸ¥è¯¢è°ƒåº¦å™¨ä¸­çš„æ‰€æœ‰ä»»åŠ¡ï¼ŒåŒ…æ‹¬ä»»åŠ¡çŠ¶æ€ã€è§¦å‘å™¨ä¿¡æ¯ç­‰ã€‚
   |                           ^^
75 |
76 |     Returns:
   |

PGH003 Use specific rule codes when ignoring type issues
  --> app/routes/scheduler.py:84:38
   |
82 |     """
83 |     try:
84 |         scheduler = get_scheduler()  # type: ignore
   |                                      ^^^^^^^^^^^^^^
85 |         if not scheduler.running:
86 |             log_warning("è°ƒåº¦å™¨æœªå¯åŠ¨", module="scheduler")
   |

TRY301 Abstract `raise` to an inner function
  --> app/routes/scheduler.py:88:13
   |
86 |             log_warning("è°ƒåº¦å™¨æœªå¯åŠ¨", module="scheduler")
87 |             msg = "è°ƒåº¦å™¨æœªå¯åŠ¨"
88 |             raise SystemError(msg)
   |             ^^^^^^^^^^^^^^^^^^^^^^
89 |         jobs = scheduler.get_jobs()
90 |         jobs_data: list[dict[str, Any]] = []
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/scheduler.py:105:36
    |
104 |                 if trigger_type == "cron" and "CronTrigger" in str(type(job.trigger)):
105 |                     # å¯¹äºŽCronTriggerï¼ŒåŒ…å«æ‰€æœ‰å­—æ®µç”¨äºŽç¼–è¾‘
    |                                      ^^
106 |                     trigger_info = {}
107 |                     trigger_args = {}
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/scheduler.py:109:29
    |
107 |                     trigger_args = {}
108 |
109 |                     # åŒ…å«æ‰€æœ‰å­—æ®µï¼Œç”¨äºŽç¼–è¾‘æ—¶æ­£ç¡®æ˜¾ç¤º
    |                                   ^^
110 |                     # CronTriggerä½¿ç”¨fieldså±žæ€§å­˜å‚¨å­—æ®µå€¼
111 |                     fields = getattr(job.trigger, "fields", {})
    |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/routes/scheduler.py:115:46
    |
113 |                     # æ£€æŸ¥fieldsæ˜¯å¦ä¸ºå­—å…¸
114 |                     if isinstance(fields, dict):
115 |                         # æŒ‰æ—¶é—´é¡ºåºç”Ÿæˆtrigger_argsï¼šç§’ã€åˆ†ã€æ—¶ã€æ—¥ã€æœˆã€å‘¨ã€å¹´
    |                                                     ^^
116 |                         trigger_args["second"] = fields.get("second", "0")
117 |                         trigger_args["minute"] = fields.get("minute", "0")
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/scheduler.py:124:32
    |
122 |                         trigger_args["year"] = fields.get("year", "") if fields.get("year") is not None else ""
123 |                     elif isinstance(fields, list):
124 |                         # å¦‚æžœæ˜¯åˆ—è¡¨ï¼Œç›´æŽ¥ä½¿ç”¨å­—æ®µå€¼
    |                                     ^^
125 |                         # æŒ‰æ—¶é—´é¡ºåºç”Ÿæˆtrigger_argsï¼šç§’ã€åˆ†ã€æ—¶ã€æ—¥ã€æœˆã€å‘¨ã€å¹´
126 |                         if len(fields) >= 8:
    |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/routes/scheduler.py:125:46
    |
123 |                     elif isinstance(fields, list):
124 |                         # å¦‚æžœæ˜¯åˆ—è¡¨ï¼Œç›´æŽ¥ä½¿ç”¨å­—æ®µå€¼
125 |                         # æŒ‰æ—¶é—´é¡ºåºç”Ÿæˆtrigger_argsï¼šç§’ã€åˆ†ã€æ—¶ã€æ—¥ã€æœˆã€å‘¨ã€å¹´
    |                                                     ^^
126 |                         if len(fields) >= 8:
127 |                             trigger_args["second"] = str(fields[7]) if fields[7] is not None else "0"
    |

PLR2004 Magic value used in comparison, consider replacing `8` with a constant variable
   --> app/routes/scheduler.py:126:43
    |
124 |                         # å¦‚æžœæ˜¯åˆ—è¡¨ï¼Œç›´æŽ¥ä½¿ç”¨å­—æ®µå€¼
125 |                         # æŒ‰æ—¶é—´é¡ºåºç”Ÿæˆtrigger_argsï¼šç§’ã€åˆ†ã€æ—¶ã€æ—¥ã€æœˆã€å‘¨ã€å¹´
126 |                         if len(fields) >= 8:
    |                                           ^
127 |                             trigger_args["second"] = str(fields[7]) if fields[7] is not None else "0"
128 |                             trigger_args["minute"] = str(fields[6]) if fields[6] is not None else "0"
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/scheduler.py:144:39
    |
142 |                             trigger_args["year"] = ""
143 |                     else:
144 |                         # å¦‚æžœæ—¢ä¸æ˜¯å­—å…¸ä¹Ÿä¸æ˜¯åˆ—è¡¨ï¼Œä½¿ç”¨é»˜è®¤å€¼
    |                                                   ^^
145 |                         log_warning(
146 |                             "è§¦å‘å™¨å­—æ®µç±»åž‹å¼‚å¸¸",
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/scheduler.py:176:32
    |
174 |                             trigger_info["year"] = fields.get("year")
175 |                     elif isinstance(fields, list):
176 |                         # å¦‚æžœæ˜¯åˆ—è¡¨ï¼Œç›´æŽ¥ä½¿ç”¨å­—æ®µå€¼ï¼ŒæŒ‰æ—¶é—´é¡ºåºæŽ’åºï¼šç§’ã€åˆ†ã€æ—¶ã€æ—¥ã€æœˆã€å‘¨ã€å¹´
    |                                     ^^
177 |                         if len(fields) >= 8:
178 |                             # æŒ‰æ—¶é—´é¡ºåºæ·»åŠ éžé»˜è®¤å€¼
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/scheduler.py:176:40
    |
174 |                             trigger_info["year"] = fields.get("year")
175 |                     elif isinstance(fields, list):
176 |                         # å¦‚æžœæ˜¯åˆ—è¡¨ï¼Œç›´æŽ¥ä½¿ç”¨å­—æ®µå€¼ï¼ŒæŒ‰æ—¶é—´é¡ºåºæŽ’åºï¼šç§’ã€åˆ†ã€æ—¶ã€æ—¥ã€æœˆã€å‘¨ã€å¹´
    |                                                     ^^
177 |                         if len(fields) >= 8:
178 |                             # æŒ‰æ—¶é—´é¡ºåºæ·»åŠ éžé»˜è®¤å€¼
    |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/routes/scheduler.py:176:48
    |
174 |                             trigger_info["year"] = fields.get("year")
175 |                     elif isinstance(fields, list):
176 |                         # å¦‚æžœæ˜¯åˆ—è¡¨ï¼Œç›´æŽ¥ä½¿ç”¨å­—æ®µå€¼ï¼ŒæŒ‰æ—¶é—´é¡ºåºæŽ’åºï¼šç§’ã€åˆ†ã€æ—¶ã€æ—¥ã€æœˆã€å‘¨ã€å¹´
    |                                                                     ^^
177 |                         if len(fields) >= 8:
178 |                             # æŒ‰æ—¶é—´é¡ºåºæ·»åŠ éžé»˜è®¤å€¼
    |

PLR2004 Magic value used in comparison, consider replacing `8` with a constant variable
   --> app/routes/scheduler.py:177:43
    |
175 |                     elif isinstance(fields, list):
176 |                         # å¦‚æžœæ˜¯åˆ—è¡¨ï¼Œç›´æŽ¥ä½¿ç”¨å­—æ®µå€¼ï¼ŒæŒ‰æ—¶é—´é¡ºåºæŽ’åºï¼šç§’ã€åˆ†ã€æ—¶ã€æ—¥ã€æœˆã€å‘¨ã€å¹´
177 |                         if len(fields) >= 8:
    |                                           ^
178 |                             # æŒ‰æ—¶é—´é¡ºåºæ·»åŠ éžé»˜è®¤å€¼
179 |                             if str(fields[7]) != "0":  # second
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/scheduler.py:194:33
    |
192 |                                 trigger_info["year"] = str(fields[0])
193 |                 else:
194 |                     # å¯¹äºŽå…¶ä»–ç±»åž‹çš„è§¦å‘å™¨ï¼Œä½¿ç”¨åŽŸå§‹å­—ç¬¦ä¸²
    |                                           ^^
195 |                     trigger_args = {"description": str(job.trigger)}
196 |             except Exception as job_error:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/scheduler.py:196:20
    |
194 |                     # å¯¹äºŽå…¶ä»–ç±»åž‹çš„è§¦å‘å™¨ï¼Œä½¿ç”¨åŽŸå§‹å­—ç¬¦ä¸²
195 |                     trigger_args = {"description": str(job.trigger)}
196 |             except Exception as job_error:
    |                    ^^^^^^^^^
197 |                 log_error(
198 |                     "å¤„ç†ä»»åŠ¡è§¦å‘å™¨ä¿¡æ¯å¤±è´¥",
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/scheduler.py:212:26
    |
210 |                 state = "STATE_RUNNING"
211 |
212 |             # èŽ·å–ä»»åŠ¡çš„ä¸Šæ¬¡è¿è¡Œæ—¶é—´ï¼ˆä»Žæ—¥å¿—ä¸­æŸ¥æ‰¾ï¼‰
    |                                     ^^
213 |             last_run_time = None
214 |             try:
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/scheduler.py:212:33
    |
210 |                 state = "STATE_RUNNING"
211 |
212 |             # èŽ·å–ä»»åŠ¡çš„ä¸Šæ¬¡è¿è¡Œæ—¶é—´ï¼ˆä»Žæ—¥å¿—ä¸­æŸ¥æ‰¾ï¼‰
    |                                                   ^^
213 |             last_run_time = None
214 |             try:
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/scheduler.py:215:17
    |
213 |             last_run_time = None
214 |             try:
215 |                 from datetime import timedelta
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
216 |
217 |                 from app.models.unified_log import UnifiedLog
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/scheduler.py:217:17
    |
215 |                 from datetime import timedelta
216 |
217 |                 from app.models.unified_log import UnifiedLog
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
218 |                 from app.utils.time_utils import time_utils
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/scheduler.py:218:17
    |
217 |                 from app.models.unified_log import UnifiedLog
218 |                 from app.utils.time_utils import time_utils
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
219 |
220 |                 # æŸ¥æ‰¾æœ€è¿‘24å°æ—¶å†…è¯¥ä»»åŠ¡çš„æ‰§è¡Œæ—¥å¿—
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/scheduler.py:229:20
    |
227 |                 if recent_logs:
228 |                     last_run_time = recent_logs.timestamp.isoformat()
229 |             except Exception as lookup_error:
    |                    ^^^^^^^^^
230 |                 log_warning(
231 |                     "èŽ·å–ä»»åŠ¡ä¸Šæ¬¡è¿è¡Œæ—¶é—´å¤±è´¥",
    |

PGH003 Use specific rule codes when ignoring type issues
   --> app/routes/scheduler.py:272:18
    |
271 | @scheduler_bp.route("/api/jobs/<job_id>")
272 | @login_required  # type: ignore
    |                  ^^^^^^^^^^^^^^
273 | @scheduler_view_required  # type: ignore
274 | def get_job(job_id: str) -> Response:
    |

PGH003 Use specific rule codes when ignoring type issues
   --> app/routes/scheduler.py:273:27
    |
271 | @scheduler_bp.route("/api/jobs/<job_id>")
272 | @login_required  # type: ignore
273 | @scheduler_view_required  # type: ignore
    |                           ^^^^^^^^^^^^^^
274 | def get_job(job_id: str) -> Response:
275 |     """èŽ·å–æŒ‡å®šä»»åŠ¡è¯¦æƒ…ã€‚.
    |

PGH003 Use specific rule codes when ignoring type issues
   --> app/routes/scheduler.py:285:48
    |
283 |     """
284 |     try:
285 |         job = get_scheduler().get_job(job_id)  # type: ignore
    |                                                ^^^^^^^^^^^^^^
286 |         if not job:
287 |             msg = "ä»»åŠ¡ä¸å­˜åœ¨"
    |

TRY301 Abstract `raise` to an inner function
   --> app/routes/scheduler.py:288:13
    |
286 |         if not job:
287 |             msg = "ä»»åŠ¡ä¸å­˜åœ¨"
288 |             raise NotFoundError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^
289 |
290 |         job_info = {
    |

PGH003 Use specific rule codes when ignoring type issues
   --> app/routes/scheduler.py:319:18
    |
318 | @scheduler_bp.route("/api/jobs/<job_id>/pause", methods=["POST"])
319 | @login_required  # type: ignore
    |                  ^^^^^^^^^^^^^^
320 | @scheduler_manage_required  # type: ignore
321 | @require_csrf
    |

PGH003 Use specific rule codes when ignoring type issues
   --> app/routes/scheduler.py:320:29
    |
318 | @scheduler_bp.route("/api/jobs/<job_id>/pause", methods=["POST"])
319 | @login_required  # type: ignore
320 | @scheduler_manage_required  # type: ignore
    |                             ^^^^^^^^^^^^^^
321 | @require_csrf
322 | def pause_job(job_id: str) -> Response:
    |

PGH003 Use specific rule codes when ignoring type issues
   --> app/routes/scheduler.py:333:44
    |
331 |     """
332 |     try:
333 |         get_scheduler().pause_job(job_id)  # type: ignore
    |                                            ^^^^^^^^^^^^^^
334 |         log_info("ä»»åŠ¡æš‚åœæˆåŠŸ", module="scheduler", job_id=job_id)
335 |         return jsonify_unified_success(message="ä»»åŠ¡æš‚åœæˆåŠŸ")
    |

PGH003 Use specific rule codes when ignoring type issues
   --> app/routes/scheduler.py:344:18
    |
343 | @scheduler_bp.route("/api/jobs/<job_id>/resume", methods=["POST"])
344 | @login_required  # type: ignore
    |                  ^^^^^^^^^^^^^^
345 | @scheduler_manage_required  # type: ignore
346 | @require_csrf
    |

PGH003 Use specific rule codes when ignoring type issues
   --> app/routes/scheduler.py:345:29
    |
343 | @scheduler_bp.route("/api/jobs/<job_id>/resume", methods=["POST"])
344 | @login_required  # type: ignore
345 | @scheduler_manage_required  # type: ignore
    |                             ^^^^^^^^^^^^^^
346 | @require_csrf
347 | def resume_job(job_id: str) -> Response:
    |

PGH003 Use specific rule codes when ignoring type issues
   --> app/routes/scheduler.py:358:45
    |
356 |     """
357 |     try:
358 |         get_scheduler().resume_job(job_id)  # type: ignore
    |                                             ^^^^^^^^^^^^^^
359 |         log_info("ä»»åŠ¡æ¢å¤æˆåŠŸ", module="scheduler", job_id=job_id)
360 |         return jsonify_unified_success(message="ä»»åŠ¡æ¢å¤æˆåŠŸ")
    |

PGH003 Use specific rule codes when ignoring type issues
   --> app/routes/scheduler.py:369:18
    |
368 | @scheduler_bp.route("/api/jobs/<job_id>/run", methods=["POST"])
369 | @login_required  # type: ignore
    |                  ^^^^^^^^^^^^^^
370 | @scheduler_manage_required  # type: ignore
371 | @require_csrf
    |

PGH003 Use specific rule codes when ignoring type issues
   --> app/routes/scheduler.py:370:29
    |
368 | @scheduler_bp.route("/api/jobs/<job_id>/run", methods=["POST"])
369 | @login_required  # type: ignore
370 | @scheduler_manage_required  # type: ignore
    |                             ^^^^^^^^^^^^^^
371 | @require_csrf
372 | def run_job(job_id: str) -> Response:
    |

C901 `run_job` is too complex (12 > 10)
   --> app/routes/scheduler.py:372:5
    |
370 | @scheduler_manage_required  # type: ignore
371 | @require_csrf
372 | def run_job(job_id: str) -> Response:
    |     ^^^^^^^
373 |     """ç«‹å³æ‰§è¡Œä»»åŠ¡ã€‚.
    |

PGH003 Use specific rule codes when ignoring type issues
   --> app/routes/scheduler.py:386:38
    |
384 |     """
385 |     try:
386 |         scheduler = get_scheduler()  # type: ignore
    |                                      ^^^^^^^^^^^^^^
387 |         if not scheduler.running:
388 |             log_warning("è°ƒåº¦å™¨æœªå¯åŠ¨", module="scheduler")
    |

TRY301 Abstract `raise` to an inner function
   --> app/routes/scheduler.py:390:13
    |
388 |             log_warning("è°ƒåº¦å™¨æœªå¯åŠ¨", module="scheduler")
389 |             msg = "è°ƒåº¦å™¨æœªå¯åŠ¨"
390 |             raise SystemError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^^
391 |
392 |         job = scheduler.get_job(job_id)
    |

TRY301 Abstract `raise` to an inner function
   --> app/routes/scheduler.py:395:13
    |
393 |         if not job:
394 |             msg = "ä»»åŠ¡ä¸å­˜åœ¨"
395 |             raise NotFoundError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^
396 |
397 |         log_info("å¼€å§‹ç«‹å³æ‰§è¡Œä»»åŠ¡", module="scheduler", job_id=job_id, job_name=job.name)
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/scheduler.py:399:26
    |
397 |         log_info("å¼€å§‹ç«‹å³æ‰§è¡Œä»»åŠ¡", module="scheduler", job_id=job_id, job_name=job.name)
398 |
399 |         # åœ¨è¯·æ±‚ä¸Šä¸‹æ–‡å†…èŽ·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ï¼Œé¿å…çº¿ç¨‹ä¸­è®¿é—® current_user å¤±è´¥
    |                                         ^^
400 |         created_by = None
401 |         user_is_authenticated = False
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/scheduler.py:404:16
    |
402 |         try:
403 |             user_is_authenticated = current_user.is_authenticated  # type: ignore[attr-defined]
404 |         except Exception:  # pragma: no cover - é˜²å¾¡æ€§æ•èŽ·
    |                ^^^^^^^^^
405 |             user_is_authenticated = False
406 |         if user_is_authenticated:
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/scheduler.py:419:25
    |
417 |                         job.func(*job.args, **manual_kwargs)
418 |                     else:
419 |                         from app import create_app
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
420 |
421 |                         app = create_app(init_scheduler_on_start=False)  # type: ignore
    |

PGH003 Use specific rule codes when ignoring type issues
   --> app/routes/scheduler.py:421:74
    |
419 |                         from app import create_app
420 |
421 |                         app = create_app(init_scheduler_on_start=False)  # type: ignore
    |                                                                          ^^^^^^^^^^^^^^
422 |                         with app.app_context():
423 |                             job.func(*job.args, **(job.kwargs or {}))
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/scheduler.py:431:24
    |
429 |                         job_name=job.name,
430 |                     )
431 |                 except Exception as func_error:  # pragma: no cover - é˜²å¾¡æ€§æ—¥å¿—
    |                        ^^^^^^^^^
432 |                     log_error(
433 |                         "ä»»åŠ¡å‡½æ•°æ‰§è¡Œå¤±è´¥",
    |

PGH003 Use specific rule codes when ignoring type issues
   --> app/routes/scheduler.py:472:18
    |
471 | @scheduler_bp.route("/api/jobs/reload", methods=["POST"])
472 | @login_required  # type: ignore
    |                  ^^^^^^^^^^^^^^
473 | @scheduler_manage_required  # type: ignore
474 | @require_csrf
    |

PGH003 Use specific rule codes when ignoring type issues
   --> app/routes/scheduler.py:473:29
    |
471 | @scheduler_bp.route("/api/jobs/reload", methods=["POST"])
472 | @login_required  # type: ignore
473 | @scheduler_manage_required  # type: ignore
    |                             ^^^^^^^^^^^^^^
474 | @require_csrf
475 | def reload_jobs() -> Response:
    |

PGH003 Use specific rule codes when ignoring type issues
   --> app/routes/scheduler.py:485:38
    |
483 |     """
484 |     try:
485 |         scheduler = get_scheduler()  # type: ignore
    |                                      ^^^^^^^^^^^^^^
486 |         if not scheduler.running:
487 |             log_warning("è°ƒåº¦å™¨æœªå¯åŠ¨", module="scheduler")
    |

TRY301 Abstract `raise` to an inner function
   --> app/routes/scheduler.py:489:13
    |
487 |             log_warning("è°ƒåº¦å™¨æœªå¯åŠ¨", module="scheduler")
488 |             msg = "è°ƒåº¦å™¨æœªå¯åŠ¨"
489 |             raise SystemError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^^
490 |
491 |         # èŽ·å–çŽ°æœ‰ä»»åŠ¡åˆ—è¡¨
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/scheduler.py:502:20
    |
500 |                 deleted_count += 1
501 |                 log_info("é‡æ–°åŠ è½½-åˆ é™¤ä»»åŠ¡", module="scheduler", job_id=job_id)
502 |             except Exception as del_err:
    |                    ^^^^^^^^^
503 |                 log_error(
504 |                     "é‡æ–°åŠ è½½-åˆ é™¤ä»»åŠ¡å¤±è´¥",
    |

PLC0415 `import` should be at the top-level of a file
   --> app/routes/scheduler.py:511:9
    |
510 |         # é‡æ–°åŠ è½½ä»»åŠ¡é…ç½®
511 |         from app.scheduler import _reload_all_jobs
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
512 |         _reload_all_jobs()
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/scheduler.py:532:46
    |
530 |                 "reloaded_count": len(reloaded_jobs),
531 |             },
532 |             message=f"å·²åˆ é™¤ {deleted_count} ä¸ªä»»åŠ¡ï¼Œé‡æ–°åŠ è½½ {len(reloaded_jobs)} ä¸ªä»»åŠ¡",
    |                                                    ^^
533 |         )
    |

D104 Missing docstring in public package
--> app/routes/tags/__init__.py:1:1

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/tags/bulk.py:28:28
   |
27 |     Returns:
28 |         (JSON å“åº”, HTTP çŠ¶æ€ç )ï¼ŒåŒ…å«åˆ†é…ç»Ÿè®¡ã€‚
   |                                 ^^
29 |
30 |     Raises:
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/tags/bulk.py:121:27
    |
119 |             "tag_ids": tag_ids,
120 |         },
121 |         message=f"æ ‡ç­¾æ‰¹é‡åˆ†é…æˆåŠŸï¼Œå…±åˆ†é… {assigned_count} ä¸ªæ ‡ç­¾å…³ç³»",
    |                                   ^^
122 |     )
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/tags/bulk.py:133:28
    |
132 |     Returns:
133 |         (JSON å“åº”, HTTP çŠ¶æ€ç )ï¼ŒåŒ…å«ç§»é™¤ç»Ÿè®¡ã€‚
    |                                 ^^
134 |
135 |     Raises:
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/tags/bulk.py:226:27
    |
224 |             "tag_ids": tag_ids,
225 |         },
226 |         message=f"æ ‡ç­¾æ‰¹é‡ç§»é™¤æˆåŠŸï¼Œå…±ç§»é™¤ {removed_count} ä¸ªæ ‡ç­¾å…³ç³»",
    |                                   ^^
227 |     )
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/tags/bulk.py:238:28
    |
237 |     Returns:
238 |         (JSON å“åº”, HTTP çŠ¶æ€ç )ï¼ŒåŒ…å«æ ‡ç­¾åˆ—è¡¨å’Œåˆ†ç±»åç§°æ˜ å°„ã€‚
    |                                 ^^
239 |
240 |     Raises:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/tags/bulk.py:305:28
    |
304 |     Returns:
305 |         (JSON å“åº”, HTTP çŠ¶æ€ç )ï¼ŒåŒ…å«ç§»é™¤ç»Ÿè®¡ã€‚
    |                                 ^^
306 |
307 |     Raises:
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/tags/bulk.py:396:25
    |
394 |             "instance_ids": instance_ids,
395 |         },
396 |         message=f"æ‰¹é‡ç§»é™¤æˆåŠŸï¼Œå…±ç§»é™¤ {total_removed} ä¸ªæ ‡ç­¾å…³ç³»",
    |                               ^^
397 |     )
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/routes/tags/bulk.py:428:20
    |
426 | @view_required
427 | def list_all_tags() -> tuple[Response, int]:
428 |     """èŽ·å–æ‰€æœ‰æ ‡ç­¾åˆ—è¡¨ APIï¼ˆåŒ…æ‹¬éžæ´»è·ƒæ ‡ç­¾ï¼‰ã€‚.
    |                            ^^
429 |
430 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/routes/tags/bulk.py:428:28
    |
426 | @view_required
427 | def list_all_tags() -> tuple[Response, int]:
428 |     """èŽ·å–æ‰€æœ‰æ ‡ç­¾åˆ—è¡¨ APIï¼ˆåŒ…æ‹¬éžæ´»è·ƒæ ‡ç­¾ï¼‰ã€‚.
    |                                            ^^
429 |
430 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/tags/manage.py:68:13
   |
66 |     """æ ‡ç­¾ç®¡ç†é¦–é¡µã€‚.
67 |
68 |     æ¸²æŸ“æ ‡ç­¾ç®¡ç†é¡µé¢ï¼Œæ”¯æŒæœç´¢ã€åˆ†ç±»å’ŒçŠ¶æ€ç­›é€‰ã€‚
   |                     ^^
69 |
70 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/tags/manage.py:74:22
   |
73 |     Query Parameters:
74 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
   |                           ^^
75 |         category: æ ‡ç­¾åˆ†ç±»ï¼Œå¯é€‰ã€‚
76 |         status: çŠ¶æ€ç­›é€‰ï¼ˆ'all'ã€'active'ã€'inactive'ï¼‰ï¼Œé»˜è®¤ 'all'ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/tags/manage.py:75:23
   |
73 |     Query Parameters:
74 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
75 |         category: æ ‡ç­¾åˆ†ç±»ï¼Œå¯é€‰ã€‚
   |                           ^^
76 |         status: çŠ¶æ€ç­›é€‰ï¼ˆ'all'ã€'active'ã€'inactive'ï¼‰ï¼Œé»˜è®¤ 'all'ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/tags/manage.py:76:21
   |
74 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
75 |         category: æ ‡ç­¾åˆ†ç±»ï¼Œå¯é€‰ã€‚
76 |         status: çŠ¶æ€ç­›é€‰ï¼ˆ'all'ã€'active'ã€'inactive'ï¼‰ï¼Œé»˜è®¤ 'all'ã€‚
   |                         ^^
77 |
78 |     """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/tags/manage.py:76:47
   |
74 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
75 |         category: æ ‡ç­¾åˆ†ç±»ï¼Œå¯é€‰ã€‚
76 |         status: çŠ¶æ€ç­›é€‰ï¼ˆ'all'ã€'active'ã€'inactive'ï¼‰ï¼Œé»˜è®¤ 'all'ã€‚
   |                                                      ^^
77 |
78 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/tags/manage.py:76:48
   |
74 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
75 |         category: æ ‡ç­¾åˆ†ç±»ï¼Œå¯é€‰ã€‚
76 |         status: çŠ¶æ€ç­›é€‰ï¼ˆ'all'ã€'active'ã€'inactive'ï¼‰ï¼Œé»˜è®¤ 'all'ã€‚
   |                                                        ^^
77 |
78 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/tags/manage.py:159:28
    |
157 |     """åˆ é™¤æ ‡ç­¾ã€‚.
158 |
159 |     ç¡¬åˆ é™¤æ ‡ç­¾åŠå…¶å…³è”å…³ç³»ã€‚å¦‚æžœæ ‡ç­¾æ­£åœ¨è¢«å®žä¾‹ä½¿ç”¨ï¼Œåˆ™æ‹’ç»åˆ é™¤ã€‚
    |                                                   ^^
160 |
161 |     Args:
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/tags/manage.py:179:72
    |
177 |             if _prefers_json_response():
178 |                 return jsonify_unified_error_message(
179 |                     f"æ ‡ç­¾ '{tag.display_name}' ä»è¢« {instance_count} ä¸ªå®žä¾‹ä½¿ç”¨ï¼Œæ— æ³•åˆ é™¤",
    |                                                                                 ^^
180 |                     status_code=HttpStatus.CONFLICT,
181 |                     message_key="TAG_IN_USE",
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/tags/manage.py:185:46
    |
183 |                 )
184 |             flash(
185 |                 f"æ— æ³•åˆ é™¤æ ‡ç­¾ '{tag.display_name}'ï¼Œè¿˜æœ‰ {instance_count} ä¸ªå®žä¾‹æ­£åœ¨ä½¿ç”¨",
    |                                                    ^^
186 |                 FlashCategory.ERROR,
187 |             )
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/tags/manage.py:201:12
    |
199 |         return redirect(url_for("tags.index"))
200 |
201 |     except Exception as e:
    |            ^^^^^^^^^
202 |         db.session.rollback()
203 |         log_error(
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/tags/manage.py:224:18
    |
222 | @require_csrf
223 | def batch_delete_tags() -> tuple[Response, int]:
224 |     """æ‰¹é‡åˆ é™¤æ ‡ç­¾ APIï¼Œè¿”å›žæ¯ä¸ªæ ‡ç­¾çš„å¤„ç†ç»“æžœã€‚."""
    |                        ^^
225 |     payload = request.get_json(silent=True) or {}
226 |     tag_ids = payload.get("tag_ids") or []
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/routes/tags/manage.py:264:16
    |
262 |             _delete_tag_record(tag, operator_id=operator_id)
263 |             results.append({"tag_id": tag_id, "status": "deleted"})
264 |         except Exception as exc:
    |                ^^^^^^^^^
265 |             db.session.rollback()
266 |             has_failure = True
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/tags/manage.py:281:15
    |
279 |     """Grid.js æ ‡ç­¾åˆ—è¡¨ APIã€‚.
280 |
281 |     æ”¯æŒåˆ†é¡µã€æœç´¢å’Œç­›é€‰ï¼Œè¿”å›žæ ‡ç­¾åˆ—è¡¨åŠå®žä¾‹æ•°é‡ç»Ÿè®¡ã€‚
    |                         ^^
282 |
283 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/tags/manage.py:287:17
    |
286 |     Query Parameters:
287 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
    |                   ^^
288 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ã€‚
289 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/tags/manage.py:288:20
    |
286 |     Query Parameters:
287 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
288 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ã€‚
    |                        ^^
289 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
290 |         category: åˆ†ç±»ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/tags/manage.py:289:22
    |
287 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
288 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ã€‚
289 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
    |                           ^^
290 |         category: åˆ†ç±»ç­›é€‰ï¼Œå¯é€‰ã€‚
291 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/tags/manage.py:290:23
    |
288 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ã€‚
289 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
290 |         category: åˆ†ç±»ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                           ^^
291 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/tags/manage.py:291:21
    |
289 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
290 |         category: åˆ†ç±»ç­›é€‰ï¼Œå¯é€‰ã€‚
291 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                         ^^
292 |
293 |     """
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/routes/tags/manage.py:434:10
    |
433 | # ---------------------------------------------------------------------------
434 | # è¡¨å•é¡µé¢å·²é€€å½¹ï¼Œå…¨éƒ¨é€šè¿‡åˆ—è¡¨é¡µæ¨¡æ€ + API å¤„ç†
    |                 ^^
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/users.py:35:13
   |
33 |     """ç”¨æˆ·ç®¡ç†é¦–é¡µã€‚.
34 |
35 |     æ¸²æŸ“ç”¨æˆ·ç®¡ç†é¡µé¢ï¼Œæ”¯æŒæœç´¢ã€è§’è‰²å’ŒçŠ¶æ€ç­›é€‰ã€‚
   |                     ^^
36 |
37 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/users.py:41:22
   |
40 |     Query Parameters:
41 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
   |                           ^^
42 |         role: è§’è‰²ç­›é€‰ï¼Œå¯é€‰ã€‚
43 |         status: çŠ¶æ€ç­›é€‰ï¼ˆ'all'ã€'active'ã€'inactive'ï¼‰ï¼Œé»˜è®¤ 'all'ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/users.py:42:19
   |
40 |     Query Parameters:
41 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
42 |         role: è§’è‰²ç­›é€‰ï¼Œå¯é€‰ã€‚
   |                       ^^
43 |         status: çŠ¶æ€ç­›é€‰ï¼ˆ'all'ã€'active'ã€'inactive'ï¼‰ï¼Œé»˜è®¤ 'all'ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/users.py:43:21
   |
41 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
42 |         role: è§’è‰²ç­›é€‰ï¼Œå¯é€‰ã€‚
43 |         status: çŠ¶æ€ç­›é€‰ï¼ˆ'all'ã€'active'ã€'inactive'ï¼‰ï¼Œé»˜è®¤ 'all'ã€‚
   |                         ^^
44 |
45 |     """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/users.py:43:47
   |
41 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
42 |         role: è§’è‰²ç­›é€‰ï¼Œå¯é€‰ã€‚
43 |         status: çŠ¶æ€ç­›é€‰ï¼ˆ'all'ã€'active'ã€'inactive'ï¼‰ï¼Œé»˜è®¤ 'all'ã€‚
   |                                                      ^^
44 |
45 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/users.py:43:48
   |
41 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
42 |         role: è§’è‰²ç­›é€‰ï¼Œå¯é€‰ã€‚
43 |         status: çŠ¶æ€ç­›é€‰ï¼ˆ'all'ã€'active'ã€'inactive'ï¼‰ï¼Œé»˜è®¤ 'all'ã€‚
   |                                                        ^^
44 |
45 |     """
   |

BLE001 Do not catch blind exception: `Exception`
  --> app/routes/users.py:60:12
   |
58 |         )
59 |
60 |     except Exception as e:
   |            ^^^^^^^^^
61 |         log_error(
62 |             "åŠ è½½ç”¨æˆ·ç®¡ç†é¡µé¢å¤±è´¥",
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/users.py:83:17
   |
82 |     Query Parameters:
83 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
   |                   ^^
84 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 10ã€‚
85 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'created_at'ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/users.py:84:20
   |
82 |     Query Parameters:
83 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
84 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 10ã€‚
   |                        ^^
85 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'created_at'ã€‚
86 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/users.py:85:19
   |
83 |         page: é¡µç ï¼Œé»˜è®¤ 1ã€‚
84 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 10ã€‚
85 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'created_at'ã€‚
   |                       ^^
86 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
87 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/routes/users.py:86:20
   |
84 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 10ã€‚
85 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'created_at'ã€‚
86 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
   |                        ^^
87 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
88 |         role: è§’è‰²ç­›é€‰ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/routes/users.py:86:33
   |
84 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 10ã€‚
85 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'created_at'ã€‚
86 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
   |                                       ^^
87 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
88 |         role: è§’è‰²ç­›é€‰ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/users.py:86:34
   |
84 |         limit: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 10ã€‚
85 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'created_at'ã€‚
86 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
   |                                         ^^
87 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
88 |         role: è§’è‰²ç­›é€‰ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/users.py:87:22
   |
85 |         sort: æŽ’åºå­—æ®µï¼Œé»˜è®¤ 'created_at'ã€‚
86 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
87 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
   |                           ^^
88 |         role: è§’è‰²ç­›é€‰ï¼Œå¯é€‰ã€‚
89 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/users.py:88:19
   |
86 |         order: æŽ’åºæ–¹å‘ï¼ˆ'asc'ã€'desc'ï¼‰ï¼Œé»˜è®¤ 'desc'ã€‚
87 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
88 |         role: è§’è‰²ç­›é€‰ï¼Œå¯é€‰ã€‚
   |                       ^^
89 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/routes/users.py:89:21
   |
87 |         search: æœç´¢å…³é”®è¯ï¼Œå¯é€‰ã€‚
88 |         role: è§’è‰²ç­›é€‰ï¼Œå¯é€‰ã€‚
89 |         status: çŠ¶æ€ç­›é€‰ï¼Œå¯é€‰ã€‚
   |                         ^^
90 |
91 |     """
   |

D205 1 blank line required between summary line and description
 --> app/scheduler.py:1:1
  |
1 | / """é²¸è½å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨
2 | | ä½¿ç”¨APSchedulerå®žçŽ°è½»é‡çº§å®šæ—¶ä»»åŠ¡.
3 | | """
  | |___^
4 |
5 |   import atexit
  |
help: Insert single blank line

D107 Missing docstring in `__init__`
  --> app/scheduler.py:31:9
   |
29 |     """å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨."""
30 |
31 |     def __init__(self, app: Any = None) -> None:
   |         ^^^^^^^^
32 |         self.app = app
33 |         self.scheduler = None
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `app`
  --> app/scheduler.py:31:29
   |
29 |     """å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨."""
30 |
31 |     def __init__(self, app: Any = None) -> None:
   |                             ^^^
32 |         self.app = app
33 |         self.scheduler = None
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/scheduler.py:39:40
   |
37 |         """é…ç½® APScheduler å¹¶æ³¨å†Œäº‹ä»¶ç›‘å¬ã€‚.
38 |
39 |         å‡†å¤‡ SQLite jobstoreã€çº¿ç¨‹æ‰§è¡Œå™¨ä¸Žé»˜è®¤ä»»åŠ¡å‚æ•°ï¼ŒéšåŽåˆ›å»ºåŽå°è°ƒåº¦å™¨å®žä¾‹å¹¶
   |                                                       ^^
40 |         ç»‘å®šæˆåŠŸ/å¤±è´¥äº‹ä»¶ï¼Œç¡®ä¿æ‰€æœ‰è°ƒåº¦å™¨è¡Œä¸ºé›†ä¸­åœ¨åŒä¸€å¤„å®Œæˆã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/scheduler.py:40:18
   |
39 |         å‡†å¤‡ SQLite jobstoreã€çº¿ç¨‹æ‰§è¡Œå™¨ä¸Žé»˜è®¤ä»»åŠ¡å‚æ•°ï¼ŒéšåŽåˆ›å»ºåŽå°è°ƒåº¦å™¨å®žä¾‹å¹¶
40 |         ç»‘å®šæˆåŠŸ/å¤±è´¥äº‹ä»¶ï¼Œç¡®ä¿æ‰€æœ‰è°ƒåº¦å™¨è¡Œä¸ºé›†ä¸­åœ¨åŒä¸€å¤„å®Œæˆã€‚
   |                          ^^
41 |
42 |         Returns:
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/scheduler.py:65:52
   |
63 |             "coalesce": True,  # åˆå¹¶ç›¸åŒä»»åŠ¡
64 |             "max_instances": 1,  # æœ€å¤§å®žä¾‹æ•°
65 |             "misfire_grace_time": 300,  # é”™è¿‡æ‰§è¡Œæ—¶é—´å®¹å¿åº¦ï¼ˆç§’ï¼‰
   |                                                             ^^
66 |         }
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/scheduler.py:65:54
   |
63 |             "coalesce": True,  # åˆå¹¶ç›¸åŒä»»åŠ¡
64 |             "max_instances": 1,  # æœ€å¤§å®žä¾‹æ•°
65 |             "misfire_grace_time": 300,  # é”™è¿‡æ‰§è¡Œæ—¶é—´å®¹å¿åº¦ï¼ˆç§’ï¼‰
   |                                                                 ^^
66 |         }
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `event`
  --> app/scheduler.py:80:36
   |
78 |         self.scheduler.add_listener(self._job_error, EVENT_JOB_ERROR)
79 |
80 |     def _job_executed(self, event: Any) -> None:
   |                                    ^^^
81 |         """å¤„ç†ä»»åŠ¡æˆåŠŸäº‹ä»¶ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/scheduler.py:84:36
   |
83 |         Args:
84 |             event: APScheduler äº‹ä»¶å¯¹è±¡ï¼ŒåŒ…å« job_id ä¸Žè¿”å›žå€¼ã€‚
   |                                        ^^
85 |
86 |         Returns:
   |

G004 Logging statement uses f-string
  --> app/scheduler.py:90:21
   |
89 |         """
90 |         logger.info(f"ä»»åŠ¡æ‰§è¡ŒæˆåŠŸ: {event.job_id} - {event.retval}")
   |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
91 |
92 |     def _job_error(self, event: Any) -> None:
   |
help: Convert to lazy `%` formatting

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `event`
  --> app/scheduler.py:92:33
   |
90 |         logger.info(f"ä»»åŠ¡æ‰§è¡ŒæˆåŠŸ: {event.job_id} - {event.retval}")
91 |
92 |     def _job_error(self, event: Any) -> None:
   |                                 ^^^
93 |         """å¤„ç†ä»»åŠ¡å¤±è´¥äº‹ä»¶ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/scheduler.py:96:36
   |
95 |         Args:
96 |             event: APScheduler äº‹ä»¶å¯¹è±¡ï¼ŒåŒ…å«å¼‚å¸¸ä¿¡æ¯ã€‚
   |                                        ^^
97 |
98 |         Returns:
   |

G004 Logging statement uses f-string
   --> app/scheduler.py:103:22
    |
101 |         """
102 |         exception_str = str(event.exception) if event.exception else "æœªçŸ¥é”™è¯¯"
103 |         logger.error(f"ä»»åŠ¡æ‰§è¡Œå¤±è´¥: {event.job_id} - {exception_str}")
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
104 |
105 |     def start(self) -> None:
    |
help: Convert to lazy `%` formatting

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:116:41
    |
114 |             logger.info("å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨å·²å¯åŠ¨")
115 |         else:
116 |             logger.warning("å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨å·²ç»åœ¨è¿è¡Œï¼Œè·³è¿‡å¯åŠ¨")
    |                                                     ^^
117 |
118 |     def stop(self) -> None:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `func`
   --> app/scheduler.py:129:29
    |
127 |             logger.info("å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨å·²åœæ­¢")
128 |
129 |     def add_job(self, func: Any, trigger: Any, **kwargs: Any) -> Any:
    |                             ^^^
130 |         """å‘è°ƒåº¦å™¨æ³¨å†Œä»»åŠ¡ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `trigger`
   --> app/scheduler.py:129:43
    |
127 |             logger.info("å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨å·²åœæ­¢")
128 |
129 |     def add_job(self, func: Any, trigger: Any, **kwargs: Any) -> Any:
    |                                           ^^^
130 |         """å‘è°ƒåº¦å™¨æ³¨å†Œä»»åŠ¡ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `**kwargs`
   --> app/scheduler.py:129:58
    |
127 |             logger.info("å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨å·²åœæ­¢")
128 |
129 |     def add_job(self, func: Any, trigger: Any, **kwargs: Any) -> Any:
    |                                                          ^^^
130 |         """å‘è°ƒåº¦å™¨æ³¨å†Œä»»åŠ¡ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `add_job`
   --> app/scheduler.py:129:66
    |
127 |             logger.info("å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨å·²åœæ­¢")
128 |
129 |     def add_job(self, func: Any, trigger: Any, **kwargs: Any) -> Any:
    |                                                                  ^^^
130 |         """å‘è°ƒåº¦å™¨æ³¨å†Œä»»åŠ¡ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:135:52
    |
133 |             func: éœ€è¦è°ƒåº¦çš„å¯è°ƒç”¨å¯¹è±¡ã€‚
134 |             trigger: APScheduler è§¦å‘å™¨æˆ–è§¦å‘å™¨å…³é”®å­—å‚æ•°ã€‚
135 |             **kwargs: ä¼ é€’ç»™ `scheduler.add_job` çš„å…¶å®ƒå‚æ•°ï¼Œå¦‚ id/nameã€‚
    |                                                            ^^
136 |
137 |         Returns:
    |

G004 Logging statement uses f-string
   --> app/scheduler.py:155:25
    |
153 |         try:
154 |             self.scheduler.remove_job(job_id)
155 |             logger.info(f"ä»»åŠ¡å·²åˆ é™¤: {job_id}")
    |                         ^^^^^^^^^^^^^^^^^^^^^^^
156 |         except Exception as e:
157 |             error_str = str(e) if e else "æœªçŸ¥é”™è¯¯"
    |
help: Convert to lazy `%` formatting

G004 Logging statement uses f-string
   --> app/scheduler.py:158:30
    |
156 |         except Exception as e:
157 |             error_str = str(e) if e else "æœªçŸ¥é”™è¯¯"
158 |             logger.exception(f"åˆ é™¤ä»»åŠ¡å¤±è´¥: {job_id} - {error_str}")
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
159 |
160 |     def get_jobs(self) -> list:
    |
help: Convert to lazy `%` formatting

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `get_job`
   --> app/scheduler.py:169:39
    |
167 |         return self.scheduler.get_jobs()
168 |
169 |     def get_job(self, job_id: str) -> Any:
    |                                       ^^^
170 |         """èŽ·å–æŒ‡å®šä»»åŠ¡ã€‚.
    |

G004 Logging statement uses f-string
   --> app/scheduler.py:192:21
    |
190 |         """
191 |         self.scheduler.pause_job(job_id)
192 |         logger.info(f"ä»»åŠ¡å·²æš‚åœ: {job_id}")
    |                     ^^^^^^^^^^^^^^^^^^^^^^^
193 |
194 |     def resume_job(self, job_id: str) -> None:
    |
help: Convert to lazy `%` formatting

G004 Logging statement uses f-string
   --> app/scheduler.py:205:21
    |
203 |         """
204 |         self.scheduler.resume_job(job_id)
205 |         logger.info(f"ä»»åŠ¡å·²æ¢å¤: {job_id}")
    |                     ^^^^^^^^^^^^^^^^^^^^^^^
    |
help: Convert to lazy `%` formatting

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `get_scheduler`
   --> app/scheduler.py:213:24
    |
212 | # ç¡®ä¿schedulerå®žä¾‹å¯ä»¥è¢«æ­£ç¡®è®¿é—®
213 | def get_scheduler() -> Any:
    |                        ^^^
214 |     """èŽ·å–åº•å±‚ APScheduler å®žä¾‹ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:224:15
    |
223 | def _acquire_scheduler_lock() -> bool:
224 |     """å°è¯•èŽ·å–æ–‡ä»¶é”ï¼Œç¡®ä¿å•è¿›ç¨‹è¿è¡Œè°ƒåº¦å™¨ã€‚.
    |                      ^^
225 |
226 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:227:27
    |
226 |     Returns:
227 |         bool: æˆåŠŸèŽ·å–é”è¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚
    |                                  ^^
228 |
229 |     """
    |

PLW0603 Using the global statement to update `_scheduler_lock_handle` is discouraged
   --> app/scheduler.py:230:12
    |
229 |     """
230 |     global _scheduler_lock_handle, _scheduler_lock_pid
    |            ^^^^^^^^^^^^^^^^^^^^^^
231 |
232 |     if fcntl is None:
    |

PLW0603 Using the global statement to update `_scheduler_lock_handle` is discouraged
   --> app/scheduler.py:230:12
    |
229 |     """
230 |     global _scheduler_lock_handle, _scheduler_lock_pid
    |            ^^^^^^^^^^^^^^^^^^^^^^
231 |
232 |     if fcntl is None:
    |

PLW0603 Using the global statement to update `_scheduler_lock_pid` is discouraged
   --> app/scheduler.py:230:36
    |
229 |     """
230 |     global _scheduler_lock_handle, _scheduler_lock_pid
    |                                    ^^^^^^^^^^^^^^^^^^^
231 |
232 |     if fcntl is None:
    |

PLW0603 Using the global statement to update `_scheduler_lock_pid` is discouraged
   --> app/scheduler.py:230:36
    |
229 |     """
230 |     global _scheduler_lock_handle, _scheduler_lock_pid
    |                                    ^^^^^^^^^^^^^^^^^^^
231 |
232 |     if fcntl is None:
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:233:37
    |
232 |     if fcntl is None:
233 |         logger.warning("å½“å‰å¹³å°ä¸æ”¯æŒfcntlï¼Œæ— æ³•åŠ æ–‡ä»¶é”ï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ªè°ƒåº¦å™¨å®žä¾‹å¹¶å‘è¿è¡Œ")
    |                                            ^^
234 |         return True
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:233:44
    |
232 |     if fcntl is None:
233 |         logger.warning("å½“å‰å¹³å°ä¸æ”¯æŒfcntlï¼Œæ— æ³•åŠ æ–‡ä»¶é”ï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ªè°ƒåº¦å™¨å®žä¾‹å¹¶å‘è¿è¡Œ")
    |                                                          ^^
234 |         return True
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:241:20
    |
239 |         if _scheduler_lock_pid == current_pid:
240 |             return True
241 |         # å­è¿›ç¨‹ç»§æ‰¿äº†é”å¥æŸ„ï¼Œä½†å¹¶æœªçœŸæ­£æŒæœ‰é”ï¼Œéœ€è¦é‡æ–°èŽ·å–
    |                             ^^
242 |         try:
243 |             _scheduler_lock_handle.close()
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:241:29
    |
239 |         if _scheduler_lock_pid == current_pid:
240 |             return True
241 |         # å­è¿›ç¨‹ç»§æ‰¿äº†é”å¥æŸ„ï¼Œä½†å¹¶æœªçœŸæ­£æŒæœ‰é”ï¼Œéœ€è¦é‡æ–°èŽ·å–
    |                                               ^^
242 |         try:
243 |             _scheduler_lock_handle.close()
    |

SIM105 Use `contextlib.suppress(Exception)` instead of `try`-`except`-`pass`
   --> app/scheduler.py:242:9
    |
240 |               return True
241 |           # å­è¿›ç¨‹ç»§æ‰¿äº†é”å¥æŸ„ï¼Œä½†å¹¶æœªçœŸæ­£æŒæœ‰é”ï¼Œéœ€è¦é‡æ–°èŽ·å–
242 | /         try:
243 | |             _scheduler_lock_handle.close()
244 | |         except Exception:  # pragma: no cover - é˜²å¾¡æ€§é‡Šæ”¾
245 | |             pass
    | |________________^
246 |           _scheduler_lock_handle = None
247 |           _scheduler_lock_pid = None
    |
help: Replace `try`-`except`-`pass` with `with contextlib.suppress(Exception): ...`

S110 `try`-`except`-`pass` detected, consider logging the exception
   --> app/scheduler.py:244:9
    |
242 |           try:
243 |               _scheduler_lock_handle.close()
244 | /         except Exception:  # pragma: no cover - é˜²å¾¡æ€§é‡Šæ”¾
245 | |             pass
    | |________________^
246 |           _scheduler_lock_handle = None
247 |           _scheduler_lock_pid = None
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/scheduler.py:244:16
    |
242 |         try:
243 |             _scheduler_lock_handle.close()
244 |         except Exception:  # pragma: no cover - é˜²å¾¡æ€§é‡Šæ”¾
    |                ^^^^^^^^^
245 |             pass
246 |         _scheduler_lock_handle = None
    |

SIM115 Use a context manager for opening files
   --> app/scheduler.py:254:14
    |
252 |     lock_path = Path("userdata") / "scheduler.lock"
253 |     lock_path.parent.mkdir(exist_ok=True)
254 |     handle = open(lock_path, "w+")
    |              ^^^^
255 |     try:
256 |         fcntl.flock(handle, fcntl.LOCK_EX | fcntl.LOCK_NB)
    |

PTH123 `open()` should be replaced by `Path.open()`
   --> app/scheduler.py:254:14
    |
252 |     lock_path = Path("userdata") / "scheduler.lock"
253 |     lock_path.parent.mkdir(exist_ok=True)
254 |     handle = open(lock_path, "w+")
    |              ^^^^
255 |     try:
256 |         fcntl.flock(handle, fcntl.LOCK_EX | fcntl.LOCK_NB)
    |
help: Replace with `Path.open()`

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:261:29
    |
259 |         _scheduler_lock_handle = handle
260 |         _scheduler_lock_pid = current_pid
261 |         logger.info("è°ƒåº¦å™¨é”å·²èŽ·å–ï¼Œå½“å‰è¿›ç¨‹è´Ÿè´£è¿è¡Œå®šæ—¶ä»»åŠ¡", pid=os.getpid())
    |                                    ^^
262 |         return True
263 |     except BlockingIOError:
    |

TRY300 Consider moving this statement to an `else` block
   --> app/scheduler.py:262:9
    |
260 |         _scheduler_lock_pid = current_pid
261 |         logger.info("è°ƒåº¦å™¨é”å·²èŽ·å–ï¼Œå½“å‰è¿›ç¨‹è´Ÿè´£è¿è¡Œå®šæ—¶ä»»åŠ¡", pid=os.getpid())
262 |         return True
    |         ^^^^^^^^^^^
263 |     except BlockingIOError:
264 |         handle.close()
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:265:36
    |
263 |     except BlockingIOError:
264 |         handle.close()
265 |         logger.info("æ£€æµ‹åˆ°å…¶ä»–è¿›ç¨‹æ­£åœ¨è¿è¡Œè°ƒåº¦å™¨ï¼Œè·³è¿‡å½“å‰è¿›ç¨‹çš„è°ƒåº¦å™¨åˆå§‹åŒ–")
    |                                                  ^^
266 |         return False
267 |     except Exception as exc:  # pragma: no cover - æžç«¯æƒ…å†µ
    |

G004 Logging statement uses f-string
   --> app/scheduler.py:269:26
    |
267 |     except Exception as exc:  # pragma: no cover - æžç«¯æƒ…å†µ
268 |         handle.close()
269 |         logger.exception(f"èŽ·å–è°ƒåº¦å™¨é”å¤±è´¥: {exc}")
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^
270 |         return False
    |
help: Convert to lazy `%` formatting

TRY401 Redundant exception object included in `logging.exception` call
   --> app/scheduler.py:269:39
    |
267 |     except Exception as exc:  # pragma: no cover - æžç«¯æƒ…å†µ
268 |         handle.close()
269 |         logger.exception(f"èŽ·å–è°ƒåº¦å™¨é”å¤±è´¥: {exc}")
    |                                               ^^^
270 |         return False
    |

PLW0603 Using the global statement to update `_scheduler_lock_handle` is discouraged
   --> app/scheduler.py:280:12
    |
279 |     """
280 |     global _scheduler_lock_handle, _scheduler_lock_pid
    |            ^^^^^^^^^^^^^^^^^^^^^^
281 |     if fcntl is None or not _scheduler_lock_handle:
282 |         return
    |

PLW0603 Using the global statement to update `_scheduler_lock_pid` is discouraged
   --> app/scheduler.py:280:36
    |
279 |     """
280 |     global _scheduler_lock_handle, _scheduler_lock_pid
    |                                    ^^^^^^^^^^^^^^^^^^^
281 |     if fcntl is None or not _scheduler_lock_handle:
282 |         return
    |

SIM105 Use `contextlib.suppress(Exception)` instead of `try`-`except`-`pass`
   --> app/scheduler.py:283:5
    |
281 |       if fcntl is None or not _scheduler_lock_handle:
282 |           return
283 | /     try:
284 | |         fcntl.flock(_scheduler_lock_handle, fcntl.LOCK_UN)
285 | |     except Exception:  # pragma: no cover
286 | |         pass
    | |____________^
287 |       try:
288 |           _scheduler_lock_handle.close()
    |
help: Replace `try`-`except`-`pass` with `with contextlib.suppress(Exception): ...`

S110 `try`-`except`-`pass` detected, consider logging the exception
   --> app/scheduler.py:285:5
    |
283 |       try:
284 |           fcntl.flock(_scheduler_lock_handle, fcntl.LOCK_UN)
285 | /     except Exception:  # pragma: no cover
286 | |         pass
    | |____________^
287 |       try:
288 |           _scheduler_lock_handle.close()
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/scheduler.py:285:12
    |
283 |     try:
284 |         fcntl.flock(_scheduler_lock_handle, fcntl.LOCK_UN)
285 |     except Exception:  # pragma: no cover
    |            ^^^^^^^^^
286 |         pass
287 |     try:
    |

S110 `try`-`except`-`pass` detected, consider logging the exception
   --> app/scheduler.py:289:5
    |
287 |       try:
288 |           _scheduler_lock_handle.close()
289 | /     except Exception:  # pragma: no cover
290 | |         pass
    | |____________^
291 |       finally:
292 |           _scheduler_lock_handle = None
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/scheduler.py:289:12
    |
287 |     try:
288 |         _scheduler_lock_handle.close()
289 |     except Exception:  # pragma: no cover
    |            ^^^^^^^^^
290 |         pass
291 |     finally:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:303:26
    |
302 |     Returns:
303 |         bool: True è¡¨ç¤ºå¯ä»¥å¯åŠ¨ï¼ŒFalse è¡¨ç¤ºè·³è¿‡ã€‚
    |                                ^^
304 |
305 |     """
    |

G004 Logging statement uses f-string
   --> app/scheduler.py:308:21
    |
306 |     enable_flag = os.environ.get("ENABLE_SCHEDULER", "true").strip().lower()
307 |     if enable_flag not in ("true", "1", "yes"):
308 |         logger.info(f"æ£€æµ‹åˆ° ENABLE_SCHEDULER={enable_flag}ï¼Œè·³è¿‡è°ƒåº¦å™¨åˆå§‹åŒ–")
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
309 |         return False
    |
help: Convert to lazy `%` formatting

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:308:57
    |
306 |     enable_flag = os.environ.get("ENABLE_SCHEDULER", "true").strip().lower()
307 |     if enable_flag not in ("true", "1", "yes"):
308 |         logger.info(f"æ£€æµ‹åˆ° ENABLE_SCHEDULER={enable_flag}ï¼Œè·³è¿‡è°ƒåº¦å™¨åˆå§‹åŒ–")
    |                                                            ^^
309 |         return False
    |

G004 Logging statement uses f-string
   --> app/scheduler.py:314:21
    |
312 |     if server_software.startswith("gunicorn"):
313 |         parent_pid = os.getppid()
314 |         logger.info(f"æ£€æµ‹åˆ° gunicorn çŽ¯å¢ƒï¼Œppid={parent_pid}ï¼Œå°†é€šè¿‡æ–‡ä»¶é”ä¿è¯å•å®žä¾‹")
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
315 |
316 |     # Flask reloader: åªæœ‰å­è¿›ç¨‹ (WERKZEUG_RUN_MAIN=true) æ‰è¿è¡Œè°ƒåº¦å™¨
    |
help: Convert to lazy `%` formatting

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:314:38
    |
312 |     if server_software.startswith("gunicorn"):
313 |         parent_pid = os.getppid()
314 |         logger.info(f"æ£€æµ‹åˆ° gunicorn çŽ¯å¢ƒï¼Œppid={parent_pid}ï¼Œå°†é€šè¿‡æ–‡ä»¶é”ä¿è¯å•å®žä¾‹")
    |                                           ^^
315 |
316 |     # Flask reloader: åªæœ‰å­è¿›ç¨‹ (WERKZEUG_RUN_MAIN=true) æ‰è¿è¡Œè°ƒåº¦å™¨
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:314:56
    |
312 |     if server_software.startswith("gunicorn"):
313 |         parent_pid = os.getppid()
314 |         logger.info(f"æ£€æµ‹åˆ° gunicorn çŽ¯å¢ƒï¼Œppid={parent_pid}ï¼Œå°†é€šè¿‡æ–‡ä»¶é”ä¿è¯å•å®žä¾‹")
    |                                                              ^^
315 |
316 |     # Flask reloader: åªæœ‰å­è¿›ç¨‹ (WERKZEUG_RUN_MAIN=true) æ‰è¿è¡Œè°ƒåº¦å™¨
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:320:48
    |
318 |         reloader_flag = os.environ.get("WERKZEUG_RUN_MAIN")
319 |         if reloader_flag not in ("true", "1"):
320 |             logger.info("æ£€æµ‹åˆ° Flask reloader çˆ¶è¿›ç¨‹ï¼Œè·³è¿‡è°ƒåº¦å™¨åˆå§‹åŒ–")
    |                                                      ^^
321 |             return False
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `app`
   --> app/scheduler.py:326:25
    |
326 | def init_scheduler(app: Any) -> None:
    |                         ^^^
327 |     """åˆå§‹åŒ–è°ƒåº¦å™¨ï¼ˆä»…åœ¨å…è®¸çš„è¿›ç¨‹ä¸­å¯åŠ¨ï¼‰ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/scheduler.py:327:14
    |
326 | def init_scheduler(app: Any) -> None:
327 |     """åˆå§‹åŒ–è°ƒåº¦å™¨ï¼ˆä»…åœ¨å…è®¸çš„è¿›ç¨‹ä¸­å¯åŠ¨ï¼‰ã€‚.
    |                    ^^
328 |
329 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/scheduler.py:327:25
    |
326 | def init_scheduler(app: Any) -> None:
327 |     """åˆå§‹åŒ–è°ƒåº¦å™¨ï¼ˆä»…åœ¨å…è®¸çš„è¿›ç¨‹ä¸­å¯åŠ¨ï¼‰ã€‚.
    |                                          ^^
328 |
329 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:330:24
    |
329 |     Args:
330 |         app: Flask åº”ç”¨å®žä¾‹ï¼Œç”¨äºŽä»»åŠ¡ä¸Šä¸‹æ–‡ã€‚
    |                            ^^
331 |
332 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:333:53
    |
332 |     Returns:
333 |         TaskScheduler | None: åˆå§‹åŒ–æˆåŠŸæ—¶è¿”å›ž TaskSchedulerï¼Œå¦åˆ™è¿”å›ž Noneã€‚
    |                                                             ^^
334 |
335 |     """
    |

PLW0602 Using global for `scheduler` but no assignment is done
   --> app/scheduler.py:336:12
    |
335 |     """
336 |     global scheduler
    |            ^^^^^^^^^
337 |
338 |     if not _should_start_scheduler():
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:347:38
    |
345 |         # æ£€æŸ¥æ˜¯å¦å·²ç»åˆå§‹åŒ–è¿‡
346 |         if hasattr(scheduler, "app") and scheduler.app is not None:
347 |             logger.warning("è°ƒåº¦å™¨å·²ç»åˆå§‹åŒ–è¿‡ï¼Œè·³è¿‡é‡å¤åˆå§‹åŒ–")
    |                                               ^^
348 |             return scheduler
    |

PLC0415 `import` should be at the top-level of a file
   --> app/scheduler.py:362:9
    |
361 |         # ç­‰å¾…è°ƒåº¦å™¨å®Œå…¨å¯åŠ¨
362 |         import time
    |         ^^^^^^^^^^^
363 |         time.sleep(2)
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:368:19
    |
366 |         _load_existing_jobs()
367 |
368 |         # å¦‚æžœæ²¡æœ‰çŽ°æœ‰ä»»åŠ¡ï¼Œåˆ™æ·»åŠ é»˜è®¤ä»»åŠ¡
    |                           ^^
369 |         _add_default_jobs()
    |

TRY300 Consider moving this statement to an `else` block
   --> app/scheduler.py:372:9
    |
371 |         logger.info("è°ƒåº¦å™¨åˆå§‹åŒ–å®Œæˆ")
372 |         return scheduler
    |         ^^^^^^^^^^^^^^^^
373 |     except Exception as e:
374 |         logger.exception(f"è°ƒåº¦å™¨åˆå§‹åŒ–å¤±è´¥: {e}")
    |

G004 Logging statement uses f-string
   --> app/scheduler.py:374:26
    |
372 |         return scheduler
373 |     except Exception as e:
374 |         logger.exception(f"è°ƒåº¦å™¨åˆå§‹åŒ–å¤±è´¥: {e}")
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^
375 |         # ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œè®©åº”ç”¨ç»§ç»­å¯åŠ¨
376 |         return None
    |
help: Convert to lazy `%` formatting

TRY401 Redundant exception object included in `logging.exception` call
   --> app/scheduler.py:374:39
    |
372 |         return scheduler
373 |     except Exception as e:
374 |         logger.exception(f"è°ƒåº¦å™¨åˆå§‹åŒ–å¤±è´¥: {e}")
    |                                               ^
375 |         # ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œè®©åº”ç”¨ç»§ç»­å¯åŠ¨
376 |         return None
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:375:16
    |
373 |     except Exception as e:
374 |         logger.exception(f"è°ƒåº¦å™¨åˆå§‹åŒ–å¤±è´¥: {e}")
375 |         # ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œè®©åº”ç”¨ç»§ç»­å¯åŠ¨
    |                     ^^
376 |         return None
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:389:35
    |
387 |         # æ£€æŸ¥è°ƒåº¦å™¨æ˜¯å¦å·²å¯åŠ¨
388 |         if not scheduler.scheduler or not scheduler.scheduler.running:
389 |             logger.warning("è°ƒåº¦å™¨æœªå¯åŠ¨ï¼Œè·³è¿‡åŠ è½½çŽ°æœ‰ä»»åŠ¡")
    |                                         ^^
390 |             return
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:394:37
    |
392 |         # æ£€æŸ¥è°ƒåº¦å™¨æ˜¯å¦å®Œå…¨å°±ç»ª
393 |         if not hasattr(scheduler.scheduler, "_jobstores_lock"):
394 |             logger.warning("è°ƒåº¦å™¨æœªå®Œå…¨å°±ç»ªï¼Œè·³è¿‡åŠ è½½çŽ°æœ‰ä»»åŠ¡")
    |                                             ^^
395 |             return
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:400:43
    |
398 |         sqlite_path = Path("userdata/scheduler.db")
399 |         if not sqlite_path.exists():
400 |             logger.warning("SQLiteæ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè·³è¿‡åŠ è½½çŽ°æœ‰ä»»åŠ¡")
    |                                                   ^^
401 |             return
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:403:35
    |
401 |             return
402 |
403 |         # ä½¿ç”¨try-exceptåŒ…è£…get_jobsè°ƒç”¨ï¼Œé¿å…KeyboardInterrupt
    |                                         ^^
404 |         try:
405 |             existing_jobs = scheduler.get_jobs()
    |

G004 Logging statement uses f-string
   --> app/scheduler.py:407:29
    |
405 |             existing_jobs = scheduler.get_jobs()
406 |             if existing_jobs:
407 |                 logger.info(f"ä»ŽSQLiteæ•°æ®åº“åŠ è½½äº† {len(existing_jobs)} ä¸ªçŽ°æœ‰ä»»åŠ¡")
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
408 |                 for job in existing_jobs:
409 |                     logger.info(f"åŠ è½½ä»»åŠ¡: {job.name} ({job.id})")
    |
help: Convert to lazy `%` formatting

G004 Logging statement uses f-string
   --> app/scheduler.py:409:33
    |
407 |                 logger.info(f"ä»ŽSQLiteæ•°æ®åº“åŠ è½½äº† {len(existing_jobs)} ä¸ªçŽ°æœ‰ä»»åŠ¡")
408 |                 for job in existing_jobs:
409 |                     logger.info(f"åŠ è½½ä»»åŠ¡: {job.name} ({job.id})")
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
410 |             else:
411 |                 logger.info("SQLiteæ•°æ®åº“ä¸­æ²¡æœ‰æ‰¾åˆ°ä»»åŠ¡")
    |
help: Convert to lazy `%` formatting

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:413:37
    |
411 |                 logger.info("SQLiteæ•°æ®åº“ä¸­æ²¡æœ‰æ‰¾åˆ°ä»»åŠ¡")
412 |         except KeyboardInterrupt:
413 |             logger.warning("åŠ è½½ä»»åŠ¡æ—¶è¢«ä¸­æ–­ï¼Œè·³è¿‡åŠ è½½çŽ°æœ‰ä»»åŠ¡")
    |                                             ^^
414 |             return
415 |         except Exception as e:
    |

G004 Logging statement uses f-string
   --> app/scheduler.py:416:30
    |
414 |             return
415 |         except Exception as e:
416 |             logger.exception(f"èŽ·å–ä»»åŠ¡åˆ—è¡¨å¤±è´¥: {e}")
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^
417 |             return
418 |     except Exception as e:
    |
help: Convert to lazy `%` formatting

TRY401 Redundant exception object included in `logging.exception` call
   --> app/scheduler.py:416:43
    |
414 |             return
415 |         except Exception as e:
416 |             logger.exception(f"èŽ·å–ä»»åŠ¡åˆ—è¡¨å¤±è´¥: {e}")
    |                                                   ^
417 |             return
418 |     except Exception as e:
    |

G004 Logging statement uses f-string
   --> app/scheduler.py:419:26
    |
417 |             return
418 |     except Exception as e:
419 |         logger.exception(f"åŠ è½½çŽ°æœ‰ä»»åŠ¡å¤±è´¥: {e}")
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^
420 |         # ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œè®©åº”ç”¨ç»§ç»­å¯åŠ¨
    |
help: Convert to lazy `%` formatting

TRY401 Redundant exception object included in `logging.exception` call
   --> app/scheduler.py:419:39
    |
417 |             return
418 |     except Exception as e:
419 |         logger.exception(f"åŠ è½½çŽ°æœ‰ä»»åŠ¡å¤±è´¥: {e}")
    |                                               ^
420 |         # ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œè®©åº”ç”¨ç»§ç»­å¯åŠ¨
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:420:16
    |
418 |     except Exception as e:
419 |         logger.exception(f"åŠ è½½çŽ°æœ‰ä»»åŠ¡å¤±è´¥: {e}")
420 |         # ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œè®©åº”ç”¨ç»§ç»­å¯åŠ¨
    |                     ^^
    |

C901 `_load_tasks_from_config` is too complex (22 > 10)
   --> app/scheduler.py:443:5
    |
443 | def _load_tasks_from_config(force: bool = False) -> None:
    |     ^^^^^^^^^^^^^^^^^^^^^^^
444 |     """ä»Žé…ç½®æ–‡ä»¶åŠ è½½é»˜è®¤ä»»åŠ¡å¹¶æ³¨å†Œã€‚.
    |

PLR0912 Too many branches (23 > 12)
   --> app/scheduler.py:443:5
    |
443 | def _load_tasks_from_config(force: bool = False) -> None:
    |     ^^^^^^^^^^^^^^^^^^^^^^^
444 |     """ä»Žé…ç½®æ–‡ä»¶åŠ è½½é»˜è®¤ä»»åŠ¡å¹¶æ³¨å†Œã€‚.
    |

PLR0915 Too many statements (75 > 50)
   --> app/scheduler.py:443:5
    |
443 | def _load_tasks_from_config(force: bool = False) -> None:
    |     ^^^^^^^^^^^^^^^^^^^^^^^
444 |     """ä»Žé…ç½®æ–‡ä»¶åŠ è½½é»˜è®¤ä»»åŠ¡å¹¶æ³¨å†Œã€‚.
    |

FBT001 Boolean-typed positional argument in function definition
   --> app/scheduler.py:443:29
    |
443 | def _load_tasks_from_config(force: bool = False) -> None:
    |                             ^^^^^
444 |     """ä»Žé…ç½®æ–‡ä»¶åŠ è½½é»˜è®¤ä»»åŠ¡å¹¶æ³¨å†Œã€‚.
    |

FBT002 Boolean default positional argument in function definition
   --> app/scheduler.py:443:29
    |
443 | def _load_tasks_from_config(force: bool = False) -> None:
    |                             ^^^^^
444 |     """ä»Žé…ç½®æ–‡ä»¶åŠ è½½é»˜è®¤ä»»åŠ¡å¹¶æ³¨å†Œã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/scheduler.py:447:27
    |
446 |     Args:
447 |         force: True è¡¨ç¤ºå¼ºåˆ¶é‡å»ºï¼ˆä¼šåˆ é™¤å·²æœ‰ä»»åŠ¡ï¼‰ã€‚
    |                                 ^^
448 |
449 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/scheduler.py:447:35
    |
446 |     Args:
447 |         force: True è¡¨ç¤ºå¼ºåˆ¶é‡å»ºï¼ˆä¼šåˆ é™¤å·²æœ‰ä»»åŠ¡ï¼‰ã€‚
    |                                                 ^^
448 |
449 |     Returns:
    |

PLC0415 `import` should be at the top-level of a file
   --> app/scheduler.py:453:5
    |
452 |     """
453 |     import yaml
    |     ^^^^^^^^^^^
454 |
455 |     from app.tasks.accounts_sync_tasks import sync_accounts
    |

PLC0415 `import` should be at the top-level of a file
   --> app/scheduler.py:455:5
    |
453 |     import yaml
454 |
455 |     from app.tasks.accounts_sync_tasks import sync_accounts
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
456 |     from app.tasks.capacity_aggregation_tasks import calculate_database_size_aggregations
457 |     from app.tasks.capacity_collection_tasks import collect_database_sizes
    |

PLC0415 `import` should be at the top-level of a file
   --> app/scheduler.py:456:5
    |
455 |     from app.tasks.accounts_sync_tasks import sync_accounts
456 |     from app.tasks.capacity_aggregation_tasks import calculate_database_size_aggregations
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
457 |     from app.tasks.capacity_collection_tasks import collect_database_sizes
458 |     from app.tasks.log_cleanup_tasks import cleanup_old_logs
    |

PLC0415 `import` should be at the top-level of a file
   --> app/scheduler.py:457:5
    |
455 |     from app.tasks.accounts_sync_tasks import sync_accounts
456 |     from app.tasks.capacity_aggregation_tasks import calculate_database_size_aggregations
457 |     from app.tasks.capacity_collection_tasks import collect_database_sizes
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
458 |     from app.tasks.log_cleanup_tasks import cleanup_old_logs
459 |     from app.tasks.partition_management_tasks import monitor_partition_health
    |

PLC0415 `import` should be at the top-level of a file
   --> app/scheduler.py:458:5
    |
456 |     from app.tasks.capacity_aggregation_tasks import calculate_database_size_aggregations
457 |     from app.tasks.capacity_collection_tasks import collect_database_sizes
458 |     from app.tasks.log_cleanup_tasks import cleanup_old_logs
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
459 |     from app.tasks.partition_management_tasks import monitor_partition_health
    |

PLC0415 `import` should be at the top-level of a file
   --> app/scheduler.py:459:5
    |
457 |     from app.tasks.capacity_collection_tasks import collect_database_sizes
458 |     from app.tasks.log_cleanup_tasks import cleanup_old_logs
459 |     from app.tasks.partition_management_tasks import monitor_partition_health
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
460 |
461 |     # å¦‚æžœä¸æ˜¯å¼ºåˆ¶æ¨¡å¼ï¼Œæ£€æŸ¥æ˜¯å¦å·²æœ‰ä»»åŠ¡
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:461:15
    |
459 |     from app.tasks.partition_management_tasks import monitor_partition_health
460 |
461 |     # å¦‚æžœä¸æ˜¯å¼ºåˆ¶æ¨¡å¼ï¼Œæ£€æŸ¥æ˜¯å¦å·²æœ‰ä»»åŠ¡
    |                       ^^
462 |     if not force:
463 |         try:
    |

G004 Logging statement uses f-string
   --> app/scheduler.py:466:29
    |
464 |             existing_jobs = scheduler.get_jobs()
465 |             if existing_jobs:
466 |                 logger.info(f"å‘çŽ° {len(existing_jobs)} ä¸ªçŽ°æœ‰ä»»åŠ¡ï¼Œè·³è¿‡åˆ›å»ºé»˜è®¤ä»»åŠ¡")
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
467 |                 return
468 |         except KeyboardInterrupt:
    |
help: Convert to lazy `%` formatting

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:466:60
    |
464 |             existing_jobs = scheduler.get_jobs()
465 |             if existing_jobs:
466 |                 logger.info(f"å‘çŽ° {len(existing_jobs)} ä¸ªçŽ°æœ‰ä»»åŠ¡ï¼Œè·³è¿‡åˆ›å»ºé»˜è®¤ä»»åŠ¡")
    |                                                                   ^^
467 |                 return
468 |         except KeyboardInterrupt:
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:469:39
    |
467 |                 return
468 |         except KeyboardInterrupt:
469 |             logger.warning("æ£€æŸ¥çŽ°æœ‰ä»»åŠ¡æ—¶è¢«ä¸­æ–­ï¼Œè·³è¿‡åˆ›å»ºé»˜è®¤ä»»åŠ¡")
    |                                                 ^^
470 |             return
471 |         except Exception as e:
    |

G004 Logging statement uses f-string
   --> app/scheduler.py:472:30
    |
470 |             return
471 |         except Exception as e:
472 |             logger.exception(f"æ£€æŸ¥çŽ°æœ‰ä»»åŠ¡å¤±è´¥: {e}")
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^
473 |             return
    |
help: Convert to lazy `%` formatting

TRY401 Redundant exception object included in `logging.exception` call
   --> app/scheduler.py:472:43
    |
470 |             return
471 |         except Exception as e:
472 |             logger.exception(f"æ£€æŸ¥çŽ°æœ‰ä»»åŠ¡å¤±è´¥: {e}")
    |                                                   ^
473 |             return
    |

PTH118 `os.path.join()` should be replaced by `Path` with `/` operator
   --> app/scheduler.py:476:19
    |
475 |     # ä»Žé…ç½®æ–‡ä»¶è¯»å–é»˜è®¤ä»»åŠ¡
476 |     config_file = os.path.join(os.path.dirname(__file__), "config", "scheduler_tasks.yaml")
    |                   ^^^^^^^^^^^^
477 |
478 |     try:
    |

PTH120 `os.path.dirname()` should be replaced by `Path.parent`
   --> app/scheduler.py:476:32
    |
475 |     # ä»Žé…ç½®æ–‡ä»¶è¯»å–é»˜è®¤ä»»åŠ¡
476 |     config_file = os.path.join(os.path.dirname(__file__), "config", "scheduler_tasks.yaml")
    |                                ^^^^^^^^^^^^^^^
477 |
478 |     try:
    |
help: Replace with `Path(...).parent`

PTH123 `open()` should be replaced by `Path.open()`
   --> app/scheduler.py:479:14
    |
478 |     try:
479 |         with open(config_file, encoding="utf-8") as f:
    |              ^^^^
480 |             config = yaml.safe_load(f)
    |
help: Replace with `Path.open()`

G004 Logging statement uses f-string
   --> app/scheduler.py:505:32
    |
503 |             func = task_func_map.get(function_name)
504 |             if not func:
505 |                 logger.warning(f"æœªçŸ¥çš„ä»»åŠ¡å‡½æ•°: {function_name}")
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
506 |                 continue
    |
help: Convert to lazy `%` formatting

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:510:26
    |
508 |             # åˆ›å»ºä»»åŠ¡
509 |             try:
510 |                 # å¦‚æžœæ˜¯å¼ºåˆ¶æ¨¡å¼ï¼Œå…ˆåˆ é™¤çŽ°æœ‰ä»»åŠ¡
    |                                 ^^
511 |                 if force:
512 |                     try:
    |

G004 Logging statement uses f-string
   --> app/scheduler.py:514:37
    |
512 |                     try:
513 |                         scheduler.remove_job(task_id)
514 |                         logger.info(f"å¼ºåˆ¶æ¨¡å¼-åˆ é™¤çŽ°æœ‰ä»»åŠ¡: {task_name} ({task_id})")
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
515 |                     except Exception:
516 |                         pass  # ä»»åŠ¡ä¸å­˜åœ¨ï¼Œå¿½ç•¥é”™è¯¯
    |
help: Convert to lazy `%` formatting

S110 `try`-`except`-`pass` detected, consider logging the exception
   --> app/scheduler.py:515:21
    |
513 |                           scheduler.remove_job(task_id)
514 |                           logger.info(f"å¼ºåˆ¶æ¨¡å¼-åˆ é™¤çŽ°æœ‰ä»»åŠ¡: {task_name} ({task_id})")
515 | /                     except Exception:
516 | |                         pass  # ä»»åŠ¡ä¸å­˜åœ¨ï¼Œå¿½ç•¥é”™è¯¯
    | |____________________________^
517 |
518 |                   # å¯¹äºŽcronè§¦å‘å™¨ï¼Œç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„æ—¶åŒº
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/scheduler.py:515:28
    |
513 |                         scheduler.remove_job(task_id)
514 |                         logger.info(f"å¼ºåˆ¶æ¨¡å¼-åˆ é™¤çŽ°æœ‰ä»»åŠ¡: {task_name} ({task_id})")
515 |                     except Exception:
    |                            ^^^^^^^^^
516 |                         pass  # ä»»åŠ¡ä¸å­˜åœ¨ï¼Œå¿½ç•¥é”™è¯¯
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:516:38
    |
514 |                         logger.info(f"å¼ºåˆ¶æ¨¡å¼-åˆ é™¤çŽ°æœ‰ä»»åŠ¡: {task_name} ({task_id})")
515 |                     except Exception:
516 |                         pass  # ä»»åŠ¡ä¸å­˜åœ¨ï¼Œå¿½ç•¥é”™è¯¯
    |                                           ^^
517 |
518 |                 # å¯¹äºŽcronè§¦å‘å™¨ï¼Œç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„æ—¶åŒº
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:518:28
    |
516 |                         pass  # ä»»åŠ¡ä¸å­˜åœ¨ï¼Œå¿½ç•¥é”™è¯¯
517 |
518 |                 # å¯¹äºŽcronè§¦å‘å™¨ï¼Œç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„æ—¶åŒº
    |                                 ^^
519 |                 if trigger_type == "cron":
520 |                     from apscheduler.triggers.cron import CronTrigger
    |

PLC0415 `import` should be at the top-level of a file
   --> app/scheduler.py:520:21
    |
518 |                 # å¯¹äºŽcronè§¦å‘å™¨ï¼Œç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„æ—¶åŒº
519 |                 if trigger_type == "cron":
520 |                     from apscheduler.triggers.cron import CronTrigger
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
521 |                     # åªä¼ é€’å®žé™…é…ç½®çš„å­—æ®µï¼Œé¿å…APSchedulerè‡ªåŠ¨å¡«å……é»˜è®¤å€¼
522 |                     cron_kwargs = {}
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:521:33
    |
519 |                 if trigger_type == "cron":
520 |                     from apscheduler.triggers.cron import CronTrigger
521 |                     # åªä¼ é€’å®žé™…é…ç½®çš„å­—æ®µï¼Œé¿å…APSchedulerè‡ªåŠ¨å¡«å……é»˜è®¤å€¼
    |                                           ^^
522 |                     cron_kwargs = {}
523 |                     if "second" in trigger_params:
    |

G004 Logging statement uses f-string
   --> app/scheduler.py:554:29
    |
552 |                         **trigger_params,
553 |                     )
554 |                 logger.info(f"æ·»åŠ ä»»åŠ¡: {task_name} ({task_id})")
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
555 |             except Exception as e:
556 |                 if force:
    |
help: Convert to lazy `%` formatting

G004 Logging statement uses f-string
   --> app/scheduler.py:557:38
    |
555 |             except Exception as e:
556 |                 if force:
557 |                     logger.exception(f"å¼ºåˆ¶æ¨¡å¼-åˆ›å»ºä»»åŠ¡å¤±è´¥: {task_name} ({task_id}) - {e}")
    |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
558 |                 else:
559 |                     logger.warning(f"ä»»åŠ¡å·²å­˜åœ¨ï¼Œè·³è¿‡åˆ›å»º: {task_name} ({task_id}) - {e}")
    |
help: Convert to lazy `%` formatting

TRY401 Redundant exception object included in `logging.exception` call
   --> app/scheduler.py:557:80
    |
555 |             except Exception as e:
556 |                 if force:
557 |                     logger.exception(f"å¼ºåˆ¶æ¨¡å¼-åˆ›å»ºä»»åŠ¡å¤±è´¥: {task_name} ({task_id}) - {e}")
    |                                                                                          ^
558 |                 else:
559 |                     logger.warning(f"ä»»åŠ¡å·²å­˜åœ¨ï¼Œè·³è¿‡åˆ›å»º: {task_name} ({task_id}) - {e}")
    |

G004 Logging statement uses f-string
   --> app/scheduler.py:559:36
    |
557 |                     logger.exception(f"å¼ºåˆ¶æ¨¡å¼-åˆ›å»ºä»»åŠ¡å¤±è´¥: {task_name} ({task_id}) - {e}")
558 |                 else:
559 |                     logger.warning(f"ä»»åŠ¡å·²å­˜åœ¨ï¼Œè·³è¿‡åˆ›å»º: {task_name} ({task_id}) - {e}")
    |                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
560 |
561 |     except FileNotFoundError:
    |
help: Convert to lazy `%` formatting

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:559:43
    |
557 |                     logger.exception(f"å¼ºåˆ¶æ¨¡å¼-åˆ›å»ºä»»åŠ¡å¤±è´¥: {task_name} ({task_id}) - {e}")
558 |                 else:
559 |                     logger.warning(f"ä»»åŠ¡å·²å­˜åœ¨ï¼Œè·³è¿‡åˆ›å»º: {task_name} ({task_id}) - {e}")
    |                                                ^^
560 |
561 |     except FileNotFoundError:
    |

G004 Logging statement uses f-string
   --> app/scheduler.py:562:26
    |
561 |     except FileNotFoundError:
562 |         logger.exception(f"é…ç½®æ–‡ä»¶ä¸å­˜åœ¨: {config_file}ï¼Œæ— æ³•åŠ è½½é»˜è®¤ä»»åŠ¡")
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
563 |         return
564 |     except Exception as e:
    |
help: Convert to lazy `%` formatting

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/scheduler.py:562:50
    |
561 |     except FileNotFoundError:
562 |         logger.exception(f"é…ç½®æ–‡ä»¶ä¸å­˜åœ¨: {config_file}ï¼Œæ— æ³•åŠ è½½é»˜è®¤ä»»åŠ¡")
    |                                                         ^^
563 |         return
564 |     except Exception as e:
    |

G004 Logging statement uses f-string
   --> app/scheduler.py:565:26
    |
563 |         return
564 |     except Exception as e:
565 |         logger.exception(f"è¯»å–é…ç½®æ–‡ä»¶å¤±è´¥: {e}")
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^
566 |         return
    |
help: Convert to lazy `%` formatting

TRY401 Redundant exception object included in `logging.exception` call
   --> app/scheduler.py:565:39
    |
563 |         return
564 |     except Exception as e:
565 |         logger.exception(f"è¯»å–é…ç½®æ–‡ä»¶å¤±è´¥: {e}")
    |                                               ^
566 |         return
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/__init__.py:3:9
  |
1 | """æœåŠ¡å±‚æ¨¡å—ã€‚.
2 |
3 | æä¾›ä¸šåŠ¡é€»è¾‘æœåŠ¡ï¼ŒåŒ…æ‹¬è´¦æˆ·åŒæ­¥ã€å®¹é‡é‡‡é›†ã€æ•°æ®èšåˆã€ç»Ÿè®¡åˆ†æžç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚
  |                 ^^
4 |
5 | ä¸»è¦æ¨¡å—ï¼š
  |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/services/__init__.py:5:5
  |
3 | æä¾›ä¸šåŠ¡é€»è¾‘æœåŠ¡ï¼ŒåŒ…æ‹¬è´¦æˆ·åŒæ­¥ã€å®¹é‡é‡‡é›†ã€æ•°æ®èšåˆã€ç»Ÿè®¡åˆ†æžç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚
4 |
5 | ä¸»è¦æ¨¡å—ï¼š
  |         ^^
6 | - accounts_sync: è´¦æˆ·åŒæ­¥æœåŠ¡
7 | - database_sync: æ•°æ®åº“å®¹é‡åŒæ­¥æœåŠ¡
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/account_classification/auto_classify_service.py:1:12
  |
1 | """è´¦æˆ·è‡ªåŠ¨åˆ†ç±»æœåŠ¡ï¼Œå°†è·¯ç”±å±‚ä¸Žç¼–æŽ’å™¨è§£è€¦ã€‚."""
  |                    ^^
2 |
3 | from __future__ import annotations
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/auto_classify_service.py:60:15
   |
58 |     """è´¦æˆ·è‡ªåŠ¨åˆ†ç±»æœåŠ¡ã€‚.
59 |
60 |     å°è£…è´¦æˆ·åˆ†ç±»è°ƒåº¦é€»è¾‘ï¼Œè´Ÿè´£å‚æ•°æ ¡éªŒã€æ—¥å¿—ä¸Žé”™è¯¯ç®¡ç†ã€‚
   |                         ^^
61 |     å°†è·¯ç”±å±‚ä¸Žç¼–æŽ’å™¨è§£è€¦ï¼Œæä¾›ç»Ÿä¸€çš„åˆ†ç±»æŽ¥å£ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/auto_classify_service.py:61:15
   |
60 |     å°è£…è´¦æˆ·åˆ†ç±»è°ƒåº¦é€»è¾‘ï¼Œè´Ÿè´£å‚æ•°æ ¡éªŒã€æ—¥å¿—ä¸Žé”™è¯¯ç®¡ç†ã€‚
61 |     å°†è·¯ç”±å±‚ä¸Žç¼–æŽ’å™¨è§£è€¦ï¼Œæä¾›ç»Ÿä¸€çš„åˆ†ç±»æŽ¥å£ã€‚
   |                         ^^
62 |
63 |     Attributes:
   |

D107 Missing docstring in `__init__`
  --> app/services/account_classification/auto_classify_service.py:68:9
   |
66 |     """
67 |
68 |     def __init__(self, classification_service: AccountClassificationService | None = None) -> None:
   |         ^^^^^^^^
69 |         self.classification_service = classification_service or AccountClassificationService()
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `instance_id`
  --> app/services/account_classification/auto_classify_service.py:74:22
   |
72 |         self,
73 |         *,
74 |         instance_id: Any,
   |                      ^^^
75 |         created_by: int | None,
76 |         use_optimized: Any = True,
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `use_optimized`
  --> app/services/account_classification/auto_classify_service.py:76:24
   |
74 |         instance_id: Any,
75 |         created_by: int | None,
76 |         use_optimized: Any = True,
   |                        ^^^
77 |     ) -> AutoClassifyResult:
78 |         """æ‰§è¡Œè´¦æˆ·è‡ªåŠ¨åˆ†ç±»ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/auto_classify_service.py:81:33
   |
80 |         Args:
81 |             instance_id: ç›®æ ‡å®žä¾‹ IDï¼Œä¸ºç©ºæ—¶è¡¨ç¤ºå…¨é‡åˆ†ç±»ã€‚
   |                                     ^^
82 |             created_by: è§¦å‘è¯¥ä»»åŠ¡çš„ç”¨æˆ· IDï¼Œå¯ä¸ºç©ºã€‚
83 |             use_optimized: æ˜¯å¦ä½¿ç”¨ä¼˜åŒ–ç‰ˆåˆ†ç±»å™¨ï¼ŒæŽ¥å—å¸ƒå°”æˆ–å­—ç¬¦ä¸²å€¼ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/auto_classify_service.py:82:36
   |
80 |         Args:
81 |             instance_id: ç›®æ ‡å®žä¾‹ IDï¼Œä¸ºç©ºæ—¶è¡¨ç¤ºå…¨é‡åˆ†ç±»ã€‚
82 |             created_by: è§¦å‘è¯¥ä»»åŠ¡çš„ç”¨æˆ· IDï¼Œå¯ä¸ºç©ºã€‚
   |                                            ^^
83 |             use_optimized: æ˜¯å¦ä½¿ç”¨ä¼˜åŒ–ç‰ˆåˆ†ç±»å™¨ï¼ŒæŽ¥å—å¸ƒå°”æˆ–å­—ç¬¦ä¸²å€¼ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/auto_classify_service.py:83:38
   |
81 |             instance_id: ç›®æ ‡å®žä¾‹ IDï¼Œä¸ºç©ºæ—¶è¡¨ç¤ºå…¨é‡åˆ†ç±»ã€‚
82 |             created_by: è§¦å‘è¯¥ä»»åŠ¡çš„ç”¨æˆ· IDï¼Œå¯ä¸ºç©ºã€‚
83 |             use_optimized: æ˜¯å¦ä½¿ç”¨ä¼˜åŒ–ç‰ˆåˆ†ç±»å™¨ï¼ŒæŽ¥å—å¸ƒå°”æˆ–å­—ç¬¦ä¸²å€¼ã€‚
   |                                                ^^
84 |
85 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/auto_classify_service.py:166:33
    |
165 |         Args:
166 |             instance_id: ç›®æ ‡å®žä¾‹ IDï¼ŒNone è¡¨ç¤ºå…¨é‡ã€‚
    |                                     ^^
167 |             created_by: è§¦å‘ä»»åŠ¡çš„ç”¨æˆ· IDã€‚
168 |             use_optimized: æ˜¯å¦ä½¿ç”¨ä¼˜åŒ–ç‰ˆåˆ†ç±»æµç¨‹ã€‚
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/auto_classify_service.py:174:20
    |
173 |         """
174 |         # ç›®å‰ä»…å­˜åœ¨ä¼˜åŒ–ç‰ˆæœ¬ï¼Œæœªæ¥å¯åœ¨æ­¤åˆ‡æ¢ä¸åŒå®žçŽ°ã€‚
    |                             ^^
175 |         if use_optimized:
176 |             return self.classification_service.auto_classify_accounts(
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `value`
   --> app/services/account_classification/auto_classify_service.py:186:24
    |
185 |     @staticmethod
186 |     def _as_int(value: Any) -> int:
    |                        ^^^
187 |         """å®‰å…¨åœ°å°†è¾“å…¥è½¬æ¢ä¸ºæ•´æ•°ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/auto_classify_service.py:193:25
    |
192 |         Returns:
193 |             int: è½¬æ¢æˆåŠŸçš„æ•´æ•°ï¼Œå¤±è´¥æ—¶è¿”å›ž 0ã€‚
    |                                ^^
194 |
195 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `raw_value`
   --> app/services/account_classification/auto_classify_service.py:201:49
    |
199 |             return 0
200 |
201 |     def _normalize_instance_id(self, raw_value: Any) -> int | None:
    |                                                 ^^^
202 |         """è§„èŒƒåŒ–å®žä¾‹ IDã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/auto_classify_service.py:208:34
    |
207 |         Returns:
208 |             int | None: è§£æžåŽçš„å®žä¾‹ IDï¼Œç©ºå€¼è¿”å›ž Noneã€‚
    |                                        ^^
209 |
210 |         Raises:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `value`
   --> app/services/account_classification/auto_classify_service.py:225:35
    |
223 |             raise AutoClassifyError(msg) from exc
224 |
225 |     def _coerce_bool(self, value: Any, *, default: bool) -> bool:
    |                                   ^^^
226 |         """å°†è¾“å…¥å€¼è½¬æ¢ä¸ºå¸ƒå°”åž‹ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `errors`
   --> app/services/account_classification/auto_classify_service.py:257:35
    |
256 |     @staticmethod
257 |     def _normalize_errors(errors: Any) -> list[str]:
    |                                   ^^^
258 |         """è§„èŒƒåŒ–é”™è¯¯ç»“æž„ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ã€‚.
    |

D107 Missing docstring in `__init__`
  --> app/services/account_classification/cache.py:17:9
   |
15 |     """é’ˆå¯¹åˆ†ç±»ä¸šåŠ¡å°è£…çš„ç¼“å­˜è®¿é—®å™¨ã€‚."""
16 |
17 |     def __init__(self, manager: Any | None = None) -> None:
   |         ^^^^^^^^
18 |         self.manager = manager or cache_manager
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `manager`
  --> app/services/account_classification/cache.py:17:33
   |
15 |     """é’ˆå¯¹åˆ†ç±»ä¸šåŠ¡å°è£…çš„ç¼“å­˜è®¿é—®å™¨ã€‚."""
16 |
17 |     def __init__(self, manager: Any | None = None) -> None:
   |                                 ^^^^^^^^^^
18 |         self.manager = manager or cache_manager
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/cache.py:25:53
   |
24 |         Returns:
25 |             list[dict[str, Any]] | None: å‘½ä¸­ç¼“å­˜æ—¶è¿”å›žè§„åˆ™åˆ—è¡¨ï¼Œå¦åˆ™è¿”å›ž Noneã€‚
   |                                                                ^^
26 |
27 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/cache.py:47:30
   |
46 |         Returns:
47 |             bool: å†™å…¥æˆåŠŸè¿”å›ž Trueï¼Œæ•°æ®ä¸ºç©ºæˆ–å†™å…¥å¤±è´¥è¿”å›ž Falseã€‚
   |                                    ^^
48 |
49 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/cache.py:62:29
   |
61 |         Args:
62 |             db_type: æ•°æ®åº“ç±»åž‹æ ‡è¯†ï¼Œä¾‹å¦‚ mysqlã€postgresã€‚
   |                                    ^^
63 |             rules: åˆ†ç±»è§„åˆ™åˆ—è¡¨ï¼Œå°†æŒä¹…åŒ–åˆ°ç¼“å­˜ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/cache.py:63:26
   |
61 |         Args:
62 |             db_type: æ•°æ®åº“ç±»åž‹æ ‡è¯†ï¼Œä¾‹å¦‚ mysqlã€postgresã€‚
63 |             rules: åˆ†ç±»è§„åˆ™åˆ—è¡¨ï¼Œå°†æŒä¹…åŒ–åˆ°ç¼“å­˜ã€‚
   |                                ^^
64 |
65 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/cache.py:66:30
   |
65 |         Returns:
66 |             bool: å†™å…¥æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
   |                                    ^^
67 |
68 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/cache.py:78:34
   |
77 |         Returns:
78 |             bool: æˆåŠŸæ‰§è¡Œå¤±æ•ˆæ“ä½œæ—¶ä¸º Trueï¼Œå¦åˆ™ Falseã€‚
   |                                            ^^
79 |
80 |         """
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/services/account_classification/classifiers/__init__.py:5:5
  |
3 | æä¾›å„ç§æ•°æ®åº“ç±»åž‹çš„è´¦æˆ·åˆ†ç±»è§„åˆ™è¯„ä¼°å™¨ã€‚
4 |
5 | ä¸»è¦ç»„ä»¶ï¼š
  |         ^^
6 | - ClassifierFactory: åˆ†ç±»å™¨å·¥åŽ‚
7 | - BaseRuleClassifier: åˆ†ç±»å™¨åŸºç±»
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/account_classification/classifiers/base.py:3:18
  |
1 | """åˆ†ç±»å™¨åŸºç±»ã€‚.
2 |
3 | å®šä¹‰æ•°æ®åº“ç‰¹å®šè§„åˆ™è¯„ä¼°å™¨çš„é€šç”¨æŽ¥å£ï¼Œæ‰€æœ‰æ•°æ®åº“ç±»åž‹çš„åˆ†ç±»å™¨éƒ½éœ€è¦ç»§æ‰¿æ­¤åŸºç±»ã€‚
  |                                   ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/base.py:42:28
   |
41 |         Returns:
42 |             å¦‚æžœè´¦æˆ·æ»¡è¶³è§„åˆ™è¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚
   |                                      ^^
43 |
44 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/base.py:53:30
   |
52 |         Returns:
53 |             å¦‚æžœæ”¯æŒè¯¥æ•°æ®åº“ç±»åž‹è¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚
   |                                          ^^
54 |
55 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/account_classification/classifiers/factory.py:3:16
  |
1 | """åˆ†ç±»å™¨å·¥åŽ‚ã€‚.
2 |
3 | æä¾›æ•°æ®åº“ç±»åž‹ä¸“å±žçš„åˆ†ç±»å™¨å®žä¾‹ï¼Œæ”¯æŒ MySQLã€PostgreSQLã€SQL Server å’Œ Oracleã€‚
  |                               ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/factory.py:22:20
   |
20 |     """åˆ†ç±»å™¨å·¥åŽ‚ã€‚.
21 |
22 |     æä¾›æ•°æ®åº“ç±»åž‹ä¸“å±žçš„åˆ†ç±»å™¨å®žä¾‹ï¼Œæ ¹æ®æ•°æ®åº“ç±»åž‹è¿”å›žå¯¹åº”çš„è§„åˆ™åˆ†ç±»å™¨ã€‚
   |                                   ^^
23 |
24 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/account_classification/classifiers/factory.py:51:27
   |
50 |         Args:
51 |             db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysqlã€postgresqlã€sqlserverã€oracleï¼‰ã€‚
   |                                ^^
52 |
53 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/account_classification/classifiers/factory.py:51:61
   |
50 |         Args:
51 |             db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysqlã€postgresqlã€sqlserverã€oracleï¼‰ã€‚
   |                                                                      ^^
52 |
53 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/factory.py:54:21
   |
53 |         Returns:
54 |             å¯¹åº”çš„åˆ†ç±»å™¨å®žä¾‹ï¼Œå¦‚æžœæ•°æ®åº“ç±»åž‹ä¸æ”¯æŒåˆ™è¿”å›ž Noneã€‚
   |                             ^^
55 |
56 |         Example:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/account_classification/classifiers/mysql_classifier.py:3:24
  |
1 | """MySQL è§„åˆ™åˆ†ç±»å™¨ã€‚.
2 |
3 | å®žçŽ° MySQL æ•°æ®åº“çš„è´¦æˆ·åˆ†ç±»è§„åˆ™è¯„ä¼°é€»è¾‘ï¼Œæ”¯æŒå…¨å±€æƒé™ã€æ•°æ®åº“æƒé™ã€è¡¨æƒé™å’Œè§’è‰²çš„åŒ¹é…ã€‚
  |                                        ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/mysql_classifier.py:18:26
   |
16 |     """MySQL è§„åˆ™åˆ†ç±»å™¨ã€‚.
17 |
18 |     å®žçŽ° MySQL æ•°æ®åº“çš„è´¦æˆ·åˆ†ç±»è§„åˆ™è¯„ä¼°ï¼Œæ”¯æŒä»¥ä¸‹è§„åˆ™ç±»åž‹ï¼š
   |                                        ^^
19 |     - global_privileges: å…¨å±€æƒé™åŒ¹é…
20 |     - exclude_privileges: æŽ’é™¤æƒé™åŒ¹é…
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/account_classification/classifiers/mysql_classifier.py:18:35
   |
16 |     """MySQL è§„åˆ™åˆ†ç±»å™¨ã€‚.
17 |
18 |     å®žçŽ° MySQL æ•°æ®åº“çš„è´¦æˆ·åˆ†ç±»è§„åˆ™è¯„ä¼°ï¼Œæ”¯æŒä»¥ä¸‹è§„åˆ™ç±»åž‹ï¼š
   |                                                          ^^
19 |     - global_privileges: å…¨å±€æƒé™åŒ¹é…
20 |     - exclude_privileges: æŽ’é™¤æƒé™åŒ¹é…
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/mysql_classifier.py:26:26
   |
25 |     Attributes:
26 |         db_type: æ•°æ®åº“ç±»åž‹æ ‡è¯†ç¬¦ï¼Œå›ºå®šä¸º 'mysql'ã€‚
   |                                  ^^
27 |
28 |     Example:
   |

C901 `evaluate` is too complex (41 > 10)
  --> app/services/account_classification/classifiers/mysql_classifier.py:38:9
   |
36 |     db_type = "mysql"
37 |
38 |     def evaluate(self, account, rule_expression: dict[str, Any]) -> bool:
   |         ^^^^^^^^
39 |         """è¯„ä¼°è´¦æˆ·æ˜¯å¦æ»¡è¶³ MySQL è§„åˆ™è¡¨è¾¾å¼ã€‚.
   |

PLR0911 Too many return statements (10 > 6)
  --> app/services/account_classification/classifiers/mysql_classifier.py:38:9
   |
36 |     db_type = "mysql"
37 |
38 |     def evaluate(self, account, rule_expression: dict[str, Any]) -> bool:
   |         ^^^^^^^^
39 |         """è¯„ä¼°è´¦æˆ·æ˜¯å¦æ»¡è¶³ MySQL è§„åˆ™è¡¨è¾¾å¼ã€‚.
   |

PLR0912 Too many branches (43 > 12)
  --> app/services/account_classification/classifiers/mysql_classifier.py:38:9
   |
36 |     db_type = "mysql"
37 |
38 |     def evaluate(self, account, rule_expression: dict[str, Any]) -> bool:
   |         ^^^^^^^^
39 |         """è¯„ä¼°è´¦æˆ·æ˜¯å¦æ»¡è¶³ MySQL è§„åˆ™è¡¨è¾¾å¼ã€‚.
   |

PLR0915 Too many statements (85 > 50)
  --> app/services/account_classification/classifiers/mysql_classifier.py:38:9
   |
36 |     db_type = "mysql"
37 |
38 |     def evaluate(self, account, rule_expression: dict[str, Any]) -> bool:
   |         ^^^^^^^^
39 |         """è¯„ä¼°è´¦æˆ·æ˜¯å¦æ»¡è¶³ MySQL è§„åˆ™è¡¨è¾¾å¼ã€‚.
   |

ANN001 Missing type annotation for function argument `account`
  --> app/services/account_classification/classifiers/mysql_classifier.py:38:24
   |
36 |     db_type = "mysql"
37 |
38 |     def evaluate(self, account, rule_expression: dict[str, Any]) -> bool:
   |                        ^^^^^^^
39 |         """è¯„ä¼°è´¦æˆ·æ˜¯å¦æ»¡è¶³ MySQL è§„åˆ™è¡¨è¾¾å¼ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/mysql_classifier.py:43:37
   |
41 |         Args:
42 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
43 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
   |                                            ^^
44 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
45 |                 - global_privileges: å…¨å±€æƒé™åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/account_classification/classifiers/mysql_classifier.py:43:44
   |
41 |         Args:
42 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
43 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
   |                                                          ^^
44 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
45 |                 - global_privileges: å…¨å±€æƒé™åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/account_classification/classifiers/mysql_classifier.py:44:34
   |
42 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
43 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
44 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
   |                                       ^^
45 |                 - global_privileges: å…¨å±€æƒé™åˆ—è¡¨
46 |                 - exclude_privileges: æŽ’é™¤æƒé™åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/account_classification/classifiers/mysql_classifier.py:44:47
   |
42 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
43 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
44 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
   |                                                      ^^
45 |                 - global_privileges: å…¨å±€æƒé™åˆ—è¡¨
46 |                 - exclude_privileges: æŽ’é™¤æƒé™åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/mysql_classifier.py:44:48
   |
42 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
43 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
44 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
   |                                                        ^^
45 |                 - global_privileges: å…¨å±€æƒé™åˆ—è¡¨
46 |                 - exclude_privileges: æŽ’é™¤æƒé™åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/mysql_classifier.py:52:28
   |
51 |         Returns:
52 |             å¦‚æžœè´¦æˆ·æ»¡è¶³è§„åˆ™è¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚
   |                                      ^^
53 |
54 |         Example:
   |

TRY300 Consider moving this statement to an `else` block
   --> app/services/account_classification/classifiers/mysql_classifier.py:170:13
    |
168 |                     return False
169 |
170 |             return True
    |             ^^^^^^^^^^^
171 |         except Exception as exc:
172 |             log_error("è¯„ä¼°MySQLè§„åˆ™å¤±è´¥", module="account_classification", error=str(exc))
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/account_classification/classifiers/mysql_classifier.py:171:16
    |
170 |             return True
171 |         except Exception as exc:
    |                ^^^^^^^^^
172 |             log_error("è¯„ä¼°MySQLè§„åˆ™å¤±è´¥", module="account_classification", error=str(exc))
173 |             return False
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `perms`
   --> app/services/account_classification/classifiers/mysql_classifier.py:176:36
    |
175 |     @staticmethod
176 |     def _extract_perm_names(perms: Any) -> set[str]:
    |                                    ^^^
177 |         """ä»Žæƒé™æ•°æ®ä¸­æå–æƒé™åç§°é›†åˆã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/classifiers/mysql_classifier.py:180:24
    |
179 |         Args:
180 |             perms: æƒé™æ•°æ®ï¼Œå¯ä»¥æ˜¯åˆ—è¡¨ã€å­—å…¸æˆ–å…¶ä»–æ ¼å¼ã€‚
    |                            ^^
181 |
182 |         Returns:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `requirement`
   --> app/services/account_classification/classifiers/mysql_classifier.py:200:48
    |
199 |     @staticmethod
200 |     def _normalize_db_requirement(requirement: Any) -> dict[str, Any] | None:
    |                                                ^^^
201 |         """è§„èŒƒåŒ–æ•°æ®åº“æƒé™è¦æ±‚ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/classifiers/mysql_classifier.py:204:30
    |
203 |         Args:
204 |             requirement: æƒé™è¦æ±‚ï¼Œå¯ä»¥æ˜¯å­—å…¸æˆ–å­—ç¬¦ä¸²ã€‚
    |                                  ^^
205 |
206 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/classifiers/mysql_classifier.py:207:24
    |
206 |         Returns:
207 |             è§„èŒƒåŒ–åŽçš„æƒé™è¦æ±‚å­—å…¸ï¼Œå¦‚æžœæ— æ³•è§„èŒƒåŒ–åˆ™è¿”å›ž Noneã€‚
    |                                   ^^
208 |
209 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `requirement`
   --> app/services/account_classification/classifiers/mysql_classifier.py:217:51
    |
216 |     @staticmethod
217 |     def _normalize_table_requirement(requirement: Any) -> dict[str, Any] | None:
    |                                                   ^^^
218 |         """è§„èŒƒåŒ–è¡¨æƒé™è¦æ±‚ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/classifiers/mysql_classifier.py:221:30
    |
220 |         Args:
221 |             requirement: æƒé™è¦æ±‚ï¼Œå¯ä»¥æ˜¯å­—å…¸æˆ–å­—ç¬¦ä¸²ã€‚
    |                                  ^^
222 |
223 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/classifiers/mysql_classifier.py:224:24
    |
223 |         Returns:
224 |             è§„èŒƒåŒ–åŽçš„æƒé™è¦æ±‚å­—å…¸ï¼Œå¦‚æžœæ— æ³•è§„èŒƒåŒ–åˆ™è¿”å›ž Noneã€‚
    |                                   ^^
225 |
226 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `value`
   --> app/services/account_classification/classifiers/mysql_classifier.py:234:29
    |
233 |     @staticmethod
234 |     def _ensure_list(value: Any) -> list[str]:
    |                             ^^^
235 |         """ç¡®ä¿å€¼ä¸ºåˆ—è¡¨æ ¼å¼ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/account_classification/classifiers/oracle_classifier.py:3:25
  |
1 | """Oracle è§„åˆ™åˆ†ç±»å™¨ã€‚.
2 |
3 | å®žçŽ° Oracle æ•°æ®åº“çš„è´¦æˆ·åˆ†ç±»è§„åˆ™è¯„ä¼°é€»è¾‘ï¼Œæ”¯æŒè§’è‰²ã€ç³»ç»Ÿæƒé™å’Œå¯¹è±¡æƒé™çš„åŒ¹é…ã€‚
  |                                         ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/oracle_classifier.py:18:27
   |
16 |     """Oracle è§„åˆ™åˆ†ç±»å™¨ã€‚.
17 |
18 |     å®žçŽ° Oracle æ•°æ®åº“çš„è´¦æˆ·åˆ†ç±»è§„åˆ™è¯„ä¼°ï¼Œæ”¯æŒä»¥ä¸‹è§„åˆ™ç±»åž‹ï¼š
   |                                         ^^
19 |     - roles: è§’è‰²åŒ¹é…
20 |     - system_privileges: ç³»ç»Ÿæƒé™åŒ¹é…
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/account_classification/classifiers/oracle_classifier.py:18:36
   |
16 |     """Oracle è§„åˆ™åˆ†ç±»å™¨ã€‚.
17 |
18 |     å®žçŽ° Oracle æ•°æ®åº“çš„è´¦æˆ·åˆ†ç±»è§„åˆ™è¯„ä¼°ï¼Œæ”¯æŒä»¥ä¸‹è§„åˆ™ç±»åž‹ï¼š
   |                                                           ^^
19 |     - roles: è§’è‰²åŒ¹é…
20 |     - system_privileges: ç³»ç»Ÿæƒé™åŒ¹é…
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/oracle_classifier.py:24:26
   |
23 |     Attributes:
24 |         db_type: æ•°æ®åº“ç±»åž‹æ ‡è¯†ç¬¦ï¼Œå›ºå®šä¸º 'oracle'ã€‚
   |                                  ^^
25 |
26 |     Example:
   |

C901 `evaluate` is too complex (15 > 10)
  --> app/services/account_classification/classifiers/oracle_classifier.py:36:9
   |
34 |     db_type = "oracle"
35 |
36 |     def evaluate(self, account, rule_expression: dict[str, Any]) -> bool:
   |         ^^^^^^^^
37 |         """è¯„ä¼°è´¦æˆ·æ˜¯å¦æ»¡è¶³ Oracle è§„åˆ™è¡¨è¾¾å¼ã€‚.
   |

PLR0912 Too many branches (14 > 12)
  --> app/services/account_classification/classifiers/oracle_classifier.py:36:9
   |
34 |     db_type = "oracle"
35 |
36 |     def evaluate(self, account, rule_expression: dict[str, Any]) -> bool:
   |         ^^^^^^^^
37 |         """è¯„ä¼°è´¦æˆ·æ˜¯å¦æ»¡è¶³ Oracle è§„åˆ™è¡¨è¾¾å¼ã€‚.
   |

ANN001 Missing type annotation for function argument `account`
  --> app/services/account_classification/classifiers/oracle_classifier.py:36:24
   |
34 |     db_type = "oracle"
35 |
36 |     def evaluate(self, account, rule_expression: dict[str, Any]) -> bool:
   |                        ^^^^^^^
37 |         """è¯„ä¼°è´¦æˆ·æ˜¯å¦æ»¡è¶³ Oracle è§„åˆ™è¡¨è¾¾å¼ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/oracle_classifier.py:41:37
   |
39 |         Args:
40 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
41 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
   |                                            ^^
42 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
43 |                 - roles: è§’è‰²åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/account_classification/classifiers/oracle_classifier.py:41:44
   |
39 |         Args:
40 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
41 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
   |                                                          ^^
42 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
43 |                 - roles: è§’è‰²åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/account_classification/classifiers/oracle_classifier.py:42:34
   |
40 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
41 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
42 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
   |                                       ^^
43 |                 - roles: è§’è‰²åˆ—è¡¨
44 |                 - system_privileges: ç³»ç»Ÿæƒé™åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/account_classification/classifiers/oracle_classifier.py:42:47
   |
40 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
41 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
42 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
   |                                                      ^^
43 |                 - roles: è§’è‰²åˆ—è¡¨
44 |                 - system_privileges: ç³»ç»Ÿæƒé™åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/oracle_classifier.py:42:48
   |
40 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
41 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
42 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
   |                                                        ^^
43 |                 - roles: è§’è‰²åˆ—è¡¨
44 |                 - system_privileges: ç³»ç»Ÿæƒé™åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/oracle_classifier.py:48:28
   |
47 |         Returns:
48 |             å¦‚æžœè´¦æˆ·æ»¡è¶³è§„åˆ™è¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚
   |                                      ^^
49 |
50 |         Example:
   |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/account_classification/classifiers/oracle_classifier.py:138:16
    |
137 |             return self._combine_results(match_results, operator)
138 |         except Exception as exc:
    |                ^^^^^^^^^
139 |             log_error("è¯„ä¼°Oracleè§„åˆ™å¤±è´¥", module="account_classification", error=str(exc))
140 |             return False
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/classifiers/oracle_classifier.py:148:35
    |
146 |         Args:
147 |             results: å„å­æ¡ä»¶çš„åŒ¹é…ç»“æžœã€‚
148 |             operator: 'AND' æˆ– 'OR'ï¼Œå†³å®šç»„åˆé€»è¾‘ã€‚
    |                                    ^^
149 |
150 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/classifiers/oracle_classifier.py:151:34
    |
150 |         Returns:
151 |             bool: å½“ç»“æžœåˆ—è¡¨ä¸ºç©ºæ—¶è§†ä¸º Trueï¼Œå¦åˆ™æŒ‰è¿ç®—ç¬¦èšåˆã€‚
    |                                            ^^
152 |
153 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `source`
   --> app/services/account_classification/classifiers/oracle_classifier.py:161:50
    |
160 |     @staticmethod
161 |     def _normalize_tablespace_privileges(source: Any) -> list[dict[str, Any]]:
    |                                                  ^^^
162 |         """æ”¯æŒ dict/list ä¸¤ç§ç»“æž„çš„è¡¨ç©ºé—´æƒé™ã€‚.
    |

PERF401 Use `list.extend` to create a transformed list
   --> app/services/account_classification/classifiers/oracle_classifier.py:176:21
    |
174 |                   perms = privileges if isinstance(privileges, list) else [privileges]
175 |                   for privilege in perms:
176 | /                     normalized.append(
177 | |                         {
178 | |                             "tablespace_name": tablespace_name,
179 | |                             "privilege": privilege,
180 | |                         },
181 | |                     )
    | |_____________________^
182 |           elif isinstance(source, list):
183 |               normalized = [item for item in source if isinstance(item, dict)]
    |
help: Replace for loop with list.extend

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/account_classification/classifiers/postgresql_classifier.py:3:29
  |
1 | """PostgreSQL è§„åˆ™åˆ†ç±»å™¨ã€‚.
2 |
3 | å®žçŽ° PostgreSQL æ•°æ®åº“çš„è´¦æˆ·åˆ†ç±»è§„åˆ™è¯„ä¼°é€»è¾‘ï¼Œæ”¯æŒé¢„å®šä¹‰è§’è‰²ã€è§’è‰²å±žæ€§ã€æ•°æ®åº“æƒé™å’Œæ¨¡å¼æƒé™çš„åŒ¹é…ã€‚
  |                                             ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/postgresql_classifier.py:18:31
   |
16 |     """PostgreSQL è§„åˆ™åˆ†ç±»å™¨ã€‚.
17 |
18 |     å®žçŽ° PostgreSQL æ•°æ®åº“çš„è´¦æˆ·åˆ†ç±»è§„åˆ™è¯„ä¼°ï¼Œæ”¯æŒä»¥ä¸‹è§„åˆ™ç±»åž‹ï¼š
   |                                             ^^
19 |     - predefined_roles: é¢„å®šä¹‰è§’è‰²åŒ¹é…
20 |     - role_attributes: è§’è‰²å±žæ€§åŒ¹é…ï¼ˆå¦‚ SUPERUSERã€CREATEDB ç­‰ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/account_classification/classifiers/postgresql_classifier.py:18:40
   |
16 |     """PostgreSQL è§„åˆ™åˆ†ç±»å™¨ã€‚.
17 |
18 |     å®žçŽ° PostgreSQL æ•°æ®åº“çš„è´¦æˆ·åˆ†ç±»è§„åˆ™è¯„ä¼°ï¼Œæ”¯æŒä»¥ä¸‹è§„åˆ™ç±»åž‹ï¼š
   |                                                               ^^
19 |     - predefined_roles: é¢„å®šä¹‰è§’è‰²åŒ¹é…
20 |     - role_attributes: è§’è‰²å±žæ€§åŒ¹é…ï¼ˆå¦‚ SUPERUSERã€CREATEDB ç­‰ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/account_classification/classifiers/postgresql_classifier.py:20:30
   |
18 |     å®žçŽ° PostgreSQL æ•°æ®åº“çš„è´¦æˆ·åˆ†ç±»è§„åˆ™è¯„ä¼°ï¼Œæ”¯æŒä»¥ä¸‹è§„åˆ™ç±»åž‹ï¼š
19 |     - predefined_roles: é¢„å®šä¹‰è§’è‰²åŒ¹é…
20 |     - role_attributes: è§’è‰²å±žæ€§åŒ¹é…ï¼ˆå¦‚ SUPERUSERã€CREATEDB ç­‰ï¼‰
   |                                    ^^
21 |     - database_privileges: æ•°æ®åº“çº§æƒé™åŒ¹é…
22 |     - schema_privileges: æ¨¡å¼çº§æƒé™åŒ¹é…
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/account_classification/classifiers/postgresql_classifier.py:20:53
   |
18 |     å®žçŽ° PostgreSQL æ•°æ®åº“çš„è´¦æˆ·åˆ†ç±»è§„åˆ™è¯„ä¼°ï¼Œæ”¯æŒä»¥ä¸‹è§„åˆ™ç±»åž‹ï¼š
19 |     - predefined_roles: é¢„å®šä¹‰è§’è‰²åŒ¹é…
20 |     - role_attributes: è§’è‰²å±žæ€§åŒ¹é…ï¼ˆå¦‚ SUPERUSERã€CREATEDB ç­‰ï¼‰
   |                                                               ^^
21 |     - database_privileges: æ•°æ®åº“çº§æƒé™åŒ¹é…
22 |     - schema_privileges: æ¨¡å¼çº§æƒé™åŒ¹é…
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/postgresql_classifier.py:25:26
   |
24 |     Attributes:
25 |         db_type: æ•°æ®åº“ç±»åž‹æ ‡è¯†ç¬¦ï¼Œå›ºå®šä¸º 'postgresql'ã€‚
   |                                  ^^
26 |
27 |     Example:
   |

C901 `evaluate` is too complex (11 > 10)
  --> app/services/account_classification/classifiers/postgresql_classifier.py:37:9
   |
35 |     db_type = "postgresql"
36 |
37 |     def evaluate(self, account, rule_expression: dict[str, Any]) -> bool:
   |         ^^^^^^^^
38 |         """è¯„ä¼°è´¦æˆ·æ˜¯å¦æ»¡è¶³ PostgreSQL è§„åˆ™è¡¨è¾¾å¼ã€‚.
   |

ANN001 Missing type annotation for function argument `account`
  --> app/services/account_classification/classifiers/postgresql_classifier.py:37:24
   |
35 |     db_type = "postgresql"
36 |
37 |     def evaluate(self, account, rule_expression: dict[str, Any]) -> bool:
   |                        ^^^^^^^
38 |         """è¯„ä¼°è´¦æˆ·æ˜¯å¦æ»¡è¶³ PostgreSQL è§„åˆ™è¡¨è¾¾å¼ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/postgresql_classifier.py:42:37
   |
40 |         Args:
41 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
42 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
   |                                            ^^
43 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
44 |                 - predefined_roles: é¢„å®šä¹‰è§’è‰²åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/account_classification/classifiers/postgresql_classifier.py:42:44
   |
40 |         Args:
41 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
42 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
   |                                                          ^^
43 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
44 |                 - predefined_roles: é¢„å®šä¹‰è§’è‰²åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/account_classification/classifiers/postgresql_classifier.py:43:34
   |
41 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
42 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
43 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
   |                                       ^^
44 |                 - predefined_roles: é¢„å®šä¹‰è§’è‰²åˆ—è¡¨
45 |                 - role_attributes: è§’è‰²å±žæ€§åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/account_classification/classifiers/postgresql_classifier.py:43:47
   |
41 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
42 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
43 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
   |                                                      ^^
44 |                 - predefined_roles: é¢„å®šä¹‰è§’è‰²åˆ—è¡¨
45 |                 - role_attributes: è§’è‰²å±žæ€§åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/postgresql_classifier.py:43:48
   |
41 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
42 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
43 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
   |                                                        ^^
44 |                 - predefined_roles: é¢„å®šä¹‰è§’è‰²åˆ—è¡¨
45 |                 - role_attributes: è§’è‰²å±žæ€§åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/postgresql_classifier.py:50:28
   |
49 |         Returns:
50 |             å¦‚æžœè´¦æˆ·æ»¡è¶³è§„åˆ™è¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚
   |                                      ^^
51 |
52 |         Example:
   |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/account_classification/classifiers/postgresql_classifier.py:105:16
    |
104 |             return self._combine_results(match_results, operator)
105 |         except Exception as exc:
    |                ^^^^^^^^^
106 |             log_error("è¯„ä¼°PostgreSQLè§„åˆ™å¤±è´¥", module="account_classification", error=str(exc))
107 |             return False
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `perms`
   --> app/services/account_classification/classifiers/postgresql_classifier.py:110:36
    |
109 |     @staticmethod
110 |     def _extract_priv_names(perms: Any) -> set[str]:
    |                                    ^^^
111 |         """æå–æƒé™åç§°é›†åˆã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/classifiers/postgresql_classifier.py:117:33
    |
116 |         Returns:
117 |             set[str]: åŽ»é‡åŽçš„æƒé™åç§°é›†åˆï¼Œä»…åŒ…å«å·²æŽˆæƒçš„æƒé™ã€‚
    |                                           ^^
118 |
119 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/classifiers/postgresql_classifier.py:144:37
    |
143 |         Returns:
144 |             bool: results ä¸ºç©ºæ—¶è¿”å›ž Trueï¼Œå¦åˆ™æŒ‰è¿ç®—ç¬¦èšåˆã€‚
    |                                          ^^
145 |
146 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/account_classification/classifiers/sqlserver_classifier.py:3:29
  |
1 | """SQL Server è§„åˆ™åˆ†ç±»å™¨ã€‚.
2 |
3 | å®žçŽ° SQL Server æ•°æ®åº“çš„è´¦æˆ·åˆ†ç±»è§„åˆ™è¯„ä¼°é€»è¾‘ï¼Œæ”¯æŒæœåŠ¡å™¨è§’è‰²ã€æ•°æ®åº“è§’è‰²å’Œæƒé™çš„åŒ¹é…ã€‚
  |                                             ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/sqlserver_classifier.py:18:31
   |
16 |     """SQL Server è§„åˆ™åˆ†ç±»å™¨ã€‚.
17 |
18 |     å®žçŽ° SQL Server æ•°æ®åº“çš„è´¦æˆ·åˆ†ç±»è§„åˆ™è¯„ä¼°ï¼Œæ”¯æŒä»¥ä¸‹è§„åˆ™ç±»åž‹ï¼š
   |                                             ^^
19 |     - server_roles: æœåŠ¡å™¨è§’è‰²åŒ¹é…
20 |     - database_roles: æ•°æ®åº“è§’è‰²åŒ¹é…
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/account_classification/classifiers/sqlserver_classifier.py:18:40
   |
16 |     """SQL Server è§„åˆ™åˆ†ç±»å™¨ã€‚.
17 |
18 |     å®žçŽ° SQL Server æ•°æ®åº“çš„è´¦æˆ·åˆ†ç±»è§„åˆ™è¯„ä¼°ï¼Œæ”¯æŒä»¥ä¸‹è§„åˆ™ç±»åž‹ï¼š
   |                                                               ^^
19 |     - server_roles: æœåŠ¡å™¨è§’è‰²åŒ¹é…
20 |     - database_roles: æ•°æ®åº“è§’è‰²åŒ¹é…
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/sqlserver_classifier.py:25:26
   |
24 |     Attributes:
25 |         db_type: æ•°æ®åº“ç±»åž‹æ ‡è¯†ç¬¦ï¼Œå›ºå®šä¸º 'sqlserver'ã€‚
   |                                  ^^
26 |
27 |     Example:
   |

C901 `evaluate` is too complex (11 > 10)
  --> app/services/account_classification/classifiers/sqlserver_classifier.py:37:9
   |
35 |     db_type = "sqlserver"
36 |
37 |     def evaluate(self, account, rule_expression: dict[str, Any]) -> bool:
   |         ^^^^^^^^
38 |         """è¯„ä¼°è´¦æˆ·æ˜¯å¦æ»¡è¶³ SQL Server è§„åˆ™è¡¨è¾¾å¼ã€‚.
   |

ANN001 Missing type annotation for function argument `account`
  --> app/services/account_classification/classifiers/sqlserver_classifier.py:37:24
   |
35 |     db_type = "sqlserver"
36 |
37 |     def evaluate(self, account, rule_expression: dict[str, Any]) -> bool:
   |                        ^^^^^^^
38 |         """è¯„ä¼°è´¦æˆ·æ˜¯å¦æ»¡è¶³ SQL Server è§„åˆ™è¡¨è¾¾å¼ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/sqlserver_classifier.py:42:37
   |
40 |         Args:
41 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
42 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
   |                                            ^^
43 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
44 |                 - server_roles: æœåŠ¡å™¨è§’è‰²åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/account_classification/classifiers/sqlserver_classifier.py:42:44
   |
40 |         Args:
41 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
42 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
   |                                                          ^^
43 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
44 |                 - server_roles: æœåŠ¡å™¨è§’è‰²åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/account_classification/classifiers/sqlserver_classifier.py:43:34
   |
41 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
42 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
43 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
   |                                       ^^
44 |                 - server_roles: æœåŠ¡å™¨è§’è‰²åˆ—è¡¨
45 |                 - database_roles: æ•°æ®åº“è§’è‰²åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/account_classification/classifiers/sqlserver_classifier.py:43:47
   |
41 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
42 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
43 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
   |                                                      ^^
44 |                 - server_roles: æœåŠ¡å™¨è§’è‰²åˆ—è¡¨
45 |                 - database_roles: æ•°æ®åº“è§’è‰²åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/sqlserver_classifier.py:43:48
   |
41 |             account: è´¦æˆ·æƒé™å¯¹è±¡ã€‚
42 |             rule_expression: è§„åˆ™è¡¨è¾¾å¼å­—å…¸ï¼Œæ”¯æŒä»¥ä¸‹å­—æ®µï¼š
43 |                 - operator: é€»è¾‘è¿ç®—ç¬¦ï¼ˆ'AND' æˆ– 'OR'ï¼‰ï¼Œé»˜è®¤ä¸º 'OR'
   |                                                        ^^
44 |                 - server_roles: æœåŠ¡å™¨è§’è‰²åˆ—è¡¨
45 |                 - database_roles: æ•°æ®åº“è§’è‰²åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/classifiers/sqlserver_classifier.py:50:28
   |
49 |         Returns:
50 |             å¦‚æžœè´¦æˆ·æ»¡è¶³è§„åˆ™è¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚
   |                                      ^^
51 |
52 |         Example:
   |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/account_classification/classifiers/sqlserver_classifier.py:115:16
    |
114 |             return self._combine_results(match_results, operator)
115 |         except Exception as exc:
    |                ^^^^^^^^^
116 |             log_error("è¯„ä¼°SQL Serverè§„åˆ™å¤±è´¥", module="account_classification", error=str(exc))
117 |             return False
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/classifiers/sqlserver_classifier.py:125:35
    |
123 |         Args:
124 |             results: æ¯ä¸ªå­æ¡ä»¶çš„å¸ƒå°”ç»“æžœã€‚
125 |             operator: 'AND' æˆ– 'OR'ï¼Œå†³å®šç»„åˆç­–ç•¥ã€‚
    |                                    ^^
126 |
127 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/classifiers/sqlserver_classifier.py:128:33
    |
127 |         Returns:
128 |             bool: ç»“æžœåˆ—è¡¨ä¸ºç©ºæ—¶è¿”å›ž Trueï¼Œå¦åˆ™æŒ‰è¿ç®—ç¬¦èšåˆã€‚
    |                                          ^^
129 |
130 |         """
    |

D107 Missing docstring in `__init__`
  --> app/services/account_classification/orchestrator.py:32:9
   |
30 |     """
31 |
32 |     def __init__(
   |         ^^^^^^^^
33 |         self,
34 |         repository: ClassificationRepository | None = None,
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/orchestrator.py:49:34
   |
48 |         Args:
49 |             instance_id: é™å®šçš„å®žä¾‹ IDï¼ŒNone æ—¶è¡¨ç¤ºå…¨é‡å¤„ç†ã€‚
   |                                       ^^
50 |             created_by: è§¦å‘ä»»åŠ¡çš„ç”¨æˆ· IDã€‚
   |

TRY300 Consider moving this statement to an `else` block
  --> app/services/account_classification/orchestrator.py:87:13
   |
85 |             )
86 |
87 |             return {"success": True, "message": "è‡ªåŠ¨åˆ†ç±»å®Œæˆ", **result}
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
88 |         except Exception as exc:
89 |             log_error("ä¼˜åŒ–åŽçš„è‡ªåŠ¨åˆ†ç±»å¤±è´¥", module="account_classification", error=str(exc))
   |

BLE001 Do not catch blind exception: `Exception`
  --> app/services/account_classification/orchestrator.py:88:16
   |
87 |             return {"success": True, "message": "è‡ªåŠ¨åˆ†ç±»å®Œæˆ", **result}
88 |         except Exception as exc:
   |                ^^^^^^^^^
89 |             log_error("ä¼˜åŒ–åŽçš„è‡ªåŠ¨åˆ†ç±»å¤±è´¥", module="account_classification", error=str(exc))
90 |             return {"success": False, "error": f"è‡ªåŠ¨åˆ†ç±»å¤±è´¥: {exc}"}
   |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/account_classification/orchestrator.py:101:16
    |
 99 |         try:
100 |             return self.cache.invalidate_all()
101 |         except Exception as exc:
    |                ^^^^^^^^^
102 |             log_error("æ¸…é™¤åˆ†ç±»ç¼“å­˜å¤±è´¥", module="account_classification", error=str(exc))
103 |             return False
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/account_classification/orchestrator.py:117:16
    |
115 |         try:
116 |             return self.cache.invalidate_db_type(db_type)
117 |         except Exception as exc:
    |                ^^^^^^^^^
118 |             log_error("æ¸…é™¤æ•°æ®åº“ç±»åž‹ç¼“å­˜å¤±è´¥", module="account_classification", db_type=db_type, error=str(exc))
119 |             return False
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/orchestrator.py:126:47
    |
125 |         Returns:
126 |             list[ClassificationRule]: å·²æŽ’åºçš„è§„åˆ™é›†åˆï¼ŒåŒ…å«ç¼“å­˜å‘½ä¸­ä¼˜å…ˆçº§ã€‚
    |                                                       ^^
127 |
128 |         """
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/account_classification/orchestrator.py:251:20
    |
249 |                 all_errors.extend(result["errors"])
250 |                 db_type_results[db_type] = result
251 |             except Exception as exc:
    |                    ^^^^^^^^^
252 |                 error_msg = f"æ•°æ®åº“ç±»åž‹ {db_type} åˆ†ç±»å¤±è´¥: {exc}"
253 |                 log_error(error_msg, module="account_classification")
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/account_classification/orchestrator.py:316:20
    |
314 |                     matched_accounts=len(matched_accounts),
315 |                 )
316 |             except Exception as exc:
    |                    ^^^^^^^^^
317 |                 error_msg = f"è§„åˆ™ {rule.rule_name} å¤„ç†å¤±è´¥: {exc}"
318 |                 log_error(error_msg, module="account_classification", rule_id=rule.id, db_type=db_type)
    |

PERF401 Use a list comprehension to create a transformed list
   --> app/services/account_classification/orchestrator.py:355:17
    |
353 |         for account in filtered_accounts:
354 |             if self._evaluate_rule(account, rule):
355 |                 matched_accounts.append(account)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
356 |         return matched_accounts
    |
help: Replace for loop with list comprehension

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/orchestrator.py:366:32
    |
365 |         Returns:
366 |             bool: è´¦æˆ·æ»¡è¶³è§„åˆ™è¿”å›ž Trueï¼Œå¦åˆ™ Falseã€‚
    |                                        ^^
367 |
368 |         """
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/account_classification/orchestrator.py:382:27
    |
381 |         Args:
382 |             duration: åˆ†ç±»è€—æ—¶ï¼ˆç§’ï¼‰ã€‚
    |                               ^^
383 |             total_accounts: å‚ä¸Žåˆ†ç±»çš„è´¦æˆ·æ•°é‡ã€‚
384 |             total_rules: æœ¬æ¬¡è¯„ä¼°çš„è§„åˆ™æ•°é‡ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/account_classification/orchestrator.py:382:29
    |
381 |         Args:
382 |             duration: åˆ†ç±»è€—æ—¶ï¼ˆç§’ï¼‰ã€‚
    |                                   ^^
383 |             total_accounts: å‚ä¸Žåˆ†ç±»çš„è´¦æˆ·æ•°é‡ã€‚
384 |             total_rules: æœ¬æ¬¡è¯„ä¼°çš„è§„åˆ™æ•°é‡ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/repositories.py:49:34
   |
48 |         Args:
49 |             instance_id: å¯é€‰çš„å®žä¾‹ IDï¼Œç”¨äºŽç­›é€‰ç‰¹å®šå®žä¾‹çš„è´¦æˆ·ã€‚
   |                                       ^^
50 |
51 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/account_classification/repositories.py:52:24
   |
51 |         Returns:
52 |             ç¬¦åˆæ¡ä»¶çš„è´¦æˆ·æƒé™åˆ—è¡¨ï¼ˆä»…æ´»è·ƒå®žä¾‹å’Œè´¦æˆ·ï¼‰ã€‚
   |                                   ^^
53 |
54 |         """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/account_classification/repositories.py:52:33
   |
51 |         Returns:
52 |             ç¬¦åˆæ¡ä»¶çš„è´¦æˆ·æƒé™åˆ—è¡¨ï¼ˆä»…æ´»è·ƒå®žä¾‹å’Œè´¦æˆ·ï¼‰ã€‚
   |                                                     ^^
53 |
54 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/account_classification/repositories.py:71:24
   |
69 |         """é‡æ–°åˆ†ç±»å‰æ¸…ç†æ‰€æœ‰æ—¢æœ‰åˆ†é…å…³ç³»ã€‚.
70 |
71 |         åˆ é™¤æ‰€æœ‰çŽ°æœ‰çš„è´¦æˆ·åˆ†ç±»åˆ†é…è®°å½•ï¼Œä¸ºé‡æ–°åˆ†ç±»åšå‡†å¤‡ã€‚
   |                                       ^^
72 |
73 |         Returns:
   |

TRY300 Consider moving this statement to an `else` block
  --> app/services/account_classification/repositories.py:89:13
   |
87 |                 )
88 |             db.session.commit()
89 |             return deleted
   |             ^^^^^^^^^^^^^^
90 |         except Exception as exc:
91 |             db.session.rollback()
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/account_classification/repositories.py:104:19
    |
102 |         """ä¸ºæŒ‡å®šè´¦æˆ·é›†é‡æ–°å†™å…¥åˆ†ç±»åˆ†é…è®°å½•ã€‚.
103 |
104 |         å…ˆåˆ é™¤çŽ°æœ‰çš„åˆ†é…è®°å½•ï¼Œç„¶åŽæ‰¹é‡æ’å…¥æ–°çš„åˆ†é…è®°å½•ã€‚
    |                             ^^
105 |
106 |         Args:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/account_classification/repositories.py:160:16
    |
159 |             return len(new_assignments)
160 |         except Exception as exc:
    |                ^^^^^^^^^
161 |             log_error(
162 |                 "æ‰¹é‡å†™å…¥åˆ†ç±»åˆ†é…å¤±è´¥",
    |

PERF401 Use a list comprehension to create a transformed list
   --> app/services/account_classification/repositories.py:184:13
    |
182 |           payload: list[dict] = []
183 |           for rule in rules:
184 | /             payload.append(
185 | |                 {
186 | |                     "id": rule.id,
187 | |                     "classification_id": rule.classification_id,
188 | |                     "db_type": rule.db_type,
189 | |                     "rule_name": rule.rule_name,
190 | |                     "rule_expression": rule.rule_expression,
191 | |                     "is_active": rule.is_active,
192 | |                     "created_at": rule.created_at.isoformat() if rule.created_at else None,
193 | |                     "updated_at": rule.updated_at.isoformat() if rule.updated_at else None,
194 | |                 },
195 | |             )
    | |_____________^
196 |           return payload
    |
help: Replace for loop with list comprehension

BLE001 Do not catch blind exception: `Exception`
   --> app/services/account_classification/repositories.py:220:20
    |
218 |                 rule.is_active = data.get("is_active", True)
219 |                 hydrated.append(rule)
220 |             except Exception as exc:
    |                    ^^^^^^^^^
221 |                 log_error("ååºåˆ—åŒ–è§„åˆ™ç¼“å­˜å¤±è´¥", module="account_classification", error=str(exc))
222 |         return hydrated
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/accounts_sync/__init__.py:3:13
  |
1 | """è´¦æˆ·åŒæ­¥æœåŠ¡æ¨¡å—ã€‚.
2 |
3 | æä¾›æ•°æ®åº“è´¦æˆ·çš„åŒæ­¥åŠŸèƒ½ï¼ŒåŒ…æ‹¬è´¦æˆ·æ¸…å•ç®¡ç†ã€æƒé™é‡‡é›†å’Œå¢žé‡æ›´æ–°ã€‚
  |                         ^^
4 |
5 | ä¸»è¦ç»„ä»¶ï¼š
  |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/services/accounts_sync/__init__.py:5:5
  |
3 | æä¾›æ•°æ®åº“è´¦æˆ·çš„åŒæ­¥åŠŸèƒ½ï¼ŒåŒ…æ‹¬è´¦æˆ·æ¸…å•ç®¡ç†ã€æƒé™é‡‡é›†å’Œå¢žé‡æ›´æ–°ã€‚
4 |
5 | ä¸»è¦ç»„ä»¶ï¼š
  |         ^^
6 | - AccountSyncService: è´¦æˆ·åŒæ­¥æœåŠ¡ï¼ˆç»Ÿä¸€å…¥å£ï¼‰
7 | - AccountSyncCoordinator: è´¦æˆ·åŒæ­¥åè°ƒå™¨
  |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
 --> app/services/accounts_sync/__init__.py:6:29
  |
5 | ä¸»è¦ç»„ä»¶ï¼š
6 | - AccountSyncService: è´¦æˆ·åŒæ­¥æœåŠ¡ï¼ˆç»Ÿä¸€å…¥å£ï¼‰
  |                                   ^^
7 | - AccountSyncCoordinator: è´¦æˆ·åŒæ­¥åè°ƒå™¨
8 | - AccountInventoryManager: è´¦æˆ·æ¸…å•ç®¡ç†å™¨
  |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
 --> app/services/accounts_sync/__init__.py:6:34
  |
5 | ä¸»è¦ç»„ä»¶ï¼š
6 | - AccountSyncService: è´¦æˆ·åŒæ­¥æœåŠ¡ï¼ˆç»Ÿä¸€å…¥å£ï¼‰
  |                                             ^^
7 | - AccountSyncCoordinator: è´¦æˆ·åŒæ­¥åè°ƒå™¨
8 | - AccountInventoryManager: è´¦æˆ·æ¸…å•ç®¡ç†å™¨
  |

FBT001 Boolean-typed positional argument in function definition
  --> app/services/accounts_sync/account_query_service.py:9:48
   |
 9 | def get_accounts_by_instance(instance_id: int, include_inactive: bool = False) -> list[AccountPermission]:
   |                                                ^^^^^^^^^^^^^^^^
10 |     """æŒ‰å®žä¾‹èŽ·å–è´¦æˆ·åˆ—è¡¨ã€‚.
   |

FBT002 Boolean default positional argument in function definition
  --> app/services/accounts_sync/account_query_service.py:9:48
   |
 9 | def get_accounts_by_instance(instance_id: int, include_inactive: bool = False) -> list[AccountPermission]:
   |                                                ^^^^^^^^^^^^^^^^
10 |     """æŒ‰å®žä¾‹èŽ·å–è´¦æˆ·åˆ—è¡¨ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/account_query_service.py:12:20
   |
10 |     """æŒ‰å®žä¾‹èŽ·å–è´¦æˆ·åˆ—è¡¨ã€‚.
11 |
12 |     æŸ¥è¯¢æŒ‡å®šå®žä¾‹çš„æ‰€æœ‰è´¦æˆ·æƒé™è®°å½•ï¼ŒæŒ‰ç”¨æˆ·åå‡åºæŽ’åˆ—ã€‚
   |                                   ^^
13 |
14 |     Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/account_query_service.py:16:36
   |
14 |     Args:
15 |         instance_id: å®žä¾‹ IDã€‚
16 |         include_inactive: æ˜¯å¦åŒ…å«å·²å¤±æ´»è´¦æˆ·ï¼Œé»˜è®¤ä¸º Falseã€‚
   |                                             ^^
17 |
18 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/account_query_service.py:19:17
   |
18 |     Returns:
19 |         è´¦æˆ·æƒé™å¯¹è±¡åˆ—è¡¨ï¼ŒæŒ‰ç”¨æˆ·åå‡åºæŽ’åˆ—ã€‚
   |                         ^^
20 |
21 |     """
   |

D205 1 blank line required between summary line and description
 --> app/services/accounts_sync/accounts_sync_filters.py:1:1
  |
1 | / """é²¸è½ - æ•°æ®åº“è¿‡æ»¤è§„åˆ™ç®¡ç†å™¨
2 | | ä¸“é—¨ç”¨äºŽæ•°æ®åº“è´¦æˆ·åŒæ­¥æ—¶çš„è¿‡æ»¤è§„åˆ™ç®¡ç†.
3 | | """
  | |___^
4 |
5 |   import re
  |
help: Insert single blank line

D107 Missing docstring in `__init__`
  --> app/services/accounts_sync/accounts_sync_filters.py:22:9
   |
20 |     """æ•°æ®åº“è¿‡æ»¤è§„åˆ™ç®¡ç†å™¨."""
21 |
22 |     def __init__(self, config_path: str | Path | None = None) -> None:
   |         ^^^^^^^^
23 |         path_obj = Path(config_path) if config_path else _DEFAULT_CONFIG_PATH
24 |         self.config_file = path_obj
   |

G004 Logging statement uses f-string
  --> app/services/accounts_sync/accounts_sync_filters.py:40:26
   |
38 |         """
39 |         if not self.config_file.exists():
40 |             logger.error(f"è´¦æˆ·è¿‡æ»¤è§„åˆ™é…ç½®æ–‡ä»¶ä¸å­˜åœ¨: {self.config_path_str}")
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
41 |             msg = f"è´¦æˆ·è¿‡æ»¤è§„åˆ™é…ç½®æ–‡ä»¶ä¸å­˜åœ¨: {self.config_path_str}"
42 |             raise FileNotFoundError(msg)
   |
help: Convert to lazy `%` formatting

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/accounts_sync_filters.py:49:39
   |
48 |             if "account_filters" not in config:
49 |                 logger.error("é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼Œç¼ºå°‘ account_filters èŠ‚ç‚¹")
   |                                               ^^
50 |                 msg = "é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼Œç¼ºå°‘ account_filters èŠ‚ç‚¹"
51 |                 raise ValueError(msg)
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/accounts_sync_filters.py:50:32
   |
48 |             if "account_filters" not in config:
49 |                 logger.error("é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼Œç¼ºå°‘ account_filters èŠ‚ç‚¹")
50 |                 msg = "é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼Œç¼ºå°‘ account_filters èŠ‚ç‚¹"
   |                                        ^^
51 |                 raise ValueError(msg)
   |

TRY301 Abstract `raise` to an inner function
  --> app/services/accounts_sync/accounts_sync_filters.py:51:17
   |
49 |                 logger.error("é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼Œç¼ºå°‘ account_filters èŠ‚ç‚¹")
50 |                 msg = "é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼Œç¼ºå°‘ account_filters èŠ‚ç‚¹"
51 |                 raise ValueError(msg)
   |                 ^^^^^^^^^^^^^^^^^^^^^
52 |
53 |             filter_rules = config["account_filters"] or {}
   |

G004 Logging statement uses f-string
  --> app/services/accounts_sync/accounts_sync_filters.py:54:25
   |
53 |             filter_rules = config["account_filters"] or {}
54 |             logger.info(f"æˆåŠŸåŠ è½½è´¦æˆ·è¿‡æ»¤è§„åˆ™é…ç½®æ–‡ä»¶: {self.config_path_str}")
   |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
55 |             logger.info(f"åŠ è½½çš„æ•°æ®åº“ç±»åž‹: {list(filter_rules.keys())}")
   |
help: Convert to lazy `%` formatting

G004 Logging statement uses f-string
  --> app/services/accounts_sync/accounts_sync_filters.py:55:25
   |
53 |             filter_rules = config["account_filters"] or {}
54 |             logger.info(f"æˆåŠŸåŠ è½½è´¦æˆ·è¿‡æ»¤è§„åˆ™é…ç½®æ–‡ä»¶: {self.config_path_str}")
55 |             logger.info(f"åŠ è½½çš„æ•°æ®åº“ç±»åž‹: {list(filter_rules.keys())}")
   |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
56 |
57 |             return filter_rules
   |
help: Convert to lazy `%` formatting

TRY300 Consider moving this statement to an `else` block
  --> app/services/accounts_sync/accounts_sync_filters.py:57:13
   |
55 |             logger.info(f"åŠ è½½çš„æ•°æ®åº“ç±»åž‹: {list(filter_rules.keys())}")
56 |
57 |             return filter_rules
   |             ^^^^^^^^^^^^^^^^^^^
58 |
59 |         except yaml.YAMLError as exc:
   |

G004 Logging statement uses f-string
  --> app/services/accounts_sync/accounts_sync_filters.py:60:30
   |
59 |         except yaml.YAMLError as exc:
60 |             logger.exception(f"è§£æžé…ç½®æ–‡ä»¶å¤±è´¥: {exc}")
   |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^
61 |             msg = f"è§£æžé…ç½®æ–‡ä»¶å¤±è´¥: {exc}"
62 |             raise ValueError(msg) from exc
   |
help: Convert to lazy `%` formatting

TRY401 Redundant exception object included in `logging.exception` call
  --> app/services/accounts_sync/accounts_sync_filters.py:60:43
   |
59 |         except yaml.YAMLError as exc:
60 |             logger.exception(f"è§£æžé…ç½®æ–‡ä»¶å¤±è´¥: {exc}")
   |                                                   ^^^
61 |             msg = f"è§£æžé…ç½®æ–‡ä»¶å¤±è´¥: {exc}"
62 |             raise ValueError(msg) from exc
   |

G004 Logging statement uses f-string
  --> app/services/accounts_sync/accounts_sync_filters.py:64:30
   |
62 |             raise ValueError(msg) from exc
63 |         except Exception as exc:
64 |             logger.exception(f"åŠ è½½è¿‡æ»¤è§„åˆ™é…ç½®æ–‡ä»¶å¤±è´¥: {exc}")
   |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
65 |             raise
   |
help: Convert to lazy `%` formatting

TRY401 Redundant exception object included in `logging.exception` call
  --> app/services/accounts_sync/accounts_sync_filters.py:64:47
   |
62 |             raise ValueError(msg) from exc
63 |         except Exception as exc:
64 |             logger.exception(f"åŠ è½½è¿‡æ»¤è§„åˆ™é…ç½®æ–‡ä»¶å¤±è´¥: {exc}")
   |                                                           ^^^
65 |             raise
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/accounts_sync/accounts_sync_filters.py:68:24
   |
67 |     def get_safe_sql_filter_conditions(self, db_type: str, username_field: str = "username") -> tuple[str, list[Any]]:
68 |         """èŽ·å–å®‰å…¨çš„SQLè¿‡æ»¤æ¡ä»¶ï¼ˆå‚æ•°åŒ–æŸ¥è¯¢ï¼‰.
   |                                 ^^
69 |
70 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/accounts_sync/accounts_sync_filters.py:68:30
   |
67 |     def get_safe_sql_filter_conditions(self, db_type: str, username_field: str = "username") -> tuple[str, list[Any]]:
68 |         """èŽ·å–å®‰å…¨çš„SQLè¿‡æ»¤æ¡ä»¶ï¼ˆå‚æ•°åŒ–æŸ¥è¯¢ï¼‰.
   |                                             ^^
69 |
70 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/accounts_sync_filters.py:72:35
   |
70 |         Args:
71 |             db_type: æ•°æ®åº“ç±»åž‹ (mysql, postgresql, sqlserver, oracle)
72 |             username_field: ç”¨æˆ·åå­—æ®µåï¼Œé»˜è®¤ä¸º'username'
   |                                         ^^
73 |
74 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/accounts_sync/accounts_sync_filters.py:81:16
   |
80 |     def _match_pattern(self, text: str, pattern: str) -> bool:
81 |         """æ¨¡å¼åŒ¹é…ï¼ˆæ”¯æŒSQL LIKEè¯­æ³•ï¼‰.
   |                    ^^
82 |
83 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/accounts_sync/accounts_sync_filters.py:81:29
   |
80 |     def _match_pattern(self, text: str, pattern: str) -> bool:
81 |         """æ¨¡å¼åŒ¹é…ï¼ˆæ”¯æŒSQL LIKEè¯­æ³•ï¼‰.
   |                                      ^^
82 |
83 |         Args:
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/accounts_sync_filters.py:93:23
   |
91 |         try:
92 |             # å°†SQL LIKEæ¨¡å¼è½¬æ¢ä¸ºæ­£åˆ™è¡¨è¾¾å¼
93 |             # % åŒ¹é…ä»»æ„å­—ç¬¦ï¼Œ_ åŒ¹é…å•ä¸ªå­—ç¬¦
   |                             ^^
94 |             regex_pattern = pattern.replace("%", ".*").replace("_", ".")
95 |             # æ·»åŠ è¡Œé¦–å’Œè¡Œå°¾é”šç‚¹
   |

G004 Logging statement uses f-string
   --> app/services/accounts_sync/accounts_sync_filters.py:99:30
    |
 97 |             return bool(re.match(regex_pattern, text, re.IGNORECASE))
 98 |         except Exception as exc:
 99 |             logger.exception(f"æ¨¡å¼åŒ¹é…å¤±è´¥: {pattern} -> {text}, é”™è¯¯: {exc}")
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
100 |             return False
    |
help: Convert to lazy `%` formatting

TRY401 Redundant exception object included in `logging.exception` call
   --> app/services/accounts_sync/accounts_sync_filters.py:99:66
    |
 97 |             return bool(re.match(regex_pattern, text, re.IGNORECASE))
 98 |         except Exception as exc:
 99 |             logger.exception(f"æ¨¡å¼åŒ¹é…å¤±è´¥: {pattern} -> {text}, é”™è¯¯: {exc}")
    |                                                                          ^^^
100 |             return False
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_filters.py:106:27
    |
105 |         Args:
106 |             db_type: æ•°æ®åº“ç±»åž‹ï¼ŒNoneè¡¨ç¤ºèŽ·å–æ‰€æœ‰è§„åˆ™
    |                                ^^
107 |
108 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/accounts_sync/accounts_sync_service.py:1:10
  |
1 | """è´¦æˆ·åŒæ­¥æœåŠ¡ï¼Œä¸¤é˜¶æ®µåè°ƒå…¥å£ã€‚."""
  |                ^^
2 |
3 | from __future__ import annotations
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/accounts_sync_service.py:22:16
   |
20 |     """è´¦æˆ·åŒæ­¥æœåŠ¡ - ç»Ÿä¸€å…¥å£ã€‚.
21 |
22 |     æä¾›è´¦æˆ·åŒæ­¥çš„ç»Ÿä¸€å…¥å£ï¼Œæ”¯æŒå››ç§åŒæ­¥ç±»åž‹ï¼š
   |                           ^^
23 |     - MANUAL_SINGLE: æ‰‹åŠ¨å•å®žä¾‹åŒæ­¥ï¼ˆæ— ä¼šè¯ï¼‰
24 |     - MANUAL_BATCH: æ‰‹åŠ¨æ‰¹é‡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/accounts_sync/accounts_sync_service.py:22:25
   |
20 |     """è´¦æˆ·åŒæ­¥æœåŠ¡ - ç»Ÿä¸€å…¥å£ã€‚.
21 |
22 |     æä¾›è´¦æˆ·åŒæ­¥çš„ç»Ÿä¸€å…¥å£ï¼Œæ”¯æŒå››ç§åŒæ­¥ç±»åž‹ï¼š
   |                                             ^^
23 |     - MANUAL_SINGLE: æ‰‹åŠ¨å•å®žä¾‹åŒæ­¥ï¼ˆæ— ä¼šè¯ï¼‰
24 |     - MANUAL_BATCH: æ‰‹åŠ¨æ‰¹é‡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/accounts_sync/accounts_sync_service.py:23:29
   |
22 |     æä¾›è´¦æˆ·åŒæ­¥çš„ç»Ÿä¸€å…¥å£ï¼Œæ”¯æŒå››ç§åŒæ­¥ç±»åž‹ï¼š
23 |     - MANUAL_SINGLE: æ‰‹åŠ¨å•å®žä¾‹åŒæ­¥ï¼ˆæ— ä¼šè¯ï¼‰
   |                                    ^^
24 |     - MANUAL_BATCH: æ‰‹åŠ¨æ‰¹é‡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
25 |     - MANUAL_TASK: æ‰‹åŠ¨ä»»åŠ¡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/accounts_sync/accounts_sync_service.py:23:33
   |
22 |     æä¾›è´¦æˆ·åŒæ­¥çš„ç»Ÿä¸€å…¥å£ï¼Œæ”¯æŒå››ç§åŒæ­¥ç±»åž‹ï¼š
23 |     - MANUAL_SINGLE: æ‰‹åŠ¨å•å®žä¾‹åŒæ­¥ï¼ˆæ— ä¼šè¯ï¼‰
   |                                            ^^
24 |     - MANUAL_BATCH: æ‰‹åŠ¨æ‰¹é‡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
25 |     - MANUAL_TASK: æ‰‹åŠ¨ä»»åŠ¡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/accounts_sync/accounts_sync_service.py:24:27
   |
22 |     æä¾›è´¦æˆ·åŒæ­¥çš„ç»Ÿä¸€å…¥å£ï¼Œæ”¯æŒå››ç§åŒæ­¥ç±»åž‹ï¼š
23 |     - MANUAL_SINGLE: æ‰‹åŠ¨å•å®žä¾‹åŒæ­¥ï¼ˆæ— ä¼šè¯ï¼‰
24 |     - MANUAL_BATCH: æ‰‹åŠ¨æ‰¹é‡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
   |                                 ^^
25 |     - MANUAL_TASK: æ‰‹åŠ¨ä»»åŠ¡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
26 |     - SCHEDULED_TASK: å®šæ—¶ä»»åŠ¡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/accounts_sync/accounts_sync_service.py:24:31
   |
22 |     æä¾›è´¦æˆ·åŒæ­¥çš„ç»Ÿä¸€å…¥å£ï¼Œæ”¯æŒå››ç§åŒæ­¥ç±»åž‹ï¼š
23 |     - MANUAL_SINGLE: æ‰‹åŠ¨å•å®žä¾‹åŒæ­¥ï¼ˆæ— ä¼šè¯ï¼‰
24 |     - MANUAL_BATCH: æ‰‹åŠ¨æ‰¹é‡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
   |                                         ^^
25 |     - MANUAL_TASK: æ‰‹åŠ¨ä»»åŠ¡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
26 |     - SCHEDULED_TASK: å®šæ—¶ä»»åŠ¡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/accounts_sync/accounts_sync_service.py:25:26
   |
23 |     - MANUAL_SINGLE: æ‰‹åŠ¨å•å®žä¾‹åŒæ­¥ï¼ˆæ— ä¼šè¯ï¼‰
24 |     - MANUAL_BATCH: æ‰‹åŠ¨æ‰¹é‡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
25 |     - MANUAL_TASK: æ‰‹åŠ¨ä»»åŠ¡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
   |                                ^^
26 |     - SCHEDULED_TASK: å®šæ—¶ä»»åŠ¡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/accounts_sync/accounts_sync_service.py:25:30
   |
23 |     - MANUAL_SINGLE: æ‰‹åŠ¨å•å®žä¾‹åŒæ­¥ï¼ˆæ— ä¼šè¯ï¼‰
24 |     - MANUAL_BATCH: æ‰‹åŠ¨æ‰¹é‡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
25 |     - MANUAL_TASK: æ‰‹åŠ¨ä»»åŠ¡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
   |                                        ^^
26 |     - SCHEDULED_TASK: å®šæ—¶ä»»åŠ¡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/accounts_sync/accounts_sync_service.py:26:29
   |
24 |     - MANUAL_BATCH: æ‰‹åŠ¨æ‰¹é‡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
25 |     - MANUAL_TASK: æ‰‹åŠ¨ä»»åŠ¡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
26 |     - SCHEDULED_TASK: å®šæ—¶ä»»åŠ¡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
   |                                   ^^
27 |
28 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/accounts_sync/accounts_sync_service.py:26:33
   |
24 |     - MANUAL_BATCH: æ‰‹åŠ¨æ‰¹é‡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
25 |     - MANUAL_TASK: æ‰‹åŠ¨ä»»åŠ¡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
26 |     - SCHEDULED_TASK: å®šæ—¶ä»»åŠ¡åŒæ­¥ï¼ˆæœ‰ä¼šè¯ï¼‰
   |                                           ^^
27 |
28 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/accounts_sync_service.py:47:24
   |
45 |         """ç»Ÿä¸€è´¦æˆ·åŒæ­¥å…¥å£ã€‚.
46 |
47 |         æ ¹æ®åŒæ­¥ç±»åž‹æ‰§è¡Œç›¸åº”çš„åŒæ­¥æµç¨‹ï¼Œæ”¯æŒå•å®žä¾‹åŒæ­¥å’Œæ‰¹é‡åŒæ­¥ã€‚
   |                                       ^^
48 |
49 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/accounts_sync_service.py:51:30
   |
49 |         Args:
50 |             instance: æ•°æ®åº“å®žä¾‹å¯¹è±¡ã€‚
51 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¯é€‰å€¼ï¼š'manual_single'ã€'manual_batch'ã€
   |                                    ^^
52 |                 'manual_task'ã€'scheduled_task'ï¼Œé»˜è®¤ä¸º 'manual_single'ã€‚
53 |             session_id: åŒæ­¥ä¼šè¯ IDï¼Œæ‰¹é‡åŒæ­¥æ—¶éœ€è¦æä¾›ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/accounts_sync/accounts_sync_service.py:51:34
   |
49 |         Args:
50 |             instance: æ•°æ®åº“å®žä¾‹å¯¹è±¡ã€‚
51 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¯é€‰å€¼ï¼š'manual_single'ã€'manual_batch'ã€
   |                                            ^^
52 |                 'manual_task'ã€'scheduled_task'ï¼Œé»˜è®¤ä¸º 'manual_single'ã€‚
53 |             session_id: åŒæ­¥ä¼šè¯ IDï¼Œæ‰¹é‡åŒæ­¥æ—¶éœ€è¦æä¾›ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/accounts_sync_service.py:52:47
   |
50 |             instance: æ•°æ®åº“å®žä¾‹å¯¹è±¡ã€‚
51 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¯é€‰å€¼ï¼š'manual_single'ã€'manual_batch'ã€
52 |                 'manual_task'ã€'scheduled_task'ï¼Œé»˜è®¤ä¸º 'manual_single'ã€‚
   |                                                ^^
53 |             session_id: åŒæ­¥ä¼šè¯ IDï¼Œæ‰¹é‡åŒæ­¥æ—¶éœ€è¦æä¾›ã€‚
54 |             created_by: åˆ›å»ºè€…ç”¨æˆ· IDï¼Œæ‰‹åŠ¨åŒæ­¥æ—¶éœ€è¦æä¾›ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/accounts_sync_service.py:53:32
   |
51 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¯é€‰å€¼ï¼š'manual_single'ã€'manual_batch'ã€
52 |                 'manual_task'ã€'scheduled_task'ï¼Œé»˜è®¤ä¸º 'manual_single'ã€‚
53 |             session_id: åŒæ­¥ä¼šè¯ IDï¼Œæ‰¹é‡åŒæ­¥æ—¶éœ€è¦æä¾›ã€‚
   |                                    ^^
54 |             created_by: åˆ›å»ºè€…ç”¨æˆ· IDï¼Œæ‰‹åŠ¨åŒæ­¥æ—¶éœ€è¦æä¾›ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/accounts_sync_service.py:54:33
   |
52 |                 'manual_task'ã€'scheduled_task'ï¼Œé»˜è®¤ä¸º 'manual_single'ã€‚
53 |             session_id: åŒæ­¥ä¼šè¯ IDï¼Œæ‰¹é‡åŒæ­¥æ—¶éœ€è¦æä¾›ã€‚
54 |             created_by: åˆ›å»ºè€…ç”¨æˆ· IDï¼Œæ‰‹åŠ¨åŒæ­¥æ—¶éœ€è¦æä¾›ã€‚
   |                                      ^^
55 |
56 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/accounts_sync_service.py:57:19
   |
56 |         Returns:
57 |             åŒæ­¥ç»“æžœå­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                         ^^
58 |             {
59 |                 'success': True,
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/accounts_sync/accounts_sync_service.py:57:24
   |
56 |         Returns:
57 |             åŒæ­¥ç»“æžœå­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                   ^^
58 |             {
59 |                 'success': True,
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/accounts_sync/accounts_sync_service.py:67:18
   |
65 |                 'details': {...}  # è¯¦ç»†çš„åŒæ­¥ä¿¡æ¯
66 |             }
67 |             å¤±è´¥æ—¶è¿”å›žï¼š
   |                       ^^
68 |             {
69 |                 'success': False,
   |

E501 Line too long (144 > 120)
  --> app/services/accounts_sync/accounts_sync_service.py:95:121
   |
93 | â€¦
94 | â€¦
95 | â€¦ SyncOperationType.MANUAL_TASK.value, SyncOperationType.SCHEDULED_TASK.value]:
   |                                                        ^^^^^^^^^^^^^^^^^^^^^^^^
96 | â€¦
97 | â€¦
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:101:23
    |
 99 |                 # æ‰¹é‡åŒæ­¥æ“ä½œæ–¹å¼éœ€è¦ä¼šè¯ç®¡ç†
100 |                 return self._sync_with_session(instance, sync_type, created_by)
101 |             # æœªçŸ¥åŒæ­¥æ“ä½œæ–¹å¼ï¼Œé»˜è®¤ä½¿ç”¨å•å®žä¾‹åŒæ­¥
    |                               ^^
102 |             return self._sync_single_instance(instance)
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:105:21
    |
104 |         except Exception as e:
105 |             # åˆ†ç±»å¼‚å¸¸å¤„ç†ï¼Œæä¾›æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
    |                           ^^
106 |             error_type = type(e).__name__
107 |             if "JSON" in error_type or "serialization" in str(e).lower():
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:140:22
    |
138 |         """å•å®žä¾‹åŒæ­¥ - æ— ä¼šè¯ç®¡ç†ã€‚.
139 |
140 |         ç”¨äºŽå®žä¾‹é¡µé¢çš„ç›´æŽ¥åŒæ­¥è°ƒç”¨ï¼Œä¸åˆ›å»ºæŒä¹…åŒ–ä¼šè¯è®°å½•ã€‚
    |                                   ^^
141 |         ä½¿ç”¨ä¸´æ—¶ä¼šè¯ ID è¿›è¡ŒåŒæ­¥ï¼Œå®ŒæˆåŽæ›´æ–°å®žä¾‹çš„æœ€åŽè¿žæŽ¥æ—¶é—´ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:141:23
    |
140 |         ç”¨äºŽå®žä¾‹é¡µé¢çš„ç›´æŽ¥åŒæ­¥è°ƒç”¨ï¼Œä¸åˆ›å»ºæŒä¹…åŒ–ä¼šè¯è®°å½•ã€‚
141 |         ä½¿ç”¨ä¸´æ—¶ä¼šè¯ ID è¿›è¡ŒåŒæ­¥ï¼Œå®ŒæˆåŽæ›´æ–°å®žä¾‹çš„æœ€åŽè¿žæŽ¥æ—¶é—´ã€‚
    |                                 ^^
142 |
143 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:147:19
    |
146 |         Returns:
147 |             åŒæ­¥ç»“æžœå­—å…¸ï¼Œæ ¼å¼ä¸Ž sync_accounts æ–¹æ³•ç›¸åŒã€‚
    |                         ^^
148 |
149 |         Raises:
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/accounts_sync/accounts_sync_service.py:167:13
    |
165 |                 result=result,
166 |             )
167 |             return result
    |             ^^^^^^^^^^^^^
168 |         except Exception as exc:
169 |             self.sync_logger.error(
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/accounts_sync/accounts_sync_service.py:169:30
    |
167 |             return result
168 |         except Exception as exc:
169 |             self.sync_logger.error(
    |                              ^^^^^
170 |                 "å•å®žä¾‹åŒæ­¥å¤±è´¥",
171 |                 module="accounts_sync",
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:192:17
    |
190 |         """å¸¦ä¼šè¯ç®¡ç†çš„åŒæ­¥ - ç”¨äºŽæ‰¹é‡åŒæ­¥ã€‚.
191 |
192 |         åˆ›å»ºæ–°çš„åŒæ­¥ä¼šè¯ï¼Œæ‰§è¡ŒåŒæ­¥å¹¶è®°å½•ç»“æžœã€‚ä¼šè¯è®°å½•ä¼šæŒä¹…åŒ–åˆ°æ•°æ®åº“ï¼Œ
    |                         ^^
193 |         ç”¨äºŽè¿½è¸ªæ‰¹é‡åŒæ­¥çš„è¿›åº¦å’Œç»“æžœã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:192:40
    |
190 |         """å¸¦ä¼šè¯ç®¡ç†çš„åŒæ­¥ - ç”¨äºŽæ‰¹é‡åŒæ­¥ã€‚.
191 |
192 |         åˆ›å»ºæ–°çš„åŒæ­¥ä¼šè¯ï¼Œæ‰§è¡ŒåŒæ­¥å¹¶è®°å½•ç»“æžœã€‚ä¼šè¯è®°å½•ä¼šæŒä¹…åŒ–åˆ°æ•°æ®åº“ï¼Œ
    |                                                                       ^^
193 |         ç”¨äºŽè¿½è¸ªæ‰¹é‡åŒæ­¥çš„è¿›åº¦å’Œç»“æžœã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:197:30
    |
195 |         Args:
196 |             instance: æ•°æ®åº“å®žä¾‹å¯¹è±¡ã€‚
197 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¦‚ 'manual_batch'ã€'scheduled_task'ã€‚
    |                                    ^^
198 |             created_by: åˆ›å»ºè€…ç”¨æˆ· IDï¼Œæ‰‹åŠ¨åŒæ­¥æ—¶å¿…é¡»æä¾›ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:198:33
    |
196 |             instance: æ•°æ®åº“å®žä¾‹å¯¹è±¡ã€‚
197 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¦‚ 'manual_batch'ã€'scheduled_task'ã€‚
198 |             created_by: åˆ›å»ºè€…ç”¨æˆ· IDï¼Œæ‰‹åŠ¨åŒæ­¥æ—¶å¿…é¡»æä¾›ã€‚
    |                                      ^^
199 |
200 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:201:19
    |
200 |         Returns:
201 |             åŒæ­¥ç»“æžœå­—å…¸ï¼Œæ ¼å¼ä¸Ž sync_accounts æ–¹æ³•ç›¸åŒã€‚
    |                         ^^
202 |
203 |         Raises:
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/accounts_sync/accounts_sync_service.py:247:13
    |
245 |                 )
246 |
247 |             return result
    |             ^^^^^^^^^^^^^
248 |
249 |         except Exception as e:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:278:25
    |
276 |         """ä½¿ç”¨çŽ°æœ‰ä¼šè¯ ID è¿›è¡ŒåŒæ­¥ã€‚.
277 |
278 |         åœ¨å·²æœ‰ä¼šè¯çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡ŒåŒæ­¥æ“ä½œï¼Œç”¨äºŽæ‰¹é‡åŒæ­¥åœºæ™¯ä¸­çš„å•ä¸ªå®žä¾‹åŒæ­¥ã€‚
    |                                         ^^
279 |
280 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:282:34
    |
280 |         Args:
281 |             instance: æ•°æ®åº“å®žä¾‹å¯¹è±¡ã€‚
282 |             session_id: å·²å­˜åœ¨çš„ä¼šè¯ IDï¼Œç”¨äºŽå…³è”åŒæ­¥è®°å½•ã€‚
    |                                        ^^
283 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¯é€‰ï¼Œç”¨äºŽæ—¥å¿—è®°å½•ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:283:30
    |
281 |             instance: æ•°æ®åº“å®žä¾‹å¯¹è±¡ã€‚
282 |             session_id: å·²å­˜åœ¨çš„ä¼šè¯ IDï¼Œç”¨äºŽå…³è”åŒæ­¥è®°å½•ã€‚
283 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¯é€‰ï¼Œç”¨äºŽæ—¥å¿—è®°å½•ã€‚
    |                                    ^^
284 |
285 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:283:33
    |
281 |             instance: æ•°æ®åº“å®žä¾‹å¯¹è±¡ã€‚
282 |             session_id: å·²å­˜åœ¨çš„ä¼šè¯ IDï¼Œç”¨äºŽå…³è”åŒæ­¥è®°å½•ã€‚
283 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¯é€‰ï¼Œç”¨äºŽæ—¥å¿—è®°å½•ã€‚
    |                                          ^^
284 |
285 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:286:19
    |
285 |         Returns:
286 |             åŒæ­¥ç»“æžœå­—å…¸ï¼Œæ ¼å¼ä¸Ž sync_accounts æ–¹æ³•ç›¸åŒã€‚
    |                         ^^
287 |
288 |         Raises:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:289:36
    |
288 |         Raises:
289 |             Exception: åŒæ­¥è¿‡ç¨‹ä¸­çš„å¼‚å¸¸ä¼šè¢«æ•èŽ·ï¼Œæ•°æ®åº“ä¼šå›žæ»šã€‚
    |                                                ^^
290 |
291 |         """
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/accounts_sync/accounts_sync_service.py:305:13
    |
303 |                 result=result,
304 |             )
305 |             return result
    |             ^^^^^^^^^^^^^
306 |         except Exception as exc:
307 |             db.session.rollback()
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/accounts_sync/accounts_sync_service.py:308:30
    |
306 |         except Exception as exc:
307 |             db.session.rollback()
308 |             self.sync_logger.error(
    |                              ^^^^^
309 |                 "çŽ°æœ‰ä¼šè¯åŒæ­¥å¤±è´¥",
310 |                 module="accounts_sync",
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:331:23
    |
329 |         """æž„å»ºåŒæ­¥ç»“æžœå­—å…¸ã€‚.
330 |
331 |         ä»ŽåŒæ­¥æ±‡æ€»ä¿¡æ¯ä¸­æå–å…³é”®æŒ‡æ ‡ï¼Œæž„å»ºç»Ÿä¸€çš„ç»“æžœæ ¼å¼ã€‚
    |                                     ^^
332 |
333 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:334:28
    |
333 |         Args:
334 |             summary: åŒæ­¥æ±‡æ€»ä¿¡æ¯ï¼ŒåŒ…å« inventory å’Œ collection ä¸¤éƒ¨åˆ†ã€‚
    |                                  ^^
335 |
336 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/accounts_sync_service.py:388:30
    |
386 |         Args:
387 |             instance: æ•°æ®åº“å®žä¾‹å¯¹è±¡ã€‚
388 |             session_id: ä¼šè¯ IDï¼Œå¯é€‰ã€‚
    |                                ^^
389 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ã€‚
390 |             result: åŒæ­¥ç»“æžœå­—å…¸ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/services/accounts_sync/adapters/__init__.py:5:5
  |
3 | æä¾›å„ç§æ•°æ®åº“ç±»åž‹çš„è´¦æˆ·åŒæ­¥é€‚é…å™¨å®žçŽ°ã€‚
4 |
5 | ä¸»è¦ç»„ä»¶ï¼š
  |         ^^
6 | - BaseAccountAdapter: è´¦æˆ·åŒæ­¥é€‚é…å™¨åŸºç±»
7 | - MySQLAccountAdapter: MySQL è´¦æˆ·åŒæ­¥é€‚é…å™¨
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/accounts_sync/adapters/base_adapter.py:1:15
  |
1 | """è´¦æˆ·åŒæ­¥é€‚é…å™¨åŸºç¡€å®šä¹‰ï¼Œæä¾›ç»Ÿä¸€çš„æŠ“å–/å½’ä¸€åŒ–æŽ¥å£ã€‚."""
  |                          ^^
2 |
3 | from __future__ import annotations
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/adapters/base_adapter.py:15:17
   |
14 | class BaseAccountAdapter(ABC):
15 |     """è´¦æˆ·åŒæ­¥é€‚é…å™¨åŸºç±»ï¼Œè´Ÿè´£æŠ½è±¡è¿œç«¯è´¦æˆ·æ•°æ®æŠ“å–ã€‚."""
   |                          ^^
16 |
17 |     def fetch_remote_accounts(self, instance: Instance, connection: Any) -> list[dict[str, Any]]:
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
  --> app/services/accounts_sync/adapters/base_adapter.py:17:69
   |
15 |     """è´¦æˆ·åŒæ­¥é€‚é…å™¨åŸºç±»ï¼Œè´Ÿè´£æŠ½è±¡è¿œç«¯è´¦æˆ·æ•°æ®æŠ“å–ã€‚."""
16 |
17 |     def fetch_remote_accounts(self, instance: Instance, connection: Any) -> list[dict[str, Any]]:
   |                                                                     ^^^
18 |         """æ‹‰å–è¿œç«¯è´¦æˆ·ä¿¡æ¯ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/adapters/base_adapter.py:25:44
   |
24 |         Returns:
25 |             list[dict[str, Any]]: å·²æ ‡å‡†åŒ–çš„è´¦æˆ·åˆ—è¡¨ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
   |                                                     ^^
26 |                 - username: å”¯ä¸€æ ‡è¯†ï¼ˆå¯å«ä¸»æœºï¼‰
27 |                 - display_name: å¯é€‰ï¼Œå±•ç¤ºç”¨
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/accounts_sync/adapters/base_adapter.py:25:51
   |
24 |         Returns:
25 |             list[dict[str, Any]]: å·²æ ‡å‡†åŒ–çš„è´¦æˆ·åˆ—è¡¨ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
   |                                                                   ^^
26 |                 - username: å”¯ä¸€æ ‡è¯†ï¼ˆå¯å«ä¸»æœºï¼‰
27 |                 - display_name: å¯é€‰ï¼Œå±•ç¤ºç”¨
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/accounts_sync/adapters/base_adapter.py:26:33
   |
24 |         Returns:
25 |             list[dict[str, Any]]: å·²æ ‡å‡†åŒ–çš„è´¦æˆ·åˆ—è¡¨ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
26 |                 - username: å”¯ä¸€æ ‡è¯†ï¼ˆå¯å«ä¸»æœºï¼‰
   |                                     ^^
27 |                 - display_name: å¯é€‰ï¼Œå±•ç¤ºç”¨
28 |                 - is_superuser: æ˜¯å¦è¶…çº§ç”¨æˆ·
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/accounts_sync/adapters/base_adapter.py:26:38
   |
24 |         Returns:
25 |             list[dict[str, Any]]: å·²æ ‡å‡†åŒ–çš„è´¦æˆ·åˆ—è¡¨ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
26 |                 - username: å”¯ä¸€æ ‡è¯†ï¼ˆå¯å«ä¸»æœºï¼‰
   |                                               ^^
27 |                 - display_name: å¯é€‰ï¼Œå±•ç¤ºç”¨
28 |                 - is_superuser: æ˜¯å¦è¶…çº§ç”¨æˆ·
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/adapters/base_adapter.py:27:35
   |
25 |             list[dict[str, Any]]: å·²æ ‡å‡†åŒ–çš„è´¦æˆ·åˆ—è¡¨ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
26 |                 - username: å”¯ä¸€æ ‡è¯†ï¼ˆå¯å«ä¸»æœºï¼‰
27 |                 - display_name: å¯é€‰ï¼Œå±•ç¤ºç”¨
   |                                     ^^
28 |                 - is_superuser: æ˜¯å¦è¶…çº§ç”¨æˆ·
29 |                 - is_active: æ˜¯å¦æ´»è·ƒ
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/accounts_sync/adapters/base_adapter.py:30:35
   |
28 |                 - is_superuser: æ˜¯å¦è¶…çº§ç”¨æˆ·
29 |                 - is_active: æ˜¯å¦æ´»è·ƒ
30 |                 - attributes: é™„åŠ ä¿¡æ¯ï¼ˆé”å®šçŠ¶æ€ã€ä¸»æœºç­‰ï¼‰
   |                                       ^^
31 |                 - permissions: æ ‡å‡†åŒ–æƒé™å¿«ç…§
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/accounts_sync/adapters/base_adapter.py:30:44
   |
28 |                 - is_superuser: æ˜¯å¦è¶…çº§ç”¨æˆ·
29 |                 - is_active: æ˜¯å¦æ´»è·ƒ
30 |                 - attributes: é™„åŠ ä¿¡æ¯ï¼ˆé”å®šçŠ¶æ€ã€ä¸»æœºç­‰ï¼‰
   |                                                         ^^
31 |                 - permissions: æ ‡å‡†åŒ–æƒé™å¿«ç…§
   |

PERF401 Use a list comprehension to create a transformed list
  --> app/services/accounts_sync/adapters/base_adapter.py:37:13
   |
35 |         normalized: list[dict[str, Any]] = []
36 |         for account in raw_accounts:
37 |             normalized.append(self._normalize_account(instance, account))
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
38 |         return normalized
   |
help: Replace for loop with list comprehension

ARG002 Unused method argument: `instance`
  --> app/services/accounts_sync/adapters/base_adapter.py:42:9
   |
40 |     def enrich_permissions(
41 |         self,
42 |         instance: Instance,
   |         ^^^^^^^^
43 |         connection: Any,
44 |         accounts: list[dict[str, Any]],
   |

ARG002 Unused method argument: `connection`
  --> app/services/accounts_sync/adapters/base_adapter.py:43:9
   |
41 |         self,
42 |         instance: Instance,
43 |         connection: Any,
   |         ^^^^^^^^^^
44 |         accounts: list[dict[str, Any]],
45 |         *,
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
  --> app/services/accounts_sync/adapters/base_adapter.py:43:21
   |
41 |         self,
42 |         instance: Instance,
43 |         connection: Any,
   |                     ^^^
44 |         accounts: list[dict[str, Any]],
45 |         *,
   |

ARG002 Unused method argument: `usernames`
  --> app/services/accounts_sync/adapters/base_adapter.py:46:9
   |
44 |         accounts: list[dict[str, Any]],
45 |         *,
46 |         usernames: Sequence[str] | None = None,
   |         ^^^^^^^^^
47 |     ) -> list[dict[str, Any]]:
48 |         """ä¸ºè´¦å·åˆ—è¡¨è¡¥å…¨æƒé™ä¿¡æ¯ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/adapters/base_adapter.py:54:26
   |
52 |             connection: æ•°æ®åº“è¿žæŽ¥ã€‚
53 |             accounts: éœ€è¦è¡¥å…¨æƒé™çš„è´¦æˆ·åˆ—è¡¨ã€‚
54 |             usernames: å¯é€‰ï¼Œä»…å¯¹æŒ‡å®šç”¨æˆ·åæ‰§è¡Œè¡¥å…¨ã€‚
   |                            ^^
55 |
56 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/adapters/base_adapter.py:59:20
   |
57 |             list[dict[str, Any]]: åŒ…å«æƒé™ä¿¡æ¯çš„è´¦æˆ·åˆ—è¡¨ã€‚
58 |
59 |         é»˜è®¤å®žçŽ°ç›´æŽ¥è¿”å›žåŽŸåˆ—è¡¨ï¼Œé€‚ç”¨äºŽåœ¨ ``_fetch_raw_accounts`` é˜¶æ®µå·²ç»å¡«å……
   |                               ^^
60 |         ``permissions`` çš„é€‚é…å™¨ã€‚è‹¥éœ€è¦æŒ‰éœ€åŠ è½½æƒé™ï¼ˆä¾‹å¦‚ SQL Serverï¼‰ï¼Œè¯·åœ¨å…·ä½“
61 |         é€‚é…å™¨ä¸­é‡å†™è¯¥æ–¹æ³•ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/accounts_sync/adapters/base_adapter.py:60:39
   |
59 |         é»˜è®¤å®žçŽ°ç›´æŽ¥è¿”å›žåŽŸåˆ—è¡¨ï¼Œé€‚ç”¨äºŽåœ¨ ``_fetch_raw_accounts`` é˜¶æ®µå·²ç»å¡«å……
60 |         ``permissions`` çš„é€‚é…å™¨ã€‚è‹¥éœ€è¦æŒ‰éœ€åŠ è½½æƒé™ï¼ˆä¾‹å¦‚ SQL Serverï¼‰ï¼Œè¯·åœ¨å…·ä½“
   |                                                     ^^
61 |         é€‚é…å™¨ä¸­é‡å†™è¯¥æ–¹æ³•ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/accounts_sync/adapters/base_adapter.py:60:53
   |
59 |         é»˜è®¤å®žçŽ°ç›´æŽ¥è¿”å›žåŽŸåˆ—è¡¨ï¼Œé€‚ç”¨äºŽåœ¨ ``_fetch_raw_accounts`` é˜¶æ®µå·²ç»å¡«å……
60 |         ``permissions`` çš„é€‚é…å™¨ã€‚è‹¥éœ€è¦æŒ‰éœ€åŠ è½½æƒé™ï¼ˆä¾‹å¦‚ SQL Serverï¼‰ï¼Œè¯·åœ¨å…·ä½“
   |                                                                      ^^
61 |         é€‚é…å™¨ä¸­é‡å†™è¯¥æ–¹æ³•ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/adapters/base_adapter.py:60:54
   |
59 |         é»˜è®¤å®žçŽ°ç›´æŽ¥è¿”å›žåŽŸåˆ—è¡¨ï¼Œé€‚ç”¨äºŽåœ¨ ``_fetch_raw_accounts`` é˜¶æ®µå·²ç»å¡«å……
60 |         ``permissions`` çš„é€‚é…å™¨ã€‚è‹¥éœ€è¦æŒ‰éœ€åŠ è½½æƒé™ï¼ˆä¾‹å¦‚ SQL Serverï¼‰ï¼Œè¯·åœ¨å…·ä½“
   |                                                                        ^^
61 |         é€‚é…å™¨ä¸­é‡å†™è¯¥æ–¹æ³•ã€‚
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
  --> app/services/accounts_sync/adapters/base_adapter.py:67:67
   |
66 |     @abstractmethod
67 |     def _fetch_raw_accounts(self, instance: Instance, connection: Any) -> list[dict[str, Any]]:
   |                                                                   ^^^
68 |         """å…·ä½“æ•°æ®åº“å®žçŽ°è´Ÿè´£æŸ¥è¯¢è´¦æˆ·åˆ—è¡¨ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/accounts_sync/adapters/base_adapter.py:75:41
   |
74 |         Returns:
75 |             list[dict[str, Any]]: åŽŸå§‹è´¦æˆ·æ•°æ®ï¼ˆå°šæœªæ ‡å‡†åŒ–ï¼‰ã€‚
   |                                               ^^
76 |
77 |         """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/accounts_sync/adapters/base_adapter.py:75:47
   |
74 |         Returns:
75 |             list[dict[str, Any]]: åŽŸå§‹è´¦æˆ·æ•°æ®ï¼ˆå°šæœªæ ‡å‡†åŒ–ï¼‰ã€‚
   |                                                           ^^
76 |
77 |         """
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/accounts_sync/adapters/factory.py:32:23
   |
31 |     Args:
32 |         db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysqlã€postgresqlã€sqlserverã€oracleï¼‰ã€‚
   |                            ^^
33 |
34 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/accounts_sync/adapters/factory.py:32:57
   |
31 |     Args:
32 |         db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysqlã€postgresqlã€sqlserverã€oracleï¼‰ã€‚
   |                                                                  ^^
33 |
34 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
 --> app/services/accounts_sync/adapters/mysql_adapter.py:1:16
  |
1 | """MySQLè´¦æˆ·åŒæ­¥é€‚é…å™¨ï¼ˆä¸¤é˜¶æ®µç‰ˆï¼‰."""
  |                       ^^
2 |
3 | from __future__ import annotations
  |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
 --> app/services/accounts_sync/adapters/mysql_adapter.py:1:21
  |
1 | """MySQLè´¦æˆ·åŒæ­¥é€‚é…å™¨ï¼ˆä¸¤é˜¶æ®µç‰ˆï¼‰."""
  |                                 ^^
2 |
3 | from __future__ import annotations
  |

D107 Missing docstring in `__init__`
  --> app/services/accounts_sync/adapters/mysql_adapter.py:37:9
   |
35 |     """
36 |
37 |     def __init__(self) -> None:
   |         ^^^^^^^^
38 |         self.logger = get_sync_logger()
39 |         self.filter_manager = DatabaseFilterManager()
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
  --> app/services/accounts_sync/adapters/mysql_adapter.py:44:67
   |
42 |     # BaseAccountAdapter å®žçŽ°
43 |     # ------------------------------------------------------------------
44 |     def _fetch_raw_accounts(self, instance: Instance, connection: Any) -> list[dict[str, Any]]:
   |                                                                   ^^^
45 |         """æ‹‰å– MySQL åŽŸå§‹è´¦æˆ·ä¿¡æ¯ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/adapters/mysql_adapter.py:47:32
   |
45 |         """æ‹‰å– MySQL åŽŸå§‹è´¦æˆ·ä¿¡æ¯ã€‚.
46 |
47 |         ä»Ž mysql.user è¡¨ä¸­æŸ¥è¯¢è´¦æˆ·åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·åã€ä¸»æœºã€è¶…çº§ç”¨æˆ·æ ‡å¿—ç­‰ã€‚
   |                                           ^^
48 |
49 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/adapters/mysql_adapter.py:54:21
   |
53 |         Returns:
54 |             åŽŸå§‹è´¦æˆ·ä¿¡æ¯åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                             ^^
55 |             - username: å”¯ä¸€ç”¨æˆ·åï¼ˆæ ¼å¼ï¼šuser@hostï¼‰
56 |             - original_username: åŽŸå§‹ç”¨æˆ·å
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/accounts_sync/adapters/mysql_adapter.py:54:28
   |
53 |         Returns:
54 |             åŽŸå§‹è´¦æˆ·ä¿¡æ¯åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                                           ^^
55 |             - username: å”¯ä¸€ç”¨æˆ·åï¼ˆæ ¼å¼ï¼šuser@hostï¼‰
56 |             - original_username: åŽŸå§‹ç”¨æˆ·å
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/accounts_sync/adapters/mysql_adapter.py:55:30
   |
53 |         Returns:
54 |             åŽŸå§‹è´¦æˆ·ä¿¡æ¯åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
55 |             - username: å”¯ä¸€ç”¨æˆ·åï¼ˆæ ¼å¼ï¼šuser@hostï¼‰
   |                                   ^^
56 |             - original_username: åŽŸå§‹ç”¨æˆ·å
57 |             - host: ä¸»æœºå
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/accounts_sync/adapters/mysql_adapter.py:55:33
   |
53 |         Returns:
54 |             åŽŸå§‹è´¦æˆ·ä¿¡æ¯åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
55 |             - username: å”¯ä¸€ç”¨æˆ·åï¼ˆæ ¼å¼ï¼šuser@hostï¼‰
   |                                         ^^
56 |             - original_username: åŽŸå§‹ç”¨æˆ·å
57 |             - host: ä¸»æœºå
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/accounts_sync/adapters/mysql_adapter.py:55:43
   |
53 |         Returns:
54 |             åŽŸå§‹è´¦æˆ·ä¿¡æ¯åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
55 |             - username: å”¯ä¸€ç”¨æˆ·åï¼ˆæ ¼å¼ï¼šuser@hostï¼‰
   |                                                    ^^
56 |             - original_username: åŽŸå§‹ç”¨æˆ·å
57 |             - host: ä¸»æœºå
   |

S608 Possible SQL injection vector through string-based query construction
  --> app/services/accounts_sync/adapters/mysql_adapter.py:78:17
   |
76 |               where_clause, params = self._build_filter_conditions()
77 |               user_sql = (
78 | /                 "SELECT "
79 | |                 "    User as username, "
80 | |                 "    Host as host, "
81 | |                 "    Super_priv as is_superuser, "
82 | |                 "    account_locked as is_locked, "
83 | |                 "    Grant_priv as can_grant, "
84 | |                 "    plugin as plugin, "
85 | |                 "    password_last_changed as password_last_changed "
86 | |                 "FROM mysql.user "
87 | |                 f"WHERE User != '' AND {where_clause} "
88 | |                 "ORDER BY User, Host"
   | |_____________________________________^
89 |               )
90 |               users = connection.execute_query(user_sql, params)
   |

TRY300 Consider moving this statement to an `else` block
   --> app/services/accounts_sync/adapters/mysql_adapter.py:124:13
    |
122 |                 account_count=len(accounts),
123 |             )
124 |             return accounts
    |             ^^^^^^^^^^^^^^^
125 |         except Exception as exc:
126 |             self.logger.error(
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/accounts_sync/adapters/mysql_adapter.py:126:25
    |
124 |             return accounts
125 |         except Exception as exc:
126 |             self.logger.error(
    |                         ^^^^^
127 |                 "fetch_mysql_accounts_failed",
128 |                 module="mysql_account_adapter",
    |

ARG002 Unused method argument: `instance`
   --> app/services/accounts_sync/adapters/mysql_adapter.py:135:34
    |
133 |             return []
134 |
135 |     def _normalize_account(self, instance: Instance, account: dict[str, Any]) -> dict[str, Any]:
    |                                  ^^^^^^^^
136 |         """è§„èŒƒåŒ– MySQL è´¦æˆ·ä¿¡æ¯ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/mysql_adapter.py:145:24
    |
144 |         Returns:
145 |             è§„èŒƒåŒ–åŽçš„è´¦æˆ·ä¿¡æ¯å­—å…¸ï¼ŒåŒ…å«ï¼š
    |                                   ^^
146 |             - username: å”¯ä¸€ç”¨æˆ·å
147 |             - display_name: æ˜¾ç¤ºåç§°
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/accounts_sync/adapters/mysql_adapter.py:145:27
    |
144 |         Returns:
145 |             è§„èŒƒåŒ–åŽçš„è´¦æˆ·ä¿¡æ¯å­—å…¸ï¼ŒåŒ…å«ï¼š
    |                                         ^^
146 |             - username: å”¯ä¸€ç”¨æˆ·å
147 |             - display_name: æ˜¾ç¤ºåç§°
    |

E501 Line too long (136 > 120)
   --> app/services/accounts_sync/adapters/mysql_adapter.py:189:121
    |
187 | â€¦ysql")
188 | â€¦
189 | â€¦_rules.get("exclude_users", []), filter_rules.get("exclude_patterns", []))
    |                                                            ^^^^^^^^^^^^^^^^
190 | â€¦
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/mysql_adapter.py:192:49
    |
190 |         return builder.build_where_clause()
191 |
192 |     def _get_user_permissions(self, connection: Any, username: str, host: str) -> dict[str, Any]:
    |                                                 ^^^
193 |         """èŽ·å– MySQL ç”¨æˆ·æƒé™è¯¦æƒ…ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/mysql_adapter.py:203:19
    |
202 |         Returns:
203 |             æƒé™ä¿¡æ¯å­—å…¸ï¼ŒåŒ…å«ï¼š
    |                         ^^
204 |             - global_privileges: å…¨å±€æƒé™åˆ—è¡¨
205 |             - database_privileges: æ•°æ®åº“çº§æƒé™å­—å…¸
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/accounts_sync/adapters/mysql_adapter.py:203:22
    |
202 |         Returns:
203 |             æƒé™ä¿¡æ¯å­—å…¸ï¼ŒåŒ…å«ï¼š
    |                               ^^
204 |             - global_privileges: å…¨å±€æƒé™åˆ—è¡¨
205 |             - database_privileges: æ•°æ®åº“çº§æƒé™å­—å…¸
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/accounts_sync/adapters/mysql_adapter.py:244:13
    |
242 |                       },
243 |                   )
244 | /             return {
245 | |                 "global_privileges": global_privileges,
246 | |                 "database_privileges": database_privileges,
247 | |                 "type_specific": type_specific,
248 | |             }
    | |_____________^
249 |           except Exception as exc:
250 |               self.logger.error(
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/accounts_sync/adapters/mysql_adapter.py:250:25
    |
248 |             }
249 |         except Exception as exc:
250 |             self.logger.error(
    |                         ^^^^^
251 |                 "fetch_mysql_permissions_failed",
252 |                 module="mysql_account_adapter",
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/mysql_adapter.py:267:21
    |
265 |         self,
266 |         instance: Instance,
267 |         connection: Any,
    |                     ^^^
268 |         accounts: list[dict[str, Any]],
269 |         *,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/mysql_adapter.py:274:23
    |
272 |         """ä¸°å¯Œ MySQL è´¦æˆ·çš„æƒé™ä¿¡æ¯ã€‚.
273 |
274 |         ä¸ºæŒ‡å®šè´¦æˆ·æŸ¥è¯¢è¯¦ç»†çš„æƒé™ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¨å±€æƒé™å’Œæ•°æ®åº“çº§æƒé™ã€‚
    |                                     ^^
275 |
276 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/mysql_adapter.py:280:43
    |
278 |             connection: MySQL æ•°æ®åº“è¿žæŽ¥å¯¹è±¡ã€‚
279 |             accounts: è´¦æˆ·ä¿¡æ¯åˆ—è¡¨ã€‚
280 |             usernames: å¯é€‰çš„ç›®æ ‡ç”¨æˆ·ååˆ—è¡¨ã€‚å¦‚æžœä¸º Noneï¼Œå¤„ç†æ‰€æœ‰è´¦æˆ·ã€‚
    |                                                         ^^
281 |
282 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/mysql_adapter.py:283:23
    |
282 |         Returns:
283 |             ä¸°å¯ŒåŽçš„è´¦æˆ·ä¿¡æ¯åˆ—è¡¨ï¼Œæ¯ä¸ªè´¦æˆ·çš„ permissions å­—æ®µåŒ…å«è¯¦ç»†æƒé™ã€‚
    |                                 ^^
284 |
285 |         Example:
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/accounts_sync/adapters/mysql_adapter.py:323:29
    |
321 |                 )
322 |             except Exception as exc:
323 |                 self.logger.error(
    |                             ^^^^^
324 |                     "fetch_mysql_permissions_failed",
325 |                     module="mysql_account_adapter",
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/mysql_adapter.py:350:26
    |
348 |         """è§£æž MySQL GRANT è¯­å¥ã€‚.
349 |
350 |         ä»Ž GRANT è¯­å¥ä¸­æå–æƒé™ä¿¡æ¯ï¼Œå¹¶åˆ†ç±»ä¸ºå…¨å±€æƒé™æˆ–æ•°æ®åº“çº§æƒé™ã€‚
    |                                    ^^
351 |
352 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/accounts_sync/adapters/mysql_adapter.py:354:38
    |
352 |         Args:
353 |             grant_statement: GRANT è¯­å¥å­—ç¬¦ä¸²ã€‚
354 |             global_privileges: å…¨å±€æƒé™åˆ—è¡¨ï¼ˆä¼šè¢«ä¿®æ”¹ï¼‰ã€‚
    |                                            ^^
355 |             database_privileges: æ•°æ®åº“çº§æƒé™å­—å…¸ï¼ˆä¼šè¢«ä¿®æ”¹ï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/accounts_sync/adapters/mysql_adapter.py:354:43
    |
352 |         Args:
353 |             grant_statement: GRANT è¯­å¥å­—ç¬¦ä¸²ã€‚
354 |             global_privileges: å…¨å±€æƒé™åˆ—è¡¨ï¼ˆä¼šè¢«ä¿®æ”¹ï¼‰ã€‚
    |                                                      ^^
355 |             database_privileges: æ•°æ®åº“çº§æƒé™å­—å…¸ï¼ˆä¼šè¢«ä¿®æ”¹ï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/accounts_sync/adapters/mysql_adapter.py:355:42
    |
353 |             grant_statement: GRANT è¯­å¥å­—ç¬¦ä¸²ã€‚
354 |             global_privileges: å…¨å±€æƒé™åˆ—è¡¨ï¼ˆä¼šè¢«ä¿®æ”¹ï¼‰ã€‚
355 |             database_privileges: æ•°æ®åº“çº§æƒé™å­—å…¸ï¼ˆä¼šè¢«ä¿®æ”¹ï¼‰ã€‚
    |                                                  ^^
356 |
357 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/accounts_sync/adapters/mysql_adapter.py:355:47
    |
353 |             grant_statement: GRANT è¯­å¥å­—ç¬¦ä¸²ã€‚
354 |             global_privileges: å…¨å±€æƒé™åˆ—è¡¨ï¼ˆä¼šè¢«ä¿®æ”¹ï¼‰ã€‚
355 |             database_privileges: æ•°æ®åº“çº§æƒé™å­—å…¸ï¼ˆä¼šè¢«ä¿®æ”¹ï¼‰ã€‚
    |                                                            ^^
356 |
357 |         Returns:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/accounts_sync/adapters/mysql_adapter.py:395:16
    |
393 |                     existing.append("GRANT OPTION")
394 |                 return
395 |         except Exception as exc:
    |                ^^^^^^^^^
396 |             self.logger.warning(
397 |                 "mysql_parse_grant_failed",
    |

FBT001 Boolean-typed positional argument in function definition
   --> app/services/accounts_sync/adapters/mysql_adapter.py:420:38
    |
418 |         return [priv.strip().upper() for priv in privileges_part.split(",") if priv.strip()]
419 |
420 |     def _expand_all_privileges(self, is_global: bool) -> list[str]:
    |                                      ^^^^^^^^^
421 |         """è¿”å›ž ALL PRIVILEGES å±•å¼€çš„æƒé™åˆ—è¡¨ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/mysql_adapter.py:424:35
    |
423 |         Args:
424 |             is_global: True è¡¨ç¤ºå…¨å±€æƒé™ï¼ŒFalse è¡¨ç¤ºæ•°æ®åº“çº§æƒé™ã€‚
    |                                         ^^
425 |
426 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
 --> app/services/accounts_sync/adapters/oracle_adapter.py:1:18
  |
1 | """Oracle è´¦æˆ·åŒæ­¥é€‚é…å™¨ï¼ˆä¸¤é˜¶æ®µç‰ˆï¼‰ã€‚."""
  |                         ^^
2 |
3 | from __future__ import annotations
  |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
 --> app/services/accounts_sync/adapters/oracle_adapter.py:1:23
  |
1 | """Oracle è´¦æˆ·åŒæ­¥é€‚é…å™¨ï¼ˆä¸¤é˜¶æ®µç‰ˆï¼‰ã€‚."""
  |                                   ^^
2 |
3 | from __future__ import annotations
  |

D107 Missing docstring in `__init__`
  --> app/services/accounts_sync/adapters/oracle_adapter.py:35:9
   |
33 |     """
34 |
35 |     def __init__(self) -> None:
   |         ^^^^^^^^
36 |         self.logger = get_sync_logger()
37 |         self.filter_manager = DatabaseFilterManager()
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
  --> app/services/accounts_sync/adapters/oracle_adapter.py:39:67
   |
37 |         self.filter_manager = DatabaseFilterManager()
38 |
39 |     def _fetch_raw_accounts(self, instance: Instance, connection: Any) -> list[dict[str, Any]]:
   |                                                                   ^^^
40 |         """æ‹‰å– Oracle åŽŸå§‹è´¦æˆ·ä¿¡æ¯ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/adapters/oracle_adapter.py:49:21
   |
48 |         Returns:
49 |             åŽŸå§‹è´¦æˆ·ä¿¡æ¯åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ç”¨æˆ·åã€è´¦æˆ·çŠ¶æ€ã€é»˜è®¤è¡¨ç©ºé—´ç­‰ã€‚
   |                             ^^
50 |
51 |         """
   |

TRY300 Consider moving this statement to an `else` block
  --> app/services/accounts_sync/adapters/oracle_adapter.py:78:13
   |
76 |                 account_count=len(accounts),
77 |             )
78 |             return accounts
   |             ^^^^^^^^^^^^^^^
79 |         except Exception as exc:
80 |             self.logger.error(
   |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
  --> app/services/accounts_sync/adapters/oracle_adapter.py:80:25
   |
78 |             return accounts
79 |         except Exception as exc:
80 |             self.logger.error(
   |                         ^^^^^
81 |                 "fetch_oracle_accounts_failed",
82 |                 module="oracle_account_adapter",
   |

ARG002 Unused method argument: `instance`
  --> app/services/accounts_sync/adapters/oracle_adapter.py:89:34
   |
87 |             return []
88 |
89 |     def _normalize_account(self, instance: Instance, account: dict[str, Any]) -> dict[str, Any]:
   |                                  ^^^^^^^^
90 |         """è§„èŒƒåŒ– Oracle è´¦æˆ·ä¿¡æ¯ã€‚.
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/oracle_adapter.py:124:40
    |
123 |     # ------------------------------------------------------------------
124 |     def _fetch_users(self, connection: Any) -> list[dict[str, Any]]:
    |                                        ^^^
125 |         """è¯»å– Oracle ç”¨æˆ·åˆ—è¡¨ã€‚.
    |

S608 Possible SQL injection vector through string-based query construction
   --> app/services/accounts_sync/adapters/oracle_adapter.py:139:13
    |
138 |           sql = (
139 | /             "SELECT username, account_status, default_tablespace "
140 | |             "FROM dba_users "
141 | |             f"WHERE username NOT IN ({placeholders})"
    | |_____________________________________________________^
142 |           )
143 |           params = {f":{i+1}": user for i, user in enumerate(exclude_users)}
    |

PERF401 Use a list comprehension to create a transformed list
   --> app/services/accounts_sync/adapters/oracle_adapter.py:147:13
    |
145 |           results: list[dict[str, Any]] = []
146 |           for row in rows:
147 | /             results.append(
148 | |                 {
149 | |                     "username": row[0],
150 | |                     "account_status": row[1],
151 | |                     "default_tablespace": row[2],
152 | |                     "is_dba": row[0] == "SYS",
153 | |                 },
154 | |             )
    | |_____________^
155 |           return results
    |
help: Replace for loop with list comprehension

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/oracle_adapter.py:157:49
    |
155 |         return results
156 |
157 |     def _get_user_permissions(self, connection: Any, username: str) -> dict[str, Any]:
    |                                                 ^^^
158 |         """æŸ¥è¯¢å•ä¸ªç”¨æˆ·çš„æƒé™å¿«ç…§ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/oracle_adapter.py:178:21
    |
176 |         self,
177 |         instance: Instance,
178 |         connection: Any,
    |                     ^^^
179 |         accounts: list[dict[str, Any]],
180 |         *,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/oracle_adapter.py:185:23
    |
183 |         """ä¸°å¯Œ Oracle è´¦æˆ·çš„æƒé™ä¿¡æ¯ã€‚.
184 |
185 |         ä¸ºæŒ‡å®šè´¦æˆ·æŸ¥è¯¢è¯¦ç»†çš„æƒé™ä¿¡æ¯ï¼ŒåŒ…æ‹¬è§’è‰²ã€ç³»ç»Ÿæƒé™ã€è¡¨ç©ºé—´é…é¢ç­‰ã€‚
    |                                     ^^
186 |
187 |         Args:
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/accounts_sync/adapters/oracle_adapter.py:215:29
    |
213 |                     account["is_locked"] = account_status.upper() != "OPEN"
214 |             except Exception as exc:
215 |                 self.logger.error(
    |                             ^^^^^
216 |                     "fetch_oracle_permissions_failed",
217 |                     module="oracle_account_adapter",
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/oracle_adapter.py:233:38
    |
231 |         return accounts
232 |
233 |     def _get_roles(self, connection: Any, username: str) -> list[str]:
    |                                      ^^^
234 |         """æŸ¥è¯¢ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/oracle_adapter.py:248:50
    |
246 |         return [row[0] for row in rows if row and row[0]]
247 |
248 |     def _get_system_privileges(self, connection: Any, username: str) -> list[str]:
    |                                                  ^^^
249 |         """æŸ¥è¯¢ç”¨æˆ·æ‹¥æœ‰çš„ç³»ç»Ÿæƒé™ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/oracle_adapter.py:263:54
    |
261 |         return [row[0] for row in rows if row and row[0]]
262 |
263 |     def _get_tablespace_privileges(self, connection: Any, username: str) -> dict[str, dict[str, Any]]:
    |                                                      ^^^
264 |         """æŸ¥è¯¢ç”¨æˆ·çš„è¡¨ç©ºé—´é…é¢ä¿¡æ¯ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/oracle_adapter.py:274:20
    |
273 |         Returns:
274 |             è¡¨ç©ºé—´é…é¢å­—å…¸ï¼Œé”®ä¸ºè¡¨ç©ºé—´åç§°ï¼Œå€¼åŒ…å«é…é¢å’Œå·²ä½¿ç”¨ç©ºé—´ã€‚
    |                           ^^
275 |
276 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/oracle_adapter.py:274:28
    |
273 |         Returns:
274 |             è¡¨ç©ºé—´é…é¢å­—å…¸ï¼Œé”®ä¸ºè¡¨ç©ºé—´åç§°ï¼Œå€¼åŒ…å«é…é¢å’Œå·²ä½¿ç”¨ç©ºé—´ã€‚
    |                                           ^^
275 |
276 |         """
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
 --> app/services/accounts_sync/adapters/postgresql_adapter.py:1:22
  |
1 | """PostgreSQL è´¦æˆ·åŒæ­¥é€‚é…å™¨ï¼ˆä¸¤é˜¶æ®µç‰ˆï¼‰ã€‚."""
  |                             ^^
2 |
3 | from __future__ import annotations
  |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
 --> app/services/accounts_sync/adapters/postgresql_adapter.py:1:27
  |
1 | """PostgreSQL è´¦æˆ·åŒæ­¥é€‚é…å™¨ï¼ˆä¸¤é˜¶æ®µç‰ˆï¼‰ã€‚."""
  |                                       ^^
2 |
3 | from __future__ import annotations
  |

D107 Missing docstring in `__init__`
  --> app/services/accounts_sync/adapters/postgresql_adapter.py:36:9
   |
34 |     """
35 |
36 |     def __init__(self) -> None:
   |         ^^^^^^^^
37 |         self.logger = get_sync_logger()
38 |         self.filter_manager = DatabaseFilterManager()
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
  --> app/services/accounts_sync/adapters/postgresql_adapter.py:40:67
   |
38 |         self.filter_manager = DatabaseFilterManager()
39 |
40 |     def _fetch_raw_accounts(self, instance: Instance, connection: Any) -> list[dict[str, Any]]:
   |                                                                   ^^^
41 |         """æ‹‰å– PostgreSQL åŽŸå§‹è´¦æˆ·ä¿¡æ¯ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/adapters/postgresql_adapter.py:50:21
   |
49 |         Returns:
50 |             åŽŸå§‹è´¦æˆ·ä¿¡æ¯åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ç”¨æˆ·åã€è¶…çº§ç”¨æˆ·æ ‡å¿—ã€è§’è‰²å±žæ€§ç­‰ã€‚
   |                             ^^
51 |
52 |         """
   |

S608 Possible SQL injection vector through string-based query construction
  --> app/services/accounts_sync/adapters/postgresql_adapter.py:56:17
   |
54 |               where_clause, params = self._build_filter_conditions()
55 |               roles_sql = (
56 | /                 "SELECT "
57 | |                 "    rolname as username, "
58 | |                 "    rolsuper as is_superuser, "
59 | |                 "    rolcreaterole as can_create_role, "
60 | |                 "    rolcreatedb as can_create_db, "
61 | |                 "    rolreplication as can_replicate, "
62 | |                 "    rolbypassrls as can_bypass_rls, "
63 | |                 "    rolcanlogin as can_login, "
64 | |                 "    rolinherit as can_inherit, "
65 | |                 "    CASE "
66 | |                 "        WHEN rolvaliduntil = 'infinity'::timestamp THEN NULL "
67 | |                 "        WHEN rolvaliduntil = '-infinity'::timestamp THEN NULL "
68 | |                 "        ELSE rolvaliduntil "
69 | |                 "    END as valid_until "
70 | |                 "FROM pg_roles "
71 | |                 f"WHERE {where_clause} "
72 | |                 "ORDER BY rolname"
   | |__________________________________^
73 |               )
74 |               rows = connection.execute_query(roles_sql, params)
   |

TRY300 Consider moving this statement to an `else` block
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:124:13
    |
122 |                 account_count=len(accounts),
123 |             )
124 |             return accounts
    |             ^^^^^^^^^^^^^^^
125 |         except Exception as exc:
126 |             self.logger.error(
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:126:25
    |
124 |             return accounts
125 |         except Exception as exc:
126 |             self.logger.error(
    |                         ^^^^^
127 |                 "fetch_postgresql_accounts_failed",
128 |                 module="postgresql_account_adapter",
    |

ARG002 Unused method argument: `instance`
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:135:34
    |
133 |             return []
134 |
135 |     def _normalize_account(self, instance: Instance, account: dict[str, Any]) -> dict[str, Any]:
    |                                  ^^^^^^^^
136 |         """è§„èŒƒåŒ– PostgreSQL è´¦æˆ·ä¿¡æ¯ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:192:21
    |
190 |     def _get_role_permissions(
191 |         self,
192 |         connection: Any,
    |                     ^^^
193 |         username: str,
194 |         *,
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:218:16
    |
216 |         try:
217 |             permissions["role_attributes"] = self._get_role_attributes(connection, username)
218 |         except Exception as exc:
    |                ^^^^^^^^^
219 |             self.logger.warning(
220 |                 "fetch_pg_role_attributes_failed",
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:227:16
    |
225 |         try:
226 |             permissions["predefined_roles"] = self._get_predefined_roles(connection, username)
227 |         except Exception as exc:
    |                ^^^^^^^^^
228 |             self.logger.warning(
229 |                 "fetch_pg_predefined_roles_failed",
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:236:16
    |
234 |         try:
235 |             permissions["database_privileges_pg"] = self._get_database_privileges(connection, username)
236 |         except Exception as exc:
    |                ^^^^^^^^^
237 |             self.logger.warning(
238 |                 "fetch_pg_database_privileges_failed",
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:245:16
    |
243 |         try:
244 |             permissions["tablespace_privileges"] = self._get_tablespace_privileges(connection, username)
245 |         except Exception as exc:
    |                ^^^^^^^^^
246 |             self.logger.warning(
247 |                 "fetch_pg_tablespace_privileges_failed",
    |

C901 `enrich_permissions` is too complex (13 > 10)
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:256:9
    |
254 |         return permissions
255 |
256 |     def enrich_permissions(
    |         ^^^^^^^^^^^^^^^^^^
257 |         self,
258 |         instance: Instance,
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:259:21
    |
257 |         self,
258 |         instance: Instance,
259 |         connection: Any,
    |                     ^^^
260 |         accounts: list[dict[str, Any]],
261 |         *,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:266:23
    |
264 |         """ä¸°å¯Œ PostgreSQL è´¦æˆ·çš„æƒé™ä¿¡æ¯ã€‚.
265 |
266 |         ä¸ºæŒ‡å®šè´¦æˆ·æŸ¥è¯¢è¯¦ç»†çš„æƒé™ä¿¡æ¯ï¼ŒåŒ…æ‹¬è§’è‰²å±žæ€§ã€é¢„å®šä¹‰è§’è‰²ã€æ•°æ®åº“æƒé™ç­‰ã€‚
    |                                     ^^
267 |
268 |         Args:
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:326:29
    |
324 |                 account["is_locked"] = not can_login
325 |             except Exception as exc:
326 |                 self.logger.error(
    |                             ^^^^^
327 |                     "fetch_pg_permissions_failed",
328 |                     module="postgresql_account_adapter",
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:345:48
    |
344 |     # ä»¥ä¸‹è¾…åŠ©æŸ¥è¯¢å‡½æ•°æ²¿ç”¨æ—§å®žçŽ°
345 |     def _get_role_attributes(self, connection: Any, username: str) -> dict[str, Any]:
    |                                                ^^^
346 |         """æŸ¥è¯¢è§’è‰²å±žæ€§ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:353:35
    |
352 |         Returns:
353 |             dict[str, Any]: è§’è‰²èƒ½åŠ›æ ‡å¿—ï¼Œå¦‚ `can_create_db` ç­‰ã€‚
    |                                         ^^
354 |
355 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:374:49
    |
372 |         }
373 |
374 |     def _get_predefined_roles(self, connection: Any, username: str) -> list[str]:
    |                                                 ^^^
375 |         """æŸ¥è¯¢ç”¨æˆ·æ‰€å±žçš„é¢„å®šä¹‰è§’è‰²ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:394:52
    |
392 |         return [row[0] for row in rows if row and row[0]]
393 |
394 |     def _get_database_privileges(self, connection: Any, username: str) -> dict[str, list[str]]:
    |                                                    ^^^
395 |         """æŸ¥è¯¢ç”¨æˆ·åœ¨å„æ•°æ®åº“ä¸Šçš„æƒé™ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:402:41
    |
401 |         Returns:
402 |             dict[str, list[str]]: é”®ä¸ºæ•°æ®åº“åï¼Œå€¼ä¸ºæƒé™åˆ—è¡¨ã€‚
    |                                               ^^
403 |
404 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:432:54
    |
430 |         return privileges
431 |
432 |     def _get_tablespace_privileges(self, connection: Any, username: str) -> dict[str, list[str]]:
    |                                                      ^^^
433 |         """æŸ¥è¯¢ç”¨æˆ·åœ¨å„è¡¨ç©ºé—´ä¸Šçš„æƒé™ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/postgresql_adapter.py:440:41
    |
439 |         Returns:
440 |             dict[str, list[str]]: é”®ä¸ºè¡¨ç©ºé—´åï¼Œå€¼ä¸ºæƒé™åˆ—è¡¨ã€‚
    |                                               ^^
441 |
442 |         """
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
 --> app/services/accounts_sync/adapters/sqlserver_adapter.py:1:22
  |
1 | """SQL Server è´¦æˆ·åŒæ­¥é€‚é…å™¨ï¼ˆä¸¤é˜¶æ®µç‰ˆï¼‰ã€‚."""
  |                             ^^
2 |
3 | from __future__ import annotations
  |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
 --> app/services/accounts_sync/adapters/sqlserver_adapter.py:1:27
  |
1 | """SQL Server è´¦æˆ·åŒæ­¥é€‚é…å™¨ï¼ˆä¸¤é˜¶æ®µç‰ˆï¼‰ã€‚."""
  |                                       ^^
2 |
3 | from __future__ import annotations
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/adapters/sqlserver_adapter.py:26:13
   |
24 |     å®žçŽ° SQL Server æ•°æ®åº“çš„è´¦æˆ·æŸ¥è¯¢å’Œæƒé™é‡‡é›†åŠŸèƒ½ã€‚
25 |     é€šè¿‡ sys.server_principalsã€sys.server_role_membersã€sys.database_principals ç­‰è§†å›¾é‡‡é›†ç™»å½•ä¿¡æ¯å’Œæƒé™ã€‚
26 |     æ”¯æŒæ‰¹é‡ä¼˜åŒ–æŸ¥è¯¢ï¼Œæé«˜å¤šç”¨æˆ·æƒé™é‡‡é›†æ•ˆçŽ‡ã€‚
   |                     ^^
27 |
28 |     Attributes:
   |

D107 Missing docstring in `__init__`
  --> app/services/accounts_sync/adapters/sqlserver_adapter.py:39:9
   |
37 |     """
38 |
39 |     def __init__(self) -> None:
   |         ^^^^^^^^
40 |         self.logger = get_sync_logger()
41 |         self.filter_manager = DatabaseFilterManager()
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
  --> app/services/accounts_sync/adapters/sqlserver_adapter.py:43:67
   |
41 |         self.filter_manager = DatabaseFilterManager()
42 |
43 |     def _fetch_raw_accounts(self, instance: Instance, connection: Any) -> list[dict[str, Any]]:
   |                                                                   ^^^
44 |         """æ‹‰å– SQL Server åŽŸå§‹è´¦æˆ·ä¿¡æ¯ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/adapters/sqlserver_adapter.py:53:21
   |
52 |         Returns:
53 |             åŽŸå§‹è´¦æˆ·ä¿¡æ¯åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ç™»å½•åã€æ˜¯å¦ç¦ç”¨ã€æ˜¯å¦ä¸ºç³»ç»Ÿç®¡ç†å‘˜ç­‰ã€‚
   |                             ^^
54 |
55 |         """
   |

TRY300 Consider moving this statement to an `else` block
  --> app/services/accounts_sync/adapters/sqlserver_adapter.py:81:13
   |
79 |                 account_count=len(accounts),
80 |             )
81 |             return accounts
   |             ^^^^^^^^^^^^^^^
82 |         except Exception as exc:
83 |             self.logger.error(
   |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
  --> app/services/accounts_sync/adapters/sqlserver_adapter.py:83:25
   |
81 |             return accounts
82 |         except Exception as exc:
83 |             self.logger.error(
   |                         ^^^^^
84 |                 "fetch_sqlserver_accounts_failed",
85 |                 module="sqlserver_account_adapter",
   |

ARG002 Unused method argument: `instance`
  --> app/services/accounts_sync/adapters/sqlserver_adapter.py:92:34
   |
90 |             return []
91 |
92 |     def _normalize_account(self, instance: Instance, account: dict[str, Any]) -> dict[str, Any]:
   |                                  ^^^^^^^^
93 |         """è§„èŒƒåŒ– SQL Server è´¦æˆ·ä¿¡æ¯ã€‚.
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:117:39
    |
115 |             "is_superuser": account.get("is_superuser", False),
116 |             "is_locked": is_disabled,
117 |             # SQL Server ç™»å½•è¢«ç¦ç”¨ä»è§†ä¸ºæ¸…å•å†…è´¦æˆ·ï¼Œä»…é€šè¿‡ is_locked å­—æ®µè¡¨è¾¾é”å®šçŠ¶æ€
    |                                                    ^^
118 |             "is_active": True,
119 |             "permissions": {
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:131:21
    |
129 |         self,
130 |         instance: Instance,
131 |         connection: Any,
    |                     ^^^
132 |         accounts: list[dict[str, Any]],
133 |         *,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:138:23
    |
136 |         """ä¸°å¯Œ SQL Server è´¦æˆ·çš„æƒé™ä¿¡æ¯ã€‚.
137 |
138 |         ä¸ºæŒ‡å®šè´¦æˆ·æŸ¥è¯¢è¯¦ç»†çš„æƒé™ä¿¡æ¯ï¼ŒåŒ…æ‹¬æœåŠ¡å™¨è§’è‰²ã€æœåŠ¡å™¨æƒé™ã€æ•°æ®åº“è§’è‰²å’Œæ•°æ®åº“æƒé™ã€‚
    |                                     ^^
139 |         ä½¿ç”¨æ‰¹é‡ä¼˜åŒ–æŸ¥è¯¢æé«˜æ€§èƒ½ã€‚
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:192:29
    |
190 |                 account["is_locked"] = bool(type_specific.get("is_disabled", False))
191 |             except Exception as exc:
192 |                 self.logger.error(
    |                             ^^^^^
193 |                     "fetch_sqlserver_permissions_failed",
194 |                     module="sqlserver_account_adapter",
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:213:41
    |
211 |     # æŸ¥è¯¢é€»è¾‘æ¥æºäºŽæ—§å®žçŽ°
212 |     # ------------------------------------------------------------------
213 |     def _fetch_logins(self, connection: Any) -> list[dict[str, Any]]:
    |                                         ^^^
214 |         """æŸ¥è¯¢æœåŠ¡å™¨ç™»å½•è´¦æˆ·ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:220:43
    |
219 |         Returns:
220 |             list[dict[str, Any]]: è¿‡æ»¤åŽçš„ç™»å½•åˆ—è¡¨ï¼ŒåŒ…å«åç§°ã€ç±»åž‹ä¸ŽçŠ¶æ€ã€‚
    |                                                   ^^
221 |
222 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:263:32
    |
262 |         Args:
263 |             patterns: LIKE æ¨¡å¼é›†åˆï¼Œæ”¯æŒ % ä¸Ž _ã€‚
    |                                    ^^
264 |
265 |         Returns:
    |

PLR0913 Too many arguments in function definition (6 > 5)
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:287:9
    |
285 |         return compiled
286 |
287 |     def _get_login_permissions(
    |         ^^^^^^^^^^^^^^^^^^^^^^
288 |         self,
289 |         connection: Any,
    |

ARG002 Unused method argument: `connection`
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:289:9
    |
287 |     def _get_login_permissions(
288 |         self,
289 |         connection: Any,
    |         ^^^^^^^^^^
290 |         login_name: str,
291 |         *,
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:289:21
    |
287 |     def _get_login_permissions(
288 |         self,
289 |         connection: Any,
    |                     ^^^
290 |         login_name: str,
291 |         *,
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:300:38
    |
299 |         Args:
300 |             connection: SQL Server è¿žæŽ¥ï¼ˆé¢„ç•™ä»¥ä¾¿åŽç»­è‡ªå®šä¹‰æŸ¥è¯¢ï¼‰ã€‚
    |                                        ^^
301 |             login_name: ç™»å½•åã€‚
302 |             precomputed_server_roles: é¢„å…ˆæŸ¥è¯¢çš„æœåŠ¡å™¨è§’è‰²æ˜ å°„ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:300:50
    |
299 |         Args:
300 |             connection: SQL Server è¿žæŽ¥ï¼ˆé¢„ç•™ä»¥ä¾¿åŽç»­è‡ªå®šä¹‰æŸ¥è¯¢ï¼‰ã€‚
    |                                                                ^^
301 |             login_name: ç™»å½•åã€‚
302 |             precomputed_server_roles: é¢„å…ˆæŸ¥è¯¢çš„æœåŠ¡å™¨è§’è‰²æ˜ å°„ã€‚
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:403:50
    |
401 |         return copied
402 |
403 |     def _get_server_roles_bulk(self, connection: Any, usernames: Sequence[str]) -> dict[str, list[str]]:
    |                                                  ^^^
404 |         """æ‰¹é‡æŸ¥è¯¢æœåŠ¡å™¨è§’è‰²ã€‚.
    |

S608 Possible SQL injection vector through string-based query construction
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:419:15
    |
418 |           placeholders = ", ".join(["%s"] * len(normalized))
419 |           sql = f"""
    |  _______________^
420 | |             SELECT member.name AS login_name, role.name AS role_name
421 | |             FROM sys.server_role_members rm
422 | |             JOIN sys.server_principals role ON rm.role_principal_id = role.principal_id
423 | |             JOIN sys.server_principals member ON rm.member_principal_id = member.principal_id
424 | |             WHERE member.name IN ({placeholders})
425 | |         """
    | |___________^
426 |           rows = connection.execute_query(sql, tuple(normalized))
427 |           result: dict[str, list[str]] = {}
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:436:56
    |
434 |         return result
435 |
436 |     def _get_server_permissions_bulk(self, connection: Any, usernames: Sequence[str]) -> dict[str, list[str]]:
    |                                                        ^^^
437 |         """æ‰¹é‡æŸ¥è¯¢æœåŠ¡å™¨æƒé™ã€‚.
    |

S608 Possible SQL injection vector through string-based query construction
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:452:15
    |
451 |           placeholders = ", ".join(["%s"] * len(normalized))
452 |           sql = f"""
    |  _______________^
453 | |             SELECT sp.name AS login_name, perm.permission_name
454 | |             FROM sys.server_permissions perm
455 | |             JOIN sys.server_principals sp ON perm.grantee_principal_id = sp.principal_id
456 | |             WHERE sp.name IN ({placeholders})
457 | |         """
    | |___________^
458 |           rows = connection.execute_query(sql, tuple(normalized))
459 |           result: dict[str, list[str]] = {}
    |

C901 `_get_all_users_database_permissions_batch` is too complex (32 > 10)
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:468:9
    |
466 |         return result
467 |
468 |     def _get_all_users_database_permissions_batch(
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
469 |         self,
470 |         connection: Any,
    |

PLR0912 Too many branches (31 > 12)
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:468:9
    |
466 |         return result
467 |
468 |     def _get_all_users_database_permissions_batch(
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
469 |         self,
470 |         connection: Any,
    |

PLR0915 Too many statements (88 > 50)
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:468:9
    |
466 |         return result
467 |
468 |     def _get_all_users_database_permissions_batch(
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
469 |         self,
470 |         connection: Any,
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `connection`
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:470:21
    |
468 |     def _get_all_users_database_permissions_batch(
469 |         self,
470 |         connection: Any,
    |                     ^^^
471 |         usernames: Sequence[str],
472 |     ) -> dict[str, dict[str, Any]]:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:473:26
    |
471 |         usernames: Sequence[str],
472 |     ) -> dict[str, dict[str, Any]]:
473 |         """æ‰¹é‡æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„æ•°æ®åº“æƒé™ï¼ˆä¼˜åŒ–ç‰ˆï¼‰ã€‚.
    |                                        ^^
474 |
475 |         é€šè¿‡ UNION ALL åˆå¹¶å¤šä¸ªæ•°æ®åº“çš„æŸ¥è¯¢ï¼Œä¸€æ¬¡æ€§èŽ·å–æ‰€æœ‰ç”¨æˆ·åœ¨æ‰€æœ‰æ•°æ®åº“ä¸­çš„æƒé™ä¿¡æ¯ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:473:30
    |
471 |         usernames: Sequence[str],
472 |     ) -> dict[str, dict[str, Any]]:
473 |         """æ‰¹é‡æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„æ•°æ®åº“æƒé™ï¼ˆä¼˜åŒ–ç‰ˆï¼‰ã€‚.
    |                                                ^^
474 |
475 |         é€šè¿‡ UNION ALL åˆå¹¶å¤šä¸ªæ•°æ®åº“çš„æŸ¥è¯¢ï¼Œä¸€æ¬¡æ€§èŽ·å–æ‰€æœ‰ç”¨æˆ·åœ¨æ‰€æœ‰æ•°æ®åº“ä¸­çš„æƒé™ä¿¡æ¯ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:475:32
    |
473 |         """æ‰¹é‡æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„æ•°æ®åº“æƒé™ï¼ˆä¼˜åŒ–ç‰ˆï¼‰ã€‚.
474 |
475 |         é€šè¿‡ UNION ALL åˆå¹¶å¤šä¸ªæ•°æ®åº“çš„æŸ¥è¯¢ï¼Œä¸€æ¬¡æ€§èŽ·å–æ‰€æœ‰ç”¨æˆ·åœ¨æ‰€æœ‰æ•°æ®åº“ä¸­çš„æƒé™ä¿¡æ¯ã€‚
    |                                            ^^
476 |         æ˜¾è‘—æé«˜å¤šç”¨æˆ·ã€å¤šæ•°æ®åº“åœºæ™¯ä¸‹çš„æŸ¥è¯¢æ•ˆçŽ‡ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:483:19
    |
482 |         Returns:
483 |             ç”¨æˆ·æƒé™å­—å…¸ï¼Œé”®ä¸ºç™»å½•åï¼Œå€¼åŒ…å«è§’è‰²å’Œæƒé™ä¿¡æ¯ã€‚
    |                         ^^
484 |             æ ¼å¼ï¼š{
485 |                 'login_name': {
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:483:25
    |
482 |         Returns:
483 |             ç”¨æˆ·æƒé™å­—å…¸ï¼Œé”®ä¸ºç™»å½•åï¼Œå€¼åŒ…å«è§’è‰²å’Œæƒé™ä¿¡æ¯ã€‚
    |                                     ^^
484 |             æ ¼å¼ï¼š{
485 |                 'login_name': {
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:484:15
    |
482 |         Returns:
483 |             ç”¨æˆ·æƒé™å­—å…¸ï¼Œé”®ä¸ºç™»å½•åï¼Œå€¼åŒ…å«è§’è‰²å’Œæƒé™ä¿¡æ¯ã€‚
484 |             æ ¼å¼ï¼š{
    |                 ^^
485 |                 'login_name': {
486 |                     'roles': {'db_name': ['role1', 'role2']},
    |

S608 Possible SQL injection vector through string-based query construction
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:512:30
    |
510 |               unique_usernames = list(dict.fromkeys(usernames))
511 |               placeholders = ", ".join(["%s"] * len(unique_usernames))
512 |               login_sids_sql = f"""
    |  ______________________________^
513 | |                 SELECT name, sid
514 | |                 FROM sys.server_principals
515 | |                 WHERE name IN ({placeholders})
516 | |                   AND type IN ('S', 'U', 'G')
517 | |             """
    | |_______________^
518 |               login_rows = connection.execute_query(login_sids_sql, tuple(unique_usernames))
519 |               sid_to_logins: dict[bytes, list[str]] = {}
    |

S608 Possible SQL injection vector through string-based query construction
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:543:21
    |
541 |                   quoted_db = self._quote_identifier(db)
542 |                   principals_parts.append(
543 | /                     f"""
544 | |                     SELECT '{db}' AS db_name,
545 | |                            name COLLATE SQL_Latin1_General_CP1_CI_AS AS user_name,
546 | |                            principal_id,
547 | |                            sid
548 | |                     FROM {quoted_db}.sys.database_principals
549 | |                     WHERE type IN ('S', 'U', 'G')
550 | |                       AND name != 'dbo'
551 | |                       AND sid IN ({sid_filter})
552 | |                     """,
    | |_______________________^
553 |                   )
    |

S608 Possible SQL injection vector through string-based query construction
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:556:21
    |
555 |                   roles_parts.append(
556 | /                     f"""
557 | |                     SELECT '{db}' AS db_name,
558 | |                            role.name COLLATE SQL_Latin1_General_CP1_CI_AS AS role_name,
559 | |                            member.principal_id AS member_principal_id
560 | |                     FROM {quoted_db}.sys.database_role_members drm
561 | |                     JOIN {quoted_db}.sys.database_principals role
562 | |                       ON drm.role_principal_id = role.principal_id
563 | |                     JOIN {quoted_db}.sys.database_principals member
564 | |                       ON drm.member_principal_id = member.principal_id
565 | |                     WHERE member.sid IN ({sid_filter})
566 | |                     """,
    | |_______________________^
567 |                   )
    |

S608 Possible SQL injection vector through string-based query construction
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:570:21
    |
569 |   â€¦     perms_parts.append(
570 | / â€¦         f"""
571 | | â€¦         SELECT '{db}' AS db_name,
572 | | â€¦                perm.permission_name COLLATE SQL_Latin1_General_CP1_CI_AS AS permission_name,
573 | | â€¦                perm.grantee_principal_id,
574 | | â€¦                perm.major_id,
575 | | â€¦                perm.minor_id,
576 | | â€¦                CASE
577 | | â€¦                    WHEN perm.class_desc = 'DATABASE' THEN 'DATABASE'
578 | | â€¦                    WHEN perm.class_desc = 'SCHEMA' THEN 'SCHEMA'
579 | | â€¦                    WHEN perm.class_desc = 'OBJECT_OR_COLUMN' AND perm.minor_id = 0 THEN 'OBJECT'
580 | | â€¦                    WHEN perm.class_desc = 'OBJECT_OR_COLUMN' AND perm.minor_id > 0 THEN 'COLUMN'
581 | | â€¦                    ELSE perm.class_desc
582 | | â€¦                END AS permission_scope,
583 | | â€¦                CASE
584 | | â€¦                    WHEN perm.class_desc = 'SCHEMA' THEN SCHEMA_NAME(perm.major_id)
585 | | â€¦                    WHEN perm.class_desc = 'OBJECT_OR_COLUMN' THEN OBJECT_SCHEMA_NAME(perm.major_id)
586 | | â€¦                    ELSE NULL
587 | | â€¦                END AS schema_name,
588 | | â€¦                CASE
589 | | â€¦                    WHEN perm.class_desc = 'OBJECT_OR_COLUMN' THEN OBJECT_NAME(perm.major_id)
590 | | â€¦                    ELSE NULL
591 | | â€¦                END AS object_name,
592 | | â€¦                CASE
593 | | â€¦                    WHEN perm.class_desc = 'OBJECT_OR_COLUMN' AND perm.minor_id > 0 THEN COL_NAME(perm.major_id, perm.minor_id)
594 | | â€¦                    ELSE NULL
595 | | â€¦                END AS column_name
596 | | â€¦         FROM {quoted_db}.sys.database_permissions perm
597 | | â€¦         JOIN {quoted_db}.sys.database_principals dp
598 | | â€¦           ON perm.grantee_principal_id = dp.principal_id
599 | | â€¦         WHERE perm.state = 'G'
600 | | â€¦           AND dp.sid IN ({sid_filter})
601 | | â€¦         """,
    | |_____________^
602 |   â€¦     )
    |

E501 Line too long (138 > 120)
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:593:121
    |
591 | â€¦                     END AS object_name,
592 | â€¦                     CASE
593 | â€¦                         WHEN perm.class_desc = 'OBJECT_OR_COLUMN' AND perm.minor_id > 0 THEN COL_NAME(perm.major_id, perm.minor_id)
    |                                                                                                                    ^^^^^^^^^^^^^^^^^^
594 | â€¦                         ELSE NULL
595 | â€¦                     END AS column_name
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:701:13
    |
699 |             )
700 |
701 |             return result
    |             ^^^^^^^^^^^^^
702 |         except Exception as exc:
703 |             self.logger.error(
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:703:25
    |
701 |             return result
702 |         except Exception as exc:
703 |             self.logger.error(
    |                         ^^^^^
704 |                 "sqlserver_batch_database_permissions_failed",
705 |                 module="sqlserver_account_adapter",
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `raw_sid`
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:712:33
    |
711 |     @staticmethod
712 |     def _normalize_sid(raw_sid: Any) -> bytes | None:
    |                                 ^^^
713 |         """æ ‡å‡†åŒ– SID å­—èŠ‚ä¸²ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:719:36
    |
718 |         Returns:
719 |             bytes | None: ç»Ÿä¸€è½¬æ¢åŽçš„å­—èŠ‚ä¸²ï¼Œæ— æ³•è½¬æ¢åˆ™è¿”å›ž Noneã€‚
    |                                             ^^
720 |
721 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/adapters/sqlserver_adapter.py:740:38
    |
739 |         Returns:
740 |             str | None: å½¢å¦‚ 0x... çš„å­—é¢å€¼ï¼Œsid ä¸ºç©ºæ—¶è¿”å›ž Noneã€‚
    |                                            ^^
741 |
742 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/accounts_sync/coordinator.py:1:11
  |
1 | """è´¦æˆ·åŒæ­¥åè°ƒå™¨ï¼Œå°è£…è¿žæŽ¥ç®¡ç†ã€æ¸…å•/æƒé™åŒé˜¶æ®µæµç¨‹ã€‚."""
  |                  ^^
2 |
3 | from __future__ import annotations
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/coordinator.py:21:15
   |
20 | class AccountSyncCoordinator(AbstractContextManager["AccountSyncCoordinator"]):
21 |     """è´¦æˆ·åŒæ­¥åè°ƒå™¨ï¼Œè´Ÿè´£ä¸¤é˜¶æ®µæµç¨‹ã€‚.
   |                      ^^
22 |
23 |     åè°ƒè´¦æˆ·åŒæ­¥çš„ä¸¤ä¸ªé˜¶æ®µï¼š
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/accounts_sync/coordinator.py:23:16
   |
21 |     """è´¦æˆ·åŒæ­¥åè°ƒå™¨ï¼Œè´Ÿè´£ä¸¤é˜¶æ®µæµç¨‹ã€‚.
22 |
23 |     åè°ƒè´¦æˆ·åŒæ­¥çš„ä¸¤ä¸ªé˜¶æ®µï¼š
   |                           ^^
24 |     1. æ¸…å•é˜¶æ®µï¼ˆInventoryï¼‰ï¼šåŒæ­¥è´¦æˆ·åŸºæœ¬ä¿¡æ¯ï¼Œæ ‡è®°æ´»è·ƒ/éžæ´»è·ƒçŠ¶æ€
25 |     2. æƒé™é˜¶æ®µï¼ˆCollectionï¼‰ï¼šåŒæ­¥æ´»è·ƒè´¦æˆ·çš„æƒé™ä¿¡æ¯
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/accounts_sync/coordinator.py:24:12
   |
23 |     åè°ƒè´¦æˆ·åŒæ­¥çš„ä¸¤ä¸ªé˜¶æ®µï¼š
24 |     1. æ¸…å•é˜¶æ®µï¼ˆInventoryï¼‰ï¼šåŒæ­¥è´¦æˆ·åŸºæœ¬ä¿¡æ¯ï¼Œæ ‡è®°æ´»è·ƒ/éžæ´»è·ƒçŠ¶æ€
   |                ^^
25 |     2. æƒé™é˜¶æ®µï¼ˆCollectionï¼‰ï¼šåŒæ­¥æ´»è·ƒè´¦æˆ·çš„æƒé™ä¿¡æ¯
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/accounts_sync/coordinator.py:24:22
   |
23 |     åè°ƒè´¦æˆ·åŒæ­¥çš„ä¸¤ä¸ªé˜¶æ®µï¼š
24 |     1. æ¸…å•é˜¶æ®µï¼ˆInventoryï¼‰ï¼šåŒæ­¥è´¦æˆ·åŸºæœ¬ä¿¡æ¯ï¼Œæ ‡è®°æ´»è·ƒ/éžæ´»è·ƒçŠ¶æ€
   |                           ^^
25 |     2. æƒé™é˜¶æ®µï¼ˆCollectionï¼‰ï¼šåŒæ­¥æ´»è·ƒè´¦æˆ·çš„æƒé™ä¿¡æ¯
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/accounts_sync/coordinator.py:24:23
   |
23 |     åè°ƒè´¦æˆ·åŒæ­¥çš„ä¸¤ä¸ªé˜¶æ®µï¼š
24 |     1. æ¸…å•é˜¶æ®µï¼ˆInventoryï¼‰ï¼šåŒæ­¥è´¦æˆ·åŸºæœ¬ä¿¡æ¯ï¼Œæ ‡è®°æ´»è·ƒ/éžæ´»è·ƒçŠ¶æ€
   |                             ^^
25 |     2. æƒé™é˜¶æ®µï¼ˆCollectionï¼‰ï¼šåŒæ­¥æ´»è·ƒè´¦æˆ·çš„æƒé™ä¿¡æ¯
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/coordinator.py:24:32
   |
23 |     åè°ƒè´¦æˆ·åŒæ­¥çš„ä¸¤ä¸ªé˜¶æ®µï¼š
24 |     1. æ¸…å•é˜¶æ®µï¼ˆInventoryï¼‰ï¼šåŒæ­¥è´¦æˆ·åŸºæœ¬ä¿¡æ¯ï¼Œæ ‡è®°æ´»è·ƒ/éžæ´»è·ƒçŠ¶æ€
   |                                               ^^
25 |     2. æƒé™é˜¶æ®µï¼ˆCollectionï¼‰ï¼šåŒæ­¥æ´»è·ƒè´¦æˆ·çš„æƒé™ä¿¡æ¯
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/accounts_sync/coordinator.py:25:12
   |
23 |     åè°ƒè´¦æˆ·åŒæ­¥çš„ä¸¤ä¸ªé˜¶æ®µï¼š
24 |     1. æ¸…å•é˜¶æ®µï¼ˆInventoryï¼‰ï¼šåŒæ­¥è´¦æˆ·åŸºæœ¬ä¿¡æ¯ï¼Œæ ‡è®°æ´»è·ƒ/éžæ´»è·ƒçŠ¶æ€
25 |     2. æƒé™é˜¶æ®µï¼ˆCollectionï¼‰ï¼šåŒæ­¥æ´»è·ƒè´¦æˆ·çš„æƒé™ä¿¡æ¯
   |                ^^
26 |
27 |     æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®ï¼Œè‡ªåŠ¨ç®¡ç†æ•°æ®åº“è¿žæŽ¥çš„å»ºç«‹å’Œé‡Šæ”¾ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/accounts_sync/coordinator.py:25:23
   |
23 |     åè°ƒè´¦æˆ·åŒæ­¥çš„ä¸¤ä¸ªé˜¶æ®µï¼š
24 |     1. æ¸…å•é˜¶æ®µï¼ˆInventoryï¼‰ï¼šåŒæ­¥è´¦æˆ·åŸºæœ¬ä¿¡æ¯ï¼Œæ ‡è®°æ´»è·ƒ/éžæ´»è·ƒçŠ¶æ€
25 |     2. æƒé™é˜¶æ®µï¼ˆCollectionï¼‰ï¼šåŒæ­¥æ´»è·ƒè´¦æˆ·çš„æƒé™ä¿¡æ¯
   |                            ^^
26 |
27 |     æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®ï¼Œè‡ªåŠ¨ç®¡ç†æ•°æ®åº“è¿žæŽ¥çš„å»ºç«‹å’Œé‡Šæ”¾ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/accounts_sync/coordinator.py:25:24
   |
23 |     åè°ƒè´¦æˆ·åŒæ­¥çš„ä¸¤ä¸ªé˜¶æ®µï¼š
24 |     1. æ¸…å•é˜¶æ®µï¼ˆInventoryï¼‰ï¼šåŒæ­¥è´¦æˆ·åŸºæœ¬ä¿¡æ¯ï¼Œæ ‡è®°æ´»è·ƒ/éžæ´»è·ƒçŠ¶æ€
25 |     2. æƒé™é˜¶æ®µï¼ˆCollectionï¼‰ï¼šåŒæ­¥æ´»è·ƒè´¦æˆ·çš„æƒé™ä¿¡æ¯
   |                              ^^
26 |
27 |     æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®ï¼Œè‡ªåŠ¨ç®¡ç†æ•°æ®åº“è¿žæŽ¥çš„å»ºç«‹å’Œé‡Šæ”¾ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/coordinator.py:27:15
   |
25 |     2. æƒé™é˜¶æ®µï¼ˆCollectionï¼‰ï¼šåŒæ­¥æ´»è·ƒè´¦æˆ·çš„æƒé™ä¿¡æ¯
26 |
27 |     æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®ï¼Œè‡ªåŠ¨ç®¡ç†æ•°æ®åº“è¿žæŽ¥çš„å»ºç«‹å’Œé‡Šæ”¾ã€‚
   |                         ^^
28 |
29 |     Attributes:
   |

D107 Missing docstring in `__init__`
  --> app/services/accounts_sync/coordinator.py:39:9
   |
37 |     """
38 |
39 |     def __init__(self, instance: Instance) -> None:
   |         ^^^^^^^^
40 |         self.instance = instance
41 |         self.logger = get_sync_logger()
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/coordinator.py:60:41
   |
59 |         Returns:
60 |             AccountSyncCoordinator: è‡ªèº«å¼•ç”¨ï¼Œä¾¿äºŽé“¾å¼è°ƒç”¨ã€‚
   |                                             ^^
61 |
62 |         Raises:
   |

ANN001 Missing type annotation for function argument `exc_type`
  --> app/services/accounts_sync/coordinator.py:71:24
   |
69 |         return self
70 |
71 |     def __exit__(self, exc_type, exc_val, exc_tb) -> None:
   |                        ^^^^^^^^
72 |         """é€€å‡ºä¸Šä¸‹æ–‡æ—¶é‡Šæ”¾è¿žæŽ¥èµ„æºã€‚.
   |

ANN001 Missing type annotation for function argument `exc_val`
  --> app/services/accounts_sync/coordinator.py:71:34
   |
69 |         return self
70 |
71 |     def __exit__(self, exc_type, exc_val, exc_tb) -> None:
   |                                  ^^^^^^^
72 |         """é€€å‡ºä¸Šä¸‹æ–‡æ—¶é‡Šæ”¾è¿žæŽ¥èµ„æºã€‚.
   |

ANN001 Missing type annotation for function argument `exc_tb`
  --> app/services/accounts_sync/coordinator.py:71:43
   |
69 |         return self
70 |
71 |     def __exit__(self, exc_type, exc_val, exc_tb) -> None:
   |                                           ^^^^^^
72 |         """é€€å‡ºä¸Šä¸‹æ–‡æ—¶é‡Šæ”¾è¿žæŽ¥èµ„æºã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/coordinator.py:80:36
   |
79 |         Returns:
80 |             None: è¿žæŽ¥å…³é—­åŽè¿”å›ž False ç­‰æ•ˆå€¼ï¼Œä»Žè€Œä¸åžæŽ‰å¼‚å¸¸ã€‚
   |                                              ^^
81 |
82 |         """
   |

PLR0911 Too many return statements (7 > 6)
  --> app/services/accounts_sync/coordinator.py:85:9
   |
83 |         self.disconnect()
84 |
85 |     def connect(self) -> bool:
   |         ^^^^^^^
86 |         """å»ºç«‹åˆ°æ•°æ®åº“å®žä¾‹çš„è¿žæŽ¥ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/coordinator.py:88:19
   |
86 |         """å»ºç«‹åˆ°æ•°æ®åº“å®žä¾‹çš„è¿žæŽ¥ã€‚.
87 |
88 |         å¦‚æžœè¿žæŽ¥å·²å­˜åœ¨ä¸”æœ‰æ•ˆï¼Œåˆ™å¤ç”¨çŽ°æœ‰è¿žæŽ¥ã€‚
   |                             ^^
89 |         å¦‚æžœä¹‹å‰è¿žæŽ¥å¤±è´¥ï¼Œåˆ™ç›´æŽ¥è¿”å›ž False ä¸å†é‡è¯•ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/coordinator.py:89:17
   |
88 |         å¦‚æžœè¿žæŽ¥å·²å­˜åœ¨ä¸”æœ‰æ•ˆï¼Œåˆ™å¤ç”¨çŽ°æœ‰è¿žæŽ¥ã€‚
89 |         å¦‚æžœä¹‹å‰è¿žæŽ¥å¤±è´¥ï¼Œåˆ™ç›´æŽ¥è¿”å›ž False ä¸å†é‡è¯•ã€‚
   |                         ^^
90 |
91 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/coordinator.py:92:24
   |
91 |         Returns:
92 |             è¿žæŽ¥æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
   |                              ^^
93 |
94 |         """
   |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/accounts_sync/coordinator.py:111:25
    |
109 |             self._connection_failed = True
110 |             self._connection_error = str(exc)
111 |             self.logger.error(
    |                         ^^^^^
112 |                 "accounts_sync_connection_init_failed",
113 |                 instance_id=self.instance.id,
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/accounts_sync/coordinator.py:156:13
    |
154 |                 module=MODULE,
155 |             )
156 |             return False
    |             ^^^^^^^^^^^^
157 |         except Exception as exc:
158 |             self._connection_failed = True
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/accounts_sync/coordinator.py:160:25
    |
158 |             self._connection_failed = True
159 |             self._connection_error = str(exc)
160 |             self.logger.error(
    |                         ^^^^^
161 |                 "accounts_sync_connection_exception",
162 |                 instance_id=self.instance.id,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:191:21
    |
190 |     def _ensure_connection(self) -> None:
191 |         """ç¡®ä¿æ•°æ®åº“è¿žæŽ¥æœ‰æ•ˆï¼Œå¦‚æžœæ— æ•ˆåˆ™å°è¯•é‡æ–°è¿žæŽ¥ã€‚.
    |                              ^^
192 |
193 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:197:35
    |
196 |         Raises:
197 |             RuntimeError: å½“è¿žæŽ¥å¤±è´¥æ—¶æŠ›å‡ºï¼ŒåŒ…å«è¿žæŽ¥é”™è¯¯ä¿¡æ¯ã€‚
    |                                           ^^
198 |
199 |         """
    |

SIM102 Use a single `if` statement instead of nested `if` statements
   --> app/services/accounts_sync/coordinator.py:200:9
    |
199 |           """
200 | /         if not self._connection or not getattr(self._connection, "is_connected", False):
201 | |             if not self.connect():
    | |__________________________________^
202 |                   error_message = self._connection_error or "æ•°æ®åº“è¿žæŽ¥æœªå»ºç«‹"
203 |                   raise RuntimeError(error_message)
    |
help: Combine `if` statements using `and`

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:211:15
    |
209 |         """ä»Žè¿œç¨‹æ•°æ®åº“èŽ·å–è´¦æˆ·åˆ—è¡¨ã€‚.
210 |
211 |         ä½¿ç”¨ç¼“å­˜æœºåˆ¶ï¼ŒåŒä¸€å®žä¾‹çš„è´¦æˆ·åˆ—è¡¨åªèŽ·å–ä¸€æ¬¡ã€‚
    |                     ^^
212 |         ç¡®ä¿è¿žæŽ¥æœ‰æ•ˆåŽï¼Œé€šè¿‡é€‚é…å™¨èŽ·å–è´¦æˆ·æ•°æ®ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:212:16
    |
211 |         ä½¿ç”¨ç¼“å­˜æœºåˆ¶ï¼ŒåŒä¸€å®žä¾‹çš„è´¦æˆ·åˆ—è¡¨åªèŽ·å–ä¸€æ¬¡ã€‚
212 |         ç¡®ä¿è¿žæŽ¥æœ‰æ•ˆåŽï¼Œé€šè¿‡é€‚é…å™¨èŽ·å–è´¦æˆ·æ•°æ®ã€‚
    |                       ^^
213 |
214 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:215:19
    |
214 |         Returns:
215 |             è´¦æˆ·å­—å…¸åˆ—è¡¨ï¼Œæ¯ä¸ªå­—å…¸åŒ…å«è´¦æˆ·çš„åŸºæœ¬ä¿¡æ¯ã€‚
    |                         ^^
216 |
217 |         Raises:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:242:20
    |
241 |     def synchronize_inventory(self) -> dict:
242 |         """æ‰§è¡Œæ¸…å•é˜¶æ®µåŒæ­¥ï¼ŒåŒæ­¥è´¦æˆ·åŸºæœ¬ä¿¡æ¯ã€‚.
    |                            ^^
243 |
244 |         èŽ·å–è¿œç¨‹è´¦æˆ·åˆ—è¡¨ï¼Œä¸Žæœ¬åœ°æ•°æ®åº“å¯¹æ¯”ï¼Œåˆ›å»ºæ–°è´¦æˆ·ã€åˆ·æ–°çŽ°æœ‰è´¦æˆ·ã€
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:244:17
    |
242 |         """æ‰§è¡Œæ¸…å•é˜¶æ®µåŒæ­¥ï¼ŒåŒæ­¥è´¦æˆ·åŸºæœ¬ä¿¡æ¯ã€‚.
243 |
244 |         èŽ·å–è¿œç¨‹è´¦æˆ·åˆ—è¡¨ï¼Œä¸Žæœ¬åœ°æ•°æ®åº“å¯¹æ¯”ï¼Œåˆ›å»ºæ–°è´¦æˆ·ã€åˆ·æ–°çŽ°æœ‰è´¦æˆ·ã€
    |                         ^^
245 |         æ ‡è®°æ´»è·ƒ/éžæ´»è·ƒçŠ¶æ€ã€‚åŒæ­¥ç»“æžœä¼šç¼“å­˜æ´»è·ƒè´¦æˆ·åˆ—è¡¨ä¾›æƒé™é˜¶æ®µä½¿ç”¨ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:244:26
    |
242 |         """æ‰§è¡Œæ¸…å•é˜¶æ®µåŒæ­¥ï¼ŒåŒæ­¥è´¦æˆ·åŸºæœ¬ä¿¡æ¯ã€‚.
243 |
244 |         èŽ·å–è¿œç¨‹è´¦æˆ·åˆ—è¡¨ï¼Œä¸Žæœ¬åœ°æ•°æ®åº“å¯¹æ¯”ï¼Œåˆ›å»ºæ–°è´¦æˆ·ã€åˆ·æ–°çŽ°æœ‰è´¦æˆ·ã€
    |                                           ^^
245 |         æ ‡è®°æ´»è·ƒ/éžæ´»è·ƒçŠ¶æ€ã€‚åŒæ­¥ç»“æžœä¼šç¼“å­˜æ´»è·ƒè´¦æˆ·åˆ—è¡¨ä¾›æƒé™é˜¶æ®µä½¿ç”¨ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:248:21
    |
247 |         Returns:
248 |             æ¸…å•åŒæ­¥ç»“æžœå­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                             ^^
249 |             {
250 |                 'status': 'completed',
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/accounts_sync/coordinator.py:248:26
    |
247 |         Returns:
248 |             æ¸…å•åŒæ­¥ç»“æžœå­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                       ^^
249 |             {
250 |                 'status': 'completed',
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:290:20
    |
289 |     def synchronize_permissions(self, *, session_id: str | None = None) -> dict:
290 |         """æ‰§è¡Œæƒé™é˜¶æ®µåŒæ­¥ï¼ŒåŒæ­¥æ´»è·ƒè´¦æˆ·çš„æƒé™ä¿¡æ¯ã€‚.
    |                            ^^
291 |
292 |         å¦‚æžœæ¸…å•é˜¶æ®µæœªæ‰§è¡Œï¼Œä¼šå…ˆè‡ªåŠ¨æ‰§è¡Œæ¸…å•åŒæ­¥ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:292:18
    |
290 |         """æ‰§è¡Œæƒé™é˜¶æ®µåŒæ­¥ï¼ŒåŒæ­¥æ´»è·ƒè´¦æˆ·çš„æƒé™ä¿¡æ¯ã€‚.
291 |
292 |         å¦‚æžœæ¸…å•é˜¶æ®µæœªæ‰§è¡Œï¼Œä¼šå…ˆè‡ªåŠ¨æ‰§è¡Œæ¸…å•åŒæ­¥ã€‚
    |                           ^^
293 |         åªä¸ºæ´»è·ƒè´¦æˆ·åŒæ­¥æƒé™ä¿¡æ¯ï¼Œè·³è¿‡éžæ´»è·ƒè´¦æˆ·ã€‚
294 |         æŒ‰éœ€è¡¥å…¨æƒé™ä¿¡æ¯ï¼ˆenrich_permissionsï¼‰ï¼Œé¿å…é‡å¤èŽ·å–ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:293:21
    |
292 |         å¦‚æžœæ¸…å•é˜¶æ®µæœªæ‰§è¡Œï¼Œä¼šå…ˆè‡ªåŠ¨æ‰§è¡Œæ¸…å•åŒæ­¥ã€‚
293 |         åªä¸ºæ´»è·ƒè´¦æˆ·åŒæ­¥æƒé™ä¿¡æ¯ï¼Œè·³è¿‡éžæ´»è·ƒè´¦æˆ·ã€‚
    |                                 ^^
294 |         æŒ‰éœ€è¡¥å…¨æƒé™ä¿¡æ¯ï¼ˆenrich_permissionsï¼‰ï¼Œé¿å…é‡å¤èŽ·å–ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/accounts_sync/coordinator.py:294:17
    |
292 |         å¦‚æžœæ¸…å•é˜¶æ®µæœªæ‰§è¡Œï¼Œä¼šå…ˆè‡ªåŠ¨æ‰§è¡Œæ¸…å•åŒæ­¥ã€‚
293 |         åªä¸ºæ´»è·ƒè´¦æˆ·åŒæ­¥æƒé™ä¿¡æ¯ï¼Œè·³è¿‡éžæ´»è·ƒè´¦æˆ·ã€‚
294 |         æŒ‰éœ€è¡¥å…¨æƒé™ä¿¡æ¯ï¼ˆenrich_permissionsï¼‰ï¼Œé¿å…é‡å¤èŽ·å–ã€‚
    |                         ^^
295 |
296 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/accounts_sync/coordinator.py:294:36
    |
292 |         å¦‚æžœæ¸…å•é˜¶æ®µæœªæ‰§è¡Œï¼Œä¼šå…ˆè‡ªåŠ¨æ‰§è¡Œæ¸…å•åŒæ­¥ã€‚
293 |         åªä¸ºæ´»è·ƒè´¦æˆ·åŒæ­¥æƒé™ä¿¡æ¯ï¼Œè·³è¿‡éžæ´»è·ƒè´¦æˆ·ã€‚
294 |         æŒ‰éœ€è¡¥å…¨æƒé™ä¿¡æ¯ï¼ˆenrich_permissionsï¼‰ï¼Œé¿å…é‡å¤èŽ·å–ã€‚
    |                                             ^^
295 |
296 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:294:37
    |
292 |         å¦‚æžœæ¸…å•é˜¶æ®µæœªæ‰§è¡Œï¼Œä¼šå…ˆè‡ªåŠ¨æ‰§è¡Œæ¸…å•åŒæ­¥ã€‚
293 |         åªä¸ºæ´»è·ƒè´¦æˆ·åŒæ­¥æƒé™ä¿¡æ¯ï¼Œè·³è¿‡éžæ´»è·ƒè´¦æˆ·ã€‚
294 |         æŒ‰éœ€è¡¥å…¨æƒé™ä¿¡æ¯ï¼ˆenrich_permissionsï¼‰ï¼Œé¿å…é‡å¤èŽ·å–ã€‚
    |                                               ^^
295 |
296 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:297:35
    |
296 |         Args:
297 |             session_id: å¯é€‰çš„åŒæ­¥ä¼šè¯ IDï¼Œç”¨äºŽå…³è”æ—¥å¿—å’Œé”™è¯¯è¿½è¸ªã€‚
    |                                          ^^
298 |
299 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:300:21
    |
299 |         Returns:
300 |             æƒé™åŒæ­¥ç»“æžœå­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                             ^^
301 |             {
302 |                 'status': 'completed',  # æˆ– 'skipped'
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/accounts_sync/coordinator.py:300:26
    |
299 |         Returns:
300 |             æƒé™åŒæ­¥ç»“æžœå­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                       ^^
301 |             {
302 |                 'status': 'completed',  # æˆ– 'skipped'
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:313:44
    |
311 |         Raises:
312 |             RuntimeError: å½“æ•°æ®åº“è¿žæŽ¥å¤±è´¥æ—¶æŠ›å‡ºã€‚
313 |             PermissionSyncError: å½“æƒé™åŒæ­¥å¤±è´¥æ—¶æŠ›å‡ºï¼ŒåŒ…å«è¯¦ç»†é”™è¯¯ä¿¡æ¯ã€‚
    |                                                      ^^
314 |
315 |         """
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:340:37
    |
338 |                 "updated": 0,
339 |                 "skipped": len(remote_accounts),
340 |                 "message": "æœªæ£€æµ‹åˆ°æ´»è·ƒè´¦æˆ·ï¼Œè·³è¿‡æƒé™åŒæ­¥",
    |                                             ^^
341 |                 "errors": [],
342 |             }
    |

E501 Line too long (122 > 120)
   --> app/services/accounts_sync/coordinator.py:356:121
    |
354 |         active_usernames = [account.username for account in active_accounts if getattr(account, "username", None)]
355 |         enriched_usernames = getattr(self, "_enriched_usernames", set())
356 |         pending_usernames = [username for username in active_usernames if username and username not in enriched_usernames]
    |                                                                                                                         ^^
357 |         if pending_usernames:
358 |             self._ensure_connection()
    |

E501 Line too long (121 > 120)
   --> app/services/accounts_sync/coordinator.py:394:121
    |
392 |             "updated": summary.get("updated", 0),
393 |             "skipped": summary.get("skipped", 0),
394 |             "processed_records": summary.get("processed_records", summary.get("created", 0) + summary.get("updated", 0)),
    |                                                                                                                         ^
395 |             "errors": summary.get("errors", []),
396 |             "message": summary.get("message"),
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:411:22
    |
409 |         """æ‰§è¡Œå®Œæ•´çš„ä¸¤é˜¶æ®µåŒæ­¥æµç¨‹ã€‚.
410 |
411 |         ä¾æ¬¡æ‰§è¡Œæ¸…å•é˜¶æ®µå’Œæƒé™é˜¶æ®µï¼Œè¿”å›žä¸¤ä¸ªé˜¶æ®µçš„æ±‡æ€»ç»“æžœã€‚
    |                                   ^^
412 |
413 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:414:35
    |
413 |         Args:
414 |             session_id: å¯é€‰çš„åŒæ­¥ä¼šè¯ IDï¼Œç”¨äºŽå…³è”æ—¥å¿—å’Œé”™è¯¯è¿½è¸ªã€‚
    |                                          ^^
415 |
416 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/coordinator.py:417:24
    |
416 |         Returns:
417 |             åŒ…å«ä¸¤ä¸ªé˜¶æ®µç»“æžœçš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                   ^^
418 |             {
419 |                 'inventory': {...},    # synchronize_inventory çš„è¿”å›žå€¼
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/accounts_sync/coordinator.py:417:29
    |
416 |         Returns:
417 |             åŒ…å«ä¸¤ä¸ªé˜¶æ®µç»“æžœçš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                             ^^
418 |             {
419 |                 'inventory': {...},    # synchronize_inventory çš„è¿”å›žå€¼
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/accounts_sync/inventory_manager.py:1:13
  |
1 | """è´¦æˆ·æ¸…å•åŒæ­¥ç®¡ç†å™¨ï¼Œè´Ÿè´£ç»´æŠ¤ InstanceAccount çŠ¶æ€ã€‚."""
  |                      ^^
2 |
3 | from __future__ import annotations
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/inventory_manager.py:21:40
   |
19 |     """ç»´æŠ¤ InstanceAccount æ¸…å•åŒæ­¥çš„ç®¡ç†å™¨ã€‚.
20 |
21 |     è´Ÿè´£å°†è¿œç¨‹æ•°æ®åº“è´¦æˆ·ä¸Žæœ¬åœ° InstanceAccount è¡¨è¿›è¡ŒåŒæ­¥ï¼Œ
   |                                                          ^^
22 |     åŒ…æ‹¬åˆ›å»ºæ–°è´¦æˆ·ã€é‡æ–°æ¿€æ´»å·²åˆ é™¤è´¦æˆ·ã€åœç”¨ä¸å­˜åœ¨çš„è´¦æˆ·ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/inventory_manager.py:36:26
   |
34 |         """æ ¹æ®è¿œç«¯è´¦æˆ·åˆ—è¡¨åŒæ­¥ InstanceAccount è¡¨ã€‚.
35 |
36 |         å°†è¿œç¨‹è´¦æˆ·æ•°æ®ä¸Žæœ¬åœ°æ•°æ®åº“è¿›è¡Œå¯¹æ¯”ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
   |                                           ^^
37 |         - åˆ›å»ºæ–°å‘çŽ°çš„è´¦æˆ·
38 |         - é‡æ–°æ¿€æ´»ä¹‹å‰è¢«åˆ é™¤çš„è´¦æˆ·
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/accounts_sync/inventory_manager.py:36:33
   |
34 |         """æ ¹æ®è¿œç«¯è´¦æˆ·åˆ—è¡¨åŒæ­¥ InstanceAccount è¡¨ã€‚.
35 |
36 |         å°†è¿œç¨‹è´¦æˆ·æ•°æ®ä¸Žæœ¬åœ°æ•°æ®åº“è¿›è¡Œå¯¹æ¯”ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
   |                                                         ^^
37 |         - åˆ›å»ºæ–°å‘çŽ°çš„è´¦æˆ·
38 |         - é‡æ–°æ¿€æ´»ä¹‹å‰è¢«åˆ é™¤çš„è´¦æˆ·
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/inventory_manager.py:44:38
   |
42 |         Args:
43 |             instance: æ•°æ®åº“å®žä¾‹å¯¹è±¡ã€‚
44 |             remote_accounts: è¿œç¨‹è´¦æˆ·æ•°æ®åˆ—è¡¨ï¼Œæ¯é¡¹è‡³å°‘åŒ…å«ä»¥ä¸‹å­—æ®µï¼š
   |                                              ^^
45 |                 - username: è´¦æˆ·ç”¨æˆ·å
46 |                 - db_type: æ•°æ®åº“ç±»åž‹ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨å®žä¾‹ç±»åž‹ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/accounts_sync/inventory_manager.py:44:49
   |
42 |         Args:
43 |             instance: æ•°æ®åº“å®žä¾‹å¯¹è±¡ã€‚
44 |             remote_accounts: è¿œç¨‹è´¦æˆ·æ•°æ®åˆ—è¡¨ï¼Œæ¯é¡¹è‡³å°‘åŒ…å«ä»¥ä¸‹å­—æ®µï¼š
   |                                                                    ^^
45 |                 - username: è´¦æˆ·ç”¨æˆ·å
46 |                 - db_type: æ•°æ®åº“ç±»åž‹ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨å®žä¾‹ç±»åž‹ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/accounts_sync/inventory_manager.py:46:33
   |
44 |             remote_accounts: è¿œç¨‹è´¦æˆ·æ•°æ®åˆ—è¡¨ï¼Œæ¯é¡¹è‡³å°‘åŒ…å«ä»¥ä¸‹å­—æ®µï¼š
45 |                 - username: è´¦æˆ·ç”¨æˆ·å
46 |                 - db_type: æ•°æ®åº“ç±»åž‹ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨å®žä¾‹ç±»åž‹ï¼‰
   |                                      ^^
47 |                 - is_active: æ˜¯å¦æ´»è·ƒï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º Trueï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/inventory_manager.py:46:36
   |
44 |             remote_accounts: è¿œç¨‹è´¦æˆ·æ•°æ®åˆ—è¡¨ï¼Œæ¯é¡¹è‡³å°‘åŒ…å«ä»¥ä¸‹å­—æ®µï¼š
45 |                 - username: è´¦æˆ·ç”¨æˆ·å
46 |                 - db_type: æ•°æ®åº“ç±»åž‹ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨å®žä¾‹ç±»åž‹ï¼‰
   |                                            ^^
47 |                 - is_active: æ˜¯å¦æ´»è·ƒï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º Trueï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/accounts_sync/inventory_manager.py:46:45
   |
44 |             remote_accounts: è¿œç¨‹è´¦æˆ·æ•°æ®åˆ—è¡¨ï¼Œæ¯é¡¹è‡³å°‘åŒ…å«ä»¥ä¸‹å­—æ®µï¼š
45 |                 - username: è´¦æˆ·ç”¨æˆ·å
46 |                 - db_type: æ•°æ®åº“ç±»åž‹ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨å®žä¾‹ç±»åž‹ï¼‰
   |                                                              ^^
47 |                 - is_active: æ˜¯å¦æ´»è·ƒï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º Trueï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/accounts_sync/inventory_manager.py:47:34
   |
45 |                 - username: è´¦æˆ·ç”¨æˆ·å
46 |                 - db_type: æ•°æ®åº“ç±»åž‹ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨å®žä¾‹ç±»åž‹ï¼‰
47 |                 - is_active: æ˜¯å¦æ´»è·ƒï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º Trueï¼‰
   |                                      ^^
48 |
49 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/inventory_manager.py:47:37
   |
45 |                 - username: è´¦æˆ·ç”¨æˆ·å
46 |                 - db_type: æ•°æ®åº“ç±»åž‹ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨å®žä¾‹ç±»åž‹ï¼‰
47 |                 - is_active: æ˜¯å¦æ´»è·ƒï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º Trueï¼‰
   |                                            ^^
48 |
49 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/accounts_sync/inventory_manager.py:47:46
   |
45 |                 - username: è´¦æˆ·ç”¨æˆ·å
46 |                 - db_type: æ•°æ®åº“ç±»åž‹ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨å®žä¾‹ç±»åž‹ï¼‰
47 |                 - is_active: æ˜¯å¦æ´»è·ƒï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º Trueï¼‰
   |                                                         ^^
48 |
49 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/accounts_sync/inventory_manager.py:50:22
   |
49 |         Returns:
50 |             åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„å…ƒç»„ï¼š
   |                               ^^
51 |             - åŒæ­¥ç»Ÿè®¡ä¿¡æ¯å­—å…¸ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
52 |                 {
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/inventory_manager.py:51:23
   |
49 |         Returns:
50 |             åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„å…ƒç»„ï¼š
51 |             - åŒæ­¥ç»Ÿè®¡ä¿¡æ¯å­—å…¸ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
   |                               ^^
52 |                 {
53 |                     'created': æ–°åˆ›å»ºçš„è´¦æˆ·æ•°,
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/accounts_sync/inventory_manager.py:51:30
   |
49 |         Returns:
50 |             åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„å…ƒç»„ï¼š
51 |             - åŒæ­¥ç»Ÿè®¡ä¿¡æ¯å­—å…¸ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
   |                                             ^^
52 |                 {
53 |                     'created': æ–°åˆ›å»ºçš„è´¦æˆ·æ•°,
   |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/accounts_sync/inventory_manager.py:128:25
    |
126 |         except Exception as exc:
127 |             db.session.rollback()
128 |             self.logger.error(
    |                         ^^^^^
129 |                 "account_inventory_sync_commit_failed",
130 |                 instance=instance.name,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/accounts_sync/permission_manager.py:1:13
  |
1 | """è´¦æˆ·æƒé™åŒæ­¥ç®¡ç†å™¨ï¼Œå®žçŽ°æƒé™å¢žé‡åŠå˜æ›´æ—¥å¿—ã€‚."""
  |                      ^^
2 |
3 | from __future__ import annotations
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/permission_manager.py:62:21
   |
61 | class PermissionSyncError(RuntimeError):
62 |     """æƒé™åŒæ­¥é˜¶æ®µå‡ºçŽ°é”™è¯¯æ—¶æŠ›å‡ºï¼Œæºå¸¦é˜¶æ®µ summaryã€‚.
   |                                  ^^
63 |
64 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/permission_manager.py:74:26
   |
72 |         Args:
73 |             summary: åŒæ­¥é˜¶æ®µçš„ç»Ÿè®¡ä¿¡æ¯ã€‚
74 |             message: é”™è¯¯æ¶ˆæ¯ï¼Œå¯é€‰ã€‚
   |                              ^^
75 |
76 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/accounts_sync/permission_manager.py:84:41
   |
82 |     """å¤„ç†æƒé™å¿«ç…§çš„å¢žé‡æ›´æ–°ã€‚.
83 |
84 |     è´Ÿè´£å°†è¿œç¨‹è´¦æˆ·æƒé™ä¸Žæœ¬åœ° AccountPermission è¡¨è¿›è¡ŒåŒæ­¥ï¼Œ
   |                                                          ^^
85 |     åŒ…æ‹¬åˆ›å»ºæ–°æƒé™è®°å½•ã€æ›´æ–°å·²å˜æ›´çš„æƒé™ã€è®°å½•æƒé™å˜æ›´æ—¥å¿—ã€‚
   |

C901 `synchronize` is too complex (11 > 10)
  --> app/services/accounts_sync/permission_manager.py:96:9
   |
94 |         self.logger = get_sync_logger()
95 |
96 |     def synchronize(
   |         ^^^^^^^^^^^
97 |         self,
98 |         instance: Instance,
   |

PLR0915 Too many statements (62 > 50)
  --> app/services/accounts_sync/permission_manager.py:96:9
   |
94 |         self.logger = get_sync_logger()
95 |
96 |     def synchronize(
   |         ^^^^^^^^^^^
97 |         self,
98 |         instance: Instance,
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/permission_manager.py:106:26
    |
104 |         """åŒæ­¥è´¦æˆ·æƒé™æ•°æ®ã€‚.
105 |
106 |         å°†è¿œç¨‹è´¦æˆ·æƒé™ä¸Žæœ¬åœ°æ•°æ®åº“è¿›è¡Œå¯¹æ¯”ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
    |                                           ^^
107 |         - åˆ›å»ºæ–°è´¦æˆ·çš„æƒé™è®°å½•
108 |         - æ›´æ–°å·²å˜æ›´çš„æƒé™
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/accounts_sync/permission_manager.py:106:33
    |
104 |         """åŒæ­¥è´¦æˆ·æƒé™æ•°æ®ã€‚.
105 |
106 |         å°†è¿œç¨‹è´¦æˆ·æƒé™ä¸Žæœ¬åœ°æ•°æ®åº“è¿›è¡Œå¯¹æ¯”ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
    |                                                         ^^
107 |         - åˆ›å»ºæ–°è´¦æˆ·çš„æƒé™è®°å½•
108 |         - æ›´æ–°å·²å˜æ›´çš„æƒé™
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/permission_manager.py:113:38
    |
111 |         Args:
112 |             instance: æ•°æ®åº“å®žä¾‹å¯¹è±¡ã€‚
113 |             remote_accounts: è¿œç¨‹è´¦æˆ·æ•°æ®åˆ—è¡¨ï¼Œæ¯é¡¹åŒ…å« usernameã€permissionsã€
    |                                              ^^
114 |                 is_superuserã€is_locked ç­‰å­—æ®µã€‚
115 |             active_accounts: æ´»è·ƒçš„ InstanceAccount å¯¹è±¡åˆ—è¡¨ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/permission_manager.py:116:32
    |
114 |                 is_superuserã€is_locked ç­‰å­—æ®µã€‚
115 |             active_accounts: æ´»è·ƒçš„ InstanceAccount å¯¹è±¡åˆ—è¡¨ã€‚
116 |             session_id: åŒæ­¥ä¼šè¯ IDï¼Œå¯é€‰ã€‚
    |                                    ^^
117 |
118 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/permission_manager.py:119:21
    |
118 |         Returns:
119 |             åŒæ­¥ç»Ÿè®¡ä¿¡æ¯å­—å…¸ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
    |                             ^^
120 |             {
121 |                 'created': æ–°åˆ›å»ºçš„æƒé™è®°å½•æ•°,
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/accounts_sync/permission_manager.py:119:28
    |
118 |         Returns:
119 |             åŒæ­¥ç»Ÿè®¡ä¿¡æ¯å­—å…¸ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
    |                                           ^^
120 |             {
121 |                 'created': æ–°åˆ›å»ºçš„æƒé™è®°å½•æ•°,
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/accounts_sync/permission_manager.py:126:31
    |
124 |                 'processed_records': å¤„ç†çš„è®°å½•æ€»æ•°,
125 |                 'errors': é”™è¯¯ä¿¡æ¯åˆ—è¡¨,
126 |                 'status': åŒæ­¥çŠ¶æ€ï¼ˆ'completed' æˆ– 'failed'ï¼‰,
    |                                   ^^
127 |                 'message': åŒæ­¥ç»“æžœæ¶ˆæ¯
128 |             }
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/accounts_sync/permission_manager.py:126:54
    |
124 |                 'processed_records': å¤„ç†çš„è®°å½•æ€»æ•°,
125 |                 'errors': é”™è¯¯ä¿¡æ¯åˆ—è¡¨,
126 |                 'status': åŒæ­¥çŠ¶æ€ï¼ˆ'completed' æˆ– 'failed'ï¼‰,
    |                                                            ^^
127 |                 'message': åŒæ­¥ç»“æžœæ¶ˆæ¯
128 |             }
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/accounts_sync/permission_manager.py:233:25
    |
231 |         except SQLAlchemyError as exc:
232 |             db.session.rollback()
233 |             self.logger.error(
    |                         ^^^^^
234 |                 "account_permission_sync_commit_failed",
235 |                 instance=instance.name,
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/accounts_sync/permission_manager.py:252:25
    |
250 |             "status": "completed" if not errors else "failed",
251 |             "message": (
252 |                 f"æƒé™åŒæ­¥å®Œæˆï¼šæ–°å¢ž {created} ä¸ªè´¦æˆ·ï¼Œæ›´æ–° {updated} ä¸ªè´¦æˆ·"
    |                               ^^
253 |                 if not errors
254 |                 else "æƒé™åŒæ­¥é˜¶æ®µå‘ç”Ÿé”™è¯¯"
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/permission_manager.py:252:42
    |
250 |             "status": "completed" if not errors else "failed",
251 |             "message": (
252 |                 f"æƒé™åŒæ­¥å®Œæˆï¼šæ–°å¢ž {created} ä¸ªè´¦æˆ·ï¼Œæ›´æ–° {updated} ä¸ªè´¦æˆ·"
    |                                                      ^^
253 |                 if not errors
254 |                 else "æƒé™åŒæ­¥é˜¶æ®µå‘ç”Ÿé”™è¯¯"
    |

FBT001 Boolean-typed positional argument in function definition
   --> app/services/accounts_sync/permission_manager.py:288:9
    |
286 |         record: AccountPermission,
287 |         permissions: dict,
288 |         is_superuser: bool,
    |         ^^^^^^^^^^^^
289 |         is_locked: bool,
290 |     ) -> None:
    |

FBT001 Boolean-typed positional argument in function definition
   --> app/services/accounts_sync/permission_manager.py:289:9
    |
287 |         permissions: dict,
288 |         is_superuser: bool,
289 |         is_locked: bool,
    |         ^^^^^^^^^
290 |     ) -> None:
291 |         """å°†æƒé™å¿«ç…§å†™å…¥è´¦æˆ·è®°å½•ã€‚.
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/permission_manager.py:309:23
    |
307 |                 setattr(record, field, permissions[field])
308 |             elif field == "type_specific":
309 |                 # è‹¥æœªæä¾›ï¼Œä¿æŒåŽŸå€¼
    |                           ^^
310 |                 continue
311 |             else:
    |

C901 `_calculate_diff` is too complex (11 > 10)
   --> app/services/accounts_sync/permission_manager.py:314:9
    |
312 |                 setattr(record, field, None)
313 |
314 |     def _calculate_diff(
    |         ^^^^^^^^^^^^^^^
315 |         self,
316 |         record: AccountPermission,
    |

FBT001 Boolean-typed positional argument in function definition
   --> app/services/accounts_sync/permission_manager.py:318:9
    |
316 |         record: AccountPermission,
317 |         permissions: dict,
318 |         is_superuser: bool,
    |         ^^^^^^^^^^^^
319 |         is_locked: bool,
320 |     ) -> dict[str, Any]:
    |

FBT001 Boolean-typed positional argument in function definition
   --> app/services/accounts_sync/permission_manager.py:319:9
    |
317 |         permissions: dict,
318 |         is_superuser: bool,
319 |         is_locked: bool,
    |         ^^^^^^^^^
320 |     ) -> dict[str, Any]:
321 |         """è®¡ç®—æ–°æ—§æƒé™ä¹‹é—´çš„å·®å¼‚ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/permission_manager.py:399:32
    |
397 |             change_type: å˜æ›´ç±»åž‹ã€‚
398 |             diff_payload: å·®å¼‚ç»“æžœã€‚
399 |             session_id: åŒæ­¥ä¼šè¯ IDï¼Œå¯é€‰ã€‚
    |                                    ^^
400 |
401 |         Returns:
    |

FBT001 Boolean-typed positional argument in function definition
   --> app/services/accounts_sync/permission_manager.py:431:9
    |
429 |         self,
430 |         permissions: dict[str, Any],
431 |         is_superuser: bool,
    |         ^^^^^^^^^^^^
432 |         is_locked: bool,
433 |     ) -> dict[str, Any]:
    |

FBT001 Boolean-typed positional argument in function definition
   --> app/services/accounts_sync/permission_manager.py:432:9
    |
430 |         permissions: dict[str, Any],
431 |         is_superuser: bool,
432 |         is_locked: bool,
    |         ^^^^^^^^^
433 |     ) -> dict[str, Any]:
434 |         """æž„å»ºæ–°è´¦æˆ·çš„æƒé™å·®å¼‚åˆå§‹ç»“æž„ã€‚.
    |

FBT003 Boolean positional value in function call
   --> app/services/accounts_sync/permission_manager.py:453:72
    |
451 |         other_diff: list[dict[str, Any]] = []
452 |         if is_superuser:
453 |             other_entry = self._build_other_diff_entry("is_superuser", False, True)
    |                                                                        ^^^^^
454 |             if other_entry:
455 |                 other_diff.append(other_entry)
    |

FBT003 Boolean positional value in function call
   --> app/services/accounts_sync/permission_manager.py:453:79
    |
451 |         other_diff: list[dict[str, Any]] = []
452 |         if is_superuser:
453 |             other_entry = self._build_other_diff_entry("is_superuser", False, True)
    |                                                                               ^^^^
454 |             if other_entry:
455 |                 other_diff.append(other_entry)
    |

FBT003 Boolean positional value in function call
   --> app/services/accounts_sync/permission_manager.py:457:70
    |
455 |                 other_diff.append(other_entry)
456 |         if is_locked:
457 |             locked_entry = self._build_other_diff_entry("is_locked", False, True)
    |                                                                      ^^^^^
458 |             if locked_entry:
459 |                 other_diff.append(locked_entry)
    |

FBT003 Boolean positional value in function call
   --> app/services/accounts_sync/permission_manager.py:457:77
    |
455 |                 other_diff.append(other_entry)
456 |         if is_locked:
457 |             locked_entry = self._build_other_diff_entry("is_locked", False, True)
    |                                                                             ^^^^
458 |             if locked_entry:
459 |                 other_diff.append(locked_entry)
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `old_value`
   --> app/services/accounts_sync/permission_manager.py:474:20
    |
472 |         self,
473 |         field: str,
474 |         old_value: Any,
    |                    ^^^
475 |         new_value: Any,
476 |     ) -> list[dict[str, Any]]:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `new_value`
   --> app/services/accounts_sync/permission_manager.py:475:20
    |
473 |         field: str,
474 |         old_value: Any,
475 |         new_value: Any,
    |                    ^^^
476 |     ) -> list[dict[str, Any]]:
477 |         """æ¯”è¾ƒæƒé™å­—æ®µå¹¶è¿”å›žå·®å¼‚æ¡ç›®ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/permission_manager.py:481:28
    |
479 |         Args:
480 |             field: æƒé™å­—æ®µåç§°ã€‚
481 |             old_value: åŽŸæƒé™å€¼ï¼Œå¯ä¸ºæ˜ å°„æˆ–åºåˆ—ã€‚
    |                                ^^
482 |             new_value: æ–°æƒé™å€¼ã€‚
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `old_value`
   --> app/services/accounts_sync/permission_manager.py:579:20
    |
577 |         self,
578 |         field: str,
579 |         old_value: Any,
    |                    ^^^
580 |         new_value: Any,
581 |     ) -> dict[str, Any] | None:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `new_value`
   --> app/services/accounts_sync/permission_manager.py:580:20
    |
578 |         field: str,
579 |         old_value: Any,
580 |         new_value: Any,
    |                    ^^^
581 |     ) -> dict[str, Any] | None:
582 |         """æž„å»ºéžæƒé™å­—æ®µçš„å·®å¼‚æ¡ç›®ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/permission_manager.py:590:36
    |
589 |         Returns:
590 |             dict | None: è‹¥å‘ç”Ÿå˜åŒ–åˆ™è¿”å›žè®°å½•ï¼Œå¦åˆ™è¿”å›ž Noneã€‚
    |                                              ^^
591 |
592 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `old_value`
   --> app/services/accounts_sync/permission_manager.py:606:63
    |
604 |         }
605 |
606 |     def _build_other_description(self, label: str, old_value: Any, new_value: Any) -> str:
    |                                                               ^^^
607 |         """ç”Ÿæˆéžæƒé™å­—æ®µå·®å¼‚çš„è‡ªç„¶è¯­è¨€æè¿°ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `new_value`
   --> app/services/accounts_sync/permission_manager.py:606:79
    |
604 |         }
605 |
606 |     def _build_other_description(self, label: str, old_value: Any, new_value: Any) -> str:
    |                                                                               ^^^
607 |         """ç”Ÿæˆéžæƒé™å­—æ®µå·®å¼‚çš„è‡ªç„¶è¯­è¨€æè¿°ã€‚.
    |

C901 `_build_change_summary` is too complex (11 > 10)
   --> app/services/accounts_sync/permission_manager.py:628:9
    |
626 |         return f"{label} å·²æ›´æ–°"
627 |
628 |     def _build_change_summary(
    |         ^^^^^^^^^^^^^^^^^^^^^
629 |         self,
630 |         username: str,
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/permission_manager.py:652:39
    |
650 |             grant_count = self._count_permissions_by_action(privilege_diff, "GRANT")
651 |             if grant_count:
652 |                 segments.append(f"æ–°å¢žè´¦æˆ·ï¼Œèµ‹äºˆ {grant_count} é¡¹æƒé™")
    |                                           ^^
653 |             else:
654 |                 segments.append("æ–°å¢žè´¦æˆ·")
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/accounts_sync/permission_manager.py:668:42
    |
666 |                     parts.append(f"æ›´æ–° {alter_count} é¡¹æƒé™")
667 |                 if parts:
668 |                     segments.append("æƒé™æ›´æ–°ï¼š" + "ï¼Œ".join(parts))
    |                                              ^^
669 |
670 |             if other_diff:
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/permission_manager.py:668:48
    |
666 |                     parts.append(f"æ›´æ–° {alter_count} é¡¹æƒé™")
667 |                 if parts:
668 |                     segments.append("æƒé™æ›´æ–°ï¼š" + "ï¼Œ".join(parts))
    |                                                     ^^
669 |
670 |             if other_diff:
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/accounts_sync/permission_manager.py:673:42
    |
671 |                 descriptions = [entry.get("description") for entry in other_diff if entry.get("description")]
672 |                 if descriptions:
673 |                     segments.append("å…¶ä»–å˜æ›´ï¼š" + "ï¼Œ".join(descriptions))
    |                                              ^^
674 |
675 |         base = f"è´¦æˆ· {username}"
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/permission_manager.py:673:48
    |
671 |                 descriptions = [entry.get("description") for entry in other_diff if entry.get("description")]
672 |                 if descriptions:
673 |                     segments.append("å…¶ä»–å˜æ›´ï¼š" + "ï¼Œ".join(descriptions))
    |                                                     ^^
674 |
675 |         base = f"è´¦æˆ· {username}"
    |

RUF001 String contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/services/accounts_sync/permission_manager.py:677:34
    |
675 |         base = f"è´¦æˆ· {username}"
676 |         if segments:
677 |             return f"{base} " + "ï¼›".join(segments)
    |                                  ^^
678 |         return f"{base} æœªå‘ç”Ÿå˜æ›´"
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `value`
   --> app/services/accounts_sync/permission_manager.py:681:28
    |
680 |     @staticmethod
681 |     def _is_mapping(value: Any) -> bool:
    |                            ^^^
682 |         """åˆ¤æ–­å€¼æ˜¯å¦ä¸ºæ˜ å°„ç±»åž‹ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/permission_manager.py:688:31
    |
687 |         Returns:
688 |             bool: æ˜¯æ˜ å°„ç±»åž‹è¿”å›ž Trueï¼Œå¦åˆ™ Falseã€‚
    |                                      ^^
689 |
690 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `value`
   --> app/services/accounts_sync/permission_manager.py:694:35
    |
693 |     @staticmethod
694 |     def _normalize_mapping(value: Any) -> dict[str, set]:
    |                                   ^^^
695 |         """å°†æƒé™æ˜ å°„æ ‡å‡†åŒ–ä¸º {str: set} ç»“æž„ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/accounts_sync/permission_manager.py:701:34
    |
700 |         Returns:
701 |             dict[str, set]: é”®ä¸ºå­—ç¬¦ä¸²ï¼Œå€¼ä¸ºåŽ»é‡é›†åˆã€‚
    |                                       ^^
702 |
703 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `value`
   --> app/services/accounts_sync/permission_manager.py:712:36
    |
711 |     @staticmethod
712 |     def _normalize_sequence(value: Any) -> set:
    |                                    ^^^
713 |         """å°†å•å€¼æˆ–åºåˆ—è½¬æ¢ä¸ºé›†åˆå½¢å¼ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `value`
   --> app/services/accounts_sync/permission_manager.py:729:28
    |
728 |     @staticmethod
729 |     def _repr_value(value: Any) -> str:
    |                            ^^^
730 |         """å°†å€¼è½¬æ¢ä¸ºæ—¥å¿—å‹å¥½çš„æ–‡æœ¬ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/aggregation/aggregation_service.py:3:18
  |
1 | """èšåˆæœåŠ¡ã€‚.
2 |
3 | æ”¯æŒæ•°æ®åº“çº§ä¸Žå®žä¾‹çº§çš„å‘¨æœŸèšåˆè®¡ç®—ï¼ŒåŒ…æ‹¬æ—¥ã€å‘¨ã€æœˆã€å­£åº¦å››ç§å‘¨æœŸç±»åž‹ã€‚
  |                                   ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/aggregation_service.py:32:24
   |
30 |     """èšåˆæœåŠ¡ã€‚.
31 |
32 |     æä¾›æ•°æ®åº“çº§å’Œå®žä¾‹çº§çš„å‘¨æœŸèšåˆè®¡ç®—åŠŸèƒ½ï¼Œæ”¯æŒæ—¥ã€å‘¨ã€æœˆã€å­£åº¦å››ç§å‘¨æœŸç±»åž‹ã€‚
   |                                           ^^
33 |
34 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/aggregation_service.py:74:22
   |
73 |     def _get_instance_or_raise(self, instance_id: int) -> Instance:
74 |         """æ ¹æ® ID èŽ·å–å®žä¾‹ï¼Œè‹¥ä¸å­˜åœ¨åˆ™æŠ›é”™ã€‚.
   |                            ^^
75 |
76 |         Args:
   |

ARG002 Unused method argument: `target_date`
  --> app/services/aggregation/aggregation_service.py:94:42
   |
92 |         return instance
93 |
94 |     def _ensure_partition_for_date(self, target_date: date) -> None:
   |                                          ^^^^^^^^^^^
95 |         """ä¿ç•™æŽ¥å£ï¼Œå½“å‰çŽ¯å¢ƒæ— éœ€åˆ†åŒºé¢„å¤„ç†ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/aggregation_service.py:95:16
   |
94 |     def _ensure_partition_for_date(self, target_date: date) -> None:
95 |         """ä¿ç•™æŽ¥å£ï¼Œå½“å‰çŽ¯å¢ƒæ— éœ€åˆ†åŒºé¢„å¤„ç†ã€‚.
   |                    ^^
96 |
97 |         Args:
   |

ANN001 Missing type annotation for function argument `aggregation`
   --> app/services/aggregation/aggregation_service.py:106:44
    |
104 |         return
105 |
106 |     def _commit_with_partition_retry(self, aggregation, start_date: date) -> None:
    |                                            ^^^^^^^^^^^
107 |         """æäº¤èšåˆè®°å½•ï¼Œç§»é™¤åˆ†åŒºé‡è¯•é€»è¾‘ã€‚.
    |

ARG002 Unused method argument: `aggregation`
   --> app/services/aggregation/aggregation_service.py:106:44
    |
104 |         return
105 |
106 |     def _commit_with_partition_retry(self, aggregation, start_date: date) -> None:
    |                                            ^^^^^^^^^^^
107 |         """æäº¤èšåˆè®°å½•ï¼Œç§»é™¤åˆ†åŒºé‡è¯•é€»è¾‘ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/aggregation_service.py:107:18
    |
106 |     def _commit_with_partition_retry(self, aggregation, start_date: date) -> None:
107 |         """æäº¤èšåˆè®°å½•ï¼Œç§»é™¤åˆ†åŒºé‡è¯•é€»è¾‘ã€‚.
    |                        ^^
108 |
109 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/aggregation_service.py:110:32
    |
109 |         Args:
110 |             aggregation: èšåˆç»“æžœå¯¹è±¡ï¼Œä»…ç”¨äºŽé”™è¯¯æ—¥å¿—ã€‚
    |                                      ^^
111 |             start_date: èšåˆå‘¨æœŸå¼€å§‹æ—¥æœŸã€‚
    |

FBT001 Boolean-typed positional argument in function definition
   --> app/services/aggregation/aggregation_service.py:152:61
    |
150 |         return (period_type or "").lower() == "daily"
151 |
152 |     def _resolve_use_current_period(self, period_type: str, override: bool | None = None) -> bool:
    |                                                             ^^^^^^^^
153 |         """ç»“åˆè¦†ç›–é…ç½®åˆ¤æ–­æ˜¯å¦ä½¿ç”¨å½“å‰å‘¨æœŸã€‚."""
154 |         if override is not None:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/aggregation/aggregation_service.py:189:41
    |
187 |             instance_id: å®žä¾‹ IDã€‚
188 |             period_type: å‘¨æœŸç±»åž‹ã€‚
189 |             use_current_period: æ˜¯å¦ä½¿ç”¨å½“å‰å‘¨æœŸï¼ˆå¦åˆ™ä½¿ç”¨ä¸Šä¸€å‘¨æœŸï¼‰ã€‚
    |                                                 ^^
190 |
191 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/aggregation/aggregation_service.py:189:50
    |
187 |             instance_id: å®žä¾‹ IDã€‚
188 |             period_type: å‘¨æœŸç±»åž‹ã€‚
189 |             use_current_period: æ˜¯å¦ä½¿ç”¨å½“å‰å‘¨æœŸï¼ˆå¦åˆ™ä½¿ç”¨ä¸Šä¸€å‘¨æœŸï¼‰ã€‚
    |                                                                   ^^
190 |
191 |         Returns:
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/aggregation_service.py:238:19
    |
236 |         """
237 |         log_info(
238 |             "å®žä¾‹æœªæ¿€æ´»ï¼Œè·³è¿‡èšåˆ",
    |                        ^^
239 |             module=MODULE,
240 |             instance_id=instance.id,
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/aggregation_service.py:248:45
    |
246 |             instance_name=instance.name,
247 |             period_type=period_type,
248 |             message=f"å®žä¾‹ {instance.name} æœªæ¿€æ´»ï¼Œè·³è¿‡èšåˆ",
    |                                                  ^^
249 |         )
250 |         return summary.to_dict()
    |

ANN001 Missing type annotation for function argument `runner`
   --> app/services/aggregation/aggregation_service.py:255:9
    |
253 |         self,
254 |         *,
255 |         runner,
    |         ^^^^^^
256 |         period_type: str,
257 |         use_current_period: bool,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/aggregation_service.py:307:31
    |
306 |         Args:
307 |             periods: æŒ‡å®šçš„å‘¨æœŸåç§°åˆ—è¡¨ï¼Œå¦‚ day/week/monthï¼›ä¸ºç©ºæ—¶é»˜è®¤å…¨éƒ¨ã€‚
    |                                        ^^
308 |             use_current_periods: è¦†ç›–å„å‘¨æœŸæ˜¯å¦ä½¿ç”¨å½“å‰å‘¨æœŸçš„è®¾ç½®ï¼Œé”®ä¸ºå‘¨æœŸåã€‚
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/services/aggregation/aggregation_service.py:307:48
    |
306 |         Args:
307 |             periods: æŒ‡å®šçš„å‘¨æœŸåç§°åˆ—è¡¨ï¼Œå¦‚ day/week/monthï¼›ä¸ºç©ºæ—¶é»˜è®¤å…¨éƒ¨ã€‚
    |                                                           ^^
308 |             use_current_periods: è¦†ç›–å„å‘¨æœŸæ˜¯å¦ä½¿ç”¨å½“å‰å‘¨æœŸçš„è®¾ç½®ï¼Œé”®ä¸ºå‘¨æœŸåã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/aggregation_service.py:308:50
    |
306 |         Args:
307 |             periods: æŒ‡å®šçš„å‘¨æœŸåç§°åˆ—è¡¨ï¼Œå¦‚ day/week/monthï¼›ä¸ºç©ºæ—¶é»˜è®¤å…¨éƒ¨ã€‚
308 |             use_current_periods: è¦†ç›–å„å‘¨æœŸæ˜¯å¦ä½¿ç”¨å½“å‰å‘¨æœŸçš„è®¾ç½®ï¼Œé”®ä¸ºå‘¨æœŸåã€‚
    |                                                                  ^^
309 |
310 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/aggregation_service.py:311:49
    |
310 |         Returns:
311 |             dict[str, Dict[str, Any]]: key ä¸ºå‘¨æœŸåç§°ï¼Œvalue ä¸ºèšåˆç»“æžœå­—å…¸ã€‚
    |                                                      ^^
312 |
313 |         """
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/aggregation/aggregation_service.py:325:20
    |
323 |             try:
324 |                 period_result = method(use_current_period=use_current)
325 |             except Exception as exc:  # pragma: no cover - é˜²å¾¡æ€§æ—¥å¿—
    |                    ^^^^^^^^^
326 |                 log_error(
327 |                     "æ•°æ®åº“çº§èšåˆæ‰§è¡Œå¤±è´¥",
    |

E501 Line too long (121 > 120)
   --> app/services/aggregation/aggregation_service.py:375:121
    |
374 |         failed_periods = [
375 |             period for period, result in period_results.items() if result.get("status") == AggregationStatus.FAILED.value
    |                                                                                                                         ^
376 |         ]
377 |         failed_instance_periods = [
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/aggregation_service.py:392:27
    |
390 |             "ç»Ÿè®¡èšåˆæ‰§è¡Œå®Œæˆ"
391 |             if overall_status is AggregationStatus.COMPLETED
392 |             else "ç»Ÿè®¡èšåˆæ‰§è¡Œå®Œæˆï¼Œä½†å­˜åœ¨å¤±è´¥çš„å‘¨æœŸ"
    |                                   ^^
393 |         )
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/aggregation/aggregation_service.py:427:20
    |
426 |     def calculate_daily_aggregations(self, *, use_current_period: bool | None = None) -> dict[str, Any]:
427 |         """è®¡ç®—æ¯æ—¥ç»Ÿè®¡èšåˆï¼ˆå¤„ç†ä»Šæ—¥æ•°æ®ï¼‰ã€‚.
    |                            ^^
428 |
429 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/aggregation/aggregation_service.py:427:27
    |
426 |     def calculate_daily_aggregations(self, *, use_current_period: bool | None = None) -> dict[str, Any]:
427 |         """è®¡ç®—æ¯æ—¥ç»Ÿè®¡èšåˆï¼ˆå¤„ç†ä»Šæ—¥æ•°æ®ï¼‰ã€‚.
    |                                          ^^
428 |
429 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/aggregation_service.py:430:41
    |
429 |         Args:
430 |             use_current_period: æ˜¯å¦ä½¿ç”¨å½“å‰å‘¨æœŸï¼ŒNone æ—¶æŒ‰é»˜è®¤ï¼ˆæ¯æ—¥=å½“å‰ï¼Œå…¶ä»–=ä¸Šä¸€å‘¨æœŸï¼‰ã€‚
    |                                                 ^^
431 |
432 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/aggregation/aggregation_service.py:430:51
    |
429 |         Args:
430 |             use_current_period: æ˜¯å¦ä½¿ç”¨å½“å‰å‘¨æœŸï¼ŒNone æ—¶æŒ‰é»˜è®¤ï¼ˆæ¯æ—¥=å½“å‰ï¼Œå…¶ä»–=ä¸Šä¸€å‘¨æœŸï¼‰ã€‚
    |                                                                ^^
431 |
432 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/aggregation_service.py:430:57
    |
429 |         Args:
430 |             use_current_period: æ˜¯å¦ä½¿ç”¨å½“å‰å‘¨æœŸï¼ŒNone æ—¶æŒ‰é»˜è®¤ï¼ˆæ¯æ—¥=å½“å‰ï¼Œå…¶ä»–=ä¸Šä¸€å‘¨æœŸï¼‰ã€‚
    |                                                                           ^^
431 |
432 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/aggregation/aggregation_service.py:430:65
    |
429 |         Args:
430 |             use_current_period: æ˜¯å¦ä½¿ç”¨å½“å‰å‘¨æœŸï¼ŒNone æ—¶æŒ‰é»˜è®¤ï¼ˆæ¯æ—¥=å½“å‰ï¼Œå…¶ä»–=ä¸Šä¸€å‘¨æœŸï¼‰ã€‚
    |                                                                                          ^^
431 |
432 |         Returns:
    |

C901 `aggregate_current_period` is too complex (11 > 10)
   --> app/services/aggregation/aggregation_service.py:444:9
    |
442 |         )
443 |
444 |     def aggregate_current_period(
    |         ^^^^^^^^^^^^^^^^^^^^^^^^
445 |         self,
446 |         period_type: str = "daily",
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/aggregation/aggregation_service.py:451:18
    |
449 |         progress_callbacks: dict[str, dict[str, Callable[..., None]]] | None = None,
450 |     ) -> dict[str, Any]:
451 |         """è®¡ç®—å½“å‰å‘¨æœŸï¼ˆå«ä»Šæ—¥ï¼‰ç»Ÿè®¡èšåˆã€‚.
    |                        ^^
452 |
453 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/aggregation/aggregation_service.py:451:22
    |
449 |         progress_callbacks: dict[str, dict[str, Callable[..., None]]] | None = None,
450 |     ) -> dict[str, Any]:
451 |         """è®¡ç®—å½“å‰å‘¨æœŸï¼ˆå«ä»Šæ—¥ï¼‰ç»Ÿè®¡èšåˆã€‚.
    |                                ^^
452 |
453 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/aggregation/aggregation_service.py:454:30
    |
453 |         Args:
454 |             period_type: å‘¨æœŸç±»åž‹ï¼ˆdaily/weekly/...ï¼‰ã€‚
    |                                  ^^
455 |             scope: è¿è¡ŒèŒƒå›´ï¼ˆdatabase/instance/allï¼‰ã€‚
456 |             progress_callbacks: å¯é€‰å›žè°ƒå­—å…¸ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/aggregation/aggregation_service.py:454:47
    |
453 |         Args:
454 |             period_type: å‘¨æœŸç±»åž‹ï¼ˆdaily/weekly/...ï¼‰ã€‚
    |                                                    ^^
455 |             scope: è¿è¡ŒèŒƒå›´ï¼ˆdatabase/instance/allï¼‰ã€‚
456 |             progress_callbacks: å¯é€‰å›žè°ƒå­—å…¸ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/aggregation/aggregation_service.py:455:24
    |
453 |         Args:
454 |             period_type: å‘¨æœŸç±»åž‹ï¼ˆdaily/weekly/...ï¼‰ã€‚
455 |             scope: è¿è¡ŒèŒƒå›´ï¼ˆdatabase/instance/allï¼‰ã€‚
    |                            ^^
456 |             progress_callbacks: å¯é€‰å›žè°ƒå­—å…¸ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/aggregation/aggregation_service.py:455:46
    |
453 |         Args:
454 |             period_type: å‘¨æœŸç±»åž‹ï¼ˆdaily/weekly/...ï¼‰ã€‚
455 |             scope: è¿è¡ŒèŒƒå›´ï¼ˆdatabase/instance/allï¼‰ã€‚
    |                                                   ^^
456 |             progress_callbacks: å¯é€‰å›žè°ƒå­—å…¸ã€‚
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/aggregation_service.py:536:32
    |
534 |         elif AggregationStatus.FAILED.value in statuses:
535 |             overall_status = AggregationStatus.FAILED
536 |             message = "å½“å‰å‘¨æœŸèšåˆå®Œæˆï¼Œä½†å­˜åœ¨å¤±è´¥çš„å­ä»»åŠ¡"
    |                                        ^^
537 |         elif statuses == {AggregationStatus.SKIPPED.value}:
538 |             overall_status = AggregationStatus.SKIPPED
    |

C901 `calculate_instance_aggregations` is too complex (11 > 10)
   --> app/services/aggregation/aggregation_service.py:681:9
    |
679 |         )
680 |
681 |     def calculate_instance_aggregations(
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
682 |         self,
683 |         instance_id: int,
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/aggregation/aggregation_service.py:726:20
    |
724 |             try:
725 |                 result = func(instance_id, use_current_period=use_current_period)
726 |             except Exception as exc:  # pragma: no cover - é˜²å¾¡æ€§æ—¥å¿—
    |                    ^^^^^^^^^
727 |                 log_error(
728 |                     "å®žä¾‹å‘¨æœŸèšåˆæ‰§è¡Œå¤±è´¥",
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/aggregation_service.py:757:31
    |
755 |         if failed_periods:
756 |             overall_status = AggregationStatus.FAILED
757 |             message = f"å®žä¾‹èšåˆå®Œæˆï¼Œä½†ä»¥ä¸‹å‘¨æœŸå¤±è´¥: {', '.join(sorted(failed_periods))}"
    |                                     ^^
758 |         elif processed_periods == 0:
759 |             overall_status = AggregationStatus.SKIPPED
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/aggregation_service.py:879:29
    |
877 |             instance_id: å®žä¾‹ IDã€‚
878 |             period_type: å‘¨æœŸç±»åž‹ã€‚
879 |             start_date: èµ·å§‹æ—¥æœŸï¼Œå¯é€‰ã€‚
    |                                 ^^
880 |             end_date: ç»“æŸæ—¥æœŸï¼Œå¯é€‰ã€‚
881 |             database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/aggregation_service.py:880:27
    |
878 |             period_type: å‘¨æœŸç±»åž‹ã€‚
879 |             start_date: èµ·å§‹æ—¥æœŸï¼Œå¯é€‰ã€‚
880 |             end_date: ç»“æŸæ—¥æœŸï¼Œå¯é€‰ã€‚
    |                               ^^
881 |             database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/aggregation_service.py:881:35
    |
879 |             start_date: èµ·å§‹æ—¥æœŸï¼Œå¯é€‰ã€‚
880 |             end_date: ç»“æŸæ—¥æœŸï¼Œå¯é€‰ã€‚
881 |             database_name: æ•°æ®åº“åç§°ç­›é€‰ï¼Œå¯é€‰ã€‚
    |                                          ^^
882 |
883 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/aggregation_service.py:907:29
    |
905 |             instance_id: å®žä¾‹ IDã€‚
906 |             period_type: å‘¨æœŸç±»åž‹ã€‚
907 |             start_date: èµ·å§‹æ—¥æœŸï¼Œå¯é€‰ã€‚
    |                                 ^^
908 |             end_date: ç»“æŸæ—¥æœŸï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/aggregation_service.py:908:27
    |
906 |             period_type: å‘¨æœŸç±»åž‹ã€‚
907 |             start_date: èµ·å§‹æ—¥æœŸï¼Œå¯é€‰ã€‚
908 |             end_date: ç»“æŸæ—¥æœŸï¼Œå¯é€‰ã€‚
    |                               ^^
909 |
910 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/calculator.py:16:21
   |
14 |     """è´Ÿè´£è®¡ç®—ä¸åŒç»Ÿè®¡å‘¨æœŸçš„æ—¥æœŸèŒƒå›´ã€‚.
15 |
16 |     æ”¯æŒæ—¥ã€å‘¨ã€æœˆã€å­£åº¦å››ç§ç»Ÿè®¡å‘¨æœŸï¼Œæä¾›å½“å‰å‘¨æœŸã€ä¸Šä¸€å‘¨æœŸå’Œå‰ä¸€å‘¨æœŸçš„æ—¥æœŸèŒƒå›´è®¡ç®—ã€‚
   |                                     ^^
17 |
18 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/calculator.py:19:26
   |
18 |     Attributes:
19 |         _now_func: æ—¶é—´æä¾›å‡½æ•°ï¼Œç”¨äºŽèŽ·å–å½“å‰æ—¥æœŸï¼Œå¯åœ¨æµ‹è¯•æ—¶æ³¨å…¥ã€‚
   |                                ^^
20 |
21 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/calculator.py:19:35
   |
18 |     Attributes:
19 |         _now_func: æ—¶é—´æä¾›å‡½æ•°ï¼Œç”¨äºŽèŽ·å–å½“å‰æ—¥æœŸï¼Œå¯åœ¨æµ‹è¯•æ—¶æ³¨å…¥ã€‚
   |                                                  ^^
20 |
21 |     """
   |

ANN001 Missing type annotation for function argument `now_func`
  --> app/services/aggregation/calculator.py:23:24
   |
21 |     """
22 |
23 |     def __init__(self, now_func=None) -> None:
   |                        ^^^^^^^^
24 |         """åˆå§‹åŒ–å‘¨æœŸè®¡ç®—å™¨ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/calculator.py:27:32
   |
26 |         Args:
27 |             now_func: å¯é€‰çš„æ—¶é—´æä¾›å‡½æ•°ï¼Œé»˜è®¤ä½¿ç”¨ä¸­å›½æ—¶åŒºçš„å½“å‰æ—¥æœŸã€‚
   |                                         ^^
28 |
29 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/calculator.py:46:30
   |
45 |         Args:
46 |             period_type: å‘¨æœŸç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'daily'ã€'weekly'ã€'monthly'ã€'quarterly'ã€‚
   |                                  ^^
47 |
48 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/aggregation/calculator.py:46:34
   |
45 |         Args:
46 |             period_type: å‘¨æœŸç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'daily'ã€'weekly'ã€'monthly'ã€'quarterly'ã€‚
   |                                          ^^
47 |
48 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/aggregation/calculator.py:96:11
   |
94 |         """èŽ·å–å½“å‰å‘¨æœŸçš„è‡ªç„¶èµ·æ­¢æ—¥æœŸã€‚.
95 |
96 |         æ³¨æ„ï¼šperiod_end æŒ‡å‘è¯¥å‘¨æœŸçš„è‡ªç„¶ç»“æŸæ—¥ï¼Œå¯èƒ½æ™šäºŽä»Šå¤©ã€‚
   |             ^^
97 |
98 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/calculator.py:96:34
   |
94 |         """èŽ·å–å½“å‰å‘¨æœŸçš„è‡ªç„¶èµ·æ­¢æ—¥æœŸã€‚.
95 |
96 |         æ³¨æ„ï¼šperiod_end æŒ‡å‘è¯¥å‘¨æœŸçš„è‡ªç„¶ç»“æŸæ—¥ï¼Œå¯èƒ½æ™šäºŽä»Šå¤©ã€‚
   |                                                ^^
97 |
98 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/calculator.py:99:30
    |
 98 |         Args:
 99 |             period_type: å‘¨æœŸç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'daily'ã€'weekly'ã€'monthly'ã€'quarterly'ã€‚
    |                                  ^^
100 |
101 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/aggregation/calculator.py:99:34
    |
 98 |         Args:
 99 |             period_type: å‘¨æœŸç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'daily'ã€'weekly'ã€'monthly'ã€'quarterly'ã€‚
    |                                          ^^
100 |
101 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/calculator.py:134:30
    |
133 |         Args:
134 |             period_type: å‘¨æœŸç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'daily'ã€'weekly'ã€'monthly'ã€'quarterly'ã€‚
    |                                  ^^
135 |             start_date: å½“å‰å‘¨æœŸå¼€å§‹æ—¥æœŸã€‚
136 |             end_date: å½“å‰å‘¨æœŸç»“æŸæ—¥æœŸã€‚
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/aggregation/calculator.py:134:34
    |
133 |         Args:
134 |             period_type: å‘¨æœŸç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'daily'ã€'weekly'ã€'monthly'ã€'quarterly'ã€‚
    |                                          ^^
135 |             start_date: å½“å‰å‘¨æœŸå¼€å§‹æ—¥æœŸã€‚
136 |             end_date: å½“å‰å‘¨æœŸç»“æŸæ—¥æœŸã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/database_aggregation_runner.py:29:26
   |
27 |     """è´Ÿè´£æ•°æ®åº“çº§èšåˆçš„æ‰§è¡Œã€‚.
28 |
29 |     ä»Žæ•°æ®åº“å®¹é‡ç»Ÿè®¡æ•°æ®ä¸­è®¡ç®—å„å‘¨æœŸçš„èšåˆæŒ‡æ ‡ï¼ŒåŒ…æ‹¬å¹³å‡å€¼ã€æœ€å¤§å€¼ã€
   |                                               ^^
30 |     æœ€å°å€¼ã€å˜åŒ–é‡å’Œå¢žé•¿çŽ‡ç­‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/database_aggregation_runner.py:36:22
   |
34 |         _commit_with_partition_retry: æäº¤æ•°æ®çš„å›žè°ƒå‡½æ•°ã€‚
35 |         _period_calculator: å‘¨æœŸè®¡ç®—å™¨ã€‚
36 |         _module: æ¨¡å—åç§°ï¼Œç”¨äºŽæ—¥å¿—è®°å½•ã€‚
   |                          ^^
37 |
38 |     """
   |

ANN002 Missing type annotation for `*args`
  --> app/services/aggregation/database_aggregation_runner.py:62:70
   |
60 |         self._module = module
61 |
62 |     def _invoke_callback(self, callback: Callable[..., None] | None, *args) -> None:
   |                                                                      ^^^^^
63 |         """å®‰å…¨æ‰§è¡Œå›žè°ƒã€‚.
   |

BLE001 Do not catch blind exception: `Exception`
  --> app/services/aggregation/database_aggregation_runner.py:77:16
   |
75 |         try:
76 |             callback(*args)
77 |         except Exception as exc:  # pragma: no cover - é˜²å¾¡æ€§å¤„ç†
   |                ^^^^^^^^^
78 |             log_warning(
79 |                 "èšåˆå›žè°ƒæ‰§è¡Œå¤±è´¥",
   |

PLR0913 Too many arguments in function definition (6 > 5)
  --> app/services/aggregation/database_aggregation_runner.py:85:9
   |
83 |             )
84 |
85 |     def aggregate_period(
   |         ^^^^^^^^^^^^^^^^
86 |         self,
87 |         period_type: str,
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/database_aggregation_runner.py:97:17
   |
95 |         """èšåˆæ‰€æœ‰æ¿€æ´»å®žä¾‹åœ¨æŒ‡å®šå‘¨æœŸå†…çš„æ•°æ®åº“ç»Ÿè®¡ã€‚.
96 |
97 |         éåŽ†æ‰€æœ‰æ´»è·ƒå®žä¾‹ï¼Œä¸ºæ¯ä¸ªå®žä¾‹çš„æ¯ä¸ªæ•°æ®åº“è®¡ç®—æŒ‡å®šå‘¨æœŸçš„èšåˆæŒ‡æ ‡ã€‚
   |                         ^^
98 |
99 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/database_aggregation_runner.py:100:30
    |
 99 |         Args:
100 |             period_type: å‘¨æœŸç±»åž‹ï¼Œå¦‚ 'daily'ã€'weekly'ã€'monthly'ã€'quarterly'ã€‚
    |                                  ^^
101 |             start_date: å‘¨æœŸå¼€å§‹æ—¥æœŸã€‚
102 |             end_date: å‘¨æœŸç»“æŸæ—¥æœŸã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/database_aggregation_runner.py:103:44
    |
101 |             start_date: å‘¨æœŸå¼€å§‹æ—¥æœŸã€‚
102 |             end_date: å‘¨æœŸç»“æŸæ—¥æœŸã€‚
103 |             on_instance_start: å®žä¾‹å¼€å§‹å¤„ç†æ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
    |                                                        ^^
104 |             on_instance_complete: å®žä¾‹å¤„ç†å®Œæˆæ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
105 |             on_instance_error: å®žä¾‹å¤„ç†å¤±è´¥æ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/database_aggregation_runner.py:104:47
    |
102 |             end_date: å‘¨æœŸç»“æŸæ—¥æœŸã€‚
103 |             on_instance_start: å®žä¾‹å¼€å§‹å¤„ç†æ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
104 |             on_instance_complete: å®žä¾‹å¤„ç†å®Œæˆæ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
    |                                                           ^^
105 |             on_instance_error: å®žä¾‹å¤„ç†å¤±è´¥æ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/database_aggregation_runner.py:105:44
    |
103 |             on_instance_start: å®žä¾‹å¼€å§‹å¤„ç†æ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
104 |             on_instance_complete: å®žä¾‹å¤„ç†å®Œæˆæ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
105 |             on_instance_error: å®žä¾‹å¤„ç†å¤±è´¥æ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
    |                                                        ^^
106 |
107 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/database_aggregation_runner.py:108:21
    |
107 |         Returns:
108 |             å‘¨æœŸèšåˆç»“æžœå­—å…¸ï¼ŒåŒ…å«å¤„ç†ç»Ÿè®¡å’Œé”™è¯¯ä¿¡æ¯ã€‚
    |                             ^^
109 |
110 |         """
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/database_aggregation_runner.py:125:41
    |
123 |                     summary.skipped_instances += 1
124 |                     log_warning(
125 |                         "å®žä¾‹åœ¨å‘¨æœŸå†…æ²¡æœ‰æ•°æ®åº“å®¹é‡æ•°æ®ï¼Œè·³è¿‡èšåˆ",
    |                                                        ^^
126 |                         module=self._module,
127 |                         instance_id=instance.id,
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/database_aggregation_runner.py:138:40
    |
136 |                         "message": (
137 |                             f"å®žä¾‹ {instance.name} åœ¨ {start_date.isoformat()} è‡³ {end_date.isoformat()} "
138 |                             f"æ²¡æœ‰æ•°æ®åº“å®¹é‡æ•°æ®ï¼Œè·³è¿‡èšåˆ"
    |                                                 ^^
139 |                         ),
140 |                         "errors": [],
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/aggregation/database_aggregation_runner.py:187:20
    |
185 |                 }
186 |                 self._invoke_callback(on_instance_complete, instance, result_payload)
187 |             except Exception as exc:  # pragma: no cover - é˜²å¾¡æ€§æ—¥å¿—
    |                    ^^^^^^^^^
188 |                 db.session.rollback()
189 |                 summary.failed_instances += 1
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/aggregation/database_aggregation_runner.py:214:37
    |
212 |         if summary.status is AggregationStatus.COMPLETED:
213 |             summary.message = (
214 |                 f"{period_type} èšåˆå®Œæˆï¼šå¤„ç† {summary.processed_instances}/{total_instances} ä¸ªå®žä¾‹"
    |                                         ^^
215 |             )
216 |         elif summary.status is AggregationStatus.SKIPPED:
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/database_aggregation_runner.py:220:37
    |
218 |         else:
219 |             summary.message = (
220 |                 f"{period_type} èšåˆå®Œæˆï¼Œ{summary.failed_instances} ä¸ªå®žä¾‹å¤±è´¥"
    |                                         ^^
221 |             )
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/database_aggregation_runner.py:260:34
    |
258 |         if not stats:
259 |             log_warning(
260 |                 "å®žä¾‹åœ¨æŒ‡å®šå‘¨æœŸæ²¡æœ‰æ•°æ®åº“å®¹é‡æ•°æ®ï¼Œè·³è¿‡èšåˆ",
    |                                                  ^^
261 |                 module=self._module,
262 |                 instance_id=instance.id,
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/database_aggregation_runner.py:274:31
    |
272 |                 message=(
273 |                     f"å®žä¾‹ {instance.name} åœ¨ {start_date} è‡³ {end_date} "
274 |                     "æ²¡æœ‰æ•°æ®åº“å®¹é‡æ•°æ®ï¼Œè·³è¿‡èšåˆ"
    |                                        ^^
275 |                 ),
276 |                 extra=extra_details,
    |

PLR0913 Too many arguments in function definition (7 > 5)
   --> app/services/aggregation/database_aggregation_runner.py:366:9
    |
364 |         return grouped
365 |
366 |     def _persist_database_aggregation(
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
367 |         self,
368 |         *,
    |

PLR0913 Too many arguments in function definition (6 > 5)
   --> app/services/aggregation/database_aggregation_runner.py:503:9
    |
501 |             ) from exc
502 |
503 |     def _apply_change_statistics(
    |         ^^^^^^^^^^^^^^^^^^^^^^^^
504 |         self,
505 |         *,
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/aggregation/database_aggregation_runner.py:583:16
    |
581 |             aggregation.log_size_change_percent = None
582 |             aggregation.growth_rate = aggregation.size_change_percent
583 |         except Exception as exc:  # pragma: no cover - é˜²å¾¡æ€§æ—¥å¿—
    |                ^^^^^^^^^
584 |             log_error(
585 |                 "è®¡ç®—æ•°æ®åº“å¢žé‡ç»Ÿè®¡å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å€¼",
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/database_aggregation_runner.py:585:29
    |
583 |         except Exception as exc:  # pragma: no cover - é˜²å¾¡æ€§æ—¥å¿—
584 |             log_error(
585 |                 "è®¡ç®—æ•°æ®åº“å¢žé‡ç»Ÿè®¡å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å€¼",
    |                                        ^^
586 |                 module=self._module,
587 |                 exception=exc,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/instance_aggregation_runner.py:29:25
   |
27 |     """è´Ÿè´£å®žä¾‹çº§èšåˆçš„æ‰§è¡Œã€‚.
28 |
29 |     ä»Žå®žä¾‹å®¹é‡ç»Ÿè®¡æ•°æ®ä¸­è®¡ç®—å„å‘¨æœŸçš„èšåˆæŒ‡æ ‡ï¼ŒåŒ…æ‹¬æ€»å®¹é‡ã€å¹³å‡å€¼ã€
   |                                             ^^
30 |     æ•°æ®åº“æ•°é‡å˜åŒ–å’Œå¢žé•¿è¶‹åŠ¿ç­‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/instance_aggregation_runner.py:36:22
   |
34 |         _commit_with_partition_retry: æäº¤æ•°æ®çš„å›žè°ƒå‡½æ•°ã€‚
35 |         _period_calculator: å‘¨æœŸè®¡ç®—å™¨ã€‚
36 |         _module: æ¨¡å—åç§°ï¼Œç”¨äºŽæ—¥å¿—è®°å½•ã€‚
   |                          ^^
37 |
38 |     """
   |

ANN002 Missing type annotation for `*args`
  --> app/services/aggregation/instance_aggregation_runner.py:62:70
   |
60 |         self._module = module
61 |
62 |     def _invoke_callback(self, callback: Callable[..., None] | None, *args) -> None:
   |                                                                      ^^^^^
63 |         """å®‰å…¨åœ°æ‰§è¡Œå›žè°ƒã€‚.
   |

BLE001 Do not catch blind exception: `Exception`
  --> app/services/aggregation/instance_aggregation_runner.py:77:16
   |
75 |         try:
76 |             callback(*args)
77 |         except Exception as exc:  # pragma: no cover
   |                ^^^^^^^^^
78 |             log_warning(
79 |                 "èšåˆå›žè°ƒæ‰§è¡Œå¤±è´¥",
   |

PLR0913 Too many arguments in function definition (6 > 5)
  --> app/services/aggregation/instance_aggregation_runner.py:85:9
   |
83 |             )
84 |
85 |     def aggregate_period(
   |         ^^^^^^^^^^^^^^^^
86 |         self,
87 |         period_type: str,
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/instance_aggregation_runner.py:97:17
   |
95 |         """èšåˆæ‰€æœ‰æ¿€æ´»å®žä¾‹åœ¨æŒ‡å®šå‘¨æœŸå†…çš„å®žä¾‹ç»Ÿè®¡ã€‚.
96 |
97 |         éåŽ†æ‰€æœ‰æ´»è·ƒå®žä¾‹ï¼Œä¸ºæ¯ä¸ªå®žä¾‹è®¡ç®—æŒ‡å®šå‘¨æœŸçš„æ•´ä½“èšåˆæŒ‡æ ‡ã€‚
   |                         ^^
98 |
99 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/instance_aggregation_runner.py:100:30
    |
 99 |         Args:
100 |             period_type: å‘¨æœŸç±»åž‹ï¼Œå¦‚ 'daily'ã€'weekly'ã€'monthly'ã€'quarterly'ã€‚
    |                                  ^^
101 |             start_date: å‘¨æœŸå¼€å§‹æ—¥æœŸã€‚
102 |             end_date: å‘¨æœŸç»“æŸæ—¥æœŸã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/instance_aggregation_runner.py:103:44
    |
101 |             start_date: å‘¨æœŸå¼€å§‹æ—¥æœŸã€‚
102 |             end_date: å‘¨æœŸç»“æŸæ—¥æœŸã€‚
103 |             on_instance_start: å®žä¾‹å¼€å§‹å¤„ç†æ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
    |                                                        ^^
104 |             on_instance_complete: å®žä¾‹å¤„ç†å®Œæˆæ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
105 |             on_instance_error: å®žä¾‹å¤„ç†å¤±è´¥æ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/instance_aggregation_runner.py:104:47
    |
102 |             end_date: å‘¨æœŸç»“æŸæ—¥æœŸã€‚
103 |             on_instance_start: å®žä¾‹å¼€å§‹å¤„ç†æ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
104 |             on_instance_complete: å®žä¾‹å¤„ç†å®Œæˆæ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
    |                                                           ^^
105 |             on_instance_error: å®žä¾‹å¤„ç†å¤±è´¥æ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/instance_aggregation_runner.py:105:44
    |
103 |             on_instance_start: å®žä¾‹å¼€å§‹å¤„ç†æ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
104 |             on_instance_complete: å®žä¾‹å¤„ç†å®Œæˆæ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
105 |             on_instance_error: å®žä¾‹å¤„ç†å¤±è´¥æ—¶çš„å›žè°ƒå‡½æ•°ï¼Œå¯é€‰ã€‚
    |                                                        ^^
106 |
107 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/instance_aggregation_runner.py:108:21
    |
107 |         Returns:
108 |             å‘¨æœŸèšåˆç»“æžœå­—å…¸ï¼ŒåŒ…å«å¤„ç†ç»Ÿè®¡å’Œé”™è¯¯ä¿¡æ¯ã€‚
    |                             ^^
109 |
110 |         """
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/instance_aggregation_runner.py:125:42
    |
123 |                     summary.skipped_instances += 1
124 |                     log_warning(
125 |                         "å®žä¾‹åœ¨å‘¨æœŸå†…æ²¡æœ‰å®žä¾‹å¤§å°ç»Ÿè®¡æ•°æ®ï¼Œè·³è¿‡å®žä¾‹èšåˆ",
    |                                                          ^^
126 |                         module=self._module,
127 |                         instance_id=instance.id,
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/instance_aggregation_runner.py:138:39
    |
136 |                         "message": (
137 |                             f"å®žä¾‹ {instance.name} åœ¨ {start_date.isoformat()} è‡³ {end_date.isoformat()} "
138 |                             f"æ²¡æœ‰å®žä¾‹ç»Ÿè®¡æ•°æ®ï¼Œè·³è¿‡èšåˆ"
    |                                               ^^
139 |                         ),
140 |                         "errors": [],
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/aggregation/instance_aggregation_runner.py:182:20
    |
180 |                 }
181 |                 self._invoke_callback(on_instance_complete, instance, result_payload)
182 |             except Exception as exc:  # pragma: no cover - é˜²å¾¡æ€§æ—¥å¿—
    |                    ^^^^^^^^^
183 |                 db.session.rollback()
184 |                 summary.failed_instances += 1
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/aggregation/instance_aggregation_runner.py:209:39
    |
207 |         if summary.status is AggregationStatus.COMPLETED:
208 |             summary.message = (
209 |                 f"{period_type} å®žä¾‹èšåˆå®Œæˆï¼šå¤„ç† {summary.processed_instances}/{total_instances} ä¸ªå®žä¾‹"
    |                                             ^^
210 |             )
211 |         elif summary.status is AggregationStatus.SKIPPED:
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/instance_aggregation_runner.py:215:39
    |
213 |         else:
214 |             summary.message = (
215 |                 f"{period_type} å®žä¾‹èšåˆå®Œæˆï¼Œ{summary.failed_instances} ä¸ªå®žä¾‹å¤±è´¥"
    |                                             ^^
216 |             )
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/instance_aggregation_runner.py:231:23
    |
229 |         end_date: date,
230 |     ) -> InstanceSummary:
231 |         """èšåˆå•ä¸ªå®žä¾‹çš„æŒ‡å®šå‘¨æœŸï¼Œå¹¶è¿”å›žæ±‡æ€»ä¿¡æ¯ã€‚.
    |                                  ^^
232 |
233 |         Args:
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/instance_aggregation_runner.py:254:31
    |
252 |         if not stats:
253 |             log_warning(
254 |                 "å®žä¾‹åœ¨æŒ‡å®šå‘¨æœŸæ²¡æœ‰ç»Ÿè®¡æ•°æ®ï¼Œè·³è¿‡å®žä¾‹èšåˆ",
    |                                            ^^
255 |                 module=self._module,
256 |                 instance_id=instance.id,
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/instance_aggregation_runner.py:266:80
    |
264 |                 instance_name=instance.name,
265 |                 period_type=period_type,
266 |                 message=f"å®žä¾‹ {instance.name} åœ¨ {start_date} åˆ° {end_date} æ²¡æœ‰ç»Ÿè®¡æ•°æ®ï¼Œè·³è¿‡èšåˆ",
    |                                                                                          ^^
267 |                 extra=extra_details,
268 |             )
    |

PLR0913 Too many arguments in function definition (6 > 5)
   --> app/services/aggregation/instance_aggregation_runner.py:315:9
    |
313 |         ).all()
314 |
315 |     def _persist_instance_aggregation(
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
316 |         self,
317 |         *,
    |

PLR2004 Magic value used in comparison, consider replacing `5` with a constant variable
   --> app/services/aggregation/instance_aggregation_runner.py:519:56
    |
517 |             aggregation.growth_rate = aggregation.total_size_change_percent
518 |
519 |             if aggregation.total_size_change_percent > 5:
    |                                                        ^
520 |                 aggregation.trend_direction = "growing"
521 |             elif aggregation.total_size_change_percent < -5:
    |

PLR2004 Magic value used in comparison, consider replacing `-5` with a constant variable
   --> app/services/aggregation/instance_aggregation_runner.py:521:58
    |
519 |             if aggregation.total_size_change_percent > 5:
520 |                 aggregation.trend_direction = "growing"
521 |             elif aggregation.total_size_change_percent < -5:
    |                                                          ^^
522 |                 aggregation.trend_direction = "shrinking"
523 |             else:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/aggregation/instance_aggregation_runner.py:525:16
    |
523 |             else:
524 |                 aggregation.trend_direction = "stable"
525 |         except Exception as exc:  # pragma: no cover - defensive logging
    |                ^^^^^^^^^
526 |             log_error(
527 |                 "è®¡ç®—å®žä¾‹å¢žé‡ç»Ÿè®¡å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å€¼",
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/instance_aggregation_runner.py:527:28
    |
525 |         except Exception as exc:  # pragma: no cover - defensive logging
526 |             log_error(
527 |                 "è®¡ç®—å®žä¾‹å¢žé‡ç»Ÿè®¡å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å€¼",
    |                                      ^^
528 |                 module=self._module,
529 |                 exception=exc,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/query_service.py:30:24
   |
28 |         """èŽ·å–æ•°æ®åº“çº§èšåˆæ•°æ®ã€‚.
29 |
30 |         æŸ¥è¯¢æŒ‡å®šå®žä¾‹çš„æ•°æ®åº“çº§èšåˆè®°å½•ï¼Œæ”¯æŒæŒ‰æ—¶é—´èŒƒå›´å’Œæ•°æ®åº“åç§°è¿‡æ»¤ã€‚
   |                                       ^^
31 |
32 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/query_service.py:34:30
   |
32 |         Args:
33 |             instance_id: å®žä¾‹ IDã€‚
34 |             period_type: å‘¨æœŸç±»åž‹ï¼Œå¦‚ 'daily'ã€'weekly'ã€'monthly'ã€'quarterly'ã€‚
   |                                  ^^
35 |             start_date: å¼€å§‹æ—¥æœŸï¼Œå¯é€‰ã€‚
36 |             end_date: ç»“æŸæ—¥æœŸï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/query_service.py:35:29
   |
33 |             instance_id: å®žä¾‹ IDã€‚
34 |             period_type: å‘¨æœŸç±»åž‹ï¼Œå¦‚ 'daily'ã€'weekly'ã€'monthly'ã€'quarterly'ã€‚
35 |             start_date: å¼€å§‹æ—¥æœŸï¼Œå¯é€‰ã€‚
   |                                 ^^
36 |             end_date: ç»“æŸæ—¥æœŸï¼Œå¯é€‰ã€‚
37 |             database_name: æ•°æ®åº“åç§°ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/query_service.py:36:27
   |
34 |             period_type: å‘¨æœŸç±»åž‹ï¼Œå¦‚ 'daily'ã€'weekly'ã€'monthly'ã€'quarterly'ã€‚
35 |             start_date: å¼€å§‹æ—¥æœŸï¼Œå¯é€‰ã€‚
36 |             end_date: ç»“æŸæ—¥æœŸï¼Œå¯é€‰ã€‚
   |                               ^^
37 |             database_name: æ•°æ®åº“åç§°ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/query_service.py:37:33
   |
35 |             start_date: å¼€å§‹æ—¥æœŸï¼Œå¯é€‰ã€‚
36 |             end_date: ç»“æŸæ—¥æœŸï¼Œå¯é€‰ã€‚
37 |             database_name: æ•°æ®åº“åç§°ï¼Œå¯é€‰ã€‚
   |                                      ^^
38 |
39 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/query_service.py:40:23
   |
39 |         Returns:
40 |             æ ¼å¼åŒ–çš„èšåˆæ•°æ®åˆ—è¡¨ï¼ŒæŒ‰å‘¨æœŸå¼€å§‹æ—¶é—´å€’åºæŽ’åˆ—ã€‚
   |                                 ^^
41 |
42 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/query_service.py:67:23
   |
65 |         """èŽ·å–å®žä¾‹çº§èšåˆæ•°æ®ã€‚.
66 |
67 |         æŸ¥è¯¢æŒ‡å®šå®žä¾‹çš„å®žä¾‹çº§èšåˆè®°å½•ï¼Œæ”¯æŒæŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤ã€‚
   |                                     ^^
68 |
69 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/query_service.py:71:30
   |
69 |         Args:
70 |             instance_id: å®žä¾‹ IDã€‚
71 |             period_type: å‘¨æœŸç±»åž‹ï¼Œå¦‚ 'daily'ã€'weekly'ã€'monthly'ã€'quarterly'ã€‚
   |                                  ^^
72 |             start_date: å¼€å§‹æ—¥æœŸï¼Œå¯é€‰ã€‚
73 |             end_date: ç»“æŸæ—¥æœŸï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/query_service.py:72:29
   |
70 |             instance_id: å®žä¾‹ IDã€‚
71 |             period_type: å‘¨æœŸç±»åž‹ï¼Œå¦‚ 'daily'ã€'weekly'ã€'monthly'ã€'quarterly'ã€‚
72 |             start_date: å¼€å§‹æ—¥æœŸï¼Œå¯é€‰ã€‚
   |                                 ^^
73 |             end_date: ç»“æŸæ—¥æœŸï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/query_service.py:73:27
   |
71 |             period_type: å‘¨æœŸç±»åž‹ï¼Œå¦‚ 'daily'ã€'weekly'ã€'monthly'ã€'quarterly'ã€‚
72 |             start_date: å¼€å§‹æ—¥æœŸï¼Œå¯é€‰ã€‚
73 |             end_date: ç»“æŸæ—¥æœŸï¼Œå¯é€‰ã€‚
   |                               ^^
74 |
75 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/query_service.py:76:23
   |
75 |         Returns:
76 |             æ ¼å¼åŒ–çš„èšåˆæ•°æ®åˆ—è¡¨ï¼ŒæŒ‰å‘¨æœŸå¼€å§‹æ—¶é—´å€’åºæŽ’åˆ—ã€‚
   |                                 ^^
77 |
78 |         """
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/aggregation/results.py:20:22
   |
18 |     Attributes:
19 |         COMPLETED: èšåˆå®Œæˆã€‚
20 |         SKIPPED: èšåˆè·³è¿‡ï¼ˆæ— æ•°æ®æˆ–ä¸éœ€è¦æ‰§è¡Œï¼‰ã€‚
   |                          ^^
21 |         FAILED: èšåˆå¤±è´¥ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/aggregation/results.py:20:32
   |
18 |     Attributes:
19 |         COMPLETED: èšåˆå®Œæˆã€‚
20 |         SKIPPED: èšåˆè·³è¿‡ï¼ˆæ— æ•°æ®æˆ–ä¸éœ€è¦æ‰§è¡Œï¼‰ã€‚
   |                                              ^^
21 |         FAILED: èšåˆå¤±è´¥ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/results.py:37:26
   |
36 |     Attributes:
37 |         period_type: å‘¨æœŸç±»åž‹ï¼Œå¦‚ 'daily'ã€'weekly'ã€'monthly'ã€'quarterly'ã€‚
   |                              ^^
38 |         start_date: å‘¨æœŸå¼€å§‹æ—¥æœŸã€‚
39 |         end_date: å‘¨æœŸç»“æŸæ—¥æœŸã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/aggregation/results.py:77:22
   |
76 |         Returns:
77 |             åŒ…å«æ‰€æœ‰å­—æ®µçš„å­—å…¸ï¼Œæ—¥æœŸå­—æ®µè½¬æ¢ä¸º ISO 8601 æ ¼å¼å­—ç¬¦ä¸²ã€‚
   |                               ^^
78 |
79 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/results.py:102:28
    |
100 |     Attributes:
101 |         instance_id: å®žä¾‹ IDã€‚
102 |         instance_name: å®žä¾‹åç§°ï¼Œå¯é€‰ã€‚
    |                                ^^
103 |         period_type: å‘¨æœŸç±»åž‹ï¼Œå¦‚ 'daily'ã€'weekly'ã€'monthly'ã€'quarterly'ã€‚
104 |         processed_records: å·²å¤„ç†çš„è®°å½•æ•°é‡ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/results.py:103:26
    |
101 |         instance_id: å®žä¾‹ IDã€‚
102 |         instance_name: å®žä¾‹åç§°ï¼Œå¯é€‰ã€‚
103 |         period_type: å‘¨æœŸç±»åž‹ï¼Œå¦‚ 'daily'ã€'weekly'ã€'monthly'ã€'quarterly'ã€‚
    |                              ^^
104 |         processed_records: å·²å¤„ç†çš„è®°å½•æ•°é‡ã€‚
105 |         errors: é”™è¯¯ä¿¡æ¯åˆ—è¡¨ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/aggregation/results.py:137:22
    |
136 |         Returns:
137 |             åŒ…å«æ‰€æœ‰å­—æ®µçš„å­—å…¸ï¼Œå¯é€‰å­—æ®µä»…åœ¨æœ‰å€¼æ—¶åŒ…å«ã€‚
    |                               ^^
138 |
139 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/cache_service.py:1:13
  |
1 | """é²¸è½ - ç¼“å­˜æœåŠ¡ï¼Œæä¾›ç»Ÿä¸€çš„ Flask-Caching æŽ¥å£ã€‚."""
  |                   ^^
2 |
3 | import hashlib
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/cache_service.py:19:27
   |
17 |     """ç¼“å­˜æœåŠ¡ã€‚.
18 |
19 |     æä¾›ç»Ÿä¸€çš„ Flask-Caching æŽ¥å£ï¼Œæ”¯æŒè§„åˆ™è¯„ä¼°ç¼“å­˜ã€åˆ†ç±»è§„åˆ™ç¼“å­˜ç­‰åŠŸèƒ½ã€‚
   |                                  ^^
20 |
21 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/cache_service.py:23:30
   |
21 |     Attributes:
22 |         cache: Flask-Caching å®žä¾‹ã€‚
23 |         default_ttl: é»˜è®¤ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ã€‚
   |                                      ^^
24 |
25 |     """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/cache_service.py:23:32
   |
21 |     Attributes:
22 |         cache: Flask-Caching å®žä¾‹ã€‚
23 |         default_ttl: é»˜è®¤ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ã€‚
   |                                          ^^
24 |
25 |     """
   |

D107 Missing docstring in `__init__`
  --> app/services/cache_service.py:27:9
   |
25 |     """
26 |
27 |     def __init__(self, cache: Cache = None) -> None:
   |         ^^^^^^^^
28 |         self.cache = cache
29 |         self.default_ttl = Config.CACHE_DEFAULT_TTL  # 7å¤©ï¼ŒæŒ‰ç”¨æˆ·è¦æ±‚
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/cache_service.py:29:58
   |
27 |     def __init__(self, cache: Cache = None) -> None:
28 |         self.cache = cache
29 |         self.default_ttl = Config.CACHE_DEFAULT_TTL  # 7å¤©ï¼ŒæŒ‰ç”¨æˆ·è¦æ±‚
   |                                                           ^^
30 |
31 |     def _generate_cache_key(self, prefix: str, instance_id: int, username: str, db_name: str | None = None) -> str:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/cache_service.py:43:19
   |
42 |         Returns:
43 |             ç”Ÿæˆçš„ç¼“å­˜é”®ï¼Œæ ¼å¼ä¸º 'whalefall:{hash}'ã€‚
   |                         ^^
44 |
45 |         """
   |

ARG002 Unused method argument: `instance_id`
  --> app/services/cache_service.py:52:37
   |
50 |         return f"whalefall:{key_hash}"
51 |
52 |     def invalidate_user_cache(self, instance_id: int, username: str) -> bool:
   |                                     ^^^^^^^^^^^
53 |         """æ¸…é™¤ç”¨æˆ·çš„æ‰€æœ‰ç¼“å­˜ã€‚.
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/cache_service.py:63:31
   |
62 |         """
63 |         # Flask-Cachingä¸æ”¯æŒæ¨¡å¼åŒ¹é…ï¼Œç®€åŒ–å®žçŽ°
   |                                      ^^
64 |         # è¿™é‡Œè¿”å›žTrueï¼Œè¡¨ç¤ºæ“ä½œæˆåŠŸ
65 |         logger.info(f"æ¸…é™¤ç”¨æˆ·ç¼“å­˜: {username}")
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/cache_service.py:64:19
   |
62 |         """
63 |         # Flask-Cachingä¸æ”¯æŒæ¨¡å¼åŒ¹é…ï¼Œç®€åŒ–å®žçŽ°
64 |         # è¿™é‡Œè¿”å›žTrueï¼Œè¡¨ç¤ºæ“ä½œæˆåŠŸ
   |                       ^^
65 |         logger.info(f"æ¸…é™¤ç”¨æˆ·ç¼“å­˜: {username}")
66 |         return True
   |

G004 Logging statement uses f-string
  --> app/services/cache_service.py:65:21
   |
63 |         # Flask-Cachingä¸æ”¯æŒæ¨¡å¼åŒ¹é…ï¼Œç®€åŒ–å®žçŽ°
64 |         # è¿™é‡Œè¿”å›žTrueï¼Œè¡¨ç¤ºæ“ä½œæˆåŠŸ
65 |         logger.info(f"æ¸…é™¤ç”¨æˆ·ç¼“å­˜: {username}")
   |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
66 |         return True
   |
help: Convert to lazy `%` formatting

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/cache_service.py:78:31
   |
77 |         """
78 |         # Flask-Cachingä¸æ”¯æŒæ¨¡å¼åŒ¹é…ï¼Œç®€åŒ–å®žçŽ°
   |                                      ^^
79 |         # è¿™é‡Œè¿”å›žTrueï¼Œè¡¨ç¤ºæ“ä½œæˆåŠŸ
80 |         logger.info(f"æ¸…é™¤å®žä¾‹ç¼“å­˜: {instance_id}")
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/cache_service.py:79:19
   |
77 |         """
78 |         # Flask-Cachingä¸æ”¯æŒæ¨¡å¼åŒ¹é…ï¼Œç®€åŒ–å®žçŽ°
79 |         # è¿™é‡Œè¿”å›žTrueï¼Œè¡¨ç¤ºæ“ä½œæˆåŠŸ
   |                       ^^
80 |         logger.info(f"æ¸…é™¤å®žä¾‹ç¼“å­˜: {instance_id}")
81 |         return True
   |

G004 Logging statement uses f-string
  --> app/services/cache_service.py:80:21
   |
78 |         # Flask-Cachingä¸æ”¯æŒæ¨¡å¼åŒ¹é…ï¼Œç®€åŒ–å®žçŽ°
79 |         # è¿™é‡Œè¿”å›žTrueï¼Œè¡¨ç¤ºæ“ä½œæˆåŠŸ
80 |         logger.info(f"æ¸…é™¤å®žä¾‹ç¼“å­˜: {instance_id}")
   |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
81 |         return True
   |
help: Convert to lazy `%` formatting

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/cache_service.py:87:25
   |
86 |         Returns:
87 |             åŒ…å«ç¼“å­˜çŠ¶æ€å’Œä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                     ^^
88 |             {
89 |                 'status': 'connected',  # æˆ– 'no_cache'ã€'error'
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/cache_service.py:87:30
   |
86 |         Returns:
87 |             åŒ…å«ç¼“å­˜çŠ¶æ€å’Œä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                               ^^
88 |             {
89 |                 'status': 'connected',  # æˆ– 'no_cache'ã€'error'
   |

TRY300 Consider moving this statement to an `else` block
   --> app/services/cache_service.py:101:13
    |
 99 |                 info = self.cache.cache.info()
100 |                 return {"status": "connected", "info": info}
101 |             return {"status": "connected", "info": "æœªèŽ·å–åˆ°ç¼“å­˜è¯¦æƒ…"}
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
102 |         except Exception as e:
103 |             return {"status": "error", "error": str(e)}
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/cache_service.py:102:16
    |
100 |                 return {"status": "connected", "info": info}
101 |             return {"status": "connected", "info": "æœªèŽ·å–åˆ°ç¼“å­˜è¯¦æƒ…"}
102 |         except Exception as e:
    |                ^^^^^^^^^
103 |             return {"status": "error", "error": str(e)}
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/cache_service.py:113:20
    |
112 |         Returns:
113 |             ç¼“å­˜çš„è¯„ä¼°ç»“æžœï¼ˆTrue/Falseï¼‰ï¼Œç¼“å­˜æœªå‘½ä¸­æˆ–å‡ºé”™æ—¶è¿”å›ž Noneã€‚
    |                           ^^
114 |
115 |         """
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/cache_service.py:113:31
    |
112 |         Returns:
113 |             ç¼“å­˜çš„è¯„ä¼°ç»“æžœï¼ˆTrue/Falseï¼‰ï¼Œç¼“å­˜æœªå‘½ä¸­æˆ–å‡ºé”™æ—¶è¿”å›ž Noneã€‚
    |                                       ^^
114 |
115 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:113:32
    |
112 |         Returns:
113 |             ç¼“å­˜çš„è¯„ä¼°ç»“æžœï¼ˆTrue/Falseï¼‰ï¼Œç¼“å­˜æœªå‘½ä¸­æˆ–å‡ºé”™æ—¶è¿”å›ž Noneã€‚
    |                                         ^^
114 |
115 |         """
    |

G004 Logging statement uses f-string
   --> app/services/cache_service.py:126:21
    |
124 |                 data = json.loads(cached_data) if isinstance(cached_data, str) else cached_data
125 |                 logger.debug(
126 |                     f"è§„åˆ™è¯„ä¼°ç¼“å­˜å‘½ä¸­: rule_id={rule_id}, account_id={account_id}",
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
127 |                     cache_key=cache_key,
128 |                 )
    |
help: Convert to lazy `%` formatting

TRY300 Consider moving this statement to an `else` block
   --> app/services/cache_service.py:131:13
    |
129 |                 return data.get("result")
130 |
131 |             return None
    |             ^^^^^^^^^^^
132 |
133 |         except Exception as e:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/cache_service.py:133:16
    |
131 |             return None
132 |
133 |         except Exception as e:
    |                ^^^^^^^^^
134 |             logger.warning(
135 |                 f"èŽ·å–è§„åˆ™è¯„ä¼°ç¼“å­˜å¤±è´¥: rule_id={rule_id}, account_id={account_id}",
    |

G004 Logging statement uses f-string
   --> app/services/cache_service.py:135:17
    |
133 |         except Exception as e:
134 |             logger.warning(
135 |                 f"èŽ·å–è§„åˆ™è¯„ä¼°ç¼“å­˜å¤±è´¥: rule_id={rule_id}, account_id={account_id}",
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
136 |                 error=str(e),
137 |             )
    |
help: Convert to lazy `%` formatting

FBT001 Boolean-typed positional argument in function definition
   --> app/services/cache_service.py:140:72
    |
138 |             return None
139 |
140 |     def set_rule_evaluation_cache(self, rule_id: int, account_id: int, result: bool, ttl: int | None = None) -> bool:
    |                                                                        ^^^^^^
141 |         """è®¾ç½®è§„åˆ™è¯„ä¼°ç¼“å­˜ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/cache_service.py:147:24
    |
145 |             account_id: è´¦æˆ· IDã€‚
146 |             result: è¯„ä¼°ç»“æžœã€‚
147 |             ttl: ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨é…ç½®çš„è§„åˆ™è¯„ä¼°ç¼“å­˜æ—¶é—´ã€‚
    |                              ^^
148 |
149 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/cache_service.py:147:26
    |
145 |             account_id: è´¦æˆ· IDã€‚
146 |             result: è¯„ä¼°ç»“æžœã€‚
147 |             ttl: ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨é…ç½®çš„è§„åˆ™è¯„ä¼°ç¼“å­˜æ—¶é—´ã€‚
    |                                  ^^
148 |
149 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:147:27
    |
145 |             account_id: è´¦æˆ· IDã€‚
146 |             result: è¯„ä¼°ç»“æžœã€‚
147 |             ttl: ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨é…ç½®çš„è§„åˆ™è¯„ä¼°ç¼“å­˜æ—¶é—´ã€‚
    |                                    ^^
148 |
149 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:150:22
    |
149 |         Returns:
150 |             æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
    |                          ^^
151 |
152 |         """
    |

G004 Logging statement uses f-string
   --> app/services/cache_service.py:168:17
    |
166 |             self.cache.set(cache_key, cache_data, timeout=ttl)
167 |             logger.debug(
168 |                 f"è§„åˆ™è¯„ä¼°ç¼“å­˜å·²è®¾ç½®: rule_id={rule_id}, account_id={account_id}",
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
169 |                 cache_key=cache_key,
170 |                 ttl=ttl,
    |
help: Convert to lazy `%` formatting

TRY300 Consider moving this statement to an `else` block
   --> app/services/cache_service.py:172:13
    |
170 |                 ttl=ttl,
171 |             )
172 |             return True
    |             ^^^^^^^^^^^
173 |
174 |         except Exception as e:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/cache_service.py:174:16
    |
172 |             return True
173 |
174 |         except Exception as e:
    |                ^^^^^^^^^
175 |             logger.warning(
176 |                 f"è®¾ç½®è§„åˆ™è¯„ä¼°ç¼“å­˜å¤±è´¥: rule_id={rule_id}, account_id={account_id}",
    |

G004 Logging statement uses f-string
   --> app/services/cache_service.py:176:17
    |
174 |         except Exception as e:
175 |             logger.warning(
176 |                 f"è®¾ç½®è§„åˆ™è¯„ä¼°ç¼“å­˜å¤±è´¥: rule_id={rule_id}, account_id={account_id}",
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
177 |                 error=str(e),
178 |             )
    |
help: Convert to lazy `%` formatting

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:185:20
    |
184 |         Returns:
185 |             ç¼“å­˜çš„è§„åˆ™åˆ—è¡¨ï¼Œç¼“å­˜æœªå‘½ä¸­æˆ–å‡ºé”™æ—¶è¿”å›ž Noneã€‚
    |                           ^^
186 |
187 |         """
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/cache_service.py:200:13
    |
198 |                 return data
199 |
200 |             return None
    |             ^^^^^^^^^^^
201 |
202 |         except Exception as e:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/cache_service.py:202:16
    |
200 |             return None
201 |
202 |         except Exception as e:
    |                ^^^^^^^^^
203 |             logger.warning("èŽ·å–åˆ†ç±»è§„åˆ™ç¼“å­˜å¤±è´¥", error=str(e))
204 |             return None
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/cache_service.py:211:24
    |
209 |         Args:
210 |             rules: è§„åˆ™åˆ—è¡¨ã€‚
211 |             ttl: ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨é…ç½®çš„è§„åˆ™ç¼“å­˜æ—¶é—´ã€‚
    |                              ^^
212 |
213 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/cache_service.py:211:26
    |
209 |         Args:
210 |             rules: è§„åˆ™åˆ—è¡¨ã€‚
211 |             ttl: ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨é…ç½®çš„è§„åˆ™ç¼“å­˜æ—¶é—´ã€‚
    |                                  ^^
212 |
213 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:211:27
    |
209 |         Args:
210 |             rules: è§„åˆ™åˆ—è¡¨ã€‚
211 |             ttl: ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨é…ç½®çš„è§„åˆ™ç¼“å­˜æ—¶é—´ã€‚
    |                                    ^^
212 |
213 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:214:22
    |
213 |         Returns:
214 |             æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
    |                          ^^
215 |
216 |         """
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/cache_service.py:231:13
    |
229 |             self.cache.set(cache_key, cache_data, timeout=ttl)
230 |             logger.debug("åˆ†ç±»è§„åˆ™ç¼“å­˜å·²è®¾ç½®", cache_key=cache_key, ttl=ttl, count=len(rules))
231 |             return True
    |             ^^^^^^^^^^^
232 |
233 |         except Exception as e:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/cache_service.py:233:16
    |
231 |             return True
232 |
233 |         except Exception as e:
    |                ^^^^^^^^^
234 |             logger.warning("è®¾ç½®åˆ†ç±»è§„åˆ™ç¼“å­˜å¤±è´¥", error=str(e))
235 |             return False
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:244:22
    |
243 |         Returns:
244 |             æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
    |                          ^^
245 |
246 |         """
    |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/cache_service.py:256:17
    |
255 |             # æ¸…é™¤è¯¥è´¦æˆ·çš„æ‰€æœ‰è§„åˆ™è¯„ä¼°ç¼“å­˜
256 |             # æ³¨æ„ï¼šè¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®žé™…åº”è¯¥éåŽ†æ‰€æœ‰è§„åˆ™ID
    |                   ^^
257 |             logger.info(f"æ¸…é™¤è´¦æˆ·ç¼“å­˜: account_id={account_id}")
258 |             return True
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:256:24
    |
255 |             # æ¸…é™¤è¯¥è´¦æˆ·çš„æ‰€æœ‰è§„åˆ™è¯„ä¼°ç¼“å­˜
256 |             # æ³¨æ„ï¼šè¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®žé™…åº”è¯¥éåŽ†æ‰€æœ‰è§„åˆ™ID
    |                                 ^^
257 |             logger.info(f"æ¸…é™¤è´¦æˆ·ç¼“å­˜: account_id={account_id}")
258 |             return True
    |

G004 Logging statement uses f-string
   --> app/services/cache_service.py:257:25
    |
255 |             # æ¸…é™¤è¯¥è´¦æˆ·çš„æ‰€æœ‰è§„åˆ™è¯„ä¼°ç¼“å­˜
256 |             # æ³¨æ„ï¼šè¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®žé™…åº”è¯¥éåŽ†æ‰€æœ‰è§„åˆ™ID
257 |             logger.info(f"æ¸…é™¤è´¦æˆ·ç¼“å­˜: account_id={account_id}")
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
258 |             return True
    |
help: Convert to lazy `%` formatting

TRY300 Consider moving this statement to an `else` block
   --> app/services/cache_service.py:258:13
    |
256 |             # æ³¨æ„ï¼šè¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®žé™…åº”è¯¥éåŽ†æ‰€æœ‰è§„åˆ™ID
257 |             logger.info(f"æ¸…é™¤è´¦æˆ·ç¼“å­˜: account_id={account_id}")
258 |             return True
    |             ^^^^^^^^^^^
259 |
260 |         except Exception as e:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/cache_service.py:260:16
    |
258 |             return True
259 |
260 |         except Exception as e:
    |                ^^^^^^^^^
261 |             logger.warning(f"æ¸…é™¤è´¦æˆ·ç¼“å­˜å¤±è´¥: account_id={account_id}", error=str(e))
262 |             return False
    |

G004 Logging statement uses f-string
   --> app/services/cache_service.py:261:28
    |
260 |         except Exception as e:
261 |             logger.warning(f"æ¸…é™¤è´¦æˆ·ç¼“å­˜å¤±è´¥: account_id={account_id}", error=str(e))
    |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
262 |             return False
    |
help: Convert to lazy `%` formatting

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:268:22
    |
267 |         Returns:
268 |             æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
    |                          ^^
269 |
270 |         """
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/cache_service.py:283:13
    |
282 |             logger.info("æ¸…é™¤åˆ†ç±»ç¼“å­˜")
283 |             return True
    |             ^^^^^^^^^^^
284 |
285 |         except Exception as e:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/cache_service.py:285:16
    |
283 |             return True
284 |
285 |         except Exception as e:
    |                ^^^^^^^^^
286 |             logger.warning("æ¸…é™¤åˆ†ç±»ç¼“å­˜å¤±è´¥", error=str(e))
287 |             return False
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:293:22
    |
292 |         Returns:
293 |             æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
    |                          ^^
294 |
295 |         """
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:300:37
    |
298 |                 return True
299 |
300 |             # ç”±äºŽFlask-Cachingä¸æ”¯æŒæ¨¡å¼åŒ¹é…ï¼Œè¿™é‡Œç®€åŒ–å¤„ç†
    |                                              ^^
301 |             # åœ¨å®žé™…åº”ç”¨ä¸­ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨Redisçš„KEYSå‘½ä»¤æˆ–SCANå‘½ä»¤
302 |             logger.info("æ¸…é™¤æ‰€æœ‰è§„åˆ™è¯„ä¼°ç¼“å­˜")
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:301:21
    |
300 |             # ç”±äºŽFlask-Cachingä¸æ”¯æŒæ¨¡å¼åŒ¹é…ï¼Œè¿™é‡Œç®€åŒ–å¤„ç†
301 |             # åœ¨å®žé™…åº”ç”¨ä¸­ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨Redisçš„KEYSå‘½ä»¤æˆ–SCANå‘½ä»¤
    |                           ^^
302 |             logger.info("æ¸…é™¤æ‰€æœ‰è§„åˆ™è¯„ä¼°ç¼“å­˜")
303 |             return True
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/cache_service.py:303:13
    |
301 |             # åœ¨å®žé™…åº”ç”¨ä¸­ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨Redisçš„KEYSå‘½ä»¤æˆ–SCANå‘½ä»¤
302 |             logger.info("æ¸…é™¤æ‰€æœ‰è§„åˆ™è¯„ä¼°ç¼“å­˜")
303 |             return True
    |             ^^^^^^^^^^^
304 |
305 |         except Exception as e:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/cache_service.py:305:16
    |
303 |             return True
304 |
305 |         except Exception as e:
    |                ^^^^^^^^^
306 |             logger.warning("æ¸…é™¤æ‰€æœ‰è§„åˆ™è¯„ä¼°ç¼“å­˜å¤±è´¥", error=str(e))
307 |             return False
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:313:27
    |
312 |         Args:
313 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¦‚ 'mysql'ã€'postgresql'ã€‚
    |                                ^^
314 |
315 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:316:20
    |
315 |         Returns:
316 |             ç¼“å­˜çš„è§„åˆ™åˆ—è¡¨ï¼Œç¼“å­˜æœªå‘½ä¸­æˆ–å‡ºé”™æ—¶è¿”å›ž Noneã€‚
    |                           ^^
317 |
318 |         """
    |

G004 Logging statement uses f-string
   --> app/services/cache_service.py:331:25
    |
329 |                 if isinstance(data, dict) and "rules" in data:
330 |                     logger.debug(
331 |                         f"æ•°æ®åº“ç±»åž‹è§„åˆ™ç¼“å­˜å‘½ä¸­: {db_type}",
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
332 |                         cache_key=cache_key,
333 |                         count=len(data["rules"]),
    |
help: Convert to lazy `%` formatting

G004 Logging statement uses f-string
   --> app/services/cache_service.py:338:25
    |
336 |                 if isinstance(data, list):
337 |                     logger.debug(
338 |                         f"æ•°æ®åº“ç±»åž‹è§„åˆ™ç¼“å­˜å‘½ä¸­ï¼ˆæ—§æ ¼å¼ï¼‰: {db_type}",
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
339 |                         cache_key=cache_key,
340 |                         count=len(data),
    |
help: Convert to lazy `%` formatting

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/cache_service.py:338:38
    |
336 |                 if isinstance(data, list):
337 |                     logger.debug(
338 |                         f"æ•°æ®åº“ç±»åž‹è§„åˆ™ç¼“å­˜å‘½ä¸­ï¼ˆæ—§æ ¼å¼ï¼‰: {db_type}",
    |                                                 ^^
339 |                         cache_key=cache_key,
340 |                         count=len(data),
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/cache_service.py:338:42
    |
336 |                 if isinstance(data, list):
337 |                     logger.debug(
338 |                         f"æ•°æ®åº“ç±»åž‹è§„åˆ™ç¼“å­˜å‘½ä¸­ï¼ˆæ—§æ ¼å¼ï¼‰: {db_type}",
    |                                                         ^^
339 |                         cache_key=cache_key,
340 |                         count=len(data),
    |

G004 Logging statement uses f-string
   --> app/services/cache_service.py:344:21
    |
342 |                     return data
343 |                 logger.warning(
344 |                     f"æ•°æ®åº“ç±»åž‹è§„åˆ™ç¼“å­˜æ ¼å¼é”™è¯¯: {db_type}",
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
345 |                     cache_key=cache_key,
346 |                 )
    |
help: Convert to lazy `%` formatting

TRY300 Consider moving this statement to an `else` block
   --> app/services/cache_service.py:349:13
    |
347 |                 return None
348 |
349 |             return None
    |             ^^^^^^^^^^^
350 |
351 |         except Exception as e:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/cache_service.py:351:16
    |
349 |             return None
350 |
351 |         except Exception as e:
    |                ^^^^^^^^^
352 |             logger.warning(f"èŽ·å–æ•°æ®åº“ç±»åž‹è§„åˆ™ç¼“å­˜å¤±è´¥: {db_type}", error=str(e))
353 |             return None
    |

G004 Logging statement uses f-string
   --> app/services/cache_service.py:352:28
    |
351 |         except Exception as e:
352 |             logger.warning(f"èŽ·å–æ•°æ®åº“ç±»åž‹è§„åˆ™ç¼“å­˜å¤±è´¥: {db_type}", error=str(e))
    |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
353 |             return None
    |
help: Convert to lazy `%` formatting

E501 Line too long (131 > 120)
   --> app/services/cache_service.py:355:121
    |
353 |             return None
354 |
355 |     def set_classification_rules_by_db_type_cache(self, db_type: str, rules: list[dict[str, Any]], ttl: int | None = None) -> bool:
    |                                                                                                                         ^^^^^^^^^^^
356 |         """è®¾ç½®æŒ‰æ•°æ®åº“ç±»åž‹åˆ†ç±»çš„è§„åˆ™ç¼“å­˜ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:359:27
    |
358 |         Args:
359 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¦‚ 'mysql'ã€'postgresql'ã€‚
    |                                ^^
360 |             rules: è§„åˆ™åˆ—è¡¨ã€‚
361 |             ttl: ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨é…ç½®çš„è§„åˆ™ç¼“å­˜æ—¶é—´ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/cache_service.py:361:24
    |
359 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¦‚ 'mysql'ã€'postgresql'ã€‚
360 |             rules: è§„åˆ™åˆ—è¡¨ã€‚
361 |             ttl: ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨é…ç½®çš„è§„åˆ™ç¼“å­˜æ—¶é—´ã€‚
    |                              ^^
362 |
363 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/cache_service.py:361:26
    |
359 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¦‚ 'mysql'ã€'postgresql'ã€‚
360 |             rules: è§„åˆ™åˆ—è¡¨ã€‚
361 |             ttl: ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨é…ç½®çš„è§„åˆ™ç¼“å­˜æ—¶é—´ã€‚
    |                                  ^^
362 |
363 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:361:27
    |
359 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¦‚ 'mysql'ã€'postgresql'ã€‚
360 |             rules: è§„åˆ™åˆ—è¡¨ã€‚
361 |             ttl: ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨é…ç½®çš„è§„åˆ™ç¼“å­˜æ—¶é—´ã€‚
    |                                    ^^
362 |
363 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:364:22
    |
363 |         Returns:
364 |             æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
    |                          ^^
365 |
366 |         """
    |

G004 Logging statement uses f-string
   --> app/services/cache_service.py:382:17
    |
380 |             self.cache.set(cache_key, cache_data, timeout=ttl)
381 |             logger.debug(
382 |                 f"æ•°æ®åº“ç±»åž‹è§„åˆ™ç¼“å­˜å·²è®¾ç½®: {db_type}",
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
383 |                 cache_key=cache_key,
384 |                 ttl=ttl,
    |
help: Convert to lazy `%` formatting

TRY300 Consider moving this statement to an `else` block
   --> app/services/cache_service.py:387:13
    |
385 |                 count=len(rules),
386 |             )
387 |             return True
    |             ^^^^^^^^^^^
388 |
389 |         except Exception as e:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/cache_service.py:389:16
    |
387 |             return True
388 |
389 |         except Exception as e:
    |                ^^^^^^^^^
390 |             logger.warning(f"è®¾ç½®æ•°æ®åº“ç±»åž‹è§„åˆ™ç¼“å­˜å¤±è´¥: {db_type}", error=str(e))
391 |             return False
    |

G004 Logging statement uses f-string
   --> app/services/cache_service.py:390:28
    |
389 |         except Exception as e:
390 |             logger.warning(f"è®¾ç½®æ•°æ®åº“ç±»åž‹è§„åˆ™ç¼“å­˜å¤±è´¥: {db_type}", error=str(e))
    |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
391 |             return False
    |
help: Convert to lazy `%` formatting

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:397:27
    |
396 |         Args:
397 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¦‚ 'mysql'ã€'postgresql'ã€‚
    |                                ^^
398 |
399 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:400:22
    |
399 |         Returns:
400 |             æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
    |                          ^^
401 |
402 |         """
    |

G004 Logging statement uses f-string
   --> app/services/cache_service.py:410:25
    |
408 |             self.cache.delete(rules_key)
409 |
410 |             logger.info(f"æ¸…é™¤æ•°æ®åº“ç±»åž‹ç¼“å­˜: {db_type}")
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
411 |             return True
    |
help: Convert to lazy `%` formatting

TRY300 Consider moving this statement to an `else` block
   --> app/services/cache_service.py:411:13
    |
410 |             logger.info(f"æ¸…é™¤æ•°æ®åº“ç±»åž‹ç¼“å­˜: {db_type}")
411 |             return True
    |             ^^^^^^^^^^^
412 |
413 |         except Exception as e:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/cache_service.py:413:16
    |
411 |             return True
412 |
413 |         except Exception as e:
    |                ^^^^^^^^^
414 |             logger.warning(f"æ¸…é™¤æ•°æ®åº“ç±»åž‹ç¼“å­˜å¤±è´¥: {db_type}", error=str(e))
415 |             return False
    |

G004 Logging statement uses f-string
   --> app/services/cache_service.py:414:28
    |
413 |         except Exception as e:
414 |             logger.warning(f"æ¸…é™¤æ•°æ®åº“ç±»åž‹ç¼“å­˜å¤±è´¥: {db_type}", error=str(e))
    |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
415 |             return False
    |
help: Convert to lazy `%` formatting

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:421:22
    |
420 |         Returns:
421 |             æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
    |                          ^^
422 |
423 |         """
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/cache_service.py:433:13
    |
432 |             logger.info("æ¸…é™¤æ‰€æœ‰æ•°æ®åº“ç±»åž‹ç¼“å­˜")
433 |             return True
    |             ^^^^^^^^^^^
434 |
435 |         except Exception as e:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/cache_service.py:435:16
    |
433 |             return True
434 |
435 |         except Exception as e:
    |                ^^^^^^^^^
436 |             logger.warning("æ¸…é™¤æ‰€æœ‰æ•°æ®åº“ç±»åž‹ç¼“å­˜å¤±è´¥", error=str(e))
437 |             return False
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:445:26
    |
444 |         Returns:
445 |             å¦‚æžœç¼“å­˜æ­£å¸¸è¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚
    |                                  ^^
446 |
447 |         """
    |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/cache_service.py:452:22
    |
450 |                 return False
451 |
452 |             # ç®€å•çš„å¥åº·æ£€æŸ¥ï¼šå°è¯•è®¾ç½®å’ŒèŽ·å–ä¸€ä¸ªæµ‹è¯•é”®
    |                             ^^
453 |             test_key = "health_check_test"
454 |             test_value = "ok"
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/cache_service.py:458:13
    |
456 |             result = self.cache.get(test_key)
457 |             self.cache.delete(test_key)
458 |             return result == test_value
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
459 |         except Exception as e:
460 |             logger.warning("ç¼“å­˜å¥åº·æ£€æŸ¥å¤±è´¥", error=str(e))
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/cache_service.py:459:16
    |
457 |             self.cache.delete(test_key)
458 |             return result == test_value
459 |         except Exception as e:
    |                ^^^^^^^^^
460 |             logger.warning("ç¼“å­˜å¥åº·æ£€æŸ¥å¤±è´¥", error=str(e))
461 |             return False
    |

PLW0603 Using the global statement to update `cache_service` is discouraged
   --> app/services/cache_service.py:480:12
    |
479 |     """
480 |     global cache_service, cache_manager
    |            ^^^^^^^^^^^^^
481 |     cache_service = CacheService(cache)
482 |     cache_manager = cache_service
    |

PLW0603 Using the global statement to update `cache_manager` is discouraged
   --> app/services/cache_service.py:480:27
    |
479 |     """
480 |     global cache_service, cache_manager
    |                           ^^^^^^^^^^^^^
481 |     cache_service = CacheService(cache)
482 |     cache_manager = cache_service
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/cache_service.py:488:13
    |
487 | def init_cache_manager(cache: Cache) -> CacheService:
488 |     """å…¼å®¹æ—§å…¥å£ï¼Œå†…éƒ¨è°ƒç”¨æ–°çš„åˆå§‹åŒ–æ–¹æ³•ã€‚.
    |                  ^^
489 |
490 |     Args:
    |

D205 1 blank line required between summary line and description
 --> app/services/connection_adapters/__init__.py:1:1
  |
1 | / """é²¸è½ - è¿žæŽ¥é€‚é…å™¨æ¨¡å—
2 | | é›†ä¸­æä¾›æ•°æ®åº“è¿žæŽ¥å·¥åŽ‚ä¸Žè¿žæŽ¥æµ‹è¯•æœåŠ¡.
3 | | """
  | |___^
4 |
5 |   from .connection_factory import ConnectionFactory
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/connection_adapters/adapters/base.py:19:25
   |
18 |     Args:
19 |         db_type: æ•°æ®åº“ç±»åž‹åç§°ï¼ˆå¦‚ 'mysql'ã€'postgresql'ï¼‰ã€‚
   |                                ^^
20 |
21 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/connection_adapters/adapters/base.py:19:48
   |
18 |     Args:
19 |         db_type: æ•°æ®åº“ç±»åž‹åç§°ï¼ˆå¦‚ 'mysql'ã€'postgresql'ï¼‰ã€‚
   |                                                          ^^
20 |
21 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/adapters/base.py:22:21
   |
21 |     Returns:
22 |         é»˜è®¤ schema åç§°ï¼Œå¦‚æžœæœªé…ç½®åˆ™è¿”å›žç©ºå­—ç¬¦ä¸²ã€‚
   |                         ^^
23 |
24 |     Example:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/adapters/base.py:36:17
   |
34 |     """æ•°æ®åº“è¿žæŽ¥æŠ½è±¡åŸºç±»ã€‚.
35 |
36 |     å®šä¹‰æ•°æ®åº“è¿žæŽ¥çš„æ ‡å‡†æŽ¥å£ï¼Œæ‰€æœ‰æ•°æ®åº“ç±»åž‹çš„è¿žæŽ¥é€‚é…å™¨éƒ½åº”ç»§æ‰¿æ­¤åŸºç±»ã€‚
   |                             ^^
37 |
38 |     Attributes:
   |

D107 Missing docstring in `__init__`
  --> app/services/connection_adapters/adapters/base.py:52:9
   |
50 |     """
51 |
52 |     def __init__(self, instance: Instance) -> None:
   |         ^^^^^^^^
53 |         self.instance = instance
54 |         self.db_logger = get_db_logger()
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/adapters/base.py:63:24
   |
62 |         Returns:
63 |             è¿žæŽ¥æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
   |                              ^^
64 |
65 |         Raises:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/adapters/base.py:87:19
   |
86 |         Returns:
87 |             æµ‹è¯•ç»“æžœå­—å…¸ï¼ŒåŒ…å«è¿žæŽ¥çŠ¶æ€ã€ç‰ˆæœ¬ä¿¡æ¯ç­‰ã€‚
   |                         ^^
88 |
89 |         Raises:
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `params`
  --> app/services/connection_adapters/adapters/base.py:95:49
   |
94 |     @abstractmethod
95 |     def execute_query(self, query: str, params: Any | None = None) -> Any:
   |                                                 ^^^^^^^^^^
96 |         """æ‰§è¡ŒæŸ¥è¯¢å¹¶è¿”å›žç»“æžœã€‚.
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `execute_query`
  --> app/services/connection_adapters/adapters/base.py:95:71
   |
94 |     @abstractmethod
95 |     def execute_query(self, query: str, params: Any | None = None) -> Any:
   |                                                                       ^^^
96 |         """æ‰§è¡ŒæŸ¥è¯¢å¹¶è¿”å›žç»“æžœã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/connection_adapters/adapters/base.py:103:17
    |
102 |         Returns:
103 |             æŸ¥è¯¢ç»“æžœï¼Œé€šå¸¸ä¸ºè¡Œåˆ—è¡¨ã€‚
    |                     ^^
104 |
105 |         Raises:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/connection_adapters/adapters/base.py:115:21
    |
114 |         Returns:
115 |             æ•°æ®åº“ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ŒèŽ·å–å¤±è´¥è¿”å›ž Noneã€‚
    |                             ^^
116 |
117 |         Raises:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/adapters/mysql_adapter.py:17:30
   |
16 |         Returns:
17 |             bool: è¿žæŽ¥æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
   |                                    ^^
18 |
19 |         """
   |

PLC0415 `import` should be at the top-level of a file
  --> app/services/connection_adapters/adapters/mysql_adapter.py:21:13
   |
19 |         """
20 |         try:
21 |             import pymysql
   |             ^^^^^^^^^^^^^^
22 |
23 |             password = self.instance.credential.get_plain_password() if self.instance.credential else ""
   |

TRY300 Consider moving this statement to an `else` block
  --> app/services/connection_adapters/adapters/mysql_adapter.py:39:13
   |
37 |             )
38 |             self.is_connected = True
39 |             return True
   |             ^^^^^^^^^^^
40 |         except Exception as exc:
41 |             self.db_logger.exception(
   |

TRY300 Consider moving this statement to an `else` block
  --> app/services/connection_adapters/adapters/mysql_adapter.py:79:13
   |
78 |               version = self.get_version()
79 | /             return {
80 | |                 "success": True,
81 | |                 "message": f"MySQLè¿žæŽ¥æˆåŠŸ (ä¸»æœº: {self.instance.host}:{self.instance.port}, ç‰ˆæœ¬: {version or 'æœªçŸ¥'})",
82 | |                 "database_version": version,
83 | |             }
   | |_____________^
84 |           except Exception as exc:
85 |               return {"success": False, "error": str(exc)}
   |

E501 Line too long (121 > 120)
  --> app/services/connection_adapters/adapters/mysql_adapter.py:81:111
   |
79 |             return {
80 |                 "success": True,
81 |                 "message": f"MySQLè¿žæŽ¥æˆåŠŸ (ä¸»æœº: {self.instance.host}:{self.instance.port}, ç‰ˆæœ¬: {version or 'æœªçŸ¥'})",
   |                                                                                                                         ^
82 |                 "database_version": version,
83 |             }
   |

BLE001 Do not catch blind exception: `Exception`
  --> app/services/connection_adapters/adapters/mysql_adapter.py:84:16
   |
82 |                 "database_version": version,
83 |             }
84 |         except Exception as exc:
   |                ^^^^^^^^^
85 |             return {"success": False, "error": str(exc)}
86 |         finally:
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `execute_query`
  --> app/services/connection_adapters/adapters/mysql_adapter.py:89:73
   |
87 |             self.disconnect()
88 |
89 |     def execute_query(self, query: str, params: tuple | None = None) -> Any:
   |                                                                         ^^^
90 |         """æ‰§è¡Œ SQL æŸ¥è¯¢å¹¶è¿”å›žå…¨éƒ¨ç»“æžœã€‚.
   |

TRY002 Create your own exception
   --> app/services/connection_adapters/adapters/mysql_adapter.py:102:19
    |
100 |         if not self.is_connected and not self.connect():
101 |             msg = "æ— æ³•å»ºç«‹æ•°æ®åº“è¿žæŽ¥"
102 |             raise Exception(msg)
    |                   ^^^^^^^^^^^^^^
103 |
104 |         cursor = self.connection.cursor()
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/connection_adapters/adapters/mysql_adapter.py:115:35
    |
114 |         Returns:
115 |             str | None: æˆåŠŸæ—¶è¿”å›žç‰ˆæœ¬å­—ç¬¦ä¸²ï¼Œå¦åˆ™ Noneã€‚
    |                                             ^^
116 |
117 |         """
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/connection_adapters/adapters/mysql_adapter.py:122:13
    |
120 |             if result:
121 |                 return result[0][0]
122 |             return None
    |             ^^^^^^^^^^^
123 |         except Exception:
124 |             return None
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/connection_adapters/adapters/mysql_adapter.py:123:16
    |
121 |                 return result[0][0]
122 |             return None
123 |         except Exception:
    |                ^^^^^^^^^
124 |             return None
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/adapters/oracle_adapter.py:17:30
   |
16 |         Returns:
17 |             bool: è¿žæŽ¥æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
   |                                    ^^
18 |
19 |         """
   |

PLC0415 `import` should be at the top-level of a file
  --> app/services/connection_adapters/adapters/oracle_adapter.py:22:13
   |
20 |         username_for_connection = None
21 |         try:
22 |             import os
   |             ^^^^^^^^^
23 |
24 |             import oracledb
   |

PLC0415 `import` should be at the top-level of a file
  --> app/services/connection_adapters/adapters/oracle_adapter.py:24:13
   |
22 |             import os
23 |
24 |             import oracledb
   |             ^^^^^^^^^^^^^^^
25 |
26 |             password = self.instance.credential.get_plain_password() if self.instance.credential else ""
   |

E501 Line too long (129 > 120)
  --> app/services/connection_adapters/adapters/oracle_adapter.py:32:121
   |
30 |             port = self.instance.port
31 |             service_name = self.instance.database_name or "ORCL"
32 |             dsn = f"(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST={host})(PORT={port}))(CONNECT_DATA=(SERVICE_NAME={service_name})))"
   |                                                                                                                         ^^^^^^^^^
33 |
34 |             if not hasattr(oracledb, "is_thin") or not oracledb.is_thin():
   |

PTH118 `os.path.join()` should be replaced by `Path` with `/` operator
  --> app/services/connection_adapters/adapters/oracle_adapter.py:43:48
   |
41 |                     oracle_home = os.getenv("ORACLE_HOME")
42 |                     if oracle_home:
43 |                         candidate_paths.append(os.path.join(oracle_home, "lib"))
   |                                                ^^^^^^^^^^^^
44 |
45 |                     current_dir = os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
   |

PTH120 `os.path.dirname()` should be replaced by `Path.parent`
  --> app/services/connection_adapters/adapters/oracle_adapter.py:45:35
   |
43 |                         candidate_paths.append(os.path.join(oracle_home, "lib"))
44 |
45 |                     current_dir = os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
   |                                   ^^^^^^^^^^^^^^^
46 |                     candidate_paths.append(os.path.join(current_dir, "oracle_client", "lib"))
   |
help: Replace with `Path(...).parent`

PTH120 `os.path.dirname()` should be replaced by `Path.parent`
  --> app/services/connection_adapters/adapters/oracle_adapter.py:45:51
   |
43 |                         candidate_paths.append(os.path.join(oracle_home, "lib"))
44 |
45 |                     current_dir = os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
   |                                                   ^^^^^^^^^^^^^^^
46 |                     candidate_paths.append(os.path.join(current_dir, "oracle_client", "lib"))
   |
help: Replace with `Path(...).parent`

PTH120 `os.path.dirname()` should be replaced by `Path.parent`
  --> app/services/connection_adapters/adapters/oracle_adapter.py:45:67
   |
43 |                         candidate_paths.append(os.path.join(oracle_home, "lib"))
44 |
45 |                     current_dir = os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
   |                                                                   ^^^^^^^^^^^^^^^
46 |                     candidate_paths.append(os.path.join(current_dir, "oracle_client", "lib"))
   |
help: Replace with `Path(...).parent`

PTH100 `os.path.abspath()` should be replaced by `Path.resolve()`
  --> app/services/connection_adapters/adapters/oracle_adapter.py:45:83
   |
43 |                         candidate_paths.append(os.path.join(oracle_home, "lib"))
44 |
45 |                     current_dir = os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
   |                                                                                   ^^^^^^^^^^^^^^^
46 |                     candidate_paths.append(os.path.join(current_dir, "oracle_client", "lib"))
   |
help: Replace with `Path(...).resolve()`

PTH118 `os.path.join()` should be replaced by `Path` with `/` operator
  --> app/services/connection_adapters/adapters/oracle_adapter.py:46:44
   |
45 |                     current_dir = os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
46 |                     candidate_paths.append(os.path.join(current_dir, "oracle_client", "lib"))
   |                                            ^^^^^^^^^^^^
47 |
48 |                     lib_dir = next((path for path in candidate_paths if path and os.path.isdir(path)), None)
   |

PTH112 `os.path.isdir()` should be replaced by `Path.is_dir()`
  --> app/services/connection_adapters/adapters/oracle_adapter.py:48:82
   |
46 |                     candidate_paths.append(os.path.join(current_dir, "oracle_client", "lib"))
47 |
48 |                     lib_dir = next((path for path in candidate_paths if path and os.path.isdir(path)), None)
   |                                                                                  ^^^^^^^^^^^^^
49 |                     if lib_dir:
50 |                         oracledb.init_oracle_client(lib_dir=lib_dir)
   |
help: Replace with `Path(...).is_dir()`

BLE001 Do not catch blind exception: `Exception`
  --> app/services/connection_adapters/adapters/oracle_adapter.py:53:24
   |
51 |                     else:
52 |                         oracledb.init_oracle_client()
53 |                 except Exception as init_error:
   |                        ^^^^^^^^^
54 |                     if "already been initialized" not in str(init_error).lower():
55 |                         self.db_logger.warning(
   |

TRY300 Consider moving this statement to an `else` block
  --> app/services/connection_adapters/adapters/oracle_adapter.py:74:13
   |
72 |                 username=username_for_connection,
73 |             )
74 |             return True
   |             ^^^^^^^^^^^
75 |         except Exception as exc:
76 |             self.db_logger.exception(
   |

TRY300 Consider moving this statement to an `else` block
   --> app/services/connection_adapters/adapters/oracle_adapter.py:118:13
    |
117 |               version = self.get_version()
118 | /             return {
119 | |                 "success": True,
120 | |                 "message": f"Oracleè¿žæŽ¥æˆåŠŸ (ä¸»æœº: {self.instance.host}:{self.instance.port}, ç‰ˆæœ¬: {version or 'æœªçŸ¥'})",
121 | |                 "database_version": version,
122 | |             }
    | |_____________^
123 |           except Exception as exc:
124 |               return {"success": False, "error": str(exc)}
    |

E501 Line too long (122 > 120)
   --> app/services/connection_adapters/adapters/oracle_adapter.py:120:111
    |
118 |             return {
119 |                 "success": True,
120 |                 "message": f"Oracleè¿žæŽ¥æˆåŠŸ (ä¸»æœº: {self.instance.host}:{self.instance.port}, ç‰ˆæœ¬: {version or 'æœªçŸ¥'})",
    |                                                                                                                         ^^
121 |                 "database_version": version,
122 |             }
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/connection_adapters/adapters/oracle_adapter.py:123:16
    |
121 |                 "database_version": version,
122 |             }
123 |         except Exception as exc:
    |                ^^^^^^^^^
124 |             return {"success": False, "error": str(exc)}
125 |         finally:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `execute_query`
   --> app/services/connection_adapters/adapters/oracle_adapter.py:128:80
    |
126 |             self.disconnect()
127 |
128 |     def execute_query(self, query: str, params: tuple | dict | None = None) -> Any:
    |                                                                                ^^^
129 |         """æ‰§è¡Œ SQL æŸ¥è¯¢å¹¶è¿”å›žå…¨éƒ¨è¡Œã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/connection_adapters/adapters/oracle_adapter.py:133:25
    |
131 |         Args:
132 |             query: SQL è¯­å¥ã€‚
133 |             params: æŸ¥è¯¢å‚æ•°ï¼Œå¯ä¸º tuple æˆ– dictã€‚
    |                             ^^
134 |
135 |         Returns:
    |

TRY002 Create your own exception
   --> app/services/connection_adapters/adapters/oracle_adapter.py:141:19
    |
139 |         if not self.is_connected and not self.connect():
140 |             msg = "æ— æ³•å»ºç«‹æ•°æ®åº“è¿žæŽ¥"
141 |             raise Exception(msg)
    |                   ^^^^^^^^^^^^^^
142 |
143 |         cursor = self.connection.cursor()
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/connection_adapters/adapters/oracle_adapter.py:154:28
    |
153 |         Returns:
154 |             str | None: ç‰ˆæœ¬å·ï¼ŒèŽ·å–å¤±è´¥è¿”å›ž Noneã€‚
    |                               ^^
155 |
156 |         """
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/connection_adapters/adapters/oracle_adapter.py:161:13
    |
159 |             if result:
160 |                 return result[0][0]
161 |             return None
    |             ^^^^^^^^^^^
162 |         except Exception:
163 |             return None
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/connection_adapters/adapters/oracle_adapter.py:162:16
    |
160 |                 return result[0][0]
161 |             return None
162 |         except Exception:
    |                ^^^^^^^^^
163 |             return None
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/adapters/postgresql_adapter.py:17:30
   |
16 |         Returns:
17 |             bool: è¿žæŽ¥æˆåŠŸè¿”å›ž Trueï¼Œå¦åˆ™ Falseã€‚
   |                                    ^^
18 |
19 |         """
   |

PLC0415 `import` should be at the top-level of a file
  --> app/services/connection_adapters/adapters/postgresql_adapter.py:21:13
   |
19 |         """
20 |         try:
21 |             import psycopg
   |             ^^^^^^^^^^^^^^
22 |
23 |             password = self.instance.credential.get_plain_password() if self.instance.credential else ""
   |

TRY300 Consider moving this statement to an `else` block
  --> app/services/connection_adapters/adapters/postgresql_adapter.py:35:13
   |
33 |             )
34 |             self.is_connected = True
35 |             return True
   |             ^^^^^^^^^^^
36 |         except Exception as exc:
37 |             self.db_logger.exception(
   |

TRY300 Consider moving this statement to an `else` block
  --> app/services/connection_adapters/adapters/postgresql_adapter.py:75:13
   |
74 |   â€¦         version = self.get_version()
75 | / â€¦         return {
76 | | â€¦             "success": True,
77 | | â€¦             "message": f"PostgreSQLè¿žæŽ¥æˆåŠŸ (ä¸»æœº: {self.instance.host}:{self.instance.port}, ç‰ˆæœ¬: {version or 'æœªçŸ¥'})",
78 | | â€¦             "database_version": version,
79 | | â€¦         }
   | |___________^
80 |   â€¦     except Exception as exc:
81 |   â€¦         return {"success": False, "error": str(exc)}
   |

E501 Line too long (126 > 120)
  --> app/services/connection_adapters/adapters/postgresql_adapter.py:77:112
   |
75 | â€¦     return {
76 | â€¦         "success": True,
77 | â€¦         "message": f"PostgreSQLè¿žæŽ¥æˆåŠŸ (ä¸»æœº: {self.instance.host}:{self.instance.port}, ç‰ˆæœ¬: {version or 'æœªçŸ¥'})",
   |                                                                                                                    ^^^^^
78 | â€¦         "database_version": version,
79 | â€¦     }
   |

BLE001 Do not catch blind exception: `Exception`
  --> app/services/connection_adapters/adapters/postgresql_adapter.py:80:16
   |
78 |                 "database_version": version,
79 |             }
80 |         except Exception as exc:
   |                ^^^^^^^^^
81 |             return {"success": False, "error": str(exc)}
82 |         finally:
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `execute_query`
  --> app/services/connection_adapters/adapters/postgresql_adapter.py:85:73
   |
83 |             self.disconnect()
84 |
85 |     def execute_query(self, query: str, params: tuple | None = None) -> Any:
   |                                                                         ^^^
86 |         """æ‰§è¡Œ SQL æŸ¥è¯¢å¹¶è¿”å›žæ‰€æœ‰ç»“æžœã€‚.
   |

TRY002 Create your own exception
   --> app/services/connection_adapters/adapters/postgresql_adapter.py:98:19
    |
 96 |         if not self.is_connected and not self.connect():
 97 |             msg = "æ— æ³•å»ºç«‹æ•°æ®åº“è¿žæŽ¥"
 98 |             raise Exception(msg)
    |                   ^^^^^^^^^^^^^^
 99 |
100 |         cursor = self.connection.cursor()
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/connection_adapters/adapters/postgresql_adapter.py:111:28
    |
110 |         Returns:
111 |             str | None: ç‰ˆæœ¬å·ï¼Œå¤±è´¥è¿”å›ž Noneã€‚
    |                               ^^
112 |
113 |         """
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/connection_adapters/adapters/postgresql_adapter.py:118:13
    |
116 |             if result:
117 |                 return result[0][0]
118 |             return None
    |             ^^^^^^^^^^^
119 |         except Exception:
120 |             return None
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/connection_adapters/adapters/postgresql_adapter.py:119:16
    |
117 |                 return result[0][0]
118 |             return None
119 |         except Exception:
    |                ^^^^^^^^^
120 |             return None
    |

D107 Missing docstring in `__init__`
  --> app/services/connection_adapters/adapters/sqlserver_adapter.py:15:9
   |
13 |     """SQL Server æ•°æ®åº“è¿žæŽ¥ã€‚."""
14 |
15 |     def __init__(self, instance: Any) -> None:
   |         ^^^^^^^^
16 |         super().__init__(instance)
17 |         self.driver_type: str | None = None
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `instance`
  --> app/services/connection_adapters/adapters/sqlserver_adapter.py:15:34
   |
13 |     """SQL Server æ•°æ®åº“è¿žæŽ¥ã€‚."""
14 |
15 |     def __init__(self, instance: Any) -> None:
   |                                  ^^^
16 |         super().__init__(instance)
17 |         self.driver_type: str | None = None
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/connection_adapters/adapters/sqlserver_adapter.py:20:28
   |
19 |     def connect(self) -> bool:
20 |         """å»ºç«‹ SQL Server è¿žæŽ¥ï¼ˆå½“å‰ä»…æ”¯æŒ pymssqlï¼‰ã€‚.
   |                                ^^
21 |
22 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/connection_adapters/adapters/sqlserver_adapter.py:20:42
   |
19 |     def connect(self) -> bool:
20 |         """å»ºç«‹ SQL Server è¿žæŽ¥ï¼ˆå½“å‰ä»…æ”¯æŒ pymssqlï¼‰ã€‚.
   |                                                    ^^
21 |
22 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/adapters/sqlserver_adapter.py:23:30
   |
22 |         Returns:
23 |             bool: è¿žæŽ¥æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
   |                                    ^^
24 |
25 |         """
   |

PLC0415 `import` should be at the top-level of a file
  --> app/services/connection_adapters/adapters/sqlserver_adapter.py:60:13
   |
58 |         """
59 |         try:
60 |             import pymssql
   |             ^^^^^^^^^^^^^^
61 |
62 |             self.connection = pymssql.connect(
   |

TRY300 Consider moving this statement to an `else` block
  --> app/services/connection_adapters/adapters/sqlserver_adapter.py:74:13
   |
72 |             self.is_connected = True
73 |             self.driver_type = "pymssql"
74 |             return True
   |             ^^^^^^^^^^^
75 |         except ImportError:
76 |             self.db_logger.exception(
   |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/connection_adapters/adapters/sqlserver_adapter.py:112:20
    |
110 |             try:
111 |                 self.connection.close()
112 |             except Exception as exc:
    |                    ^^^^^^^^^
113 |                 self.db_logger.warning(
114 |                     "SQL Serveræ–­å¼€è¿žæŽ¥å‡ºçŽ°å¼‚å¸¸",
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/connection_adapters/adapters/sqlserver_adapter.py:131:13
    |
130 |   â€¦         version = self.get_version()
131 | / â€¦         return {
132 | | â€¦             "success": True,
133 | | â€¦             "message": f"SQL Serverè¿žæŽ¥æˆåŠŸ (ä¸»æœº: {self.instance.host}:{self.instance.port}, ç‰ˆæœ¬: {version or 'æœªçŸ¥'})",
134 | | â€¦             "database_version": version,
135 | | â€¦         }
    | |___________^
136 |   â€¦     except Exception as exc:
137 |   â€¦         return {"success": False, "error": str(exc)}
    |

E501 Line too long (126 > 120)
   --> app/services/connection_adapters/adapters/sqlserver_adapter.py:133:112
    |
131 | â€¦     return {
132 | â€¦         "success": True,
133 | â€¦         "message": f"SQL Serverè¿žæŽ¥æˆåŠŸ (ä¸»æœº: {self.instance.host}:{self.instance.port}, ç‰ˆæœ¬: {version or 'æœªçŸ¥'})",
    |                                                                                                                    ^^^^^
134 | â€¦         "database_version": version,
135 | â€¦     }
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/connection_adapters/adapters/sqlserver_adapter.py:136:16
    |
134 |                 "database_version": version,
135 |             }
136 |         except Exception as exc:
    |                ^^^^^^^^^
137 |             return {"success": False, "error": str(exc)}
138 |         finally:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `execute_query`
   --> app/services/connection_adapters/adapters/sqlserver_adapter.py:141:73
    |
139 |             self.disconnect()
140 |
141 |     def execute_query(self, query: str, params: tuple | None = None) -> Any:
    |                                                                         ^^^
142 |         """æ‰§è¡Œ SQL æŸ¥è¯¢å¹¶è¿”å›ž `fetchall` ç»“æžœã€‚.
    |

TRY002 Create your own exception
   --> app/services/connection_adapters/adapters/sqlserver_adapter.py:154:19
    |
152 |         if not self.is_connected and not self.connect():
153 |             msg = "æ— æ³•å»ºç«‹æ•°æ®åº“è¿žæŽ¥"
154 |             raise Exception(msg)
    |                   ^^^^^^^^^^^^^^
155 |
156 |         cursor = self.connection.cursor()
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/connection_adapters/adapters/sqlserver_adapter.py:174:13
    |
172 |             if result:
173 |                 return result[0][0]
174 |             return None
    |             ^^^^^^^^^^^
175 |         except Exception:
176 |             return None
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/connection_adapters/adapters/sqlserver_adapter.py:175:16
    |
173 |                 return result[0][0]
174 |             return None
175 |         except Exception:
    |                ^^^^^^^^^
176 |             return None
    |

EXE001 Shebang is present but file is not executable
 --> app/services/connection_adapters/connection_factory.py:1:1
  |
1 | #!/usr/bin/env python3
  | ^^^^^^^^^^^^^^^^^^^^^^
2 |
3 | """æ•°æ®åº“è¿žæŽ¥å·¥åŽ‚ï¼Œä¾æ®å®žä¾‹ç±»åž‹é€‰æ‹©é€‚é…å™¨ã€‚."""
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/connection_adapters/connection_factory.py:3:11
  |
1 | #!/usr/bin/env python3
2 |
3 | """æ•°æ®åº“è¿žæŽ¥å·¥åŽ‚ï¼Œä¾æ®å®žä¾‹ç±»åž‹é€‰æ‹©é€‚é…å™¨ã€‚."""
  |                  ^^
4 |
5 | from __future__ import annotations
  |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/services/connection_adapters/connection_factory.py:39:26
   |
37 |       """
38 |
39 |       CONNECTION_CLASSES = {
   |  __________________________^
40 | |         "mysql": MySQLConnection,
41 | |         "postgresql": PostgreSQLConnection,
42 | |         "sqlserver": SQLServerConnection,
43 | |         "oracle": OracleConnection,
44 | |     }
   | |_____^
45 |
46 |       @staticmethod
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/connection_factory.py:53:30
   |
52 |         Args:
53 |             instance: æ•°æ®åº“å®žä¾‹å¯¹è±¡ï¼ŒåŒ…å«è¿žæŽ¥æ‰€éœ€çš„é…ç½®ä¿¡æ¯ã€‚
   |                                     ^^
54 |
55 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/connection_factory.py:56:20
   |
55 |         Returns:
56 |             æ•°æ®åº“è¿žæŽ¥å¯¹è±¡ï¼Œå¦‚æžœæ•°æ®åº“ç±»åž‹ä¸æ”¯æŒåˆ™è¿”å›ž Noneã€‚
   |                           ^^
57 |
58 |         Example:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/connection_factory.py:87:19
   |
86 |         Returns:
87 |             æµ‹è¯•ç»“æžœå­—å…¸ï¼ŒåŒ…å« success å’Œ error/message å­—æ®µã€‚
   |                         ^^
88 |             æ ¼å¼ï¼š{'success': bool, 'error': str} æˆ– {'success': bool, 'message': str}
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/connection_adapters/connection_factory.py:88:15
   |
86 |         Returns:
87 |             æµ‹è¯•ç»“æžœå­—å…¸ï¼ŒåŒ…å« success å’Œ error/message å­—æ®µã€‚
88 |             æ ¼å¼ï¼š{'success': bool, 'error': str} æˆ– {'success': bool, 'message': str}
   |                 ^^
89 |
90 |         Example:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/connection_adapters/connection_factory.py:106:23
    |
105 |         Returns:
106 |             æ”¯æŒçš„æ•°æ®åº“ç±»åž‹åˆ—è¡¨ï¼Œå¦‚ ['mysql', 'postgresql', 'oracle', 'sqlserver']ã€‚
    |                                 ^^
107 |
108 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/connection_adapters/connection_factory.py:119:30
    |
118 |         Returns:
119 |             å¦‚æžœæ”¯æŒè¯¥æ•°æ®åº“ç±»åž‹è¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚
    |                                          ^^
120 |
121 |         Example:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/connection_test_service.py:16:19
   |
14 |     """æ•°æ®åº“è¿žæŽ¥æµ‹è¯•æœåŠ¡ã€‚.
15 |
16 |     è´Ÿè´£æµ‹è¯•æ•°æ®åº“å®žä¾‹çš„è¿žæŽ¥çŠ¶æ€ï¼ŒèŽ·å–ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¹¶æ›´æ–°å®žä¾‹çš„è¿žæŽ¥æ—¶é—´ã€‚
   |                                 ^^
17 |
18 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/connection_test_service.py:16:26
   |
14 |     """æ•°æ®åº“è¿žæŽ¥æµ‹è¯•æœåŠ¡ã€‚.
15 |
16 |     è´Ÿè´£æµ‹è¯•æ•°æ®åº“å®žä¾‹çš„è¿žæŽ¥çŠ¶æ€ï¼ŒèŽ·å–ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¹¶æ›´æ–°å®žä¾‹çš„è¿žæŽ¥æ—¶é—´ã€‚
   |                                               ^^
17 |
18 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/connection_test_service.py:36:16
   |
34 |         """æµ‹è¯•æ•°æ®åº“è¿žæŽ¥ã€‚.
35 |
36 |         åˆ›å»ºæ•°æ®åº“è¿žæŽ¥ï¼ŒèŽ·å–ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¹¶æ›´æ–°å®žä¾‹çš„è¿žæŽ¥çŠ¶æ€ã€‚
   |                       ^^
37 |
38 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/connection_test_service.py:36:23
   |
34 |         """æµ‹è¯•æ•°æ®åº“è¿žæŽ¥ã€‚.
35 |
36 |         åˆ›å»ºæ•°æ®åº“è¿žæŽ¥ï¼ŒèŽ·å–ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¹¶æ›´æ–°å®žä¾‹çš„è¿žæŽ¥çŠ¶æ€ã€‚
   |                                     ^^
37 |
38 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/connection_test_service.py:42:19
   |
41 |         Returns:
42 |             æµ‹è¯•ç»“æžœå­—å…¸ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
   |                         ^^
43 |             - success: è¿žæŽ¥æ˜¯å¦æˆåŠŸ
44 |             - message/error: æˆåŠŸæ¶ˆæ¯æˆ–é”™è¯¯ä¿¡æ¯
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/connection_adapters/connection_test_service.py:42:26
   |
41 |         Returns:
42 |             æµ‹è¯•ç»“æžœå­—å…¸ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
   |                                       ^^
43 |             - success: è¿žæŽ¥æ˜¯å¦æˆåŠŸ
44 |             - message/error: æˆåŠŸæ¶ˆæ¯æˆ–é”™è¯¯ä¿¡æ¯
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/connection_adapters/connection_test_service.py:45:33
   |
43 |             - success: è¿žæŽ¥æ˜¯å¦æˆåŠŸ
44 |             - message/error: æˆåŠŸæ¶ˆæ¯æˆ–é”™è¯¯ä¿¡æ¯
45 |             - version: æ ¼å¼åŒ–çš„ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆæˆåŠŸæ—¶ï¼‰
   |                                          ^^
46 |             - database_version: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆæˆåŠŸæ—¶ï¼‰
47 |             - main_version: ä¸»ç‰ˆæœ¬å·ï¼ˆæˆåŠŸæ—¶ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/connection_adapters/connection_test_service.py:45:37
   |
43 |             - success: è¿žæŽ¥æ˜¯å¦æˆåŠŸ
44 |             - message/error: æˆåŠŸæ¶ˆæ¯æˆ–é”™è¯¯ä¿¡æ¯
45 |             - version: æ ¼å¼åŒ–çš„ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆæˆåŠŸæ—¶ï¼‰
   |                                                  ^^
46 |             - database_version: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆæˆåŠŸæ—¶ï¼‰
47 |             - main_version: ä¸»ç‰ˆæœ¬å·ï¼ˆæˆåŠŸæ—¶ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/connection_adapters/connection_test_service.py:46:40
   |
44 |             - message/error: æˆåŠŸæ¶ˆæ¯æˆ–é”™è¯¯ä¿¡æ¯
45 |             - version: æ ¼å¼åŒ–çš„ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆæˆåŠŸæ—¶ï¼‰
46 |             - database_version: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆæˆåŠŸæ—¶ï¼‰
   |                                               ^^
47 |             - main_version: ä¸»ç‰ˆæœ¬å·ï¼ˆæˆåŠŸæ—¶ï¼‰
48 |             - detailed_version: è¯¦ç»†ç‰ˆæœ¬å·ï¼ˆæˆåŠŸæ—¶ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/connection_adapters/connection_test_service.py:46:44
   |
44 |             - message/error: æˆåŠŸæ¶ˆæ¯æˆ–é”™è¯¯ä¿¡æ¯
45 |             - version: æ ¼å¼åŒ–çš„ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆæˆåŠŸæ—¶ï¼‰
46 |             - database_version: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆæˆåŠŸæ—¶ï¼‰
   |                                                       ^^
47 |             - main_version: ä¸»ç‰ˆæœ¬å·ï¼ˆæˆåŠŸæ—¶ï¼‰
48 |             - detailed_version: è¯¦ç»†ç‰ˆæœ¬å·ï¼ˆæˆåŠŸæ—¶ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/connection_adapters/connection_test_service.py:47:33
   |
45 |             - version: æ ¼å¼åŒ–çš„ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆæˆåŠŸæ—¶ï¼‰
46 |             - database_version: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆæˆåŠŸæ—¶ï¼‰
47 |             - main_version: ä¸»ç‰ˆæœ¬å·ï¼ˆæˆåŠŸæ—¶ï¼‰
   |                                     ^^
48 |             - detailed_version: è¯¦ç»†ç‰ˆæœ¬å·ï¼ˆæˆåŠŸæ—¶ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/connection_adapters/connection_test_service.py:47:37
   |
45 |             - version: æ ¼å¼åŒ–çš„ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆæˆåŠŸæ—¶ï¼‰
46 |             - database_version: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆæˆåŠŸæ—¶ï¼‰
47 |             - main_version: ä¸»ç‰ˆæœ¬å·ï¼ˆæˆåŠŸæ—¶ï¼‰
   |                                             ^^
48 |             - detailed_version: è¯¦ç»†ç‰ˆæœ¬å·ï¼ˆæˆåŠŸæ—¶ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/connection_adapters/connection_test_service.py:48:38
   |
46 |             - database_version: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆæˆåŠŸæ—¶ï¼‰
47 |             - main_version: ä¸»ç‰ˆæœ¬å·ï¼ˆæˆåŠŸæ—¶ï¼‰
48 |             - detailed_version: è¯¦ç»†ç‰ˆæœ¬å·ï¼ˆæˆåŠŸæ—¶ï¼‰
   |                                           ^^
49 |
50 |         Example:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/connection_adapters/connection_test_service.py:48:42
   |
46 |             - database_version: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆæˆåŠŸæ—¶ï¼‰
47 |             - main_version: ä¸»ç‰ˆæœ¬å·ï¼ˆæˆåŠŸæ—¶ï¼‰
48 |             - detailed_version: è¯¦ç»†ç‰ˆæœ¬å·ï¼ˆæˆåŠŸæ—¶ï¼‰
   |                                                   ^^
49 |
50 |         Example:
   |

TRY300 Consider moving this statement to an `else` block
  --> app/services/connection_adapters/connection_test_service.py:80:13
   |
78 |               db.session.commit()
79 |
80 | /             return {
81 | |                 "success": True,
82 | |                 "message": f"è¿žæŽ¥æˆåŠŸï¼Œæ•°æ®åº“ç‰ˆæœ¬: {formatted_version}",
83 | |                 "version": formatted_version,
84 | |                 "database_version": instance.database_version,
85 | |                 "main_version": instance.main_version,
86 | |                 "detailed_version": instance.detailed_version,
87 | |             }
   | |_____________^
88 |
89 |           except Exception as e:
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/connection_test_service.py:82:34
   |
80 |             return {
81 |                 "success": True,
82 |                 "message": f"è¿žæŽ¥æˆåŠŸï¼Œæ•°æ®åº“ç‰ˆæœ¬: {formatted_version}",
   |                                      ^^
83 |                 "version": formatted_version,
84 |                 "database_version": instance.database_version,
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/connection_adapters/connection_test_service.py:90:21
   |
89 |         except Exception as e:
90 |             # å³ä½¿è¿žæŽ¥å¤±è´¥ï¼Œä¹Ÿè®°å½•å°è¯•æ—¶é—´
   |                           ^^
91 |             self._update_last_connected(instance)
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/connection_adapters/connection_test_service.py:107:33
    |
105 |             if is_suspicious:
106 |                 self.test_logger.warning(
107 |                     "æ£€æµ‹åˆ°å¯ç–‘çš„æ•°æ®åº“é”™è¯¯ï¼Œå¯èƒ½å­˜åœ¨å®‰å…¨å¨èƒ",
    |                                            ^^
108 |                     module="connection_test",
109 |                     instance_id=instance.id,
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/connection_adapters/connection_test_service.py:134:24
    |
132 |                 try:
133 |                     connection_obj.disconnect()
134 |                 except Exception as close_error:
    |                        ^^^^^^^^^
135 |                     self.test_logger.warning(
136 |                         "å…³é—­æ•°æ®åº“è¿žæŽ¥æ—¶å‘ç”Ÿé”™è¯¯",
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/connection_adapters/connection_test_service.py:145:21
    |
143 |         """æ›´æ–°æœ€åŽè¿žæŽ¥æ—¶é—´ã€‚.
144 |
145 |         æ›´æ–°å®žä¾‹çš„æœ€åŽè¿žæŽ¥æ—¶é—´æˆ³ï¼Œä¸å½±å“å·²æœ‰çš„ç‰ˆæœ¬ä¿¡æ¯ã€‚
    |                                 ^^
146 |
147 |         Args:
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/connection_adapters/connection_test_service.py:166:34
    |
164 |             )
165 |
166 |     # `_get_database_version` å·²ç§»é™¤ï¼Œç‰ˆæœ¬æŸ¥è¯¢ç”±å„é€‚é…å™¨è‡ªè¡Œå®žçŽ°ã€‚
    |                                     ^^
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/database_sync/__init__.py:1:14
  |
1 | """å®¹é‡åŒæ­¥æœåŠ¡èšåˆå…¥å£ï¼Œæš´éœ²åè°ƒå™¨ä¸Žå·¥å…·ç±»ã€‚."""
  |                        ^^
2 |
3 | from .coordinator import CapacitySyncCoordinator
  |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/services/database_sync/adapters/__init__.py:5:5
  |
3 | æä¾›å„ç§æ•°æ®åº“ç±»åž‹çš„å®¹é‡åŒæ­¥é€‚é…å™¨å®žçŽ°ã€‚
4 |
5 | ä¸»è¦ç»„ä»¶ï¼š
  |         ^^
6 | - BaseCapacityAdapter: å®¹é‡åŒæ­¥é€‚é…å™¨åŸºç±»
7 | - MySQLCapacityAdapter: MySQL å®¹é‡åŒæ­¥é€‚é…å™¨
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/database_sync/adapters/base_adapter.py:1:13
  |
1 | """å®¹é‡é‡‡é›†é€‚é…å™¨åŸºç±»ï¼Œçº¦æŸ inventory ä¸Ž capacity çš„å®žçŽ°æŽ¥å£ã€‚."""
  |                      ^^
2 |
3 | from __future__ import annotations
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/base_adapter.py:16:17
   |
15 | class BaseCapacityAdapter:
16 |     """å®¹é‡åŒæ­¥é€‚é…å™¨åŸºç±»ï¼Œå®šä¹‰åº“å­˜ä¸Žå®¹é‡é‡‡é›†æŽ¥å£ã€‚.
   |                          ^^
17 |
18 |     æ‰€æœ‰æ•°æ®åº“ç±»åž‹çš„å®¹é‡é€‚é…å™¨éƒ½åº”ç»§æ‰¿æ­¤åŸºç±»å¹¶å®žçŽ°å…¶æŠ½è±¡æ–¹æ³•ã€‚
   |

D107 Missing docstring in `__init__`
  --> app/services/database_sync/adapters/base_adapter.py:30:9
   |
28 |     """
29 |
30 |     def __init__(self) -> None:
   |         ^^^^^^^^
31 |         self.logger = get_system_logger()
   |

ANN001 Missing type annotation for function argument `connection`
  --> app/services/database_sync/adapters/base_adapter.py:33:51
   |
31 |         self.logger = get_system_logger()
32 |
33 |     def fetch_inventory(self, instance: Instance, connection) -> list[dict]:
   |                                                   ^^^^^^^^^^
34 |         """åˆ—å‡ºå®žä¾‹å½“å‰çš„æ•°æ®åº“/è¡¨ç©ºé—´ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/base_adapter.py:41:20
   |
40 |         Returns:
41 |             æ•°æ®åº“æ¸…å•åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                           ^^
42 |             - database_name: æ•°æ®åº“åç§°
43 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/database_sync/adapters/base_adapter.py:41:27
   |
40 |         Returns:
41 |             æ•°æ®åº“æ¸…å•åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                                         ^^
42 |             - database_name: æ•°æ®åº“åç§°
43 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“
   |

ANN001 Missing type annotation for function argument `connection`
  --> app/services/database_sync/adapters/base_adapter.py:54:9
   |
52 |         self,
53 |         instance: Instance,
54 |         connection,
   |         ^^^^^^^^^^
55 |         target_databases: Sequence[str] | None = None,
56 |     ) -> list[dict]:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/base_adapter.py:62:38
   |
60 |             instance: å®žä¾‹å¯¹è±¡ã€‚
61 |             connection: æ•°æ®åº“è¿žæŽ¥å¯¹è±¡ã€‚
62 |             target_databases: ç›®æ ‡æ•°æ®åº“åˆ—è¡¨ï¼Œå¯é€‰ã€‚å¦‚æžœä¸º None åˆ™é‡‡é›†æ‰€æœ‰æ•°æ®åº“ã€‚
   |                                             ^^
63 |
64 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/base_adapter.py:65:19
   |
64 |         Returns:
65 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                         ^^
66 |             - database_name: æ•°æ®åº“åç§°
67 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/database_sync/adapters/base_adapter.py:65:26
   |
64 |         Returns:
65 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                                       ^^
66 |             - database_name: æ•°æ®åº“åç§°
67 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/base_adapter.py:67:27
   |
65 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
66 |             - database_name: æ•°æ®åº“åç§°
67 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
   |                              ^^
68 |             - data_size_mb: æ•°æ®å¤§å°ï¼ˆMBï¼‰
69 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆMBï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/base_adapter.py:67:30
   |
65 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
66 |             - database_name: æ•°æ®åº“åç§°
67 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
   |                                  ^^
68 |             - data_size_mb: æ•°æ®å¤§å°ï¼ˆMBï¼‰
69 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆMBï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/base_adapter.py:68:33
   |
66 |             - database_name: æ•°æ®åº“åç§°
67 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
68 |             - data_size_mb: æ•°æ®å¤§å°ï¼ˆMBï¼‰
   |                                     ^^
69 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆMBï¼‰
70 |             - collected_date: é‡‡é›†æ—¥æœŸ
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/base_adapter.py:68:36
   |
66 |             - database_name: æ•°æ®åº“åç§°
67 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
68 |             - data_size_mb: æ•°æ®å¤§å°ï¼ˆMBï¼‰
   |                                         ^^
69 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆMBï¼‰
70 |             - collected_date: é‡‡é›†æ—¥æœŸ
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/base_adapter.py:69:32
   |
67 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
68 |             - data_size_mb: æ•°æ®å¤§å°ï¼ˆMBï¼‰
69 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆMBï¼‰
   |                                    ^^
70 |             - collected_date: é‡‡é›†æ—¥æœŸ
71 |             - collected_at: é‡‡é›†æ—¶é—´
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/base_adapter.py:69:35
   |
67 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
68 |             - data_size_mb: æ•°æ®å¤§å°ï¼ˆMBï¼‰
69 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆMBï¼‰
   |                                        ^^
70 |             - collected_date: é‡‡é›†æ—¥æœŸ
71 |             - collected_at: é‡‡é›†æ—¶é—´
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/base_adapter.py:85:38
   |
84 |         Args:
85 |             target_databases: ç›®æ ‡æ•°æ®åº“åˆ—è¡¨ï¼Œå¯é€‰ã€‚
   |                                             ^^
86 |
87 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/base_adapter.py:88:25
   |
87 |         Returns:
88 |             è§„èŒƒåŒ–åŽçš„æ•°æ®åº“åç§°é›†åˆï¼Œå¦‚æžœè¾“å…¥ä¸º None åˆ™è¿”å›ž Noneã€‚
   |                                     ^^
89 |             ç©ºåˆ—è¡¨ä¼šè¢«è½¬æ¢ä¸ºç©ºé›†åˆã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/factory.py:30:23
   |
29 |     Args:
30 |         db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysqlã€postgresqlã€sqlserverã€oracleï¼‰ã€‚
   |                            ^^
31 |
32 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/factory.py:30:57
   |
29 |     Args:
30 |         db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysqlã€postgresqlã€sqlserverã€oracleï¼‰ã€‚
   |                                                                  ^^
31 |
32 |     Returns:
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/services/database_sync/adapters/mysql_adapter.py:32:25
   |
30 |     """
31 |
32 |     _SYSTEM_DATABASES = {"information_schema", "performance_schema", "mysql", "sys"}
   |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
33 |
34 |     def fetch_inventory(self, instance, connection) -> list[dict]:
   |

ANN001 Missing type annotation for function argument `instance`
  --> app/services/database_sync/adapters/mysql_adapter.py:34:31
   |
32 |     _SYSTEM_DATABASES = {"information_schema", "performance_schema", "mysql", "sys"}
33 |
34 |     def fetch_inventory(self, instance, connection) -> list[dict]:
   |                               ^^^^^^^^
35 |         """åˆ—å‡º MySQL å®žä¾‹å½“å‰çš„æ•°æ®åº“æ¸…å•ã€‚.
   |

ANN001 Missing type annotation for function argument `connection`
  --> app/services/database_sync/adapters/mysql_adapter.py:34:41
   |
32 |     _SYSTEM_DATABASES = {"information_schema", "performance_schema", "mysql", "sys"}
33 |
34 |     def fetch_inventory(self, instance, connection) -> list[dict]:
   |                                         ^^^^^^^^^^
35 |         """åˆ—å‡º MySQL å®žä¾‹å½“å‰çš„æ•°æ®åº“æ¸…å•ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/mysql_adapter.py:42:20
   |
41 |         Returns:
42 |             æ•°æ®åº“æ¸…å•åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                           ^^
43 |             - database_name: æ•°æ®åº“åç§°
44 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/database_sync/adapters/mysql_adapter.py:42:27
   |
41 |         Returns:
42 |             æ•°æ®åº“æ¸…å•åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                                         ^^
43 |             - database_name: æ•°æ®åº“åç§°
44 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“
   |

ANN001 Missing type annotation for function argument `instance`
  --> app/services/database_sync/adapters/mysql_adapter.py:78:9
   |
76 |     def fetch_capacity(
77 |         self,
78 |         instance,
   |         ^^^^^^^^
79 |         connection,
80 |         target_databases: Sequence[str] | None = None,
   |

ANN001 Missing type annotation for function argument `connection`
  --> app/services/database_sync/adapters/mysql_adapter.py:79:9
   |
77 |         self,
78 |         instance,
79 |         connection,
   |         ^^^^^^^^^^
80 |         target_databases: Sequence[str] | None = None,
81 |     ) -> list[dict]:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/mysql_adapter.py:87:40
   |
85 |             instance: å®žä¾‹å¯¹è±¡ã€‚
86 |             connection: MySQL è¿žæŽ¥å¯¹è±¡ã€‚
87 |             target_databases: ç›®æ ‡æ•°æ®åº“åç§°åˆ—è¡¨ï¼Œä¸ºç©ºåˆ™é‡‡é›†å…¨éƒ¨ã€‚
   |                                                 ^^
88 |
89 |         Returns:
   |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/database_sync/adapters/mysql_adapter.py:107:25
    |
105 |             tablespace_stats = self._collect_tablespace_sizes(connection, instance)
106 |         except Exception as exc:  # pragma: no cover - defensive logging
107 |             self.logger.error(
    |                         ^^^^^
108 |                 "mysql_tablespace_collection_failed",
109 |                 instance=instance.name,
    |

ANN001 Missing type annotation for function argument `connection`
   --> app/services/database_sync/adapters/mysql_adapter.py:132:34
    |
130 |         return data
131 |
132 |     def _assert_permission(self, connection, instance) -> None:
    |                                  ^^^^^^^^^^
133 |         """éªŒè¯ MySQL æƒé™ã€‚.
    |

ANN001 Missing type annotation for function argument `instance`
   --> app/services/database_sync/adapters/mysql_adapter.py:132:46
    |
130 |         return data
131 |
132 |     def _assert_permission(self, connection, instance) -> None:
    |                                              ^^^^^^^^
133 |         """éªŒè¯ MySQL æƒé™ã€‚.
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/database_sync/adapters/mysql_adapter.py:151:38
    |
149 |         result = connection.execute_query(test_query)
150 |         if not result:
151 |             error_msg = "MySQL æƒé™æµ‹è¯•å¤±è´¥ï¼šæ— æ³•è®¿é—® information_schema.SCHEMATA"
    |                                            ^^
152 |             self.logger.error(
153 |                 "mysql_permission_check_failed",
    |

C901 `_collect_tablespace_sizes` is too complex (15 > 10)
   --> app/services/database_sync/adapters/mysql_adapter.py:164:9
    |
162 |         )
163 |
164 |     def _collect_tablespace_sizes(self, connection, instance) -> dict[str, int]:
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^
165 |         """é‡‡é›† MySQL è¡¨ç©ºé—´å¤§å°ã€‚.
    |

PLR0912 Too many branches (15 > 12)
   --> app/services/database_sync/adapters/mysql_adapter.py:164:9
    |
162 |         )
163 |
164 |     def _collect_tablespace_sizes(self, connection, instance) -> dict[str, int]:
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^
165 |         """é‡‡é›† MySQL è¡¨ç©ºé—´å¤§å°ã€‚.
    |

ANN001 Missing type annotation for function argument `connection`
   --> app/services/database_sync/adapters/mysql_adapter.py:164:41
    |
162 |         )
163 |
164 |     def _collect_tablespace_sizes(self, connection, instance) -> dict[str, int]:
    |                                         ^^^^^^^^^^
165 |         """é‡‡é›† MySQL è¡¨ç©ºé—´å¤§å°ã€‚.
    |

ANN001 Missing type annotation for function argument `instance`
   --> app/services/database_sync/adapters/mysql_adapter.py:164:53
    |
162 |         )
163 |
164 |     def _collect_tablespace_sizes(self, connection, instance) -> dict[str, int]:
    |                                                     ^^^^^^^^
165 |         """é‡‡é›† MySQL è¡¨ç©ºé—´å¤§å°ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/adapters/mysql_adapter.py:167:65
    |
165 |         """é‡‡é›† MySQL è¡¨ç©ºé—´å¤§å°ã€‚.
166 |
167 |         ä»Ž INNODB_TABLESPACES æˆ– INNODB_SYS_TABLESPACES è§†å›¾ä¸­æŸ¥è¯¢è¡¨ç©ºé—´å¤§å°ï¼Œ
    |                                                                             ^^
168 |         å¹¶æŒ‰æ•°æ®åº“åç§°èšåˆã€‚
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/database_sync/adapters/mysql_adapter.py:218:20
    |
216 |                         view=label,
217 |                     )
218 |             except Exception as exc:
    |                    ^^^^^^^^^
219 |                 self.logger.warning(
220 |                     "mysql_tablespace_query_failed",
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/database_sync/adapters/mysql_adapter.py:238:16
    |
236 |                         continue
237 |                     aggregated.setdefault(db_name, 0)
238 |         except Exception as exc:
    |                ^^^^^^^^^
239 |             self.logger.warning(
240 |                 "mysql_show_databases_failed",
    |

ANN001 Missing type annotation for function argument `instance`
   --> app/services/database_sync/adapters/mysql_adapter.py:248:45
    |
246 |         return aggregated
247 |
248 |     def _build_stats_from_tablespaces(self, instance, stats: dict[str, int]) -> list[dict]:
    |                                             ^^^^^^^^
249 |         """å°†è¡¨ç©ºé—´ç»Ÿè®¡è½¬æ¢ä¸ºæ ‡å‡†å®¹é‡æ•°æ®ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/database_sync/adapters/mysql_adapter.py:298:39
    |
296 |         """å°† MySQL tablespace åç§°ä¸­çš„ @XXXX è½¬å›žæ­£å¸¸å­—ç¬¦ã€‚.
297 |
298 |         MySQL åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå°†ç‰¹æ®Šå­—ç¬¦ç¼–ç ä¸º @XXXX æ ¼å¼ï¼ˆåå…­è¿›åˆ¶ï¼‰ã€‚
    |                                                        ^^
299 |
300 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/database_sync/adapters/mysql_adapter.py:298:44
    |
296 |         """å°† MySQL tablespace åç§°ä¸­çš„ @XXXX è½¬å›žæ­£å¸¸å­—ç¬¦ã€‚.
297 |
298 |         MySQL åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå°†ç‰¹æ®Šå­—ç¬¦ç¼–ç ä¸º @XXXX æ ¼å¼ï¼ˆåå…­è¿›åˆ¶ï¼‰ã€‚
    |                                                                  ^^
299 |
300 |         Args:
    |

ANN001 Missing type annotation for function argument `instance`
   --> app/services/database_sync/adapters/mysql_adapter.py:323:41
    |
321 |         return re.sub(r"@([0-9A-Fa-f]{4})", _replace, raw_name)
322 |
323 |     def _build_tablespace_queries(self, instance) -> list[tuple[str, str]]:
    |                                         ^^^^^^^^
324 |         """æž„å»ºè¡¨ç©ºé—´æŸ¥è¯¢è¯­å¥åˆ—è¡¨ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/database_sync/adapters/mysql_adapter.py:326:27
    |
324 |         """æž„å»ºè¡¨ç©ºé—´æŸ¥è¯¢è¯­å¥åˆ—è¡¨ã€‚.
325 |
326 |         æ ¹æ® MySQL ç‰ˆæœ¬é€‰æ‹©åˆé€‚çš„è§†å›¾ï¼ˆMySQL 8.x ä¼˜å…ˆä½¿ç”¨ INNODB_TABLESPACESï¼Œ
    |                                      ^^
327 |         MySQL 5.x ä¼˜å…ˆä½¿ç”¨ INNODB_SYS_TABLESPACESï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/adapters/mysql_adapter.py:326:61
    |
324 |         """æž„å»ºè¡¨ç©ºé—´æŸ¥è¯¢è¯­å¥åˆ—è¡¨ã€‚.
325 |
326 |         æ ¹æ® MySQL ç‰ˆæœ¬é€‰æ‹©åˆé€‚çš„è§†å›¾ï¼ˆMySQL 8.x ä¼˜å…ˆä½¿ç”¨ INNODB_TABLESPACESï¼Œ
    |                                                                             ^^
327 |         MySQL 5.x ä¼˜å…ˆä½¿ç”¨ INNODB_SYS_TABLESPACESï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/database_sync/adapters/mysql_adapter.py:327:46
    |
326 |         æ ¹æ® MySQL ç‰ˆæœ¬é€‰æ‹©åˆé€‚çš„è§†å›¾ï¼ˆMySQL 8.x ä¼˜å…ˆä½¿ç”¨ INNODB_TABLESPACESï¼Œ
327 |         MySQL 5.x ä¼˜å…ˆä½¿ç”¨ INNODB_SYS_TABLESPACESï¼‰ã€‚
    |                                                  ^^
328 |
329 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/adapters/mysql_adapter.py:330:27
    |
329 |         Args:
330 |             instance: å®žä¾‹å¯¹è±¡ï¼ŒåŒ…å«ç‰ˆæœ¬ä¿¡æ¯ã€‚
    |                               ^^
331 |
332 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/adapters/mysql_adapter.py:333:17
    |
332 |         Returns:
333 |             æŸ¥è¯¢åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ ä¸º (è§†å›¾åç§°, SQL æŸ¥è¯¢è¯­å¥) å…ƒç»„ã€‚
    |                     ^^
334 |             æŒ‰ä¼˜å…ˆçº§æŽ’åºï¼Œä¼šä¾æ¬¡å°è¯•ç›´åˆ°æˆåŠŸã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/adapters/mysql_adapter.py:334:19
    |
332 |         Returns:
333 |             æŸ¥è¯¢åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ ä¸º (è§†å›¾åç§°, SQL æŸ¥è¯¢è¯­å¥) å…ƒç»„ã€‚
334 |             æŒ‰ä¼˜å…ˆçº§æŽ’åºï¼Œä¼šä¾æ¬¡å°è¯•ç›´åˆ°æˆåŠŸã€‚
    |                         ^^
335 |
336 |         """
    |

ANN001 Missing type annotation for function argument `instance`
  --> app/services/database_sync/adapters/oracle_adapter.py:27:31
   |
25 |     """
26 |
27 |     def fetch_inventory(self, instance, connection) -> list[dict]:
   |                               ^^^^^^^^
28 |         """åˆ—å‡º Oracle å®žä¾‹å½“å‰çš„è¡¨ç©ºé—´æ¸…å•ã€‚.
   |

ANN001 Missing type annotation for function argument `connection`
  --> app/services/database_sync/adapters/oracle_adapter.py:27:41
   |
25 |     """
26 |
27 |     def fetch_inventory(self, instance, connection) -> list[dict]:
   |                                         ^^^^^^^^^^
28 |         """åˆ—å‡º Oracle å®žä¾‹å½“å‰çš„è¡¨ç©ºé—´æ¸…å•ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/oracle_adapter.py:35:20
   |
34 |         Returns:
35 |             è¡¨ç©ºé—´æ¸…å•åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                           ^^
36 |             - database_name: è¡¨ç©ºé—´åç§°
37 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆOracle ä¸­ç»Ÿä¸€æ ‡è®°ä¸º Falseï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/database_sync/adapters/oracle_adapter.py:35:27
   |
34 |         Returns:
35 |             è¡¨ç©ºé—´æ¸…å•åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                                         ^^
36 |             - database_name: è¡¨ç©ºé—´åç§°
37 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆOracle ä¸­ç»Ÿä¸€æ ‡è®°ä¸º Falseï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/oracle_adapter.py:37:34
   |
35 |             è¡¨ç©ºé—´æ¸…å•åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
36 |             - database_name: è¡¨ç©ºé—´åç§°
37 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆOracle ä¸­ç»Ÿä¸€æ ‡è®°ä¸º Falseï¼‰
   |                                          ^^
38 |
39 |         Example:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/oracle_adapter.py:37:54
   |
35 |             è¡¨ç©ºé—´æ¸…å•åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
36 |             - database_name: è¡¨ç©ºé—´åç§°
37 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆOracle ä¸­ç»Ÿä¸€æ ‡è®°ä¸º Falseï¼‰
   |                                                                     ^^
38 |
39 |         Example:
   |

ANN001 Missing type annotation for function argument `instance`
  --> app/services/database_sync/adapters/oracle_adapter.py:71:9
   |
69 |     def fetch_capacity(
70 |         self,
71 |         instance,
   |         ^^^^^^^^
72 |         connection,
73 |         target_databases: Sequence[str] | None = None,
   |

ANN001 Missing type annotation for function argument `connection`
  --> app/services/database_sync/adapters/oracle_adapter.py:72:9
   |
70 |         self,
71 |         instance,
72 |         connection,
   |         ^^^^^^^^^^
73 |         target_databases: Sequence[str] | None = None,
74 |     ) -> list[dict]:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/oracle_adapter.py:77:36
   |
75 |         """é‡‡é›† Oracle è¡¨ç©ºé—´å®¹é‡æ•°æ®ã€‚.
76 |
77 |         ä»Ž dba_data_files è§†å›¾ä¸­æŸ¥è¯¢è¡¨ç©ºé—´å¤§å°ï¼Œå¹¶æŒ‰è¡¨ç©ºé—´åç§°èšåˆã€‚
   |                                               ^^
78 |
79 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/oracle_adapter.py:83:25
   |
81 |             connection: Oracle æ•°æ®åº“è¿žæŽ¥å¯¹è±¡ã€‚
82 |             target_databases: å¯é€‰çš„ç›®æ ‡è¡¨ç©ºé—´åç§°åˆ—è¡¨ã€‚
83 |                 å¦‚æžœä¸º Noneï¼Œé‡‡é›†æ‰€æœ‰è¡¨ç©ºé—´ï¼›
   |                            ^^
84 |                 å¦‚æžœä¸ºç©ºåˆ—è¡¨ï¼Œè·³è¿‡é‡‡é›†ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
  --> app/services/database_sync/adapters/oracle_adapter.py:83:33
   |
81 |             connection: Oracle æ•°æ®åº“è¿žæŽ¥å¯¹è±¡ã€‚
82 |             target_databases: å¯é€‰çš„ç›®æ ‡è¡¨ç©ºé—´åç§°åˆ—è¡¨ã€‚
83 |                 å¦‚æžœä¸º Noneï¼Œé‡‡é›†æ‰€æœ‰è¡¨ç©ºé—´ï¼›
   |                                            ^^
84 |                 å¦‚æžœä¸ºç©ºåˆ—è¡¨ï¼Œè·³è¿‡é‡‡é›†ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/oracle_adapter.py:84:23
   |
82 |             target_databases: å¯é€‰çš„ç›®æ ‡è¡¨ç©ºé—´åç§°åˆ—è¡¨ã€‚
83 |                 å¦‚æžœä¸º Noneï¼Œé‡‡é›†æ‰€æœ‰è¡¨ç©ºé—´ï¼›
84 |                 å¦‚æžœä¸ºç©ºåˆ—è¡¨ï¼Œè·³è¿‡é‡‡é›†ã€‚
   |                             ^^
85 |
86 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/oracle_adapter.py:87:19
   |
86 |         Returns:
87 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                         ^^
88 |             - database_name: è¡¨ç©ºé—´åç§°
89 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/database_sync/adapters/oracle_adapter.py:87:26
   |
86 |         Returns:
87 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                                       ^^
88 |             - database_name: è¡¨ç©ºé—´åç§°
89 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/oracle_adapter.py:89:27
   |
87 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
88 |             - database_name: è¡¨ç©ºé—´åç§°
89 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
   |                              ^^
90 |             - data_size_mb: æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆOracle ä¸­ä¸º Noneï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/oracle_adapter.py:89:30
   |
87 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
88 |             - database_name: è¡¨ç©ºé—´åç§°
89 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
   |                                  ^^
90 |             - data_size_mb: æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆOracle ä¸­ä¸º Noneï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/oracle_adapter.py:90:35
   |
88 |             - database_name: è¡¨ç©ºé—´åç§°
89 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
90 |             - data_size_mb: æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
   |                                         ^^
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆOracle ä¸­ä¸º Noneï¼‰
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/oracle_adapter.py:90:38
   |
88 |             - database_name: è¡¨ç©ºé—´åç§°
89 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
90 |             - data_size_mb: æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
   |                                             ^^
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆOracle ä¸­ä¸º Noneï¼‰
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/oracle_adapter.py:91:32
   |
89 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
90 |             - data_size_mb: æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆOracle ä¸­ä¸º Noneï¼‰
   |                                    ^^
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
93 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/oracle_adapter.py:91:47
   |
89 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
90 |             - data_size_mb: æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆOracle ä¸­ä¸º Noneï¼‰
   |                                                      ^^
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
93 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/oracle_adapter.py:92:35
   |
90 |             - data_size_mb: æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆOracle ä¸­ä¸º Noneï¼‰
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
   |                                       ^^
93 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
94 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆç»Ÿä¸€ä¸º Falseï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/oracle_adapter.py:92:40
   |
90 |             - data_size_mb: æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆOracle ä¸­ä¸º Noneï¼‰
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
   |                                                 ^^
93 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
94 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆç»Ÿä¸€ä¸º Falseï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/oracle_adapter.py:93:33
   |
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆOracle ä¸­ä¸º Noneï¼‰
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
93 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
   |                                     ^^
94 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆç»Ÿä¸€ä¸º Falseï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/oracle_adapter.py:93:37
   |
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆOracle ä¸­ä¸º Noneï¼‰
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
93 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
   |                                          ^^
94 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆç»Ÿä¸€ä¸º Falseï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/oracle_adapter.py:94:34
   |
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
93 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
94 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆç»Ÿä¸€ä¸º Falseï¼‰
   |                                          ^^
95 |
96 |         Raises:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/oracle_adapter.py:94:44
   |
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
93 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
94 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆç»Ÿä¸€ä¸º Falseï¼‰
   |                                                        ^^
95 |
96 |         Raises:
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/services/database_sync/adapters/postgresql_adapter.py:30:25
   |
28 |     """
29 |
30 |     _SYSTEM_DATABASES = {"postgres"}
   |                         ^^^^^^^^^^^^
31 |
32 |     def fetch_inventory(self, instance, connection) -> list[dict]:
   |

ANN001 Missing type annotation for function argument `instance`
  --> app/services/database_sync/adapters/postgresql_adapter.py:32:31
   |
30 |     _SYSTEM_DATABASES = {"postgres"}
31 |
32 |     def fetch_inventory(self, instance, connection) -> list[dict]:
   |                               ^^^^^^^^
33 |         """åˆ—å‡º PostgreSQL å®žä¾‹å½“å‰çš„æ•°æ®åº“æ¸…å•ã€‚.
   |

ANN001 Missing type annotation for function argument `connection`
  --> app/services/database_sync/adapters/postgresql_adapter.py:32:41
   |
30 |     _SYSTEM_DATABASES = {"postgres"}
31 |
32 |     def fetch_inventory(self, instance, connection) -> list[dict]:
   |                                         ^^^^^^^^^^
33 |         """åˆ—å‡º PostgreSQL å®žä¾‹å½“å‰çš„æ•°æ®åº“æ¸…å•ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/postgresql_adapter.py:40:20
   |
39 |         Returns:
40 |             æ•°æ®åº“æ¸…å•åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                           ^^
41 |             - database_name: æ•°æ®åº“åç§°
42 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“æˆ–æ¨¡æ¿æ•°æ®åº“
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/database_sync/adapters/postgresql_adapter.py:40:27
   |
39 |         Returns:
40 |             æ•°æ®åº“æ¸…å•åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                                         ^^
41 |             - database_name: æ•°æ®åº“åç§°
42 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“æˆ–æ¨¡æ¿æ•°æ®åº“
   |

ANN001 Missing type annotation for function argument `instance`
  --> app/services/database_sync/adapters/postgresql_adapter.py:77:9
   |
75 |     def fetch_capacity(
76 |         self,
77 |         instance,
   |         ^^^^^^^^
78 |         connection,
79 |         target_databases: Sequence[str] | None = None,
   |

ANN001 Missing type annotation for function argument `connection`
  --> app/services/database_sync/adapters/postgresql_adapter.py:78:9
   |
76 |         self,
77 |         instance,
78 |         connection,
   |         ^^^^^^^^^^
79 |         target_databases: Sequence[str] | None = None,
80 |     ) -> list[dict]:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/postgresql_adapter.py:89:25
   |
87 |             connection: PostgreSQL æ•°æ®åº“è¿žæŽ¥å¯¹è±¡ã€‚
88 |             target_databases: å¯é€‰çš„ç›®æ ‡æ•°æ®åº“åç§°åˆ—è¡¨ã€‚
89 |                 å¦‚æžœä¸º Noneï¼Œé‡‡é›†æ‰€æœ‰éžæ¨¡æ¿æ•°æ®åº“ï¼›
   |                            ^^
90 |                 å¦‚æžœä¸ºç©ºåˆ—è¡¨ï¼Œè·³è¿‡é‡‡é›†ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
  --> app/services/database_sync/adapters/postgresql_adapter.py:89:36
   |
87 |             connection: PostgreSQL æ•°æ®åº“è¿žæŽ¥å¯¹è±¡ã€‚
88 |             target_databases: å¯é€‰çš„ç›®æ ‡æ•°æ®åº“åç§°åˆ—è¡¨ã€‚
89 |                 å¦‚æžœä¸º Noneï¼Œé‡‡é›†æ‰€æœ‰éžæ¨¡æ¿æ•°æ®åº“ï¼›
   |                                                  ^^
90 |                 å¦‚æžœä¸ºç©ºåˆ—è¡¨ï¼Œè·³è¿‡é‡‡é›†ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/postgresql_adapter.py:90:23
   |
88 |             target_databases: å¯é€‰çš„ç›®æ ‡æ•°æ®åº“åç§°åˆ—è¡¨ã€‚
89 |                 å¦‚æžœä¸º Noneï¼Œé‡‡é›†æ‰€æœ‰éžæ¨¡æ¿æ•°æ®åº“ï¼›
90 |                 å¦‚æžœä¸ºç©ºåˆ—è¡¨ï¼Œè·³è¿‡é‡‡é›†ã€‚
   |                             ^^
91 |
92 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/postgresql_adapter.py:93:19
   |
92 |         Returns:
93 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                         ^^
94 |             - database_name: æ•°æ®åº“åç§°
95 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/database_sync/adapters/postgresql_adapter.py:93:26
   |
92 |         Returns:
93 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                                       ^^
94 |             - database_name: æ•°æ®åº“åç§°
95 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/postgresql_adapter.py:95:27
   |
93 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
94 |             - database_name: æ•°æ®åº“åç§°
95 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
   |                              ^^
96 |             - data_size_mb: æ•°æ®å¤§å°ï¼ˆMBï¼‰
97 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆPostgreSQL ä¸­ä¸º Noneï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/postgresql_adapter.py:95:30
   |
93 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
94 |             - database_name: æ•°æ®åº“åç§°
95 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
   |                                  ^^
96 |             - data_size_mb: æ•°æ®å¤§å°ï¼ˆMBï¼‰
97 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆPostgreSQL ä¸­ä¸º Noneï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/postgresql_adapter.py:96:33
   |
94 |             - database_name: æ•°æ®åº“åç§°
95 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
96 |             - data_size_mb: æ•°æ®å¤§å°ï¼ˆMBï¼‰
   |                                     ^^
97 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆPostgreSQL ä¸­ä¸º Noneï¼‰
98 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/postgresql_adapter.py:96:36
   |
94 |             - database_name: æ•°æ®åº“åç§°
95 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
96 |             - data_size_mb: æ•°æ®å¤§å°ï¼ˆMBï¼‰
   |                                         ^^
97 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆPostgreSQL ä¸­ä¸º Noneï¼‰
98 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/postgresql_adapter.py:97:32
   |
95 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
96 |             - data_size_mb: æ•°æ®å¤§å°ï¼ˆMBï¼‰
97 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆPostgreSQL ä¸­ä¸º Noneï¼‰
   |                                    ^^
98 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
99 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/postgresql_adapter.py:97:51
   |
95 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼‰
96 |             - data_size_mb: æ•°æ®å¤§å°ï¼ˆMBï¼‰
97 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆPostgreSQL ä¸­ä¸º Noneï¼‰
   |                                                          ^^
98 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
99 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/database_sync/adapters/postgresql_adapter.py:98:35
    |
 96 |             - data_size_mb: æ•°æ®å¤§å°ï¼ˆMBï¼‰
 97 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆPostgreSQL ä¸­ä¸º Noneï¼‰
 98 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
    |                                       ^^
 99 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
100 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/database_sync/adapters/postgresql_adapter.py:98:40
    |
 96 |             - data_size_mb: æ•°æ®å¤§å°ï¼ˆMBï¼‰
 97 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆPostgreSQL ä¸­ä¸º Noneï¼‰
 98 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
    |                                                 ^^
 99 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
100 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/database_sync/adapters/postgresql_adapter.py:99:33
    |
 97 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆPostgreSQL ä¸­ä¸º Noneï¼‰
 98 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
 99 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
    |                                     ^^
100 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/database_sync/adapters/postgresql_adapter.py:99:37
    |
 97 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆPostgreSQL ä¸­ä¸º Noneï¼‰
 98 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
 99 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
    |                                          ^^
100 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“
    |

ANN001 Missing type annotation for function argument `instance`
  --> app/services/database_sync/adapters/sqlserver_adapter.py:27:31
   |
25 |     """
26 |
27 |     def fetch_inventory(self, instance, connection) -> list[dict]:
   |                               ^^^^^^^^
28 |         """åˆ—å‡º SQL Server å®žä¾‹å½“å‰çš„æ•°æ®åº“æ¸…å•ã€‚.
   |

ANN001 Missing type annotation for function argument `connection`
  --> app/services/database_sync/adapters/sqlserver_adapter.py:27:41
   |
25 |     """
26 |
27 |     def fetch_inventory(self, instance, connection) -> list[dict]:
   |                                         ^^^^^^^^^^
28 |         """åˆ—å‡º SQL Server å®žä¾‹å½“å‰çš„æ•°æ®åº“æ¸…å•ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:35:20
   |
34 |         Returns:
35 |             æ•°æ®åº“æ¸…å•åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                           ^^
36 |             - database_name: æ•°æ®åº“åç§°
37 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“ï¼ˆdatabase_id <= 4ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:35:27
   |
34 |         Returns:
35 |             æ•°æ®åº“æ¸…å•åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                                         ^^
36 |             - database_name: æ•°æ®åº“åç§°
37 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“ï¼ˆdatabase_id <= 4ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:37:34
   |
35 |             æ•°æ®åº“æ¸…å•åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
36 |             - database_name: æ•°æ®åº“åç§°
37 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“ï¼ˆdatabase_id <= 4ï¼‰
   |                                          ^^
38 |
39 |         Example:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:37:51
   |
35 |             æ•°æ®åº“æ¸…å•åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
36 |             - database_name: æ•°æ®åº“åç§°
37 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“ï¼ˆdatabase_id <= 4ï¼‰
   |                                                            ^^
38 |
39 |         Example:
   |

ANN001 Missing type annotation for function argument `instance`
  --> app/services/database_sync/adapters/sqlserver_adapter.py:71:9
   |
69 |     def fetch_capacity(
70 |         self,
71 |         instance,
   |         ^^^^^^^^
72 |         connection,
73 |         target_databases: Sequence[str] | None = None,
   |

ANN001 Missing type annotation for function argument `connection`
  --> app/services/database_sync/adapters/sqlserver_adapter.py:72:9
   |
70 |         self,
71 |         instance,
72 |         connection,
   |         ^^^^^^^^^^
73 |         target_databases: Sequence[str] | None = None,
74 |     ) -> list[dict]:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:77:39
   |
75 |         """é‡‡é›† SQL Server æ•°æ®åº“å®¹é‡æ•°æ®ã€‚.
76 |
77 |         ä»Ž sys.master_files è§†å›¾ä¸­æŸ¥è¯¢æ•°æ®æ–‡ä»¶å¤§å°ï¼Œå¹¶æŒ‰æ•°æ®åº“åç§°èšåˆã€‚
   |                                                   ^^
78 |
79 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:83:25
   |
81 |             connection: SQL Server æ•°æ®åº“è¿žæŽ¥å¯¹è±¡ã€‚
82 |             target_databases: å¯é€‰çš„ç›®æ ‡æ•°æ®åº“åç§°åˆ—è¡¨ã€‚
83 |                 å¦‚æžœä¸º Noneï¼Œé‡‡é›†æ‰€æœ‰æ•°æ®åº“ï¼›
   |                            ^^
84 |                 å¦‚æžœä¸ºç©ºåˆ—è¡¨ï¼Œè·³è¿‡é‡‡é›†ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:83:33
   |
81 |             connection: SQL Server æ•°æ®åº“è¿žæŽ¥å¯¹è±¡ã€‚
82 |             target_databases: å¯é€‰çš„ç›®æ ‡æ•°æ®åº“åç§°åˆ—è¡¨ã€‚
83 |                 å¦‚æžœä¸º Noneï¼Œé‡‡é›†æ‰€æœ‰æ•°æ®åº“ï¼›
   |                                            ^^
84 |                 å¦‚æžœä¸ºç©ºåˆ—è¡¨ï¼Œè·³è¿‡é‡‡é›†ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:84:23
   |
82 |             target_databases: å¯é€‰çš„ç›®æ ‡æ•°æ®åº“åç§°åˆ—è¡¨ã€‚
83 |                 å¦‚æžœä¸º Noneï¼Œé‡‡é›†æ‰€æœ‰æ•°æ®åº“ï¼›
84 |                 å¦‚æžœä¸ºç©ºåˆ—è¡¨ï¼Œè·³è¿‡é‡‡é›†ã€‚
   |                             ^^
85 |
86 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:87:19
   |
86 |         Returns:
87 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                         ^^
88 |             - database_name: æ•°æ®åº“åç§°
89 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼Œä»…åŒ…å«æ•°æ®æ–‡ä»¶ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:87:26
   |
86 |         Returns:
87 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
   |                                       ^^
88 |             - database_name: æ•°æ®åº“åç§°
89 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼Œä»…åŒ…å«æ•°æ®æ–‡ä»¶ï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:89:27
   |
87 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
88 |             - database_name: æ•°æ®åº“åç§°
89 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼Œä»…åŒ…å«æ•°æ®æ–‡ä»¶ï¼‰
   |                              ^^
90 |             - data_size_mb: æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆSQL Server ä¸­ä¸º Noneï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:89:30
   |
87 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
88 |             - database_name: æ•°æ®åº“åç§°
89 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼Œä»…åŒ…å«æ•°æ®æ–‡ä»¶ï¼‰
   |                                  ^^
90 |             - data_size_mb: æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆSQL Server ä¸­ä¸º Noneï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:89:38
   |
87 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
88 |             - database_name: æ•°æ®åº“åç§°
89 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼Œä»…åŒ…å«æ•°æ®æ–‡ä»¶ï¼‰
   |                                                  ^^
90 |             - data_size_mb: æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆSQL Server ä¸­ä¸º Noneï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:90:35
   |
88 |             - database_name: æ•°æ®åº“åç§°
89 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼Œä»…åŒ…å«æ•°æ®æ–‡ä»¶ï¼‰
90 |             - data_size_mb: æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
   |                                         ^^
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆSQL Server ä¸­ä¸º Noneï¼‰
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:90:38
   |
88 |             - database_name: æ•°æ®åº“åç§°
89 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼Œä»…åŒ…å«æ•°æ®æ–‡ä»¶ï¼‰
90 |             - data_size_mb: æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
   |                                             ^^
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆSQL Server ä¸­ä¸º Noneï¼‰
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:91:32
   |
89 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼Œä»…åŒ…å«æ•°æ®æ–‡ä»¶ï¼‰
90 |             - data_size_mb: æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆSQL Server ä¸­ä¸º Noneï¼‰
   |                                    ^^
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
93 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:91:51
   |
89 |             - size_mb: æ€»å¤§å°ï¼ˆMBï¼Œä»…åŒ…å«æ•°æ®æ–‡ä»¶ï¼‰
90 |             - data_size_mb: æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆSQL Server ä¸­ä¸º Noneï¼‰
   |                                                          ^^
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
93 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:92:35
   |
90 |             - data_size_mb: æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆSQL Server ä¸­ä¸º Noneï¼‰
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
   |                                       ^^
93 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
94 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“ï¼ˆç»Ÿä¸€ä¸º Falseï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:92:40
   |
90 |             - data_size_mb: æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆSQL Server ä¸­ä¸º Noneï¼‰
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
   |                                                 ^^
93 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
94 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“ï¼ˆç»Ÿä¸€ä¸º Falseï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:93:33
   |
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆSQL Server ä¸­ä¸º Noneï¼‰
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
93 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
   |                                     ^^
94 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“ï¼ˆç»Ÿä¸€ä¸º Falseï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:93:37
   |
91 |             - log_size_mb: æ—¥å¿—å¤§å°ï¼ˆSQL Server ä¸­ä¸º Noneï¼‰
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
93 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
   |                                          ^^
94 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“ï¼ˆç»Ÿä¸€ä¸º Falseï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:94:34
   |
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
93 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
94 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“ï¼ˆç»Ÿä¸€ä¸º Falseï¼‰
   |                                          ^^
95 |
96 |         Raises:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/adapters/sqlserver_adapter.py:94:44
   |
92 |             - collected_date: é‡‡é›†æ—¥æœŸï¼ˆä¸­å›½æ—¶åŒºï¼‰
93 |             - collected_at: é‡‡é›†æ—¶é—´ï¼ˆUTCï¼‰
94 |             - is_system: æ˜¯å¦ä¸ºç³»ç»Ÿæ•°æ®åº“ï¼ˆç»Ÿä¸€ä¸º Falseï¼‰
   |                                                        ^^
95 |
96 |         Raises:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/database_sync/coordinator.py:1:11
  |
1 | """å®¹é‡åŒæ­¥åè°ƒå™¨ï¼Œå®žçŽ°è¿žæŽ¥ã€åº“å­˜åŒæ­¥ä¸Žå®¹é‡é‡‡é›†æ•´ä½“æµç¨‹ã€‚."""
  |                  ^^
2 |
3 | from __future__ import annotations
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/coordinator.py:22:15
   |
21 | class CapacitySyncCoordinator:
22 |     """å®¹é‡åŒæ­¥åè°ƒå™¨ï¼Œè´Ÿè´£ç»„ç»‡åº“å­˜åŒæ­¥ä¸Žå®¹é‡é‡‡é›†æµç¨‹ã€‚.
   |                      ^^
23 |
24 |     åè°ƒæ•°æ®åº“å®¹é‡åŒæ­¥çš„å®Œæ•´æµç¨‹ï¼ŒåŒ…æ‹¬ï¼š
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/coordinator.py:24:19
   |
22 |     """å®¹é‡åŒæ­¥åè°ƒå™¨ï¼Œè´Ÿè´£ç»„ç»‡åº“å­˜åŒæ­¥ä¸Žå®¹é‡é‡‡é›†æµç¨‹ã€‚.
23 |
24 |     åè°ƒæ•°æ®åº“å®¹é‡åŒæ­¥çš„å®Œæ•´æµç¨‹ï¼ŒåŒ…æ‹¬ï¼š
   |                                 ^^
25 |     - å»ºç«‹æ•°æ®åº“è¿žæŽ¥
26 |     - åŒæ­¥æ•°æ®åº“æ¸…å•
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/database_sync/coordinator.py:24:22
   |
22 |     """å®¹é‡åŒæ­¥åè°ƒå™¨ï¼Œè´Ÿè´£ç»„ç»‡åº“å­˜åŒæ­¥ä¸Žå®¹é‡é‡‡é›†æµç¨‹ã€‚.
23 |
24 |     åè°ƒæ•°æ®åº“å®¹é‡åŒæ­¥çš„å®Œæ•´æµç¨‹ï¼ŒåŒ…æ‹¬ï¼š
   |                                       ^^
25 |     - å»ºç«‹æ•°æ®åº“è¿žæŽ¥
26 |     - åŒæ­¥æ•°æ®åº“æ¸…å•
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/coordinator.py:73:19
   |
71 |         """å»ºç«‹æ•°æ®åº“è¿žæŽ¥ã€‚.
72 |
73 |         å¦‚æžœè¿žæŽ¥å·²å­˜åœ¨ä¸”æœ‰æ•ˆï¼Œåˆ™å¤ç”¨çŽ°æœ‰è¿žæŽ¥ã€‚
   |                             ^^
74 |
75 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/coordinator.py:76:24
   |
75 |         Returns:
76 |             è¿žæŽ¥æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
   |                              ^^
77 |
78 |         """
   |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/database_sync/coordinator.py:105:25
    |
103 |                 return True
104 |         except Exception as exc:
105 |             self.logger.error(
    |                         ^^^^^
106 |                 "capacity_sync_connection_error",
107 |                 instance=self.instance.name,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/coordinator.py:121:19
    |
119 |         """æ–­å¼€æ•°æ®åº“è¿žæŽ¥ã€‚.
120 |
121 |         å®‰å…¨åœ°å…³é—­æ•°æ®åº“è¿žæŽ¥ï¼Œå³ä½¿å‘ç”Ÿå¼‚å¸¸ä¹Ÿä¼šæ¸…ç†è¿žæŽ¥å¯¹è±¡ã€‚
    |                             ^^
122 |
123 |         Returns:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/database_sync/coordinator.py:130:20
    |
128 |             try:
129 |                 self._connection.disconnect()
130 |             except Exception as exc:
    |                    ^^^^^^^^^
131 |                 self.logger.warning(
132 |                     "capacity_sync_disconnect_error",
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/database_sync/coordinator.py:141:18
    |
140 |     def synchronize_inventory(self) -> dict:
141 |         """æ‰§è¡Œåº“å­˜åŒæ­¥ï¼šè¿œç«¯æ‹‰å– â†’ instance_databases è½åº“ã€‚.
    |                        ^^
142 |
143 |         ä»Žè¿œç¨‹æ•°æ®åº“èŽ·å–æ•°æ®åº“æ¸…å•ï¼Œå¹¶åŒæ­¥åˆ°æœ¬åœ° instance_databases è¡¨ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/coordinator.py:143:22
    |
141 |         """æ‰§è¡Œåº“å­˜åŒæ­¥ï¼šè¿œç«¯æ‹‰å– â†’ instance_databases è½åº“ã€‚.
142 |
143 |         ä»Žè¿œç¨‹æ•°æ®åº“èŽ·å–æ•°æ®åº“æ¸…å•ï¼Œå¹¶åŒæ­¥åˆ°æœ¬åœ° instance_databases è¡¨ã€‚
    |                                   ^^
144 |
145 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/coordinator.py:146:21
    |
145 |         Returns:
146 |             åŒæ­¥ç»Ÿè®¡ä¿¡æ¯å­—å…¸ï¼ŒåŒ…å«æ´»è·ƒæ•°æ®åº“åˆ—è¡¨ç­‰ä¿¡æ¯ã€‚
    |                             ^^
147 |
148 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/coordinator.py:180:23
    |
178 |         """é‡‡é›†å®¹é‡æ•°æ®ã€‚.
179 |
180 |         ä»Žè¿œç¨‹æ•°æ®åº“é‡‡é›†å®¹é‡ç»Ÿè®¡æ•°æ®ï¼Œæ”¯æŒæŒ‰æ•°æ®åº“åç§°è¿‡æ»¤ã€‚
    |                                     ^^
181 |
182 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/coordinator.py:183:40
    |
182 |         Args:
183 |             target_databases: ç›®æ ‡æ•°æ®åº“åç§°åˆ—è¡¨ï¼Œä¸º None æ—¶é‡‡é›†æ‰€æœ‰æ•°æ®åº“ã€‚
    |                                                 ^^
184 |
185 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/coordinator.py:186:19
    |
185 |         Returns:
186 |             å®¹é‡æ•°æ®åˆ—è¡¨ï¼Œæ¯é¡¹åŒ…å«æ•°æ®åº“åç§°ã€å¤§å°ç­‰ä¿¡æ¯ã€‚
    |                         ^^
187 |
188 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/coordinator.py:244:24
    |
243 |         Returns:
244 |             ä¿å­˜æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
    |                              ^^
245 |
246 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/coordinator.py:253:24
    |
252 |         Returns:
253 |             æ›´æ–°æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
    |                              ^^
254 |
255 |         """
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/database_sync/coordinator.py:261:14
    |
259 |         """æ‰§è¡Œå®Œæ•´çš„åº“å­˜åŒæ­¥ + å®¹é‡é‡‡é›† + æ•°æ®æŒä¹…åŒ–æµç¨‹ã€‚.
260 |
261 |         æŒ‰é¡ºåºæ‰§è¡Œï¼š
    |                   ^^
262 |         1. åŒæ­¥æ•°æ®åº“æ¸…å•
263 |         2. é‡‡é›†æ´»è·ƒæ•°æ®åº“çš„å®¹é‡æ•°æ®
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/database_sync/coordinator.py:292:29
    |
290 |             except Exception as exc:
291 |                 db.session.rollback()
292 |                 self.logger.error(
    |                             ^^^^^
293 |                     "capacity_sync_commit_failed",
294 |                     instance=self.instance.name,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/coordinator.py:311:20
    |
309 |         """ç¡®ä¿æ•°æ®åº“è¿žæŽ¥å·²å»ºç«‹ã€‚.
310 |
311 |         å¦‚æžœè¿žæŽ¥ä¸å­˜åœ¨æˆ–å·²æ–­å¼€ï¼Œåˆ™å°è¯•é‡æ–°è¿žæŽ¥ã€‚
    |                               ^^
312 |
313 |         Returns:
    |

SIM102 Use a single `if` statement instead of nested `if` statements
   --> app/services/database_sync/coordinator.py:320:9
    |
319 |           """
320 | /         if not self._connection or not getattr(self._connection, "is_connected", False):
321 | |             if not self.connect():
    | |__________________________________^
322 |                   msg = "æ•°æ®åº“è¿žæŽ¥æœªå»ºç«‹"
323 |                   raise RuntimeError(msg)
    |
help: Combine `if` statements using `and`

D107 Missing docstring in `__init__`
  --> app/services/database_sync/database_filters.py:29:9
   |
27 |     """è´Ÿè´£åŠ è½½æ•°æ®åº“å‘çŽ°/å®¹é‡åŒæ­¥æ‰€éœ€çš„è¿‡æ»¤é…ç½®ã€‚."""
28 |
29 |     def __init__(self, config_path: str | Path | None = None) -> None:
   |         ^^^^^^^^
30 |         self._config_path = Path(config_path) if config_path else _DEFAULT_CONFIG_PATH
31 |         self._normalized_rules: dict[str, dict[str, Any]] = {}
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `instance`
   --> app/services/database_sync/database_filters.py:111:49
    |
109 |         return re.compile(regex, re.IGNORECASE)
110 |
111 |     def should_exclude_database(self, instance: Any, database_name: str | None) -> tuple[bool, str | None]:
    |                                                 ^^^
112 |         """åˆ¤æ–­ç»™å®šå®žä¾‹ä¸‹çš„æ•°æ®åº“æ˜¯å¦éœ€è¦è¢«è¿‡æ»¤ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `instance`
   --> app/services/database_sync/database_filters.py:143:47
    |
141 |         return False, None
142 |
143 |     def filter_database_names(self, instance: Any, names: Iterable[str]) -> tuple[list[str], list[str]]:
    |                                               ^^^
144 |         """è¿‡æ»¤æ•°æ®åº“åç§°ï¼Œè¿”å›žä¿ç•™ä¸ŽæŽ’é™¤åˆ—è¡¨ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/database_filters.py:144:19
    |
143 |     def filter_database_names(self, instance: Any, names: Iterable[str]) -> tuple[list[str], list[str]]:
144 |         """è¿‡æ»¤æ•°æ®åº“åç§°ï¼Œè¿”å›žä¿ç•™ä¸ŽæŽ’é™¤åˆ—è¡¨ã€‚.
    |                          ^^
145 |
146 |         Args:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `instance`
   --> app/services/database_sync/database_filters.py:164:49
    |
162 |         return allowed, excluded
163 |
164 |     def filter_capacity_payload(self, instance: Any, payload: Sequence[dict[str, Any]]) -> tuple[list[dict[str, Any]], list[str]]:
    |                                                 ^^^
165 |         """è¿‡æ»¤å®¹é‡é‡‡é›†ç»“æžœï¼Œè¿”å›žä¿ç•™è®°å½•ä¸Žè¢«æŽ’é™¤çš„åº“åã€‚.
    |

E501 Line too long (130 > 120)
   --> app/services/database_sync/database_filters.py:164:121
    |
162 |         return allowed, excluded
163 |
164 |     def filter_capacity_payload(self, instance: Any, payload: Sequence[dict[str, Any]]) -> tuple[list[dict[str, Any]], list[str]]:
    |                                                                                                                         ^^^^^^^^^^
165 |         """è¿‡æ»¤å®¹é‡é‡‡é›†ç»“æžœï¼Œè¿”å›žä¿ç•™è®°å½•ä¸Žè¢«æŽ’é™¤çš„åº“åã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/database_filters.py:165:20
    |
164 |     def filter_capacity_payload(self, instance: Any, payload: Sequence[dict[str, Any]]) -> tuple[list[dict[str, Any]], list[str]]:
165 |         """è¿‡æ»¤å®¹é‡é‡‡é›†ç»“æžœï¼Œè¿”å›žä¿ç•™è®°å½•ä¸Žè¢«æŽ’é™¤çš„åº“åã€‚.
    |                            ^^
166 |
167 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/database_sync/database_sync_service.py:3:45
  |
1 | """æ•°æ®åº“å®¹é‡åŒæ­¥æœåŠ¡.
2 |
3 | è¯¥æ¨¡å—æä¾›ä¸ŽåŽ†å²ç‰ˆæœ¬å…¼å®¹çš„ `DatabaseSizeCollectorService`ï¼Œå†…éƒ¨å§”æ‰˜
  |                                                          ^^
4 | `app.services.database_sync` ä¸­çš„åè°ƒå™¨ä¸Žé€‚é…å™¨å®Œæˆå·¥ä½œã€‚
5 | """
  |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/database_sync/database_sync_service.py:22:17
   |
21 | class DatabaseSizeCollectorService:
22 |     """æ•°æ®åº“å®¹é‡é‡‡é›†æœåŠ¡ï¼ˆå…¼å®¹åŒ…è£…å™¨ï¼‰ã€‚.
   |                          ^^
23 |
24 |     æä¾›ä¸ŽåŽ†å²ç‰ˆæœ¬å…¼å®¹çš„æŽ¥å£ï¼Œå†…éƒ¨å§”æ‰˜ç»™ CapacitySyncCoordinator å®žçŽ°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/database_sync/database_sync_service.py:22:23
   |
21 | class DatabaseSizeCollectorService:
22 |     """æ•°æ®åº“å®¹é‡é‡‡é›†æœåŠ¡ï¼ˆå…¼å®¹åŒ…è£…å™¨ï¼‰ã€‚.
   |                                      ^^
23 |
24 |     æä¾›ä¸ŽåŽ†å²ç‰ˆæœ¬å…¼å®¹çš„æŽ¥å£ï¼Œå†…éƒ¨å§”æ‰˜ç»™ CapacitySyncCoordinator å®žçŽ°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/database_sync_service.py:24:17
   |
22 |     """æ•°æ®åº“å®¹é‡é‡‡é›†æœåŠ¡ï¼ˆå…¼å®¹åŒ…è£…å™¨ï¼‰ã€‚.
23 |
24 |     æä¾›ä¸ŽåŽ†å²ç‰ˆæœ¬å…¼å®¹çš„æŽ¥å£ï¼Œå†…éƒ¨å§”æ‰˜ç»™ CapacitySyncCoordinator å®žçŽ°ã€‚
   |                             ^^
25 |     æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®ï¼Œè‡ªåŠ¨ç®¡ç†æ•°æ®åº“è¿žæŽ¥ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/database_sync_service.py:25:15
   |
24 |     æä¾›ä¸ŽåŽ†å²ç‰ˆæœ¬å…¼å®¹çš„æŽ¥å£ï¼Œå†…éƒ¨å§”æ‰˜ç»™ CapacitySyncCoordinator å®žçŽ°ã€‚
25 |     æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®ï¼Œè‡ªåŠ¨ç®¡ç†æ•°æ®åº“è¿žæŽ¥ã€‚
   |                         ^^
26 |
27 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/database_sync_service.py:49:20
   |
48 |     def __enter__(self) -> Self:
49 |         """è¿›å…¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œå»ºç«‹æ•°æ®åº“è¿žæŽ¥ã€‚.
   |                            ^^
50 |
51 |         Returns:
   |

ANN001 Missing type annotation for function argument `exc_type`
  --> app/services/database_sync/database_sync_service.py:58:24
   |
56 |         return self
57 |
58 |     def __exit__(self, exc_type, exc_val, exc_tb) -> None:
   |                        ^^^^^^^^
59 |         """é€€å‡ºä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œæ–­å¼€æ•°æ®åº“è¿žæŽ¥ã€‚.
   |

ANN001 Missing type annotation for function argument `exc_val`
  --> app/services/database_sync/database_sync_service.py:58:34
   |
56 |         return self
57 |
58 |     def __exit__(self, exc_type, exc_val, exc_tb) -> None:
   |                                  ^^^^^^^
59 |         """é€€å‡ºä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œæ–­å¼€æ•°æ®åº“è¿žæŽ¥ã€‚.
   |

ANN001 Missing type annotation for function argument `exc_tb`
  --> app/services/database_sync/database_sync_service.py:58:43
   |
56 |         return self
57 |
58 |     def __exit__(self, exc_type, exc_val, exc_tb) -> None:
   |                                           ^^^^^^
59 |         """é€€å‡ºä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œæ–­å¼€æ•°æ®åº“è¿žæŽ¥ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/database_sync_service.py:59:20
   |
58 |     def __exit__(self, exc_type, exc_val, exc_tb) -> None:
59 |         """é€€å‡ºä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œæ–­å¼€æ•°æ®åº“è¿žæŽ¥ã€‚.
   |                            ^^
60 |
61 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_sync/database_sync_service.py:79:24
   |
78 |         Returns:
79 |             è¿žæŽ¥æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
   |                              ^^
80 |
81 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/database_sync_service.py:136:40
    |
135 |         Args:
136 |             target_databases: ç›®æ ‡æ•°æ®åº“åç§°åˆ—è¡¨ï¼Œä¸º None æ—¶é‡‡é›†æ‰€æœ‰æ•°æ®åº“ã€‚
    |                                                 ^^
137 |
138 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/database_sync_service.py:166:24
    |
165 |         Returns:
166 |             ä¿å­˜æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
    |                              ^^
167 |
168 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/database_sync_service.py:175:24
    |
174 |         Returns:
175 |             æ›´æ–°æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
    |                              ^^
176 |
177 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/database_sync_service.py:196:13
    |
194 |     """é‡‡é›†æ‰€æœ‰æ´»è·ƒå®žä¾‹çš„æ•°æ®åº“å®¹é‡æ•°æ®ã€‚.
195 |
196 |     éåŽ†æ‰€æœ‰æ´»è·ƒå®žä¾‹ï¼Œä¾æ¬¡æ‰§è¡Œå®¹é‡é‡‡é›†å’Œä¿å­˜æ“ä½œã€‚
    |                     ^^
197 |
198 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/database_sync_service.py:199:17
    |
198 |     Returns:
199 |         é‡‡é›†ç»“æžœç»Ÿè®¡å­—å…¸ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
    |                         ^^
200 |         {
201 |             'status': 'success' æˆ– 'partial_success',
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/database_sync/database_sync_service.py:199:24
    |
198 |     Returns:
199 |         é‡‡é›†ç»“æžœç»Ÿè®¡å­—å…¸ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
    |                                       ^^
200 |         {
201 |             'status': 'success' æˆ– 'partial_success',
    |

PLC0415 `import` should be at the top-level of a file
   --> app/services/database_sync/database_sync_service.py:209:5
    |
208 |     """
209 |     from app.models.instance import Instance
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
210 |
211 |     logger = get_system_logger()
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/database_sync/database_sync_service.py:251:20
    |
249 |         except Exception as exc:
250 |             error_msg = f"å®žä¾‹ {instance.name} é‡‡é›†å¤±è´¥: {exc}"
251 |             logger.error(
    |                    ^^^^^
252 |                 "capacity_collection_failed",
253 |                 instance=instance.name,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/database_sync/inventory_manager.py:1:13
  |
1 | """å®¹é‡åŒæ­¥åº“å­˜ç®¡ç†å™¨ï¼Œå®žçŽ° instance_databases çš„å¢žé‡æ›´æ–°ã€‚."""
  |                      ^^
2 |
3 | from __future__ import annotations
  |

D107 Missing docstring in `__init__`
  --> app/services/database_sync/inventory_manager.py:24:9
   |
22 |     """è´Ÿè´£ç»´æŠ¤ instance_databases è¡¨çš„å¢žé‡åŒæ­¥é€»è¾‘ã€‚."""
23 |
24 |     def __init__(self, filter_manager=database_sync_filter_manager) -> None:
   |         ^^^^^^^^
25 |         self.logger = get_system_logger()
26 |         self.filter_manager = filter_manager
   |

ANN001 Missing type annotation for function argument `filter_manager`
  --> app/services/database_sync/inventory_manager.py:24:24
   |
22 |     """è´Ÿè´£ç»´æŠ¤ instance_databases è¡¨çš„å¢žé‡åŒæ­¥é€»è¾‘ã€‚."""
23 |
24 |     def __init__(self, filter_manager=database_sync_filter_manager) -> None:
   |                        ^^^^^^^^^^^^^^
25 |         self.logger = get_system_logger()
26 |         self.filter_manager = filter_manager
   |

C901 `synchronize` is too complex (11 > 10)
  --> app/services/database_sync/inventory_manager.py:28:9
   |
26 |         self.filter_manager = filter_manager
27 |
28 |     def synchronize(
   |         ^^^^^^^^^^^
29 |         self,
30 |         instance: Instance,
   |

PLR0915 Too many statements (54 > 50)
  --> app/services/database_sync/inventory_manager.py:28:9
   |
26 |         self.filter_manager = filter_manager
27 |
28 |     def synchronize(
   |         ^^^^^^^^^^^
29 |         self,
30 |         instance: Instance,
   |

RUF003 Comment contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
  --> app/services/database_sync/inventory_manager.py:67:34
   |
65 |             is_system = bool(item.get("is_system"))
66 |             if is_system and (instance.db_type or "").lower() != "mysql":
67 |                 # éž MySQL ä¿æŒè·³è¿‡ç³»ç»Ÿåº“ï¼›MySQL æ ¹æ®éœ€æ±‚çº³å…¥åŒæ­¥
   |                                          ^^
68 |                 continue
   |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/database_sync/inventory_manager.py:121:25
    |
119 |         except SQLAlchemyError as exc:
120 |             db.session.rollback()
121 |             self.logger.error(
    |                         ^^^^^
122 |                 "inventory_sync_commit_failed",
123 |                 instance=instance.name,
    |

D107 Missing docstring in `__init__`
  --> app/services/database_sync/persistence.py:27:9
   |
25 |     """è´Ÿè´£å®¹é‡é‡‡é›†ç›¸å…³çš„æ•°æ®æŒä¹…åŒ–ã€‚."""
26 |
27 |     def __init__(self) -> None:
   |         ^^^^^^^^
28 |         self.logger = get_system_logger()
   |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/database_sync/persistence.py:101:25
    |
 99 |         except SQLAlchemyError as exc:
100 |             db.session.rollback()
101 |             self.logger.error(
    |                         ^^^^^
102 |                 "save_database_stats_upsert_failed",
103 |                 instance=instance.name,
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/database_sync/persistence.py:118:25
    |
116 |         except SQLAlchemyError as exc:
117 |             db.session.rollback()
118 |             self.logger.error(
    |                         ^^^^^
119 |                 "save_database_stats_commit_failed",
120 |                 instance=instance.name,
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/database_sync/persistence.py:191:13
    |
189 |                 database_count=database_count,
190 |             )
191 |             return True
    |             ^^^^^^^^^^^
192 |         except SQLAlchemyError as exc:
193 |             self.logger.error(
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/database_sync/persistence.py:193:25
    |
191 |             return True
192 |         except SQLAlchemyError as exc:
193 |             self.logger.error(
    |                         ^^^^^
194 |                 "save_instance_stats_failed",
195 |                 instance=instance.name,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/database_sync/persistence.py:208:30
    |
207 |         Returns:
208 |             bool: æ›´æ–°æˆåŠŸè¿”å›ž Trueï¼Œç¼ºå°‘æ•°æ®æˆ–æäº¤å¤±è´¥è¿”å›ž Falseã€‚
    |                                    ^^
209 |
210 |         """
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/services/database_sync/persistence.py:250:29
    |
248 |             except SQLAlchemyError as exc:
249 |                 db.session.rollback()
250 |                 self.logger.error(
    |                             ^^^^^
251 |                     "update_instance_total_size_commit_failed",
252 |                     instance=instance.name,
    |

D205 1 blank line required between summary line and description
 --> app/services/database_type_service.py:1:1
  |
1 | / """é²¸è½ - æ•°æ®åº“ç±»åž‹ç®¡ç†æœåŠ¡
2 | | æä¾›æ•°æ®åº“ç±»åž‹çš„CRUDæ“ä½œå’Œä¸šåŠ¡é€»è¾‘.
3 | | """
  | |___^
4 |
5 |   from typing import Any
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_type_service.py:41:26
   |
40 |         Args:
41 |             name: æ•°æ®åº“ç±»åž‹åç§°ï¼Œå¦‚ 'mysql'ã€'postgresql'ã€‚
   |                                 ^^
42 |
43 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_type_service.py:44:23
   |
43 |         Returns:
44 |             åŒ¹é…çš„æ•°æ®åº“ç±»åž‹é…ç½®ï¼Œå¦‚æžœä¸å­˜åœ¨è¿”å›ž Noneã€‚
   |                                 ^^
45 |
46 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/database_type_service.py:54:26
   |
53 |         Returns:
54 |             åŒ…å«è¡¨å•æ‰€éœ€å­—æ®µçš„å­—å…¸åˆ—è¡¨ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                       ^^
55 |             [
56 |                 {
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/database_type_service.py:54:31
   |
53 |         Returns:
54 |             åŒ…å«è¡¨å•æ‰€éœ€å­—æ®µçš„å­—å…¸åˆ—è¡¨ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                                 ^^
55 |             [
56 |                 {
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/form_service/__init__.py:3:14
  |
1 | """è¡¨å•æœåŠ¡æ¨¡å—ã€‚.
2 |
3 | æä¾›å„ç§èµ„æºçš„è¡¨å•å¤„ç†æœåŠ¡ï¼ŒåŒ…æ‹¬éªŒè¯ã€æ¸…ç†å’Œä¿å­˜åŠŸèƒ½ã€‚
  |                           ^^
4 |
5 | ä¸»è¦æœåŠ¡ï¼š
  |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/services/form_service/__init__.py:5:5
  |
3 | æä¾›å„ç§èµ„æºçš„è¡¨å•å¤„ç†æœåŠ¡ï¼ŒåŒ…æ‹¬éªŒè¯ã€æ¸…ç†å’Œä¿å­˜åŠŸèƒ½ã€‚
4 |
5 | ä¸»è¦æœåŠ¡ï¼š
  |         ^^
6 | - BaseResourceService: èµ„æºè¡¨å•æœåŠ¡åŸºç±»
7 | - InstanceFormService: å®žä¾‹è¡¨å•æœåŠ¡
  |

PLR0911 Too many return statements (8 > 6)
  --> app/services/form_service/classification_rule_service.py:45:9
   |
43 |         return dict(payload or {})
44 |
45 |     def validate(self, data: dict[str, Any], *, resource: ClassificationRule | None) -> ServiceResult[dict[str, Any]]:
   |         ^^^^^^^^
46 |         """æ ¡éªŒåˆ†ç±»è§„åˆ™æ•°æ®ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/form_service/classification_rule_service.py:52:31
   |
50 |         Args:
51 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
52 |             resource: å·²å­˜åœ¨çš„è§„åˆ™å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                       ^^
53 |
54 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/form_service/classification_rule_service.py:52:36
   |
50 |         Args:
51 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
52 |             resource: å·²å­˜åœ¨çš„è§„åˆ™å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                                 ^^
53 |
54 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/classification_rule_service.py:52:37
   |
50 |         Args:
51 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
52 |             resource: å·²å­˜åœ¨çš„è§„åˆ™å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                                   ^^
53 |
54 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/classification_rule_service.py:55:17
   |
54 |         Returns:
55 |             æ ¡éªŒç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žè§„èŒƒåŒ–çš„æ•°æ®ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
   |                     ^^
56 |
57 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/classification_rule_service.py:55:29
   |
54 |         Returns:
55 |             æ ¡éªŒç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žè§„èŒƒåŒ–çš„æ•°æ®ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
   |                                             ^^
56 |
57 |         """
   |

ARG002 Unused method argument: `data`
   --> app/services/form_service/classification_rule_service.py:118:56
    |
116 |         instance.is_active = data["is_active"]
117 |
118 |     def after_save(self, instance: ClassificationRule, data: dict[str, Any]) -> None:
    |                                                        ^^^^
119 |         """ä¿å­˜åŽè®°å½•æ—¥å¿—å¹¶æ¸…é™¤ç¼“å­˜ã€‚.
    |

PLC0415 `import` should be at the top-level of a file
   --> app/services/form_service/classification_rule_service.py:129:9
    |
128 |         """
129 |         from app.utils.structlog_config import log_info
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
130 |
131 |         log_info(
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/form_service/classification_rule_service.py:140:16
    |
138 |             service = AccountClassificationService()
139 |             service.invalidate_cache()
140 |         except Exception as exc:
    |                ^^^^^^^^^
141 |             log_info(
142 |                 "æ¸…é™¤åˆ†ç±»ç¼“å­˜å¤±è´¥",
    |

ARG002 Unused method argument: `resource`
   --> app/services/form_service/classification_rule_service.py:148:32
    |
146 |             )
147 |
148 |     def build_context(self, *, resource: ClassificationRule | None) -> dict[str, Any]:
    |                                ^^^^^^^^
149 |         """æž„å»ºæ¨¡æ¿æ¸²æŸ“ä¸Šä¸‹æ–‡ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/classification_rule_service.py:152:27
    |
151 |         Args:
152 |             resource: è§„åˆ™å®žä¾‹ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                               ^^
153 |
154 |         Returns:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `expression`
   --> app/services/form_service/classification_rule_service.py:167:49
    |
165 |         }
166 |
167 |     def _normalize_expression(self, expression: Any) -> str:
    |                                                 ^^^
168 |         """è§„èŒƒåŒ–è§„åˆ™è¡¨è¾¾å¼ä¸º JSON å­—ç¬¦ä¸²ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/form_service/classification_rule_service.py:171:30
    |
170 |         Args:
171 |             expression: åŽŸå§‹è¡¨è¾¾å¼ï¼ˆå­—ç¬¦ä¸²æˆ–å­—å…¸ï¼‰ã€‚
    |                                   ^^
172 |
173 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/form_service/classification_rule_service.py:171:37
    |
170 |         Args:
171 |             expression: åŽŸå§‹è¡¨è¾¾å¼ï¼ˆå­—ç¬¦ä¸²æˆ–å­—å…¸ï¼‰ã€‚
    |                                                 ^^
172 |
173 |         Returns:
    |

PLR0911 Too many return statements (7 > 6)
   --> app/services/form_service/classification_rule_service.py:183:9
    |
181 |         return json.dumps(parsed, ensure_ascii=False, sort_keys=True)
182 |
183 |     def _coerce_bool(self, value: Any, *, default: bool) -> bool:
    |         ^^^^^^^^^^^^
184 |         """å°†å€¼è½¬æ¢ä¸ºå¸ƒå°”ç±»åž‹ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `value`
   --> app/services/form_service/classification_rule_service.py:183:35
    |
181 |         return json.dumps(parsed, ensure_ascii=False, sort_keys=True)
182 |
183 |     def _coerce_bool(self, value: Any, *, default: bool) -> bool:
    |                                   ^^^
184 |         """å°†å€¼è½¬æ¢ä¸ºå¸ƒå°”ç±»åž‹ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/classification_rule_service.py:217:25
    |
216 |         Returns:
217 |             å¦‚æžœå€¼æœ‰æ•ˆè¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚
    |                                ^^
218 |
219 |         """
    |

PLR0911 Too many return statements (7 > 6)
  --> app/services/form_service/classification_service.py:43:9
   |
41 |         return dict(payload or {})
42 |
43 |     def validate(self, data: dict[str, Any], *, resource: AccountClassification | None) -> ServiceResult[dict[str, Any]]:
   |         ^^^^^^^^
44 |         """æ ¡éªŒè´¦æˆ·åˆ†ç±»æ•°æ®ã€‚.
   |

E501 Line too long (121 > 120)
  --> app/services/form_service/classification_service.py:43:121
   |
41 |         return dict(payload or {})
42 |
43 |     def validate(self, data: dict[str, Any], *, resource: AccountClassification | None) -> ServiceResult[dict[str, Any]]:
   |                                                                                                                         ^
44 |         """æ ¡éªŒè´¦æˆ·åˆ†ç±»æ•°æ®ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/form_service/classification_service.py:50:31
   |
48 |         Args:
49 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
50 |             resource: å·²å­˜åœ¨çš„åˆ†ç±»å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                       ^^
51 |
52 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/form_service/classification_service.py:50:36
   |
48 |         Args:
49 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
50 |             resource: å·²å­˜åœ¨çš„åˆ†ç±»å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                                 ^^
51 |
52 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/classification_service.py:50:37
   |
48 |         Args:
49 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
50 |             resource: å·²å­˜åœ¨çš„åˆ†ç±»å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                                   ^^
51 |
52 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/classification_service.py:53:17
   |
52 |         Returns:
53 |             æ ¡éªŒç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žè§„èŒƒåŒ–çš„æ•°æ®ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
   |                     ^^
54 |
55 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/classification_service.py:53:29
   |
52 |         Returns:
53 |             æ ¡éªŒç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žè§„èŒƒåŒ–çš„æ•°æ®ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
   |                                             ^^
54 |
55 |         """
   |

PLC0415 `import` should be at the top-level of a file
   --> app/services/form_service/classification_service.py:117:9
    |
115 |         """
116 |         action = "åˆ›å»ºè´¦æˆ·åˆ†ç±»æˆåŠŸ" if data.get("_is_create") else "æ›´æ–°è´¦æˆ·åˆ†ç±»æˆåŠŸ"
117 |         from app.utils.structlog_config import log_info  # avoid circular import
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
118 |
119 |         log_info(
    |

ARG002 Unused method argument: `resource`
   --> app/services/form_service/classification_service.py:126:32
    |
124 |         )
125 |
126 |     def build_context(self, *, resource: AccountClassification | None) -> dict[str, Any]:
    |                                ^^^^^^^^
127 |         """æž„å»ºæ¨¡æ¿æ¸²æŸ“ä¸Šä¸‹æ–‡ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/classification_service.py:130:27
    |
129 |         Args:
130 |             resource: åˆ†ç±»å®žä¾‹ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                               ^^
131 |
132 |         Returns:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `raw_value`
   --> app/services/form_service/classification_service.py:146:42
    |
144 |         }
145 |
146 |     def _parse_priority(self, raw_value: Any, default: int) -> int:
    |                                          ^^^
147 |         """è§£æžä¼˜å…ˆçº§å€¼ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/form_service/classification_service.py:154:21
    |
153 |         Returns:
154 |             è§£æžåŽçš„ä¼˜å…ˆçº§å€¼ï¼ˆ0-100ï¼‰ã€‚
    |                             ^^
155 |
156 |         Raises:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/form_service/classification_service.py:154:27
    |
153 |         Returns:
154 |             è§£æžåŽçš„ä¼˜å…ˆçº§å€¼ï¼ˆ0-100ï¼‰ã€‚
    |                                    ^^
155 |
156 |         Raises:
    |

B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
   --> app/services/form_service/classification_service.py:166:13
    |
164 |         except (TypeError, ValueError):
165 |             msg = "ä¼˜å…ˆçº§å¿…é¡»ä¸ºæ•´æ•°"
166 |             raise ValueError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^
167 |         return max(0, min(value, 100))
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/classification_service.py:177:25
    |
176 |         Returns:
177 |             å¦‚æžœå€¼æœ‰æ•ˆè¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚
    |                                ^^
178 |
179 |         """
    |

C901 `validate` is too complex (11 > 10)
  --> app/services/form_service/credential_service.py:50:9
   |
48 |         return sanitize_form_data(payload or {})
49 |
50 |     def validate(self, data: dict[str, Any], *, resource: Credential | None) -> ServiceResult[dict[str, Any]]:
   |         ^^^^^^^^
51 |         """æ ¡éªŒå‡­æ®æ•°æ®ã€‚.
   |

PLR0911 Too many return statements (7 > 6)
  --> app/services/form_service/credential_service.py:50:9
   |
48 |         return sanitize_form_data(payload or {})
49 |
50 |     def validate(self, data: dict[str, Any], *, resource: Credential | None) -> ServiceResult[dict[str, Any]]:
   |         ^^^^^^^^
51 |         """æ ¡éªŒå‡­æ®æ•°æ®ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/form_service/credential_service.py:57:31
   |
55 |         Args:
56 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
57 |             resource: å·²å­˜åœ¨çš„å‡­æ®å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                       ^^
58 |
59 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/form_service/credential_service.py:57:36
   |
55 |         Args:
56 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
57 |             resource: å·²å­˜åœ¨çš„å‡­æ®å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                                 ^^
58 |
59 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/credential_service.py:57:37
   |
55 |         Args:
56 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
57 |             resource: å·²å­˜åœ¨çš„å‡­æ®å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                                   ^^
58 |
59 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/credential_service.py:60:17
   |
59 |         Returns:
60 |             æ ¡éªŒç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žè§„èŒƒåŒ–çš„æ•°æ®ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
   |                     ^^
61 |
62 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/credential_service.py:60:29
   |
59 |         Returns:
60 |             æ ¡éªŒç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žè§„èŒƒåŒ–çš„æ•°æ®ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
   |                                             ^^
61 |
62 |         """
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/credential_service.py:99:47
    |
 97 |             query = query.filter(Credential.id != resource.id)
 98 |         if query.first():
 99 |             return ServiceResult.fail("å‡­æ®åç§°å·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨å…¶ä»–åç§°")
    |                                                      ^^
100 |
101 |         return ServiceResult.ok(normalized)
    |

ARG002 Unused method argument: `resource`
   --> app/services/form_service/credential_service.py:147:32
    |
145 |         )
146 |
147 |     def build_context(self, *, resource: Credential | None) -> dict[str, Any]:
    |                                ^^^^^^^^
148 |         """æž„å»ºæ¨¡æ¿æ¸²æŸ“ä¸Šä¸‹æ–‡ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/credential_service.py:151:27
    |
150 |         Args:
151 |             resource: å‡­æ®å®žä¾‹ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                               ^^
152 |
153 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/credential_service.py:170:31
    |
168 |         Args:
169 |             data: åŽŸå§‹æ•°æ®ã€‚
170 |             resource: å·²å­˜åœ¨çš„å‡­æ®å®žä¾‹ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                                       ^^
171 |
172 |         Returns:
    |

E501 Line too long (127 > 120)
   --> app/services/form_service/credential_service.py:178:121
    |
176 |         normalized: dict[str, Any] = {}
177 |         normalized["name"] = (data.get("name") or (resource.name if resource else "")).strip()
178 |         normalized["credential_type"] = (data.get("credential_type") or (resource.credential_type if resource else "")).strip()
    |                                                                                                                         ^^^^^^^
179 |         normalized["username"] = (data.get("username") or (resource.username if resource else "")).strip()
    |

PLR0911 Too many return statements (7 > 6)
   --> app/services/form_service/credential_service.py:198:9
    |
196 |         return normalized
197 |
198 |     def _coerce_bool(self, value: Any, *, default: bool) -> bool:
    |         ^^^^^^^^^^^^
199 |         """å°†å€¼è½¬æ¢ä¸ºå¸ƒå°”ç±»åž‹ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `value`
   --> app/services/form_service/credential_service.py:198:35
    |
196 |         return normalized
197 |
198 |     def _coerce_bool(self, value: Any, *, default: bool) -> bool:
    |                                   ^^^
199 |         """å°†å€¼è½¬æ¢ä¸ºå¸ƒå°”ç±»åž‹ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/credential_service.py:228:33
    |
227 |         Credential æ¨¡åž‹çš„æž„é€ å‡½æ•°è¦æ±‚ name/credential_type/username/password
228 |         å››ä¸ªå¿…å¡«å‚æ•°ã€‚è¡¨å•æœåŠ¡åœ¨èµ‹å€¼é˜¶æ®µæ‰ä¼šå†™å…¥çœŸå®žæ•°æ®ï¼Œå› æ­¤è¿™é‡Œ
    |                                                         ^^
229 |         æä¾›å ä½å€¼ä»¥ä¾¿å¤ç”¨åŸºç±»çš„ upsert æµç¨‹ã€‚
230 |         """
    |

S106 Possible hardcoded password assigned to argument: "password"
   --> app/services/form_service/credential_service.py:235:13
    |
233 |             credential_type="database",
234 |             username="__pending__",
235 |             password="__pending__",
    |             ^^^^^^^^^^^^^^^^^^^^^^
236 |         )
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/form_service/credential_service.py:243:31
    |
241 |         Args:
242 |             payload: åŽŸå§‹è¡¨å•æ•°æ®ã€‚
243 |             resource: å·²å­˜åœ¨çš„å‡­æ®å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                                       ^^
244 |
245 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/form_service/credential_service.py:243:36
    |
241 |         Args:
242 |             payload: åŽŸå§‹è¡¨å•æ•°æ®ã€‚
243 |             resource: å·²å­˜åœ¨çš„å‡­æ®å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                                                 ^^
244 |
245 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/credential_service.py:243:37
    |
241 |         Args:
242 |             payload: åŽŸå§‹è¡¨å•æ•°æ®ã€‚
243 |             resource: å·²å­˜åœ¨çš„å‡­æ®å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                                                   ^^
244 |
245 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/credential_service.py:246:17
    |
245 |         Returns:
246 |             æ“ä½œç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žå‡­æ®å®žä¾‹ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
    |                     ^^
247 |
248 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/credential_service.py:246:27
    |
245 |         Returns:
246 |             æ“ä½œç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žå‡­æ®å®žä¾‹ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
    |                                         ^^
247 |
248 |         """
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/credential_service.py:268:28
    |
266 |         lowered = message.lower()
267 |         if "unique constraint failed" in lowered or "duplicate key value" in lowered:
268 |             return "å‡­æ®åç§°å·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨å…¶ä»–åç§°"
    |                                   ^^
269 |         if "not null constraint failed" in lowered:
270 |             return "å¿…å¡«å­—æ®µä¸èƒ½ä¸ºç©º"
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/credential_service.py:271:23
    |
269 |         if "not null constraint failed" in lowered:
270 |             return "å¿…å¡«å­—æ®µä¸èƒ½ä¸ºç©º"
271 |         return "ä¿å­˜å‡­æ®å¤±è´¥ï¼Œè¯·ç¨åŽå†è¯•"
    |                             ^^
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/form_service/instance_service.py:51:29
   |
49 |         Args:
50 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
51 |             resource: å·²å­˜åœ¨çš„å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                   ^^
52 |
53 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/form_service/instance_service.py:51:34
   |
49 |         Args:
50 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
51 |             resource: å·²å­˜åœ¨çš„å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                             ^^
52 |
53 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/instance_service.py:51:35
   |
49 |         Args:
50 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
51 |             resource: å·²å­˜åœ¨çš„å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                               ^^
52 |
53 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/instance_service.py:54:17
   |
53 |         Returns:
54 |             æ ¡éªŒç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žè§„èŒƒåŒ–çš„æ•°æ®ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
   |                     ^^
55 |
56 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/instance_service.py:54:29
   |
53 |         Returns:
54 |             æ ¡éªŒç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žè§„èŒƒåŒ–çš„æ•°æ®ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
   |                                             ^^
55 |
56 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/instance_service.py:128:27
    |
127 |         Args:
128 |             resource: å®žä¾‹å¯¹è±¡ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                               ^^
129 |
130 |         Returns:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `credential_raw`
   --> app/services/form_service/instance_service.py:150:54
    |
148 |     # Helpers
149 |     # ------------------------------------------------------------------ #
150 |     def _resolve_credential_id(self, credential_raw: Any) -> int | None:
    |                                                      ^^^
151 |         """è§£æžå‡­æ® IDã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/form_service/instance_service.py:154:36
    |
153 |         Args:
154 |             credential_raw: åŽŸå§‹å‡­æ® IDï¼ˆå¯èƒ½æ˜¯æ•´æ•°ã€å­—ç¬¦ä¸²æˆ–åˆ—è¡¨ï¼‰ã€‚
    |                                        ^^
155 |
156 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/form_service/instance_service.py:154:49
    |
153 |         Args:
154 |             credential_raw: åŽŸå§‹å‡­æ® IDï¼ˆå¯èƒ½æ˜¯æ•´æ•°ã€å­—ç¬¦ä¸²æˆ–åˆ—è¡¨ï¼‰ã€‚
    |                                                                  ^^
155 |
156 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/instance_service.py:157:22
    |
156 |         Returns:
157 |             è§£æžåŽçš„å‡­æ® IDï¼Œå¦‚æžœä¸ºç©ºåˆ™è¿”å›ž Noneã€‚
    |                            ^^
158 |
159 |         Raises:
    |

B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
   --> app/services/form_service/instance_service.py:169:13
    |
167 |         except (TypeError, ValueError):
168 |             msg = "æ— æ•ˆçš„å‡­æ®ID"
169 |             raise ValueError(msg)
    |             ^^^^^^^^^^^^^^^^^^^^^
170 |
171 |         credential = Credential.query.get(credential_id)
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `tag_field`
   --> app/services/form_service/instance_service.py:177:47
    |
175 |         return credential_id
176 |
177 |     def _normalize_tag_names(self, tag_field: Any) -> list[str]:
    |                                               ^^^
178 |         """è§„èŒƒåŒ–æ ‡ç­¾åç§°åˆ—è¡¨ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/form_service/instance_service.py:181:30
    |
180 |         Args:
181 |             tag_field: åŽŸå§‹æ ‡ç­¾å­—æ®µï¼ˆå¯èƒ½æ˜¯åˆ—è¡¨æˆ–é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼‰ã€‚
    |                                    ^^
182 |
183 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/form_service/instance_service.py:181:45
    |
180 |         Args:
181 |             tag_field: åŽŸå§‹æ ‡ç­¾å­—æ®µï¼ˆå¯èƒ½æ˜¯åˆ—è¡¨æˆ–é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼‰ã€‚
    |                                                                  ^^
182 |
183 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/instance_service.py:216:23
    |
215 |     def _create_instance(self) -> Instance:
216 |         """æä¾›å®žä¾‹æ¨¡åž‹çš„å ä½å¯¹è±¡ï¼Œä¾¿äºŽæ²¿ç”¨åŸºç±»ä¿å­˜æµç¨‹ã€‚."""
    |                                  ^^
217 |         return Instance(
218 |             name="__pending__",
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/form_service/instance_service.py:261:16
    |
259 |                     tags=added,
260 |                 )
261 |         except Exception as exc:
    |                ^^^^^^^^^
262 |             db.session.rollback()
263 |             log_error(
    |

PLR0911 Too many return statements (7 > 6)
  --> app/services/form_service/password_service.py:43:9
   |
41 |         return sanitize_form_data(payload or {})
42 |
43 |     def validate(self, data: dict[str, Any], *, resource: User | None) -> ServiceResult[dict[str, Any]]:
   |         ^^^^^^^^
44 |         """æ ¡éªŒå¯†ç ä¿®æ”¹æ•°æ®ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/password_service.py:53:17
   |
52 |         Returns:
53 |             æ ¡éªŒç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žåŒ…å«æ–°å¯†ç çš„æ•°æ®ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
   |                     ^^
54 |
55 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/password_service.py:53:31
   |
52 |         Returns:
53 |             æ ¡éªŒç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žåŒ…å«æ–°å¯†ç çš„æ•°æ®ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
   |                                                 ^^
54 |
55 |         """
   |

ARG002 Unused method argument: `instance`
  --> app/services/form_service/password_service.py:94:26
   |
92 |         instance.set_password(data["new_password"])
93 |
94 |     def after_save(self, instance: User, data: dict[str, Any]) -> None:
   |                          ^^^^^^^^
95 |         """ä¿å­˜åŽè®°å½•æ—¥å¿—ã€‚.
   |

ARG002 Unused method argument: `data`
  --> app/services/form_service/password_service.py:94:42
   |
92 |         instance.set_password(data["new_password"])
93 |
94 |     def after_save(self, instance: User, data: dict[str, Any]) -> None:
   |                                          ^^^^
95 |         """ä¿å­˜åŽè®°å½•æ—¥å¿—ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/password_service.py:119:17
    |
118 |         Returns:
119 |             æ“ä½œç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žç”¨æˆ·å®žä¾‹ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
    |                     ^^
120 |
121 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/password_service.py:119:27
    |
118 |         Returns:
119 |             æ“ä½œç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žç”¨æˆ·å®žä¾‹ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
    |                                         ^^
120 |
121 |         """
    |

E501 Line too long (131 > 120)
   --> app/services/form_service/password_service.py:125:117
    |
123 | â€¦rce)
124 | â€¦
125 | â€¦"éªŒè¯å¤±è´¥", message_key=validation.message_key, extra=validation.extra)
    |                                                              ^^^^^^^^^^^
126 | â€¦
127 | â€¦
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/form_service/password_service.py:136:16
    |
134 |             db.session.add(instance)
135 |             db.session.commit()
136 |         except Exception as exc:
    |                ^^^^^^^^^
137 |             db.session.rollback()
138 |             return ServiceResult.fail("å¯†ç ä¿®æ”¹å¤±è´¥ï¼Œè¯·ç¨åŽå†è¯•", extra={"exception": str(exc)})
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/password_service.py:138:46
    |
136 |         except Exception as exc:
137 |             db.session.rollback()
138 |             return ServiceResult.fail("å¯†ç ä¿®æ”¹å¤±è´¥ï¼Œè¯·ç¨åŽå†è¯•", extra={"exception": str(exc)})
    |                                                    ^^
139 |
140 |         self.after_save(instance, validation.data or sanitized)
    |

D205 1 blank line required between summary line and description
 --> app/services/form_service/resource_service.py:1:1
  |
1 | / """é€šç”¨èµ„æºè¡¨å•æœåŠ¡åŸºç±».
2 | | ---------------------------------
3 | | è´Ÿè´£å°è£…è¡¨å•æ ¡éªŒã€æ¨¡åž‹èµ‹å€¼ã€æ•°æ®åº“æäº¤ä¸Žç»Ÿä¸€çš„ç»“æžœè¿”å›žã€‚
4 | | """
  | |___^
5 |
6 |   from __future__ import annotations
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/resource_service.py:26:17
   |
24 |     """ç»Ÿä¸€çš„æœåŠ¡å±‚è¿”å›žç»“æž„ã€‚.
25 |
26 |     ç”¨äºŽå°è£…æœåŠ¡å±‚æ“ä½œçš„ç»“æžœï¼ŒåŒ…å«æˆåŠŸçŠ¶æ€ã€æ•°æ®ã€æ¶ˆæ¯å’Œé¢å¤–ä¿¡æ¯ã€‚
   |                             ^^
27 |
28 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/resource_service.py:30:22
   |
28 |     Attributes:
29 |         success: æ“ä½œæ˜¯å¦æˆåŠŸã€‚
30 |         data: è¿”å›žçš„æ•°æ®å¯¹è±¡ï¼Œå¤±è´¥æ—¶ä¸º Noneã€‚
   |                             ^^
31 |         message: è¿”å›žæ¶ˆæ¯ï¼Œç”¨äºŽå‰ç«¯å±•ç¤ºã€‚
32 |         message_key: æ¶ˆæ¯é”®ï¼Œç”¨äºŽå›½é™…åŒ–ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/resource_service.py:31:22
   |
29 |         success: æ“ä½œæ˜¯å¦æˆåŠŸã€‚
30 |         data: è¿”å›žçš„æ•°æ®å¯¹è±¡ï¼Œå¤±è´¥æ—¶ä¸º Noneã€‚
31 |         message: è¿”å›žæ¶ˆæ¯ï¼Œç”¨äºŽå‰ç«¯å±•ç¤ºã€‚
   |                          ^^
32 |         message_key: æ¶ˆæ¯é”®ï¼Œç”¨äºŽå›½é™…åŒ–ã€‚
33 |         extra: é¢å¤–ä¿¡æ¯å­—å…¸ï¼Œç”¨äºŽä¼ é€’è¯¦ç»†é”™è¯¯æˆ–è°ƒè¯•ä¿¡æ¯ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/resource_service.py:32:25
   |
30 |         data: è¿”å›žçš„æ•°æ®å¯¹è±¡ï¼Œå¤±è´¥æ—¶ä¸º Noneã€‚
31 |         message: è¿”å›žæ¶ˆæ¯ï¼Œç”¨äºŽå‰ç«¯å±•ç¤ºã€‚
32 |         message_key: æ¶ˆæ¯é”®ï¼Œç”¨äºŽå›½é™…åŒ–ã€‚
   |                            ^^
33 |         extra: é¢å¤–ä¿¡æ¯å­—å…¸ï¼Œç”¨äºŽä¼ é€’è¯¦ç»†é”™è¯¯æˆ–è°ƒè¯•ä¿¡æ¯ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/resource_service.py:33:22
   |
31 |         message: è¿”å›žæ¶ˆæ¯ï¼Œç”¨äºŽå‰ç«¯å±•ç¤ºã€‚
32 |         message_key: æ¶ˆæ¯é”®ï¼Œç”¨äºŽå›½é™…åŒ–ã€‚
33 |         extra: é¢å¤–ä¿¡æ¯å­—å…¸ï¼Œç”¨äºŽä¼ é€’è¯¦ç»†é”™è¯¯æˆ–è°ƒè¯•ä¿¡æ¯ã€‚
   |                            ^^
34 |
35 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/resource_service.py:69:32
   |
67 |         Args:
68 |             message: é”™è¯¯æ¶ˆæ¯ã€‚
69 |             message_key: å¯é€‰çš„æ¶ˆæ¯é”®ï¼Œç”¨äºŽå›½é™…åŒ–ã€‚
   |                                      ^^
70 |             extra: å¯é€‰çš„é¢å¤–ä¿¡æ¯å­—å…¸ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/resource_service.py:83:19
   |
81 |     """èµ„æºè¡¨å•æœåŠ¡åŸºç±»ã€‚.
82 |
83 |     æä¾›é€šç”¨çš„èµ„æºåˆ›å»ºå’Œæ›´æ–°æµç¨‹ï¼Œå­ç±»åªéœ€å®žçŽ° validateã€assignã€after_save ç­‰é’©å­å³å¯ã€‚
   |                                 ^^
84 |
85 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/resource_service.py:86:22
   |
85 |     Attributes:
86 |         model: å…³è”çš„æ¨¡åž‹ç±»ï¼Œå­ç±»å¿…é¡»è®¾ç½®ã€‚
   |                            ^^
87 |
88 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/resource_service.py:99:17
    |
 98 |         Returns:
 99 |             èµ„æºå®žä¾‹ï¼Œä¸å­˜åœ¨æ—¶è¿”å›ž Noneã€‚
    |                     ^^
100 |
101 |         Raises:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/resource_service.py:114:20
    |
112 |     # --------------------------------------------------------------------- #
113 |     def sanitize(self, payload: Mapping[str, Any]) -> dict[str, Any]:
114 |         """æ¸…ç†åŽŸå§‹è¯·æ±‚æ•°æ®ï¼Œé»˜è®¤è½¬æ¢ä¸ºæ™®é€šå­—å…¸ã€‚.
    |                            ^^
115 |
116 |         Args:
    |

ARG002 Unused method argument: `resource`
   --> app/services/form_service/resource_service.py:125:49
    |
123 |         return dict(payload or {})
124 |
125 |     def validate(self, data: dict[str, Any], *, resource: TModel | None) -> ServiceResult[dict[str, Any]]:
    |                                                 ^^^^^^^^
126 |         """å­ç±»åº”è¯¥å®žçŽ°å…·ä½“æ ¡éªŒé€»è¾‘ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/form_service/resource_service.py:130:31
    |
128 |         Args:
129 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
130 |             resource: å·²å­˜åœ¨çš„èµ„æºå®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                                       ^^
131 |
132 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/form_service/resource_service.py:130:36
    |
128 |         Args:
129 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
130 |             resource: å·²å­˜åœ¨çš„èµ„æºå®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                                                 ^^
131 |
132 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/resource_service.py:130:37
    |
128 |         Args:
129 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
130 |             resource: å·²å­˜åœ¨çš„èµ„æºå®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                                                   ^^
131 |
132 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/resource_service.py:133:17
    |
132 |         Returns:
133 |             æ ¡éªŒç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žæ¸…ç†åŽçš„æ•°æ®ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
    |                     ^^
134 |
135 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/resource_service.py:133:29
    |
132 |         Returns:
133 |             æ ¡éªŒç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žæ¸…ç†åŽçš„æ•°æ®ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
    |                                             ^^
134 |
135 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/resource_service.py:139:21
    |
138 |     def assign(self, instance: TModel, data: dict[str, Any]) -> None:
139 |         """å°†æ•°æ®å†™å…¥æ¨¡åž‹å®žä¾‹ï¼Œå¿…é¡»ç”±å­ç±»å®žçŽ°ã€‚.
    |                              ^^
140 |
141 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/resource_service.py:146:26
    |
145 |         Returns:
146 |             None: èµ‹å€¼å®ŒæˆåŽè¿”å›žï¼Œå…·ä½“é€»è¾‘ç”±å­ç±»å®žçŽ°ã€‚
    |                                 ^^
147 |
148 |         Raises:
    |

ARG002 Unused method argument: `instance`
   --> app/services/form_service/resource_service.py:154:26
    |
152 |         raise NotImplementedError
153 |
154 |     def after_save(self, instance: TModel, data: dict[str, Any]) -> None:
    |                          ^^^^^^^^
155 |         """ä¿å­˜æˆåŠŸåŽçš„é’©å­ï¼ˆå¯é€‰ï¼‰ã€‚.
    |

ARG002 Unused method argument: `data`
   --> app/services/form_service/resource_service.py:154:44
    |
152 |         raise NotImplementedError
153 |
154 |     def after_save(self, instance: TModel, data: dict[str, Any]) -> None:
    |                                            ^^^^
155 |         """ä¿å­˜æˆåŠŸåŽçš„é’©å­ï¼ˆå¯é€‰ï¼‰ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/form_service/resource_service.py:155:20
    |
154 |     def after_save(self, instance: TModel, data: dict[str, Any]) -> None:
155 |         """ä¿å­˜æˆåŠŸåŽçš„é’©å­ï¼ˆå¯é€‰ï¼‰ã€‚.
    |                            ^^
156 |
157 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/form_service/resource_service.py:155:23
    |
154 |     def after_save(self, instance: TModel, data: dict[str, Any]) -> None:
155 |         """ä¿å­˜æˆåŠŸåŽçš„é’©å­ï¼ˆå¯é€‰ï¼‰ã€‚.
    |                                  ^^
156 |
157 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/resource_service.py:162:28
    |
161 |         Returns:
162 |             None: é»˜è®¤ä¸è¿›è¡Œä»»ä½•æ“ä½œï¼Œå­ç±»å¯è¦†ç›–ã€‚
    |                                     ^^
163 |
164 |         """
    |

ARG002 Unused method argument: `resource`
   --> app/services/form_service/resource_service.py:167:32
    |
165 |         return
166 |
167 |     def build_context(self, *, resource: TModel | None) -> dict[str, Any]:
    |                                ^^^^^^^^
168 |         """æä¾›æ¨¡æ¿æ¸²æŸ“æ‰€éœ€çš„é¢å¤–ä¸Šä¸‹æ–‡ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/resource_service.py:171:27
    |
170 |         Args:
171 |             resource: èµ„æºå®žä¾‹ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                               ^^
172 |
173 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/form_service/resource_service.py:185:20
    |
183 |         """åˆ›å»ºæˆ–æ›´æ–°èµ„æºã€‚.
184 |
185 |         æ‰§è¡Œå®Œæ•´çš„èµ„æºä¿å­˜æµç¨‹ï¼šæ¸…ç†æ•°æ® -> æ ¡éªŒ -> èµ‹å€¼ -> ä¿å­˜ -> åŽç½®é’©å­ã€‚
    |                               ^^
186 |
187 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/form_service/resource_service.py:189:29
    |
187 |         Args:
188 |             payload: åŽŸå§‹è¯·æ±‚æ•°æ®ã€‚
189 |             resource: å·²å­˜åœ¨çš„å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                                   ^^
190 |
191 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/form_service/resource_service.py:189:34
    |
187 |         Args:
188 |             payload: åŽŸå§‹è¯·æ±‚æ•°æ®ã€‚
189 |             resource: å·²å­˜åœ¨çš„å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                                             ^^
190 |
191 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/resource_service.py:189:35
    |
187 |         Args:
188 |             payload: åŽŸå§‹è¯·æ±‚æ•°æ®ã€‚
189 |             resource: å·²å­˜åœ¨çš„å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                                               ^^
190 |
191 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/resource_service.py:192:29
    |
191 |         Returns:
192 |             ServiceResult å®žä¾‹ï¼ŒæˆåŠŸæ—¶åŒ…å«ä¿å­˜åŽçš„èµ„æºå¯¹è±¡ï¼Œå¤±è´¥æ—¶åŒ…å«é”™è¯¯ä¿¡æ¯ã€‚
    |                               ^^
193 |
194 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/resource_service.py:192:43
    |
191 |         Returns:
192 |             ServiceResult å®žä¾‹ï¼ŒæˆåŠŸæ—¶åŒ…å«ä¿å­˜åŽçš„èµ„æºå¯¹è±¡ï¼Œå¤±è´¥æ—¶åŒ…å«é”™è¯¯ä¿¡æ¯ã€‚
    |                                                           ^^
193 |
194 |         """
    |

E501 Line too long (131 > 120)
   --> app/services/form_service/resource_service.py:198:117
    |
196 | â€¦rce)
197 | â€¦
198 | â€¦"éªŒè¯å¤±è´¥", message_key=validation.message_key, extra=validation.extra)
    |                                                              ^^^^^^^^^^^
199 | â€¦
200 | â€¦
    |

G004 Logging statement uses f-string
   --> app/services/form_service/resource_service.py:208:42
    |
206 |         except SQLAlchemyError as exc:
207 |             db.session.rollback()
208 |             current_app.logger.exception(f"èµ„æºè¡¨å•ä¿å­˜å¤±è´¥: {self.__class__.__name__}")
    |                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
209 |             return ServiceResult.fail("ä¿å­˜å¤±è´¥ï¼Œè¯·ç¨åŽå†è¯•", extra={"exception": str(exc)})
    |
help: Convert to lazy `%` formatting

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/resource_service.py:209:44
    |
207 |             db.session.rollback()
208 |             current_app.logger.exception(f"èµ„æºè¡¨å•ä¿å­˜å¤±è´¥: {self.__class__.__name__}")
209 |             return ServiceResult.fail("ä¿å­˜å¤±è´¥ï¼Œè¯·ç¨åŽå†è¯•", extra={"exception": str(exc)})
    |                                                ^^
210 |
211 |         self.after_save(instance, validation.data or sanitized)
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/form_service/scheduler_job_service.py:3:17
  |
1 | """å®šæ—¶ä»»åŠ¡è¡¨å•æœåŠ¡ã€‚.
2 |
3 | æä¾›å†…ç½®å®šæ—¶ä»»åŠ¡è§¦å‘å™¨çš„ç¼–è¾‘åŠŸèƒ½ï¼Œæ”¯æŒ Cronã€Interval å’Œ Date ä¸‰ç§è§¦å‘å™¨ç±»åž‹ã€‚
  |                                 ^^
4 | """
  |

A004 Import `SystemError` is shadowing a Python builtin
  --> app/services/form_service/scheduler_job_service.py:15:39
   |
14 | from app.constants.scheduler_jobs import BUILTIN_TASK_IDS
15 | from app.errors import NotFoundError, SystemError, ValidationError
   |                                       ^^^^^^^^^^^
16 | from app.scheduler import get_scheduler
17 | from app.services.form_service.resource_service import BaseResourceService, ServiceResult
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/scheduler_job_service.py:28:17
   |
26 |     """å®šæ—¶ä»»åŠ¡è¡¨å•æœåŠ¡ã€‚.
27 |
28 |     è´Ÿè´£å†…ç½®ä»»åŠ¡è§¦å‘å™¨çš„ç¼–è¾‘ï¼Œæ”¯æŒ Cronã€Interval å’Œ Date ä¸‰ç§è§¦å‘å™¨ç±»åž‹ã€‚
   |                             ^^
29 |
30 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/scheduler_job_service.py:31:20
   |
30 |     Attributes:
31 |         model: å ä½æ¨¡åž‹ï¼Œä¸ä¼šæŒä¹…åŒ–åˆ°æ•°æ®åº“ã€‚
   |                        ^^
32 |
33 |     Example:
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/scheduler_job_service.py:41:23
   |
39 |     """
40 |
41 |     model = dict  # å ä½ï¼Œä¸ä¼šæŒä¹…åŒ–
   |                         ^^
42 |
43 |     def sanitize(self, payload: Mapping[str, Any]) -> dict[str, Any]:
   |

PGH003 Use specific rule codes when ignoring type issues
  --> app/services/form_service/scheduler_job_service.py:71:38
   |
70 |         """
71 |         scheduler = get_scheduler()  # type: ignore
   |                                      ^^^^^^^^^^^^^^
72 |         if not scheduler.running:
73 |             log_error("è°ƒåº¦å™¨æœªå¯åŠ¨ï¼Œæ— æ³•åŠ è½½ä»»åŠ¡", module="scheduler")
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/scheduler_job_service.py:73:30
   |
71 |         scheduler = get_scheduler()  # type: ignore
72 |         if not scheduler.running:
73 |             log_error("è°ƒåº¦å™¨æœªå¯åŠ¨ï¼Œæ— æ³•åŠ è½½ä»»åŠ¡", module="scheduler")
   |                                    ^^
74 |             msg = "è°ƒåº¦å™¨æœªå¯åŠ¨"
75 |             raise SystemError(msg)
   |

ARG002 Unused method argument: `data`
   --> app/services/form_service/scheduler_job_service.py:127:52
    |
125 |         scheduler.modify_job(job.id, trigger=data["trigger"])
126 |
127 |     def after_save(self, instance: dict[str, Any], data: dict[str, Any]) -> None:
    |                                                    ^^^^
128 |         """è§¦å‘å™¨æ›´æ–°åŽçš„å–„åŽå¤„ç†ï¼Œè´Ÿè´£è®°å½•ä¸‹ä¸€æ¬¡æ‰§è¡Œæ—¶é—´ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/scheduler_job_service.py:128:23
    |
127 |     def after_save(self, instance: dict[str, Any], data: dict[str, Any]) -> None:
128 |         """è§¦å‘å™¨æ›´æ–°åŽçš„å–„åŽå¤„ç†ï¼Œè´Ÿè´£è®°å½•ä¸‹ä¸€æ¬¡æ‰§è¡Œæ—¶é—´ã€‚.
    |                                  ^^
129 |
130 |         Args:
    |

E501 Line too long (122 > 120)
   --> app/services/form_service/scheduler_job_service.py:149:121
    |
147 |         )
148 |
149 |     def upsert(self, payload: Mapping[str, Any], resource: dict[str, Any] | None = None) -> ServiceResult[dict[str, Any]]:
    |                                                                                                                         ^^
150 |         """æ›´æ–°å†…ç½®ä»»åŠ¡çš„è§¦å‘å™¨é…ç½®ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/scheduler_job_service.py:157:52
    |
156 |         Returns:
157 |             ServiceResult[dict[str, Any]]: æˆåŠŸæ—¶è¿”å›žä¸Šä¸‹æ–‡ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
    |                                                            ^^
158 |
159 |         """
    |

E501 Line too long (131 > 120)
   --> app/services/form_service/scheduler_job_service.py:163:117
    |
161 | â€¦rce)
162 | â€¦
163 | â€¦"éªŒè¯å¤±è´¥", message_key=validation.message_key, extra=validation.extra)
    |                                                              ^^^^^^^^^^^
164 | â€¦
165 | â€¦
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/form_service/scheduler_job_service.py:172:16
    |
170 |         except ValidationError:
171 |             raise
172 |         except Exception as exc:
    |                ^^^^^^^^^
173 |             log_error("æ›´æ–°ä»»åŠ¡è§¦å‘å™¨å¤±è´¥", module="scheduler", job_id=resource["job"].id, error=str(exc))
174 |             return ServiceResult.fail("æ›´æ–°ä»»åŠ¡è§¦å‘å™¨å¤±è´¥", extra={"exception": str(exc)})
    |

C901 `_build_trigger` is too complex (29 > 10)
   --> app/services/form_service/scheduler_job_service.py:179:9
    |
177 |         return ServiceResult.ok(resource)
178 |
179 |     def _build_trigger(self, data: Mapping[str, Any]) -> CronTrigger | IntervalTrigger | DateTrigger | None:
    |         ^^^^^^^^^^^^^^
180 |         """æ ¹æ®è¡¨å•æ•°æ®æž„å»º APScheduler è§¦å‘å™¨ã€‚.
    |

PLR0911 Too many return statements (10 > 6)
   --> app/services/form_service/scheduler_job_service.py:179:9
    |
177 |         return ServiceResult.ok(resource)
178 |
179 |     def _build_trigger(self, data: Mapping[str, Any]) -> CronTrigger | IntervalTrigger | DateTrigger | None:
    |         ^^^^^^^^^^^^^^
180 |         """æ ¹æ®è¡¨å•æ•°æ®æž„å»º APScheduler è§¦å‘å™¨ã€‚.
    |

PLR0912 Too many branches (25 > 12)
   --> app/services/form_service/scheduler_job_service.py:179:9
    |
177 |         return ServiceResult.ok(resource)
178 |
179 |     def _build_trigger(self, data: Mapping[str, Any]) -> CronTrigger | IntervalTrigger | DateTrigger | None:
    |         ^^^^^^^^^^^^^^
180 |         """æ ¹æ®è¡¨å•æ•°æ®æž„å»º APScheduler è§¦å‘å™¨ã€‚.
    |

PLR0915 Too many statements (70 > 50)
   --> app/services/form_service/scheduler_job_service.py:179:9
    |
177 |         return ServiceResult.ok(resource)
178 |
179 |     def _build_trigger(self, data: Mapping[str, Any]) -> CronTrigger | IntervalTrigger | DateTrigger | None:
    |         ^^^^^^^^^^^^^^
180 |         """æ ¹æ®è¡¨å•æ•°æ®æž„å»º APScheduler è§¦å‘å™¨ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/scheduler_job_service.py:186:74
    |
185 |         Returns:
186 |             CronTrigger | IntervalTrigger | DateTrigger | None: æž„å»ºæˆåŠŸè¿”å›žè§¦å‘å™¨ï¼Œå¦åˆ™è¿”å›ž Noneã€‚
    |                                                                                   ^^
187 |
188 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `pick`
   --> app/services/form_service/scheduler_job_service.py:196:37
    |
194 |             parts: list[str] = expr.split() if expr else []
195 |
196 |             def pick(*keys: str) -> Any:
    |                                     ^^^
197 |                 for key in keys:
198 |                     value = data.get(key)
    |

PLR2004 Magic value used in comparison, consider replacing `7` with a constant variable
   --> app/services/form_service/scheduler_job_service.py:212:34
    |
211 |             try:
212 |                 if len(parts) == 7:
    |                                  ^
213 |                     second, minute, hour, day, month, day_of_week, year = [
214 |                         pick_value or part for pick_value, part in zip(
    |

PLR2004 Magic value used in comparison, consider replacing `6` with a constant variable
   --> app/services/form_service/scheduler_job_service.py:218:36
    |
216 |                         )
217 |                     ]
218 |                 elif len(parts) == 6:
    |                                    ^
219 |                     second, minute, hour, day, month, day_of_week = [
220 |                         pick_value or part for pick_value, part in zip(
    |

PLR2004 Magic value used in comparison, consider replacing `5` with a constant variable
   --> app/services/form_service/scheduler_job_service.py:224:36
    |
222 |                         )
223 |                     ]
224 |                 elif len(parts) == 5:
    |                                    ^
225 |                     minute, hour, day, month, day_of_week = [
226 |                         pick_value or part for pick_value, part in zip(
    |

S110 `try`-`except`-`pass` detected, consider logging the exception
   --> app/services/form_service/scheduler_job_service.py:230:13
    |
228 |                           )
229 |                       ]
230 | /             except Exception:
231 | |                 pass
    | |____________________^
232 |
233 |               if year is not None:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/form_service/scheduler_job_service.py:230:20
    |
228 |                         )
229 |                     ]
230 |             except Exception:
    |                    ^^^^^^^^^
231 |                 pass
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/form_service/scheduler_job_service.py:251:20
    |
249 |                 cron_kwargs["timezone"] = "Asia/Shanghai"
250 |                 return CronTrigger(**cron_kwargs)
251 |             except Exception as exc:
    |                    ^^^^^^^^^
252 |                 log_error("CronTrigger æž„å»ºå¤±è´¥", module="scheduler", error=str(exc))
253 |                 return None
    |

S112 `try`-`except`-`continue` detected, consider logging the exception
   --> app/services/form_service/scheduler_job_service.py:265:17
    |
263 |                       if converted > 0:
264 |                           kwargs[key] = converted
265 | /                 except Exception:
266 | |                     continue
    | |____________________________^
267 |               if not kwargs:
268 |                   return None
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/form_service/scheduler_job_service.py:265:24
    |
263 |                     if converted > 0:
264 |                         kwargs[key] = converted
265 |                 except Exception:
    |                        ^^^^^^^^^
266 |                     continue
267 |             if not kwargs:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/form_service/scheduler_job_service.py:271:20
    |
269 |             try:
270 |                 return IntervalTrigger(**kwargs)
271 |             except Exception as exc:
    |                    ^^^^^^^^^
272 |                 log_error("IntervalTrigger æž„å»ºå¤±è´¥", module="scheduler", error=str(exc))
273 |                 return None
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/form_service/scheduler_job_service.py:282:20
    |
280 |             try:
281 |                 dt = time_utils.to_utc(str(run_date))
282 |             except Exception:
    |                    ^^^^^^^^^
283 |                 dt = None
284 |             if dt is None:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/form_service/scheduler_job_service.py:288:20
    |
286 |             try:
287 |                 return DateTrigger(run_date=dt)
288 |             except Exception as exc:
    |                    ^^^^^^^^^
289 |                 log_error("DateTrigger æž„å»ºå¤±è´¥", module="scheduler", error=str(exc))
290 |                 return None
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/form_service/tag_service.py:53:31
   |
51 |         Args:
52 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
53 |             resource: å·²å­˜åœ¨çš„æ ‡ç­¾å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                       ^^
54 |
55 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/form_service/tag_service.py:53:36
   |
51 |         Args:
52 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
53 |             resource: å·²å­˜åœ¨çš„æ ‡ç­¾å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                                 ^^
54 |
55 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/tag_service.py:53:37
   |
51 |         Args:
52 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
53 |             resource: å·²å­˜åœ¨çš„æ ‡ç­¾å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                                   ^^
54 |
55 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/tag_service.py:56:17
   |
55 |         Returns:
56 |             æ ¡éªŒç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žè§„èŒƒåŒ–çš„æ•°æ®ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
   |                     ^^
57 |
58 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/tag_service.py:56:29
   |
55 |         Returns:
56 |             æ ¡éªŒç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žè§„èŒƒåŒ–çš„æ•°æ®ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
   |                                             ^^
57 |
58 |         """
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/tag_service.py:81:47
   |
79 |             query = query.filter(Tag.id != resource.id)
80 |         if query.first():
81 |             return ServiceResult.fail("æ ‡ç­¾ä»£ç å·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨å…¶ä»–åç§°")
   |                                                      ^^
82 |
83 |         return ServiceResult.ok(normalized)
   |

ARG002 Unused method argument: `resource`
   --> app/services/form_service/tag_service.py:125:32
    |
123 |         )
124 |
125 |     def build_context(self, *, resource: Tag | None) -> dict[str, Any]:
    |                                ^^^^^^^^
126 |         """æž„å»ºæ¨¡æ¿æ¸²æŸ“ä¸Šä¸‹æ–‡ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/tag_service.py:129:27
    |
128 |         Args:
129 |             resource: æ ‡ç­¾å®žä¾‹ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                               ^^
130 |
131 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/tag_service.py:156:31
    |
154 |         Args:
155 |             data: åŽŸå§‹æ•°æ®ã€‚
156 |             resource: å·²å­˜åœ¨çš„æ ‡ç­¾å®žä¾‹ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                                       ^^
157 |
158 |         Returns:
    |

PLR0911 Too many return statements (7 > 6)
   --> app/services/form_service/tag_service.py:175:9
    |
173 |         return normalized
174 |
175 |     def _coerce_bool(self, value: Any, *, default: bool) -> bool:
    |         ^^^^^^^^^^^^
176 |         """å°†å€¼è½¬æ¢ä¸ºå¸ƒå°”ç±»åž‹ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `value`
   --> app/services/form_service/tag_service.py:175:35
    |
173 |         return normalized
174 |
175 |     def _coerce_bool(self, value: Any, *, default: bool) -> bool:
    |                                   ^^^
176 |         """å°†å€¼è½¬æ¢ä¸ºå¸ƒå°”ç±»åž‹ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/tag_service.py:204:49
    |
202 |         """æä¾›æ ‡ç­¾æ¨¡åž‹çš„å ä½å®žä¾‹ã€‚.
203 |
204 |         Tag çš„æž„é€ å‡½æ•°è¦æ±‚ä¼ å…¥ name/display_name/categoryï¼Œ
    |                                                          ^^
205 |         å› æ­¤å‰ç«¯æ•°æ®å°šæœªèµ‹å€¼æ—¶ä½¿ç”¨é»˜è®¤å ä½å†…å®¹ï¼ŒéšåŽ assign ä¼šè¦†ç›–ã€‚
206 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/tag_service.py:205:28
    |
204 |         Tag çš„æž„é€ å‡½æ•°è¦æ±‚ä¼ å…¥ name/display_name/categoryï¼Œ
205 |         å› æ­¤å‰ç«¯æ•°æ®å°šæœªèµ‹å€¼æ—¶ä½¿ç”¨é»˜è®¤å ä½å†…å®¹ï¼ŒéšåŽ assign ä¼šè¦†ç›–ã€‚
    |                                               ^^
206 |         """
207 |         return Tag(
    |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/services/form_service/user_service.py:35:21
   |
33 |     model = User
34 |     USERNAME_PATTERN = re.compile(r"^[A-Za-z0-9_]{3,20}$")
35 |     ALLOWED_ROLES = {UserRole.ADMIN, UserRole.USER}
   |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
36 |     MESSAGE_USERNAME_EXISTS = "USERNAME_EXISTS"
37 |     MESSAGE_LAST_ADMIN_REQUIRED = "LAST_ADMIN_REQUIRED"
   |

C901 `validate` is too complex (11 > 10)
  --> app/services/form_service/user_service.py:51:9
   |
49 |         return sanitize_form_data(payload or {})
50 |
51 |     def validate(self, data: dict[str, Any], *, resource: User | None) -> ServiceResult[dict[str, Any]]:
   |         ^^^^^^^^
52 |         """æ ¡éªŒç”¨æˆ·æ•°æ®ã€‚.
   |

PLR0911 Too many return statements (8 > 6)
  --> app/services/form_service/user_service.py:51:9
   |
49 |         return sanitize_form_data(payload or {})
50 |
51 |     def validate(self, data: dict[str, Any], *, resource: User | None) -> ServiceResult[dict[str, Any]]:
   |         ^^^^^^^^
52 |         """æ ¡éªŒç”¨æˆ·æ•°æ®ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/form_service/user_service.py:58:31
   |
56 |         Args:
57 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
58 |             resource: å·²å­˜åœ¨çš„ç”¨æˆ·å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                       ^^
59 |
60 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/form_service/user_service.py:58:36
   |
56 |         Args:
57 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
58 |             resource: å·²å­˜åœ¨çš„ç”¨æˆ·å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                                 ^^
59 |
60 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/user_service.py:58:37
   |
56 |         Args:
57 |             data: æ¸…ç†åŽçš„æ•°æ®ã€‚
58 |             resource: å·²å­˜åœ¨çš„ç”¨æˆ·å®žä¾‹ï¼ˆç¼–è¾‘åœºæ™¯ï¼‰ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
   |                                                   ^^
59 |
60 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/user_service.py:61:17
   |
60 |         Returns:
61 |             æ ¡éªŒç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žè§„èŒƒåŒ–çš„æ•°æ®ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
   |                     ^^
62 |
63 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/user_service.py:61:29
   |
60 |         Returns:
61 |             æ ¡éªŒç»“æžœï¼ŒæˆåŠŸæ—¶è¿”å›žè§„èŒƒåŒ–çš„æ•°æ®ï¼Œå¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚
   |                                             ^^
62 |
63 |         """
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/form_service/user_service.py:70:56
   |
69 |         if not self.USERNAME_PATTERN.match(normalized["username"]):
70 |             return ServiceResult.fail("ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œé•¿åº¦ä¸º3-20ä½")
   |                                                                        ^^
71 |
72 |         if normalized["role"] not in self.ALLOWED_ROLES:
   |

ARG002 Unused method argument: `resource`
   --> app/services/form_service/user_service.py:141:32
    |
139 |         )
140 |
141 |     def build_context(self, *, resource: User | None) -> dict[str, Any]:
    |                                ^^^^^^^^
142 |         """æž„å»ºæ¨¡æ¿æ¸²æŸ“ä¸Šä¸‹æ–‡ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/user_service.py:145:27
    |
144 |         Args:
145 |             resource: ç”¨æˆ·å®žä¾‹ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                               ^^
146 |
147 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/user_service.py:166:31
    |
164 |         Args:
165 |             data: åŽŸå§‹æ•°æ®ã€‚
166 |             resource: å·²å­˜åœ¨çš„ç”¨æˆ·å®žä¾‹ï¼Œåˆ›å»ºæ—¶ä¸º Noneã€‚
    |                                       ^^
167 |
168 |         Returns:
    |

ANN202 Missing return type annotation for private function `_user_query`
   --> app/services/form_service/user_service.py:199:9
    |
197 |         return data.get("role") == UserRole.ADMIN and bool(data.get("is_active", True))
198 |
199 |     def _user_query(self):
    |         ^^^^^^^^^^^
200 |         """æš´éœ² user queryï¼Œä¾¿äºŽå•æµ‹æ³¨å…¥ã€‚."""
201 |         return User.query
    |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/user_service.py:200:25
    |
199 |     def _user_query(self):
200 |         """æš´éœ² user queryï¼Œä¾¿äºŽå•æµ‹æ³¨å…¥ã€‚."""
    |                           ^^
201 |         return User.query
    |

PLR0911 Too many return statements (7 > 6)
   --> app/services/form_service/user_service.py:203:9
    |
201 |         return User.query
202 |
203 |     def _coerce_bool(self, value: Any, *, default: bool) -> bool:
    |         ^^^^^^^^^^^^
204 |         """å°†å€¼è½¬æ¢ä¸ºå¸ƒå°”ç±»åž‹ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `value`
   --> app/services/form_service/user_service.py:203:35
    |
201 |         return User.query
202 |
203 |     def _coerce_bool(self, value: Any, *, default: bool) -> bool:
    |                                   ^^^
204 |         """å°†å€¼è½¬æ¢ä¸ºå¸ƒå°”ç±»åž‹ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/form_service/user_service.py:232:15
    |
230 |         """éªŒè¯å¯†ç å¼ºåº¦ã€‚.
231 |
232 |         å¯†ç å¿…é¡»æ»¡è¶³ï¼šè‡³å°‘8ä½ã€åŒ…å«å¤§å†™å­—æ¯ã€å°å†™å­—æ¯å’Œæ•°å­—ã€‚
    |                     ^^
233 |
234 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/form_service/user_service.py:238:24
    |
237 |         Returns:
238 |             éªŒè¯å¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ï¼ŒæˆåŠŸæ—¶è¿”å›ž Noneã€‚
    |                                   ^^
239 |
240 |         """
    |

PLR2004 Magic value used in comparison, consider replacing `8` with a constant variable
   --> app/services/form_service/user_service.py:241:28
    |
240 |         """
241 |         if len(password) < 8:
    |                            ^
242 |             return "å¯†ç é•¿åº¦è‡³å°‘8ä½"
243 |         if not any(char.isupper() for char in password):
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/instances/batch_service.py:1:12
  |
1 | """å®žä¾‹æ‰¹é‡æ“ä½œæœåŠ¡ï¼Œé›†ä¸­å¤„ç†åˆ›å»º/åˆ é™¤ç­‰äº‹åŠ¡ã€‚."""
  |                    ^^
2 |
3 | from __future__ import annotations
  |

A004 Import `SystemError` is shadowing a Python builtin
  --> app/services/instances/batch_service.py:12:24
   |
11 | from app import db
12 | from app.errors import SystemError, ValidationError
   |                        ^^^^^^^^^^^
13 | from app.models.account_change_log import AccountChangeLog
14 | from app.models.account_classification import AccountClassificationAssignment
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/instances/batch_service.py:36:21
   |
35 |     Returns:
36 |         åŒ…å«æ‰€æœ‰åˆ é™¤è®¡æ•°å™¨çš„å­—å…¸ï¼Œåˆå§‹å€¼å‡ä¸º 0ã€‚
   |                                 ^^
37 |
38 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/instances/batch_service.py:57:16
   |
55 |     """è´Ÿè´£æ‰¹é‡åˆ›å»ºå®žä¾‹çš„æœåŠ¡ã€‚.
56 |
57 |     æä¾›æ‰¹é‡åˆ›å»ºå®žä¾‹çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ•°æ®æ ¡éªŒã€é‡å¤æ£€æŸ¥å’Œæ‰¹é‡æ’å…¥ã€‚
   |                           ^^
58 |     """
   |

C901 `create_instances` is too complex (11 > 10)
  --> app/services/instances/batch_service.py:60:9
   |
58 |     """
59 |
60 |     def create_instances(
   |         ^^^^^^^^^^^^^^^^
61 |         self,
62 |         instances_data: list[dict[str, Any]],
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/instances/batch_service.py:68:15
   |
66 |         """æ‰¹é‡åˆ›å»ºå®žä¾‹ã€‚.
67 |
68 |         æ ¡éªŒå®žä¾‹æ•°æ®ï¼Œæ£€æŸ¥é‡å¤åç§°ï¼Œæ‰¹é‡æ’å…¥æ•°æ®åº“ã€‚
   |                     ^^
69 |
70 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/instances/batch_service.py:68:22
   |
66 |         """æ‰¹é‡åˆ›å»ºå®žä¾‹ã€‚.
67 |
68 |         æ ¡éªŒå®žä¾‹æ•°æ®ï¼Œæ£€æŸ¥é‡å¤åç§°ï¼Œæ‰¹é‡æ’å…¥æ•°æ®åº“ã€‚
   |                                   ^^
69 |
70 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/instances/batch_service.py:71:35
   |
70 |         Args:
71 |             instances_data: å®žä¾‹æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«å®žä¾‹çš„å­—æ®µä¿¡æ¯ã€‚
   |                                         ^^
72 |             operator_id: æ“ä½œè€…ç”¨æˆ· IDï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/instances/batch_service.py:72:34
   |
70 |         Args:
71 |             instances_data: å®žä¾‹æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«å®žä¾‹çš„å­—æ®µä¿¡æ¯ã€‚
72 |             operator_id: æ“ä½œè€…ç”¨æˆ· IDï¼Œå¯é€‰ã€‚
   |                                       ^^
73 |
74 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/instances/batch_service.py:75:22
   |
74 |         Returns:
75 |             åŒ…å«åˆ›å»ºç»“æžœçš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                               ^^
76 |             {
77 |                 'created_count': 3,
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/instances/batch_service.py:75:27
   |
74 |         Returns:
75 |             åŒ…å«åˆ›å»ºç»“æžœçš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                         ^^
76 |             {
77 |                 'created_count': 3,
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/instances/batch_service.py:106:25
    |
104 |             errors.append(f"å­˜åœ¨é‡å¤å®žä¾‹åç§°: {', '.join(duplicate_names)}")
105 |
106 |         # æŸ¥è¯¢æ•°æ®åº“ä¸­å·²å­˜åœ¨çš„å®žä¾‹åç§°ï¼Œé¿å…é‡å¤æ’å…¥
    |                                       ^^
107 |         payload_names = [
108 |             item.get("name")
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/instances/batch_service.py:213:16
    |
211 |     """è´Ÿè´£æ‰¹é‡åˆ é™¤å®žä¾‹åŠå…¶å…³è”æ•°æ®çš„æœåŠ¡ã€‚.
212 |
213 |     æä¾›æ‰¹é‡åˆ é™¤å®žä¾‹çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬çº§è”åˆ é™¤æ‰€æœ‰å…³è”æ•°æ®ã€‚
    |                           ^^
214 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/instances/batch_service.py:224:24
    |
222 |         """æ‰¹é‡åˆ é™¤å®žä¾‹åŠå…¶å…³è”æ•°æ®ã€‚.
223 |
224 |         åˆ é™¤æŒ‡å®šçš„å®žä¾‹åŠå…¶æ‰€æœ‰å…³è”æ•°æ®ï¼ŒåŒ…æ‹¬è´¦æˆ·æƒé™ã€åŒæ­¥è®°å½•ã€
    |                                       ^^
225 |         å®¹é‡ç»Ÿè®¡ã€æ ‡ç­¾å…³è”ç­‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/instances/batch_service.py:229:34
    |
227 |         Args:
228 |             instance_ids: å®žä¾‹ ID åˆ—è¡¨ã€‚
229 |             operator_id: æ“ä½œè€…ç”¨æˆ· IDï¼Œå¯é€‰ã€‚
    |                                       ^^
230 |
231 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/instances/batch_service.py:232:22
    |
231 |         Returns:
232 |             åŒ…å«åˆ é™¤ç»Ÿè®¡çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                               ^^
233 |             {
234 |                 'deleted_count': 2,
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/instances/batch_service.py:232:27
    |
231 |         Returns:
232 |             åŒ…å«åˆ é™¤ç»Ÿè®¡çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                         ^^
233 |             {
234 |                 'deleted_count': 2,
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/instances/batch_service.py:299:13
    |
297 |             stats["deleted_sync_data"] = stats["deleted_account_permissions"]
298 |
299 |             return stats
    |             ^^^^^^^^^^^^
300 |         except SQLAlchemyError as exc:
301 |             db.session.rollback()
    |

INP001 File `app/services/ledgers/database_ledger_service.py` is part of an implicit namespace package. Add an `__init__.py`.
--> app/services/ledgers/database_ledger_service.py:1:1

A004 Import `SystemError` is shadowing a Python builtin
  --> app/services/ledgers/database_ledger_service.py:16:39
   |
14 | from app import db
15 | from app.constants import SyncStatus
16 | from app.errors import NotFoundError, SystemError
   |                                       ^^^^^^^^^^^
17 | from app.models.database_size_stat import DatabaseSizeStat
18 | from app.models.instance import Instance
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `session`
  --> app/services/ledgers/database_ledger_service.py:35:36
   |
33 |     MAX_TREND_DAYS = 90
34 |
35 |     def __init__(self, *, session: Any | None = None) -> None:
   |                                    ^^^^^^^^^^
36 |         """åˆå§‹åŒ–æœåŠ¡ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/ledgers/database_ledger_service.py:39:39
   |
38 |         Args:
39 |             session: å¯é€‰çš„ SQLAlchemy ä¼šè¯ï¼Œé»˜è®¤ä½¿ç”¨å…¨å±€ db.sessionã€‚
   |                                            ^^
40 |
41 |         """
   |

D417 Missing argument description in the docstring for `get_ledger`: `tags`
  --> app/services/ledgers/database_ledger_service.py:44:9
   |
42 |         self.session = session or db.session
43 |
44 |     def get_ledger(
   |         ^^^^^^^^^^
45 |         self,
46 |         *,
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/ledgers/database_ledger_service.py:56:24
   |
55 |         Args:
56 |             search: å…³é”®å­—ï¼Œæ”¯æŒæ•°æ®åº“åç§°ã€å®žä¾‹åç§°ã€ä¸»æœºæ¨¡ç³ŠåŒ¹é…ã€‚
   |                           ^^
57 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œä¼ å…¥ all/ç©ºè¡¨ç¤ºä¸è¿‡æ»¤ã€‚
58 |             page: é¡µç ï¼Œèµ·å§‹ä¸º 1ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/ledgers/database_ledger_service.py:57:27
   |
55 |         Args:
56 |             search: å…³é”®å­—ï¼Œæ”¯æŒæ•°æ®åº“åç§°ã€å®žä¾‹åç§°ã€ä¸»æœºæ¨¡ç³ŠåŒ¹é…ã€‚
57 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œä¼ å…¥ all/ç©ºè¡¨ç¤ºä¸è¿‡æ»¤ã€‚
   |                                ^^
58 |             page: é¡µç ï¼Œèµ·å§‹ä¸º 1ã€‚
59 |             per_page: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ `DEFAULT_PAGINATION`ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/ledgers/database_ledger_service.py:58:21
   |
56 |             search: å…³é”®å­—ï¼Œæ”¯æŒæ•°æ®åº“åç§°ã€å®žä¾‹åç§°ã€ä¸»æœºæ¨¡ç³ŠåŒ¹é…ã€‚
57 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œä¼ å…¥ all/ç©ºè¡¨ç¤ºä¸è¿‡æ»¤ã€‚
58 |             page: é¡µç ï¼Œèµ·å§‹ä¸º 1ã€‚
   |                       ^^
59 |             per_page: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ `DEFAULT_PAGINATION`ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/ledgers/database_ledger_service.py:59:27
   |
57 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œä¼ å…¥ all/ç©ºè¡¨ç¤ºä¸è¿‡æ»¤ã€‚
58 |             page: é¡µç ï¼Œèµ·å§‹ä¸º 1ã€‚
59 |             per_page: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ `DEFAULT_PAGINATION`ã€‚
   |                               ^^
60 |
61 |         Returns:
   |

TRY300 Consider moving this statement to an `else` block
   --> app/services/ledgers/database_ledger_service.py:96:13
    |
 94 |               ]
 95 |
 96 | /             return {
 97 | |                 "items": rows,
 98 | |                 "total": total,
 99 | |                 "page": page,
100 | |                 "per_page": per_page,
101 | |             }
    | |_____________^
102 |           except Exception as exc:
103 |               log_error(
    |

D417 Missing argument description in the docstring for `iterate_all`: `tags`
   --> app/services/ledgers/database_ledger_service.py:112:9
    |
110 |             raise SystemError(msg) from exc
111 |
112 |     def iterate_all(
    |         ^^^^^^^^^^^
113 |         self,
114 |         *,
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/ledgers/database_ledger_service.py:119:20
    |
117 |         tags: list[str] | None = None,
118 |     ) -> Iterable[dict[str, Any]]:
119 |         """éåŽ†æ‰€æœ‰å°è´¦è®°å½•ï¼ˆç”¨äºŽå¯¼å‡ºï¼‰ã€‚.
    |                            ^^
120 |
121 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/ledgers/database_ledger_service.py:119:25
    |
117 |         tags: list[str] | None = None,
118 |     ) -> Iterable[dict[str, Any]]:
119 |         """éåŽ†æ‰€æœ‰å°è´¦è®°å½•ï¼ˆç”¨äºŽå¯¼å‡ºï¼‰ã€‚.
    |                                      ^^
120 |
121 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/ledgers/database_ledger_service.py:162:23
    |
160 |         Args:
161 |             database_id: InstanceDatabase ä¸»é”®ã€‚
162 |             days: æŸ¥è¯¢å¤©æ•°ï¼Œé»˜è®¤ 30 å¤©ï¼Œæœ€å¤§ 90 å¤©ã€‚
    |                           ^^
163 |
164 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/ledgers/database_ledger_service.py:162:31
    |
160 |         Args:
161 |             database_id: InstanceDatabase ä¸»é”®ã€‚
162 |             days: æŸ¥è¯¢å¤©æ•°ï¼Œé»˜è®¤ 30 å¤©ï¼Œæœ€å¤§ 90 å¤©ã€‚
    |                                       ^^
163 |
164 |         Returns:
    |

ANN202 Missing return type annotation for private function `_base_query`
   --> app/services/ledgers/database_ledger_service.py:217:9
    |
215 |         }
216 |
217 |     def _base_query(self):
    |         ^^^^^^^^^^^
218 |         """æž„é€ åŸºç¡€æŸ¥è¯¢ã€‚."""
219 |         return (
    |
help: Add return type annotation

ANN202 Missing return type annotation for private function `_apply_filters`
   --> app/services/ledgers/database_ledger_service.py:229:9
    |
227 |         )
228 |
229 |     def _apply_filters(
    |         ^^^^^^^^^^^^^^
230 |         self,
231 |         query,
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `query`
   --> app/services/ledgers/database_ledger_service.py:231:9
    |
229 |     def _apply_filters(
230 |         self,
231 |         query,
    |         ^^^^^
232 |         *,
233 |         search: str = "",
    |

ANN202 Missing return type annotation for private function `_with_latest_stats`
   --> app/services/ledgers/database_ledger_service.py:263:9
    |
261 |         return query
262 |
263 |     def _with_latest_stats(self, query):
    |         ^^^^^^^^^^^^^^^^^^
264 |         """ä¸ºæŸ¥è¯¢é™„åŠ æœ€æ–°å®¹é‡ä¿¡æ¯ã€‚."""
265 |         latest_stats = (
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `query`
   --> app/services/ledgers/database_ledger_service.py:263:34
    |
261 |         return query
262 |
263 |     def _with_latest_stats(self, query):
    |                                  ^^^^^
264 |         """ä¸ºæŸ¥è¯¢é™„åŠ æœ€æ–°å®¹é‡ä¿¡æ¯ã€‚."""
265 |         latest_stats = (
    |

ANN001 Missing type annotation for function argument `collected_at`
   --> app/services/ledgers/database_ledger_service.py:303:9
    |
301 |         record: InstanceDatabase,
302 |         instance: Instance,
303 |         collected_at,
    |         ^^^^^^^^^^^^
304 |         size_mb,
305 |         tags: list[dict[str, Any]] | None = None,
    |

ANN001 Missing type annotation for function argument `size_mb`
   --> app/services/ledgers/database_ledger_service.py:304:9
    |
302 |         instance: Instance,
303 |         collected_at,
304 |         size_mb,
    |         ^^^^^^^
305 |         tags: list[dict[str, Any]] | None = None,
306 |     ) -> dict[str, Any]:
    |

ANN001 Missing type annotation for function argument `collected_at`
   --> app/services/ledgers/database_ledger_service.py:365:36
    |
363 |         return mapping
364 |
365 |     def _resolve_sync_status(self, collected_at) -> dict[str, str]:
    |                                    ^^^^^^^^^^^^
366 |         """æ ¹æ®é‡‡é›†æ—¶é—´ç”ŸæˆåŒæ­¥çŠ¶æ€ã€‚."""
367 |         if not collected_at:
    |

PLR2004 Magic value used in comparison, consider replacing `6` with a constant variable
   --> app/services/ledgers/database_ledger_service.py:373:27
    |
371 |         delay_hours = (now - collected_at).total_seconds() / 3600
372 |
373 |         if delay_hours <= 6:
    |                           ^
374 |             return {"value": SyncStatus.COMPLETED, "label": "å·²æ›´æ–°", "variant": "success"}
375 |         if delay_hours <= 48:
    |

PLR2004 Magic value used in comparison, consider replacing `48` with a constant variable
   --> app/services/ledgers/database_ledger_service.py:375:27
    |
373 |         if delay_hours <= 6:
374 |             return {"value": SyncStatus.COMPLETED, "label": "å·²æ›´æ–°", "variant": "success"}
375 |         if delay_hours <= 48:
    |                           ^^
376 |             return {"value": SyncStatus.RUNNING, "label": "å¾…åˆ·æ–°", "variant": "warning"}
377 |         return {"value": SyncStatus.FAILED, "label": "è¶…æ—¶", "variant": "danger"}
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/ledgers/database_ledger_service.py:380:15
    |
379 |     def _format_size(self, size_mb: int | None) -> str:
380 |         """å°†å¤§å°ï¼ˆMBï¼‰æ ¼å¼åŒ–ä¸ºæ˜“è¯»æ–‡æœ¬ã€‚."""
    |                  ^^
381 |         if size_mb is None:
382 |             return "æœªé‡‡é›†"
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/ledgers/database_ledger_service.py:380:18
    |
379 |     def _format_size(self, size_mb: int | None) -> str:
380 |         """å°†å¤§å°ï¼ˆMBï¼‰æ ¼å¼åŒ–ä¸ºæ˜“è¯»æ–‡æœ¬ã€‚."""
    |                      ^^
381 |         if size_mb is None:
382 |             return "æœªé‡‡é›†"
    |

PLR2004 Magic value used in comparison, consider replacing `1024` with a constant variable
   --> app/services/ledgers/database_ledger_service.py:383:23
    |
381 |         if size_mb is None:
382 |             return "æœªé‡‡é›†"
383 |         if size_mb >= 1024:
    |                       ^^^^
384 |             size_gb = size_mb / 1024
385 |             return f"{size_gb:.2f} GB"
    |

D205 1 blank line required between summary line and description
 --> app/services/partition_management_service.py:1:1
  |
1 | / """åˆ†åŒºç®¡ç†æœåŠ¡
2 | | è´Ÿè´£åˆ›å»ºã€æ¸…ç†ä¸ŽæŸ¥è¯¢æ•°æ®åº“å®¹é‡ç›¸å…³è¡¨çš„åˆ†åŒºä¿¡æ¯.
3 | | """
  | |___^
4 |
5 |   from __future__ import annotations
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/partition_management_service.py:23:17
   |
21 | @dataclass(slots=True)
22 | class PartitionAction:
23 |     """è®°å½•åˆ†åŒºæ“ä½œçš„ç»“æžœï¼Œä¾¿äºŽç»“æž„åŒ–æ—¥å¿—ä¸Žè¿”å›žå€¼."""
   |                          ^^
24 |
25 |     table: str
   |

D107 Missing docstring in `__init__`
  --> app/services/partition_management_service.py:45:9
   |
43 |     """PostgreSQL åˆ†åŒºç®¡ç†æœåŠ¡."""
44 |
45 |     def __init__(self) -> None:
   |         ^^^^^^^^
46 |         self.tables: dict[str, dict[str, str]] = {
47 |             "stats": {
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/partition_management_service.py:83:15
   |
81 |         """åˆ›å»ºæŒ‡å®šæ—¥æœŸæ‰€åœ¨æœˆä»½çš„åˆ†åŒºã€‚.
82 |
83 |         ä¸ºå››å¼ ç›¸å…³è¡¨ï¼ˆdatabase_size_statsã€database_size_aggregationsã€
   |                     ^^
84 |         instance_size_statsã€instance_size_aggregationsï¼‰åˆ›å»ºæœˆåº¦åˆ†åŒºã€‚
85 |         å¦‚æžœåˆ†åŒºå·²å­˜åœ¨åˆ™è·³è¿‡ï¼Œå¦‚æžœåˆ›å»ºå¤±è´¥åˆ™å›žæ»šæ‰€æœ‰æ“ä½œã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/partition_management_service.py:84:55
   |
83 |         ä¸ºå››å¼ ç›¸å…³è¡¨ï¼ˆdatabase_size_statsã€database_size_aggregationsã€
84 |         instance_size_statsã€instance_size_aggregationsï¼‰åˆ›å»ºæœˆåº¦åˆ†åŒºã€‚
   |                                                        ^^
85 |         å¦‚æžœåˆ†åŒºå·²å­˜åœ¨åˆ™è·³è¿‡ï¼Œå¦‚æžœåˆ›å»ºå¤±è´¥åˆ™å›žæ»šæ‰€æœ‰æ“ä½œã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/partition_management_service.py:85:19
   |
83 |         ä¸ºå››å¼ ç›¸å…³è¡¨ï¼ˆdatabase_size_statsã€database_size_aggregationsã€
84 |         instance_size_statsã€instance_size_aggregationsï¼‰åˆ›å»ºæœˆåº¦åˆ†åŒºã€‚
85 |         å¦‚æžœåˆ†åŒºå·²å­˜åœ¨åˆ™è·³è¿‡ï¼Œå¦‚æžœåˆ›å»ºå¤±è´¥åˆ™å›žæ»šæ‰€æœ‰æ“ä½œã€‚
   |                             ^^
86 |
87 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/partition_management_service.py:88:33
   |
87 |         Args:
88 |             partition_date: åˆ†åŒºæ—¥æœŸï¼Œå°†åˆ›å»ºè¯¥æ—¥æœŸæ‰€åœ¨æœˆä»½çš„åˆ†åŒºã€‚
   |                                     ^^
89 |                 ä¾‹å¦‚ä¼ å…¥ 2025-11-15ï¼Œå°†åˆ›å»º 2025-11 æœˆä»½çš„åˆ†åŒºã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/partition_management_service.py:89:32
   |
87 |         Args:
88 |             partition_date: åˆ†åŒºæ—¥æœŸï¼Œå°†åˆ›å»ºè¯¥æ—¥æœŸæ‰€åœ¨æœˆä»½çš„åˆ†åŒºã€‚
89 |                 ä¾‹å¦‚ä¼ å…¥ 2025-11-15ï¼Œå°†åˆ›å»º 2025-11 æœˆä»½çš„åˆ†åŒºã€‚
   |                                    ^^
90 |
91 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/partition_management_service.py:92:24
   |
91 |         Returns:
92 |             åŒ…å«åˆ†åŒºåˆ›å»ºç»“æžœçš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                   ^^
93 |             {
94 |                 'partition_window': {
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/partition_management_service.py:92:29
   |
91 |         Returns:
92 |             åŒ…å«åˆ†åŒºåˆ›å»ºç»“æžœçš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                             ^^
93 |             {
94 |                 'partition_window': {
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:111:45
    |
110 |         Raises:
111 |             DatabaseError: å½“åˆ†åŒºåˆ›å»ºå¤±è´¥æˆ–æäº¤äº‹åŠ¡å¤±è´¥æ—¶æŠ›å‡ºï¼Œ
    |                                                              ^^
112 |                 åŒ…å«å¤±è´¥çš„åˆ†åŒºä¿¡æ¯å’Œé”™è¯¯è¯¦æƒ…ã€‚
    |

PLC0415 `import` should be at the top-level of a file
   --> app/services/partition_management_service.py:120:13
    |
119 |         for table_key, table_config in self.tables.items():
120 |             from app.utils.time_utils import time_utils
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
121 |             partition_name = f"{table_config['partition_prefix']}{time_utils.format_china_time(month_start, '%Y_%m')}"
122 |             if self._partition_exists(partition_name):
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:133:27
    |
131 |                 )
132 |                 log_info(
133 |                     "åˆ†åŒºå·²å­˜åœ¨ï¼Œè·³è¿‡åˆ›å»º",
    |                                ^^
134 |                     module=MODULE,
135 |                     partition_name=partition_name,
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/partition_management_service.py:183:20
    |
181 |                     exception=exc,
182 |                 )
183 |             except Exception as exc:  # pragma: no cover - é˜²å¾¡æ€§åˆ†æ”¯
    |                    ^^^^^^^^^
184 |                 failures.append(
185 |                     {
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:239:16
    |
237 |         """æ‰¹é‡åˆ›å»ºæœªæ¥å‡ ä¸ªæœˆçš„åˆ†åŒºã€‚.
238 |
239 |         ä»Žå½“å‰æœˆä»½å¼€å§‹ï¼Œåˆ›å»ºæœªæ¥æŒ‡å®šæœˆæ•°çš„åˆ†åŒºã€‚å¦‚æžœæŸä¸ªæœˆä»½çš„åˆ†åŒºåˆ›å»ºå¤±è´¥ï¼Œ
    |                       ^^
240 |         ä¼šç»§ç»­å°è¯•åˆ›å»ºå…¶ä»–æœˆä»½ï¼Œæœ€åŽæ”¶é›†æ‰€æœ‰é”™è¯¯å¹¶æŠ›å‡ºå¼‚å¸¸ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:239:42
    |
237 |         """æ‰¹é‡åˆ›å»ºæœªæ¥å‡ ä¸ªæœˆçš„åˆ†åŒºã€‚.
238 |
239 |         ä»Žå½“å‰æœˆä»½å¼€å§‹ï¼Œåˆ›å»ºæœªæ¥æŒ‡å®šæœˆæ•°çš„åˆ†åŒºã€‚å¦‚æžœæŸä¸ªæœˆä»½çš„åˆ†åŒºåˆ›å»ºå¤±è´¥ï¼Œ
    |                                                                           ^^
240 |         ä¼šç»§ç»­å°è¯•åˆ›å»ºå…¶ä»–æœˆä»½ï¼Œæœ€åŽæ”¶é›†æ‰€æœ‰é”™è¯¯å¹¶æŠ›å‡ºå¼‚å¸¸ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:240:20
    |
239 |         ä»Žå½“å‰æœˆä»½å¼€å§‹ï¼Œåˆ›å»ºæœªæ¥æŒ‡å®šæœˆæ•°çš„åˆ†åŒºã€‚å¦‚æžœæŸä¸ªæœˆä»½çš„åˆ†åŒºåˆ›å»ºå¤±è´¥ï¼Œ
240 |         ä¼šç»§ç»­å°è¯•åˆ›å»ºå…¶ä»–æœˆä»½ï¼Œæœ€åŽæ”¶é›†æ‰€æœ‰é”™è¯¯å¹¶æŠ›å‡ºå¼‚å¸¸ã€‚
    |                               ^^
241 |
242 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:243:37
    |
242 |         Args:
243 |             months_ahead: è¦åˆ›å»ºçš„æœªæ¥æœˆä»½æ•°é‡ï¼Œé»˜è®¤ä¸º 3 ä¸ªæœˆã€‚
    |                                               ^^
244 |
245 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:246:22
    |
245 |         Returns:
246 |             åŒ…å«åˆ›å»ºç»“æžœçš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                               ^^
247 |             {
248 |                 'months_processed': 3,
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/partition_management_service.py:246:27
    |
245 |         Returns:
246 |             åŒ…å«åˆ›å»ºç»“æžœçš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                         ^^
247 |             {
248 |                 'months_processed': 3,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:259:43
    |
258 |         Raises:
259 |             DatabaseError: å½“ä»»ä¸€æœˆä»½çš„åˆ†åŒºåˆ›å»ºå¤±è´¥æ—¶æŠ›å‡ºï¼Œ
    |                                                          ^^
260 |                 åŒ…å«æ‰€æœ‰å¤±è´¥çš„æœˆä»½ä¿¡æ¯å’Œå·²æˆåŠŸåˆ›å»ºçš„æœˆä»½åˆ—è¡¨ã€‚
    |

DTZ011 `datetime.date.today()` used
   --> app/services/partition_management_service.py:265:17
    |
263 |         created: list[dict[str, Any]] = []
264 |         issues: list[dict[str, Any]] = []
265 |         today = date.today()
    |                 ^^^^^^^^^^^^
266 |
267 |         for offset in range(months_ahead):
    |
help: Use `datetime.datetime.now(tz=...).date()` instead

BLE001 Do not catch blind exception: `Exception`
   --> app/services/partition_management_service.py:281:20
    |
279 |                     issues=exc.extra,
280 |                 )
281 |             except Exception as exc:
    |                    ^^^^^^^^^
282 |                 issues.append({"month": target_month.isoformat(), "message": str(exc)})
283 |                 log_error(
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:305:19
    |
304 |         åˆ é™¤æ‰€æœ‰æ—©äºŽä¿ç•™æœŸçš„åˆ†åŒºè¡¨ã€‚ä¿ç•™æœŸä»Žå½“å‰æ—¥æœŸå¾€å‰æŽ¨ç®—æŒ‡å®šæœˆæ•°ã€‚
305 |         å¦‚æžœä»»ä½•åˆ†åŒºåˆ é™¤å¤±è´¥ï¼Œä¼šå›žæ»šæ‰€æœ‰æ“ä½œå¹¶æŠ›å‡ºå¼‚å¸¸ã€‚
    |                             ^^
306 |
307 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:308:35
    |
307 |         Args:
308 |             retention_months: ä¿ç•™æœˆæ•°ï¼Œé»˜è®¤ä¸º 12 ä¸ªæœˆã€‚
    |                                       ^^
309 |                 ä¾‹å¦‚è®¾ç½®ä¸º 12ï¼Œåˆ™ä¿ç•™æœ€è¿‘ 12 ä¸ªæœˆçš„åˆ†åŒºï¼Œåˆ é™¤æ›´æ—©çš„åˆ†åŒºã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:309:25
    |
307 |         Args:
308 |             retention_months: ä¿ç•™æœˆæ•°ï¼Œé»˜è®¤ä¸º 12 ä¸ªæœˆã€‚
309 |                 ä¾‹å¦‚è®¾ç½®ä¸º 12ï¼Œåˆ™ä¿ç•™æœ€è¿‘ 12 ä¸ªæœˆçš„åˆ†åŒºï¼Œåˆ é™¤æ›´æ—©çš„åˆ†åŒºã€‚
    |                              ^^
310 |
311 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:309:40
    |
307 |         Args:
308 |             retention_months: ä¿ç•™æœˆæ•°ï¼Œé»˜è®¤ä¸º 12 ä¸ªæœˆã€‚
309 |                 ä¾‹å¦‚è®¾ç½®ä¸º 12ï¼Œåˆ™ä¿ç•™æœ€è¿‘ 12 ä¸ªæœˆçš„åˆ†åŒºï¼Œåˆ é™¤æ›´æ—©çš„åˆ†åŒºã€‚
    |                                                        ^^
310 |
311 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:312:22
    |
311 |         Returns:
312 |             åŒ…å«æ¸…ç†ç»“æžœçš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                               ^^
313 |             {
314 |                 'cutoff_date': '2024-11-01',
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/partition_management_service.py:312:27
    |
311 |         Returns:
312 |             åŒ…å«æ¸…ç†ç»“æžœçš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                         ^^
313 |             {
314 |                 'cutoff_date': '2024-11-01',
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:328:45
    |
327 |         Raises:
328 |             DatabaseError: å½“åˆ†åŒºåˆ é™¤å¤±è´¥æˆ–æäº¤äº‹åŠ¡å¤±è´¥æ—¶æŠ›å‡ºï¼Œ
    |                                                              ^^
329 |                 åŒ…å«å¤±è´¥çš„åˆ†åŒºä¿¡æ¯å’Œå·²åˆ é™¤çš„åˆ†åŒºåˆ—è¡¨ã€‚
    |

DTZ011 `datetime.date.today()` used
   --> app/services/partition_management_service.py:332:24
    |
331 |         """
332 |         cutoff_date = (date.today() - timedelta(days=retention_months * 31)).replace(day=1)
    |                        ^^^^^^^^^^^^
333 |         dropped: list[PartitionAction] = []
334 |         failures: list[dict[str, Any]] = []
    |
help: Use `datetime.datetime.now(tz=...).date()` instead

BLE001 Do not catch blind exception: `Exception`
   --> app/services/partition_management_service.py:372:24
    |
370 |                         exception=exc,
371 |                     )
372 |                 except Exception as exc:  # pragma: no cover - é˜²å¾¡æ€§åˆ†æ”¯
    |                        ^^^^^^^^^
373 |                     failures.append(
374 |                         {
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:426:31
    |
424 |         Returns:
425 |             åŒ…å«æœˆä»½å¼€å§‹å’Œç»“æŸæ—¥æœŸçš„å…ƒç»„ (month_start, month_end)ã€‚
426 |             month_start ä¸ºè¯¥æœˆç¬¬ä¸€å¤©ï¼Œmonth_end ä¸ºä¸‹æœˆç¬¬ä¸€å¤©ã€‚
    |                                     ^^
427 |
428 |         Example:
    |

PLR2004 Magic value used in comparison, consider replacing `12` with a constant variable
   --> app/services/partition_management_service.py:434:33
    |
432 |         """
433 |         month_start = target_date.replace(day=1)
434 |         if month_start.month == 12:
    |                                 ^^
435 |             month_end = month_start.replace(year=month_start.year + 1, month=1)
436 |         else:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:444:28
    |
443 |         Args:
444 |             table_key: è¡¨çš„é”®åï¼Œå¦‚ 'stats'ã€'aggregations'ã€‚
    |                                ^^
445 |             table_config: è¡¨é…ç½®å­—å…¸ï¼ŒåŒ…å« table_nameã€partition_prefix ç­‰ä¿¡æ¯ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:445:32
    |
443 |         Args:
444 |             table_key: è¡¨çš„é”®åï¼Œå¦‚ 'stats'ã€'aggregations'ã€‚
445 |             table_config: è¡¨é…ç½®å­—å…¸ï¼ŒåŒ…å« table_nameã€partition_prefix ç­‰ä¿¡æ¯ã€‚
    |                                     ^^
446 |
447 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:448:19
    |
447 |         Returns:
448 |             åˆ†åŒºä¿¡æ¯åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«åˆ†åŒºåç§°ã€å¤§å°ã€è®°å½•æ•°ã€æ—¥æœŸã€çŠ¶æ€ç­‰ä¿¡æ¯ã€‚
    |                         ^^
449 |
450 |         Raises:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/partition_management_service.py:496:20
    |
494 |                     },
495 |                 )
496 |             except Exception as exc:  # pragma: no cover - å•æ¡è®°å½•å¤±è´¥ä¸å½±å“æ€»ä½“
    |                    ^^^^^^^^^
497 |                 log_warning(
498 |                     "å¤„ç†å•ä¸ªåˆ†åŒºä¿¡æ¯å¤±è´¥",
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:521:26
    |
520 |         Returns:
521 |             å¦‚æžœåˆ†åŒºå­˜åœ¨è¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚
    |                                  ^^
522 |
523 |         Raises:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:544:30
    |
543 |         Args:
544 |             cutoff_date: æˆªæ­¢æ—¥æœŸï¼Œæ—©äºŽæ­¤æ—¥æœŸçš„åˆ†åŒºå°†è¢«æ¸…ç†ã€‚
    |                                  ^^
545 |             table_config: è¡¨é…ç½®å­—å…¸ï¼ŒåŒ…å« table_nameã€partition_prefix ç­‰ä¿¡æ¯ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:545:32
    |
543 |         Args:
544 |             cutoff_date: æˆªæ­¢æ—¥æœŸï¼Œæ—©äºŽæ­¤æ—¥æœŸçš„åˆ†åŒºå°†è¢«æ¸…ç†ã€‚
545 |             table_config: è¡¨é…ç½®å­—å…¸ï¼ŒåŒ…å« table_nameã€partition_prefix ç­‰ä¿¡æ¯ã€‚
    |                                     ^^
546 |
547 |         Returns:
    |

DTZ007 Naive datetime constructed using `datetime.datetime.strptime()` without %z
   --> app/services/partition_management_service.py:580:34
    |
578 |                 continue
579 |             try:
580 |                 partition_date = datetime.strptime(date_str, "%Y/%m/%d").date()
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
581 |             except ValueError:
582 |                 continue
    |
help: Call `.replace(tzinfo=<timezone>)` or `.astimezone()` to convert to an aware datetime

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:591:34
    |
590 |         Args:
591 |             partition_name: åˆ†åŒºè¡¨åç§°ï¼Œå¦‚ 'database_size_stats_2025_11'ã€‚
    |                                       ^^
592 |             prefix: åˆ†åŒºå‰ç¼€ï¼Œå¦‚ 'database_size_stats_'ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:592:25
    |
590 |         Args:
591 |             partition_name: åˆ†åŒºè¡¨åç§°ï¼Œå¦‚ 'database_size_stats_2025_11'ã€‚
592 |             prefix: åˆ†åŒºå‰ç¼€ï¼Œå¦‚ 'database_size_stats_'ã€‚
    |                             ^^
593 |
594 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:595:18
    |
594 |         Returns:
595 |             æ—¥æœŸå­—ç¬¦ä¸²ï¼Œæ ¼å¼ä¸º 'YYYY/MM/DD'ï¼Œå¦‚ '2025/11/01'ã€‚
    |                       ^^
596 |             å¦‚æžœè§£æžå¤±è´¥è¿”å›ž Noneã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:595:35
    |
594 |         Returns:
595 |             æ—¥æœŸå­—ç¬¦ä¸²ï¼Œæ ¼å¼ä¸º 'YYYY/MM/DD'ï¼Œå¦‚ '2025/11/01'ã€‚
    |                                            ^^
596 |             å¦‚æžœè§£æžå¤±è´¥è¿”å›ž Noneã€‚
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/partition_management_service.py:602:13
    |
600 |             date_part = partition_name.replace(prefix, "")
601 |             year, month, *_ = date_part.split("_")
602 |             return f"{year}/{month}/01"
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
603 |         except ValueError:
604 |             return None
    |

S608 Possible SQL injection vector through string-based query construction
   --> app/services/partition_management_service.py:616:17
    |
615 |         """
616 |         query = f"SELECT COUNT(*) FROM {partition_name};"
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
617 |         try:
618 |             result = db.session.execute(text(query)).scalar()
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:633:28
    |
632 |         Args:
633 |             date_str: æ—¥æœŸå­—ç¬¦ä¸²ï¼Œæ ¼å¼ä¸º 'YYYY/MM/DD'ã€‚
    |                                 ^^
634 |
635 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/partition_management_service.py:636:17
    |
635 |         Returns:
636 |             åˆ†åŒºçŠ¶æ€ï¼š'current'ï¼ˆå½“å‰æœˆï¼‰ã€'past'ï¼ˆè¿‡åŽ»æœˆï¼‰ã€
    |                     ^^
637 |             'future'ï¼ˆæœªæ¥æœˆï¼‰æˆ– 'unknown'ï¼ˆæ— æ³•è§£æžï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/partition_management_service.py:636:27
    |
635 |         Returns:
636 |             åˆ†åŒºçŠ¶æ€ï¼š'current'ï¼ˆå½“å‰æœˆï¼‰ã€'past'ï¼ˆè¿‡åŽ»æœˆï¼‰ã€
    |                                ^^
637 |             'future'ï¼ˆæœªæ¥æœˆï¼‰æˆ– 'unknown'ï¼ˆæ— æ³•è§£æžï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/partition_management_service.py:636:31
    |
635 |         Returns:
636 |             åˆ†åŒºçŠ¶æ€ï¼š'current'ï¼ˆå½“å‰æœˆï¼‰ã€'past'ï¼ˆè¿‡åŽ»æœˆï¼‰ã€
    |                                        ^^
637 |             'future'ï¼ˆæœªæ¥æœˆï¼‰æˆ– 'unknown'ï¼ˆæ— æ³•è§£æžï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/partition_management_service.py:636:39
    |
635 |         Returns:
636 |             åˆ†åŒºçŠ¶æ€ï¼š'current'ï¼ˆå½“å‰æœˆï¼‰ã€'past'ï¼ˆè¿‡åŽ»æœˆï¼‰ã€
    |                                                  ^^
637 |             'future'ï¼ˆæœªæ¥æœˆï¼‰æˆ– 'unknown'ï¼ˆæ— æ³•è§£æžï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/partition_management_service.py:636:43
    |
635 |         Returns:
636 |             åˆ†åŒºçŠ¶æ€ï¼š'current'ï¼ˆå½“å‰æœˆï¼‰ã€'past'ï¼ˆè¿‡åŽ»æœˆï¼‰ã€
    |                                                          ^^
637 |             'future'ï¼ˆæœªæ¥æœˆï¼‰æˆ– 'unknown'ï¼ˆæ— æ³•è§£æžï¼‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/partition_management_service.py:637:21
    |
635 |         Returns:
636 |             åˆ†åŒºçŠ¶æ€ï¼š'current'ï¼ˆå½“å‰æœˆï¼‰ã€'past'ï¼ˆè¿‡åŽ»æœˆï¼‰ã€
637 |             'future'ï¼ˆæœªæ¥æœˆï¼‰æˆ– 'unknown'ï¼ˆæ— æ³•è§£æžï¼‰ã€‚
    |                     ^^
638 |
639 |         """
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/partition_management_service.py:637:25
    |
635 |         Returns:
636 |             åˆ†åŒºçŠ¶æ€ï¼š'current'ï¼ˆå½“å‰æœˆï¼‰ã€'past'ï¼ˆè¿‡åŽ»æœˆï¼‰ã€
637 |             'future'ï¼ˆæœªæ¥æœˆï¼‰æˆ– 'unknown'ï¼ˆæ— æ³•è§£æžï¼‰ã€‚
    |                             ^^
638 |
639 |         """
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/partition_management_service.py:637:37
    |
635 |         Returns:
636 |             åˆ†åŒºçŠ¶æ€ï¼š'current'ï¼ˆå½“å‰æœˆï¼‰ã€'past'ï¼ˆè¿‡åŽ»æœˆï¼‰ã€
637 |             'future'ï¼ˆæœªæ¥æœˆï¼‰æˆ– 'unknown'ï¼ˆæ— æ³•è§£æžï¼‰ã€‚
    |                                           ^^
638 |
639 |         """
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/partition_management_service.py:637:42
    |
635 |         Returns:
636 |             åˆ†åŒºçŠ¶æ€ï¼š'current'ï¼ˆå½“å‰æœˆï¼‰ã€'past'ï¼ˆè¿‡åŽ»æœˆï¼‰ã€
637 |             'future'ï¼ˆæœªæ¥æœˆï¼‰æˆ– 'unknown'ï¼ˆæ— æ³•è§£æžï¼‰ã€‚
    |                                                     ^^
638 |
639 |         """
    |

DTZ007 Naive datetime constructed using `datetime.datetime.strptime()` without %z
   --> app/services/partition_management_service.py:643:30
    |
641 |             return "unknown"
642 |         try:
643 |             partition_date = datetime.strptime(date_str, "%Y/%m/%d").date()
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
644 |         except ValueError:
645 |             return "unknown"
    |
help: Call `.replace(tzinfo=<timezone>)` or `.astimezone()` to convert to an aware datetime

DTZ011 `datetime.date.today()` used
   --> app/services/partition_management_service.py:647:17
    |
645 |             return "unknown"
646 |
647 |         today = date.today()
    |                 ^^^^^^^^^^^^
648 |         current_month = today.replace(day=1)
    |
help: Use `datetime.datetime.now(tz=...).date()` instead

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:659:23
    |
657 |         """ä¸ºåˆ†åŒºè¡¨åˆ›å»ºå¿…è¦çš„ç´¢å¼•ã€‚.
658 |
659 |         æ ¹æ®è¡¨ç±»åž‹åˆ›å»ºä¸åŒçš„ç´¢å¼•ç»„åˆï¼Œä»¥ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ã€‚
    |                                     ^^
660 |
661 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:663:32
    |
661 |         Args:
662 |             partition_name: åˆ†åŒºè¡¨åç§°ã€‚
663 |             table_config: è¡¨é…ç½®å­—å…¸ï¼ŒåŒ…å« table_name ç­‰ä¿¡æ¯ã€‚
    |                                     ^^
664 |
665 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:719:23
    |
718 |         Returns:
719 |             æ ¼å¼åŒ–åŽçš„å¤§å°å­—ç¬¦ä¸²ï¼Œå¦‚ '1.5 GB'ã€'256 MB'ã€‚
    |                                 ^^
720 |
721 |         """
    |

PLR2004 Magic value used in comparison, consider replacing `1024` with a constant variable
   --> app/services/partition_management_service.py:722:25
    |
721 |         """
722 |         if size_bytes < 1024:
    |                         ^^^^
723 |             return f"{size_bytes} B"
724 |         if size_bytes < 1024**2:
    |

ANN205 Missing return type annotation for staticmethod `_rollback_on_error`
   --> app/services/partition_management_service.py:731:9
    |
730 |     @staticmethod
731 |     def _rollback_on_error():
    |         ^^^^^^^^^^^^^^^^^^
732 |         """æä¾›ä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨ç”¨äºŽå¼‚å¸¸æ—¶è‡ªåŠ¨å›žæ»šäº‹åŠ¡ã€‚.
    |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/partition_management_service.py:735:21
    |
734 |         Returns:
735 |             ä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯¹è±¡ï¼Œåœ¨é€€å‡ºæ—¶è‡ªåŠ¨æ‰§è¡Œ db.session.rollback()ã€‚
    |                             ^^
736 |
737 |         Example:
    |

ANN204 Missing return type annotation for special method `__enter__`
   --> app/services/partition_management_service.py:743:17
    |
741 |         """
742 |         class _RollbackContext:
743 |             def __enter__(self):
    |                 ^^^^^^^^^
744 |                 return self
    |
help: Add return type annotation

ANN204 Missing return type annotation for special method `__exit__`
   --> app/services/partition_management_service.py:746:17
    |
744 |                 return self
745 |
746 |             def __exit__(self, exc_type, exc, tb):
    |                 ^^^^^^^^
747 |                 db.session.rollback()
748 |                 return False
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `exc_type`
   --> app/services/partition_management_service.py:746:32
    |
744 |                 return self
745 |
746 |             def __exit__(self, exc_type, exc, tb):
    |                                ^^^^^^^^
747 |                 db.session.rollback()
748 |                 return False
    |

ANN001 Missing type annotation for function argument `exc`
   --> app/services/partition_management_service.py:746:42
    |
744 |                 return self
745 |
746 |             def __exit__(self, exc_type, exc, tb):
    |                                          ^^^
747 |                 db.session.rollback()
748 |                 return False
    |

ANN001 Missing type annotation for function argument `tb`
   --> app/services/partition_management_service.py:746:47
    |
744 |                 return self
745 |
746 |             def __exit__(self, exc_type, exc, tb):
    |                                               ^^
747 |                 db.session.rollback()
748 |                 return False
    |

INP001 File `app/services/statistics/account_statistics_service.py` is part of an implicit namespace package. Add an `__init__.py`.
--> app/services/statistics/account_statistics_service.py:1:1

A004 Import `SystemError` is shadowing a Python builtin
  --> app/services/statistics/account_statistics_service.py:14:24
   |
12 | from app import db
13 | from app.constants import DatabaseType
14 | from app.errors import SystemError
   |                        ^^^^^^^^^^^
15 | from app.models.account_classification import (
16 |     AccountClassification,
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/account_statistics_service.py:37:23
   |
36 |     Returns:
37 |         å¦‚æžœè´¦æˆ·è¢«é”å®šè¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚
   |                                ^^
38 |
39 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/account_statistics_service.py:56:28
   |
54 |     """èŽ·å–è´¦æˆ·æ±‡æ€»ç»Ÿè®¡ä¿¡æ¯ã€‚.
55 |
56 |     ç»Ÿè®¡è´¦æˆ·æ€»æ•°ã€æ´»è·ƒæ•°ã€é”å®šæ•°ã€æ­£å¸¸æ•°ã€å·²åˆ é™¤æ•°ï¼Œä»¥åŠå…³è”çš„å®žä¾‹ç»Ÿè®¡ã€‚
   |                                                   ^^
57 |     å¯é€‰æ‹©æ€§åœ°åªç»Ÿè®¡æŒ‡å®šå®žä¾‹æˆ–æ•°æ®åº“ç±»åž‹çš„è´¦æˆ·ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/account_statistics_service.py:61:28
   |
59 |     Args:
60 |         instance_id: å¯é€‰çš„å®žä¾‹ ID ç­›é€‰ã€‚
61 |         db_type: å¯é€‰çš„æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¦‚ 'mysql'ã€'postgresql'ã€‚
   |                                      ^^
62 |
63 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/account_statistics_service.py:64:23
   |
63 |     Returns:
64 |         åŒ…å«è´¦æˆ·å’Œå®žä¾‹ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                     ^^
65 |         {
66 |             'total_accounts': 100,       # è´¦æˆ·æ€»æ•°
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/statistics/account_statistics_service.py:64:28
   |
63 |     Returns:
64 |         åŒ…å«è´¦æˆ·å’Œå®žä¾‹ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                               ^^
65 |         {
66 |             'total_accounts': 100,       # è´¦æˆ·æ€»æ•°
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/account_statistics_service.py:106:28
    |
104 |                 if _is_account_locked(account, account.db_type):
105 |                     locked_accounts += 1
106 |             # éžæ´»è·ƒè´¦æˆ·è§†ä¸ºå·²åˆ é™¤/åœç”¨ï¼Œè®¡å…¥ total ä½†ä¸è®¡å…¥ active
    |                                        ^^
107 |
108 |         deleted_accounts = total_accounts - active_accounts
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/statistics/account_statistics_service.py:131:9
    |
129 |           normal_instances = max(active_instances - disabled_instances, 0)
130 |
131 | /         return {
132 | |             "total_accounts": total_accounts,
133 | |             "active_accounts": active_accounts,
134 | |             "locked_accounts": locked_accounts,
135 | |             "normal_accounts": normal_accounts,
136 | |             "deleted_accounts": deleted_accounts,
137 | |             "total_instances": total_instances,
138 | |             "active_instances": active_instances,
139 | |             "disabled_instances": disabled_instances,
140 | |             "normal_instances": normal_instances,
141 | |             "deleted_instances": deleted_instances,
142 | |         }
    | |_________^
143 |       except Exception as exc:
144 |           log_error("èŽ·å–è´¦æˆ·ç»Ÿè®¡æ±‡æ€»å¤±è´¥", module="account_statistics", exception=exc)
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/account_statistics_service.py:153:20
    |
152 |     Returns:
153 |         ä»¥æ•°æ®åº“ç±»åž‹ä¸ºé”®çš„å­—å…¸ï¼Œæ¯ä¸ªå€¼åŒ…å«è¯¥ç±»åž‹çš„è´¦æˆ·ç»Ÿè®¡ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                               ^^
154 |         {
155 |             'mysql': {
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/account_statistics_service.py:153:34
    |
152 |     Returns:
153 |         ä»¥æ•°æ®åº“ç±»åž‹ä¸ºé”®çš„å­—å…¸ï¼Œæ¯ä¸ªå€¼åŒ…å«è¯¥ç±»åž‹çš„è´¦æˆ·ç»Ÿè®¡ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                                           ^^
154 |         {
155 |             'mysql': {
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/statistics/account_statistics_service.py:153:39
    |
152 |     Returns:
153 |         ä»¥æ•°æ®åº“ç±»åž‹ä¸ºé”®çš„å­—å…¸ï¼Œæ¯ä¸ªå€¼åŒ…å«è¯¥ç±»åž‹çš„è´¦æˆ·ç»Ÿè®¡ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                                                     ^^
154 |         {
155 |             'mysql': {
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/statistics/account_statistics_service.py:201:9
    |
199 |             }
200 |
201 |         return db_type_stats
    |         ^^^^^^^^^^^^^^^^^^^^
202 |     except Exception as exc:
203 |         log_error("èŽ·å–æ•°æ®åº“ç±»åž‹ç»Ÿè®¡å¤±è´¥", module="account_statistics", exception=exc)
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/account_statistics_service.py:212:19
    |
211 |     Returns:
212 |         ä»¥åˆ†ç±»åç§°ä¸ºé”®çš„å­—å…¸ï¼Œæ¯ä¸ªå€¼åŒ…å«è¯¥åˆ†ç±»çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                             ^^
213 |         {
214 |             'admin': {
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/account_statistics_service.py:212:33
    |
211 |     Returns:
212 |         ä»¥åˆ†ç±»åç§°ä¸ºé”®çš„å­—å…¸ï¼Œæ¯ä¸ªå€¼åŒ…å«è¯¥åˆ†ç±»çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                                         ^^
213 |         {
214 |             'admin': {
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/statistics/account_statistics_service.py:212:38
    |
211 |     Returns:
212 |         ä»¥åˆ†ç±»åç§°ä¸ºé”®çš„å­—å…¸ï¼Œæ¯ä¸ªå€¼åŒ…å«è¯¥åˆ†ç±»çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                                                   ^^
213 |         {
214 |             'admin': {
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/statistics/account_statistics_service.py:236:9
    |
234 |                 "display_name": row.get("display_name", row["name"]),
235 |             }
236 |         return classification_stats
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
237 |     except Exception as exc:
238 |         log_error("èŽ·å–è´¦æˆ·åˆ†ç±»ç»Ÿè®¡å¤±è´¥", module="account_statistics", exception=exc)
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/account_statistics_service.py:247:20
    |
246 |     Returns:
247 |         åŒ…å«åˆ†ç±»è´¦æˆ·æ¦‚è§ˆçš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                               ^^
248 |         {
249 |             'total': 100,              # å·²åˆ†ç±»è´¦æˆ·æ€»æ•°
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/statistics/account_statistics_service.py:247:25
    |
246 |     Returns:
247 |         åŒ…å«åˆ†ç±»è´¦æˆ·æ¦‚è§ˆçš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                         ^^
248 |         {
249 |             'total': 100,              # å·²åˆ†ç±»è´¦æˆ·æ€»æ•°
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/statistics/account_statistics_service.py:262:9
    |
260 |           total_classified_accounts = sum(row["count"] for row in rows)
261 |           auto_classified_accounts = _query_auto_classified_count()
262 | /         return {
263 | |             "total": total_classified_accounts,
264 | |             "auto": auto_classified_accounts,
265 | |             "classifications": rows,
266 | |         }
    | |_________^
267 |       except Exception as exc:
268 |           log_error("èŽ·å–è´¦æˆ·åˆ†ç±»æ¦‚è§ˆå¤±è´¥", module="account_statistics", exception=exc)
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/account_statistics_service.py:276:30
    |
275 |     Args:
276 |         rule_ids: å¯é€‰çš„è§„åˆ™ ID åˆ—è¡¨ï¼Œå¦‚æžœæä¾›åˆ™åªç»Ÿè®¡è¿™äº›è§„åˆ™ã€‚
    |                                     ^^
277 |
278 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/account_statistics_service.py:279:28
    |
278 |     Returns:
279 |         ä»¥è§„åˆ™ ID ä¸ºé”®ã€è´¦æˆ·æ•°é‡ä¸ºå€¼çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                           ^^
280 |         {
281 |             1: 50,   # è§„åˆ™ 1 å…³è” 50 ä¸ªè´¦æˆ·
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/statistics/account_statistics_service.py:279:33
    |
278 |     Returns:
279 |         ä»¥è§„åˆ™ ID ä¸ºé”®ã€è´¦æˆ·æ•°é‡ä¸ºå€¼çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                                     ^^
280 |         {
281 |             1: 50,   # è§„åˆ™ 1 å…³è” 50 ä¸ªè´¦æˆ·
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/account_statistics_service.py:328:20
    |
327 |     Returns:
328 |         åŒ…å«å®Œæ•´ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼ŒåŒ…å« fetch_summaryã€fetch_db_type_stats
    |                               ^^
329 |         å’Œ fetch_classification_stats çš„æ‰€æœ‰å­—æ®µã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/account_statistics_service.py:351:25
    |
350 |     Returns:
351 |         æ‰€æœ‰ç»Ÿè®¡å€¼ä¸º 0 æˆ–ç©ºå­—å…¸çš„å­—å…¸ï¼Œæ ¼å¼ä¸Ž build_aggregated_statistics è¿”å›žå€¼ç›¸åŒã€‚
    |                                      ^^
352 |
353 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/account_statistics_service.py:374:22
    |
372 |     """æŸ¥è¯¢è´¦æˆ·åˆ†ç±»ç»Ÿè®¡è¡Œã€‚.
373 |
374 |     æŸ¥è¯¢æ‰€æœ‰æ´»è·ƒåˆ†ç±»åŠå…¶å…³è”çš„è´¦æˆ·æ•°é‡ï¼ŒæŒ‰ä¼˜å…ˆçº§é™åºæŽ’åˆ—ã€‚
    |                                       ^^
375 |
376 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/account_statistics_service.py:377:16
    |
376 |     Returns:
377 |         åˆ†ç±»ç»Ÿè®¡è¡Œåˆ—è¡¨ï¼Œæ¯è¡ŒåŒ…å«åˆ†ç±»åç§°ã€é¢œè‰²ã€æ˜¾ç¤ºåç§°ã€ä¼˜å…ˆçº§å’Œè´¦æˆ·æ•°é‡ã€‚
    |                       ^^
378 |
379 |     Raises:
    |

INP001 File `app/services/statistics/database_statistics_service.py` is part of an implicit namespace package. Add an `__init__.py`.
--> app/services/statistics/database_statistics_service.py:1:1

A004 Import `SystemError` is shadowing a Python builtin
  --> app/services/statistics/database_statistics_service.py:13:24
   |
12 | from app import db
13 | from app.errors import SystemError
   |                        ^^^^^^^^^^^
14 | from app.models.database_size_aggregation import DatabaseSizeAggregation
15 | from app.models.instance import Instance
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/database_statistics_service.py:30:30
   |
29 |     Args:
30 |         instance_id: å¯é€‰çš„å®žä¾‹ IDï¼Œå¦‚æžœæä¾›åˆ™ä»…ç»Ÿè®¡è¯¥å®žä¾‹ä¸‹çš„æ•°æ®åº“ã€‚
   |                                   ^^
31 |
32 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/database_statistics_service.py:33:21
   |
32 |     Returns:
33 |         åŒ…å«æ•°æ®åº“ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                 ^^
34 |         {
35 |             'total_databases': 100,      # æ•°æ®åº“æ€»æ•°
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/statistics/database_statistics_service.py:33:26
   |
32 |     Returns:
33 |         åŒ…å«æ•°æ®åº“ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                           ^^
34 |         {
35 |             'total_databases': 100,      # æ•°æ®åº“æ€»æ•°
   |

TRY300 Consider moving this statement to an `else` block
  --> app/services/statistics/database_statistics_service.py:67:9
   |
65 |           deleted_databases = deleted_databases.scalar() or 0
66 |
67 | /         return {
68 | |             "total_databases": total_databases,
69 | |             "active_databases": active_databases,
70 | |             "inactive_databases": inactive_databases,
71 | |             "deleted_databases": deleted_databases,
72 | |         }
   | |_________^
73 |       except Exception as exc:
74 |           log_error("èŽ·å–æ•°æ®åº“ç»Ÿè®¡å¤±è´¥", module="database_statistics", exception=exc)
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/database_statistics_service.py:83:21
   |
82 |     Returns:
83 |         æ‰€æœ‰ç»Ÿè®¡å€¼ä¸º 0 çš„å­—å…¸ï¼Œæ ¼å¼ä¸Ž fetch_summary è¿”å›žå€¼ç›¸åŒã€‚
   |                              ^^
84 |
85 |     """
   |

C901 `fetch_aggregations` is too complex (12 > 10)
  --> app/services/statistics/database_statistics_service.py:94:5
   |
94 | def fetch_aggregations(
   |     ^^^^^^^^^^^^^^^^^^
95 |     *,
96 |     instance_id: int | None,
   |

PLR0913 Too many arguments in function definition (11 > 5)
  --> app/services/statistics/database_statistics_service.py:94:5
   |
94 | def fetch_aggregations(
   |     ^^^^^^^^^^^^^^^^^^
95 |     *,
96 |     instance_id: int | None,
   |

PLR0912 Too many branches (13 > 12)
  --> app/services/statistics/database_statistics_service.py:94:5
   |
94 | def fetch_aggregations(
   |     ^^^^^^^^^^^^^^^^^^
95 |     *,
96 |     instance_id: int | None,
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/database_statistics_service.py:110:37
    |
108 |     """èŽ·å–æ•°æ®åº“å®¹é‡èšåˆæ•°æ®ã€‚.
109 |
110 |     æ”¯æŒå¤šç§ç­›é€‰æ¡ä»¶å’Œåˆ†é¡µæŸ¥è¯¢ã€‚å½“ get_all ä¸º True æ—¶ï¼Œè¿”å›ž Top 100 æ•°æ®åº“çš„æ‰€æœ‰èšåˆè®°å½•ã€‚
    |                                                      ^^
111 |
112 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/database_statistics_service.py:114:28
    |
112 |     Args:
113 |         instance_id: å¯é€‰çš„å®žä¾‹ ID ç­›é€‰ã€‚
114 |         db_type: å¯é€‰çš„æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¦‚ 'mysql'ã€'postgresql'ã€‚
    |                                      ^^
115 |         database_name: å¯é€‰çš„æ•°æ®åº“åç§°ç­›é€‰ã€‚
116 |         database_id: å¯é€‰çš„æ•°æ®åº“ ID ç­›é€‰ï¼Œä¼šè‡ªåŠ¨è§£æžä¸º database_nameã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/database_statistics_service.py:116:34
    |
114 |         db_type: å¯é€‰çš„æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¦‚ 'mysql'ã€'postgresql'ã€‚
115 |         database_name: å¯é€‰çš„æ•°æ®åº“åç§°ç­›é€‰ã€‚
116 |         database_id: å¯é€‰çš„æ•°æ®åº“ ID ç­›é€‰ï¼Œä¼šè‡ªåŠ¨è§£æžä¸º database_nameã€‚
    |                                          ^^
117 |         period_type: å¯é€‰çš„ç»Ÿè®¡å‘¨æœŸç±»åž‹ç­›é€‰ï¼Œå¦‚ 'daily'ã€'weekly'ã€'monthly'ã€‚
118 |         start_date: å¯é€‰çš„å¼€å§‹æ—¥æœŸç­›é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/database_statistics_service.py:117:33
    |
115 |         database_name: å¯é€‰çš„æ•°æ®åº“åç§°ç­›é€‰ã€‚
116 |         database_id: å¯é€‰çš„æ•°æ®åº“ ID ç­›é€‰ï¼Œä¼šè‡ªåŠ¨è§£æžä¸º database_nameã€‚
117 |         period_type: å¯é€‰çš„ç»Ÿè®¡å‘¨æœŸç±»åž‹ç­›é€‰ï¼Œå¦‚ 'daily'ã€'weekly'ã€'monthly'ã€‚
    |                                            ^^
118 |         start_date: å¯é€‰çš„å¼€å§‹æ—¥æœŸç­›é€‰ã€‚
119 |         end_date: å¯é€‰çš„ç»“æŸæ—¥æœŸç­›é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/database_statistics_service.py:120:19
    |
118 |         start_date: å¯é€‰çš„å¼€å§‹æ—¥æœŸç­›é€‰ã€‚
119 |         end_date: å¯é€‰çš„ç»“æŸæ—¥æœŸç­›é€‰ã€‚
120 |         page: å½“å‰é¡µç ï¼Œä»Ž 1 å¼€å§‹ã€‚
    |                       ^^
121 |         per_page: æ¯é¡µè®°å½•æ•°ã€‚
122 |         offset: æŸ¥è¯¢åç§»é‡ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/statistics/database_statistics_service.py:123:26
    |
121 |         per_page: æ¯é¡µè®°å½•æ•°ã€‚
122 |         offset: æŸ¥è¯¢åç§»é‡ã€‚
123 |         get_all: æ˜¯å¦èŽ·å–æ‰€æœ‰æ•°æ®ï¼ˆTop 100 æ•°æ®åº“ï¼‰ã€‚
    |                                  ^^
124 |
125 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/statistics/database_statistics_service.py:123:38
    |
121 |         per_page: æ¯é¡µè®°å½•æ•°ã€‚
122 |         offset: æŸ¥è¯¢åç§»é‡ã€‚
123 |         get_all: æ˜¯å¦èŽ·å–æ‰€æœ‰æ•°æ®ï¼ˆTop 100 æ•°æ®åº“ï¼‰ã€‚
    |                                                  ^^
124 |
125 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/database_statistics_service.py:126:23
    |
125 |     Returns:
126 |         åŒ…å«èšåˆæ•°æ®å’Œåˆ†é¡µä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                     ^^
127 |         {
128 |             'data': [
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/statistics/database_statistics_service.py:126:28
    |
125 |     Returns:
126 |         åŒ…å«èšåˆæ•°æ®å’Œåˆ†é¡µä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                               ^^
127 |         {
128 |             'data': [
    |

E501 Line too long (129 > 120)
   --> app/services/statistics/database_statistics_service.py:199:121
    |
197 |             pair_values = [(row.instance_id, row.database_name) for row in top_pairs]
198 |             aggregations = (
199 |                 query.filter(tuple_(DatabaseSizeAggregation.instance_id, DatabaseSizeAggregation.database_name).in_(pair_values))
    |                                                                                                                         ^^^^^^^^^
200 |                 .order_by(DatabaseSizeAggregation.period_start.asc())
201 |                 .all()
    |

C901 `fetch_aggregation_summary` is too complex (11 > 10)
   --> app/services/statistics/database_statistics_service.py:235:5
    |
235 | def fetch_aggregation_summary(
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
236 |     *,
237 |     instance_id: int | None,
    |

PLR0913 Too many arguments in function definition (7 > 5)
   --> app/services/statistics/database_statistics_service.py:235:5
    |
235 | def fetch_aggregation_summary(
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
236 |     *,
237 |     instance_id: int | None,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/database_statistics_service.py:247:20
    |
245 |     """è®¡ç®—æ•°æ®åº“å®¹é‡èšåˆæ±‡æ€»ç»Ÿè®¡ã€‚.
246 |
247 |     åŸºäºŽæœ€æ–°çš„èšåˆæ•°æ®è®¡ç®—æ±‡æ€»æŒ‡æ ‡ï¼ŒåŒ…æ‹¬æ•°æ®åº“æ€»æ•°ã€å®žä¾‹æ€»æ•°ã€
    |                                   ^^
248 |     æ€»å®¹é‡ã€å¹³å‡å®¹é‡ã€æœ€å¤§å®¹é‡ç­‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/database_statistics_service.py:254:34
    |
252 |         db_type: å¯é€‰çš„æ•°æ®åº“ç±»åž‹ç­›é€‰ã€‚
253 |         database_name: å¯é€‰çš„æ•°æ®åº“åç§°ç­›é€‰ã€‚
254 |         database_id: å¯é€‰çš„æ•°æ®åº“ ID ç­›é€‰ï¼Œä¼šè‡ªåŠ¨è§£æžä¸º database_nameã€‚
    |                                          ^^
255 |         period_type: å¯é€‰çš„ç»Ÿè®¡å‘¨æœŸç±»åž‹ç­›é€‰ã€‚
256 |         start_date: å¯é€‰çš„å¼€å§‹æ—¥æœŸç­›é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/database_statistics_service.py:260:20
    |
259 |     Returns:
260 |         åŒ…å«æ±‡æ€»ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                               ^^
261 |         {
262 |             'total_databases': 50,       # æ•°æ®åº“æ€»æ•°
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/statistics/database_statistics_service.py:260:25
    |
259 |     Returns:
260 |         åŒ…å«æ±‡æ€»ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                         ^^
261 |         {
262 |             'total_databases': 50,       # æ•°æ®åº“æ€»æ•°
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/statistics/database_statistics_service.py:264:47
    |
262 |             'total_databases': 50,       # æ•°æ®åº“æ€»æ•°
263 |             'total_instances': 10,       # å®žä¾‹æ€»æ•°
264 |             'total_size_mb': 102400.5,   # æ€»å®¹é‡ï¼ˆMBï¼‰
    |                                                  ^^
265 |             'avg_size_mb': 2048.01,      # å¹³å‡å®¹é‡ï¼ˆMBï¼‰
266 |             'average_size_mb': 2048.01,  # å¹³å‡å®¹é‡ï¼ˆMBï¼Œå…¼å®¹å­—æ®µï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/statistics/database_statistics_service.py:264:50
    |
262 |             'total_databases': 50,       # æ•°æ®åº“æ€»æ•°
263 |             'total_instances': 10,       # å®žä¾‹æ€»æ•°
264 |             'total_size_mb': 102400.5,   # æ€»å®¹é‡ï¼ˆMBï¼‰
    |                                                      ^^
265 |             'avg_size_mb': 2048.01,      # å¹³å‡å®¹é‡ï¼ˆMBï¼‰
266 |             'average_size_mb': 2048.01,  # å¹³å‡å®¹é‡ï¼ˆMBï¼Œå…¼å®¹å­—æ®µï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/statistics/database_statistics_service.py:265:48
    |
263 |             'total_instances': 10,       # å®žä¾‹æ€»æ•°
264 |             'total_size_mb': 102400.5,   # æ€»å®¹é‡ï¼ˆMBï¼‰
265 |             'avg_size_mb': 2048.01,      # å¹³å‡å®¹é‡ï¼ˆMBï¼‰
    |                                                    ^^
266 |             'average_size_mb': 2048.01,  # å¹³å‡å®¹é‡ï¼ˆMBï¼Œå…¼å®¹å­—æ®µï¼‰
267 |             'max_size_mb': 10240.0,      # æœ€å¤§å®¹é‡ï¼ˆMBï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/statistics/database_statistics_service.py:265:51
    |
263 |             'total_instances': 10,       # å®žä¾‹æ€»æ•°
264 |             'total_size_mb': 102400.5,   # æ€»å®¹é‡ï¼ˆMBï¼‰
265 |             'avg_size_mb': 2048.01,      # å¹³å‡å®¹é‡ï¼ˆMBï¼‰
    |                                                        ^^
266 |             'average_size_mb': 2048.01,  # å¹³å‡å®¹é‡ï¼ˆMBï¼Œå…¼å®¹å­—æ®µï¼‰
267 |             'max_size_mb': 10240.0,      # æœ€å¤§å®¹é‡ï¼ˆMBï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/statistics/database_statistics_service.py:266:48
    |
264 |             'total_size_mb': 102400.5,   # æ€»å®¹é‡ï¼ˆMBï¼‰
265 |             'avg_size_mb': 2048.01,      # å¹³å‡å®¹é‡ï¼ˆMBï¼‰
266 |             'average_size_mb': 2048.01,  # å¹³å‡å®¹é‡ï¼ˆMBï¼Œå…¼å®¹å­—æ®µï¼‰
    |                                                    ^^
267 |             'max_size_mb': 10240.0,      # æœ€å¤§å®¹é‡ï¼ˆMBï¼‰
268 |             'growth_rate': 0             # å¢žé•¿çŽ‡ï¼ˆæš‚æœªå®žçŽ°ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/database_statistics_service.py:266:51
    |
264 |             'total_size_mb': 102400.5,   # æ€»å®¹é‡ï¼ˆMBï¼‰
265 |             'avg_size_mb': 2048.01,      # å¹³å‡å®¹é‡ï¼ˆMBï¼‰
266 |             'average_size_mb': 2048.01,  # å¹³å‡å®¹é‡ï¼ˆMBï¼Œå…¼å®¹å­—æ®µï¼‰
    |                                                        ^^
267 |             'max_size_mb': 10240.0,      # æœ€å¤§å®¹é‡ï¼ˆMBï¼‰
268 |             'growth_rate': 0             # å¢žé•¿çŽ‡ï¼ˆæš‚æœªå®žçŽ°ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/statistics/database_statistics_service.py:266:56
    |
264 |             'total_size_mb': 102400.5,   # æ€»å®¹é‡ï¼ˆMBï¼‰
265 |             'avg_size_mb': 2048.01,      # å¹³å‡å®¹é‡ï¼ˆMBï¼‰
266 |             'average_size_mb': 2048.01,  # å¹³å‡å®¹é‡ï¼ˆMBï¼Œå…¼å®¹å­—æ®µï¼‰
    |                                                                  ^^
267 |             'max_size_mb': 10240.0,      # æœ€å¤§å®¹é‡ï¼ˆMBï¼‰
268 |             'growth_rate': 0             # å¢žé•¿çŽ‡ï¼ˆæš‚æœªå®žçŽ°ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/statistics/database_statistics_service.py:267:48
    |
265 |             'avg_size_mb': 2048.01,      # å¹³å‡å®¹é‡ï¼ˆMBï¼‰
266 |             'average_size_mb': 2048.01,  # å¹³å‡å®¹é‡ï¼ˆMBï¼Œå…¼å®¹å­—æ®µï¼‰
267 |             'max_size_mb': 10240.0,      # æœ€å¤§å®¹é‡ï¼ˆMBï¼‰
    |                                                    ^^
268 |             'growth_rate': 0             # å¢žé•¿çŽ‡ï¼ˆæš‚æœªå®žçŽ°ï¼‰
269 |         }
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/statistics/database_statistics_service.py:267:51
    |
265 |             'avg_size_mb': 2048.01,      # å¹³å‡å®¹é‡ï¼ˆMBï¼‰
266 |             'average_size_mb': 2048.01,  # å¹³å‡å®¹é‡ï¼ˆMBï¼Œå…¼å®¹å­—æ®µï¼‰
267 |             'max_size_mb': 10240.0,      # æœ€å¤§å®¹é‡ï¼ˆMBï¼‰
    |                                                        ^^
268 |             'growth_rate': 0             # å¢žé•¿çŽ‡ï¼ˆæš‚æœªå®žçŽ°ï¼‰
269 |         }
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/statistics/database_statistics_service.py:268:47
    |
266 |             'average_size_mb': 2048.01,  # å¹³å‡å®¹é‡ï¼ˆMBï¼Œå…¼å®¹å­—æ®µï¼‰
267 |             'max_size_mb': 10240.0,      # æœ€å¤§å®¹é‡ï¼ˆMBï¼‰
268 |             'growth_rate': 0             # å¢žé•¿çŽ‡ï¼ˆæš‚æœªå®žçŽ°ï¼‰
    |                                                  ^^
269 |         }
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/statistics/database_statistics_service.py:268:52
    |
266 |             'average_size_mb': 2048.01,  # å¹³å‡å®¹é‡ï¼ˆMBï¼Œå…¼å®¹å­—æ®µï¼‰
267 |             'max_size_mb': 10240.0,      # æœ€å¤§å®¹é‡ï¼ˆMBï¼‰
268 |             'growth_rate': 0             # å¢žé•¿çŽ‡ï¼ˆæš‚æœªå®žçŽ°ï¼‰
    |                                                            ^^
269 |         }
    |

INP001 File `app/services/statistics/instance_statistics_service.py` is part of an implicit namespace package. Add an `__init__.py`.
--> app/services/statistics/instance_statistics_service.py:1:1

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/services/statistics/instance_statistics_service.py:3:21
  |
1 | """å®žä¾‹ç»Ÿè®¡æœåŠ¡.
2 |
3 | å°è£…å®žä¾‹æ•°é‡ã€ç±»åž‹ã€ç«¯å£ã€ç‰ˆæœ¬ç­‰ç»Ÿè®¡é€»è¾‘ï¼Œä¾›ä»ªè¡¨ç›˜åŠç»Ÿè®¡é¡µé¢å¤ç”¨ã€‚
  |                                         ^^
4 | """
  |

A004 Import `SystemError` is shadowing a Python builtin
  --> app/services/statistics/instance_statistics_service.py:12:24
   |
11 | from app import db
12 | from app.errors import SystemError
   |                        ^^^^^^^^^^^
13 | from app.models.instance import Instance
14 | from app.utils.structlog_config import log_error
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/instance_statistics_service.py:25:28
   |
24 |     Args:
25 |         db_type: å¯é€‰çš„æ•°æ®åº“ç±»åž‹ç­›é€‰ï¼Œå¦‚ 'mysql'ã€'postgresql'ã€‚
   |                                      ^^
26 |
27 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/instance_statistics_service.py:28:20
   |
27 |     Returns:
28 |         åŒ…å«å®žä¾‹ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                               ^^
29 |         {
30 |             'total_instances': 100,      # å®žä¾‹æ€»æ•°
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/statistics/instance_statistics_service.py:28:25
   |
27 |     Returns:
28 |         åŒ…å«å®žä¾‹ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                         ^^
29 |         {
30 |             'total_instances': 100,      # å®žä¾‹æ€»æ•°
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/statistics/instance_statistics_service.py:31:49
   |
29 |         {
30 |             'total_instances': 100,      # å®žä¾‹æ€»æ•°
31 |             'active_instances': 85,      # æ´»è·ƒå®žä¾‹æ•°ï¼ˆæœªåˆ é™¤ï¼‰
   |                                                      ^^
32 |             'normal_instances': 80,      # æ­£å¸¸å®žä¾‹æ•°ï¼ˆæ´»è·ƒä¸”å¯ç”¨ï¼‰
33 |             'disabled_instances': 5,     # ç¦ç”¨å®žä¾‹æ•°
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/statistics/instance_statistics_service.py:31:53
   |
29 |         {
30 |             'total_instances': 100,      # å®žä¾‹æ€»æ•°
31 |             'active_instances': 85,      # æ´»è·ƒå®žä¾‹æ•°ï¼ˆæœªåˆ é™¤ï¼‰
   |                                                              ^^
32 |             'normal_instances': 80,      # æ­£å¸¸å®žä¾‹æ•°ï¼ˆæ´»è·ƒä¸”å¯ç”¨ï¼‰
33 |             'disabled_instances': 5,     # ç¦ç”¨å®žä¾‹æ•°
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/statistics/instance_statistics_service.py:32:49
   |
30 |             'total_instances': 100,      # å®žä¾‹æ€»æ•°
31 |             'active_instances': 85,      # æ´»è·ƒå®žä¾‹æ•°ï¼ˆæœªåˆ é™¤ï¼‰
32 |             'normal_instances': 80,      # æ­£å¸¸å®žä¾‹æ•°ï¼ˆæ´»è·ƒä¸”å¯ç”¨ï¼‰
   |                                                      ^^
33 |             'disabled_instances': 5,     # ç¦ç”¨å®žä¾‹æ•°
34 |             'deleted_instances': 15      # å·²åˆ é™¤å®žä¾‹æ•°
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/statistics/instance_statistics_service.py:32:55
   |
30 |             'total_instances': 100,      # å®žä¾‹æ€»æ•°
31 |             'active_instances': 85,      # æ´»è·ƒå®žä¾‹æ•°ï¼ˆæœªåˆ é™¤ï¼‰
32 |             'normal_instances': 80,      # æ­£å¸¸å®žä¾‹æ•°ï¼ˆæ´»è·ƒä¸”å¯ç”¨ï¼‰
   |                                                                  ^^
33 |             'disabled_instances': 5,     # ç¦ç”¨å®žä¾‹æ•°
34 |             'deleted_instances': 15      # å·²åˆ é™¤å®žä¾‹æ•°
   |

TRY300 Consider moving this statement to an `else` block
  --> app/services/statistics/instance_statistics_service.py:55:9
   |
53 |           normal_instances = active_instances
54 |
55 | /         return {
56 | |             "total_instances": total_instances,
57 | |             "active_instances": active_instances,
58 | |             "normal_instances": normal_instances,
59 | |             "disabled_instances": disabled_instances,
60 | |             "deleted_instances": deleted_instances,
61 | |         }
   | |_________^
62 |       except Exception as exc:
63 |           log_error("èŽ·å–å®žä¾‹æ±‡æ€»å¤±è´¥", module="instance_statistics", exception=exc)
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/instance_statistics_service.py:71:20
   |
69 |     """æ±‡æ€»å®žä¾‹å®¹é‡ä¿¡æ¯ã€‚.
70 |
71 |     åŸºäºŽæœ€è¿‘æŒ‡å®šå¤©æ•°çš„å®¹é‡ç»Ÿè®¡æ•°æ®ï¼Œè®¡ç®—æ‰€æœ‰æ´»è·ƒå®žä¾‹çš„æ€»å®¹é‡ã€‚
   |                                   ^^
72 |     å¯¹æ¯ä¸ªå®žä¾‹å–æœ€æ–°çš„ä¸€æ¡ç»Ÿè®¡è®°å½•ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/instance_statistics_service.py:75:32
   |
74 |     Args:
75 |         recent_days: ç»Ÿè®¡æœ€è¿‘å¤šå°‘å¤©çš„æ•°æ®ï¼Œé»˜è®¤ 7 å¤©ã€‚
   |                                          ^^
76 |
77 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/instance_statistics_service.py:78:20
   |
77 |     Returns:
78 |         åŒ…å«å®¹é‡ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                               ^^
79 |         {
80 |             'total_gb': 1024.5,        # æ€»å®¹é‡ï¼ˆGBï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/statistics/instance_statistics_service.py:78:25
   |
77 |     Returns:
78 |         åŒ…å«å®¹é‡ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                         ^^
79 |         {
80 |             'total_gb': 1024.5,        # æ€»å®¹é‡ï¼ˆGBï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/statistics/instance_statistics_service.py:80:45
   |
78 |         åŒ…å«å®¹é‡ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
79 |         {
80 |             'total_gb': 1024.5,        # æ€»å®¹é‡ï¼ˆGBï¼‰
   |                                                ^^
81 |             'usage_percent': 0         # ä½¿ç”¨çŽ‡ï¼ˆæš‚æœªå®žçŽ°ï¼‰
82 |         }
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/statistics/instance_statistics_service.py:80:48
   |
78 |         åŒ…å«å®¹é‡ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
79 |         {
80 |             'total_gb': 1024.5,        # æ€»å®¹é‡ï¼ˆGBï¼‰
   |                                                    ^^
81 |             'usage_percent': 0         # ä½¿ç”¨çŽ‡ï¼ˆæš‚æœªå®žçŽ°ï¼‰
82 |         }
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/statistics/instance_statistics_service.py:81:45
   |
79 |         {
80 |             'total_gb': 1024.5,        # æ€»å®¹é‡ï¼ˆGBï¼‰
81 |             'usage_percent': 0         # ä½¿ç”¨çŽ‡ï¼ˆæš‚æœªå®žçŽ°ï¼‰
   |                                                ^^
82 |         }
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/statistics/instance_statistics_service.py:81:50
   |
79 |         {
80 |             'total_gb': 1024.5,        # æ€»å®¹é‡ï¼ˆGBï¼‰
81 |             'usage_percent': 0         # ä½¿ç”¨çŽ‡ï¼ˆæš‚æœªå®žçŽ°ï¼‰
   |                                                          ^^
82 |         }
   |

PLC0415 `import` should be at the top-level of a file
  --> app/services/statistics/instance_statistics_service.py:89:9
   |
87 |     """
88 |     try:
89 |         from app.models.instance_size_stat import InstanceSizeStat
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
90 |
91 |         recent_date = time_utils.now_china().date() - timedelta(days=recent_days)
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/instance_statistics_service.py:126:20
    |
125 |     Returns:
126 |         åŒ…å«è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                               ^^
127 |         {
128 |             'total_instances': 100,
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/statistics/instance_statistics_service.py:126:25
    |
125 |     Returns:
126 |         åŒ…å«è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                         ^^
127 |         {
128 |             'total_instances': 100,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/instance_statistics_service.py:211:25
    |
210 |     Returns:
211 |         æ‰€æœ‰ç»Ÿè®¡å€¼ä¸º 0 æˆ–ç©ºæ•°ç»„çš„å­—å…¸ï¼Œæ ¼å¼ä¸Ž build_aggregated_statistics è¿”å›žå€¼ç›¸åŒã€‚
    |                                      ^^
212 |
213 |     """
    |

INP001 File `app/services/statistics/log_statistics_service.py` is part of an implicit namespace package. Add an `__init__.py`.
--> app/services/statistics/log_statistics_service.py:1:1

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/log_statistics_service.py:19:19
   |
17 |     """èŽ·å–æœ€è¿‘ N å¤©çš„é”™è¯¯/å‘Šè­¦æ—¥å¿—è¶‹åŠ¿ã€‚.
18 |
19 |     ç»Ÿè®¡æ¯å¤©çš„é”™è¯¯å’Œå‘Šè­¦æ—¥å¿—æ•°é‡ï¼Œè¿”å›žæ—¶é—´åºåˆ—æ•°æ®ã€‚
   |                                 ^^
20 |
21 |     Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/log_statistics_service.py:22:19
   |
21 |     Args:
22 |         days: ç»Ÿè®¡å¤©æ•°ï¼Œé»˜è®¤ä¸º 7 å¤©ã€‚
   |                       ^^
23 |
24 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/log_statistics_service.py:25:17
   |
24 |     Returns:
25 |         æ—¥å¿—è¶‹åŠ¿æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«æ—¥æœŸã€é”™è¯¯æ•°å’Œå‘Šè­¦æ•°ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                         ^^
26 |         [
27 |             {
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/log_statistics_service.py:25:34
   |
24 |     Returns:
25 |         æ—¥å¿—è¶‹åŠ¿æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«æ—¥æœŸã€é”™è¯¯æ•°å’Œå‘Šè­¦æ•°ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                                           ^^
26 |         [
27 |             {
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/statistics/log_statistics_service.py:25:39
   |
24 |     Returns:
25 |         æ—¥å¿—è¶‹åŠ¿æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«æ—¥æœŸã€é”™è¯¯æ•°å’Œå‘Šè­¦æ•°ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                                                     ^^
26 |         [
27 |             {
   |

SLF001 Private member accessed: `_mapping`
   --> app/services/statistics/log_statistics_service.py:108:26
    |
106 |             .one_or_none()
107 |         )
108 |         result_mapping = result._mapping if result is not None else {}
    |                          ^^^^^^^^^^^^^^^
109 |
110 |         trend_data: list[dict[str, int | str]] = []
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/statistics/log_statistics_service.py:120:9
    |
118 |             )
119 |
120 |         return trend_data
    |         ^^^^^^^^^^^^^^^^^
121 |     except Exception as exc:
122 |         log_error("èŽ·å–æ—¥å¿—è¶‹åŠ¿æ•°æ®å¤±è´¥", module="log_statistics", exception=exc)
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/statistics/log_statistics_service.py:121:12
    |
120 |         return trend_data
121 |     except Exception as exc:
    |            ^^^^^^^^^
122 |         log_error("èŽ·å–æ—¥å¿—è¶‹åŠ¿æ•°æ®å¤±è´¥", module="log_statistics", exception=exc)
123 |         return []
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/services/statistics/log_statistics_service.py:129:12
    |
127 |     """ç»Ÿè®¡é”™è¯¯/å‘Šè­¦æ—¥å¿—çº§åˆ«åˆ†å¸ƒã€‚.
128 |
129 |     ç»Ÿè®¡å„æ—¥å¿—çº§åˆ«ï¼ˆERRORã€WARNINGã€CRITICALï¼‰çš„æ•°é‡ã€‚
    |                   ^^
130 |
131 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/services/statistics/log_statistics_service.py:129:35
    |
127 |     """ç»Ÿè®¡é”™è¯¯/å‘Šè­¦æ—¥å¿—çº§åˆ«åˆ†å¸ƒã€‚.
128 |
129 |     ç»Ÿè®¡å„æ—¥å¿—çº§åˆ«ï¼ˆERRORã€WARNINGã€CRITICALï¼‰çš„æ•°é‡ã€‚
    |                                             ^^
130 |
131 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/log_statistics_service.py:132:17
    |
131 |     Returns:
132 |         æ—¥å¿—çº§åˆ«åˆ†å¸ƒåˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«çº§åˆ«å’Œæ•°é‡ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                         ^^
133 |         [
134 |             {'level': 'ERROR', 'count': 100},
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/statistics/log_statistics_service.py:132:29
    |
131 |     Returns:
132 |         æ—¥å¿—çº§åˆ«åˆ†å¸ƒåˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«çº§åˆ«å’Œæ•°é‡ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                                 ^^
133 |         [
134 |             {'level': 'ERROR', 'count': 100},
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/statistics/log_statistics_service.py:132:34
    |
131 |     Returns:
132 |         æ—¥å¿—çº§åˆ«åˆ†å¸ƒåˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«çº§åˆ«å’Œæ•°é‡ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                                           ^^
133 |         [
134 |             {'level': 'ERROR', 'count': 100},
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/services/statistics/log_statistics_service.py:152:12
    |
151 |         return [{"level": stat.level.value, "count": stat.count} for stat in level_stats]
152 |     except Exception as exc:
    |            ^^^^^^^^^
153 |         log_error("èŽ·å–æ—¥å¿—çº§åˆ«åˆ†å¸ƒå¤±è´¥", module="log_statistics", exception=exc)
154 |         return []
    |

INP001 File `app/services/statistics/partition_statistics_service.py` is part of an implicit namespace package. Add an `__init__.py`.
--> app/services/statistics/partition_statistics_service.py:1:1

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/partition_statistics_service.py:13:35
   |
11 |     """æä¾›åˆ†åŒºç»Ÿè®¡ç›¸å…³çš„æŸ¥è¯¢èƒ½åŠ›ã€‚.
12 |
13 |     ç»§æ‰¿è‡ª PartitionManagementServiceï¼Œæä¾›åˆ†åŒºä¿¡æ¯æŸ¥è¯¢å’Œç»Ÿè®¡åŠŸèƒ½ã€‚
   |                                      ^^
14 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/partition_statistics_service.py:19:19
   |
17 |         """èŽ·å–æ‰€æœ‰åˆ†åŒºçš„è¯¦ç»†ä¿¡æ¯ã€‚.
18 |
19 |         æŸ¥è¯¢æ‰€æœ‰è¡¨çš„åˆ†åŒºä¿¡æ¯ï¼ŒåŒ…æ‹¬åˆ†åŒºåç§°ã€å¤§å°ã€è®°å½•æ•°ç­‰ã€‚
   |                             ^^
20 |
21 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/partition_statistics_service.py:22:24
   |
21 |         Returns:
22 |             åŒ…å«åˆ†åŒºè¯¦ç»†ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                   ^^
23 |             {
24 |                 'partitions': [...],          # åˆ†åŒºåˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/statistics/partition_statistics_service.py:22:29
   |
21 |         Returns:
22 |             åŒ…å«åˆ†åŒºè¯¦ç»†ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
   |                                             ^^
23 |             {
24 |                 'partitions': [...],          # åˆ†åŒºåˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/statistics/partition_statistics_service.py:26:52
   |
24 |                 'partitions': [...],          # åˆ†åŒºåˆ—è¡¨
25 |                 'total_partitions': 10,       # åˆ†åŒºæ€»æ•°
26 |                 'total_size_bytes': 1024000,  # æ€»å¤§å°ï¼ˆå­—èŠ‚ï¼‰
   |                                                       ^^
27 |                 'total_size': '1.0 MB',       # æ€»å¤§å°ï¼ˆæ ¼å¼åŒ–ï¼‰
28 |                 'total_records': 50000,       # æ€»è®°å½•æ•°
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/statistics/partition_statistics_service.py:26:55
   |
24 |                 'partitions': [...],          # åˆ†åŒºåˆ—è¡¨
25 |                 'total_partitions': 10,       # åˆ†åŒºæ€»æ•°
26 |                 'total_size_bytes': 1024000,  # æ€»å¤§å°ï¼ˆå­—èŠ‚ï¼‰
   |                                                             ^^
27 |                 'total_size': '1.0 MB',       # æ€»å¤§å°ï¼ˆæ ¼å¼åŒ–ï¼‰
28 |                 'total_records': 50000,       # æ€»è®°å½•æ•°
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/statistics/partition_statistics_service.py:27:52
   |
25 |                 'total_partitions': 10,       # åˆ†åŒºæ€»æ•°
26 |                 'total_size_bytes': 1024000,  # æ€»å¤§å°ï¼ˆå­—èŠ‚ï¼‰
27 |                 'total_size': '1.0 MB',       # æ€»å¤§å°ï¼ˆæ ¼å¼åŒ–ï¼‰
   |                                                       ^^
28 |                 'total_records': 50000,       # æ€»è®°å½•æ•°
29 |                 'tables': ['stats', 'aggregations']  # è¡¨ååˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/statistics/partition_statistics_service.py:27:56
   |
25 |                 'total_partitions': 10,       # åˆ†åŒºæ€»æ•°
26 |                 'total_size_bytes': 1024000,  # æ€»å¤§å°ï¼ˆå­—èŠ‚ï¼‰
27 |                 'total_size': '1.0 MB',       # æ€»å¤§å°ï¼ˆæ ¼å¼åŒ–ï¼‰
   |                                                               ^^
28 |                 'total_records': 50000,       # æ€»è®°å½•æ•°
29 |                 'tables': ['stats', 'aggregations']  # è¡¨ååˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/partition_statistics_service.py:55:20
   |
53 |         """èŽ·å–åˆ†åŒºç»Ÿè®¡ä¿¡æ¯ã€‚.
54 |
55 |         èŽ·å–åˆ†åŒºçš„æ±‡æ€»ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ€»è®°å½•æ•°ã€æ€»åˆ†åŒºæ•°ã€æ€»å¤§å°ç­‰ã€‚
   |                               ^^
56 |
57 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/statistics/partition_statistics_service.py:58:24
   |
57 |         Returns:
58 |             åŒ…å«åˆ†åŒºç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼ä¸Ž get_partition_info è¿”å›žå€¼ç›¸åŒã€‚
   |                                   ^^
59 |
60 |         """
   |

D205 1 blank line required between summary line and description
 --> app/services/sync_session_service.py:1:1
  |
1 | / """é²¸è½ - åŒæ­¥ä¼šè¯æœåŠ¡
2 | | ç®¡ç†åŒæ­¥ä¼šè¯å’Œå®žä¾‹è®°å½•çš„ä¸šåŠ¡é€»è¾‘.
3 | | """
  | |___^
4 |
5 |   from typing import Any
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/sync_session_service.py:21:23
   |
19 |     """åŒæ­¥ä¼šè¯æœåŠ¡ã€‚.
20 |
21 |     ç®¡ç†æ‰¹é‡åŒæ­¥ä¼šè¯å’Œå®žä¾‹è®°å½•çš„ä¸šåŠ¡é€»è¾‘ï¼ŒåŒ…æ‹¬ä¼šè¯åˆ›å»ºã€å®žä¾‹è®°å½•ç®¡ç†ã€
   |                                         ^^
22 |     åŒæ­¥çŠ¶æ€æ›´æ–°å’Œç»Ÿè®¡ä¿¡æ¯ç»´æŠ¤ã€‚
   |

D107 Missing docstring in `__init__`
  --> app/services/sync_session_service.py:30:9
   |
28 |     """
29 |
30 |     def __init__(self) -> None:
   |         ^^^^^^^^
31 |         self.system_logger = get_system_logger()
32 |         self.sync_logger = get_sync_logger()
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/sync_session_service.py:35:32
   |
34 |     def _clean_sync_details(self, sync_details: dict[str, Any] | None) -> dict[str, Any] | None:
35 |         """æ¸…ç†åŒæ­¥è¯¦æƒ…ä¸­çš„ datetime å¯¹è±¡ï¼Œç¡®ä¿ JSON å¯åºåˆ—åŒ–ã€‚.
   |                                          ^^
36 |
37 |         é€’å½’éåŽ†åŒæ­¥è¯¦æƒ…å­—å…¸ï¼Œå°†æ‰€æœ‰ datetime å’Œ date å¯¹è±¡è½¬æ¢ä¸º ISO 8601 æ ¼å¼å­—ç¬¦ä¸²ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/sync_session_service.py:37:19
   |
35 |         """æ¸…ç†åŒæ­¥è¯¦æƒ…ä¸­çš„ datetime å¯¹è±¡ï¼Œç¡®ä¿ JSON å¯åºåˆ—åŒ–ã€‚.
36 |
37 |         é€’å½’éåŽ†åŒæ­¥è¯¦æƒ…å­—å…¸ï¼Œå°†æ‰€æœ‰ datetime å’Œ date å¯¹è±¡è½¬æ¢ä¸º ISO 8601 æ ¼å¼å­—ç¬¦ä¸²ã€‚
   |                             ^^
38 |
39 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/sync_session_service.py:40:35
   |
39 |         Args:
40 |             sync_details: åŽŸå§‹åŒæ­¥è¯¦æƒ…å­—å…¸ï¼Œå¯èƒ½åŒ…å« datetime å¯¹è±¡ã€‚
   |                                           ^^
41 |
42 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/sync_session_service.py:43:23
   |
42 |         Returns:
43 |             æ¸…ç†åŽçš„åŒæ­¥è¯¦æƒ…å­—å…¸ï¼Œæ‰€æœ‰ datetime å¯¹è±¡å·²è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚
   |                                 ^^
44 |             å¦‚æžœè¾“å…¥ä¸º Noneï¼Œåˆ™è¿”å›ž Noneã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/sync_session_service.py:44:23
   |
42 |         Returns:
43 |             æ¸…ç†åŽçš„åŒæ­¥è¯¦æƒ…å­—å…¸ï¼Œæ‰€æœ‰ datetime å¯¹è±¡å·²è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚
44 |             å¦‚æžœè¾“å…¥ä¸º Noneï¼Œåˆ™è¿”å›ž Noneã€‚
   |                            ^^
45 |
46 |         """
   |

ANN202 Missing return type annotation for private function `clean_value`
  --> app/services/sync_session_service.py:50:13
   |
48 |             return None
49 |
50 |         def clean_value(value):
   |             ^^^^^^^^^^^
51 |             if hasattr(value, "isoformat"):  # datetime æˆ– date å¯¹è±¡
52 |                 return value.isoformat()
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `value`
  --> app/services/sync_session_service.py:50:25
   |
48 |             return None
49 |
50 |         def clean_value(value):
   |                         ^^^^^
51 |             if hasattr(value, "isoformat"):  # datetime æˆ– date å¯¹è±¡
52 |                 return value.isoformat()
   |

E501 Line too long (123 > 120)
  --> app/services/sync_session_service.py:61:121
   |
59 |         return clean_value(sync_details)
60 |
61 |     def create_session(self, sync_type: str, sync_category: str = "account", created_by: int | None = None) -> SyncSession:
   |                                                                                                                         ^^^
62 |         """åˆ›å»ºåŒæ­¥ä¼šè¯ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/sync_session_service.py:64:19
   |
62 |         """åˆ›å»ºåŒæ­¥ä¼šè¯ã€‚.
63 |
64 |         åˆ›å»ºæ–°çš„åŒæ­¥ä¼šè¯è®°å½•ï¼Œå¹¶è®°å½•æ—¥å¿—ã€‚
   |                             ^^
65 |
66 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/sync_session_service.py:67:30
   |
66 |         Args:
67 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¯é€‰å€¼ï¼š'manual_single'ï¼ˆæ‰‹åŠ¨å•ä¸ªï¼‰ã€
   |                                    ^^
68 |                 'manual_batch'ï¼ˆæ‰‹åŠ¨æ‰¹é‡ï¼‰ã€'manual_task'ï¼ˆæ‰‹åŠ¨ä»»åŠ¡ï¼‰ã€
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/sync_session_service.py:67:34
   |
66 |         Args:
67 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¯é€‰å€¼ï¼š'manual_single'ï¼ˆæ‰‹åŠ¨å•ä¸ªï¼‰ã€
   |                                            ^^
68 |                 'manual_batch'ï¼ˆæ‰‹åŠ¨æ‰¹é‡ï¼‰ã€'manual_task'ï¼ˆæ‰‹åŠ¨ä»»åŠ¡ï¼‰ã€
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/sync_session_service.py:67:50
   |
66 |         Args:
67 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¯é€‰å€¼ï¼š'manual_single'ï¼ˆæ‰‹åŠ¨å•ä¸ªï¼‰ã€
   |                                                             ^^
68 |                 'manual_batch'ï¼ˆæ‰‹åŠ¨æ‰¹é‡ï¼‰ã€'manual_task'ï¼ˆæ‰‹åŠ¨ä»»åŠ¡ï¼‰ã€
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/sync_session_service.py:67:55
   |
66 |         Args:
67 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¯é€‰å€¼ï¼š'manual_single'ï¼ˆæ‰‹åŠ¨å•ä¸ªï¼‰ã€
   |                                                                       ^^
68 |                 'manual_batch'ï¼ˆæ‰‹åŠ¨æ‰¹é‡ï¼‰ã€'manual_task'ï¼ˆæ‰‹åŠ¨ä»»åŠ¡ï¼‰ã€
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/sync_session_service.py:68:31
   |
66 |         Args:
67 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¯é€‰å€¼ï¼š'manual_single'ï¼ˆæ‰‹åŠ¨å•ä¸ªï¼‰ã€
68 |                 'manual_batch'ï¼ˆæ‰‹åŠ¨æ‰¹é‡ï¼‰ã€'manual_task'ï¼ˆæ‰‹åŠ¨ä»»åŠ¡ï¼‰ã€
   |                               ^^
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/sync_session_service.py:68:36
   |
66 |         Args:
67 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¯é€‰å€¼ï¼š'manual_single'ï¼ˆæ‰‹åŠ¨å•ä¸ªï¼‰ã€
68 |                 'manual_batch'ï¼ˆæ‰‹åŠ¨æ‰¹é‡ï¼‰ã€'manual_task'ï¼ˆæ‰‹åŠ¨ä»»åŠ¡ï¼‰ã€
   |                                         ^^
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/sync_session_service.py:68:51
   |
66 |         Args:
67 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¯é€‰å€¼ï¼š'manual_single'ï¼ˆæ‰‹åŠ¨å•ä¸ªï¼‰ã€
68 |                 'manual_batch'ï¼ˆæ‰‹åŠ¨æ‰¹é‡ï¼‰ã€'manual_task'ï¼ˆæ‰‹åŠ¨ä»»åŠ¡ï¼‰ã€
   |                                                          ^^
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/sync_session_service.py:68:56
   |
66 |         Args:
67 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¯é€‰å€¼ï¼š'manual_single'ï¼ˆæ‰‹åŠ¨å•ä¸ªï¼‰ã€
68 |                 'manual_batch'ï¼ˆæ‰‹åŠ¨æ‰¹é‡ï¼‰ã€'manual_task'ï¼ˆæ‰‹åŠ¨ä»»åŠ¡ï¼‰ã€
   |                                                                    ^^
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/sync_session_service.py:69:33
   |
67 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¯é€‰å€¼ï¼š'manual_single'ï¼ˆæ‰‹åŠ¨å•ä¸ªï¼‰ã€
68 |                 'manual_batch'ï¼ˆæ‰‹åŠ¨æ‰¹é‡ï¼‰ã€'manual_task'ï¼ˆæ‰‹åŠ¨ä»»åŠ¡ï¼‰ã€
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
   |                                 ^^
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
71 |                 'config'ï¼ˆé…ç½®ï¼‰ã€'aggregation'ï¼ˆèšåˆï¼‰ã€'other'ï¼ˆå…¶ä»–ï¼‰ï¼Œé»˜è®¤ä¸º 'account'ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/sync_session_service.py:69:38
   |
67 |             sync_type: åŒæ­¥æ“ä½œæ–¹å¼ï¼Œå¯é€‰å€¼ï¼š'manual_single'ï¼ˆæ‰‹åŠ¨å•ä¸ªï¼‰ã€
68 |                 'manual_batch'ï¼ˆæ‰‹åŠ¨æ‰¹é‡ï¼‰ã€'manual_task'ï¼ˆæ‰‹åŠ¨ä»»åŠ¡ï¼‰ã€
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
   |                                           ^^
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
71 |                 'config'ï¼ˆé…ç½®ï¼‰ã€'aggregation'ï¼ˆèšåˆï¼‰ã€'other'ï¼ˆå…¶ä»–ï¼‰ï¼Œé»˜è®¤ä¸º 'account'ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/sync_session_service.py:70:32
   |
68 |                 'manual_batch'ï¼ˆæ‰‹åŠ¨æ‰¹é‡ï¼‰ã€'manual_task'ï¼ˆæ‰‹åŠ¨ä»»åŠ¡ï¼‰ã€
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
   |                                    ^^
71 |                 'config'ï¼ˆé…ç½®ï¼‰ã€'aggregation'ï¼ˆèšåˆï¼‰ã€'other'ï¼ˆå…¶ä»–ï¼‰ï¼Œé»˜è®¤ä¸º 'account'ã€‚
72 |             created_by: åˆ›å»ºç”¨æˆ· IDï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/services/sync_session_service.py:70:36
   |
68 |                 'manual_batch'ï¼ˆæ‰‹åŠ¨æ‰¹é‡ï¼‰ã€'manual_task'ï¼ˆæ‰‹åŠ¨ä»»åŠ¡ï¼‰ã€
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
   |                                            ^^
71 |                 'config'ï¼ˆé…ç½®ï¼‰ã€'aggregation'ï¼ˆèšåˆï¼‰ã€'other'ï¼ˆå…¶ä»–ï¼‰ï¼Œé»˜è®¤ä¸º 'account'ã€‚
72 |             created_by: åˆ›å»ºç”¨æˆ· IDï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/sync_session_service.py:70:46
   |
68 |                 'manual_batch'ï¼ˆæ‰‹åŠ¨æ‰¹é‡ï¼‰ã€'manual_task'ï¼ˆæ‰‹åŠ¨ä»»åŠ¡ï¼‰ã€
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
   |                                                       ^^
71 |                 'config'ï¼ˆé…ç½®ï¼‰ã€'aggregation'ï¼ˆèšåˆï¼‰ã€'other'ï¼ˆå…¶ä»–ï¼‰ï¼Œé»˜è®¤ä¸º 'account'ã€‚
72 |             created_by: åˆ›å»ºç”¨æˆ· IDï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/sync_session_service.py:70:49
   |
68 |                 'manual_batch'ï¼ˆæ‰‹åŠ¨æ‰¹é‡ï¼‰ã€'manual_task'ï¼ˆæ‰‹åŠ¨ä»»åŠ¡ï¼‰ã€
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
   |                                                             ^^
71 |                 'config'ï¼ˆé…ç½®ï¼‰ã€'aggregation'ï¼ˆèšåˆï¼‰ã€'other'ï¼ˆå…¶ä»–ï¼‰ï¼Œé»˜è®¤ä¸º 'account'ã€‚
72 |             created_by: åˆ›å»ºç”¨æˆ· IDï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/sync_session_service.py:70:61
   |
68 |                 'manual_batch'ï¼ˆæ‰‹åŠ¨æ‰¹é‡ï¼‰ã€'manual_task'ï¼ˆæ‰‹åŠ¨ä»»åŠ¡ï¼‰ã€
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
   |                                                                           ^^
71 |                 'config'ï¼ˆé…ç½®ï¼‰ã€'aggregation'ï¼ˆèšåˆï¼‰ã€'other'ï¼ˆå…¶ä»–ï¼‰ï¼Œé»˜è®¤ä¸º 'account'ã€‚
72 |             created_by: åˆ›å»ºç”¨æˆ· IDï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/sync_session_service.py:70:64
   |
68 |                 'manual_batch'ï¼ˆæ‰‹åŠ¨æ‰¹é‡ï¼‰ã€'manual_task'ï¼ˆæ‰‹åŠ¨ä»»åŠ¡ï¼‰ã€
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
   |                                                                                 ^^
71 |                 'config'ï¼ˆé…ç½®ï¼‰ã€'aggregation'ï¼ˆèšåˆï¼‰ã€'other'ï¼ˆå…¶ä»–ï¼‰ï¼Œé»˜è®¤ä¸º 'account'ã€‚
72 |             created_by: åˆ›å»ºç”¨æˆ· IDï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/sync_session_service.py:71:25
   |
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
71 |                 'config'ï¼ˆé…ç½®ï¼‰ã€'aggregation'ï¼ˆèšåˆï¼‰ã€'other'ï¼ˆå…¶ä»–ï¼‰ï¼Œé»˜è®¤ä¸º 'account'ã€‚
   |                         ^^
72 |             created_by: åˆ›å»ºç”¨æˆ· IDï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/sync_session_service.py:71:28
   |
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
71 |                 'config'ï¼ˆé…ç½®ï¼‰ã€'aggregation'ï¼ˆèšåˆï¼‰ã€'other'ï¼ˆå…¶ä»–ï¼‰ï¼Œé»˜è®¤ä¸º 'account'ã€‚
   |                               ^^
72 |             created_by: åˆ›å»ºç”¨æˆ· IDï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/sync_session_service.py:71:43
   |
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
71 |                 'config'ï¼ˆé…ç½®ï¼‰ã€'aggregation'ï¼ˆèšåˆï¼‰ã€'other'ï¼ˆå…¶ä»–ï¼‰ï¼Œé»˜è®¤ä¸º 'account'ã€‚
   |                                                ^^
72 |             created_by: åˆ›å»ºç”¨æˆ· IDï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/sync_session_service.py:71:46
   |
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
71 |                 'config'ï¼ˆé…ç½®ï¼‰ã€'aggregation'ï¼ˆèšåˆï¼‰ã€'other'ï¼ˆå…¶ä»–ï¼‰ï¼Œé»˜è®¤ä¸º 'account'ã€‚
   |                                                      ^^
72 |             created_by: åˆ›å»ºç”¨æˆ· IDï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/services/sync_session_service.py:71:55
   |
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
71 |                 'config'ï¼ˆé…ç½®ï¼‰ã€'aggregation'ï¼ˆèšåˆï¼‰ã€'other'ï¼ˆå…¶ä»–ï¼‰ï¼Œé»˜è®¤ä¸º 'account'ã€‚
   |                                                                 ^^
72 |             created_by: åˆ›å»ºç”¨æˆ· IDï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/services/sync_session_service.py:71:58
   |
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
71 |                 'config'ï¼ˆé…ç½®ï¼‰ã€'aggregation'ï¼ˆèšåˆï¼‰ã€'other'ï¼ˆå…¶ä»–ï¼‰ï¼Œé»˜è®¤ä¸º 'account'ã€‚
   |                                                                       ^^
72 |             created_by: åˆ›å»ºç”¨æˆ· IDï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/sync_session_service.py:71:59
   |
69 |                 'scheduled_task'ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
71 |                 'config'ï¼ˆé…ç½®ï¼‰ã€'aggregation'ï¼ˆèšåˆï¼‰ã€'other'ï¼ˆå…¶ä»–ï¼‰ï¼Œé»˜è®¤ä¸º 'account'ã€‚
   |                                                                         ^^
72 |             created_by: åˆ›å»ºç”¨æˆ· IDï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/services/sync_session_service.py:72:32
   |
70 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ï¼ˆè´¦æˆ·ï¼‰ã€'capacity'ï¼ˆå®¹é‡ï¼‰ã€
71 |                 'config'ï¼ˆé…ç½®ï¼‰ã€'aggregation'ï¼ˆèšåˆï¼‰ã€'other'ï¼ˆå…¶ä»–ï¼‰ï¼Œé»˜è®¤ä¸º 'account'ã€‚
72 |             created_by: åˆ›å»ºç”¨æˆ· IDï¼Œå¯é€‰ã€‚
   |                                    ^^
73 |
74 |         Returns:
   |

TRY300 Consider moving this statement to an `else` block
  --> app/services/sync_session_service.py:95:13
   |
93 |             )
94 |
95 |             return session
   |             ^^^^^^^^^^^^^^
96 |         except Exception as e:
97 |             db.session.rollback()
   |

E501 Line too long (137 > 120)
   --> app/services/sync_session_service.py:107:121
    |
105 | â€¦
106 | â€¦
107 | â€¦s: list[int], sync_category: str = "account") -> list[SyncInstanceRecord]:
    |                                                           ^^^^^^^^^^^^^^^^^
108 | â€¦
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:110:29
    |
108 |         """ä¸ºä¼šè¯æ·»åŠ å®žä¾‹è®°å½•ã€‚.
109 |
110 |         æ ¹æ®å®žä¾‹ ID åˆ—è¡¨æ‰¹é‡åˆ›å»ºå®žä¾‹åŒæ­¥è®°å½•ï¼Œå¹¶å…³è”åˆ°æŒ‡å®šä¼šè¯ã€‚
    |                                             ^^
111 |
112 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:115:32
    |
113 |             session_id: ä¼šè¯ IDã€‚
114 |             instance_ids: å®žä¾‹ ID åˆ—è¡¨ã€‚
115 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ã€'capacity'ã€'config'ã€
    |                                    ^^
116 |                 'aggregation'ã€'other'ï¼Œé»˜è®¤ä¸º 'account'ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/services/sync_session_service.py:115:36
    |
113 |             session_id: ä¼šè¯ IDã€‚
114 |             instance_ids: å®žä¾‹ ID åˆ—è¡¨ã€‚
115 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ã€'capacity'ã€'config'ã€
    |                                            ^^
116 |                 'aggregation'ã€'other'ï¼Œé»˜è®¤ä¸º 'account'ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:116:38
    |
114 |             instance_ids: å®žä¾‹ ID åˆ—è¡¨ã€‚
115 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¯é€‰å€¼ï¼š'account'ã€'capacity'ã€'config'ã€
116 |                 'aggregation'ã€'other'ï¼Œé»˜è®¤ä¸º 'account'ã€‚
    |                                       ^^
117 |
118 |         Returns:
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/sync_session_service.py:152:13
    |
150 |             )
151 |
152 |             return records
    |             ^^^^^^^^^^^^^^
153 |         except Exception as e:
154 |             db.session.rollback()
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:167:22
    |
165 |         """å¼€å§‹å®žä¾‹åŒæ­¥ã€‚.
166 |
167 |         å°†å®žä¾‹è®°å½•çŠ¶æ€æ ‡è®°ä¸ºåŒæ­¥ä¸­ï¼Œå¹¶è®°å½•å¼€å§‹æ—¶é—´ã€‚
    |                                   ^^
168 |
169 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:173:22
    |
172 |         Returns:
173 |             æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥æˆ–è®°å½•ä¸å­˜åœ¨è¿”å›ž Falseã€‚
    |                          ^^
174 |
175 |         """
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/sync_session_service.py:192:13
    |
190 |             )
191 |
192 |             return True
    |             ^^^^^^^^^^^
193 |         except Exception as e:
194 |             db.session.rollback()
    |

PLR0913 Too many arguments in function definition (6 > 5)
   --> app/services/sync_session_service.py:203:9
    |
201 |             return False
202 |
203 |     def complete_instance_sync(
    |         ^^^^^^^^^^^^^^^^^^^^^^
204 |         self,
205 |         record_id: int,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:214:21
    |
212 |         """å®Œæˆå®žä¾‹åŒæ­¥ã€‚.
213 |
214 |         å°†å®žä¾‹è®°å½•æ ‡è®°ä¸ºå®ŒæˆçŠ¶æ€ï¼Œè®°å½•åŒæ­¥ç»Ÿè®¡ä¿¡æ¯ï¼Œå¹¶æ›´æ–°ä¼šè¯ç»Ÿè®¡ã€‚
    |                                 ^^
215 |
216 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:214:30
    |
212 |         """å®Œæˆå®žä¾‹åŒæ­¥ã€‚.
213 |
214 |         å°†å®žä¾‹è®°å½•æ ‡è®°ä¸ºå®ŒæˆçŠ¶æ€ï¼Œè®°å½•åŒæ­¥ç»Ÿè®¡ä¿¡æ¯ï¼Œå¹¶æ›´æ–°ä¼šè¯ç»Ÿè®¡ã€‚
    |                                                   ^^
215 |
216 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:218:34
    |
216 |         Args:
217 |             record_id: å®žä¾‹è®°å½• IDã€‚
218 |             items_synced: åŒæ­¥çš„é¡¹ç›®æ€»æ•°ï¼Œé»˜è®¤ä¸º 0ã€‚
    |                                         ^^
219 |             items_created: æ–°å¢žçš„é¡¹ç›®æ•°é‡ï¼Œé»˜è®¤ä¸º 0ã€‚
220 |             items_updated: æ›´æ–°çš„é¡¹ç›®æ•°é‡ï¼Œé»˜è®¤ä¸º 0ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:219:35
    |
217 |             record_id: å®žä¾‹è®°å½• IDã€‚
218 |             items_synced: åŒæ­¥çš„é¡¹ç›®æ€»æ•°ï¼Œé»˜è®¤ä¸º 0ã€‚
219 |             items_created: æ–°å¢žçš„é¡¹ç›®æ•°é‡ï¼Œé»˜è®¤ä¸º 0ã€‚
    |                                          ^^
220 |             items_updated: æ›´æ–°çš„é¡¹ç›®æ•°é‡ï¼Œé»˜è®¤ä¸º 0ã€‚
221 |             items_deleted: åˆ é™¤çš„é¡¹ç›®æ•°é‡ï¼Œé»˜è®¤ä¸º 0ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:220:35
    |
218 |             items_synced: åŒæ­¥çš„é¡¹ç›®æ€»æ•°ï¼Œé»˜è®¤ä¸º 0ã€‚
219 |             items_created: æ–°å¢žçš„é¡¹ç›®æ•°é‡ï¼Œé»˜è®¤ä¸º 0ã€‚
220 |             items_updated: æ›´æ–°çš„é¡¹ç›®æ•°é‡ï¼Œé»˜è®¤ä¸º 0ã€‚
    |                                          ^^
221 |             items_deleted: åˆ é™¤çš„é¡¹ç›®æ•°é‡ï¼Œé»˜è®¤ä¸º 0ã€‚
222 |             sync_details: åŒæ­¥è¯¦æƒ…å­—å…¸ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:221:35
    |
219 |             items_created: æ–°å¢žçš„é¡¹ç›®æ•°é‡ï¼Œé»˜è®¤ä¸º 0ã€‚
220 |             items_updated: æ›´æ–°çš„é¡¹ç›®æ•°é‡ï¼Œé»˜è®¤ä¸º 0ã€‚
221 |             items_deleted: åˆ é™¤çš„é¡¹ç›®æ•°é‡ï¼Œé»˜è®¤ä¸º 0ã€‚
    |                                          ^^
222 |             sync_details: åŒæ­¥è¯¦æƒ…å­—å…¸ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:222:33
    |
220 |             items_updated: æ›´æ–°çš„é¡¹ç›®æ•°é‡ï¼Œé»˜è®¤ä¸º 0ã€‚
221 |             items_deleted: åˆ é™¤çš„é¡¹ç›®æ•°é‡ï¼Œé»˜è®¤ä¸º 0ã€‚
222 |             sync_details: åŒæ­¥è¯¦æƒ…å­—å…¸ï¼Œå¯é€‰ã€‚
    |                                       ^^
223 |
224 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:225:22
    |
224 |         Returns:
225 |             æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥æˆ–è®°å½•ä¸å­˜åœ¨è¿”å›ž Falseã€‚
    |                          ^^
226 |
227 |         """
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/sync_session_service.py:257:13
    |
255 |             )
256 |
257 |             return True
    |             ^^^^^^^^^^^
258 |         except Exception as e:
259 |             db.session.rollback()
    |

E501 Line too long (121 > 120)
   --> app/services/sync_session_service.py:268:121
    |
266 |             return False
267 |
268 |     def fail_instance_sync(self, record_id: int, error_message: str, sync_details: dict[str, Any] | None = None) -> bool:
    |                                                                                                                         ^
269 |         """æ ‡è®°å®žä¾‹åŒæ­¥å¤±è´¥ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:271:21
    |
269 |         """æ ‡è®°å®žä¾‹åŒæ­¥å¤±è´¥ã€‚.
270 |
271 |         å°†å®žä¾‹è®°å½•æ ‡è®°ä¸ºå¤±è´¥çŠ¶æ€ï¼Œè®°å½•é”™è¯¯ä¿¡æ¯ï¼Œå¹¶æ›´æ–°ä¼šè¯ç»Ÿè®¡ã€‚
    |                                 ^^
272 |
273 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:271:28
    |
269 |         """æ ‡è®°å®žä¾‹åŒæ­¥å¤±è´¥ã€‚.
270 |
271 |         å°†å®žä¾‹è®°å½•æ ‡è®°ä¸ºå¤±è´¥çŠ¶æ€ï¼Œè®°å½•é”™è¯¯ä¿¡æ¯ï¼Œå¹¶æ›´æ–°ä¼šè¯ç»Ÿè®¡ã€‚
    |                                               ^^
272 |
273 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:276:33
    |
274 |             record_id: å®žä¾‹è®°å½• IDã€‚
275 |             error_message: é”™è¯¯ä¿¡æ¯æè¿°ã€‚
276 |             sync_details: åŒæ­¥è¯¦æƒ…å­—å…¸ï¼Œå¯é€‰ã€‚
    |                                       ^^
277 |
278 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:279:22
    |
278 |         Returns:
279 |             æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥æˆ–è®°å½•ä¸å­˜åœ¨è¿”å›ž Falseã€‚
    |                          ^^
280 |
281 |         """
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/sync_session_service.py:302:13
    |
300 |             )
301 |
302 |             return True
    |             ^^^^^^^^^^^
303 |         except Exception as e:
304 |             db.session.rollback()
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:316:24
    |
314 |         """æ›´æ–°ä¼šè¯ç»Ÿè®¡ä¿¡æ¯ã€‚.
315 |
316 |         ç»Ÿè®¡ä¼šè¯ä¸­æˆåŠŸå’Œå¤±è´¥çš„å®žä¾‹æ•°é‡ï¼Œå¹¶æ›´æ–°ä¼šè¯å¯¹è±¡ã€‚
    |                                       ^^
317 |
318 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:368:19
    |
367 |         Returns:
368 |             å®žä¾‹è®°å½•åˆ—è¡¨ï¼ŒæŸ¥è¯¢å¤±è´¥æ—¶è¿”å›žç©ºåˆ—è¡¨ã€‚
    |                         ^^
369 |
370 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:389:17
    |
388 |         Returns:
389 |             ä¼šè¯å¯¹è±¡ï¼Œä¸å­˜åœ¨æˆ–æŸ¥è¯¢å¤±è´¥æ—¶è¿”å›ž Noneã€‚
    |                     ^^
390 |
391 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:407:28
    |
406 |         Args:
407 |             sync_type: åŒæ­¥ç±»åž‹ï¼Œå¦‚ 'manual_single'ã€'manual_batch'ã€‚
    |                                ^^
408 |             limit: é™åˆ¶æ•°é‡ï¼Œé»˜è®¤ä¸º 50ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:408:24
    |
406 |         Args:
407 |             sync_type: åŒæ­¥ç±»åž‹ï¼Œå¦‚ 'manual_single'ã€'manual_batch'ã€‚
408 |             limit: é™åˆ¶æ•°é‡ï¼Œé»˜è®¤ä¸º 50ã€‚
    |                            ^^
409 |
410 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:411:17
    |
410 |         Returns:
411 |             ä¼šè¯åˆ—è¡¨ï¼ŒæŸ¥è¯¢å¤±è´¥æ—¶è¿”å›žç©ºåˆ—è¡¨ã€‚
    |                     ^^
412 |
413 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:429:32
    |
428 |         Args:
429 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¦‚ 'account'ã€'capacity'ã€‚
    |                                    ^^
430 |             limit: é™åˆ¶æ•°é‡ï¼Œé»˜è®¤ä¸º 50ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:430:24
    |
428 |         Args:
429 |             sync_category: åŒæ­¥åˆ†ç±»ï¼Œå¦‚ 'account'ã€'capacity'ã€‚
430 |             limit: é™åˆ¶æ•°é‡ï¼Œé»˜è®¤ä¸º 50ã€‚
    |                            ^^
431 |
432 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:433:17
    |
432 |         Returns:
433 |             ä¼šè¯åˆ—è¡¨ï¼ŒæŸ¥è¯¢å¤±è´¥æ—¶è¿”å›žç©ºåˆ—è¡¨ã€‚
    |                     ^^
434 |
435 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:453:24
    |
452 |         Args:
453 |             limit: é™åˆ¶æ•°é‡ï¼Œé»˜è®¤ä¸º 20ã€‚
    |                            ^^
454 |
455 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:456:17
    |
455 |         Returns:
456 |             ä¼šè¯åˆ—è¡¨ï¼ŒæŸ¥è¯¢å¤±è´¥æ—¶è¿”å›žç©ºåˆ—è¡¨ã€‚
    |                     ^^
457 |
458 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/services/sync_session_service.py:479:22
    |
478 |         Returns:
479 |             æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥æˆ–ä¼šè¯ä¸å­˜åœ¨è¿”å›ž Falseã€‚
    |                          ^^
480 |
481 |         """
    |

TRY300 Consider moving this statement to an `else` block
   --> app/services/sync_session_service.py:495:13
    |
493 |                 self.sync_logger.info("å–æ¶ˆåŒæ­¥ä¼šè¯", module="sync_session", session_id=session_id)
494 |
495 |             return True
    |             ^^^^^^^^^^^
496 |         except Exception as e:
497 |             db.session.rollback()
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/tasks/__init__.py:3:12
  |
1 | """å®šæ—¶ä»»åŠ¡æ¨¡å—ã€‚.
2 |
3 | åŒ…å«å„ç§å®šæ—¶ä»»åŠ¡çš„å®žçŽ°ï¼Œç”± APScheduler è°ƒåº¦æ‰§è¡Œã€‚
  |                       ^^
4 |
5 | ä¸»è¦ä»»åŠ¡ï¼š
  |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/tasks/__init__.py:5:5
  |
3 | åŒ…å«å„ç§å®šæ—¶ä»»åŠ¡çš„å®žçŽ°ï¼Œç”± APScheduler è°ƒåº¦æ‰§è¡Œã€‚
4 |
5 | ä¸»è¦ä»»åŠ¡ï¼š
  |         ^^
6 | - log_cleanup_tasks: æ—¥å¿—æ¸…ç†ä»»åŠ¡
7 | - accounts_sync_tasks: è´¦æˆ·åŒæ­¥ä»»åŠ¡
  |

PLR0915 Too many statements (66 > 50)
  --> app/tasks/accounts_sync_tasks.py:15:5
   |
15 | def sync_accounts(manual_run: bool = False, created_by: int | None = None, **kwargs: Any) -> None:
   |     ^^^^^^^^^^^^^
16 |     """åŒæ­¥è´¦æˆ·ä»»åŠ¡ - åŒæ­¥æ‰€æœ‰å®žä¾‹çš„è´¦æˆ·ä¿¡æ¯ã€‚.
   |

FBT001 Boolean-typed positional argument in function definition
  --> app/tasks/accounts_sync_tasks.py:15:19
   |
15 | def sync_accounts(manual_run: bool = False, created_by: int | None = None, **kwargs: Any) -> None:
   |                   ^^^^^^^^^^
16 |     """åŒæ­¥è´¦æˆ·ä»»åŠ¡ - åŒæ­¥æ‰€æœ‰å®žä¾‹çš„è´¦æˆ·ä¿¡æ¯ã€‚.
   |

FBT002 Boolean default positional argument in function definition
  --> app/tasks/accounts_sync_tasks.py:15:19
   |
15 | def sync_accounts(manual_run: bool = False, created_by: int | None = None, **kwargs: Any) -> None:
   |                   ^^^^^^^^^^
16 |     """åŒæ­¥è´¦æˆ·ä»»åŠ¡ - åŒæ­¥æ‰€æœ‰å®žä¾‹çš„è´¦æˆ·ä¿¡æ¯ã€‚.
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `**kwargs`
  --> app/tasks/accounts_sync_tasks.py:15:86
   |
15 | def sync_accounts(manual_run: bool = False, created_by: int | None = None, **kwargs: Any) -> None:
   |                                                                                      ^^^
16 |     """åŒæ­¥è´¦æˆ·ä»»åŠ¡ - åŒæ­¥æ‰€æœ‰å®žä¾‹çš„è´¦æˆ·ä¿¡æ¯ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/accounts_sync_tasks.py:18:17
   |
16 |     """åŒæ­¥è´¦æˆ·ä»»åŠ¡ - åŒæ­¥æ‰€æœ‰å®žä¾‹çš„è´¦æˆ·ä¿¡æ¯ã€‚.
17 |
18 |     éåŽ†æ‰€æœ‰å¯ç”¨çš„æ•°æ®åº“å®žä¾‹ï¼ŒåŒæ­¥è´¦æˆ·æ¸…å•å’Œæƒé™ä¿¡æ¯ã€‚
   |                             ^^
19 |     åˆ›å»ºåŒæ­¥ä¼šè¯è®°å½•ï¼Œè·Ÿè¸ªæ¯ä¸ªå®žä¾‹çš„åŒæ­¥çŠ¶æ€å’Œç»“æžœã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/accounts_sync_tasks.py:19:13
   |
18 |     éåŽ†æ‰€æœ‰å¯ç”¨çš„æ•°æ®åº“å®žä¾‹ï¼ŒåŒæ­¥è´¦æˆ·æ¸…å•å’Œæƒé™ä¿¡æ¯ã€‚
19 |     åˆ›å»ºåŒæ­¥ä¼šè¯è®°å½•ï¼Œè·Ÿè¸ªæ¯ä¸ªå®žä¾‹çš„åŒæ­¥çŠ¶æ€å’Œç»“æžœã€‚
   |                     ^^
20 |
21 |     Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/accounts_sync_tasks.py:22:28
   |
21 |     Args:
22 |         manual_run: æ˜¯å¦ä¸ºæ‰‹åŠ¨è§¦å‘ï¼Œé»˜è®¤ Falseï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
   |                                   ^^
23 |         created_by: è§¦å‘ç”¨æˆ· IDï¼Œæ‰‹åŠ¨è§¦å‘æ—¶å¿…å¡«ã€‚
24 |         **kwargs: å…¶ä»–å¯é€‰å‚æ•°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/tasks/accounts_sync_tasks.py:22:37
   |
21 |     Args:
22 |         manual_run: æ˜¯å¦ä¸ºæ‰‹åŠ¨è§¦å‘ï¼Œé»˜è®¤ Falseï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
   |                                               ^^
23 |         created_by: è§¦å‘ç”¨æˆ· IDï¼Œæ‰‹åŠ¨è§¦å‘æ—¶å¿…å¡«ã€‚
24 |         **kwargs: å…¶ä»–å¯é€‰å‚æ•°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/tasks/accounts_sync_tasks.py:22:42
   |
21 |     Args:
22 |         manual_run: æ˜¯å¦ä¸ºæ‰‹åŠ¨è§¦å‘ï¼Œé»˜è®¤ Falseï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
   |                                                         ^^
23 |         created_by: è§¦å‘ç”¨æˆ· IDï¼Œæ‰‹åŠ¨è§¦å‘æ—¶å¿…å¡«ã€‚
24 |         **kwargs: å…¶ä»–å¯é€‰å‚æ•°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/accounts_sync_tasks.py:23:28
   |
21 |     Args:
22 |         manual_run: æ˜¯å¦ä¸ºæ‰‹åŠ¨è§¦å‘ï¼Œé»˜è®¤ Falseï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰ã€‚
23 |         created_by: è§¦å‘ç”¨æˆ· IDï¼Œæ‰‹åŠ¨è§¦å‘æ—¶å¿…å¡«ã€‚
   |                                ^^
24 |         **kwargs: å…¶ä»–å¯é€‰å‚æ•°ã€‚
   |

E501 Line too long (136 > 120)
   --> app/tasks/accounts_sync_tasks.py:115:121
    |
113 | â€¦         continue
114 | â€¦     except PermissionSyncError as permission_error:
115 | â€¦         sync_session_service.fail_instance_sync(record.id, str(permission_error), sync_details=permission_error.summary)
    |                                                                                                           ^^^^^^^^^^^^^^^^
116 | â€¦         sync_logger.exception(
117 | â€¦             "è´¦æˆ·åŒæ­¥æƒé™é˜¶æ®µå¤±è´¥",
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/tasks/accounts_sync_tasks.py:169:33
    |
167 |                     sync_session_service.fail_instance_sync(record.id, str(exc))
168 |
169 |                     sync_logger.error(
    |                                 ^^^^^
170 |                         "å®žä¾‹è´¦æˆ·åŒæ­¥å¼‚å¸¸",
171 |                         module="accounts_sync",
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/tasks/accounts_sync_tasks.py:205:25
    |
203 |                 db.session.commit()
204 |
205 |             sync_logger.error(
    |                         ^^^^^
206 |                 "è´¦æˆ·åŒæ­¥ä»»åŠ¡å¤±è´¥",
207 |                 module="accounts_sync",
    |

D205 1 blank line required between summary line and description
 --> app/tasks/capacity_aggregation_tasks.py:1:1
  |
1 | / """æ•°æ®åº“å¤§å°ç»Ÿè®¡èšåˆå®šæ—¶ä»»åŠ¡
2 | | è´Ÿè´£è®¡ç®—æ¯å‘¨ã€æ¯æœˆã€æ¯å­£åº¦çš„ç»Ÿè®¡èšåˆæ•°æ®.
3 | | """
  | |___^
4 |
5 |   from collections.abc import Sequence
  |
help: Insert single blank line

ANN001 Missing type annotation for function argument `logger`
  --> app/tasks/capacity_aggregation_tasks.py:23:54
   |
23 | def _select_periods(requested: Sequence[str] | None, logger, allowed_periods: Sequence[str]) -> list[str]:
   |                                                      ^^^^^^
24 |     """æ ¹æ®è¯·æ±‚çš„å‘¨æœŸè¿”å›žæœ‰æ•ˆå‘¨æœŸåˆ—è¡¨ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/capacity_aggregation_tasks.py:27:29
   |
26 |     Args:
27 |         requested: ç”¨æˆ·æŒ‡å®šçš„å‘¨æœŸé›†åˆï¼ŒNone è¡¨ç¤ºå…¨éƒ¨ã€‚
   |                                      ^^
28 |         logger: ç”¨äºŽè®°å½•æœªçŸ¥å‘¨æœŸçš„ loggerã€‚
29 |         allowed_periods: æœåŠ¡å¯ç”¨çš„å‘¨æœŸåºåˆ—ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/capacity_aggregation_tasks.py:74:16
   |
73 |     Returns:
74 |         å·²å¤„ç†è®°å½•æ•°é‡ï¼Œç¼ºå¤±æ—¶è¿”å›ž 0ã€‚
   |                       ^^
75 |
76 |     """
   |

C901 `calculate_database_size_aggregations` is too complex (26 > 10)
   --> app/tasks/capacity_aggregation_tasks.py:105:5
    |
105 | def calculate_database_size_aggregations(
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
106 |     manual_run: bool = False,
107 |     periods: list[str] | None = None,
    |

PLR0912 Too many branches (30 > 12)
   --> app/tasks/capacity_aggregation_tasks.py:105:5
    |
105 | def calculate_database_size_aggregations(
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
106 |     manual_run: bool = False,
107 |     periods: list[str] | None = None,
    |

PLR0915 Too many statements (119 > 50)
   --> app/tasks/capacity_aggregation_tasks.py:105:5
    |
105 | def calculate_database_size_aggregations(
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
106 |     manual_run: bool = False,
107 |     periods: list[str] | None = None,
    |

FBT001 Boolean-typed positional argument in function definition
   --> app/tasks/capacity_aggregation_tasks.py:106:5
    |
105 | def calculate_database_size_aggregations(
106 |     manual_run: bool = False,
    |     ^^^^^^^^^^
107 |     periods: list[str] | None = None,
108 |     created_by: int | None = None,
    |

FBT002 Boolean default positional argument in function definition
   --> app/tasks/capacity_aggregation_tasks.py:106:5
    |
105 | def calculate_database_size_aggregations(
106 |     manual_run: bool = False,
    |     ^^^^^^^^^^
107 |     periods: list[str] | None = None,
108 |     created_by: int | None = None,
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/tasks/capacity_aggregation_tasks.py:110:19
    |
108 |     created_by: int | None = None,
109 | ) -> dict[str, Any]:
110 |     """è®¡ç®—æ•°æ®åº“å¤§å°ç»Ÿè®¡èšåˆï¼ˆæŒ‰æ—¥/å‘¨/æœˆ/å­£ä¾æ¬¡æ‰§è¡Œï¼‰ã€‚.
    |                              ^^
111 |
112 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/tasks/capacity_aggregation_tasks.py:110:32
    |
108 |     created_by: int | None = None,
109 | ) -> dict[str, Any]:
110 |     """è®¡ç®—æ•°æ®åº“å¤§å°ç»Ÿè®¡èšåˆï¼ˆæŒ‰æ—¥/å‘¨/æœˆ/å­£ä¾æ¬¡æ‰§è¡Œï¼‰ã€‚.
    |                                                     ^^
111 |
112 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_aggregation_tasks.py:113:30
    |
112 |     Args:
113 |         manual_run: æ˜¯å¦ç”±ç”¨æˆ·æ‰‹åŠ¨è§¦å‘ï¼ŒTrue è¡¨ç¤ºæ‰‹åŠ¨æ‰§è¡Œã€‚
    |                                       ^^
114 |         periods: éœ€è¦è®¡ç®—çš„èšåˆå‘¨æœŸåˆ—è¡¨ï¼Œå–å€¼ daily/weekly/monthly/quarterlyï¼Œé»˜è®¤å…¨éƒ¨æ‰§è¡Œã€‚
115 |         created_by: æ‰‹åŠ¨è§¦å‘æ—¶è®°å½•çš„ç”¨æˆ· IDã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_aggregation_tasks.py:114:29
    |
112 |     Args:
113 |         manual_run: æ˜¯å¦ç”±ç”¨æˆ·æ‰‹åŠ¨è§¦å‘ï¼ŒTrue è¡¨ç¤ºæ‰‹åŠ¨æ‰§è¡Œã€‚
114 |         periods: éœ€è¦è®¡ç®—çš„èšåˆå‘¨æœŸåˆ—è¡¨ï¼Œå–å€¼ daily/weekly/monthly/quarterlyï¼Œé»˜è®¤å…¨éƒ¨æ‰§è¡Œã€‚
    |                                        ^^
115 |         created_by: æ‰‹åŠ¨è§¦å‘æ—¶è®°å½•çš„ç”¨æˆ· IDã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_aggregation_tasks.py:114:63
    |
112 |     Args:
113 |         manual_run: æ˜¯å¦ç”±ç”¨æˆ·æ‰‹åŠ¨è§¦å‘ï¼ŒTrue è¡¨ç¤ºæ‰‹åŠ¨æ‰§è¡Œã€‚
114 |         periods: éœ€è¦è®¡ç®—çš„èšåˆå‘¨æœŸåˆ—è¡¨ï¼Œå–å€¼ daily/weekly/monthly/quarterlyï¼Œé»˜è®¤å…¨éƒ¨æ‰§è¡Œã€‚
    |                                                                             ^^
115 |         created_by: æ‰‹åŠ¨è§¦å‘æ—¶è®°å½•çš„ç”¨æˆ· IDã€‚
    |

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/capacity_aggregation_tasks.py:121:5
    |
120 |     """
121 |     from app import create_app
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^
122 |     from app.services.sync_session_service import sync_session_service
123 |     from app.utils.structlog_config import get_sync_logger
    |

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/capacity_aggregation_tasks.py:122:5
    |
120 |     """
121 |     from app import create_app
122 |     from app.services.sync_session_service import sync_session_service
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
123 |     from app.utils.structlog_config import get_sync_logger
124 |     from app.utils.time_utils import time_utils
    |

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/capacity_aggregation_tasks.py:123:5
    |
121 |     from app import create_app
122 |     from app.services.sync_session_service import sync_session_service
123 |     from app.utils.structlog_config import get_sync_logger
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
124 |     from app.utils.time_utils import time_utils
    |

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/capacity_aggregation_tasks.py:124:5
    |
122 |     from app.services.sync_session_service import sync_session_service
123 |     from app.utils.structlog_config import get_sync_logger
124 |     from app.utils.time_utils import time_utils
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
125 |
126 |     app = create_app(init_scheduler_on_start=False)
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_aggregation_tasks.py:162:34
    |
160 |             if not selected_periods:
161 |                 sync_logger.warning(
162 |                     "æœªé€‰æ‹©ä»»ä½•æœ‰æ•ˆçš„èšåˆå‘¨æœŸï¼Œä»»åŠ¡ç›´æŽ¥å®Œæˆ",
    |                                              ^^
163 |                     module="aggregation_sync",
164 |                     requested_periods=periods,
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_aggregation_tasks.py:168:43
    |
166 |                 return {
167 |                     "status": STATUS_SKIPPED,
168 |                     "message": "æœªé€‰æ‹©æœ‰æ•ˆçš„èšåˆå‘¨æœŸï¼Œæœªæ‰§è¡Œç»Ÿè®¡ä»»åŠ¡",
    |                                                     ^^
169 |                     "metrics": {
170 |                         "aggregations_created": 0,
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_aggregation_tasks.py:177:24
    |
176 |             sync_logger.info(
177 |                 "æ‰¾åˆ°æ´»è·ƒå®žä¾‹ï¼Œå‡†å¤‡åˆ›å»ºåŒæ­¥ä¼šè¯",
    |                              ^^
178 |                 module="aggregation_sync",
179 |                 instance_count=len(active_instances),
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_aggregation_tasks.py:231:36
    |
229 |                 else:
230 |                     sync_logger.warning(
231 |                         "æœªæ‰¾åˆ°å®žä¾‹çš„åŒæ­¥è®°å½•ï¼Œè·³è¿‡å¼€å§‹æ ‡è®°",
    |                                              ^^
232 |                         module="aggregation_sync",
233 |                         session_id=session.session_id,
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_aggregation_tasks.py:405:56
    |
403 |             overall_status = STATUS_COMPLETED if failed_instances == 0 else STATUS_FAILED
404 |             message = (
405 |                 f"ç»Ÿè®¡èšåˆå®Œæˆ: æˆåŠŸ {successful_instances} ä¸ªå®žä¾‹ï¼Œå¤±è´¥ {failed_instances} ä¸ªå®žä¾‹"
    |                                                                   ^^
406 |                 if failed_instances
407 |                 else f"ç»Ÿè®¡èšåˆå®Œæˆï¼Œå…±å¤„ç† {successful_instances} ä¸ªå®žä¾‹"
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_aggregation_tasks.py:407:30
    |
405 |                 f"ç»Ÿè®¡èšåˆå®Œæˆ: æˆåŠŸ {successful_instances} ä¸ªå®žä¾‹ï¼Œå¤±è´¥ {failed_instances} ä¸ªå®žä¾‹"
406 |                 if failed_instances
407 |                 else f"ç»Ÿè®¡èšåˆå®Œæˆï¼Œå…±å¤„ç† {successful_instances} ä¸ªå®žä¾‹"
    |                                    ^^
408 |             )
    |

SIM105 Use `contextlib.suppress(Exception)` instead of `try`-`except`-`pass`
   --> app/tasks/capacity_aggregation_tasks.py:450:17
    |
448 |               )
449 |               if session is not None:
450 | /                 try:
451 | |                     db.session.rollback()
452 | |                 except Exception:  # pragma: no cover - é˜²å¾¡æ€§å¤„ç†
453 | |                     pass
    | |________________________^
454 |                   # å°†ä»å¤„äºŽè¿è¡ŒçŠ¶æ€çš„å®žä¾‹è®°å½•æ ‡è®°ä¸ºå¤±è´¥
455 |                   leftover_ids = (
    |
help: Replace `try`-`except`-`pass` with `with contextlib.suppress(Exception): ...`

S110 `try`-`except`-`pass` detected, consider logging the exception
   --> app/tasks/capacity_aggregation_tasks.py:452:17
    |
450 |                   try:
451 |                       db.session.rollback()
452 | /                 except Exception:  # pragma: no cover - é˜²å¾¡æ€§å¤„ç†
453 | |                     pass
    | |________________________^
454 |                   # å°†ä»å¤„äºŽè¿è¡ŒçŠ¶æ€çš„å®žä¾‹è®°å½•æ ‡è®°ä¸ºå¤±è´¥
455 |                   leftover_ids = (
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/tasks/capacity_aggregation_tasks.py:452:24
    |
450 |                 try:
451 |                     db.session.rollback()
452 |                 except Exception:  # pragma: no cover - é˜²å¾¡æ€§å¤„ç†
    |                        ^^^^^^^^^
453 |                     pass
454 |                 # å°†ä»å¤„äºŽè¿è¡ŒçŠ¶æ€çš„å®žä¾‹è®°å½•æ ‡è®°ä¸ºå¤±è´¥
    |

S112 `try`-`except`-`continue` detected, consider logging the exception
   --> app/tasks/capacity_aggregation_tasks.py:465:21
    |
463 |                               error_message=f"èšåˆä»»åŠ¡å¼‚å¸¸: {exc}",
464 |                           )
465 | /                     except Exception:
466 | |                         continue
    | |________________________________^
467 |                   session.status = "failed"
468 |                   session.completed_at = time_utils.now()
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/tasks/capacity_aggregation_tasks.py:465:28
    |
463 |                             error_message=f"èšåˆä»»åŠ¡å¼‚å¸¸: {exc}",
464 |                         )
465 |                     except Exception:
    |                            ^^^^^^^^^
466 |                         continue
467 |                 session.status = "failed"
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/tasks/capacity_aggregation_tasks.py:483:16
    |
481 |     """è®¡ç®—æŒ‡å®šå®žä¾‹çš„ç»Ÿè®¡èšåˆã€‚.
482 |
483 |     ä¸ºæŒ‡å®šå®žä¾‹è®¡ç®—æ‰€æœ‰å‘¨æœŸï¼ˆæ—¥/å‘¨/æœˆ/å­£ï¼‰çš„èšåˆæ•°æ®ã€‚
    |                           ^^
484 |
485 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/tasks/capacity_aggregation_tasks.py:483:24
    |
481 |     """è®¡ç®—æŒ‡å®šå®žä¾‹çš„ç»Ÿè®¡èšåˆã€‚.
482 |
483 |     ä¸ºæŒ‡å®šå®žä¾‹è®¡ç®—æ‰€æœ‰å‘¨æœŸï¼ˆæ—¥/å‘¨/æœˆ/å­£ï¼‰çš„èšåˆæ•°æ®ã€‚
    |                                        ^^
484 |
485 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_aggregation_tasks.py:489:15
    |
488 |     Returns:
489 |         èšåˆç»“æžœå­—å…¸ï¼ŒåŒ…å«çŠ¶æ€ã€æ¶ˆæ¯å’Œå„å‘¨æœŸçš„èšåˆè¯¦æƒ…ã€‚
    |                     ^^
490 |
491 |     """
    |

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/capacity_aggregation_tasks.py:492:5
    |
491 |     """
492 |     from app import create_app
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^
493 |
494 |     app = create_app(init_scheduler_on_start=False)
    |

TRY300 Consider moving this statement to an `else` block
   --> app/tasks/capacity_aggregation_tasks.py:532:13
    |
530 |                 message=result.get("message"),
531 |             )
532 |             return result
    |             ^^^^^^^^^^^^^
533 |
534 |         except Exception as exc:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/tasks/capacity_aggregation_tasks.py:534:16
    |
532 |             return result
533 |
534 |         except Exception as exc:
    |                ^^^^^^^^^
535 |             log_error(
536 |                 "è®¡ç®—å®žä¾‹ç»Ÿè®¡èšåˆå¤±è´¥",
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/tasks/capacity_aggregation_tasks.py:552:26
    |
551 |     Args:
552 |         period_type: å‘¨æœŸç±»åž‹ï¼ˆweekly=å‘¨ã€monthly=æœˆã€quarterly=å­£åº¦ï¼‰ã€‚
    |                              ^^
553 |         start_date: å‘¨æœŸå¼€å§‹æ—¥æœŸã€‚
554 |         end_date: å‘¨æœŸç»“æŸæ—¥æœŸã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/tasks/capacity_aggregation_tasks.py:552:58
    |
551 |     Args:
552 |         period_type: å‘¨æœŸç±»åž‹ï¼ˆweekly=å‘¨ã€monthly=æœˆã€quarterly=å­£åº¦ï¼‰ã€‚
    |                                                                     ^^
553 |         start_date: å‘¨æœŸå¼€å§‹æ—¥æœŸã€‚
554 |         end_date: å‘¨æœŸç»“æŸæ—¥æœŸã€‚
    |

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/capacity_aggregation_tasks.py:560:5
    |
559 |     """
560 |     from app import create_app
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^
561 |
562 |     app = create_app(init_scheduler_on_start=False)
    |

TRY300 Consider moving this statement to an `else` block
   --> app/tasks/capacity_aggregation_tasks.py:587:13
    |
585 |             )
586 |
587 |             return result
    |             ^^^^^^^^^^^^^
588 |
589 |         except Exception as exc:
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/tasks/capacity_aggregation_tasks.py:589:16
    |
587 |             return result
588 |
589 |         except Exception as exc:
    |                ^^^^^^^^^
590 |             log_error(
591 |                 "è®¡ç®—æŒ‡å®šå‘¨æœŸç»Ÿè®¡èšåˆå¤±è´¥",
    |

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/capacity_aggregation_tasks.py:612:5
    |
611 |     """
612 |     from app import create_app
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^
613 |
614 |     app = create_app(init_scheduler_on_start=False)
    |

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/capacity_aggregation_tasks.py:617:13
    |
615 |     with app.app_context():
616 |         try:
617 |             from sqlalchemy import desc, func
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
618 |
619 |             from app.models.database_size_aggregation import DatabaseSizeAggregation
    |

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/capacity_aggregation_tasks.py:619:13
    |
617 |             from sqlalchemy import desc, func
618 |
619 |             from app.models.database_size_aggregation import DatabaseSizeAggregation
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
620 |
621 |             # èŽ·å–ä»Šæ—¥èšåˆç»Ÿè®¡
    |

DTZ011 `datetime.date.today()` used
   --> app/tasks/capacity_aggregation_tasks.py:622:21
    |
621 |             # èŽ·å–ä»Šæ—¥èšåˆç»Ÿè®¡
622 |             today = date.today()
    |                     ^^^^^^^^^^^^
623 |
624 |             # èŽ·å–æœ€è¿‘èšåˆæ—¶é—´
    |
help: Use `datetime.datetime.now(tz=...).date()` instead

BLE001 Do not catch blind exception: `Exception`
   --> app/tasks/capacity_aggregation_tasks.py:646:16
    |
644 |             }
645 |
646 |         except Exception as exc:
    |                ^^^^^^^^^
647 |             log_error(
648 |                 "èŽ·å–èšåˆçŠ¶æ€å¤±è´¥",
    |

PLR2004 Magic value used in comparison, consider replacing `23` with a constant variable
   --> app/tasks/capacity_aggregation_tasks.py:675:96
    |
673 |         # æ£€æŸ¥èšåˆæ—¶é—´é…ç½®
674 |         aggregation_hour = getattr(Config, "AGGREGATION_HOUR", 4)
675 |         if not isinstance(aggregation_hour, int) or aggregation_hour < 0 or aggregation_hour > 23:
    |                                                                                                ^^
676 |             config_issues.append("èšåˆæ—¶é—´é…ç½®æ— æ•ˆï¼Œåº”ä¸º0-23ä¹‹é—´çš„æ•´æ•°")
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_aggregation_tasks.py:676:43
    |
674 |         aggregation_hour = getattr(Config, "AGGREGATION_HOUR", 4)
675 |         if not isinstance(aggregation_hour, int) or aggregation_hour < 0 or aggregation_hour > 23:
676 |             config_issues.append("èšåˆæ—¶é—´é…ç½®æ— æ•ˆï¼Œåº”ä¸º0-23ä¹‹é—´çš„æ•´æ•°")
    |                                                   ^^
677 |
678 |         status = STATUS_COMPLETED if not config_issues else STATUS_FAILED
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/tasks/capacity_aggregation_tasks.py:691:12
    |
689 |         }
690 |
691 |     except Exception as exc:
    |            ^^^^^^^^^
692 |         log_error(
693 |             "éªŒè¯èšåˆé…ç½®å¤±è´¥",
    |

D205 1 blank line required between summary line and description
 --> app/tasks/capacity_collection_tasks.py:1:1
  |
1 | / """æ•°æ®åº“å¤§å°é‡‡é›†å®šæ—¶ä»»åŠ¡
2 | | è´Ÿè´£æ¯æ—¥è‡ªåŠ¨é‡‡é›†æ‰€æœ‰æ•°æ®åº“å®žä¾‹çš„å¤§å°ä¿¡æ¯.
3 | | """
  | |___^
4 |
5 |   from typing import Any
  |
help: Insert single blank line

C901 `collect_database_sizes` is too complex (12 > 10)
  --> app/tasks/capacity_collection_tasks.py:14:5
   |
14 | def collect_database_sizes():
   |     ^^^^^^^^^^^^^^^^^^^^^^
15 |     """å®¹é‡åŒæ­¥å®šæ—¶ä»»åŠ¡ã€‚.
   |

PLR0915 Too many statements (101 > 50)
  --> app/tasks/capacity_collection_tasks.py:14:5
   |
14 | def collect_database_sizes():
   |     ^^^^^^^^^^^^^^^^^^^^^^
15 |     """å®¹é‡åŒæ­¥å®šæ—¶ä»»åŠ¡ã€‚.
   |

ANN201 Missing return type annotation for public function `collect_database_sizes`
  --> app/tasks/capacity_collection_tasks.py:14:5
   |
14 | def collect_database_sizes():
   |     ^^^^^^^^^^^^^^^^^^^^^^
15 |     """å®¹é‡åŒæ­¥å®šæ—¶ä»»åŠ¡ã€‚.
   |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/capacity_collection_tasks.py:17:13
   |
15 |     """å®¹é‡åŒæ­¥å®šæ—¶ä»»åŠ¡ã€‚.
16 |
17 |     æ¯å¤©å‡Œæ™¨3ç‚¹æ‰§è¡Œï¼ŒåŒæ­¥æ‰€æœ‰æ´»è·ƒå®žä¾‹çš„æ•°æ®åº“å®¹é‡ä¿¡æ¯ã€‚
   |                    ^^
18 |     åˆ›å»ºåŒæ­¥ä¼šè¯ï¼ŒéåŽ†æ‰€æœ‰æ´»è·ƒå®žä¾‹ï¼Œé‡‡é›†æ•°æ®åº“å¤§å°å¹¶ä¿å­˜ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/capacity_collection_tasks.py:18:11
   |
17 |     æ¯å¤©å‡Œæ™¨3ç‚¹æ‰§è¡Œï¼ŒåŒæ­¥æ‰€æœ‰æ´»è·ƒå®žä¾‹çš„æ•°æ®åº“å®¹é‡ä¿¡æ¯ã€‚
18 |     åˆ›å»ºåŒæ­¥ä¼šè¯ï¼ŒéåŽ†æ‰€æœ‰æ´»è·ƒå®žä¾‹ï¼Œé‡‡é›†æ•°æ®åº“å¤§å°å¹¶ä¿å­˜ã€‚
   |                 ^^
19 |
20 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/capacity_collection_tasks.py:18:20
   |
17 |     æ¯å¤©å‡Œæ™¨3ç‚¹æ‰§è¡Œï¼ŒåŒæ­¥æ‰€æœ‰æ´»è·ƒå®žä¾‹çš„æ•°æ®åº“å®¹é‡ä¿¡æ¯ã€‚
18 |     åˆ›å»ºåŒæ­¥ä¼šè¯ï¼ŒéåŽ†æ‰€æœ‰æ´»è·ƒå®žä¾‹ï¼Œé‡‡é›†æ•°æ®åº“å¤§å°å¹¶ä¿å­˜ã€‚
   |                                   ^^
19 |
20 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/capacity_collection_tasks.py:21:18
   |
20 |     Returns:
21 |         åŒ…å«åŒæ­¥ç»“æžœçš„å­—å…¸ï¼ŒåŒ…æ‹¬æˆåŠŸ/å¤±è´¥å®žä¾‹æ•°ã€æ€»å®¹é‡ç­‰ä¿¡æ¯ã€‚
   |                           ^^
22 |
23 |     """
   |

PLC0415 `import` should be at the top-level of a file
  --> app/tasks/capacity_collection_tasks.py:24:5
   |
23 |     """
24 |     from app import create_app
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^
25 |     from app.services.sync_session_service import sync_session_service
26 |     from app.utils.time_utils import time_utils
   |

PLC0415 `import` should be at the top-level of a file
  --> app/tasks/capacity_collection_tasks.py:25:5
   |
23 |     """
24 |     from app import create_app
25 |     from app.services.sync_session_service import sync_session_service
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
26 |     from app.utils.time_utils import time_utils
27 |     # åˆ›å»ºFlaskåº”ç”¨ä¸Šä¸‹æ–‡ï¼Œç¡®ä¿æ•°æ®åº“æ“ä½œæ­£å¸¸
   |

PLC0415 `import` should be at the top-level of a file
  --> app/tasks/capacity_collection_tasks.py:26:5
   |
24 |     from app import create_app
25 |     from app.services.sync_session_service import sync_session_service
26 |     from app.utils.time_utils import time_utils
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
27 |     # åˆ›å»ºFlaskåº”ç”¨ä¸Šä¸‹æ–‡ï¼Œç¡®ä¿æ•°æ®åº“æ“ä½œæ­£å¸¸
28 |     app = create_app(init_scheduler_on_start=False)
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/capacity_collection_tasks.py:27:19
   |
25 |     from app.services.sync_session_service import sync_session_service
26 |     from app.utils.time_utils import time_utils
27 |     # åˆ›å»ºFlaskåº”ç”¨ä¸Šä¸‹æ–‡ï¼Œç¡®ä¿æ•°æ®åº“æ“ä½œæ­£å¸¸
   |                          ^^
28 |     app = create_app(init_scheduler_on_start=False)
29 |     with app.app_context():
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/capacity_collection_tasks.py:48:24
   |
47 |             sync_logger.info(
48 |                 "æ‰¾åˆ°æ´»è·ƒå®žä¾‹ï¼Œå¼€å§‹å®¹é‡åŒæ­¥",
   |                              ^^
49 |                 module="capacity_sync",
50 |                 instance_count=len(active_instances),
   |

E501 Line too long (140 > 120)
  --> app/tasks/capacity_collection_tasks.py:69:121
   |
67 | â€¦
68 | â€¦]
69 | â€¦session.session_id, instance_ids, sync_category=SyncCategory.CAPACITY.value)
   |                                                          ^^^^^^^^^^^^^^^^^^^^
70 | â€¦
   |

G004 Logging statement uses f-string
  --> app/tasks/capacity_collection_tasks.py:88:25
   |
87 |                     sync_logger.info(
88 |                         f"å¼€å§‹åŒæ­¥å®žä¾‹: {instance.name} (ID: {instance.id})",
   |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
89 |                         module="capacity_sync",
90 |                         session_id=session.session_id,
   |
help: Convert to lazy `%` formatting

PLC0415 `import` should be at the top-level of a file
  --> app/tasks/capacity_collection_tasks.py:96:21
   |
95 |                       # è°ƒç”¨æ•°æ®åº“å¤§å°é‡‡é›†æœåŠ¡
96 | /                     from app.services.database_sync import (
97 | |                         DatabaseSizeCollectorService,
98 | |                     )
   | |_____________________^
99 |                       collector = DatabaseSizeCollectorService(instance)
   |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/tasks/capacity_collection_tasks.py:126:41
    |
124 |                         except Exception as inventory_error:
125 |                             error_msg = f"åŒæ­¥æ•°æ®åº“åˆ—è¡¨å¤±è´¥: {inventory_error}"
126 |                             sync_logger.error(
    |                                         ^^^^^
127 |                                 error_msg,
128 |                                 module="capacity_sync",
    |

E501 Line too long (124 > 120)
   --> app/tasks/capacity_collection_tasks.py:152:121
    |
150 | â€¦                     items_synced=0,
151 | â€¦                     items_created=inventory_result.get("created", 0),
152 | â€¦                     items_updated=inventory_result.get("refreshed", 0) + inventory_result.get("reactivated", 0),
    |                                                                                                               ^^^^
153 | â€¦                     items_deleted=inventory_result.get("deactivated", 0),
154 | â€¦                     sync_details={
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_collection_tasks.py:173:53
    |
171 | â€¦                         "databases": [],
172 | â€¦                         "inventory": inventory_result,
173 | â€¦                         "message": "æœªå‘çŽ°æ´»è·ƒæ•°æ®åº“ï¼Œå·²ä»…åŒæ­¥æ•°æ®åº“åˆ—è¡¨",
    |                                                       ^^
174 | â€¦                     })
175 | â€¦                     continue
    |

G004 Logging statement uses f-string
   --> app/tasks/capacity_collection_tasks.py:203:33
    |
201 | â€¦                     error_msg = "æœªé‡‡é›†åˆ°ä»»ä½•æ•°æ®åº“å¤§å°æ•°æ®"
202 | â€¦                     sync_logger.error(
203 | â€¦                         f"å®žä¾‹å®¹é‡åŒæ­¥å¤±è´¥: {instance.name} - {error_msg}",
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
204 | â€¦                         module="capacity_sync",
205 | â€¦                         session_id=session.session_id,
    |
help: Convert to lazy `%` formatting

G004 Logging statement uses f-string
   --> app/tasks/capacity_collection_tasks.py:250:29
    |
249 |                         sync_logger.info(
250 |                             f"å®žä¾‹å®¹é‡åŒæ­¥æˆåŠŸ: {instance.name}",
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
251 |                             module="capacity_sync",
252 |                             session_id=session.session_id,
    |
help: Convert to lazy `%` formatting

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/tasks/capacity_collection_tasks.py:275:33
    |
273 |                 except Exception as e:
274 |                     error_msg = f"å®žä¾‹åŒæ­¥å¼‚å¸¸: {e!s}"
275 |                     sync_logger.error(
    |                                 ^^^^^
276 |                         error_msg,
277 |                         module="capacity_sync",
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_collection_tasks.py:301:57
    |
299 |             result = {
300 |                 "success": total_failed == 0,
301 |                 "message": f"å®¹é‡åŒæ­¥å®Œæˆ: æˆåŠŸ {total_synced} ä¸ªï¼Œå¤±è´¥ {total_failed} ä¸ª",
    |                                                                  ^^
302 |                 "instances_processed": total_synced,
303 |                 "total_size_mb": total_collected_size_mb,
    |

TRY300 Consider moving this statement to an `else` block
   --> app/tasks/capacity_collection_tasks.py:318:13
    |
316 |             )
317 |
318 |             return result
    |             ^^^^^^^^^^^^^
319 |
320 |         except Exception as e:
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/tasks/capacity_collection_tasks.py:321:25
    |
320 |         except Exception as e:
321 |             sync_logger.error(
    |                         ^^^^^
322 |                 "å®¹é‡åŒæ­¥ä»»åŠ¡æ‰§è¡Œå¤±è´¥",
323 |                 module="capacity_sync",
    |

C901 `collect_specific_instance_database_sizes` is too complex (11 > 10)
   --> app/tasks/capacity_collection_tasks.py:342:5
    |
342 | def collect_specific_instance_database_sizes(instance_id: int) -> dict[str, Any]:
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
343 |     """é‡‡é›†æŒ‡å®šå®žä¾‹çš„æ•°æ®åº“å¤§å°ä¿¡æ¯ã€‚.
    |

PLR0911 Too many return statements (9 > 6)
   --> app/tasks/capacity_collection_tasks.py:342:5
    |
342 | def collect_specific_instance_database_sizes(instance_id: int) -> dict[str, Any]:
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
343 |     """é‡‡é›†æŒ‡å®šå®žä¾‹çš„æ•°æ®åº“å¤§å°ä¿¡æ¯ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_collection_tasks.py:345:12
    |
343 |     """é‡‡é›†æŒ‡å®šå®žä¾‹çš„æ•°æ®åº“å¤§å°ä¿¡æ¯ã€‚.
344 |
345 |     è¿žæŽ¥åˆ°æŒ‡å®šå®žä¾‹ï¼ŒåŒæ­¥æ•°æ®åº“æ¸…å•ï¼Œé‡‡é›†å®¹é‡æ•°æ®å¹¶ä¿å­˜ã€‚
    |                   ^^
346 |     å®ŒæˆåŽè‡ªåŠ¨è§¦å‘å½“æ—¥èšåˆè®¡ç®—ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_collection_tasks.py:345:20
    |
343 |     """é‡‡é›†æŒ‡å®šå®žä¾‹çš„æ•°æ®åº“å¤§å°ä¿¡æ¯ã€‚.
344 |
345 |     è¿žæŽ¥åˆ°æŒ‡å®šå®žä¾‹ï¼ŒåŒæ­¥æ•°æ®åº“æ¸…å•ï¼Œé‡‡é›†å®¹é‡æ•°æ®å¹¶ä¿å­˜ã€‚
    |                                   ^^
346 |     å®ŒæˆåŽè‡ªåŠ¨è§¦å‘å½“æ—¥èšåˆè®¡ç®—ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_collection_tasks.py:352:15
    |
351 |     Returns:
352 |         é‡‡é›†ç»“æžœå­—å…¸ï¼ŒåŒ…å«æˆåŠŸçŠ¶æ€ã€æ•°æ®åº“æ•°é‡ã€æ€»å®¹é‡ç­‰ä¿¡æ¯ã€‚
    |                     ^^
353 |
354 |     """
    |

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/capacity_collection_tasks.py:355:5
    |
354 |     """
355 |     from app import create_app
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^
356 |     from app.services.database_sync import DatabaseSizeCollectorService
    |

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/capacity_collection_tasks.py:356:5
    |
354 |     """
355 |     from app import create_app
356 |     from app.services.database_sync import DatabaseSizeCollectorService
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
357 |
358 |     # åˆ›å»ºFlaskåº”ç”¨ä¸Šä¸‹æ–‡
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/tasks/capacity_collection_tasks.py:397:33
    |
395 |                     inventory_result = collector.synchronize_database_inventory()
396 |                 except Exception as inventory_error:
397 |                     sync_logger.error(
    |                                 ^^^^^
398 |                         "åŒæ­¥æ•°æ®åº“åˆ—è¡¨å¤±è´¥",
399 |                         module="capacity_sync",
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_collection_tasks.py:421:45
    |
419 |                         "instance_stat_updated": False,
420 |                         "inventory": inventory_result,
421 |                         "message": "æœªå‘çŽ°æ´»è·ƒæ•°æ®åº“ï¼Œå·²ä»…åŒæ­¥æ•°æ®åº“åˆ—è¡¨",
    |                                                     ^^
422 |                     }
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/tasks/capacity_collection_tasks.py:435:37
    |
433 |                         saved_count = collector.save_collected_data(databases_data)
434 |                     except Exception as save_error:
435 |                         sync_logger.error(
    |                                     ^^^^^
436 |                             "ä¿å­˜å®žä¾‹å®¹é‡æ•°æ®å¤±è´¥",
437 |                             module="capacity_sync",
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/capacity_collection_tasks.py:459:29
    |
457 |                         )
458 |
459 |                     # æ›´æ–°ç»Ÿè®¡èšåˆï¼Œç¡®ä¿å›¾è¡¨ä¸ŽæŠ¥è¡¨åŒæ­¥æœ€æ–°å®¹é‡
    |                                   ^^
460 |                     try:
461 |                         from app.services.aggregation.aggregation_service import AggregationService
    |

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/capacity_collection_tasks.py:461:25
    |
459 |                     # æ›´æ–°ç»Ÿè®¡èšåˆï¼Œç¡®ä¿å›¾è¡¨ä¸ŽæŠ¥è¡¨åŒæ­¥æœ€æ–°å®¹é‡
460 |                     try:
461 |                         from app.services.aggregation.aggregation_service import AggregationService
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
462 |
463 |                         aggregation_service = AggregationService()
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/tasks/capacity_collection_tasks.py:467:37
    |
465 |                         aggregation_service.calculate_daily_aggregations_for_instance(instance.id)
466 |                     except Exception as agg_exc:  # pragma: no cover - é˜²å¾¡æ€§æ—¥å¿—
467 |                         sync_logger.error(
    |                                     ^^^^^
468 |                             "å®žä¾‹å®¹é‡èšåˆåˆ·æ–°å¤±è´¥",
469 |                             module="capacity_sync",
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/tasks/capacity_collection_tasks.py:496:25
    |
495 |         except Exception as e:
496 |             sync_logger.error(
    |                         ^^^^^
497 |                 "é‡‡é›†å®žä¾‹æ•°æ®åº“å¤§å°å¤±è´¥",
498 |                 module="capacity_sync",
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/tasks/capacity_collection_tasks.py:514:23
    |
513 |     Args:
514 |         db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysql/sqlserver/postgresql/oracleï¼‰ã€‚
    |                            ^^
515 |
516 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/tasks/capacity_collection_tasks.py:514:57
    |
513 |     Args:
514 |         db_type: æ•°æ®åº“ç±»åž‹ï¼ˆmysql/sqlserver/postgresql/oracleï¼‰ã€‚
    |                                                               ^^
515 |
516 |     Returns:
    |

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/capacity_collection_tasks.py:520:5
    |
519 |     """
520 |     from app import create_app
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^
521 |
522 |     # åˆ›å»ºFlaskåº”ç”¨ä¸Šä¸‹æ–‡
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/tasks/capacity_collection_tasks.py:565:24
    |
563 |                     else:
564 |                         errors.append(f"å®žä¾‹ {instance.name}: {result['message']}")
565 |                 except Exception as e:
    |                        ^^^^^^^^^
566 |                     errors.append(f"å®žä¾‹ {instance.name}: {e!s}")
    |

TRY300 Consider moving this statement to an `else` block
   --> app/tasks/capacity_collection_tasks.py:568:13
    |
566 |                       errors.append(f"å®žä¾‹ {instance.name}: {e!s}")
567 |
568 | /             return {
569 | |                 "success": True,
570 | |                 "message": f"{db_type} ç±»åž‹æ•°æ®åº“å¤§å°é‡‡é›†å®Œæˆ",
571 | |                 "instances_processed": total_processed,
572 | |                 "total_size_mb": total_size_mb,
573 | |                 "errors": errors,
574 | |             }
    | |_____________^
575 |
576 |           except Exception as e:
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/tasks/capacity_collection_tasks.py:577:25
    |
576 |         except Exception as e:
577 |             sync_logger.error(
    |                         ^^^^^
578 |                 "æŒ‰ç±»åž‹é‡‡é›†æ•°æ®åº“å®¹é‡å¤±è´¥",
579 |                 module="capacity_sync",
    |

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/capacity_collection_tasks.py:598:5
    |
597 |     """
598 |     from app import create_app
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^
599 |     from app.models.instance_size_stat import InstanceSizeStat
600 |     from app.utils.time_utils import time_utils
    |

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/capacity_collection_tasks.py:599:5
    |
597 |     """
598 |     from app import create_app
599 |     from app.models.instance_size_stat import InstanceSizeStat
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
600 |     from app.utils.time_utils import time_utils
    |

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/capacity_collection_tasks.py:600:5
    |
598 |     from app import create_app
599 |     from app.models.instance_size_stat import InstanceSizeStat
600 |     from app.utils.time_utils import time_utils
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
601 |
602 |     # åˆ›å»ºFlaskåº”ç”¨ä¸Šä¸‹æ–‡
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/tasks/capacity_collection_tasks.py:629:25
    |
627 |         except Exception as e:
628 |             sync_logger = get_sync_logger()
629 |             sync_logger.error(
    |                         ^^^^^
630 |                 "èŽ·å–å®¹é‡é‡‡é›†çŠ¶æ€å¤±è´¥",
631 |                 module="capacity_sync",
    |

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/capacity_collection_tasks.py:658:9
    |
657 |           # æ£€æŸ¥æœåŠ¡å¯ç”¨æ€§
658 | /         from app.services.database_sync import (
659 | |             DatabaseSizeCollectorService,
660 | |         )
    | |_________^
661 |           DatabaseSizeCollectorService()
    |

TRY300 Consider moving this statement to an `else` block
   --> app/tasks/capacity_collection_tasks.py:663:9
    |
661 |           DatabaseSizeCollectorService()
662 |
663 | /         return {
664 | |             "success": True,
665 | |             "config": config_checks,
666 | |             "service_available": True,
667 | |             "message": "é…ç½®éªŒè¯é€šè¿‡",
668 | |         }
    | |_________^
669 |
670 |       except Exception as e:
    |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
   --> app/tasks/capacity_collection_tasks.py:672:21
    |
670 |     except Exception as e:
671 |         sync_logger = get_sync_logger()
672 |         sync_logger.error(
    |                     ^^^^^
673 |             "å®¹é‡é‡‡é›†é…ç½®éªŒè¯å¤±è´¥",
674 |             module="capacity_sync",
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/log_cleanup_tasks.py:15:32
   |
13 |     """æ¸…ç†æ—§æ—¥å¿—ä»»åŠ¡ - æ¸…ç†30å¤©å‰çš„æ—¥å¿—å’Œä¸´æ—¶æ–‡ä»¶ã€‚.
14 |
15 |     åˆ é™¤ 30 å¤©å‰çš„ç»Ÿä¸€æ—¥å¿—ã€åŒæ­¥ä¼šè¯è®°å½•ã€åŒæ­¥å®žä¾‹è®°å½•ï¼Œ
   |                                                       ^^
16 |     å¹¶æ¸…ç†ä¸´æ—¶æ–‡ä»¶ç›®å½•ä¸­çš„è¿‡æœŸæ–‡ä»¶ã€‚
   |

PLC0415 `import` should be at the top-level of a file
  --> app/tasks/log_cleanup_tasks.py:35:13
   |
33 |             cleaned_files = _cleanup_temp_files()
34 |
35 |             from app.models.sync_instance_record import SyncInstanceRecord
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
36 |             from app.models.sync_session import SyncSession
   |

PLC0415 `import` should be at the top-level of a file
  --> app/tasks/log_cleanup_tasks.py:36:13
   |
35 |             from app.models.sync_instance_record import SyncInstanceRecord
36 |             from app.models.sync_session import SyncSession
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
37 |
38 |             deleted_sync_sessions = SyncSession.query.filter(SyncSession.created_at < cutoff_date).delete()
   |

G201 Logging `.exception(...)` should be used instead of `.error(..., exc_info=True)`
  --> app/tasks/log_cleanup_tasks.py:60:25
   |
58 |         except Exception as exc:
59 |             db.session.rollback()
60 |             task_logger.error(
   |                         ^^^^^
61 |                 "å®šæ—¶ä»»åŠ¡æ¸…ç†å¤±è´¥",
62 |                 module="task",
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/log_cleanup_tasks.py:73:16
   |
71 |     """æ¸…ç†ä¸´æ—¶æ–‡ä»¶ã€‚.
72 |
73 |     æ‰«ææ—¥å¿—ç›®å½•å’Œå¯¼å‡ºç›®å½•ï¼Œåˆ é™¤ .tmpã€.tempã€.log.old ç­‰ä¸´æ—¶æ–‡ä»¶ã€‚
   |                           ^^
74 |
75 |     Returns:
   |

PTH118 `os.path.join()` should be replaced by `Path` with `/` operator
  --> app/tasks/log_cleanup_tasks.py:82:19
   |
81 |     try:
82 |         log_dir = os.path.join(os.getcwd(), "userdata", "log")
   |                   ^^^^^^^^^^^^
83 |         if os.path.exists(log_dir):
84 |             for filename in os.listdir(log_dir):
   |

PTH109 `os.getcwd()` should be replaced by `Path.cwd()`
  --> app/tasks/log_cleanup_tasks.py:82:32
   |
81 |     try:
82 |         log_dir = os.path.join(os.getcwd(), "userdata", "log")
   |                                ^^^^^^^^^
83 |         if os.path.exists(log_dir):
84 |             for filename in os.listdir(log_dir):
   |
help: Replace with `Path.cwd()`

PTH110 `os.path.exists()` should be replaced by `Path.exists()`
  --> app/tasks/log_cleanup_tasks.py:83:12
   |
81 |     try:
82 |         log_dir = os.path.join(os.getcwd(), "userdata", "log")
83 |         if os.path.exists(log_dir):
   |            ^^^^^^^^^^^^^^
84 |             for filename in os.listdir(log_dir):
85 |                 if filename.endswith((".tmp", ".temp", ".log.old")):
   |
help: Replace with `Path(...).exists()`

PTH208 Use `pathlib.Path.iterdir()` instead.
  --> app/tasks/log_cleanup_tasks.py:84:29
   |
82 |         log_dir = os.path.join(os.getcwd(), "userdata", "log")
83 |         if os.path.exists(log_dir):
84 |             for filename in os.listdir(log_dir):
   |                             ^^^^^^^^^^
85 |                 if filename.endswith((".tmp", ".temp", ".log.old")):
86 |                     file_path = os.path.join(log_dir, filename)
   |

PTH118 `os.path.join()` should be replaced by `Path` with `/` operator
  --> app/tasks/log_cleanup_tasks.py:86:33
   |
84 |             for filename in os.listdir(log_dir):
85 |                 if filename.endswith((".tmp", ".temp", ".log.old")):
86 |                     file_path = os.path.join(log_dir, filename)
   |                                 ^^^^^^^^^^^^
87 |                     try:
88 |                         os.remove(file_path)
   |

PTH107 `os.remove()` should be replaced by `Path.unlink()`
  --> app/tasks/log_cleanup_tasks.py:88:25
   |
86 |                     file_path = os.path.join(log_dir, filename)
87 |                     try:
88 |                         os.remove(file_path)
   |                         ^^^^^^^^^
89 |                         cleaned_count += 1
90 |                     except OSError:
   |
help: Replace with `Path(...).unlink()`

PTH118 `os.path.join()` should be replaced by `Path` with `/` operator
  --> app/tasks/log_cleanup_tasks.py:93:22
   |
91 |                         pass
92 |
93 |         export_dir = os.path.join(os.getcwd(), "userdata", "exports")
   |                      ^^^^^^^^^^^^
94 |         if os.path.exists(export_dir):
95 |             for filename in os.listdir(export_dir):
   |

PTH109 `os.getcwd()` should be replaced by `Path.cwd()`
  --> app/tasks/log_cleanup_tasks.py:93:35
   |
91 |                         pass
92 |
93 |         export_dir = os.path.join(os.getcwd(), "userdata", "exports")
   |                                   ^^^^^^^^^
94 |         if os.path.exists(export_dir):
95 |             for filename in os.listdir(export_dir):
   |
help: Replace with `Path.cwd()`

PTH110 `os.path.exists()` should be replaced by `Path.exists()`
  --> app/tasks/log_cleanup_tasks.py:94:12
   |
93 |         export_dir = os.path.join(os.getcwd(), "userdata", "exports")
94 |         if os.path.exists(export_dir):
   |            ^^^^^^^^^^^^^^
95 |             for filename in os.listdir(export_dir):
96 |                 if filename.endswith((".tmp", ".temp")):
   |
help: Replace with `Path(...).exists()`

PTH208 Use `pathlib.Path.iterdir()` instead.
  --> app/tasks/log_cleanup_tasks.py:95:29
   |
93 |         export_dir = os.path.join(os.getcwd(), "userdata", "exports")
94 |         if os.path.exists(export_dir):
95 |             for filename in os.listdir(export_dir):
   |                             ^^^^^^^^^^
96 |                 if filename.endswith((".tmp", ".temp")):
97 |                     file_path = os.path.join(export_dir, filename)
   |

PTH118 `os.path.join()` should be replaced by `Path` with `/` operator
  --> app/tasks/log_cleanup_tasks.py:97:33
   |
95 |             for filename in os.listdir(export_dir):
96 |                 if filename.endswith((".tmp", ".temp")):
97 |                     file_path = os.path.join(export_dir, filename)
   |                                 ^^^^^^^^^^^^
98 |                     try:
99 |                         os.remove(file_path)
   |

PTH107 `os.remove()` should be replaced by `Path.unlink()`
   --> app/tasks/log_cleanup_tasks.py:99:25
    |
 97 |                     file_path = os.path.join(export_dir, filename)
 98 |                     try:
 99 |                         os.remove(file_path)
    |                         ^^^^^^^^^
100 |                         cleaned_count += 1
101 |                     except OSError:
    |
help: Replace with `Path(...).unlink()`

BLE001 Do not catch blind exception: `Exception`
   --> app/tasks/log_cleanup_tasks.py:104:12
    |
102 |                         pass
103 |
104 |     except Exception as exc:
    |            ^^^^^^^^^
105 |         get_task_logger().warning(f"æ¸…ç†ä¸´æ—¶æ–‡ä»¶æ—¶å‡ºé”™: {exc}")
    |

D205 1 blank line required between summary line and description
 --> app/tasks/partition_management_tasks.py:1:1
  |
1 | / """åˆ†åŒºç®¡ç†å®šæ—¶ä»»åŠ¡
2 | | è´Ÿè´£è‡ªåŠ¨åˆ›å»ºã€æ¸…ç†å’Œç›‘æŽ§æ•°æ®åº“å¤§å°ç»Ÿè®¡è¡¨çš„åˆ†åŒº.
3 | | """
  | |___^
4 |
5 |   from __future__ import annotations
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/partition_management_tasks.py:21:24
   |
20 | def _as_app_error(error: Exception) -> AppError:
21 |     """ç¡®ä¿è¿”å›ž AppError å®žä¾‹ï¼Œä¾¿äºŽç»Ÿä¸€é”™è¯¯ä¸Šä¸‹æ–‡ã€‚.
   |                              ^^
22 |
23 |     Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/partition_management_tasks.py:27:37
   |
26 |     Returns:
27 |         AppError: è‹¥å·²æ˜¯ AppError åˆ™åŽŸæ ·è¿”å›žï¼Œå¦åˆ™åŒ…è£…ä¸º DatabaseErrorã€‚
   |                                             ^^
28 |
29 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/partition_management_tasks.py:36:15
   |
34 |     """åˆ›å»ºæ•°æ®åº“å¤§å°ç»Ÿè®¡è¡¨çš„åˆ†åŒºã€‚.
35 |
36 |     æ¯å¤©å‡Œæ™¨ 2 ç‚¹æ‰§è¡Œï¼Œåˆ›å»ºæœªæ¥ 3 ä¸ªæœˆçš„åˆ†åŒºï¼Œç¡®ä¿æ•°æ®æœ‰è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´ã€‚
   |                      ^^
37 |
38 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/partition_management_tasks.py:36:28
   |
34 |     """åˆ›å»ºæ•°æ®åº“å¤§å°ç»Ÿè®¡è¡¨çš„åˆ†åŒºã€‚.
35 |
36 |     æ¯å¤©å‡Œæ™¨ 2 ç‚¹æ‰§è¡Œï¼Œåˆ›å»ºæœªæ¥ 3 ä¸ªæœˆçš„åˆ†åŒºï¼Œç¡®ä¿æ•°æ®æœ‰è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´ã€‚
   |                                             ^^
37 |
38 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/partition_management_tasks.py:39:20
   |
38 |     Returns:
39 |         åŒ…å«åˆ†åŒºåˆ›å»ºç»“æžœçš„å­—å…¸ï¼ŒåŒ…æ‹¬å¤„ç†çš„æœˆä»½æ•°å’Œåˆ›å»ºçš„åˆ†åŒºåˆ—è¡¨ã€‚
   |                               ^^
40 |
41 |     """
   |

TRY300 Consider moving this statement to an `else` block
  --> app/tasks/partition_management_tasks.py:56:9
   |
54 |             message="åˆ†åŒºåˆ›å»ºä»»åŠ¡å·²å®Œæˆ",
55 |         )
56 |         return payload
   |         ^^^^^^^^^^^^^^
57 |     except Exception as exc:
58 |         app_error = _as_app_error(exc)
   |

BLE001 Do not catch blind exception: `Exception`
  --> app/tasks/partition_management_tasks.py:57:12
   |
55 |         )
56 |         return payload
57 |     except Exception as exc:
   |            ^^^^^^^^^
58 |         app_error = _as_app_error(exc)
59 |         log_error("åˆ†åŒºåˆ›å»ºä»»åŠ¡å¤±è´¥", module=MODULE, exception=exc)
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/partition_management_tasks.py:67:15
   |
65 |     """æ¸…ç†æ•°æ®åº“å¤§å°ç»Ÿè®¡è¡¨çš„æ—§åˆ†åŒºã€‚.
66 |
67 |     æ¯å¤©å‡Œæ™¨ 3 ç‚¹æ‰§è¡Œï¼Œæ¸…ç†ä¿ç•™æœŸå¤–çš„åˆ†åŒºï¼Œé‡Šæ”¾å­˜å‚¨ç©ºé—´ã€‚
   |                      ^^
68 |     ä¿ç•™æœŸç”±é…ç½®é¡¹ DATABASE_SIZE_RETENTION_MONTHS æŽ§åˆ¶ï¼Œé»˜è®¤ 12 ä¸ªæœˆã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/partition_management_tasks.py:67:25
   |
65 |     """æ¸…ç†æ•°æ®åº“å¤§å°ç»Ÿè®¡è¡¨çš„æ—§åˆ†åŒºã€‚.
66 |
67 |     æ¯å¤©å‡Œæ™¨ 3 ç‚¹æ‰§è¡Œï¼Œæ¸…ç†ä¿ç•™æœŸå¤–çš„åˆ†åŒºï¼Œé‡Šæ”¾å­˜å‚¨ç©ºé—´ã€‚
   |                                          ^^
68 |     ä¿ç•™æœŸç”±é…ç½®é¡¹ DATABASE_SIZE_RETENTION_MONTHS æŽ§åˆ¶ï¼Œé»˜è®¤ 12 ä¸ªæœˆã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/partition_management_tasks.py:68:46
   |
67 |     æ¯å¤©å‡Œæ™¨ 3 ç‚¹æ‰§è¡Œï¼Œæ¸…ç†ä¿ç•™æœŸå¤–çš„åˆ†åŒºï¼Œé‡Šæ”¾å­˜å‚¨ç©ºé—´ã€‚
68 |     ä¿ç•™æœŸç”±é…ç½®é¡¹ DATABASE_SIZE_RETENTION_MONTHS æŽ§åˆ¶ï¼Œé»˜è®¤ 12 ä¸ªæœˆã€‚
   |                                                       ^^
69 |
70 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/tasks/partition_management_tasks.py:71:18
   |
70 |     Returns:
71 |         åŒ…å«æ¸…ç†ç»“æžœçš„å­—å…¸ï¼ŒåŒ…æ‹¬æˆªæ­¢æ—¥æœŸå’Œåˆ é™¤çš„åˆ†åŒºåˆ—è¡¨ã€‚
   |                           ^^
72 |
73 |     """
   |

TRY300 Consider moving this statement to an `else` block
  --> app/tasks/partition_management_tasks.py:93:9
   |
91 |             message="æ—§åˆ†åŒºæ¸…ç†ä»»åŠ¡å·²å®Œæˆ",
92 |         )
93 |         return payload
   |         ^^^^^^^^^^^^^^
94 |     except Exception as exc:
95 |         app_error = _as_app_error(exc)
   |

BLE001 Do not catch blind exception: `Exception`
  --> app/tasks/partition_management_tasks.py:94:12
   |
92 |         )
93 |         return payload
94 |     except Exception as exc:
   |            ^^^^^^^^^
95 |         app_error = _as_app_error(exc)
96 |         log_error("æ—§åˆ†åŒºæ¸…ç†ä»»åŠ¡å¤±è´¥", module=MODULE, exception=exc)
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/partition_management_tasks.py:104:12
    |
102 |     """ç›‘æŽ§åˆ†åŒºå¥åº·çŠ¶æ€ã€‚.
103 |
104 |     æ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œæ£€æŸ¥åˆ†åŒºçŠ¶æ€å’Œå®¹é‡ã€‚å¦‚æžœå‘çŽ°ä¸‹ä¸ªæœˆçš„åˆ†åŒºä¸å­˜åœ¨ï¼Œ
    |                   ^^
105 |     ä¼šè‡ªåŠ¨å°è¯•åˆ›å»ºã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/partition_management_tasks.py:104:36
    |
102 |     """ç›‘æŽ§åˆ†åŒºå¥åº·çŠ¶æ€ã€‚.
103 |
104 |     æ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œæ£€æŸ¥åˆ†åŒºçŠ¶æ€å’Œå®¹é‡ã€‚å¦‚æžœå‘çŽ°ä¸‹ä¸ªæœˆçš„åˆ†åŒºä¸å­˜åœ¨ï¼Œ
    |                                                                   ^^
105 |     ä¼šè‡ªåŠ¨å°è¯•åˆ›å»ºã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/partition_management_tasks.py:108:20
    |
107 |     Returns:
108 |         åŒ…å«åˆ†åŒºå¥åº·çŠ¶æ€çš„å­—å…¸ï¼ŒåŒ…æ‹¬åˆ†åŒºæ•°é‡ã€æ€»å¤§å°ã€è®°å½•æ•°ç­‰ä¿¡æ¯ã€‚
    |                               ^^
109 |
110 |     """
    |

DTZ011 `datetime.date.today()` used
   --> app/tasks/partition_management_tasks.py:118:24
    |
116 |         stats = stats_service.get_partition_statistics()
117 |
118 |         current_date = date.today()
    |                        ^^^^^^^^^^^^
119 |         next_month = (current_date.replace(day=1) + timedelta(days=32)).replace(day=1)
120 |         from app.utils.time_utils import time_utils
    |
help: Use `datetime.datetime.now(tz=...).date()` instead

PLC0415 `import` should be at the top-level of a file
   --> app/tasks/partition_management_tasks.py:120:9
    |
118 |         current_date = date.today()
119 |         next_month = (current_date.replace(day=1) + timedelta(days=32)).replace(day=1)
120 |         from app.utils.time_utils import time_utils
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
121 |         next_partition_name = f"database_size_stats_{time_utils.format_china_time(next_month, '%Y_%m')}"
122 |         partitions = partition_info["partitions"]
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/partition_management_tasks.py:128:26
    |
126 |         if not exists:
127 |             log_warning(
128 |                 "ä¸‹ä¸ªæœˆåˆ†åŒºä¸å­˜åœ¨ï¼Œå°è¯•è‡ªåŠ¨åˆ›å»º",
    |                                  ^^
129 |                 module=MODULE,
130 |                 partition_name=next_partition_name,
    |

TRY300 Consider moving this statement to an `else` block
   --> app/tasks/partition_management_tasks.py:158:9
    |
156 |             message="åˆ†åŒºå¥åº·ç›‘æŽ§å®Œæˆ",
157 |         )
158 |         return payload
    |         ^^^^^^^^^^^^^^
159 |     except Exception as exc:
160 |         app_error = _as_app_error(exc)
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/tasks/partition_management_tasks.py:159:12
    |
157 |         )
158 |         return payload
159 |     except Exception as exc:
    |            ^^^^^^^^^
160 |         app_error = _as_app_error(exc)
161 |         log_error("åˆ†åŒºå¥åº·ç›‘æŽ§ä»»åŠ¡å¤±è´¥", module=MODULE, exception=exc)
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/tasks/partition_management_tasks.py:167:16
    |
166 | def get_partition_management_status() -> dict[str, object]:
167 |     """èŽ·å–åˆ†åŒºç®¡ç†çŠ¶æ€ï¼Œç”¨äºŽ API æŽ¥å£å’Œç›‘æŽ§é¡µé¢ã€‚.
    |                        ^^
168 |
169 |     Returns:
    |

DTZ011 `datetime.date.today()` used
   --> app/tasks/partition_management_tasks.py:182:24
    |
181 |         partitions = partition_info["partitions"]
182 |         current_date = date.today()
    |                        ^^^^^^^^^^^^
183 |
184 |         required_partitions: list[str] = []
    |
help: Use `datetime.datetime.now(tz=...).date()` instead

BLE001 Do not catch blind exception: `Exception`
   --> app/tasks/partition_management_tasks.py:201:12
    |
199 |             "partitions": partitions,
200 |         }
201 |     except Exception as exc:
    |            ^^^^^^^^^
202 |         app_error = _as_app_error(exc)
203 |         log_error("èŽ·å–åˆ†åŒºç®¡ç†çŠ¶æ€å¤±è´¥", module=MODULE, exception=exc)
    |

B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
   --> app/tasks/partition_management_tasks.py:204:9
    |
202 |         app_error = _as_app_error(exc)
203 |         log_error("èŽ·å–åˆ†åŒºç®¡ç†çŠ¶æ€å¤±è´¥", module=MODULE, exception=exc)
204 |         raise app_error
    |         ^^^^^^^^^^^^^^^
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/utils/__init__.py:3:14
  |
1 | """å·¥å…·æ¨¡å—ã€‚.
2 |
3 | åŒ…å«å„ç§å®žç”¨å·¥å…·å’Œè¾…åŠ©å‡½æ•°ï¼Œæä¾›é€šç”¨çš„åŠŸèƒ½æ”¯æŒã€‚
  |                           ^^
4 |
5 | ä¸»è¦å·¥å…·ï¼š
  |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/utils/__init__.py:5:5
  |
3 | åŒ…å«å„ç§å®žç”¨å·¥å…·å’Œè¾…åŠ©å‡½æ•°ï¼Œæä¾›é€šç”¨çš„åŠŸèƒ½æ”¯æŒã€‚
4 |
5 | ä¸»è¦å·¥å…·ï¼š
  |         ^^
6 | - data_validator: æ•°æ®éªŒè¯å·¥å…·
7 | - time_utils: æ—¶é—´å¤„ç†å·¥å…·
  |

D205 1 blank line required between summary line and description
 --> app/utils/cache_utils.py:1:1
  |
1 | / """é²¸è½ - ç¼“å­˜ç®¡ç†å·¥å…·
2 | | åŸºäºŽFlask-Cachingçš„é€šç”¨ç¼“å­˜ç®¡ç†å™¨ï¼Œæä¾›è£…é¥°å™¨å’Œé€šç”¨ç¼“å­˜åŠŸèƒ½.
3 | | """
  | |___^
4 |
5 |   import hashlib
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/utils/cache_utils.py:2:24
  |
1 | """é²¸è½ - ç¼“å­˜ç®¡ç†å·¥å…·
2 | åŸºäºŽFlask-Cachingçš„é€šç”¨ç¼“å­˜ç®¡ç†å™¨ï¼Œæä¾›è£…é¥°å™¨å’Œé€šç”¨ç¼“å­˜åŠŸèƒ½.
  |                                  ^^
3 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/cache_utils.py:19:30
   |
17 |     """ç¼“å­˜ç®¡ç†å™¨ã€‚.
18 |
19 |     åŸºäºŽ Flask-Caching çš„é€šç”¨ç¼“å­˜ç®¡ç†å™¨ï¼Œæä¾›ç¼“å­˜çš„å¢žåˆ æ”¹æŸ¥å’Œè£…é¥°å™¨åŠŸèƒ½ã€‚
   |                                        ^^
20 |
21 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/cache_utils.py:23:32
   |
21 |     Attributes:
22 |         cache: Flask-Caching å®žä¾‹ã€‚
23 |         default_timeout: é»˜è®¤è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 300 ç§’ã€‚
   |                                      ^^
24 |         system_logger: ç³»ç»Ÿæ—¥å¿—è®°å½•å™¨ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/cache_utils.py:23:34
   |
21 |     Attributes:
22 |         cache: Flask-Caching å®žä¾‹ã€‚
23 |         default_timeout: é»˜è®¤è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 300 ç§’ã€‚
   |                                          ^^
24 |         system_logger: ç³»ç»Ÿæ—¥å¿—è®°å½•å™¨ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/cache_utils.py:23:35
   |
21 |     Attributes:
22 |         cache: Flask-Caching å®žä¾‹ã€‚
23 |         default_timeout: é»˜è®¤è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 300 ç§’ã€‚
   |                                            ^^
24 |         system_logger: ç³»ç»Ÿæ—¥å¿—è®°å½•å™¨ã€‚
   |

D107 Missing docstring in `__init__`
  --> app/utils/cache_utils.py:28:9
   |
26 |     """
27 |
28 |     def __init__(self, cache: Cache) -> None:
   |         ^^^^^^^^
29 |         self.cache = cache
30 |         self.default_timeout = 300  # 5åˆ†é’Ÿé»˜è®¤è¶…æ—¶
   |

ANN002 Missing type annotation for `*args`
  --> app/utils/cache_utils.py:33:42
   |
31 |         self.system_logger = get_system_logger()
32 |
33 |     def _generate_key(self, prefix: str, *args, **kwargs: Any) -> str:
   |                                          ^^^^^
34 |         """ç”Ÿæˆç¼“å­˜é”®ã€‚.
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `**kwargs`
  --> app/utils/cache_utils.py:33:59
   |
31 |         self.system_logger = get_system_logger()
32 |
33 |     def _generate_key(self, prefix: str, *args, **kwargs: Any) -> str:
   |                                                           ^^^
34 |         """ç”Ÿæˆç¼“å­˜é”®ã€‚.
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/cache_utils.py:51:16
   |
49 |         key_string = json.dumps(key_data, sort_keys=True, default=str)
50 |
51 |         # ç”Ÿæˆå“ˆå¸Œå€¼ï¼ˆä½¿ç”¨SHA256æ›¿ä»£MD5ï¼‰
   |                     ^^
52 |         key_hash = hashlib.sha256(key_string.encode()).hexdigest()
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/cache_utils.py:51:30
   |
49 |         key_string = json.dumps(key_data, sort_keys=True, default=str)
50 |
51 |         # ç”Ÿæˆå“ˆå¸Œå€¼ï¼ˆä½¿ç”¨SHA256æ›¿ä»£MD5ï¼‰
   |                                        ^^
52 |         key_hash = hashlib.sha256(key_string.encode()).hexdigest()
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `get`
  --> app/utils/cache_utils.py:56:32
   |
54 |         return f"{prefix}:{key_hash}"
55 |
56 |     def get(self, key: str) -> Any | None:
   |                                ^^^^^^^^^^
57 |         """èŽ·å–ç¼“å­˜å€¼ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/cache_utils.py:63:16
   |
62 |         Returns:
63 |             ç¼“å­˜å€¼ï¼Œå¦‚æžœä¸å­˜åœ¨æˆ–èŽ·å–å¤±è´¥è¿”å›ž Noneã€‚
   |                   ^^
64 |
65 |         """
   |

BLE001 Do not catch blind exception: `Exception`
  --> app/utils/cache_utils.py:68:16
   |
66 |         try:
67 |             return self.cache.get(key)
68 |         except Exception as e:
   |                ^^^^^^^^^
69 |             self.system_logger.warning("èŽ·å–ç¼“å­˜å¤±è´¥", module="cache", key=key, exception=str(e))
70 |             return None
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `value`
  --> app/utils/cache_utils.py:72:36
   |
70 |             return None
71 |
72 |     def set(self, key: str, value: Any, timeout: int | None = None) -> bool:
   |                                    ^^^
73 |         """è®¾ç½®ç¼“å­˜å€¼ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/cache_utils.py:78:26
   |
76 |             key: ç¼“å­˜é”®ã€‚
77 |             value: ç¼“å­˜å€¼ã€‚
78 |             timeout: è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨ default_timeoutã€‚
   |                              ^^
79 |
80 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/cache_utils.py:78:28
   |
76 |             key: ç¼“å­˜é”®ã€‚
77 |             value: ç¼“å­˜å€¼ã€‚
78 |             timeout: è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨ default_timeoutã€‚
   |                                  ^^
79 |
80 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/cache_utils.py:78:29
   |
76 |             key: ç¼“å­˜é”®ã€‚
77 |             value: ç¼“å­˜å€¼ã€‚
78 |             timeout: è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨ default_timeoutã€‚
   |                                    ^^
79 |
80 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/cache_utils.py:81:24
   |
80 |         Returns:
81 |             è®¾ç½®æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
   |                              ^^
82 |
83 |         """
   |

TRY300 Consider moving this statement to an `else` block
  --> app/utils/cache_utils.py:87:13
   |
85 |             timeout = timeout or self.default_timeout
86 |             self.cache.set(key, value, timeout=timeout)
87 |             return True
   |             ^^^^^^^^^^^
88 |         except Exception as e:
89 |             self.system_logger.warning("è®¾ç½®ç¼“å­˜å¤±è´¥", module="cache", key=key, exception=str(e))
   |

BLE001 Do not catch blind exception: `Exception`
  --> app/utils/cache_utils.py:88:16
   |
86 |             self.cache.set(key, value, timeout=timeout)
87 |             return True
88 |         except Exception as e:
   |                ^^^^^^^^^
89 |             self.system_logger.warning("è®¾ç½®ç¼“å­˜å¤±è´¥", module="cache", key=key, exception=str(e))
90 |             return False
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/cache_utils.py:99:24
    |
 98 |         Returns:
 99 |             åˆ é™¤æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
    |                              ^^
100 |
101 |         """
    |

TRY300 Consider moving this statement to an `else` block
   --> app/utils/cache_utils.py:104:13
    |
102 |         try:
103 |             self.cache.delete(key)
104 |             return True
    |             ^^^^^^^^^^^
105 |         except Exception:
106 |             self.system_logger.warning("åˆ é™¤ç¼“å­˜å¤±è´¥: {key}, é”™è¯¯: {e}")
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/utils/cache_utils.py:105:16
    |
103 |             self.cache.delete(key)
104 |             return True
105 |         except Exception:
    |                ^^^^^^^^^
106 |             self.system_logger.warning("åˆ é™¤ç¼“å­˜å¤±è´¥: {key}, é”™è¯¯: {e}")
107 |             return False
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/cache_utils.py:113:22
    |
112 |         Returns:
113 |             æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
    |                          ^^
114 |
115 |         """
    |

TRY300 Consider moving this statement to an `else` block
   --> app/utils/cache_utils.py:118:13
    |
116 |         try:
117 |             self.cache.clear()
118 |             return True
    |             ^^^^^^^^^^^
119 |         except Exception:
120 |             self.system_logger.warning("æ¸…ç©ºç¼“å­˜å¤±è´¥: {e}")
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/utils/cache_utils.py:119:16
    |
117 |             self.cache.clear()
118 |             return True
119 |         except Exception:
    |                ^^^^^^^^^
120 |             self.system_logger.warning("æ¸…ç©ºç¼“å­˜å¤±è´¥: {e}")
121 |             return False
    |

ANN002 Missing type annotation for `*args`
   --> app/utils/cache_utils.py:123:80
    |
121 |             return False
122 |
123 |     def get_or_set(self, key: str, func: Callable, timeout: int | None = None, *args, **kwargs: Any) -> Any:
    |                                                                                ^^^^^
124 |         """èŽ·å–ç¼“å­˜å€¼ï¼Œå¦‚æžœä¸å­˜åœ¨åˆ™è°ƒç”¨å‡½æ•°ç”Ÿæˆå¹¶å†™å…¥ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `**kwargs`
   --> app/utils/cache_utils.py:123:97
    |
121 |             return False
122 |
123 |     def get_or_set(self, key: str, func: Callable, timeout: int | None = None, *args, **kwargs: Any) -> Any:
    |                                                                                                 ^^^
124 |         """èŽ·å–ç¼“å­˜å€¼ï¼Œå¦‚æžœä¸å­˜åœ¨åˆ™è°ƒç”¨å‡½æ•°ç”Ÿæˆå¹¶å†™å…¥ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `get_or_set`
   --> app/utils/cache_utils.py:123:105
    |
121 |             return False
122 |
123 |     def get_or_set(self, key: str, func: Callable, timeout: int | None = None, *args, **kwargs: Any) -> Any:
    |                                                                                                         ^^^
124 |         """èŽ·å–ç¼“å­˜å€¼ï¼Œå¦‚æžœä¸å­˜åœ¨åˆ™è°ƒç”¨å‡½æ•°ç”Ÿæˆå¹¶å†™å…¥ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/cache_utils.py:124:17
    |
123 |     def get_or_set(self, key: str, func: Callable, timeout: int | None = None, *args, **kwargs: Any) -> Any:
124 |         """èŽ·å–ç¼“å­˜å€¼ï¼Œå¦‚æžœä¸å­˜åœ¨åˆ™è°ƒç”¨å‡½æ•°ç”Ÿæˆå¹¶å†™å…¥ã€‚.
    |                      ^^
125 |
126 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/cache_utils.py:129:28
    |
127 |             key: ç¼“å­˜é”®ã€‚
128 |             func: å½“ç¼“å­˜ç¼ºå¤±æ—¶æ‰§è¡Œçš„å›žè°ƒã€‚
129 |             timeout: ç¼“å­˜è¶…æ—¶æ—¶é—´ï¼ŒNone è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼ã€‚
    |                                  ^^
130 |             *args: ä¼ é€’ç»™å›žè°ƒçš„å¯å˜ä½ç½®å‚æ•°ã€‚
131 |             **kwargs: ä¼ é€’ç»™å›žè°ƒçš„å…³é”®å­—å‚æ•°ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/cache_utils.py:150:21
    |
149 |         Returns:
150 |             å®žé™…åˆ é™¤çš„é”®æ•°é‡ï¼Œä¸æ”¯æŒæ¨¡å¼åˆ é™¤æ—¶è¿”å›ž 0ã€‚
    |                             ^^
151 |
152 |         """
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/cache_utils.py:155:26
    |
153 |         try:
154 |             # è¿™é‡Œéœ€è¦æ ¹æ®å…·ä½“çš„ç¼“å­˜åŽç«¯å®žçŽ°
155 |             # Redisæ”¯æŒæ¨¡å¼åŒ¹é…ï¼Œå…¶ä»–åŽç«¯å¯èƒ½éœ€è¦éåŽ†
    |                                ^^
156 |             if hasattr(self.cache.cache, "delete_pattern"):
157 |                 return self.cache.cache.delete_pattern(pattern)
    |

TRY300 Consider moving this statement to an `else` block
   --> app/utils/cache_utils.py:159:13
    |
157 |                 return self.cache.cache.delete_pattern(pattern)
158 |             self.system_logger.warning("å½“å‰ç¼“å­˜åŽç«¯ä¸æ”¯æŒæ¨¡å¼åˆ é™¤")
159 |             return 0
    |             ^^^^^^^^
160 |         except Exception:
161 |             self.system_logger.warning("æ¨¡å¼åˆ é™¤ç¼“å­˜å¤±è´¥: {pattern}, é”™è¯¯: {e}")
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/utils/cache_utils.py:160:16
    |
158 |             self.system_logger.warning("å½“å‰ç¼“å­˜åŽç«¯ä¸æ”¯æŒæ¨¡å¼åˆ é™¤")
159 |             return 0
160 |         except Exception:
    |                ^^^^^^^^^
161 |             self.system_logger.warning("æ¨¡å¼åˆ é™¤ç¼“å­˜å¤±è´¥: {pattern}, é”™è¯¯: {e}")
162 |             return 0
    |

PLW0603 Using the global statement to update `cache_manager` is discouraged
   --> app/utils/cache_utils.py:179:12
    |
178 |     """
179 |     global cache_manager
    |            ^^^^^^^^^^^^^
180 |     cache_manager = CacheManager(cache)
181 |     system_logger = get_system_logger()
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/cache_utils.py:191:13
    |
189 |     key_func: Callable | None = None,
190 | ) -> Callable:
191 |     """ç¼“å­˜è£…é¥°å™¨ï¼Œè‡ªåŠ¨å¤ç”¨å‡½æ•°è¿”å›žå€¼ã€‚.
    |                  ^^
192 |
193 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/cache_utils.py:194:24
    |
193 |     Args:
194 |         timeout: ç¼“å­˜è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ã€‚
    |                              ^^
195 |         key_prefix: é”®å‰ç¼€ï¼Œç”¨äºŽåŒºåˆ†ä¸åŒå‡½æ•°ã€‚
196 |         unless: æ¡ä»¶å‡½æ•°ï¼Œè¿”å›ž True æ—¶è·³è¿‡ç¼“å­˜ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/cache_utils.py:194:26
    |
193 |     Args:
194 |         timeout: ç¼“å­˜è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ã€‚
    |                                  ^^
195 |         key_prefix: é”®å‰ç¼€ï¼Œç”¨äºŽåŒºåˆ†ä¸åŒå‡½æ•°ã€‚
196 |         unless: æ¡ä»¶å‡½æ•°ï¼Œè¿”å›ž True æ—¶è·³è¿‡ç¼“å­˜ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/cache_utils.py:195:24
    |
193 |     Args:
194 |         timeout: ç¼“å­˜è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ã€‚
195 |         key_prefix: é”®å‰ç¼€ï¼Œç”¨äºŽåŒºåˆ†ä¸åŒå‡½æ•°ã€‚
    |                           ^^
196 |         unless: æ¡ä»¶å‡½æ•°ï¼Œè¿”å›ž True æ—¶è·³è¿‡ç¼“å­˜ã€‚
197 |         key_func: è‡ªå®šä¹‰ç¼“å­˜é”®ç”Ÿæˆå‡½æ•°ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/cache_utils.py:196:21
    |
194 |         timeout: ç¼“å­˜è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ã€‚
195 |         key_prefix: é”®å‰ç¼€ï¼Œç”¨äºŽåŒºåˆ†ä¸åŒå‡½æ•°ã€‚
196 |         unless: æ¡ä»¶å‡½æ•°ï¼Œè¿”å›ž True æ—¶è·³è¿‡ç¼“å­˜ã€‚
    |                         ^^
197 |         key_func: è‡ªå®šä¹‰ç¼“å­˜é”®ç”Ÿæˆå‡½æ•°ã€‚
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `*args`
   --> app/utils/cache_utils.py:206:39
    |
204 |     def cache_decorator(f: Callable) -> Callable:
205 |         @wraps(f)
206 |         def decorated_function(*args: "Any", **kwargs: "Any") -> "Any":
    |                                       ^^^^^
207 |             # æ£€æŸ¥æ˜¯å¦è·³è¿‡ç¼“å­˜
208 |             if unless and unless():
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `**kwargs`
   --> app/utils/cache_utils.py:206:56
    |
204 |     def cache_decorator(f: Callable) -> Callable:
205 |         @wraps(f)
206 |         def decorated_function(*args: "Any", **kwargs: "Any") -> "Any":
    |                                                        ^^^^^
207 |             # æ£€æŸ¥æ˜¯å¦è·³è¿‡ç¼“å­˜
208 |             if unless and unless():
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `decorated_function`
   --> app/utils/cache_utils.py:206:66
    |
204 |     def cache_decorator(f: Callable) -> Callable:
205 |         @wraps(f)
206 |         def decorated_function(*args: "Any", **kwargs: "Any") -> "Any":
    |                                                                  ^^^^^
207 |             # æ£€æŸ¥æ˜¯å¦è·³è¿‡ç¼“å­˜
208 |             if unless and unless():
    |

SLF001 Private member accessed: `_generate_key`
   --> app/utils/cache_utils.py:215:29
    |
213 |                 cache_key = key_func(*args, **kwargs)
214 |             else:
215 |                 cache_key = cache_manager._generate_key(f"{key_prefix}:{f.__name__}", *args, **kwargs)
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
216 |
217 |             # å°è¯•èŽ·å–ç¼“å­˜
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/cache_utils.py:238:16
    |
237 | def dashboard_cache(timeout: int = 60) -> Callable:
238 |     """ä»ªè¡¨æ¿ç¼“å­˜è£…é¥°å™¨ï¼Œç»‘å®šç»Ÿä¸€å‰ç¼€ã€‚.
    |                        ^^
239 |
240 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/cache_utils.py:241:24
    |
240 |     Args:
241 |         timeout: ç¼“å­˜è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä¸º 1 åˆ†é’Ÿã€‚
    |                              ^^
242 |
243 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/cache_utils.py:241:26
    |
240 |     Args:
241 |         timeout: ç¼“å­˜è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä¸º 1 åˆ†é’Ÿã€‚
    |                                  ^^
242 |
243 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/cache_utils.py:241:27
    |
240 |     Args:
241 |         timeout: ç¼“å­˜è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ä¸º 1 åˆ†é’Ÿã€‚
    |                                    ^^
242 |
243 |     Returns:
    |

D205 1 blank line required between summary line and description
 --> app/utils/data_validator.py:1:1
  |
1 | / """æ•°æ®éªŒè¯å·¥å…·ç±»
2 | | æä¾›ä¸¥æ ¼çš„æ•°æ®éªŒè¯åŠŸèƒ½ï¼Œé˜²æ­¢æ— æ•ˆæ•°æ®è¿›å…¥ç³»ç»Ÿ.
3 | | """
  | |___^
4 |
5 |   import html
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/utils/data_validator.py:2:12
  |
1 | """æ•°æ®éªŒè¯å·¥å…·ç±»
2 | æä¾›ä¸¥æ ¼çš„æ•°æ®éªŒè¯åŠŸèƒ½ï¼Œé˜²æ­¢æ— æ•ˆæ•°æ®è¿›å…¥ç³»ç»Ÿ.
  |                       ^^
3 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/data_validator.py:18:16
   |
16 |     """æ•°æ®éªŒè¯å™¨ã€‚.
17 |
18 |     æä¾›ä¸¥æ ¼çš„æ•°æ®éªŒè¯åŠŸèƒ½ï¼Œé˜²æ­¢æ— æ•ˆæ•°æ®è¿›å…¥ç³»ç»Ÿã€‚
   |                           ^^
19 |     æ”¯æŒå®žä¾‹æ•°æ®ã€æ‰¹é‡æ•°æ®ã€è¡¨å•æ•°æ®çš„éªŒè¯å’Œæ¸…ç†ã€‚
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/utils/data_validator.py:34:26
   |
33 |     # æ”¯æŒçš„æ•°æ®åº“ç±»åž‹
34 |     SUPPORTED_DB_TYPES = ["mysql", "postgresql", "sqlserver", "oracle", "sqlite"]
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
35 |
36 |     # æ”¯æŒçš„å‡­æ®ç±»åž‹
   |

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/utils/data_validator.py:37:34
   |
36 |     # æ”¯æŒçš„å‡­æ®ç±»åž‹
37 |     SUPPORTED_CREDENTIAL_TYPES = ["database", "ssh", "windows", "api", "ldap"]
   |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
38 |     _custom_db_types: set[str] | None = None
   |

C901 `validate_instance_data` is too complex (14 > 10)
  --> app/utils/data_validator.py:51:9
   |
50 |     @classmethod
51 |     def validate_instance_data(cls, data: dict[str, Any]) -> tuple[bool, str | None]:
   |         ^^^^^^^^^^^^^^^^^^^^^^
52 |         """éªŒè¯å®žä¾‹æ•°æ®ã€‚.
   |

PLR0911 Too many return statements (10 > 6)
  --> app/utils/data_validator.py:51:9
   |
50 |     @classmethod
51 |     def validate_instance_data(cls, data: dict[str, Any]) -> tuple[bool, str | None]:
   |         ^^^^^^^^^^^^^^^^^^^^^^
52 |         """éªŒè¯å®žä¾‹æ•°æ®ã€‚.
   |

PLR0912 Too many branches (13 > 12)
  --> app/utils/data_validator.py:51:9
   |
50 |     @classmethod
51 |     def validate_instance_data(cls, data: dict[str, Any]) -> tuple[bool, str | None]:
   |         ^^^^^^^^^^^^^^^^^^^^^^
52 |         """éªŒè¯å®žä¾‹æ•°æ®ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/data_validator.py:54:25
   |
52 |         """éªŒè¯å®žä¾‹æ•°æ®ã€‚.
53 |
54 |         éªŒè¯å®žä¾‹çš„æ‰€æœ‰å¿…å¡«å­—æ®µå’Œå¯é€‰å­—æ®µï¼ŒåŒ…æ‹¬åç§°ã€æ•°æ®åº“ç±»åž‹ã€
   |                                         ^^
55 |         ä¸»æœºåœ°å€ã€ç«¯å£å·ã€æ•°æ®åº“åç§°ã€æè¿°å’Œå‡­æ®IDã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/data_validator.py:58:25
   |
57 |         Args:
58 |             data: å®žä¾‹æ•°æ®å­—å…¸ï¼ŒåŒ…å«å®žä¾‹çš„å„é¡¹é…ç½®ä¿¡æ¯ã€‚
   |                               ^^
59 |
60 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/utils/data_validator.py:61:22
   |
60 |         Returns:
61 |             åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„å…ƒç»„ï¼š
   |                               ^^
62 |             - æ˜¯å¦æœ‰æ•ˆï¼ˆTrue/Falseï¼‰
63 |             - é”™è¯¯ä¿¡æ¯ï¼ˆéªŒè¯å¤±è´¥æ—¶è¿”å›žå…·ä½“é”™è¯¯ï¼ŒæˆåŠŸæ—¶è¿”å›ž Noneï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/data_validator.py:62:19
   |
60 |         Returns:
61 |             åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„å…ƒç»„ï¼š
62 |             - æ˜¯å¦æœ‰æ•ˆï¼ˆTrue/Falseï¼‰
   |                       ^^
63 |             - é”™è¯¯ä¿¡æ¯ï¼ˆéªŒè¯å¤±è´¥æ—¶è¿”å›žå…·ä½“é”™è¯¯ï¼ŒæˆåŠŸæ—¶è¿”å›ž Noneï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/data_validator.py:62:30
   |
60 |         Returns:
61 |             åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„å…ƒç»„ï¼š
62 |             - æ˜¯å¦æœ‰æ•ˆï¼ˆTrue/Falseï¼‰
   |                                   ^^
63 |             - é”™è¯¯ä¿¡æ¯ï¼ˆéªŒè¯å¤±è´¥æ—¶è¿”å›žå…·ä½“é”™è¯¯ï¼ŒæˆåŠŸæ—¶è¿”å›ž Noneï¼‰
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/data_validator.py:63:19
   |
61 |             åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„å…ƒç»„ï¼š
62 |             - æ˜¯å¦æœ‰æ•ˆï¼ˆTrue/Falseï¼‰
63 |             - é”™è¯¯ä¿¡æ¯ï¼ˆéªŒè¯å¤±è´¥æ—¶è¿”å›žå…·ä½“é”™è¯¯ï¼ŒæˆåŠŸæ—¶è¿”å›ž Noneï¼‰
   |                       ^^
64 |
65 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/data_validator.py:63:31
   |
61 |             åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„å…ƒç»„ï¼š
62 |             - æ˜¯å¦æœ‰æ•ˆï¼ˆTrue/Falseï¼‰
63 |             - é”™è¯¯ä¿¡æ¯ï¼ˆéªŒè¯å¤±è´¥æ—¶è¿”å›žå…·ä½“é”™è¯¯ï¼ŒæˆåŠŸæ—¶è¿”å›ž Noneï¼‰
   |                                               ^^
64 |
65 |         """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/data_validator.py:63:42
   |
61 |             åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„å…ƒç»„ï¼š
62 |             - æ˜¯å¦æœ‰æ•ˆï¼ˆTrue/Falseï¼‰
63 |             - é”™è¯¯ä¿¡æ¯ï¼ˆéªŒè¯å¤±è´¥æ—¶è¿”å›žå…·ä½“é”™è¯¯ï¼ŒæˆåŠŸæ—¶è¿”å›ž Noneï¼‰
   |                                                                ^^
64 |
65 |         """
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/data_validator.py:93:22
   |
91 |                 return False, port_error
92 |
93 |             # éªŒè¯æ•°æ®åº“åç§°ï¼ˆå¯é€‰ï¼‰
   |                             ^^
94 |             if data.get("database_name"):
95 |                 db_name_error = cls._validate_database_name(data.get("database_name"))
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/data_validator.py:93:25
   |
91 |                 return False, port_error
92 |
93 |             # éªŒè¯æ•°æ®åº“åç§°ï¼ˆå¯é€‰ï¼‰
   |                                   ^^
94 |             if data.get("database_name"):
95 |                 db_name_error = cls._validate_database_name(data.get("database_name"))
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/data_validator.py:99:19
    |
 97 |                     return False, db_name_error
 98 |
 99 |             # éªŒè¯æè¿°ï¼ˆå¯é€‰ï¼‰
    |                       ^^
100 |             if data.get("description"):
101 |                 desc_error = cls._validate_description(data.get("description"))
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/data_validator.py:99:22
    |
 97 |                     return False, db_name_error
 98 |
 99 |             # éªŒè¯æè¿°ï¼ˆå¯é€‰ï¼‰
    |                             ^^
100 |             if data.get("description"):
101 |                 desc_error = cls._validate_description(data.get("description"))
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/data_validator.py:105:21
    |
103 |                     return False, desc_error
104 |
105 |             # éªŒè¯å‡­æ®IDï¼ˆå¯é€‰ï¼‰
    |                         ^^
106 |             if data.get("credential_id"):
107 |                 cred_error = cls._validate_credential_id(data.get("credential_id"))
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/data_validator.py:105:24
    |
103 |                     return False, desc_error
104 |
105 |             # éªŒè¯å‡­æ®IDï¼ˆå¯é€‰ï¼‰
    |                               ^^
106 |             if data.get("credential_id"):
107 |                 cred_error = cls._validate_credential_id(data.get("credential_id"))
    |

TRY300 Consider moving this statement to an `else` block
   --> app/utils/data_validator.py:111:13
    |
109 |                     return False, cred_error
110 |
111 |             return True, None
    |             ^^^^^^^^^^^^^^^^^
112 |
113 |         except Exception as e:
    |

G004 Logging statement uses f-string
   --> app/utils/data_validator.py:114:30
    |
113 |         except Exception as e:
114 |             logger.exception(f"æ•°æ®éªŒè¯è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯: {e!s}")
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
115 |             return False, f"æ•°æ®éªŒè¯å¤±è´¥: {e!s}"
    |
help: Convert to lazy `%` formatting

TRY401 Redundant exception object included in `logging.exception` call
   --> app/utils/data_validator.py:114:46
    |
113 |         except Exception as e:
114 |             logger.exception(f"æ•°æ®éªŒè¯è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯: {e!s}")
    |                                                         ^
115 |             return False, f"æ•°æ®éªŒè¯å¤±è´¥: {e!s}"
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `name`
   --> app/utils/data_validator.py:118:35
    |
117 |     @classmethod
118 |     def _validate_name(cls, name: Any) -> str | None:
    |                                   ^^^
119 |         """éªŒè¯å®žä¾‹åç§°å¹¶è¿”å›žé”™è¯¯ä¿¡æ¯ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:122:28
    |
121 |         Args:
122 |             name: å‰ç«¯æäº¤çš„å®žä¾‹åç§°ï¼Œå¯èƒ½ä¸ºç©ºæˆ–åŒ…å«éžæ³•å­—ç¬¦ã€‚
    |                                     ^^
123 |
124 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/utils/data_validator.py:125:20
    |
124 |         Returns:
125 |             å­—ç¬¦ä¸²é”™è¯¯æç¤ºï¼›è‹¥åç§°åˆæ³•åˆ™è¿”å›ž Noneã€‚
    |                           ^^
126 |
127 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `db_type`
   --> app/utils/data_validator.py:145:41
    |
144 |     @classmethod
145 |     def _validate_db_type(cls, db_type: Any) -> str | None:
    |                                         ^^^
146 |         """éªŒè¯æ•°æ®åº“ç±»åž‹æ˜¯å¦åœ¨å—æ”¯æŒèŒƒå›´ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/utils/data_validator.py:152:20
    |
151 |         Returns:
152 |             å­—ç¬¦ä¸²é”™è¯¯æç¤ºï¼›è‹¥æ•°æ®åº“ç±»åž‹æœ‰æ•ˆåˆ™è¿”å›ž Noneã€‚
    |                           ^^
153 |
154 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `host`
   --> app/utils/data_validator.py:166:35
    |
165 |     @classmethod
166 |     def _validate_host(cls, host: Any) -> str | None:
    |                                   ^^^
167 |         """éªŒè¯ä¸»æœºåœ°å€æ ¼å¼ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/utils/data_validator.py:173:20
    |
172 |         Returns:
173 |             å­—ç¬¦ä¸²é”™è¯¯æç¤ºï¼›è‹¥ä¸»æœºæ ¼å¼æ­£ç¡®åˆ™è¿”å›ž Noneã€‚
    |                           ^^
174 |
175 |         """
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:188:29
    |
186 |         # éªŒè¯IPåœ°å€æˆ–åŸŸåæ ¼å¼
187 |         if not cls._is_valid_host(host):
188 |             return "ä¸»æœºåœ°å€æ ¼å¼æ— æ•ˆï¼Œè¯·è¾“å…¥æœ‰æ•ˆçš„IPåœ°å€æˆ–åŸŸå"
    |                                     ^^
189 |
190 |         return None
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `port`
   --> app/utils/data_validator.py:193:35
    |
192 |     @classmethod
193 |     def _validate_port(cls, port: Any) -> str | None:
    |                                   ^^^
194 |         """éªŒè¯ç«¯å£å·æ˜¯å¦å¤„äºŽå…è®¸èŒƒå›´ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/utils/data_validator.py:200:20
    |
199 |         Returns:
200 |             å­—ç¬¦ä¸²é”™è¯¯æç¤ºï¼›è‹¥ç«¯å£åˆæ³•åˆ™è¿”å›ž Noneã€‚
    |                           ^^
201 |
202 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `db_name`
   --> app/utils/data_validator.py:214:47
    |
213 |     @classmethod
214 |     def _validate_database_name(cls, db_name: Any) -> str | None:
    |                                               ^^^
215 |         """éªŒè¯æ•°æ®åº“åç§°é•¿åº¦ä¸Žå­—ç¬¦é›†åˆã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/utils/data_validator.py:221:20
    |
220 |         Returns:
221 |             å­—ç¬¦ä¸²é”™è¯¯æç¤ºï¼›è‹¥åç§°æ»¡è¶³è§„èŒƒåˆ™è¿”å›ž Noneã€‚
    |                           ^^
222 |
223 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `description`
   --> app/utils/data_validator.py:241:49
    |
240 |     @classmethod
241 |     def _validate_description(cls, description: Any) -> str | None:
    |                                                 ^^^
242 |         """éªŒè¯æè¿°å­—æ®µé•¿åº¦ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/utils/data_validator.py:248:20
    |
247 |         Returns:
248 |             å­—ç¬¦ä¸²é”™è¯¯æç¤ºï¼›è‹¥æè¿°åˆæ³•åˆ™è¿”å›ž Noneã€‚
    |                           ^^
249 |
250 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `credential_id`
   --> app/utils/data_validator.py:261:53
    |
260 |     @classmethod
261 |     def _validate_credential_id(cls, credential_id: Any) -> str | None:
    |                                                     ^^^
262 |         """éªŒè¯å‡­æ® ID æ˜¯å¦ä¸ºæ­£æ•´æ•°ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/utils/data_validator.py:268:20
    |
267 |         Returns:
268 |             å­—ç¬¦ä¸²é”™è¯¯æç¤ºï¼›è‹¥ ID æœ‰æ•ˆåˆ™è¿”å›ž Noneã€‚
    |                           ^^
269 |
270 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:288:32
    |
287 |         Returns:
288 |             True è¡¨ç¤ºæ ¼å¼åŒ¹é… IP/åŸŸåè§„èŒƒï¼Œå¦åˆ™ä¸º Falseã€‚
    |                                          ^^
289 |
290 |         """
    |

PLR2004 Magic value used in comparison, consider replacing `255` with a constant variable
   --> app/utils/data_validator.py:295:42
    |
293 |         if re.match(ip_pattern, host):
294 |             parts = host.split(".")
295 |             return all(0 <= int(part) <= 255 for part in parts)
    |                                          ^^^
296 |
297 |         # æ£€æŸ¥åŸŸåæ ¼å¼
    |

E501 Line too long (123 > 120)
   --> app/utils/data_validator.py:298:121
    |
297 |         # æ£€æŸ¥åŸŸåæ ¼å¼
298 |         domain_pattern = r"^[a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?)*$"
    |                                                                                                                         ^^^
299 |         return bool(re.match(domain_pattern, host))
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:305:23
    |
303 |         """éªŒè¯æ‰¹é‡æ•°æ®ã€‚.
304 |
305 |         å¯¹æ•°æ®åˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹è¿›è¡ŒéªŒè¯ï¼Œè¿”å›žæœ‰æ•ˆæ•°æ®å’Œé”™è¯¯ä¿¡æ¯ã€‚
    |                                     ^^
306 |
307 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/data_validator.py:311:22
    |
310 |         Returns:
311 |             åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„å…ƒç»„ï¼š
    |                               ^^
312 |             - æœ‰æ•ˆæ•°æ®åˆ—è¡¨
313 |             - é”™è¯¯ä¿¡æ¯åˆ—è¡¨ï¼ˆåŒ…å«æ¯æ¡æ— æ•ˆæ•°æ®çš„é”™è¯¯æè¿°ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/data_validator.py:313:21
    |
311 |             åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„å…ƒç»„ï¼š
312 |             - æœ‰æ•ˆæ•°æ®åˆ—è¡¨
313 |             - é”™è¯¯ä¿¡æ¯åˆ—è¡¨ï¼ˆåŒ…å«æ¯æ¡æ— æ•ˆæ•°æ®çš„é”™è¯¯æè¿°ï¼‰
    |                           ^^
314 |
315 |         """
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/data_validator.py:313:35
    |
311 |             åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„å…ƒç»„ï¼š
312 |             - æœ‰æ•ˆæ•°æ®åˆ—è¡¨
313 |             - é”™è¯¯ä¿¡æ¯åˆ—è¡¨ï¼ˆåŒ…å«æ¯æ¡æ— æ•ˆæ•°æ®çš„é”™è¯¯æè¿°ï¼‰
    |                                                       ^^
314 |
315 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `value`
   --> app/utils/data_validator.py:329:37
    |
328 |     @classmethod
329 |     def sanitize_string(cls, value: Any) -> str:
    |                                     ^^^
330 |         """æ¸…ç†å­—ç¬¦ä¸²ï¼Œç§»é™¤æ½œåœ¨çš„å±é™©å†…å®¹ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:330:17
    |
328 |     @classmethod
329 |     def sanitize_string(cls, value: Any) -> str:
330 |         """æ¸…ç†å­—ç¬¦ä¸²ï¼Œç§»é™¤æ½œåœ¨çš„å±é™©å†…å®¹ã€‚.
    |                      ^^
331 |
332 |         å¯¹è¾“å…¥å­—ç¬¦ä¸²è¿›è¡Œ HTML è½¬ä¹‰ï¼Œå¹¶ç§»é™¤å¸¸è§çš„ XSS æ”»å‡»æ¨¡å¼ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:332:25
    |
330 |         """æ¸…ç†å­—ç¬¦ä¸²ï¼Œç§»é™¤æ½œåœ¨çš„å±é™©å†…å®¹ã€‚.
331 |
332 |         å¯¹è¾“å…¥å­—ç¬¦ä¸²è¿›è¡Œ HTML è½¬ä¹‰ï¼Œå¹¶ç§»é™¤å¸¸è§çš„ XSS æ”»å‡»æ¨¡å¼ã€‚
    |                                   ^^
333 |
334 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:335:23
    |
334 |         Args:
335 |             value: åŽŸå§‹å€¼ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»åž‹ã€‚
    |                          ^^
336 |
337 |         Returns:
    |

C901 `sanitize_form_data` is too complex (12 > 10)
   --> app/utils/data_validator.py:380:9
    |
379 |     @classmethod
380 |     def sanitize_form_data(cls, data: Mapping[str, Any]) -> dict[str, Any]:
    |         ^^^^^^^^^^^^^^^^^^
381 |         """æ¸…ç†è¡¨å•æäº¤çš„æ•°æ®ç»“æž„ã€‚.
    |

PLR0912 Too many branches (14 > 12)
   --> app/utils/data_validator.py:380:9
    |
379 |     @classmethod
380 |     def sanitize_form_data(cls, data: Mapping[str, Any]) -> dict[str, Any]:
    |         ^^^^^^^^^^^^^^^^^^
381 |         """æ¸…ç†è¡¨å•æäº¤çš„æ•°æ®ç»“æž„ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:383:27
    |
381 |         """æ¸…ç†è¡¨å•æäº¤çš„æ•°æ®ç»“æž„ã€‚.
382 |
383 |         å¤„ç† MultiDict å’Œæ™®é€šå­—å…¸ï¼Œæ”¯æŒåŒåå­—æ®µå¤šå€¼ï¼ˆå¦‚ checkboxï¼‰ã€‚
    |                                  ^^
384 |         å¯¹æ‰€æœ‰å­—ç¬¦ä¸²å€¼è¿›è¡Œå®‰å…¨æ¸…ç†ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/data_validator.py:383:36
    |
381 |         """æ¸…ç†è¡¨å•æäº¤çš„æ•°æ®ç»“æž„ã€‚.
382 |
383 |         å¤„ç† MultiDict å’Œæ™®é€šå­—å…¸ï¼Œæ”¯æŒåŒåå­—æ®µå¤šå€¼ï¼ˆå¦‚ checkboxï¼‰ã€‚
    |                                                    ^^
384 |         å¯¹æ‰€æœ‰å­—ç¬¦ä¸²å€¼è¿›è¡Œå®‰å…¨æ¸…ç†ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/data_validator.py:383:47
    |
381 |         """æ¸…ç†è¡¨å•æäº¤çš„æ•°æ®ç»“æž„ã€‚.
382 |
383 |         å¤„ç† MultiDict å’Œæ™®é€šå­—å…¸ï¼Œæ”¯æŒåŒåå­—æ®µå¤šå€¼ï¼ˆå¦‚ checkboxï¼‰ã€‚
    |                                                                 ^^
384 |         å¯¹æ‰€æœ‰å­—ç¬¦ä¸²å€¼è¿›è¡Œå®‰å…¨æ¸…ç†ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:387:30
    |
386 |         Args:
387 |             data: è¡¨å•æˆ– JSON æ•°æ®ï¼Œå¯ä»¥æ˜¯ MultiDict æˆ–æ™®é€šå­—å…¸ã€‚
    |                                   ^^
388 |
389 |         Returns:
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/data_validator.py:395:33
    |
393 |         sanitized: dict[str, Any] = {}
394 |         if hasattr(data, "getlist"):
395 |             # MultiDict æ”¯æŒåŒåå­—æ®µå¤šå€¼ï¼ˆå¦‚ checkbox + hiddenï¼‰ï¼Œéœ€è¦ä¿ç•™å…¨éƒ¨å€¼
    |                                         ^^
396 |             for key in data:
397 |                 values = data.getlist(key)
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/data_validator.py:395:53
    |
393 |         sanitized: dict[str, Any] = {}
394 |         if hasattr(data, "getlist"):
395 |             # MultiDict æ”¯æŒåŒåå­—æ®µå¤šå€¼ï¼ˆå¦‚ checkbox + hiddenï¼‰ï¼Œéœ€è¦ä¿ç•™å…¨éƒ¨å€¼
    |                                                               ^^
396 |             for key in data:
397 |                 values = data.getlist(key)
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:395:54
    |
393 |         sanitized: dict[str, Any] = {}
394 |         if hasattr(data, "getlist"):
395 |             # MultiDict æ”¯æŒåŒåå­—æ®µå¤šå€¼ï¼ˆå¦‚ checkbox + hiddenï¼‰ï¼Œéœ€è¦ä¿ç•™å…¨éƒ¨å€¼
    |                                                                 ^^
396 |             for key in data:
397 |                 values = data.getlist(key)
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:413:33
    |
411 |                         cleaned_values.append(cls.sanitize_string(str(value)))
412 |
413 |                 # åªæœ‰ä¸€ä¸ªå€¼æ—¶ä¿æŒåŽŸæœ‰æ ‡é‡è¡Œä¸ºï¼Œå¤šä¸ªå€¼è¿”å›žåˆ—è¡¨ä¾›åŽç»­è§£æž
    |                                               ^^
414 |                 sanitized[key] = cleaned_values[0] if len(cleaned_values) == 1 else cleaned_values
415 |         else:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:431:24
    |
429 |         """éªŒè¯å¿…å¡«å­—æ®µæ˜¯å¦å­˜åœ¨ã€‚.
430 |
431 |         æ£€æŸ¥æ•°æ®ä¸­æ˜¯å¦åŒ…å«æ‰€æœ‰å¿…å¡«å­—æ®µï¼Œä¸”å­—æ®µå€¼ä¸ä¸ºç©ºã€‚
    |                                       ^^
432 |
433 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:438:24
    |
437 |         Returns:
438 |             éªŒè¯å¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ï¼ŒæˆåŠŸæ—¶è¿”å›ž Noneã€‚
    |                                   ^^
439 |
440 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `db_type`
   --> app/utils/data_validator.py:448:40
    |
447 |     @classmethod
448 |     def validate_db_type(cls, db_type: Any) -> str | None:
    |                                        ^^^
449 |         """éªŒè¯æ•°æ®åº“ç±»åž‹æ˜¯å¦å—æ”¯æŒã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:455:24
    |
454 |         Returns:
455 |             éªŒè¯å¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ï¼ŒæˆåŠŸæ—¶è¿”å›ž Noneã€‚
    |                                   ^^
456 |
457 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:483:24
    |
481 |     @classmethod
482 |     def _resolve_allowed_db_types(cls) -> set[str]:
483 |         """èŽ·å–å…è®¸çš„æ•°æ®åº“ç±»åž‹é›†åˆï¼Œä¼˜å…ˆä½¿ç”¨æ•°æ®åº“é…ç½®ã€‚."""
    |                                    ^^
484 |         if cls._custom_db_types is not None:
485 |             return cls._custom_db_types
    |

PLC0415 `import` should be at the top-level of a file
   --> app/utils/data_validator.py:488:13
    |
487 |         try:
488 |             from app.services.database_type_service import DatabaseTypeService
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
489 |
490 |             configs = DatabaseTypeService.get_active_types()
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/utils/data_validator.py:494:16
    |
492 |             if dynamic_types:
493 |                 return dynamic_types
494 |         except Exception as exc:
    |                ^^^^^^^^^
495 |             logger.warning("èŽ·å–æ•°æ®åº“ç±»åž‹é…ç½®å¤±è´¥ï¼Œå›žé€€åˆ°é™æ€ç™½åå•: %s", exc)
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:495:40
    |
493 |                 return dynamic_types
494 |         except Exception as exc:
495 |             logger.warning("èŽ·å–æ•°æ®åº“ç±»åž‹é…ç½®å¤±è´¥ï¼Œå›žé€€åˆ°é™æ€ç™½åå•: %s", exc)
    |                                                   ^^
496 |
497 |         return {item.lower() for item in cls.SUPPORTED_DB_TYPES}
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `credential_type`
   --> app/utils/data_validator.py:500:56
    |
499 |     @classmethod
500 |     def validate_credential_type(cls, credential_type: Any) -> str | None:
    |                                                        ^^^
501 |         """éªŒè¯å‡­æ®ç±»åž‹ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:507:24
    |
506 |         Returns:
507 |             éªŒè¯å¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ï¼ŒæˆåŠŸæ—¶è¿”å›ž Noneã€‚
    |                                   ^^
508 |
509 |         """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `username`
   --> app/utils/data_validator.py:526:37
    |
525 |     @staticmethod
526 |     def validate_username(username: Any) -> str | None:
    |                                     ^^^
527 |         """éªŒè¯ç”¨æˆ·åæ ¼å¼ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:529:24
    |
527 |         """éªŒè¯ç”¨æˆ·åæ ¼å¼ã€‚.
528 |
529 |         ç”¨æˆ·åå¿…é¡»æ˜¯ 3-50 ä¸ªå­—ç¬¦ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€è¿žå­—ç¬¦å’Œç‚¹ã€‚
    |                                 ^^
530 |
531 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:535:24
    |
534 |         Returns:
535 |             éªŒè¯å¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ï¼ŒæˆåŠŸæ—¶è¿”å›ž Noneã€‚
    |                                   ^^
536 |
537 |         """
    |

PLR2004 Magic value used in comparison, consider replacing `3` with a constant variable
   --> app/utils/data_validator.py:545:30
    |
544 |         normalized = username.strip()
545 |         if len(normalized) < 3:
    |                              ^
546 |             return "ç”¨æˆ·åé•¿åº¦è‡³å°‘3ä¸ªå­—ç¬¦"
    |

PLR2004 Magic value used in comparison, consider replacing `50` with a constant variable
   --> app/utils/data_validator.py:548:30
    |
546 |             return "ç”¨æˆ·åé•¿åº¦è‡³å°‘3ä¸ªå­—ç¬¦"
547 |
548 |         if len(normalized) > 50:
    |                              ^^
549 |             return "ç”¨æˆ·åé•¿åº¦ä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬¦"
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `password`
   --> app/utils/data_validator.py:557:37
    |
556 |     @staticmethod
557 |     def validate_password(password: Any) -> str | None:
    |                                     ^^^
558 |         """éªŒè¯å¯†ç å¼ºåº¦ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:566:24
    |
565 |         Returns:
566 |             éªŒè¯å¤±è´¥æ—¶è¿”å›žé”™è¯¯ä¿¡æ¯ï¼ŒæˆåŠŸæ—¶è¿”å›ž Noneã€‚
    |                                   ^^
567 |
568 |         """
    |

PLR2004 Magic value used in comparison, consider replacing `6` with a constant variable
   --> app/utils/data_validator.py:575:28
    |
573 |             return "å¯†ç å¿…é¡»æ˜¯å­—ç¬¦ä¸²"
574 |
575 |         if len(password) < 6:
    |                            ^
576 |             return "å¯†ç é•¿åº¦è‡³å°‘6ä¸ªå­—ç¬¦"
    |

PLR2004 Magic value used in comparison, consider replacing `128` with a constant variable
   --> app/utils/data_validator.py:578:28
    |
576 |             return "å¯†ç é•¿åº¦è‡³å°‘6ä¸ªå­—ç¬¦"
577 |
578 |         if len(password) > 128:
    |                            ^^^
579 |             return "å¯†ç é•¿åº¦ä¸èƒ½è¶…è¿‡128ä¸ªå­—ç¬¦"
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:587:13
    |
586 | def sanitize_form_data(data: Mapping[str, Any]) -> dict[str, Any]:
587 |     """å‡½æ•°å¼å…¥å£ï¼Œå§”æ‰˜ç»™ `DataValidator.sanitize_form_data`ã€‚.
    |                  ^^
588 |
589 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:590:21
    |
589 |     Args:
590 |         data: ä»»æ„æ˜ å°„å¯¹è±¡ï¼ŒåŒ…å«éœ€è¦æ¸…æ´—çš„å®žä¾‹å­—æ®µã€‚
    |                           ^^
591 |
592 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/data_validator.py:593:18
    |
592 |     Returns:
593 |         å½’ä¸€åŒ–åŽçš„è¡¨å•å­—å…¸ï¼Œå­—æ®µå€¼å·²åŽ»é™¤ç©ºç™½å¹¶è½¬æ¢ä¸ºåŸºç¡€ç±»åž‹ã€‚
    |                           ^^
594 |
595 |     """
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/utils/data_validator.py:607:21
    |
606 |     Returns:
607 |         ç¬¬ä¸€ä¸ªç¼ºå¤±å­—æ®µçš„é”™è¯¯ä¿¡æ¯ï¼›è‹¥å…¨éƒ¨å­˜åœ¨åˆ™è¿”å›ž Noneã€‚
    |                                 ^^
608 |
609 |     """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `db_type`
   --> app/utils/data_validator.py:613:31
    |
613 | def validate_db_type(db_type: Any) -> str | None:
    |                               ^^^
614 |     """å‡½æ•°å¼å…¥å£æ ¡éªŒæ•°æ®åº“ç±»åž‹ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/utils/data_validator.py:620:16
    |
619 |     Returns:
620 |         å­—ç¬¦ä¸²é”™è¯¯æè¿°ï¼›å½“ç±»åž‹æœ‰æ•ˆæ—¶è¿”å›ž Noneã€‚
    |                       ^^
621 |
622 |     """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `credential_type`
   --> app/utils/data_validator.py:626:47
    |
626 | def validate_credential_type(credential_type: Any) -> str | None:
    |                                               ^^^
627 |     """å‡½æ•°å¼å…¥å£æ ¡éªŒå‡­æ®ç±»åž‹ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/utils/data_validator.py:633:16
    |
632 |     Returns:
633 |         å­—ç¬¦ä¸²é”™è¯¯æè¿°ï¼›å½“ç±»åž‹æœ‰æ•ˆæ—¶è¿”å›ž Noneã€‚
    |                       ^^
634 |
635 |     """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `username`
   --> app/utils/data_validator.py:639:33
    |
639 | def validate_username(username: Any) -> str | None:
    |                                 ^^^
640 |     """å‡½æ•°å¼å…¥å£æ ¡éªŒç”¨æˆ·åã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/utils/data_validator.py:646:16
    |
645 |     Returns:
646 |         å­—ç¬¦ä¸²é”™è¯¯æè¿°ï¼›å½“ç”¨æˆ·ååˆæ³•æ—¶è¿”å›ž Noneã€‚
    |                       ^^
647 |
648 |     """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `password`
   --> app/utils/data_validator.py:652:33
    |
652 | def validate_password(password: Any) -> str | None:
    |                                 ^^^
653 |     """å‡½æ•°å¼å…¥å£æ ¡éªŒå¯†ç ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/utils/data_validator.py:659:16
    |
658 |     Returns:
659 |         å­—ç¬¦ä¸²é”™è¯¯æè¿°ï¼›å½“å¯†ç æ»¡è¶³é•¿åº¦å’Œå­—ç¬¦è¦æ±‚æ—¶è¿”å›ž Noneã€‚
    |                       ^^
660 |
661 |     """
    |

D205 1 blank line required between summary line and description
 --> app/utils/database_batch_manager.py:1:1
  |
1 | / """é²¸è½ - æ•°æ®åº“æ‰¹é‡æ“ä½œç®¡ç†å™¨
2 | | æä¾›é«˜æ•ˆçš„æ‰¹é‡æäº¤æœºåˆ¶ï¼Œä¼˜åŒ–å¤§é‡æ•°æ®å¤„ç†æ€§èƒ½.
3 | | """
  | |___^
4 |
5 |   from typing import Any
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/utils/database_batch_manager.py:2:12
  |
1 | """é²¸è½ - æ•°æ®åº“æ‰¹é‡æ“ä½œç®¡ç†å™¨
2 | æä¾›é«˜æ•ˆçš„æ‰¹é‡æäº¤æœºåˆ¶ï¼Œä¼˜åŒ–å¤§é‡æ•°æ®å¤„ç†æ€§èƒ½.
  |                       ^^
3 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/database_batch_manager.py:15:19
   |
13 |     """æ•°æ®åº“æ‰¹é‡æ“ä½œç®¡ç†å™¨ã€‚.
14 |
15 |     è´Ÿè´£ç®¡ç†æ•°æ®åº“æ“ä½œçš„æ‰¹é‡æäº¤ï¼Œæé«˜æ€§èƒ½å¹¶ç¡®ä¿äº‹åŠ¡ä¸€è‡´æ€§ã€‚
   |                                 ^^
16 |     æ”¯æŒè‡ªåŠ¨æ‰¹é‡æäº¤ã€æ‰‹åŠ¨æäº¤å’Œå›žæ»šæ“ä½œï¼Œé€‚ç”¨äºŽå¤§é‡æ•°æ®å¤„ç†åœºæ™¯ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/database_batch_manager.py:16:23
   |
15 |     è´Ÿè´£ç®¡ç†æ•°æ®åº“æ“ä½œçš„æ‰¹é‡æäº¤ï¼Œæé«˜æ€§èƒ½å¹¶ç¡®ä¿äº‹åŠ¡ä¸€è‡´æ€§ã€‚
16 |     æ”¯æŒè‡ªåŠ¨æ‰¹é‡æäº¤ã€æ‰‹åŠ¨æäº¤å’Œå›žæ»šæ“ä½œï¼Œé€‚ç”¨äºŽå¤§é‡æ•°æ®å¤„ç†åœºæ™¯ã€‚
   |                                         ^^
17 |
18 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/database_batch_manager.py:19:25
   |
18 |     Attributes:
19 |         batch_size: æ‰¹æ¬¡å¤§å°ï¼Œè¾¾åˆ°æ­¤æ•°é‡æ—¶è‡ªåŠ¨æäº¤ã€‚
   |                             ^^
20 |         logger: ç»“æž„åŒ–æ—¥å¿—è®°å½•å™¨ã€‚
21 |         instance_name: å®žä¾‹åç§°ï¼Œç”¨äºŽæ—¥å¿—è®°å½•ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/database_batch_manager.py:21:28
   |
19 |         batch_size: æ‰¹æ¬¡å¤§å°ï¼Œè¾¾åˆ°æ­¤æ•°é‡æ—¶è‡ªåŠ¨æäº¤ã€‚
20 |         logger: ç»“æž„åŒ–æ—¥å¿—è®°å½•å™¨ã€‚
21 |         instance_name: å®žä¾‹åç§°ï¼Œç”¨äºŽæ—¥å¿—è®°å½•ã€‚
   |                                ^^
22 |         current_batch: å½“å‰æ‰¹æ¬¡ç¼–å·ã€‚
23 |         total_operations: æ€»æ“ä½œæ•°ã€‚
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `logger`
  --> app/utils/database_batch_manager.py:36:55
   |
34 |     """
35 |
36 |     def __init__(self, batch_size: int = 100, logger: Any | None = None, instance_name: str = "") -> None:
   |                                                       ^^^^^^^^^^
37 |         """åˆå§‹åŒ–æ‰¹é‡ç®¡ç†å™¨ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/database_batch_manager.py:40:29
   |
39 |         Args:
40 |             batch_size: æ‰¹æ¬¡å¤§å°ï¼Œé»˜è®¤ 100ã€‚è¾¾åˆ°æ­¤æ•°é‡æ—¶è‡ªåŠ¨æäº¤ã€‚
   |                                 ^^
41 |             logger: æ—¥å¿—è®°å½•å™¨ï¼Œé»˜è®¤ä½¿ç”¨ structlogã€‚
42 |             instance_name: å®žä¾‹åç§°ï¼Œç”¨äºŽæ—¥å¿—è®°å½•å’Œè¿½è¸ªã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/database_batch_manager.py:41:26
   |
39 |         Args:
40 |             batch_size: æ‰¹æ¬¡å¤§å°ï¼Œé»˜è®¤ 100ã€‚è¾¾åˆ°æ­¤æ•°é‡æ—¶è‡ªåŠ¨æäº¤ã€‚
41 |             logger: æ—¥å¿—è®°å½•å™¨ï¼Œé»˜è®¤ä½¿ç”¨ structlogã€‚
   |                               ^^
42 |             instance_name: å®žä¾‹åç§°ï¼Œç”¨äºŽæ—¥å¿—è®°å½•å’Œè¿½è¸ªã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/database_batch_manager.py:42:32
   |
40 |             batch_size: æ‰¹æ¬¡å¤§å°ï¼Œé»˜è®¤ 100ã€‚è¾¾åˆ°æ­¤æ•°é‡æ—¶è‡ªåŠ¨æäº¤ã€‚
41 |             logger: æ—¥å¿—è®°å½•å™¨ï¼Œé»˜è®¤ä½¿ç”¨ structlogã€‚
42 |             instance_name: å®žä¾‹åç§°ï¼Œç”¨äºŽæ—¥å¿—è®°å½•å’Œè¿½è¸ªã€‚
   |                                    ^^
43 |
44 |         """
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `entity`
  --> app/utils/database_batch_manager.py:65:58
   |
63 |         )
64 |
65 |     def add_operation(self, operation_type: str, entity: Any, description: str = "") -> None:
   |                                                          ^^^
66 |         """æ·»åŠ æ•°æ®åº“æ“ä½œåˆ°æ‰¹æ¬¡é˜Ÿåˆ—ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/database_batch_manager.py:68:20
   |
66 |         """æ·»åŠ æ•°æ®åº“æ“ä½œåˆ°æ‰¹æ¬¡é˜Ÿåˆ—ã€‚.
67 |
68 |         å°†æ“ä½œæ·»åŠ åˆ°å¾…å¤„ç†é˜Ÿåˆ—ï¼Œå½“é˜Ÿåˆ—è¾¾åˆ°æ‰¹æ¬¡å¤§å°æ—¶è‡ªåŠ¨æäº¤ã€‚
   |                               ^^
69 |
70 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/database_batch_manager.py:71:33
   |
70 |         Args:
71 |             operation_type: æ“ä½œç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'add'ï¼ˆæ–°å¢žï¼‰ã€'update'ï¼ˆæ›´æ–°ï¼‰ã€'delete'ï¼ˆåˆ é™¤ï¼‰ã€‚
   |                                     ^^
72 |             entity: æ•°æ®åº“å®žä½“å¯¹è±¡ï¼Œå¿…é¡»æ˜¯ SQLAlchemy æ¨¡åž‹å®žä¾‹ã€‚
73 |             description: æ“ä½œæè¿°ï¼Œç”¨äºŽæ—¥å¿—è®°å½•å’Œé”™è¯¯è¿½è¸ªã€‚
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/utils/database_batch_manager.py:71:37
   |
70 |         Args:
71 |             operation_type: æ“ä½œç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'add'ï¼ˆæ–°å¢žï¼‰ã€'update'ï¼ˆæ›´æ–°ï¼‰ã€'delete'ï¼ˆåˆ é™¤ï¼‰ã€‚
   |                                             ^^
72 |             entity: æ•°æ®åº“å®žä½“å¯¹è±¡ï¼Œå¿…é¡»æ˜¯ SQLAlchemy æ¨¡åž‹å®žä¾‹ã€‚
73 |             description: æ“ä½œæè¿°ï¼Œç”¨äºŽæ—¥å¿—è®°å½•å’Œé”™è¯¯è¿½è¸ªã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/database_batch_manager.py:71:43
   |
70 |         Args:
71 |             operation_type: æ“ä½œç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'add'ï¼ˆæ–°å¢žï¼‰ã€'update'ï¼ˆæ›´æ–°ï¼‰ã€'delete'ï¼ˆåˆ é™¤ï¼‰ã€‚
   |                                                    ^^
72 |             entity: æ•°æ®åº“å®žä½“å¯¹è±¡ï¼Œå¿…é¡»æ˜¯ SQLAlchemy æ¨¡åž‹å®žä¾‹ã€‚
73 |             description: æ“ä½œæè¿°ï¼Œç”¨äºŽæ—¥å¿—è®°å½•å’Œé”™è¯¯è¿½è¸ªã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/database_batch_manager.py:71:46
   |
70 |         Args:
71 |             operation_type: æ“ä½œç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'add'ï¼ˆæ–°å¢žï¼‰ã€'update'ï¼ˆæ›´æ–°ï¼‰ã€'delete'ï¼ˆåˆ é™¤ï¼‰ã€‚
   |                                                          ^^
72 |             entity: æ•°æ®åº“å®žä½“å¯¹è±¡ï¼Œå¿…é¡»æ˜¯ SQLAlchemy æ¨¡åž‹å®žä¾‹ã€‚
73 |             description: æ“ä½œæè¿°ï¼Œç”¨äºŽæ—¥å¿—è®°å½•å’Œé”™è¯¯è¿½è¸ªã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/database_batch_manager.py:71:56
   |
70 |         Args:
71 |             operation_type: æ“ä½œç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'add'ï¼ˆæ–°å¢žï¼‰ã€'update'ï¼ˆæ›´æ–°ï¼‰ã€'delete'ï¼ˆåˆ é™¤ï¼‰ã€‚
   |                                                                      ^^
72 |             entity: æ•°æ®åº“å®žä½“å¯¹è±¡ï¼Œå¿…é¡»æ˜¯ SQLAlchemy æ¨¡åž‹å®žä¾‹ã€‚
73 |             description: æ“ä½œæè¿°ï¼Œç”¨äºŽæ—¥å¿—è®°å½•å’Œé”™è¯¯è¿½è¸ªã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/database_batch_manager.py:71:59
   |
70 |         Args:
71 |             operation_type: æ“ä½œç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'add'ï¼ˆæ–°å¢žï¼‰ã€'update'ï¼ˆæ›´æ–°ï¼‰ã€'delete'ï¼ˆåˆ é™¤ï¼‰ã€‚
   |                                                                            ^^
72 |             entity: æ•°æ®åº“å®žä½“å¯¹è±¡ï¼Œå¿…é¡»æ˜¯ SQLAlchemy æ¨¡åž‹å®žä¾‹ã€‚
73 |             description: æ“ä½œæè¿°ï¼Œç”¨äºŽæ—¥å¿—è®°å½•å’Œé”™è¯¯è¿½è¸ªã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/database_batch_manager.py:71:69
   |
70 |         Args:
71 |             operation_type: æ“ä½œç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'add'ï¼ˆæ–°å¢žï¼‰ã€'update'ï¼ˆæ›´æ–°ï¼‰ã€'delete'ï¼ˆåˆ é™¤ï¼‰ã€‚
   |                                                                                        ^^
72 |             entity: æ•°æ®åº“å®žä½“å¯¹è±¡ï¼Œå¿…é¡»æ˜¯ SQLAlchemy æ¨¡åž‹å®žä¾‹ã€‚
73 |             description: æ“ä½œæè¿°ï¼Œç”¨äºŽæ—¥å¿—è®°å½•å’Œé”™è¯¯è¿½è¸ªã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/database_batch_manager.py:71:72
   |
70 |         Args:
71 |             operation_type: æ“ä½œç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'add'ï¼ˆæ–°å¢žï¼‰ã€'update'ï¼ˆæ›´æ–°ï¼‰ã€'delete'ï¼ˆåˆ é™¤ï¼‰ã€‚
   |                                                                                              ^^
72 |             entity: æ•°æ®åº“å®žä½“å¯¹è±¡ï¼Œå¿…é¡»æ˜¯ SQLAlchemy æ¨¡åž‹å®žä¾‹ã€‚
73 |             description: æ“ä½œæè¿°ï¼Œç”¨äºŽæ—¥å¿—è®°å½•å’Œé”™è¯¯è¿½è¸ªã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/database_batch_manager.py:72:28
   |
70 |         Args:
71 |             operation_type: æ“ä½œç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'add'ï¼ˆæ–°å¢žï¼‰ã€'update'ï¼ˆæ›´æ–°ï¼‰ã€'delete'ï¼ˆåˆ é™¤ï¼‰ã€‚
72 |             entity: æ•°æ®åº“å®žä½“å¯¹è±¡ï¼Œå¿…é¡»æ˜¯ SQLAlchemy æ¨¡åž‹å®žä¾‹ã€‚
   |                                   ^^
73 |             description: æ“ä½œæè¿°ï¼Œç”¨äºŽæ—¥å¿—è®°å½•å’Œé”™è¯¯è¿½è¸ªã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/database_batch_manager.py:73:30
   |
71 |             operation_type: æ“ä½œç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'add'ï¼ˆæ–°å¢žï¼‰ã€'update'ï¼ˆæ›´æ–°ï¼‰ã€'delete'ï¼ˆåˆ é™¤ï¼‰ã€‚
72 |             entity: æ•°æ®åº“å®žä½“å¯¹è±¡ï¼Œå¿…é¡»æ˜¯ SQLAlchemy æ¨¡åž‹å®žä¾‹ã€‚
73 |             description: æ“ä½œæè¿°ï¼Œç”¨äºŽæ—¥å¿—è®°å½•å’Œé”™è¯¯è¿½è¸ªã€‚
   |                                  ^^
74 |
75 |         Returns:
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/database_batch_manager.py:87:19
   |
85 |         self.total_operations += 1
86 |
87 |         # å¦‚æžœè¾¾åˆ°æ‰¹æ¬¡å¤§å°ï¼Œè‡ªåŠ¨æäº¤
   |                           ^^
88 |         if len(self.pending_operations) >= self.batch_size:
89 |             self.commit_batch()
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/database_batch_manager.py:94:33
   |
92 |         """æäº¤å½“å‰æ‰¹æ¬¡çš„æ‰€æœ‰æ“ä½œã€‚.
93 |
94 |         æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„æ‰€æœ‰æ“ä½œå¹¶æäº¤äº‹åŠ¡ã€‚å¦‚æžœä»»ä½•æ“ä½œå¤±è´¥ï¼Œ
   |                                                         ^^
95 |         è®°å½•é”™è¯¯ä½†ç»§ç»­å¤„ç†å…¶ä»–æ“ä½œã€‚å¦‚æžœæäº¤å¤±è´¥ï¼Œå›žæ»šæ•´ä¸ªæ‰¹æ¬¡ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/database_batch_manager.py:95:29
   |
94 |         æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„æ‰€æœ‰æ“ä½œå¹¶æäº¤äº‹åŠ¡ã€‚å¦‚æžœä»»ä½•æ“ä½œå¤±è´¥ï¼Œ
95 |         è®°å½•é”™è¯¯ä½†ç»§ç»­å¤„ç†å…¶ä»–æ“ä½œã€‚å¦‚æžœæäº¤å¤±è´¥ï¼Œå›žæ»šæ•´ä¸ªæ‰¹æ¬¡ã€‚
   |                                                 ^^
96 |
97 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/database_batch_manager.py:98:24
    |
 97 |         Returns:
 98 |             æäº¤æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚
    |                              ^^
 99 |
100 |         Example:
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/database_batch_manager.py:128:33
    |
126 |                         db.session.add(operation["entity"])
127 |                     elif operation["type"] == "update":
128 |                         # å¯¹äºŽæ›´æ–°æ“ä½œï¼Œå®žä½“å·²ç»åœ¨sessionä¸­ï¼Œåªéœ€è¦ç¡®ä¿ä¿®æ”¹è¢«è¿½è¸ª
    |                                       ^^
129 |                         db.session.merge(operation["entity"])
130 |                     elif operation["type"] == "delete":
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/database_batch_manager.py:128:47
    |
126 |                         db.session.add(operation["entity"])
127 |                     elif operation["type"] == "update":
128 |                         # å¯¹äºŽæ›´æ–°æ“ä½œï¼Œå®žä½“å·²ç»åœ¨sessionä¸­ï¼Œåªéœ€è¦ç¡®ä¿ä¿®æ”¹è¢«è¿½è¸ª
    |                                                            ^^
129 |                         db.session.merge(operation["entity"])
130 |                     elif operation["type"] == "delete":
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/database_batch_manager.py:144:31
    |
142 |                         error=str(op_error),
143 |                     )
144 |                     # ç»§ç»­å¤„ç†å…¶ä»–æ“ä½œï¼Œä¸å› å•ä¸ªå¤±è´¥è€Œåœæ­¢
    |                                       ^^
145 |
146 |             # æäº¤äº‹åŠ¡
    |

TRY300 Consider moving this statement to an `else` block
   --> app/utils/database_batch_manager.py:160:13
    |
158 |             # æ¸…ç©ºå½“å‰æ‰¹æ¬¡
159 |             self.pending_operations.clear()
160 |             return True
    |             ^^^^^^^^^^^
161 |
162 |         except Exception as e:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/database_batch_manager.py:182:19
    |
180 |         """æäº¤å‰©ä½™çš„æ‰€æœ‰æ“ä½œã€‚.
181 |
182 |         åœ¨æ‰¹é‡æ“ä½œç»“æŸæ—¶è°ƒç”¨ï¼Œæäº¤é˜Ÿåˆ—ä¸­å‰©ä½™çš„æœªè¾¾åˆ°æ‰¹æ¬¡å¤§å°çš„æ“ä½œã€‚
    |                             ^^
183 |
184 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/database_batch_manager.py:185:24
    |
184 |         Returns:
185 |             æäº¤æˆåŠŸè¿”å›ž Trueï¼Œå¤±è´¥è¿”å›ž Falseã€‚å¦‚æžœé˜Ÿåˆ—ä¸ºç©ºè¿”å›ž Trueã€‚
    |                              ^^
186 |
187 |         Example:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/database_batch_manager.py:239:22
    |
238 |         Returns:
239 |             åŒ…å«ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                               ^^
240 |             {
241 |                 'total_operations': 100,        # æ€»æ“ä½œæ•°
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/database_batch_manager.py:239:27
    |
238 |         Returns:
239 |             åŒ…å«ç»Ÿè®¡ä¿¡æ¯çš„å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                         ^^
240 |             {
241 |                 'total_operations': 100,        # æ€»æ“ä½œæ•°
    |

ANN204 Missing return type annotation for special method `__enter__`
   --> app/utils/database_batch_manager.py:263:9
    |
261 |         }
262 |
263 |     def __enter__(self):
    |         ^^^^^^^^^
264 |         """ä¸Šä¸‹æ–‡ç®¡ç†å™¨å…¥å£ã€‚.
    |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/database_batch_manager.py:267:19
    |
266 |         Returns:
267 |             è¿”å›žè‡ªèº«å®žä¾‹ï¼Œæ”¯æŒ with è¯­å¥ã€‚
    |                         ^^
268 |
269 |         """
    |

PYI036 The first argument in `__exit__` should be annotated with `object` or `type[BaseException] | None`
   --> app/utils/database_batch_manager.py:272:34
    |
270 |         return self
271 |
272 |     def __exit__(self, exc_type: Any, exc_val: Any, exc_tb: Any) -> None:
    |                                  ^^^
273 |         """ä¸Šä¸‹æ–‡ç®¡ç†å™¨å‡ºå£ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `exc_type`
   --> app/utils/database_batch_manager.py:272:34
    |
270 |         return self
271 |
272 |     def __exit__(self, exc_type: Any, exc_val: Any, exc_tb: Any) -> None:
    |                                  ^^^
273 |         """ä¸Šä¸‹æ–‡ç®¡ç†å™¨å‡ºå£ã€‚.
    |

PYI036 The second argument in `__exit__` should be annotated with `object` or `BaseException | None`
   --> app/utils/database_batch_manager.py:272:48
    |
270 |         return self
271 |
272 |     def __exit__(self, exc_type: Any, exc_val: Any, exc_tb: Any) -> None:
    |                                                ^^^
273 |         """ä¸Šä¸‹æ–‡ç®¡ç†å™¨å‡ºå£ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `exc_val`
   --> app/utils/database_batch_manager.py:272:48
    |
270 |         return self
271 |
272 |     def __exit__(self, exc_type: Any, exc_val: Any, exc_tb: Any) -> None:
    |                                                ^^^
273 |         """ä¸Šä¸‹æ–‡ç®¡ç†å™¨å‡ºå£ã€‚.
    |

PYI036 The third argument in `__exit__` should be annotated with `object` or `types.TracebackType | None`
   --> app/utils/database_batch_manager.py:272:61
    |
270 |         return self
271 |
272 |     def __exit__(self, exc_type: Any, exc_val: Any, exc_tb: Any) -> None:
    |                                                             ^^^
273 |         """ä¸Šä¸‹æ–‡ç®¡ç†å™¨å‡ºå£ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `exc_tb`
   --> app/utils/database_batch_manager.py:272:61
    |
270 |         return self
271 |
272 |     def __exit__(self, exc_type: Any, exc_val: Any, exc_tb: Any) -> None:
    |                                                             ^^^
273 |         """ä¸Šä¸‹æ–‡ç®¡ç†å™¨å‡ºå£ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/database_batch_manager.py:275:20
    |
273 |         """ä¸Šä¸‹æ–‡ç®¡ç†å™¨å‡ºå£ã€‚.
274 |
275 |         æ­£å¸¸é€€å‡ºæ—¶æäº¤å‰©ä½™æ“ä½œï¼Œå¼‚å¸¸é€€å‡ºæ—¶å›žæ»šæ“ä½œã€‚
    |                               ^^
276 |
277 |         Args:
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/database_batch_manager.py:287:19
    |
285 |         """
286 |         if exc_type is None:
287 |             # æ­£å¸¸é€€å‡ºï¼Œæäº¤å‰©ä½™æ“ä½œ
    |                       ^^
288 |             self.flush_remaining()
289 |         else:
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/database_batch_manager.py:290:19
    |
288 |             self.flush_remaining()
289 |         else:
290 |             # å¼‚å¸¸é€€å‡ºï¼Œå›žæ»šæ“ä½œ
    |                       ^^
291 |             self.rollback()
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `f`
  --> app/utils/decorators.py:18:23
   |
16 | SAFE_CSRF_METHODS = {"GET", "HEAD", "OPTIONS", "TRACE"}
17 |
18 | def admin_required(f: Any) -> Any:
   |                       ^^^
19 |     """ç¡®ä¿è¢«è£…é¥°å‡½æ•°ä»…å…è®¸ç®¡ç†å‘˜è®¿é—®çš„è£…é¥°å™¨ã€‚.
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `admin_required`
  --> app/utils/decorators.py:18:31
   |
16 | SAFE_CSRF_METHODS = {"GET", "HEAD", "OPTIONS", "TRACE"}
17 |
18 | def admin_required(f: Any) -> Any:
   |                               ^^^
19 |     """ç¡®ä¿è¢«è£…é¥°å‡½æ•°ä»…å…è®¸ç®¡ç†å‘˜è®¿é—®çš„è£…é¥°å™¨ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/decorators.py:22:11
   |
21 |     éªŒè¯å½“å‰ç”¨æˆ·æ˜¯å¦å·²è®¤è¯ä¸”å…·æœ‰ç®¡ç†å‘˜è§’è‰²ã€‚
22 |     å¦‚æžœéªŒè¯å¤±è´¥ï¼Œæ ¹æ®è¯·æ±‚ç±»åž‹è¿”å›ž JSON é”™è¯¯æˆ–é‡å®šå‘åˆ°ç™»å½•é¡µã€‚
   |                 ^^
23 |
24 |     Args:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/decorators.py:31:39
   |
30 |     Raises:
31 |         AuthenticationError: å½“ç”¨æˆ·æœªè®¤è¯æ—¶æŠ›å‡ºï¼ˆJSON è¯·æ±‚ï¼‰ã€‚
   |                                                ^^
32 |         AuthorizationError: å½“ç”¨æˆ·æƒé™ä¸è¶³æ—¶æŠ›å‡ºï¼ˆJSON è¯·æ±‚ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/decorators.py:31:47
   |
30 |     Raises:
31 |         AuthenticationError: å½“ç”¨æˆ·æœªè®¤è¯æ—¶æŠ›å‡ºï¼ˆJSON è¯·æ±‚ï¼‰ã€‚
   |                                                           ^^
32 |         AuthorizationError: å½“ç”¨æˆ·æƒé™ä¸è¶³æ—¶æŠ›å‡ºï¼ˆJSON è¯·æ±‚ï¼‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/decorators.py:32:39
   |
30 |     Raises:
31 |         AuthenticationError: å½“ç”¨æˆ·æœªè®¤è¯æ—¶æŠ›å‡ºï¼ˆJSON è¯·æ±‚ï¼‰ã€‚
32 |         AuthorizationError: å½“ç”¨æˆ·æƒé™ä¸è¶³æ—¶æŠ›å‡ºï¼ˆJSON è¯·æ±‚ï¼‰ã€‚
   |                                                 ^^
33 |
34 |     """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/decorators.py:32:47
   |
30 |     Raises:
31 |         AuthenticationError: å½“ç”¨æˆ·æœªè®¤è¯æ—¶æŠ›å‡ºï¼ˆJSON è¯·æ±‚ï¼‰ã€‚
32 |         AuthorizationError: å½“ç”¨æˆ·æƒé™ä¸è¶³æ—¶æŠ›å‡ºï¼ˆJSON è¯·æ±‚ï¼‰ã€‚
   |                                                            ^^
33 |
34 |     """
   |

ANN002 Missing type annotation for `*args`
  --> app/utils/decorators.py:37:28
   |
36 |     @wraps(f)
37 |     def decorated_function(*args, **kwargs: Any) -> Any:
   |                            ^^^^^
38 |         system_logger = get_system_logger()
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `**kwargs`
  --> app/utils/decorators.py:37:45
   |
36 |     @wraps(f)
37 |     def decorated_function(*args, **kwargs: Any) -> Any:
   |                                             ^^^
38 |         system_logger = get_system_logger()
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `decorated_function`
  --> app/utils/decorators.py:37:53
   |
36 |     @wraps(f)
37 |     def decorated_function(*args, **kwargs: Any) -> Any:
   |                                                     ^^^
38 |         system_logger = get_system_logger()
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `f`
   --> app/utils/decorators.py:111:23
    |
111 | def login_required(f: Any) -> Any:
    |                       ^^^
112 |     """è¦æ±‚è°ƒç”¨è€…å·²ç™»å½•çš„è£…é¥°å™¨ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `login_required`
   --> app/utils/decorators.py:111:31
    |
111 | def login_required(f: Any) -> Any:
    |                               ^^^
112 |     """è¦æ±‚è°ƒç”¨è€…å·²ç™»å½•çš„è£…é¥°å™¨ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/decorators.py:118:15
    |
117 |     Returns:
118 |         åŒ…è£…åŽçš„å‡½æ•°ï¼Œè‹¥ç”¨æˆ·æœªç™»å½•å°†é‡å®šå‘æˆ–æŠ›å‡ºå¼‚å¸¸ã€‚
    |                     ^^
119 |
120 |     """
    |

ANN002 Missing type annotation for `*args`
   --> app/utils/decorators.py:123:28
    |
122 |     @wraps(f)
123 |     def decorated_function(*args, **kwargs: Any) -> Any:
    |                            ^^^^^
124 |         system_logger = get_system_logger()
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `**kwargs`
   --> app/utils/decorators.py:123:45
    |
122 |     @wraps(f)
123 |     def decorated_function(*args, **kwargs: Any) -> Any:
    |                                             ^^^
124 |         system_logger = get_system_logger()
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `decorated_function`
   --> app/utils/decorators.py:123:53
    |
122 |     @wraps(f)
123 |     def decorated_function(*args, **kwargs: Any) -> Any:
    |                                                     ^^^
124 |         system_logger = get_system_logger()
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `permission_required`
   --> app/utils/decorators.py:168:45
    |
168 | def permission_required(permission: str) -> Any:
    |                                             ^^^
169 |     """æ ¡éªŒæŒ‡å®šæƒé™ï¼ˆview/create/update/deleteï¼‰çš„è£…é¥°å™¨å·¥åŽ‚ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/decorators.py:169:14
    |
168 | def permission_required(permission: str) -> Any:
169 |     """æ ¡éªŒæŒ‡å®šæƒé™ï¼ˆview/create/update/deleteï¼‰çš„è£…é¥°å™¨å·¥åŽ‚ã€‚.
    |                    ^^
170 |
171 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/decorators.py:169:40
    |
168 | def permission_required(permission: str) -> Any:
169 |     """æ ¡éªŒæŒ‡å®šæƒé™ï¼ˆview/create/update/deleteï¼‰çš„è£…é¥°å™¨å·¥åŽ‚ã€‚.
    |                                               ^^
170 |
171 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/decorators.py:175:18
    |
174 |     Returns:
175 |         å¯è£…é¥°è§†å›¾çš„æ ¡éªŒå™¨ï¼Œæœªé€šè¿‡æ—¶ä¼šå‘Šè­¦æˆ–æŠ›å‡ºå¼‚å¸¸ã€‚
    |                           ^^
176 |
177 |     """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `f`
   --> app/utils/decorators.py:179:22
    |
177 |     """
178 |
179 |     def decorator(f: Any) -> Any:
    |                      ^^^
180 |         @wraps(f)
181 |         def decorated_function(*args, **kwargs: Any) -> Any:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `decorator`
   --> app/utils/decorators.py:179:30
    |
177 |     """
178 |
179 |     def decorator(f: Any) -> Any:
    |                              ^^^
180 |         @wraps(f)
181 |         def decorated_function(*args, **kwargs: Any) -> Any:
    |

ANN002 Missing type annotation for `*args`
   --> app/utils/decorators.py:181:32
    |
179 |     def decorator(f: Any) -> Any:
180 |         @wraps(f)
181 |         def decorated_function(*args, **kwargs: Any) -> Any:
    |                                ^^^^^
182 |             system_logger = get_system_logger()
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `**kwargs`
   --> app/utils/decorators.py:181:49
    |
179 |     def decorator(f: Any) -> Any:
180 |         @wraps(f)
181 |         def decorated_function(*args, **kwargs: Any) -> Any:
    |                                                 ^^^
182 |             system_logger = get_system_logger()
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `decorated_function`
   --> app/utils/decorators.py:181:57
    |
179 |     def decorator(f: Any) -> Any:
180 |         @wraps(f)
181 |         def decorated_function(*args, **kwargs: Any) -> Any:
    |                                                         ^^^
182 |             system_logger = get_system_logger()
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/decorators.py:266:22
    |
265 |     Returns:
266 |         æå–åˆ°çš„ CSRF å­—ç¬¦ä¸²ï¼Œè‹¥ä¸å­˜åœ¨è¿”å›ž Noneã€‚
    |                             ^^
267 |
268 |     """
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `f`
   --> app/utils/decorators.py:283:21
    |
283 | def require_csrf(f: Any) -> Any:
    |                     ^^^
284 |     """ç»Ÿä¸€çš„ CSRF æ ¡éªŒè£…é¥°å™¨ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `require_csrf`
   --> app/utils/decorators.py:283:29
    |
283 | def require_csrf(f: Any) -> Any:
    |                             ^^^
284 |     """ç»Ÿä¸€çš„ CSRF æ ¡éªŒè£…é¥°å™¨ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/decorators.py:290:15
    |
289 |     Returns:
290 |         è£…é¥°åŽçš„å‡½æ•°ï¼Œæ ¡éªŒå¤±è´¥æ—¶æŠ›å‡º AuthorizationErrorã€‚
    |                     ^^
291 |
292 |     """
    |

ANN002 Missing type annotation for `*args`
   --> app/utils/decorators.py:295:28
    |
294 |     @wraps(f)
295 |     def decorated_function(*args, **kwargs: Any) -> Any:
    |                            ^^^^^
296 |         if request.method.upper() in SAFE_CSRF_METHODS:
297 |             return f(*args, **kwargs)
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `**kwargs`
   --> app/utils/decorators.py:295:45
    |
294 |     @wraps(f)
295 |     def decorated_function(*args, **kwargs: Any) -> Any:
    |                                             ^^^
296 |         if request.method.upper() in SAFE_CSRF_METHODS:
297 |             return f(*args, **kwargs)
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `decorated_function`
   --> app/utils/decorators.py:295:53
    |
294 |     @wraps(f)
295 |     def decorated_function(*args, **kwargs: Any) -> Any:
    |                                                     ^^^
296 |         if request.method.upper() in SAFE_CSRF_METHODS:
297 |             return f(*args, **kwargs)
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/decorators.py:332:29
    |
330 |                 exception=str(exc),
331 |             )
332 |             msg = "CSRF ä»¤ç‰Œæ— æ•ˆï¼Œè¯·åˆ·æ–°åŽé‡è¯•"
    |                                 ^^
333 |             raise AuthorizationError(
334 |                 msg,
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `user`
   --> app/utils/decorators.py:347:26
    |
347 | def has_permission(user: Any, permission: str) -> bool:
    |                          ^^^
348 |     """æ£€æŸ¥ç»™å®šç”¨æˆ·æ˜¯å¦å…·å¤‡æŒ‡å®šæƒé™ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/decorators.py:355:20
    |
354 |     Returns:
355 |         True è¡¨ç¤ºå…·æœ‰æƒé™ï¼ŒFalse è¡¨ç¤ºç¼ºå¤±æˆ–æœªç™»å½•ã€‚
    |                          ^^
356 |
357 |     """
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/decorators.py:366:13
    |
365 |     # æ¨¡æ‹Ÿä»Žæ•°æ®åº“æˆ–é…ç½®ä¸­åŠ è½½çš„ç”¨æˆ·æƒé™
366 |     # åœ¨çœŸå®žåº”ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥æŸ¥è¯¢æ•°æ®åº“
    |                   ^^
367 |     user_permissions = {
368 |         "user": {
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `f`
   --> app/utils/decorators.py:382:22
    |
382 | def view_required(f: Any = None, *, permission: str = "view") -> Any:
    |                      ^^^
383 |     """æ ¡éªŒæŸ¥çœ‹æƒé™çš„è£…é¥°å™¨ï¼Œå¯ç›´æŽ¥ä½¿ç”¨æˆ–æŒ‡å®šè‡ªå®šä¹‰æƒé™ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `view_required`
   --> app/utils/decorators.py:382:66
    |
382 | def view_required(f: Any = None, *, permission: str = "view") -> Any:
    |                                                                  ^^^
383 |     """æ ¡éªŒæŸ¥çœ‹æƒé™çš„è£…é¥°å™¨ï¼Œå¯ç›´æŽ¥ä½¿ç”¨æˆ–æŒ‡å®šè‡ªå®šä¹‰æƒé™ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/decorators.py:383:18
    |
382 | def view_required(f: Any = None, *, permission: str = "view") -> Any:
383 |     """æ ¡éªŒæŸ¥çœ‹æƒé™çš„è£…é¥°å™¨ï¼Œå¯ç›´æŽ¥ä½¿ç”¨æˆ–æŒ‡å®šè‡ªå®šä¹‰æƒé™ã€‚.
    |                            ^^
384 |
385 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/decorators.py:386:17
    |
385 |     Args:
386 |         f: å¾…è£…é¥°å‡½æ•°ï¼Œæ”¯æŒæ— å‚ç›´æŽ¥ä½¿ç”¨ã€‚
    |                      ^^
387 |         permission: è‡ªå®šä¹‰æƒé™åç§°ï¼Œé»˜è®¤ `view`ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/decorators.py:387:28
    |
385 |     Args:
386 |         f: å¾…è£…é¥°å‡½æ•°ï¼Œæ”¯æŒæ— å‚ç›´æŽ¥ä½¿ç”¨ã€‚
387 |         permission: è‡ªå®šä¹‰æƒé™åç§°ï¼Œé»˜è®¤ `view`ã€‚
    |                                   ^^
388 |
389 |     Returns:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `func`
   --> app/utils/decorators.py:394:25
    |
392 |     """
393 |
394 |     def decorator(func: Any) -> Any:
    |                         ^^^
395 |         return permission_required(permission)(func)
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `decorator`
   --> app/utils/decorators.py:394:33
    |
392 |     """
393 |
394 |     def decorator(func: Any) -> Any:
    |                                 ^^^
395 |         return permission_required(permission)(func)
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `f`
   --> app/utils/decorators.py:402:24
    |
402 | def create_required(f: Any = None, *, permission: str = "create") -> Any:
    |                        ^^^
403 |     """æ ¡éªŒåˆ›å»ºæƒé™çš„è£…é¥°å™¨ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `create_required`
   --> app/utils/decorators.py:402:70
    |
402 | def create_required(f: Any = None, *, permission: str = "create") -> Any:
    |                                                                      ^^^
403 |     """æ ¡éªŒåˆ›å»ºæƒé™çš„è£…é¥°å™¨ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/decorators.py:407:28
    |
405 |     Args:
406 |         f: å¾…è£…é¥°å‡½æ•°ã€‚
407 |         permission: è‡ªå®šä¹‰æƒé™åç§°ï¼Œé»˜è®¤ä¸º `create`ã€‚
    |                                   ^^
408 |
409 |     Returns:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `func`
   --> app/utils/decorators.py:414:25
    |
412 |     """
413 |
414 |     def decorator(func: Any) -> Any:
    |                         ^^^
415 |         return permission_required(permission)(func)
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `decorator`
   --> app/utils/decorators.py:414:33
    |
412 |     """
413 |
414 |     def decorator(func: Any) -> Any:
    |                                 ^^^
415 |         return permission_required(permission)(func)
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `f`
   --> app/utils/decorators.py:422:24
    |
422 | def update_required(f: Any = None, *, permission: str = "update") -> Any:
    |                        ^^^
423 |     """æ ¡éªŒæ›´æ–°æƒé™çš„è£…é¥°å™¨ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `update_required`
   --> app/utils/decorators.py:422:70
    |
422 | def update_required(f: Any = None, *, permission: str = "update") -> Any:
    |                                                                      ^^^
423 |     """æ ¡éªŒæ›´æ–°æƒé™çš„è£…é¥°å™¨ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/decorators.py:427:28
    |
425 |     Args:
426 |         f: å¾…è£…é¥°å‡½æ•°ã€‚
427 |         permission: è‡ªå®šä¹‰æƒé™åç§°ï¼Œé»˜è®¤ä¸º `update`ã€‚
    |                                   ^^
428 |
429 |     Returns:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `func`
   --> app/utils/decorators.py:434:25
    |
432 |     """
433 |
434 |     def decorator(func: Any) -> Any:
    |                         ^^^
435 |         return permission_required(permission)(func)
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `decorator`
   --> app/utils/decorators.py:434:33
    |
432 |     """
433 |
434 |     def decorator(func: Any) -> Any:
    |                                 ^^^
435 |         return permission_required(permission)(func)
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `f`
   --> app/utils/decorators.py:442:24
    |
442 | def delete_required(f: Any = None, *, permission: str = "delete") -> Any:
    |                        ^^^
443 |     """æ ¡éªŒåˆ é™¤æƒé™çš„è£…é¥°å™¨ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `delete_required`
   --> app/utils/decorators.py:442:70
    |
442 | def delete_required(f: Any = None, *, permission: str = "delete") -> Any:
    |                                                                      ^^^
443 |     """æ ¡éªŒåˆ é™¤æƒé™çš„è£…é¥°å™¨ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/decorators.py:447:28
    |
445 |     Args:
446 |         f: å¾…è£…é¥°å‡½æ•°ã€‚
447 |         permission: è‡ªå®šä¹‰æƒé™åç§°ï¼Œé»˜è®¤ä¸º `delete`ã€‚
    |                                   ^^
448 |
449 |     Returns:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `func`
   --> app/utils/decorators.py:454:25
    |
452 |     """
453 |
454 |     def decorator(func: Any) -> Any:
    |                         ^^^
455 |         return permission_required(permission)(func)
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `decorator`
   --> app/utils/decorators.py:454:33
    |
452 |     """
453 |
454 |     def decorator(func: Any) -> Any:
    |                                 ^^^
455 |         return permission_required(permission)(func)
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `f`
   --> app/utils/decorators.py:462:32
    |
462 | def scheduler_view_required(f: Any) -> Any:
    |                                ^^^
463 |     """å®šæ—¶ä»»åŠ¡æŸ¥çœ‹æƒé™è£…é¥°å™¨ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `scheduler_view_required`
   --> app/utils/decorators.py:462:40
    |
462 | def scheduler_view_required(f: Any) -> Any:
    |                                        ^^^
463 |     """å®šæ—¶ä»»åŠ¡æŸ¥çœ‹æƒé™è£…é¥°å™¨ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `f`
   --> app/utils/decorators.py:475:34
    |
475 | def scheduler_manage_required(f: Any) -> Any:
    |                                  ^^^
476 |     """å®šæ—¶ä»»åŠ¡ç®¡ç†æƒé™è£…é¥°å™¨ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `scheduler_manage_required`
   --> app/utils/decorators.py:475:42
    |
475 | def scheduler_manage_required(f: Any) -> Any:
    |                                          ^^^
476 |     """å®šæ—¶ä»»åŠ¡ç®¡ç†æƒé™è£…é¥°å™¨ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/error_adapter.py:28:28
   |
26 |     Attributes:
27 |         error: æ•èŽ·çš„å¼‚å¸¸å¯¹è±¡ã€‚
28 |         request: Flask è¯·æ±‚å¯¹è±¡ï¼Œå¯é€‰ã€‚
   |                                ^^
29 |         error_id: å”¯ä¸€é”™è¯¯æ ‡è¯†ç¬¦ï¼Œè‡ªåŠ¨ç”Ÿæˆã€‚
30 |         timestamp: é”™è¯¯å‘ç”Ÿæ—¶é—´æˆ³ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/error_adapter.py:29:26
   |
27 |         error: æ•èŽ·çš„å¼‚å¸¸å¯¹è±¡ã€‚
28 |         request: Flask è¯·æ±‚å¯¹è±¡ï¼Œå¯é€‰ã€‚
29 |         error_id: å”¯ä¸€é”™è¯¯æ ‡è¯†ç¬¦ï¼Œè‡ªåŠ¨ç”Ÿæˆã€‚
   |                                 ^^
30 |         timestamp: é”™è¯¯å‘ç”Ÿæ—¶é—´æˆ³ã€‚
31 |         request_id: è¯·æ±‚ IDï¼Œä»Žä¸Šä¸‹æ–‡å˜é‡èŽ·å–ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/error_adapter.py:31:26
   |
29 |         error_id: å”¯ä¸€é”™è¯¯æ ‡è¯†ç¬¦ï¼Œè‡ªåŠ¨ç”Ÿæˆã€‚
30 |         timestamp: é”™è¯¯å‘ç”Ÿæ—¶é—´æˆ³ã€‚
31 |         request_id: è¯·æ±‚ IDï¼Œä»Žä¸Šä¸‹æ–‡å˜é‡èŽ·å–ã€‚
   |                            ^^
32 |         user_id: ç”¨æˆ· IDï¼Œä»Žä¸Šä¸‹æ–‡å˜é‡èŽ·å–ã€‚
33 |         url: è¯·æ±‚ URLã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/error_adapter.py:32:23
   |
30 |         timestamp: é”™è¯¯å‘ç”Ÿæ—¶é—´æˆ³ã€‚
31 |         request_id: è¯·æ±‚ IDï¼Œä»Žä¸Šä¸‹æ–‡å˜é‡èŽ·å–ã€‚
32 |         user_id: ç”¨æˆ· IDï¼Œä»Žä¸Šä¸‹æ–‡å˜é‡èŽ·å–ã€‚
   |                         ^^
33 |         url: è¯·æ±‚ URLã€‚
34 |         method: HTTP æ–¹æ³•ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/error_adapter.py:52:30
   |
50 |         """ç¡®ä¿è¯·æ±‚ä¸Šä¸‹æ–‡ä¿¡æ¯å·²å¡«å……ã€‚.
51 |
52 |         å¦‚æžœ request ä¸ºç©ºä¸”åœ¨è¯·æ±‚ä¸Šä¸‹æ–‡ä¸­ï¼Œåˆ™è‡ªåŠ¨èŽ·å– Flask è¯·æ±‚å¯¹è±¡ã€‚
   |                                          ^^
53 |         åŒæ—¶æå– URLã€HTTP æ–¹æ³•ã€IP åœ°å€å’Œ User-Agent ç­‰ä¿¡æ¯ã€‚
   |

PLC0415 `import` should be at the top-level of a file
  --> app/utils/logging/error_adapter.py:60:13
   |
58 |         """
59 |         if self.request is None and has_request_context():
60 |             from flask import request as flask_request
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
61 |
62 |             self.request = flask_request
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/error_adapter.py:98:14
   |
96 |     """ä»Žå¼‚å¸¸å¯¹è±¡æŽ¨å¯¼é”™è¯¯å…ƒæ•°æ®ã€‚.
97 |
98 |     æ ¹æ®å¼‚å¸¸ç±»åž‹å’Œå†…å®¹ï¼Œè‡ªåŠ¨åˆ¤æ–­ HTTP çŠ¶æ€ç ã€é”™è¯¯ç±»åˆ«ã€ä¸¥é‡ç¨‹åº¦ç­‰ä¿¡æ¯ã€‚
   |                       ^^
99 |     æ”¯æŒ AppErrorã€HTTPException å’Œé€šç”¨å¼‚å¸¸çš„è¯†åˆ«ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/logging/error_adapter.py:183:35
    |
181 |     """æž„å»ºå¯å¯¹å¤–æš´éœ²çš„é”™è¯¯ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚.
182 |
183 |     ä»Ž ErrorContext ä¸­æå–å®‰å…¨çš„ã€å¯å¯¹å¤–å±•ç¤ºçš„ä¿¡æ¯ï¼Œ
    |                                                   ^^
184 |     åŒ…æ‹¬è¯·æ±‚ IDã€ç”¨æˆ· IDã€URLã€HTTP æ–¹æ³•ç­‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/utils/logging/handlers.py:1:12
  |
1 | """ç»“æž„åŒ–æ—¥å¿—å¤„ç†å™¨ï¼šè´Ÿè´£å°†äº‹ä»¶æ ‡å‡†åŒ–å¹¶äº¤ç”±æ•°æ®åº“ worker å†™å…¥ã€‚."""
  |                    ^^
2 |
3 | from __future__ import annotations
  |

FBT001 Boolean-typed positional argument in function definition
  --> app/utils/logging/handlers.py:27:24
   |
25 |     """
26 |
27 |     def __init__(self, enabled: bool = False) -> None:
   |                        ^^^^^^^
28 |         """åˆå§‹åŒ– DEBUG è¿‡æ»¤å™¨ã€‚.
   |

FBT002 Boolean default positional argument in function definition
  --> app/utils/logging/handlers.py:27:24
   |
25 |     """
26 |
27 |     def __init__(self, enabled: bool = False) -> None:
   |                        ^^^^^^^
28 |         """åˆå§‹åŒ– DEBUG è¿‡æ»¤å™¨ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/handlers.py:31:35
   |
30 |         Args:
31 |             enabled: æ˜¯å¦å¯ç”¨ DEBUG æ—¥å¿—ï¼Œé»˜è®¤ä¸º Falseã€‚
   |                                         ^^
32 |
33 |         """
   |

FBT001 Boolean-typed positional argument in function definition
  --> app/utils/logging/handlers.py:36:27
   |
34 |         self.enabled = enabled
35 |
36 |     def set_enabled(self, enabled: bool) -> None:
   |                           ^^^^^^^
37 |         """è®¾ç½®æ˜¯å¦å¯ç”¨ DEBUG æ—¥å¿—ã€‚.
   |

ANN204 Missing return type annotation for special method `__call__`
  --> app/utils/logging/handlers.py:48:9
   |
46 |         self.enabled = enabled
47 |
48 |     def __call__(self, logger: structlog.BoundLogger, method_name: str, event_dict: dict[str, Any]):
   |         ^^^^^^^^
49 |         """å¤„ç†æ—¥å¿—äº‹ä»¶ï¼Œæ ¹æ®é…ç½®å†³å®šæ˜¯å¦ä¸¢å¼ƒ DEBUG æ—¥å¿—ã€‚.
   |
help: Add return type annotation

ARG002 Unused method argument: `logger`
  --> app/utils/logging/handlers.py:48:24
   |
46 |         self.enabled = enabled
47 |
48 |     def __call__(self, logger: structlog.BoundLogger, method_name: str, event_dict: dict[str, Any]):
   |                        ^^^^^^
49 |         """å¤„ç†æ—¥å¿—äº‹ä»¶ï¼Œæ ¹æ®é…ç½®å†³å®šæ˜¯å¦ä¸¢å¼ƒ DEBUG æ—¥å¿—ã€‚.
   |

ARG002 Unused method argument: `method_name`
  --> app/utils/logging/handlers.py:48:55
   |
46 |         self.enabled = enabled
47 |
48 |     def __call__(self, logger: structlog.BoundLogger, method_name: str, event_dict: dict[str, Any]):
   |                                                       ^^^^^^^^^^^
49 |         """å¤„ç†æ—¥å¿—äº‹ä»¶ï¼Œæ ¹æ®é…ç½®å†³å®šæ˜¯å¦ä¸¢å¼ƒ DEBUG æ—¥å¿—ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/handlers.py:49:18
   |
48 |     def __call__(self, logger: structlog.BoundLogger, method_name: str, event_dict: dict[str, Any]):
49 |         """å¤„ç†æ—¥å¿—äº‹ä»¶ï¼Œæ ¹æ®é…ç½®å†³å®šæ˜¯å¦ä¸¢å¼ƒ DEBUG æ—¥å¿—ã€‚.
   |                        ^^
50 |
51 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/handlers.py:60:50
   |
59 |         Raises:
60 |             structlog.DropEvent: å½“ DEBUG æ—¥å¿—æœªå¯ç”¨æ—¶æŠ›å‡ºï¼Œä¸¢å¼ƒè¯¥æ—¥å¿—ã€‚
   |                                                           ^^
61 |
62 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/handlers.py:70:15
   |
69 | class DatabaseLogHandler:
70 |     """å°†æ—¥å¿—äº‹ä»¶å…¥é˜Ÿï¼Œç”±åŽå°çº¿ç¨‹ç»Ÿä¸€å†™å…¥æ•°æ®åº“çš„å¤„ç†å™¨ã€‚.
   |                      ^^
71 |
72 |     Attributes:
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `worker`
  --> app/utils/logging/handlers.py:77:32
   |
75 |     """
76 |
77 |     def __init__(self, worker: Any | None = None) -> None:
   |                                ^^^^^^^^^^
78 |         """åˆå§‹åŒ–æ•°æ®åº“æ—¥å¿—å¤„ç†å™¨ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/handlers.py:81:31
   |
80 |         Args:
81 |             worker: æ—¥å¿—é˜Ÿåˆ—å·¥ä½œçº¿ç¨‹å®žä¾‹ï¼Œå¯é€‰ã€‚
   |                                         ^^
82 |
83 |         """
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `worker`
  --> app/utils/logging/handlers.py:86:34
   |
84 |         self.worker = worker
85 |
86 |     def set_worker(self, worker: Any | None) -> None:
   |                                  ^^^^^^^^^^
87 |         """è®¾ç½®æ—¥å¿—é˜Ÿåˆ—å·¥ä½œçº¿ç¨‹ã€‚.
   |

ANN204 Missing return type annotation for special method `__call__`
  --> app/utils/logging/handlers.py:98:9
   |
96 |         self.worker = worker
97 |
98 |     def __call__(self, logger: structlog.BoundLogger, method_name: str, event_dict: dict[str, Any]):
   |         ^^^^^^^^
99 |         """å¤„ç†æ—¥å¿—äº‹ä»¶ï¼Œå°†å…¶å…¥é˜Ÿç­‰å¾…å†™å…¥æ•°æ®åº“ã€‚.
   |
help: Add return type annotation

ARG002 Unused method argument: `logger`
  --> app/utils/logging/handlers.py:98:24
   |
96 |         self.worker = worker
97 |
98 |     def __call__(self, logger: structlog.BoundLogger, method_name: str, event_dict: dict[str, Any]):
   |                        ^^^^^^
99 |         """å¤„ç†æ—¥å¿—äº‹ä»¶ï¼Œå°†å…¶å…¥é˜Ÿç­‰å¾…å†™å…¥æ•°æ®åº“ã€‚.
   |

ARG002 Unused method argument: `method_name`
  --> app/utils/logging/handlers.py:98:55
   |
96 |         self.worker = worker
97 |
98 |     def __call__(self, logger: structlog.BoundLogger, method_name: str, event_dict: dict[str, Any]):
   |                                                       ^^^^^^^^^^^
99 |         """å¤„ç†æ—¥å¿—äº‹ä»¶ï¼Œå°†å…¶å…¥é˜Ÿç­‰å¾…å†™å…¥æ•°æ®åº“ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/logging/handlers.py:99:18
    |
 98 |     def __call__(self, logger: structlog.BoundLogger, method_name: str, event_dict: dict[str, Any]):
 99 |         """å¤„ç†æ—¥å¿—äº‹ä»¶ï¼Œå°†å…¶å…¥é˜Ÿç­‰å¾…å†™å…¥æ•°æ®åº“ã€‚.
    |                        ^^
100 |
101 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/logging/handlers.py:126:18
    |
125 |     Returns:
126 |         åŒ…å«æ—¥å¿—å­—æ®µçš„å­—å…¸ï¼Œå¦‚æžœæ˜¯ DEBUG çº§åˆ«åˆ™è¿”å›ž Noneã€‚
    |                           ^^
127 |
128 |     """
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/utils/logging/handlers.py:156:16
    |
154 |         try:
155 |             timestamp = time_utils.to_utc(timestamp)
156 |         except Exception:
    |                ^^^^^^^^^
157 |             timestamp = time_utils.now()
158 |     if timestamp is None:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/logging/handlers.py:183:15
    |
182 |     Returns:
183 |         æå–çš„æ¨¡å—åï¼Œå¦‚æžœæ— æ³•æå–åˆ™è¿”å›ž Noneã€‚
    |                     ^^
184 |
185 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/logging/handlers.py:196:23
    |
194 |     """æž„å»ºæ—¥å¿—ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚.
195 |
196 |     ä»Žäº‹ä»¶å­—å…¸å’Œè¯·æ±‚ä¸Šä¸‹æ–‡ä¸­æå–ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¯·æ±‚ IDã€ç”¨æˆ·ä¿¡æ¯ã€
    |                                         ^^
197 |     URLã€HTTP æ–¹æ³•ç­‰ï¼Œå¹¶è¿‡æ»¤æŽ‰ç³»ç»Ÿå­—æ®µã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/logging/handlers.py:197:17
    |
196 |     ä»Žäº‹ä»¶å­—å…¸å’Œè¯·æ±‚ä¸Šä¸‹æ–‡ä¸­æå–ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¯·æ±‚ IDã€ç”¨æˆ·ä¿¡æ¯ã€
197 |     URLã€HTTP æ–¹æ³•ç­‰ï¼Œå¹¶è¿‡æ»¤æŽ‰ç³»ç»Ÿå­—æ®µã€‚
    |                     ^^
198 |
199 |     Args:
    |

S110 `try`-`except`-`pass` detected, consider logging the exception
   --> app/utils/logging/handlers.py:230:5
    |
228 |               else:
229 |                   context["is_admin"] = bool(is_admin)
230 | /     except Exception:
231 | |         pass
    | |____________^
232 |
233 |       for key, value in event_dict.items():
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/utils/logging/handlers.py:230:12
    |
228 |             else:
229 |                 context["is_admin"] = bool(is_admin)
230 |     except Exception:
    |            ^^^^^^^^^
231 |         pass
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/utils/logging/handlers.py:241:20
    |
239 |             try:
240 |                 context[key] = value.to_dict()
241 |             except Exception:
    |                    ^^^^^^^^^
242 |                 context[key] = str(value)
243 |         else:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/queue_worker.py:17:12
   |
16 | class LogQueueWorker:
17 |     """åŽå°çº¿ç¨‹ï¼ŒæŒ‰æ‰¹æ¬¡å°†æ—¥å¿—å†™å…¥æ•°æ®åº“ã€‚.
   |                ^^
18 |
19 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/logging/queue_worker.py:23:29
   |
21 |         queue: æ—¥å¿—æ¡ç›®é˜Ÿåˆ—ã€‚
22 |         batch_size: æ‰¹æ¬¡å¤§å°ã€‚
23 |         flush_interval: åˆ·æ–°é—´éš”ï¼ˆç§’ï¼‰ã€‚
   |                                 ^^
24 |
25 |     """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/logging/queue_worker.py:23:31
   |
21 |         queue: æ—¥å¿—æ¡ç›®é˜Ÿåˆ—ã€‚
22 |         batch_size: æ‰¹æ¬¡å¤§å°ã€‚
23 |         flush_interval: åˆ·æ–°é—´éš”ï¼ˆç§’ï¼‰ã€‚
   |                                     ^^
24 |
25 |     """
   |

ANN001 Missing type annotation for function argument `app`
  --> app/utils/logging/queue_worker.py:29:9
   |
27 |     def __init__(
28 |         self,
29 |         app,
   |         ^^^
30 |         *,
31 |         queue_size: int = 1000,
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/queue_worker.py:39:31
   |
37 |         Args:
38 |             app: Flask åº”ç”¨å®žä¾‹ã€‚
39 |             queue_size: é˜Ÿåˆ—æœ€å¤§å®¹é‡ï¼Œé»˜è®¤ 1000ã€‚
   |                                     ^^
40 |             batch_size: æ‰¹æ¬¡å¤§å°ï¼Œé»˜è®¤ 100ã€‚
41 |             flush_interval: åˆ·æ–°é—´éš”ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 3.0ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/queue_worker.py:40:29
   |
38 |             app: Flask åº”ç”¨å®žä¾‹ã€‚
39 |             queue_size: é˜Ÿåˆ—æœ€å¤§å®¹é‡ï¼Œé»˜è®¤ 1000ã€‚
40 |             batch_size: æ‰¹æ¬¡å¤§å°ï¼Œé»˜è®¤ 100ã€‚
   |                                 ^^
41 |             flush_interval: åˆ·æ–°é—´éš”ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 3.0ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/logging/queue_worker.py:41:33
   |
39 |             queue_size: é˜Ÿåˆ—æœ€å¤§å®¹é‡ï¼Œé»˜è®¤ 1000ã€‚
40 |             batch_size: æ‰¹æ¬¡å¤§å°ï¼Œé»˜è®¤ 100ã€‚
41 |             flush_interval: åˆ·æ–°é—´éš”ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 3.0ã€‚
   |                                     ^^
42 |
43 |         """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/logging/queue_worker.py:41:35
   |
39 |             queue_size: é˜Ÿåˆ—æœ€å¤§å®¹é‡ï¼Œé»˜è®¤ 1000ã€‚
40 |             batch_size: æ‰¹æ¬¡å¤§å°ï¼Œé»˜è®¤ 100ã€‚
41 |             flush_interval: åˆ·æ–°é—´éš”ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 3.0ã€‚
   |                                         ^^
42 |
43 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/queue_worker.py:41:36
   |
39 |             queue_size: é˜Ÿåˆ—æœ€å¤§å®¹é‡ï¼Œé»˜è®¤ 1000ã€‚
40 |             batch_size: æ‰¹æ¬¡å¤§å°ï¼Œé»˜è®¤ 100ã€‚
41 |             flush_interval: åˆ·æ–°é—´éš”ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 3.0ã€‚
   |                                           ^^
42 |
43 |         """
   |

LOG015 `warning()` call on root logger
  --> app/utils/logging/queue_worker.py:69:13
   |
67 |               self.queue.put_nowait(log_entry)
68 |           except Full:
69 | /             logging.warning(
70 | |                 "ç»“æž„åŒ–æ—¥å¿—é˜Ÿåˆ—å·²æ»¡ï¼Œä¸¢å¼ƒä¸€æ¡æ—¥å¿—", extra={"queue_size": self.queue.qsize()},
71 | |             )
   | |_____________^
72 |
73 |       def shutdown(self, timeout: float = 5.0) -> None:
   |
help: Use own logger instead

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/queue_worker.py:70:27
   |
68 |         except Full:
69 |             logging.warning(
70 |                 "ç»“æž„åŒ–æ—¥å¿—é˜Ÿåˆ—å·²æ»¡ï¼Œä¸¢å¼ƒä¸€æ¡æ—¥å¿—", extra={"queue_size": self.queue.qsize()},
   |                                    ^^
71 |             )
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/logging/queue_worker.py:77:33
   |
76 |         Args:
77 |             timeout: ç­‰å¾…çº¿ç¨‹ç»“æŸçš„è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 5.0ã€‚
   |                                            ^^
78 |
79 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/logging/queue_worker.py:77:35
   |
76 |         Args:
77 |             timeout: ç­‰å¾…çº¿ç¨‹ç»“æŸçš„è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 5.0ã€‚
   |                                                ^^
78 |
79 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/queue_worker.py:77:36
   |
76 |         Args:
77 |             timeout: ç­‰å¾…çº¿ç¨‹ç»“æŸçš„è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 5.0ã€‚
   |                                                  ^^
78 |
79 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/logging/queue_worker.py:88:19
   |
87 |     def _run(self) -> None:
88 |         """å·¥ä½œçº¿ç¨‹ä¸»å¾ªçŽ¯ï¼Œä»Žé˜Ÿåˆ—ä¸­å–å‡ºæ—¥å¿—å¹¶æ‰¹é‡å†™å…¥æ•°æ®åº“ã€‚.
   |                          ^^
89 |
90 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/logging/queue_worker.py:111:31
    |
110 |         Returns:
111 |             å¦‚æžœç¼“å†²åŒºè¾¾åˆ°æ‰¹æ¬¡å¤§å°æˆ–è¶…è¿‡åˆ·æ–°é—´éš”ï¼Œè¿”å›ž Trueã€‚
    |                                                 ^^
112 |
113 |         """
    |

LOG015 `exception()` call on root logger
   --> app/utils/logging/queue_worker.py:142:13
    |
140 |                     db.session.commit()
141 |         except Exception:
142 |             logging.exception("å†™å…¥ç»“æž„åŒ–æ—¥å¿—åˆ°æ•°æ®åº“å¤±è´¥")
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
143 |             with contextlib.suppress(Exception):
144 |                 db.session.rollback()
    |
help: Use own logger instead

D205 1 blank line required between summary line and description
 --> app/utils/password_crypto_utils.py:1:1
  |
1 | / """å¯†ç ç®¡ç†å·¥å…·
2 | | ç”¨äºŽå®‰å…¨åœ°å­˜å‚¨å’ŒèŽ·å–æ•°æ®åº“å¯†ç .
3 | | """
  | |___^
4 |
5 |   import base64
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/password_crypto_utils.py:15:39
   |
14 |     ä½¿ç”¨ Fernet å¯¹ç§°åŠ å¯†ç®—æ³•å®‰å…¨åœ°åŠ å¯†å’Œè§£å¯†æ•°æ®åº“å¯†ç ã€‚
15 |     å¯†é’¥ä»ŽçŽ¯å¢ƒå˜é‡ PASSWORD_ENCRYPTION_KEY è¯»å–ï¼Œå¦‚æžœæœªè®¾ç½®åˆ™ç”Ÿæˆä¸´æ—¶å¯†é’¥ã€‚
   |                                                ^^
16 |
17 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/password_crypto_utils.py:18:18
   |
17 |     Attributes:
18 |         key: åŠ å¯†å¯†é’¥ï¼ˆbytesï¼‰ã€‚
   |                      ^^
19 |         cipher: Fernet åŠ å¯†å™¨å®žä¾‹ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/password_crypto_utils.py:18:24
   |
17 |     Attributes:
18 |         key: åŠ å¯†å¯†é’¥ï¼ˆbytesï¼‰ã€‚
   |                             ^^
19 |         cipher: Fernet åŠ å¯†å™¨å®žä¾‹ã€‚
   |

D107 Missing docstring in `__init__`
  --> app/utils/password_crypto_utils.py:30:9
   |
28 |     """
29 |
30 |     def __init__(self) -> None:
   |         ^^^^^^^^
31 |         self.key = self._get_or_create_key()
32 |         self.cipher = Fernet(self.key)
   |

ANN202 Missing return type annotation for private function `_get_or_create_key`
  --> app/utils/password_crypto_utils.py:34:9
   |
32 |         self.cipher = Fernet(self.key)
33 |
34 |     def _get_or_create_key(self):
   |         ^^^^^^^^^^^^^^^^^^
35 |         """èŽ·å–æˆ–åˆ›å»ºåŠ å¯†å¯†é’¥ã€‚.
   |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/password_crypto_utils.py:37:43
   |
35 |         """èŽ·å–æˆ–åˆ›å»ºåŠ å¯†å¯†é’¥ã€‚.
36 |
37 |         ä»ŽçŽ¯å¢ƒå˜é‡ PASSWORD_ENCRYPTION_KEY è¯»å–å¯†é’¥ï¼Œå¦‚æžœæœªè®¾ç½®åˆ™ç”Ÿæˆæ–°å¯†é’¥ã€‚
   |                                                    ^^
38 |         ç”Ÿæˆæ–°å¯†é’¥æ—¶ä¼šè®°å½•è­¦å‘Šæ—¥å¿—å¹¶æç¤ºè®¾ç½®çŽ¯å¢ƒå˜é‡ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/password_crypto_utils.py:41:17
   |
40 |         Returns:
41 |             åŠ å¯†å¯†é’¥ï¼ˆbytesï¼‰ã€‚
   |                     ^^
42 |
43 |         """
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/password_crypto_utils.py:41:23
   |
40 |         Returns:
41 |             åŠ å¯†å¯†é’¥ï¼ˆbytesï¼‰ã€‚
   |                            ^^
42 |
43 |         """
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/password_crypto_utils.py:46:23
   |
44 |         key = os.getenv("PASSWORD_ENCRYPTION_KEY")
45 |         if not key:
46 |             # å¦‚æžœæ²¡æœ‰è®¾ç½®å¯†é’¥ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„
   |                               ^^
47 |             key = Fernet.generate_key()
48 |             # å»¶è¿Ÿå¯¼å…¥é¿å…å¾ªçŽ¯å¯¼å…¥
   |

PLC0415 `import` should be at the top-level of a file
  --> app/utils/password_crypto_utils.py:50:17
   |
48 |             # å»¶è¿Ÿå¯¼å…¥é¿å…å¾ªçŽ¯å¯¼å…¥
49 |             try:
50 |                 from app.utils.structlog_config import get_system_logger
   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
51 |                 system_logger = get_system_logger()
52 |                 system_logger.warning("æ²¡æœ‰è®¾ç½®PASSWORD_ENCRYPTION_KEYçŽ¯å¢ƒå˜é‡", module="password_manager")
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/password_crypto_utils.py:60:31
   |
58 |                 )
59 |             except ImportError:
60 |                 # å¦‚æžœæ— æ³•å¯¼å…¥loggerï¼Œä½¿ç”¨printè¾“å‡º
   |                                     ^^
61 |                 pass
62 |         else:
   |

PLC0415 `import` should be at the top-level of a file
   --> app/utils/password_crypto_utils.py:101:13
    |
 99 |             return decrypted.decode()
100 |         except Exception as e:
101 |             from app.utils.structlog_config import get_system_logger
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
102 |
103 |             system_logger = get_system_logger()
    |

TRY300 Consider moving this statement to an `else` block
   --> app/utils/password_crypto_utils.py:127:13
    |
125 |         try:
126 |             base64.b64decode(password.encode())
127 |             return True
    |             ^^^^^^^^^^^
128 |         except Exception:
129 |             return False
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/utils/password_crypto_utils.py:128:16
    |
126 |             base64.b64decode(password.encode())
127 |             return True
128 |         except Exception:
    |                ^^^^^^^^^
129 |             return False
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/password_crypto_utils.py:132:12
    |
132 | # å…¨å±€å¯†ç ç®¡ç†å™¨å®žä¾‹ï¼ˆå»¶è¿Ÿåˆå§‹åŒ–ï¼‰
    |                     ^^
133 | _password_manager = None
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/password_crypto_utils.py:132:18
    |
132 | # å…¨å±€å¯†ç ç®¡ç†å™¨å®žä¾‹ï¼ˆå»¶è¿Ÿåˆå§‹åŒ–ï¼‰
    |                                 ^^
133 | _password_manager = None
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/password_crypto_utils.py:136:17
    |
135 | def get_password_manager() -> PasswordManager:
136 |     """èŽ·å–å¯†ç ç®¡ç†å™¨å®žä¾‹ï¼ˆå»¶è¿Ÿåˆå§‹åŒ–ï¼‰ã€‚.
    |                          ^^
137 |
138 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/password_crypto_utils.py:136:23
    |
135 | def get_password_manager() -> PasswordManager:
136 |     """èŽ·å–å¯†ç ç®¡ç†å™¨å®žä¾‹ï¼ˆå»¶è¿Ÿåˆå§‹åŒ–ï¼‰ã€‚.
    |                                      ^^
137 |
138 |     Returns:
    |

PLW0603 Using the global statement to update `_password_manager` is discouraged
   --> app/utils/password_crypto_utils.py:142:12
    |
141 |     """
142 |     global _password_manager
    |            ^^^^^^^^^^^^^^^^^
143 |     if _password_manager is None:
144 |         _password_manager = PasswordManager()
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/password_crypto_utils.py:147:9
    |
145 |     return _password_manager
146 |
147 | # ä¸ºäº†å‘åŽå…¼å®¹ï¼Œä¿ç•™password_managerå˜é‡
    |               ^^
148 | password_manager = None
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/utils/query_filter_utils.py:3:22
  |
1 | """ç»Ÿä¸€ç­›é€‰å™¨æ•°æ®è®¿é—®å·¥å…·.
2 |
3 | è´Ÿè´£æä¾›æ‰€æœ‰éœ€è¦ä»Žæ•°æ®åº“åŠ¨æ€èŽ·å–çš„ç­›é€‰æ•°æ®ï¼Œé¿å…åœ¨è§†å›¾æˆ–æ¨¡æ¿ä¸­é‡å¤æŸ¥è¯¢ã€‚
  |                                           ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/query_filter_utils.py:24:19
   |
23 | def get_active_tags() -> list[Tag]:
24 |     """èŽ·å–æ‰€æœ‰æ¿€æ´»çŠ¶æ€çš„æ ‡ç­¾ï¼ŒæŒ‰åˆ†ç±»ä¸Žæ˜¾ç¤ºåç§°æŽ’åºã€‚.
   |                              ^^
25 |
26 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/query_filter_utils.py:27:15
   |
26 |     Returns:
27 |         æ ‡ç­¾å¯¹è±¡åˆ—è¡¨ï¼ŒæŒ‰ categoryã€display_nameã€name æŽ’åºã€‚
   |                     ^^
28 |
29 |     Example:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/query_filter_utils.py:46:15
   |
45 |     Returns:
46 |         æ ‡ç­¾é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
   |                     ^^
47 |         - value: æ ‡ç­¾åç§°
48 |         - label: æ˜¾ç¤ºåç§°
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/utils/query_filter_utils.py:46:22
   |
45 |     Returns:
46 |         æ ‡ç­¾é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
   |                                   ^^
47 |         - value: æ ‡ç­¾åç§°
48 |         - label: æ˜¾ç¤ºåç§°
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/query_filter_utils.py:73:25
   |
71 |     """èŽ·å–å½“å‰å­˜åœ¨çš„æ ‡ç­¾åˆ†ç±»ã€‚.
72 |
73 |     åˆ†ç±»å±•ç¤ºåç§°ä¼˜å…ˆä½¿ç”¨ Tag å†…ç½®çš„æ˜ å°„ï¼Œè‹¥æ‰¾ä¸åˆ°åˆ™é€€å›žåŽŸå§‹åˆ†ç±»å€¼ã€‚
   |                                        ^^
74 |
75 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/query_filter_utils.py:76:15
   |
75 |     Returns:
76 |         åˆ†ç±»é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
   |                     ^^
77 |         - value: åˆ†ç±»å€¼
78 |         - label: åˆ†ç±»æ˜¾ç¤ºåç§°
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/utils/query_filter_utils.py:76:22
   |
75 |     Returns:
76 |         åˆ†ç±»é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
   |                                   ^^
77 |         - value: åˆ†ç±»å€¼
78 |         - label: åˆ†ç±»æ˜¾ç¤ºåç§°
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/query_filter_utils.py:106:17
    |
105 | def get_classifications() -> list[AccountClassification]:
106 |     """èŽ·å–å¯ç”¨çš„è´¦æˆ·åˆ†ç±»ï¼ŒæŒ‰ä¼˜å…ˆçº§ä¸Žåç§°æŽ’åºã€‚.
    |                          ^^
107 |
108 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/query_filter_utils.py:109:17
    |
108 |     Returns:
109 |         è´¦æˆ·åˆ†ç±»å¯¹è±¡åˆ—è¡¨ï¼ŒæŒ‰ priority é™åºã€name å‡åºæŽ’åˆ—ã€‚
    |                         ^^
110 |
111 |     Example:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/query_filter_utils.py:128:15
    |
127 |     Returns:
128 |         åˆ†ç±»é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
    |                     ^^
129 |         - value: åˆ†ç±» IDï¼ˆå­—ç¬¦ä¸²ï¼‰
130 |         - label: åˆ†ç±»åç§°
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/query_filter_utils.py:128:22
    |
127 |     Returns:
128 |         åˆ†ç±»é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
    |                                   ^^
129 |         - value: åˆ†ç±» IDï¼ˆå­—ç¬¦ä¸²ï¼‰
130 |         - label: åˆ†ç±»åç§°
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/query_filter_utils.py:129:23
    |
127 |     Returns:
128 |         åˆ†ç±»é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
129 |         - value: åˆ†ç±» IDï¼ˆå­—ç¬¦ä¸²ï¼‰
    |                         ^^
130 |         - label: åˆ†ç±»åç§°
131 |         - color: åˆ†ç±»é¢œè‰²
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/query_filter_utils.py:129:27
    |
127 |     Returns:
128 |         åˆ†ç±»é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
129 |         - value: åˆ†ç±» IDï¼ˆå­—ç¬¦ä¸²ï¼‰
    |                                 ^^
130 |         - label: åˆ†ç±»åç§°
131 |         - color: åˆ†ç±»é¢œè‰²
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/query_filter_utils.py:147:14
    |
146 | def get_instances_by_db_type(db_type: str | None = None, *, include_inactive: bool = False) -> list[Instance]:
147 |     """èŽ·å–å®žä¾‹åˆ—è¡¨ï¼Œå¯é€‰æŒ‰æ•°æ®åº“ç±»åž‹è¿‡æ»¤ã€‚.
    |                    ^^
148 |
149 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/query_filter_utils.py:150:25
    |
149 |     Args:
150 |         db_type: æ•°æ®åº“ç±»åž‹æ ‡è¯†ï¼Œä¾‹å¦‚ mysqlã€postgresqlã€‚
    |                                ^^
151 |         include_inactive: æ˜¯å¦åŒ…å«å·²ç¦ç”¨çš„å®žä¾‹ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/query_filter_utils.py:154:23
    |
153 |     Returns:
154 |         æŒ‡å®šè¿‡æ»¤æ¡ä»¶ä¸‹çš„å®žä¾‹å¯¹è±¡åˆ—è¡¨ï¼ŒæŒ‰åç§°å‡åºæŽ’åˆ—ã€‚
    |                                     ^^
155 |
156 |     """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/query_filter_utils.py:172:15
    |
171 |     Returns:
172 |         å®žä¾‹é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
    |                     ^^
173 |         - value: å®žä¾‹ IDï¼ˆå­—ç¬¦ä¸²ï¼‰
174 |         - label: å®žä¾‹æ˜¾ç¤ºåç§°ï¼ˆåŒ…å«æ•°æ®åº“ç±»åž‹ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/query_filter_utils.py:172:22
    |
171 |     Returns:
172 |         å®žä¾‹é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
    |                                   ^^
173 |         - value: å®žä¾‹ IDï¼ˆå­—ç¬¦ä¸²ï¼‰
174 |         - label: å®žä¾‹æ˜¾ç¤ºåç§°ï¼ˆåŒ…å«æ•°æ®åº“ç±»åž‹ï¼‰
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/query_filter_utils.py:173:23
    |
171 |     Returns:
172 |         å®žä¾‹é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
173 |         - value: å®žä¾‹ IDï¼ˆå­—ç¬¦ä¸²ï¼‰
    |                         ^^
174 |         - label: å®žä¾‹æ˜¾ç¤ºåç§°ï¼ˆåŒ…å«æ•°æ®åº“ç±»åž‹ï¼‰
175 |         - db_type: æ•°æ®åº“ç±»åž‹
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/query_filter_utils.py:173:27
    |
171 |     Returns:
172 |         å®žä¾‹é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
173 |         - value: å®žä¾‹ IDï¼ˆå­—ç¬¦ä¸²ï¼‰
    |                                 ^^
174 |         - label: å®žä¾‹æ˜¾ç¤ºåç§°ï¼ˆåŒ…å«æ•°æ®åº“ç±»åž‹ï¼‰
175 |         - db_type: æ•°æ®åº“ç±»åž‹
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/query_filter_utils.py:174:24
    |
172 |         å®žä¾‹é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
173 |         - value: å®žä¾‹ IDï¼ˆå­—ç¬¦ä¸²ï¼‰
174 |         - label: å®žä¾‹æ˜¾ç¤ºåç§°ï¼ˆåŒ…å«æ•°æ®åº“ç±»åž‹ï¼‰
    |                              ^^
175 |         - db_type: æ•°æ®åº“ç±»åž‹
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/query_filter_utils.py:174:32
    |
172 |         å®žä¾‹é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
173 |         - value: å®žä¾‹ IDï¼ˆå­—ç¬¦ä¸²ï¼‰
174 |         - label: å®žä¾‹æ˜¾ç¤ºåç§°ï¼ˆåŒ…å«æ•°æ®åº“ç±»åž‹ï¼‰
    |                                              ^^
175 |         - db_type: æ•°æ®åº“ç±»åž‹
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/query_filter_utils.py:195:25
    |
194 | def get_databases_by_instance(instance_id: int) -> list[InstanceDatabase]:
195 |     """èŽ·å–æŒ‡å®šå®žä¾‹ä¸‹ä»ç„¶æ´»è·ƒçš„æ•°æ®åº“åˆ—è¡¨ï¼ŒæŒ‰åç§°æŽ’åºã€‚.
    |                                          ^^
196 |
197 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/query_filter_utils.py:201:16
    |
200 |     Returns:
201 |         æ•°æ®åº“å¯¹è±¡åˆ—è¡¨ï¼ŒæŒ‰ database_name æŽ’åºã€‚
    |                       ^^
202 |
203 |     Example:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/query_filter_utils.py:225:16
    |
224 |     Returns:
225 |         æ•°æ®åº“é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
    |                       ^^
226 |         - value: æ•°æ®åº“ IDï¼ˆå­—ç¬¦ä¸²ï¼‰
227 |         - label: æ•°æ®åº“åç§°
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/query_filter_utils.py:225:23
    |
224 |     Returns:
225 |         æ•°æ®åº“é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
    |                                     ^^
226 |         - value: æ•°æ®åº“ IDï¼ˆå­—ç¬¦ä¸²ï¼‰
227 |         - label: æ•°æ®åº“åç§°
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/query_filter_utils.py:226:24
    |
224 |     Returns:
225 |         æ•°æ®åº“é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
226 |         - value: æ•°æ®åº“ IDï¼ˆå­—ç¬¦ä¸²ï¼‰
    |                           ^^
227 |         - label: æ•°æ®åº“åç§°
228 |         - name: æ•°æ®åº“åç§°
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/query_filter_utils.py:226:28
    |
224 |     Returns:
225 |         æ•°æ®åº“é€‰é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé€‰é¡¹åŒ…å«ï¼š
226 |         - value: æ•°æ®åº“ IDï¼ˆå­—ç¬¦ä¸²ï¼‰
    |                                   ^^
227 |         - label: æ•°æ®åº“åç§°
228 |         - name: æ•°æ®åº“åç§°
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/utils/query_filter_utils.py:251:37
    |
250 |     Args:
251 |         limit_hours: é™åˆ¶åªç»Ÿè®¡æœ€è¿‘å¤šå°‘å°æ—¶å†…çš„æ—¥å¿—ï¼›ä¸º None æ—¶æ— é™åˆ¶ã€‚
    |                                                    ^^
252 |
253 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/query_filter_utils.py:254:15
    |
253 |     Returns:
254 |         æ¨¡å—åç§°åˆ—è¡¨ï¼ŒæŒ‰å­—æ¯é¡ºåºæŽ’åºã€‚
    |                     ^^
255 |
256 |     Example:
    |

PLC0415 `import` should be at the top-level of a file
   --> app/utils/query_filter_utils.py:264:9
    |
262 |     query = db.session.query(distinct(UnifiedLog.module))
263 |     if limit_hours is not None:
264 |         from datetime import timedelta
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
265 |
266 |         from app.utils.time_utils import time_utils
    |

PLC0415 `import` should be at the top-level of a file
   --> app/utils/query_filter_utils.py:266:9
    |
264 |         from datetime import timedelta
265 |
266 |         from app.utils.time_utils import time_utils
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
267 |
268 |         start_time = time_utils.now() - timedelta(hours=limit_hours)
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/rate_limiter.py:22:21
   |
20 |     """é€ŸçŽ‡é™åˆ¶å™¨ã€‚.
21 |
22 |     åŸºäºŽæ»‘åŠ¨çª—å£ç®—æ³•å®žçŽ°çš„é€ŸçŽ‡é™åˆ¶å™¨ï¼Œæ”¯æŒç¼“å­˜å’Œå†…å­˜ä¸¤ç§å­˜å‚¨æ–¹å¼ã€‚
   |                                     ^^
23 |     å½“ç¼“å­˜ä¸å¯ç”¨æ—¶è‡ªåŠ¨é™çº§åˆ°å†…å­˜æ¨¡å¼ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/rate_limiter.py:26:34
   |
25 |     Attributes:
26 |         cache: Flask-Caching ç¼“å­˜å®žä¾‹ï¼Œå¯é€‰ã€‚
   |                                      ^^
27 |         memory_store: å†…å­˜å­˜å‚¨å­—å…¸ï¼Œç”¨äºŽæ— ç¼“å­˜çŽ¯å¢ƒã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/rate_limiter.py:27:29
   |
25 |     Attributes:
26 |         cache: Flask-Caching ç¼“å­˜å®žä¾‹ï¼Œå¯é€‰ã€‚
27 |         memory_store: å†…å­˜å­˜å‚¨å­—å…¸ï¼Œç”¨äºŽæ— ç¼“å­˜çŽ¯å¢ƒã€‚
   |                                   ^^
28 |
29 |     Example:
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/rate_limiter.py:39:39
   |
37 |     def __init__(self, cache: Cache = None) -> None:
38 |         self.cache = cache
39 |         self.memory_store = {}  # å†…å­˜å­˜å‚¨ï¼Œç”¨äºŽæ— ç¼“å­˜çŽ¯å¢ƒ
   |                                           ^^
40 |
41 |     def _get_key(self, identifier: str, endpoint: str) -> str:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/rate_limiter.py:45:30
   |
44 |         Args:
45 |             identifier: å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¾‹å¦‚ IP åœ°å€æˆ–ç”¨æˆ· IDã€‚
   |                                   ^^
46 |             endpoint: ç«¯ç‚¹åç§°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/rate_limiter.py:49:19
   |
48 |         Returns:
49 |             ç¼“å­˜é”®å­—ç¬¦ä¸²ï¼Œæ ¼å¼ï¼š'rate_limit:endpoint:identifier'ã€‚
   |                         ^^
50 |
51 |         """
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/utils/rate_limiter.py:49:22
   |
48 |         Returns:
49 |             ç¼“å­˜é”®å­—ç¬¦ä¸²ï¼Œæ ¼å¼ï¼š'rate_limit:endpoint:identifier'ã€‚
   |                               ^^
50 |
51 |         """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/rate_limiter.py:62:19
   |
61 |         Returns:
62 |             å†…å­˜é”®å­—ç¬¦ä¸²ï¼Œæ ¼å¼ï¼š'endpoint:identifier'ã€‚
   |                         ^^
63 |
64 |         """
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/utils/rate_limiter.py:62:22
   |
61 |         Returns:
62 |             å†…å­˜é”®å­—ç¬¦ä¸²ï¼Œæ ¼å¼ï¼š'endpoint:identifier'ã€‚
   |                               ^^
63 |
64 |         """
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/rate_limiter.py:71:29
   |
70 |         Args:
71 |             identifier: å”¯ä¸€æ ‡è¯†ï¼ˆIP æˆ–ç”¨æˆ· IDï¼‰ã€‚
   |                                 ^^
72 |             endpoint: é™æµçš„ç«¯ç‚¹åç§°ã€‚
73 |             limit: å…è®¸çš„è¯·æ±‚æ¬¡æ•°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/rate_limiter.py:71:39
   |
70 |         Args:
71 |             identifier: å”¯ä¸€æ ‡è¯†ï¼ˆIP æˆ–ç”¨æˆ· IDï¼‰ã€‚
   |                                               ^^
72 |             endpoint: é™æµçš„ç«¯ç‚¹åç§°ã€‚
73 |             limit: å…è®¸çš„è¯·æ±‚æ¬¡æ•°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/rate_limiter.py:74:25
   |
72 |             endpoint: é™æµçš„ç«¯ç‚¹åç§°ã€‚
73 |             limit: å…è®¸çš„è¯·æ±‚æ¬¡æ•°ã€‚
74 |             window: æ—¶é—´çª—å£ï¼ˆç§’ï¼‰ã€‚
   |                             ^^
75 |
76 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/rate_limiter.py:74:27
   |
72 |             endpoint: é™æµçš„ç«¯ç‚¹åç§°ã€‚
73 |             limit: å…è®¸çš„è¯·æ±‚æ¬¡æ•°ã€‚
74 |             window: æ—¶é—´çª—å£ï¼ˆç§’ï¼‰ã€‚
   |                                 ^^
75 |
76 |         Returns:
   |

BLE001 Do not catch blind exception: `Exception`
  --> app/utils/rate_limiter.py:86:20
   |
84 |             try:
85 |                 return self._check_cache(identifier, endpoint, limit, window, current_time, window_start)
86 |             except Exception as e:
   |                    ^^^^^^^^^
87 |                 system_logger = get_system_logger()
88 |                 system_logger.warning(
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/rate_limiter.py:89:32
   |
87 |                 system_logger = get_system_logger()
88 |                 system_logger.warning(
89 |                     "ç¼“å­˜é€ŸçŽ‡é™åˆ¶æ£€æŸ¥å¤±è´¥ï¼Œé™çº§åˆ°å†…å­˜æ¨¡å¼",
   |                                          ^^
90 |                     module="rate_limiter",
91 |                     exception=str(e),
   |

PLR0913 Too many arguments in function definition (6 > 5)
   --> app/utils/rate_limiter.py:98:9
    |
 96 |             return self._check_memory(identifier, endpoint, limit, window, current_time, window_start)
 97 |
 98 |     def _check_cache(
    |         ^^^^^^^^^^^^
 99 |         self,
100 |         identifier: str,
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/rate_limiter.py:113:25
    |
111 |             endpoint: ç«¯ç‚¹åç§°ã€‚
112 |             limit: é™åˆ¶æ¬¡æ•°ã€‚
113 |             window: æ—¶é—´çª—å£ï¼ˆç§’ï¼‰ã€‚
    |                             ^^
114 |             current_time: å½“å‰æ—¶é—´æˆ³ã€‚
115 |             window_start: çª—å£èµ·å§‹æ—¶é—´æˆ³ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/rate_limiter.py:113:27
    |
111 |             endpoint: ç«¯ç‚¹åç§°ã€‚
112 |             limit: é™åˆ¶æ¬¡æ•°ã€‚
113 |             window: æ—¶é—´çª—å£ï¼ˆç§’ï¼‰ã€‚
    |                                 ^^
114 |             current_time: å½“å‰æ—¶é—´æˆ³ã€‚
115 |             window_start: çª—å£èµ·å§‹æ—¶é—´æˆ³ã€‚
    |

PLR0913 Too many arguments in function definition (6 > 5)
   --> app/utils/rate_limiter.py:151:9
    |
149 |         }
150 |
151 |     def _check_memory(
    |         ^^^^^^^^^^^^^
152 |         self,
153 |         identifier: str,
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/rate_limiter.py:160:19
    |
158 |         window_start: int,
159 |     ) -> dict[str, Any]:
160 |         """åœ¨æ— ç¼“å­˜æƒ…å†µä¸‹ï¼Œä½¿ç”¨å†…å­˜åˆ—è¡¨è¿›è¡Œé™æµã€‚.
    |                          ^^
161 |
162 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/rate_limiter.py:166:25
    |
164 |             endpoint: ç«¯ç‚¹åç§°ã€‚
165 |             limit: é™åˆ¶æ¬¡æ•°ã€‚
166 |             window: æ—¶é—´çª—å£ï¼ˆç§’ï¼‰ã€‚
    |                             ^^
167 |             current_time: å½“å‰æ—¶é—´æˆ³ã€‚
168 |             window_start: çª—å£èµ·å§‹æ—¶é—´æˆ³ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/rate_limiter.py:166:27
    |
164 |             endpoint: ç«¯ç‚¹åç§°ã€‚
165 |             limit: é™åˆ¶æ¬¡æ•°ã€‚
166 |             window: æ—¶é—´çª—å£ï¼ˆç§’ï¼‰ã€‚
    |                                 ^^
167 |             current_time: å½“å‰æ—¶é—´æˆ³ã€‚
168 |             window_start: çª—å£èµ·å§‹æ—¶é—´æˆ³ã€‚
    |

ANN201 Missing return type annotation for public function `login_rate_limit`
   --> app/utils/rate_limiter.py:207:5
    |
207 | def login_rate_limit(func=None, *, limit: int | None = None, window: int | None = None):
    |     ^^^^^^^^^^^^^^^^
208 |     """ç™»å½•æŽ¥å£é€ŸçŽ‡é™åˆ¶è£…é¥°å™¨ã€‚.
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `func`
   --> app/utils/rate_limiter.py:207:22
    |
207 | def login_rate_limit(func=None, *, limit: int | None = None, window: int | None = None):
    |                      ^^^^
208 |     """ç™»å½•æŽ¥å£é€ŸçŽ‡é™åˆ¶è£…é¥°å™¨ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/rate_limiter.py:213:26
    |
211 |         func: è¢«è£…é¥°çš„å‡½æ•°ã€‚
212 |         limit: å¯é€‰è‡ªå®šä¹‰é™åˆ¶æ¬¡æ•°ã€‚
213 |         window: å¯é€‰è‡ªå®šä¹‰æ—¶é—´çª—å£ï¼ˆç§’ï¼‰ã€‚
    |                                   ^^
214 |
215 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/rate_limiter.py:213:28
    |
211 |         func: è¢«è£…é¥°çš„å‡½æ•°ã€‚
212 |         limit: å¯é€‰è‡ªå®šä¹‰é™åˆ¶æ¬¡æ•°ã€‚
213 |         window: å¯é€‰è‡ªå®šä¹‰æ—¶é—´çª—å£ï¼ˆç§’ï¼‰ã€‚
    |                                       ^^
214 |
215 |     Returns:
    |

PLC0415 `import` should be at the top-level of a file
   --> app/utils/rate_limiter.py:219:5
    |
218 |     """
219 |     from app.config import Config
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
220 |
221 |     if limit is None:
    |

ANN202 Missing return type annotation for private function `wrapped`
   --> app/utils/rate_limiter.py:228:13
    |
226 |     def decorator(f: Callable) -> Callable:
227 |         @wraps(f)
228 |         def wrapped(*args, **kwargs):
    |             ^^^^^^^
229 |             if request.method.upper() in SAFE_METHODS:
230 |                 return f(*args, **kwargs)
    |
help: Add return type annotation

ANN002 Missing type annotation for `*args`
   --> app/utils/rate_limiter.py:228:21
    |
226 |     def decorator(f: Callable) -> Callable:
227 |         @wraps(f)
228 |         def wrapped(*args, **kwargs):
    |                     ^^^^^
229 |             if request.method.upper() in SAFE_METHODS:
230 |                 return f(*args, **kwargs)
    |

ANN003 Missing type annotation for `**kwargs`
   --> app/utils/rate_limiter.py:228:28
    |
226 |     def decorator(f: Callable) -> Callable:
227 |         @wraps(f)
228 |         def wrapped(*args, **kwargs):
    |                            ^^^^^^^^
229 |             if request.method.upper() in SAFE_METHODS:
230 |                 return f(*args, **kwargs)
    |

ANN201 Missing return type annotation for public function `password_reset_rate_limit`
   --> app/utils/rate_limiter.py:291:5
    |
291 | def password_reset_rate_limit(func=None, *, limit: int | None = None, window: int | None = None):
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
292 |     """å¯†ç é‡ç½®é€ŸçŽ‡é™åˆ¶è£…é¥°å™¨ã€‚.
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `func`
   --> app/utils/rate_limiter.py:291:31
    |
291 | def password_reset_rate_limit(func=None, *, limit: int | None = None, window: int | None = None):
    |                               ^^^^
292 |     """å¯†ç é‡ç½®é€ŸçŽ‡é™åˆ¶è£…é¥°å™¨ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/rate_limiter.py:294:9
    |
292 |     """å¯†ç é‡ç½®é€ŸçŽ‡é™åˆ¶è£…é¥°å™¨ã€‚.
293 |
294 |     é»˜è®¤é™åˆ¶ï¼š3 æ¬¡/å°æ—¶ã€‚
    |             ^^
295 |
296 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/rate_limiter.py:298:25
    |
296 |     Args:
297 |         func: è¢«è£…é¥°çš„å‡½æ•°ã€‚
298 |         limit: å¯é€‰è‡ªå®šä¹‰é™åˆ¶æ¬¡æ•°ï¼Œé»˜è®¤ 3 æ¬¡ã€‚
    |                                  ^^
299 |         window: å¯é€‰è‡ªå®šä¹‰æ—¶é—´çª—å£ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 1 å°æ—¶ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/rate_limiter.py:299:26
    |
297 |         func: è¢«è£…é¥°çš„å‡½æ•°ã€‚
298 |         limit: å¯é€‰è‡ªå®šä¹‰é™åˆ¶æ¬¡æ•°ï¼Œé»˜è®¤ 3 æ¬¡ã€‚
299 |         window: å¯é€‰è‡ªå®šä¹‰æ—¶é—´çª—å£ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 1 å°æ—¶ã€‚
    |                                   ^^
300 |
301 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/rate_limiter.py:299:28
    |
297 |         func: è¢«è£…é¥°çš„å‡½æ•°ã€‚
298 |         limit: å¯é€‰è‡ªå®šä¹‰é™åˆ¶æ¬¡æ•°ï¼Œé»˜è®¤ 3 æ¬¡ã€‚
299 |         window: å¯é€‰è‡ªå®šä¹‰æ—¶é—´çª—å£ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 1 å°æ—¶ã€‚
    |                                       ^^
300 |
301 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/rate_limiter.py:299:29
    |
297 |         func: è¢«è£…é¥°çš„å‡½æ•°ã€‚
298 |         limit: å¯é€‰è‡ªå®šä¹‰é™åˆ¶æ¬¡æ•°ï¼Œé»˜è®¤ 3 æ¬¡ã€‚
299 |         window: å¯é€‰è‡ªå®šä¹‰æ—¶é—´çª—å£ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 1 å°æ—¶ã€‚
    |                                         ^^
300 |
301 |     Returns:
    |

PLC0415 `import` should be at the top-level of a file
   --> app/utils/rate_limiter.py:310:5
    |
309 |     """
310 |     from app.config import Config
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
311 |
312 |     if limit is None:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/rate_limiter.py:326:34
    |
325 |     Args:
326 |         cache: Flask-Caching ç¼“å­˜å®žä¾‹ï¼Œå¯é€‰ã€‚å¦‚æžœä¸æä¾›åˆ™ä½¿ç”¨å†…å­˜æ¨¡å¼ã€‚
    |                                      ^^
327 |
328 |     Returns:
    |

PLW0603 Using the global statement to update `rate_limiter` is discouraged
   --> app/utils/rate_limiter.py:337:12
    |
336 |     """
337 |     global rate_limiter
    |            ^^^^^^^^^^^^
338 |     rate_limiter = RateLimiter(cache)
339 |     system_logger = get_system_logger()
    |

D205 1 blank line required between summary line and description
 --> app/utils/response_utils.py:1:1
  |
1 | / """é²¸è½ - ç»Ÿä¸€å“åº”å·¥å…·
2 | | æä¾›ç»Ÿä¸€çš„æˆåŠŸ/é”™è¯¯å“åº”ç»“æž„ï¼Œé¿å…åœ¨ä¸šåŠ¡å±‚æ•£è½ JSON æ‹¼è£…é€»è¾‘.
3 | | """
  | |___^
4 |
5 |   from __future__ import annotations
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/utils/response_utils.py:2:15
  |
1 | """é²¸è½ - ç»Ÿä¸€å“åº”å·¥å…·
2 | æä¾›ç»Ÿä¸€çš„æˆåŠŸ/é”™è¯¯å“åº”ç»“æž„ï¼Œé¿å…åœ¨ä¸šåŠ¡å±‚æ•£è½ JSON æ‹¼è£…é€»è¾‘.
  |                            ^^
3 | """
  |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `data`
  --> app/utils/response_utils.py:22:11
   |
21 | def unified_success_response(
22 |     data: Any | None = None,
   |           ^^^^^^^^^^
23 |     message: str | None = None,
24 |     *,
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/response_utils.py:31:19
   |
30 |     Args:
31 |         data: å“åº”æ•°æ®ï¼Œå¯é€‰ã€‚
   |                       ^^
32 |         message: æˆåŠŸæ¶ˆæ¯ï¼Œå¯é€‰ï¼Œé»˜è®¤ä¸º"æ“ä½œæˆåŠŸ"ã€‚
33 |         status: HTTP çŠ¶æ€ç ï¼Œé»˜è®¤ä¸º 200ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/response_utils.py:32:22
   |
30 |     Args:
31 |         data: å“åº”æ•°æ®ï¼Œå¯é€‰ã€‚
32 |         message: æˆåŠŸæ¶ˆæ¯ï¼Œå¯é€‰ï¼Œé»˜è®¤ä¸º"æ“ä½œæˆåŠŸ"ã€‚
   |                          ^^
33 |         status: HTTP çŠ¶æ€ç ï¼Œé»˜è®¤ä¸º 200ã€‚
34 |         meta: å…ƒæ•°æ®ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/response_utils.py:32:25
   |
30 |     Args:
31 |         data: å“åº”æ•°æ®ï¼Œå¯é€‰ã€‚
32 |         message: æˆåŠŸæ¶ˆæ¯ï¼Œå¯é€‰ï¼Œé»˜è®¤ä¸º"æ“ä½œæˆåŠŸ"ã€‚
   |                                ^^
33 |         status: HTTP çŠ¶æ€ç ï¼Œé»˜è®¤ä¸º 200ã€‚
34 |         meta: å…ƒæ•°æ®ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/response_utils.py:33:25
   |
31 |         data: å“åº”æ•°æ®ï¼Œå¯é€‰ã€‚
32 |         message: æˆåŠŸæ¶ˆæ¯ï¼Œå¯é€‰ï¼Œé»˜è®¤ä¸º"æ“ä½œæˆåŠŸ"ã€‚
33 |         status: HTTP çŠ¶æ€ç ï¼Œé»˜è®¤ä¸º 200ã€‚
   |                            ^^
34 |         meta: å…ƒæ•°æ®ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/response_utils.py:34:18
   |
32 |         message: æˆåŠŸæ¶ˆæ¯ï¼Œå¯é€‰ï¼Œé»˜è®¤ä¸º"æ“ä½œæˆåŠŸ"ã€‚
33 |         status: HTTP çŠ¶æ€ç ï¼Œé»˜è®¤ä¸º 200ã€‚
34 |         meta: å…ƒæ•°æ®ï¼Œå¯é€‰ã€‚
   |                     ^^
35 |
36 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/utils/response_utils.py:37:18
   |
36 |     Returns:
37 |         åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„å…ƒç»„ï¼š
   |                           ^^
38 |         - å“åº”è½½è·å­—å…¸
39 |         - HTTP çŠ¶æ€ç 
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/response_utils.py:66:30
   |
64 |     Args:
65 |         error: å¼‚å¸¸å¯¹è±¡ã€‚
66 |         status_code: HTTP çŠ¶æ€ç ï¼Œå¯é€‰ï¼Œé»˜è®¤æ ¹æ®å¼‚å¸¸ç±»åž‹è‡ªåŠ¨æ˜ å°„ã€‚
   |                                 ^^
67 |         extra: é¢å¤–çš„é”™è¯¯ä¿¡æ¯ï¼Œå¯é€‰ã€‚
68 |         context: é”™è¯¯ä¸Šä¸‹æ–‡ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/response_utils.py:66:33
   |
64 |     Args:
65 |         error: å¼‚å¸¸å¯¹è±¡ã€‚
66 |         status_code: HTTP çŠ¶æ€ç ï¼Œå¯é€‰ï¼Œé»˜è®¤æ ¹æ®å¼‚å¸¸ç±»åž‹è‡ªåŠ¨æ˜ å°„ã€‚
   |                                       ^^
67 |         extra: é¢å¤–çš„é”™è¯¯ä¿¡æ¯ï¼Œå¯é€‰ã€‚
68 |         context: é”™è¯¯ä¸Šä¸‹æ–‡ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/response_utils.py:67:23
   |
65 |         error: å¼‚å¸¸å¯¹è±¡ã€‚
66 |         status_code: HTTP çŠ¶æ€ç ï¼Œå¯é€‰ï¼Œé»˜è®¤æ ¹æ®å¼‚å¸¸ç±»åž‹è‡ªåŠ¨æ˜ å°„ã€‚
67 |         extra: é¢å¤–çš„é”™è¯¯ä¿¡æ¯ï¼Œå¯é€‰ã€‚
   |                              ^^
68 |         context: é”™è¯¯ä¸Šä¸‹æ–‡ï¼Œå¯é€‰ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/response_utils.py:68:23
   |
66 |         status_code: HTTP çŠ¶æ€ç ï¼Œå¯é€‰ï¼Œé»˜è®¤æ ¹æ®å¼‚å¸¸ç±»åž‹è‡ªåŠ¨æ˜ å°„ã€‚
67 |         extra: é¢å¤–çš„é”™è¯¯ä¿¡æ¯ï¼Œå¯é€‰ã€‚
68 |         context: é”™è¯¯ä¸Šä¸‹æ–‡ï¼Œå¯é€‰ã€‚
   |                            ^^
69 |
70 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/utils/response_utils.py:71:18
   |
70 |     Returns:
71 |         åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„å…ƒç»„ï¼š
   |                           ^^
72 |         - é”™è¯¯å“åº”è½½è·å­—å…¸
73 |         - HTTP çŠ¶æ€ç 
   |

ANN201 Missing return type annotation for public function `jsonify_unified_success`
  --> app/utils/response_utils.py:83:5
   |
83 | def jsonify_unified_success(*args, **kwargs):
   |     ^^^^^^^^^^^^^^^^^^^^^^^
84 |     """è¿”å›ž Flask Response å¯¹è±¡çš„æˆåŠŸå“åº”ä¾¿æ·å‡½æ•°ã€‚.
   |
help: Add return type annotation

ANN002 Missing type annotation for `*args`
  --> app/utils/response_utils.py:83:29
   |
83 | def jsonify_unified_success(*args, **kwargs):
   |                             ^^^^^
84 |     """è¿”å›ž Flask Response å¯¹è±¡çš„æˆåŠŸå“åº”ä¾¿æ·å‡½æ•°ã€‚.
   |

ANN003 Missing type annotation for `**kwargs`
  --> app/utils/response_utils.py:83:36
   |
83 | def jsonify_unified_success(*args, **kwargs):
   |                                    ^^^^^^^^
84 |     """è¿”å›ž Flask Response å¯¹è±¡çš„æˆåŠŸå“åº”ä¾¿æ·å‡½æ•°ã€‚.
   |

ANN201 Missing return type annotation for public function `jsonify_unified_error`
  --> app/utils/response_utils.py:98:5
   |
98 | def jsonify_unified_error(*args, **kwargs):
   |     ^^^^^^^^^^^^^^^^^^^^^
99 |     """è¿”å›ž Flask Response å¯¹è±¡çš„é”™è¯¯å“åº”ä¾¿æ·å‡½æ•°ã€‚.
   |
help: Add return type annotation

ANN002 Missing type annotation for `*args`
  --> app/utils/response_utils.py:98:27
   |
98 | def jsonify_unified_error(*args, **kwargs):
   |                           ^^^^^
99 |     """è¿”å›ž Flask Response å¯¹è±¡çš„é”™è¯¯å“åº”ä¾¿æ·å‡½æ•°ã€‚.
   |

ANN003 Missing type annotation for `**kwargs`
  --> app/utils/response_utils.py:98:34
   |
98 | def jsonify_unified_error(*args, **kwargs):
   |                                  ^^^^^^^^
99 |     """è¿”å›ž Flask Response å¯¹è±¡çš„é”™è¯¯å“åº”ä¾¿æ·å‡½æ•°ã€‚.
   |

PLR0913 Too many arguments in function definition (6 > 5)
   --> app/utils/response_utils.py:113:5
    |
113 | def jsonify_unified_error_message(
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
114 |     message: str,
115 |     *,
    |

ANN201 Missing return type annotation for public function `jsonify_unified_error_message`
   --> app/utils/response_utils.py:113:5
    |
113 | def jsonify_unified_error_message(
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
114 |     message: str,
115 |     *,
    |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/response_utils.py:126:30
    |
124 |     Args:
125 |         message: é”™è¯¯æ¶ˆæ¯ã€‚
126 |         status_code: HTTP çŠ¶æ€ç ï¼Œé»˜è®¤ä¸º 400ã€‚
    |                                 ^^
127 |         message_key: æ¶ˆæ¯é”®ï¼Œé»˜è®¤ä¸º 'INVALID_REQUEST'ã€‚
128 |         category: é”™è¯¯ç±»åˆ«ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/response_utils.py:127:25
    |
125 |         message: é”™è¯¯æ¶ˆæ¯ã€‚
126 |         status_code: HTTP çŠ¶æ€ç ï¼Œé»˜è®¤ä¸º 400ã€‚
127 |         message_key: æ¶ˆæ¯é”®ï¼Œé»˜è®¤ä¸º 'INVALID_REQUEST'ã€‚
    |                            ^^
128 |         category: é”™è¯¯ç±»åˆ«ï¼Œå¯é€‰ã€‚
129 |         severity: é”™è¯¯ä¸¥é‡ç¨‹åº¦ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/response_utils.py:128:23
    |
126 |         status_code: HTTP çŠ¶æ€ç ï¼Œé»˜è®¤ä¸º 400ã€‚
127 |         message_key: æ¶ˆæ¯é”®ï¼Œé»˜è®¤ä¸º 'INVALID_REQUEST'ã€‚
128 |         category: é”™è¯¯ç±»åˆ«ï¼Œå¯é€‰ã€‚
    |                           ^^
129 |         severity: é”™è¯¯ä¸¥é‡ç¨‹åº¦ï¼Œå¯é€‰ã€‚
130 |         extra: é¢å¤–çš„é”™è¯¯ä¿¡æ¯ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/response_utils.py:129:25
    |
127 |         message_key: æ¶ˆæ¯é”®ï¼Œé»˜è®¤ä¸º 'INVALID_REQUEST'ã€‚
128 |         category: é”™è¯¯ç±»åˆ«ï¼Œå¯é€‰ã€‚
129 |         severity: é”™è¯¯ä¸¥é‡ç¨‹åº¦ï¼Œå¯é€‰ã€‚
    |                               ^^
130 |         extra: é¢å¤–çš„é”™è¯¯ä¿¡æ¯ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/response_utils.py:130:23
    |
128 |         category: é”™è¯¯ç±»åˆ«ï¼Œå¯é€‰ã€‚
129 |         severity: é”™è¯¯ä¸¥é‡ç¨‹åº¦ï¼Œå¯é€‰ã€‚
130 |         extra: é¢å¤–çš„é”™è¯¯ä¿¡æ¯ï¼Œå¯é€‰ã€‚
    |                              ^^
131 |
132 |     Returns:
    |

D205 1 blank line required between summary line and description
 --> app/utils/safe_query_builder.py:1:1
  |
1 | / """é²¸è½ - å®‰å…¨æŸ¥è¯¢æž„å»ºå™¨
2 | | æä¾›å®‰å…¨çš„SQLæŸ¥è¯¢æž„å»ºåŠŸèƒ½ï¼Œé˜²æ­¢SQLæ³¨å…¥æ”»å‡»
3 | | æ”¯æŒMySQLã€PostgreSQLã€SQL Serverã€Oracleç­‰å¤šç§æ•°æ®åº“.
4 | | """
  | |___^
5 |
6 |   from typing import Any
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/utils/safe_query_builder.py:2:15
  |
1 | """é²¸è½ - å®‰å…¨æŸ¥è¯¢æž„å»ºå™¨
2 | æä¾›å®‰å…¨çš„SQLæŸ¥è¯¢æž„å»ºåŠŸèƒ½ï¼Œé˜²æ­¢SQLæ³¨å…¥æ”»å‡»
  |                          ^^
3 | æ”¯æŒMySQLã€PostgreSQLã€SQL Serverã€Oracleç­‰å¤šç§æ•°æ®åº“.
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/safe_query_builder.py:14:21
   |
12 |     """å®‰å…¨æŸ¥è¯¢æž„å»ºå™¨ - å¤šæ•°æ®åº“æ”¯æŒç‰ˆã€‚.
13 |
14 |     æä¾›å®‰å…¨çš„ SQL æŸ¥è¯¢æž„å»ºåŠŸèƒ½ï¼Œé˜²æ­¢ SQL æ³¨å…¥æ”»å‡»ã€‚
   |                                ^^
15 |     æ ¹æ®ä¸åŒæ•°æ®åº“ç±»åž‹ä½¿ç”¨ç›¸åº”çš„å‚æ•°å ä½ç¬¦å’Œå‚æ•°æ ¼å¼ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/utils/safe_query_builder.py:17:13
   |
15 |     æ ¹æ®ä¸åŒæ•°æ®åº“ç±»åž‹ä½¿ç”¨ç›¸åº”çš„å‚æ•°å ä½ç¬¦å’Œå‚æ•°æ ¼å¼ã€‚
16 |
17 |     æ”¯æŒçš„æ•°æ®åº“ç±»åž‹ï¼š
   |                     ^^
18 |     - MySQL: ä½¿ç”¨ %s å ä½ç¬¦ï¼Œè¿”å›ž list å‚æ•°
19 |     - PostgreSQL: ä½¿ç”¨ %s å ä½ç¬¦ï¼Œè¿”å›ž list å‚æ•°
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/safe_query_builder.py:18:23
   |
17 |     æ”¯æŒçš„æ•°æ®åº“ç±»åž‹ï¼š
18 |     - MySQL: ä½¿ç”¨ %s å ä½ç¬¦ï¼Œè¿”å›ž list å‚æ•°
   |                            ^^
19 |     - PostgreSQL: ä½¿ç”¨ %s å ä½ç¬¦ï¼Œè¿”å›ž list å‚æ•°
20 |     - SQL Server: ä½¿ç”¨ %s å ä½ç¬¦ï¼Œè¿”å›ž list å‚æ•°
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/safe_query_builder.py:19:28
   |
17 |     æ”¯æŒçš„æ•°æ®åº“ç±»åž‹ï¼š
18 |     - MySQL: ä½¿ç”¨ %s å ä½ç¬¦ï¼Œè¿”å›ž list å‚æ•°
19 |     - PostgreSQL: ä½¿ç”¨ %s å ä½ç¬¦ï¼Œè¿”å›ž list å‚æ•°
   |                                 ^^
20 |     - SQL Server: ä½¿ç”¨ %s å ä½ç¬¦ï¼Œè¿”å›ž list å‚æ•°
21 |     - Oracle: ä½¿ç”¨ :name å ä½ç¬¦ï¼Œè¿”å›ž dict å‚æ•°
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/safe_query_builder.py:20:28
   |
18 |     - MySQL: ä½¿ç”¨ %s å ä½ç¬¦ï¼Œè¿”å›ž list å‚æ•°
19 |     - PostgreSQL: ä½¿ç”¨ %s å ä½ç¬¦ï¼Œè¿”å›ž list å‚æ•°
20 |     - SQL Server: ä½¿ç”¨ %s å ä½ç¬¦ï¼Œè¿”å›ž list å‚æ•°
   |                                 ^^
21 |     - Oracle: ä½¿ç”¨ :name å ä½ç¬¦ï¼Œè¿”å›ž dict å‚æ•°
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/safe_query_builder.py:21:27
   |
19 |     - PostgreSQL: ä½¿ç”¨ %s å ä½ç¬¦ï¼Œè¿”å›ž list å‚æ•°
20 |     - SQL Server: ä½¿ç”¨ %s å ä½ç¬¦ï¼Œè¿”å›ž list å‚æ•°
21 |     - Oracle: ä½¿ç”¨ :name å ä½ç¬¦ï¼Œè¿”å›ž dict å‚æ•°
   |                                ^^
22 |
23 |     Attributes:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/safe_query_builder.py:26:25
   |
24 |         db_type: æ•°æ®åº“ç±»åž‹ã€‚
25 |         conditions: æŸ¥è¯¢æ¡ä»¶åˆ—è¡¨ã€‚
26 |         parameters: å‚æ•°åˆ—è¡¨ï¼ˆMySQL/PostgreSQL/SQL Serverï¼‰æˆ–å‚æ•°å­—å…¸ï¼ˆOracleï¼‰ã€‚
   |                             ^^
27 |
28 |     Example:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/safe_query_builder.py:26:53
   |
24 |         db_type: æ•°æ®åº“ç±»åž‹ã€‚
25 |         conditions: æŸ¥è¯¢æ¡ä»¶åˆ—è¡¨ã€‚
26 |         parameters: å‚æ•°åˆ—è¡¨ï¼ˆMySQL/PostgreSQL/SQL Serverï¼‰æˆ–å‚æ•°å­—å…¸ï¼ˆOracleï¼‰ã€‚
   |                                                          ^^
27 |
28 |     Example:
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/safe_query_builder.py:26:59
   |
24 |         db_type: æ•°æ®åº“ç±»åž‹ã€‚
25 |         conditions: æŸ¥è¯¢æ¡ä»¶åˆ—è¡¨ã€‚
26 |         parameters: å‚æ•°åˆ—è¡¨ï¼ˆMySQL/PostgreSQL/SQL Serverï¼‰æˆ–å‚æ•°å­—å…¸ï¼ˆOracleï¼‰ã€‚
   |                                                                      ^^
27 |
28 |     Example:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/safe_query_builder.py:26:66
   |
24 |         db_type: æ•°æ®åº“ç±»åž‹ã€‚
25 |         conditions: æŸ¥è¯¢æ¡ä»¶åˆ—è¡¨ã€‚
26 |         parameters: å‚æ•°åˆ—è¡¨ï¼ˆMySQL/PostgreSQL/SQL Serverï¼‰æˆ–å‚æ•°å­—å…¸ï¼ˆOracleï¼‰ã€‚
   |                                                                              ^^
27 |
28 |     Example:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/safe_query_builder.py:40:27
   |
39 |         Args:
40 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'mysql'ã€'postgresql'ã€'sqlserver'ã€'oracle'ã€‚
   |                                ^^
41 |                 é»˜è®¤ä¸º 'mysql'ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/utils/safe_query_builder.py:40:31
   |
39 |         Args:
40 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'mysql'ã€'postgresql'ã€'sqlserver'ã€'oracle'ã€‚
   |                                        ^^
41 |                 é»˜è®¤ä¸º 'mysql'ã€‚
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `*params`
  --> app/utils/safe_query_builder.py:54:54
   |
52 |             self.parameters: list[Any] = []
53 |
54 |     def add_condition(self, condition: str, *params: Any) -> "SafeQueryBuilder":
   |                                                      ^^^
55 |         """æ·»åŠ æŸ¥è¯¢æ¡ä»¶ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/safe_query_builder.py:57:59
   |
55 |         """æ·»åŠ æŸ¥è¯¢æ¡ä»¶ã€‚.
56 |
57 |         æ ¹æ®æ•°æ®åº“ç±»åž‹è‡ªåŠ¨è½¬æ¢å ä½ç¬¦æ ¼å¼ã€‚MySQL/PostgreSQL/SQL Server ä½¿ç”¨ %sï¼Œ
   |                                                                              ^^
58 |         Oracle ä½¿ç”¨ :param_N æ ¼å¼ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/safe_query_builder.py:61:33
   |
60 |         Args:
61 |             condition: SQL æ¡ä»¶å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ %s ä½œä¸ºå ä½ç¬¦ã€‚
   |                                      ^^
62 |                 ä¾‹å¦‚ï¼š'username = %s' æˆ– 'age > %s AND status = %s'ã€‚
63 |             *params: å‚æ•°å€¼ï¼ŒæŒ‰é¡ºåºå¯¹åº”æ¡ä»¶ä¸­çš„å ä½ç¬¦ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/utils/safe_query_builder.py:62:19
   |
60 |         Args:
61 |             condition: SQL æ¡ä»¶å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ %s ä½œä¸ºå ä½ç¬¦ã€‚
62 |                 ä¾‹å¦‚ï¼š'username = %s' æˆ– 'age > %s AND status = %s'ã€‚
   |                     ^^
63 |             *params: å‚æ•°å€¼ï¼ŒæŒ‰é¡ºåºå¯¹åº”æ¡ä»¶ä¸­çš„å ä½ç¬¦ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/safe_query_builder.py:63:25
   |
61 |             condition: SQL æ¡ä»¶å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ %s ä½œä¸ºå ä½ç¬¦ã€‚
62 |                 ä¾‹å¦‚ï¼š'username = %s' æˆ– 'age > %s AND status = %s'ã€‚
63 |             *params: å‚æ•°å€¼ï¼ŒæŒ‰é¡ºåºå¯¹åº”æ¡ä»¶ä¸­çš„å ä½ç¬¦ã€‚
   |                            ^^
64 |
65 |         Returns:
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/safe_query_builder.py:74:27
   |
72 |         """
73 |         if self.db_type == DatabaseType.ORACLE:
74 |             # Oracleä½¿ç”¨å‘½åå‚æ•°ï¼Œéœ€è¦è½¬æ¢å ä½ç¬¦
   |                                 ^^
75 |             oracle_condition = condition
76 |             param_dict = {}
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:101:25
    |
100 |         Args:
101 |             count: å ä½ç¬¦æ•°é‡ï¼Œé»˜è®¤ä¸º 1ã€‚
    |                              ^^
102 |
103 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:104:19
    |
103 |         Returns:
104 |             å ä½ç¬¦å­—ç¬¦ä¸²ï¼Œå¤šä¸ªå ä½ç¬¦ç”¨é€—å·åˆ†éš”ã€‚
    |                         ^^
105 |             ä¾‹å¦‚ï¼š'%s, %s, %s' æˆ– ':param_0, :param_1, :param_2'ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/safe_query_builder.py:105:15
    |
103 |         Returns:
104 |             å ä½ç¬¦å­—ç¬¦ä¸²ï¼Œå¤šä¸ªå ä½ç¬¦ç”¨é€—å·åˆ†éš”ã€‚
105 |             ä¾‹å¦‚ï¼š'%s, %s, %s' æˆ– ':param_0, :param_1, :param_2'ã€‚
    |                 ^^
106 |
107 |         """
    |

ERA001 Found commented-out code
   --> app/utils/safe_query_builder.py:118:9
    |
116 |             # SQL Serverä½¿ç”¨%så ä½ç¬¦
117 |             return ", ".join(["%s"] * count)
118 |         # MySQL, PostgreSQLä½¿ç”¨%s
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^
119 |         return ", ".join(["%s"] * count)
    |
help: Remove commented-out code

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:124:22
    |
122 |         """æ·»åŠ  IN æ¡ä»¶ã€‚.
123 |
124 |         ç”Ÿæˆå®‰å…¨çš„ IN æŸ¥è¯¢æ¡ä»¶ï¼Œé˜²æ­¢ SQL æ³¨å…¥ã€‚
    |                               ^^
125 |
126 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:127:23
    |
126 |         Args:
127 |             field: å­—æ®µåï¼Œä¾‹å¦‚ 'status' æˆ– 'user_id'ã€‚
    |                          ^^
128 |             values: å€¼åˆ—è¡¨ï¼Œä¾‹å¦‚ ['active', 'pending'] æˆ– [1, 2, 3]ã€‚
129 |                 å¦‚æžœåˆ—è¡¨ä¸ºç©ºï¼Œä¸æ·»åŠ ä»»ä½•æ¡ä»¶ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:128:24
    |
126 |         Args:
127 |             field: å­—æ®µåï¼Œä¾‹å¦‚ 'status' æˆ– 'user_id'ã€‚
128 |             values: å€¼åˆ—è¡¨ï¼Œä¾‹å¦‚ ['active', 'pending'] æˆ– [1, 2, 3]ã€‚
    |                           ^^
129 |                 å¦‚æžœåˆ—è¡¨ä¸ºç©ºï¼Œä¸æ·»åŠ ä»»ä½•æ¡ä»¶ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:129:23
    |
127 |             field: å­—æ®µåï¼Œä¾‹å¦‚ 'status' æˆ– 'user_id'ã€‚
128 |             values: å€¼åˆ—è¡¨ï¼Œä¾‹å¦‚ ['active', 'pending'] æˆ– [1, 2, 3]ã€‚
129 |                 å¦‚æžœåˆ—è¡¨ä¸ºç©ºï¼Œä¸æ·»åŠ ä»»ä½•æ¡ä»¶ã€‚
    |                             ^^
130 |
131 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:162:26
    |
160 |         """æ·»åŠ  NOT IN æ¡ä»¶ã€‚.
161 |
162 |         ç”Ÿæˆå®‰å…¨çš„ NOT IN æŸ¥è¯¢æ¡ä»¶ï¼Œé˜²æ­¢ SQL æ³¨å…¥ã€‚
    |                                   ^^
163 |
164 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:165:23
    |
164 |         Args:
165 |             field: å­—æ®µåï¼Œä¾‹å¦‚ 'username' æˆ– 'role_id'ã€‚
    |                          ^^
166 |             values: å€¼åˆ—è¡¨ï¼Œä¾‹å¦‚ ['admin', 'root'] æˆ– [1, 2]ã€‚
167 |                 å¦‚æžœåˆ—è¡¨ä¸ºç©ºï¼Œä¸æ·»åŠ ä»»ä½•æ¡ä»¶ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:166:24
    |
164 |         Args:
165 |             field: å­—æ®µåï¼Œä¾‹å¦‚ 'username' æˆ– 'role_id'ã€‚
166 |             values: å€¼åˆ—è¡¨ï¼Œä¾‹å¦‚ ['admin', 'root'] æˆ– [1, 2]ã€‚
    |                           ^^
167 |                 å¦‚æžœåˆ—è¡¨ä¸ºç©ºï¼Œä¸æ·»åŠ ä»»ä½•æ¡ä»¶ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:167:23
    |
165 |             field: å­—æ®µåï¼Œä¾‹å¦‚ 'username' æˆ– 'role_id'ã€‚
166 |             values: å€¼åˆ—è¡¨ï¼Œä¾‹å¦‚ ['admin', 'root'] æˆ– [1, 2]ã€‚
167 |                 å¦‚æžœåˆ—è¡¨ä¸ºç©ºï¼Œä¸æ·»åŠ ä»»ä½•æ¡ä»¶ã€‚
    |                             ^^
168 |
169 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:200:24
    |
198 |         """æ·»åŠ  LIKE æ¡ä»¶ã€‚.
199 |
200 |         ç”Ÿæˆå®‰å…¨çš„ LIKE æŸ¥è¯¢æ¡ä»¶ï¼Œé˜²æ­¢ SQL æ³¨å…¥ã€‚
    |                                 ^^
201 |
202 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:203:23
    |
202 |         Args:
203 |             field: å­—æ®µåï¼Œä¾‹å¦‚ 'username' æˆ– 'email'ã€‚
    |                          ^^
204 |             pattern: æ¨¡å¼å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ '%admin%' æˆ– 'test_%'ã€‚
205 |                 éœ€è¦åŒ…å«é€šé…ç¬¦ % æˆ– _ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:204:27
    |
202 |         Args:
203 |             field: å­—æ®µåï¼Œä¾‹å¦‚ 'username' æˆ– 'email'ã€‚
204 |             pattern: æ¨¡å¼å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ '%admin%' æˆ– 'test_%'ã€‚
    |                                ^^
205 |                 éœ€è¦åŒ…å«é€šé…ç¬¦ % æˆ– _ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:230:28
    |
228 |         """æ·»åŠ  NOT LIKE æ¡ä»¶ã€‚.
229 |
230 |         ç”Ÿæˆå®‰å…¨çš„ NOT LIKE æŸ¥è¯¢æ¡ä»¶ï¼Œé˜²æ­¢ SQL æ³¨å…¥ã€‚
    |                                     ^^
231 |
232 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:233:23
    |
232 |         Args:
233 |             field: å­—æ®µåï¼Œä¾‹å¦‚ 'username' æˆ– 'email'ã€‚
    |                          ^^
234 |             pattern: æ¨¡å¼å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ 'test_%' æˆ– '%_backup'ã€‚
235 |                 éœ€è¦åŒ…å«é€šé…ç¬¦ % æˆ– _ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:234:27
    |
232 |         Args:
233 |             field: å­—æ®µåï¼Œä¾‹å¦‚ 'username' æˆ– 'email'ã€‚
234 |             pattern: æ¨¡å¼å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ 'test_%' æˆ– '%_backup'ã€‚
    |                                ^^
235 |                 éœ€è¦åŒ…å«é€šé…ç¬¦ % æˆ– _ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:260:32
    |
258 |         """æž„å»º WHERE å­å¥ã€‚.
259 |
260 |         å°†æ‰€æœ‰æ·»åŠ çš„æ¡ä»¶ç»„åˆæˆå®Œæ•´çš„ WHERE å­å¥ï¼Œå¹¶è¿”å›žå¯¹åº”çš„å‚æ•°ã€‚
    |                                                ^^
261 |
262 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/safe_query_builder.py:263:26
    |
262 |         Returns:
263 |             æ ¹æ®æ•°æ®åº“ç±»åž‹è¿”å›žä¸åŒæ ¼å¼ï¼š
    |                                       ^^
264 |             - MySQL/PostgreSQL/SQL Server: (WHERE å­å¥å­—ç¬¦ä¸², å‚æ•°åˆ—è¡¨)
265 |             - Oracle: (WHERE å­å¥å­—ç¬¦ä¸², å‚æ•°å­—å…¸)
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:266:19
    |
264 |             - MySQL/PostgreSQL/SQL Server: (WHERE å­å¥å­—ç¬¦ä¸², å‚æ•°åˆ—è¡¨)
265 |             - Oracle: (WHERE å­å¥å­—ç¬¦ä¸², å‚æ•°å­—å…¸)
266 |             å¦‚æžœæ²¡æœ‰æ¡ä»¶ï¼Œè¿”å›ž ('1=1', []) æˆ– ('1=1', {})ã€‚
    |                         ^^
267 |
268 |         Example:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:294:23
    |
293 |         Args:
294 |             field: å­—æ®µåï¼Œä¾‹å¦‚ 'username'ã€‚
    |                          ^^
295 |             values: æŽ’é™¤çš„å€¼åˆ—è¡¨ï¼Œä¾‹å¦‚ ['admin', 'root']ã€‚
296 |             patterns: æŽ’é™¤çš„æ¨¡å¼åˆ—è¡¨ï¼Œä¾‹å¦‚ ['test_%', '%_backup']ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:295:27
    |
293 |         Args:
294 |             field: å­—æ®µåï¼Œä¾‹å¦‚ 'username'ã€‚
295 |             values: æŽ’é™¤çš„å€¼åˆ—è¡¨ï¼Œä¾‹å¦‚ ['admin', 'root']ã€‚
    |                                 ^^
296 |             patterns: æŽ’é™¤çš„æ¨¡å¼åˆ—è¡¨ï¼Œä¾‹å¦‚ ['test_%', '%_backup']ã€‚
297 |             db_specific_rules: æ•°æ®åº“ç‰¹å®šè§„åˆ™å­—å…¸ï¼Œé»˜è®¤ä¸º Noneã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:296:30
    |
294 |             field: å­—æ®µåï¼Œä¾‹å¦‚ 'username'ã€‚
295 |             values: æŽ’é™¤çš„å€¼åˆ—è¡¨ï¼Œä¾‹å¦‚ ['admin', 'root']ã€‚
296 |             patterns: æŽ’é™¤çš„æ¨¡å¼åˆ—è¡¨ï¼Œä¾‹å¦‚ ['test_%', '%_backup']ã€‚
    |                                     ^^
297 |             db_specific_rules: æ•°æ®åº“ç‰¹å®šè§„åˆ™å­—å…¸ï¼Œé»˜è®¤ä¸º Noneã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:297:41
    |
295 |             values: æŽ’é™¤çš„å€¼åˆ—è¡¨ï¼Œä¾‹å¦‚ ['admin', 'root']ã€‚
296 |             patterns: æŽ’é™¤çš„æ¨¡å¼åˆ—è¡¨ï¼Œä¾‹å¦‚ ['test_%', '%_backup']ã€‚
297 |             db_specific_rules: æ•°æ®åº“ç‰¹å®šè§„åˆ™å­—å…¸ï¼Œé»˜è®¤ä¸º Noneã€‚
    |                                                  ^^
298 |
299 |         Returns:
    |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/safe_query_builder.py:314:29
    |
312 |         # å¤„ç†æŽ’é™¤ç”¨æˆ·
313 |         if values:
314 |             # PostgreSQLç‰¹æ®Šå¤„ç†ï¼šä¿ç•™postgresç”¨æˆ·
    |                                 ^^
315 |             if self.db_type == DatabaseType.POSTGRESQL and "postgres" in values:
316 |                 filtered_values = [v for v in values if v != "postgres"]
    |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/safe_query_builder.py:324:29
    |
322 |         # å¤„ç†æŽ’é™¤æ¨¡å¼
323 |         for pattern in patterns:
324 |             # PostgreSQLç‰¹æ®Šå¤„ç†ï¼špg_%æ¨¡å¼ä¸æŽ’é™¤postgresç”¨æˆ·
    |                                 ^^
325 |             if self.db_type == DatabaseType.POSTGRESQL and pattern == "pg_%":
326 |                 self.add_condition(f"({field} NOT LIKE %s OR {field} = %s)", pattern, "postgres")
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:335:18
    |
333 |         """é‡ç½®æž„å»ºå™¨ã€‚.
334 |
335 |         æ¸…ç©ºæ‰€æœ‰æ¡ä»¶å’Œå‚æ•°ï¼Œæ¢å¤åˆ°åˆå§‹çŠ¶æ€ã€‚
    |                           ^^
336 |
337 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:363:23
    |
362 |     Args:
363 |         db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'mysql'ã€'postgresql'ã€'sqlserver'ã€'oracle'ã€‚
    |                            ^^
364 |         username_field: ç”¨æˆ·åå­—æ®µåï¼Œä¾‹å¦‚ 'username' æˆ– 'account_name'ã€‚
365 |         filter_rules: è¿‡æ»¤è§„åˆ™å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/safe_query_builder.py:363:27
    |
362 |     Args:
363 |         db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'mysql'ã€'postgresql'ã€'sqlserver'ã€'oracle'ã€‚
    |                                    ^^
364 |         username_field: ç”¨æˆ·åå­—æ®µåï¼Œä¾‹å¦‚ 'username' æˆ– 'account_name'ã€‚
365 |         filter_rules: è¿‡æ»¤è§„åˆ™å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:364:31
    |
362 |     Args:
363 |         db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'mysql'ã€'postgresql'ã€'sqlserver'ã€'oracle'ã€‚
364 |         username_field: ç”¨æˆ·åå­—æ®µåï¼Œä¾‹å¦‚ 'username' æˆ– 'account_name'ã€‚
    |                                     ^^
365 |         filter_rules: è¿‡æ»¤è§„åˆ™å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
366 |             {
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:365:29
    |
363 |         db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'mysql'ã€'postgresql'ã€'sqlserver'ã€'oracle'ã€‚
364 |         username_field: ç”¨æˆ·åå­—æ®µåï¼Œä¾‹å¦‚ 'username' æˆ– 'account_name'ã€‚
365 |         filter_rules: è¿‡æ»¤è§„åˆ™å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                   ^^
366 |             {
367 |                 'mysql': {
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/safe_query_builder.py:365:34
    |
363 |         db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'mysql'ã€'postgresql'ã€'sqlserver'ã€'oracle'ã€‚
364 |         username_field: ç”¨æˆ·åå­—æ®µåï¼Œä¾‹å¦‚ 'username' æˆ– 'account_name'ã€‚
365 |         filter_rules: è¿‡æ»¤è§„åˆ™å­—å…¸ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
    |                                             ^^
366 |             {
367 |                 'mysql': {
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/safe_query_builder.py:374:22
    |
373 |     Returns:
374 |         æ ¹æ®æ•°æ®åº“ç±»åž‹è¿”å›žä¸åŒæ ¼å¼ï¼š
    |                                   ^^
375 |         - MySQL/PostgreSQL/SQL Server: (WHERE å­å¥, å‚æ•°åˆ—è¡¨)
376 |         - Oracle: (WHERE å­å¥, å‚æ•°å­—å…¸)
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:395:9
    |
395 | # ä¸ºäº†å‘åŽå…¼å®¹ï¼Œæ·»åŠ ä¸€ä¸ªä¾¿æ·å‡½æ•°è¿”å›žlistæ ¼å¼çš„å‚æ•°
    |               ^^
396 | def build_safe_filter_conditions_list(
397 |     db_type: str, username_field: str, filter_rules: dict[str, Any],
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/safe_query_builder.py:399:32
    |
397 |     db_type: str, username_field: str, filter_rules: dict[str, Any],
398 | ) -> tuple[str, list[Any]]:
399 |     """æž„å»ºå®‰å…¨çš„è¿‡æ»¤æ¡ä»¶ - è¿”å›ž list æ ¼å¼å‚æ•°ï¼ˆå‘åŽå…¼å®¹ï¼‰ã€‚.
    |                                               ^^
400 |
401 |     ä¸Ž build_safe_filter_conditions åŠŸèƒ½ç›¸åŒï¼Œä½†å§‹ç»ˆè¿”å›žåˆ—è¡¨æ ¼å¼çš„å‚æ•°ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/safe_query_builder.py:399:37
    |
397 |     db_type: str, username_field: str, filter_rules: dict[str, Any],
398 | ) -> tuple[str, list[Any]]:
399 |     """æž„å»ºå®‰å…¨çš„è¿‡æ»¤æ¡ä»¶ - è¿”å›ž list æ ¼å¼å‚æ•°ï¼ˆå‘åŽå…¼å®¹ï¼‰ã€‚.
    |                                                         ^^
400 |
401 |     ä¸Ž build_safe_filter_conditions åŠŸèƒ½ç›¸åŒï¼Œä½†å§‹ç»ˆè¿”å›žåˆ—è¡¨æ ¼å¼çš„å‚æ•°ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:401:40
    |
399 |     """æž„å»ºå®‰å…¨çš„è¿‡æ»¤æ¡ä»¶ - è¿”å›ž list æ ¼å¼å‚æ•°ï¼ˆå‘åŽå…¼å®¹ï¼‰ã€‚.
400 |
401 |     ä¸Ž build_safe_filter_conditions åŠŸèƒ½ç›¸åŒï¼Œä½†å§‹ç»ˆè¿”å›žåˆ—è¡¨æ ¼å¼çš„å‚æ•°ã€‚
    |                                             ^^
402 |     ç”¨äºŽå‘åŽå…¼å®¹ä¸æ”¯æŒå­—å…¸å‚æ•°çš„ä»£ç ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:405:23
    |
404 |     Args:
405 |         db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'mysql'ã€'postgresql'ã€'sqlserver'ã€'oracle'ã€‚
    |                            ^^
406 |         username_field: ç”¨æˆ·åå­—æ®µåï¼Œä¾‹å¦‚ 'username' æˆ– 'account_name'ã€‚
407 |         filter_rules: è¿‡æ»¤è§„åˆ™å­—å…¸ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/safe_query_builder.py:405:27
    |
404 |     Args:
405 |         db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'mysql'ã€'postgresql'ã€'sqlserver'ã€'oracle'ã€‚
    |                                    ^^
406 |         username_field: ç”¨æˆ·åå­—æ®µåï¼Œä¾‹å¦‚ 'username' æˆ– 'account_name'ã€‚
407 |         filter_rules: è¿‡æ»¤è§„åˆ™å­—å…¸ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:406:31
    |
404 |     Args:
405 |         db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'mysql'ã€'postgresql'ã€'sqlserver'ã€'oracle'ã€‚
406 |         username_field: ç”¨æˆ·åå­—æ®µåï¼Œä¾‹å¦‚ 'username' æˆ– 'account_name'ã€‚
    |                                     ^^
407 |         filter_rules: è¿‡æ»¤è§„åˆ™å­—å…¸ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/safe_query_builder.py:410:28
    |
409 |     Returns:
410 |         (WHERE å­å¥, å‚æ•°åˆ—è¡¨)ã€‚æ³¨æ„ï¼šOracle çš„å‘½åå‚æ•°ä¼šè¢«è½¬æ¢ä¸ºåˆ—è¡¨ã€‚
    |                                     ^^
411 |
412 |     Example:
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:420:23
    |
418 |     where_clause, params = build_safe_filter_conditions(db_type, username_field, filter_rules)
419 |
420 |     # å¦‚æžœæ˜¯Oracleè¿”å›žçš„dictï¼Œè½¬æ¢ä¸ºlistï¼ˆè™½ç„¶ä¼šä¸¢å¤±å‘½åä¿¡æ¯ï¼Œä½†ä¿æŒå…¼å®¹æ€§ï¼‰
    |                             ^^
421 |     if isinstance(params, dict):
422 |         return where_clause, list(params.values())
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/safe_query_builder.py:420:31
    |
418 |     where_clause, params = build_safe_filter_conditions(db_type, username_field, filter_rules)
419 |
420 |     # å¦‚æžœæ˜¯Oracleè¿”å›žçš„dictï¼Œè½¬æ¢ä¸ºlistï¼ˆè™½ç„¶ä¼šä¸¢å¤±å‘½åä¿¡æ¯ï¼Œä½†ä¿æŒå…¼å®¹æ€§ï¼‰
    |                                         ^^
421 |     if isinstance(params, dict):
422 |         return where_clause, list(params.values())
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/safe_query_builder.py:420:41
    |
418 |     where_clause, params = build_safe_filter_conditions(db_type, username_field, filter_rules)
419 |
420 |     # å¦‚æžœæ˜¯Oracleè¿”å›žçš„dictï¼Œè½¬æ¢ä¸ºlistï¼ˆè™½ç„¶ä¼šä¸¢å¤±å‘½åä¿¡æ¯ï¼Œä½†ä¿æŒå…¼å®¹æ€§ï¼‰
    |                                                             ^^
421 |     if isinstance(params, dict):
422 |         return where_clause, list(params.values())
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/safe_query_builder.py:420:48
    |
418 |     where_clause, params = build_safe_filter_conditions(db_type, username_field, filter_rules)
419 |
420 |     # å¦‚æžœæ˜¯Oracleè¿”å›žçš„dictï¼Œè½¬æ¢ä¸ºlistï¼ˆè™½ç„¶ä¼šä¸¢å¤±å‘½åä¿¡æ¯ï¼Œä½†ä¿æŒå…¼å®¹æ€§ï¼‰
    |                                                                           ^^
421 |     if isinstance(params, dict):
422 |         return where_clause, list(params.values())
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/utils/sensitive_data.py:3:34
  |
1 | """æ•æ„Ÿå­—æ®µè„±æ•å·¥å…·ã€‚.
2 |
3 | æä¾›é€šç”¨çš„ `scrub_sensitive_fields` æ–¹æ³•ï¼Œç”¨äºŽåœ¨å†™æ—¥å¿—æˆ–å›žæ˜¾
  |                                         ^^
4 | payload å‰ç»Ÿä¸€æ›¿æ¢å¯†ç ã€ä»¤ç‰Œç­‰æ•æ„Ÿå†…å®¹ï¼Œé¿å…æ³„éœ²ã€‚
5 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/utils/sensitive_data.py:4:24
  |
3 | æä¾›é€šç”¨çš„ `scrub_sensitive_fields` æ–¹æ³•ï¼Œç”¨äºŽåœ¨å†™æ—¥å¿—æˆ–å›žæ˜¾
4 | payload å‰ç»Ÿä¸€æ›¿æ¢å¯†ç ã€ä»¤ç‰Œç­‰æ•æ„Ÿå†…å®¹ï¼Œé¿å…æ³„éœ²ã€‚
  |                                       ^^
5 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/sensitive_data.py:31:14
   |
29 |     mask: str = "***",
30 | ) -> dict[str, Any]:
31 |     """è„±æ•æ•æ„Ÿå­—æ®µï¼Œè¿”å›žæ–°çš„å­—å…¸å‰¯æœ¬ã€‚.
   |                    ^^
32 |
33 |     Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/sensitive_data.py:34:22
   |
33 |     Args:
34 |         payload: åŽŸå§‹æ•°æ®ï¼Œå¯ä»¥æ˜¯ dict æˆ– MultiDictã€‚
   |                          ^^
35 |         extra_keys: é¢å¤–éœ€è¦è„±æ•çš„å­—æ®µåé›†åˆã€‚
36 |         mask: æ›¿æ¢åŽçš„æŽ©ç å­—ç¬¦ä¸²ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/sensitive_data.py:39:15
   |
38 |     Returns:
39 |         å·²è„±æ•çš„å­—å…¸ï¼Œä¸ä¼šä¿®æ”¹åŽŸå§‹å¯¹è±¡ã€‚
   |                     ^^
40 |
41 |     """
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `value`
  --> app/utils/sensitive_data.py:49:23
   |
47 |         normalized_keys.update(str(key).lower() for key in extra_keys)
48 |
49 |     def _scrub(value: Any, *, field_name: str | None = None) -> Any:
   |                       ^^^
50 |         key_lower = field_name.lower() if field_name else None
51 |         if key_lower and key_lower in normalized_keys:
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `_scrub`
  --> app/utils/sensitive_data.py:49:65
   |
47 |         normalized_keys.update(str(key).lower() for key in extra_keys)
48 |
49 |     def _scrub(value: Any, *, field_name: str | None = None) -> Any:
   |                                                                 ^^^
50 |         key_lower = field_name.lower() if field_name else None
51 |         if key_lower and key_lower in normalized_keys:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/utils/sqlserver_connection_utils.py:3:24
  |
1 | """SQL Server è¿žæŽ¥è¯Šæ–­å·¥å…·ã€‚.
2 |
3 | åˆ†æž SQL Server è¿žæŽ¥å¤±è´¥çš„å…·ä½“åŽŸå› ï¼Œæä¾›è¯Šæ–­ä¿¡æ¯å’Œè§£å†³æ–¹æ¡ˆå»ºè®®ã€‚
  |                                   ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/sqlserver_connection_utils.py:15:28
   |
13 |     """SQL Server è¿žæŽ¥è¯Šæ–­å·¥å…·ã€‚.
14 |
15 |     æä¾› SQL Server è¿žæŽ¥é”™è¯¯çš„è¯Šæ–­åŠŸèƒ½ï¼ŒåŒ…æ‹¬é”™è¯¯ç±»åž‹è¯†åˆ«ã€ç½‘ç»œæ£€æŸ¥ã€
   |                                       ^^
16 |     ç«¯å£å¯è¾¾æ€§æµ‹è¯•å’Œè¿žæŽ¥å­—ç¬¦ä¸²å»ºè®®ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/sqlserver_connection_utils.py:36:15
   |
34 |         """è¯Šæ–­ SQL Server è¿žæŽ¥é”™è¯¯ã€‚.
35 |
36 |         åˆ†æžé”™è¯¯æ¶ˆæ¯ï¼Œè¯†åˆ«é”™è¯¯ç±»åž‹ï¼Œæ‰§è¡Œç½‘ç»œå’Œç«¯å£æ£€æŸ¥ï¼Œæä¾›å¯èƒ½çš„åŽŸå› å’Œè§£å†³æ–¹æ¡ˆã€‚
   |                     ^^
37 |
38 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/sqlserver_connection_utils.py:36:22
   |
34 |         """è¯Šæ–­ SQL Server è¿žæŽ¥é”™è¯¯ã€‚.
35 |
36 |         åˆ†æžé”™è¯¯æ¶ˆæ¯ï¼Œè¯†åˆ«é”™è¯¯ç±»åž‹ï¼Œæ‰§è¡Œç½‘ç»œå’Œç«¯å£æ£€æŸ¥ï¼Œæä¾›å¯èƒ½çš„åŽŸå› å’Œè§£å†³æ–¹æ¡ˆã€‚
   |                                   ^^
37 |
38 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/sqlserver_connection_utils.py:36:32
   |
34 |         """è¯Šæ–­ SQL Server è¿žæŽ¥é”™è¯¯ã€‚.
35 |
36 |         åˆ†æžé”™è¯¯æ¶ˆæ¯ï¼Œè¯†åˆ«é”™è¯¯ç±»åž‹ï¼Œæ‰§è¡Œç½‘ç»œå’Œç«¯å£æ£€æŸ¥ï¼Œæä¾›å¯èƒ½çš„åŽŸå› å’Œè§£å†³æ–¹æ¡ˆã€‚
   |                                                       ^^
37 |
38 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/sqlserver_connection_utils.py:44:19
   |
43 |         Returns:
44 |             è¯Šæ–­ç»“æžœå­—å…¸ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
   |                         ^^
45 |             - host: ä¸»æœºåœ°å€
46 |             - port: ç«¯å£å·
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/utils/sqlserver_connection_utils.py:44:26
   |
43 |         Returns:
44 |             è¯Šæ–­ç»“æžœå­—å…¸ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
   |                                       ^^
45 |             - host: ä¸»æœºåœ°å€
46 |             - port: ç«¯å£å·
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/sqlserver_connection_utils.py:48:31
   |
46 |             - port: ç«¯å£å·
47 |             - error_message: é”™è¯¯æ¶ˆæ¯
48 |             - error_type: é”™è¯¯ç±»åž‹ï¼ˆauthentication_failedã€connection_failedã€timeout ç­‰ï¼‰
   |                                   ^^
49 |             - possible_causes: å¯èƒ½çš„åŽŸå› åˆ—è¡¨
50 |             - solutions: è§£å†³æ–¹æ¡ˆå»ºè®®åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/sqlserver_connection_utils.py:48:81
   |
46 |             - port: ç«¯å£å·
47 |             - error_message: é”™è¯¯æ¶ˆæ¯
48 |             - error_type: é”™è¯¯ç±»åž‹ï¼ˆauthentication_failedã€connection_failedã€timeout ç­‰ï¼‰
   |                                                                                         ^^
49 |             - possible_causes: å¯èƒ½çš„åŽŸå› åˆ—è¡¨
50 |             - solutions: è§£å†³æ–¹æ¡ˆå»ºè®®åˆ—è¡¨
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/sqlserver_connection_utils.py:145:26
    |
144 |         Returns:
145 |             å¦‚æžœä¸»æœºå¯è¾¾è¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚
    |                                  ^^
146 |
147 |         """
    |

TRY300 Consider moving this statement to an `else` block
   --> app/utils/sqlserver_connection_utils.py:150:13
    |
148 |         try:
149 |             socket.gethostbyname(host)
150 |             return True
    |             ^^^^^^^^^^^
151 |         except socket.gaierror:
152 |             return False
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/sqlserver_connection_utils.py:164:27
    |
163 |         Returns:
164 |             å¦‚æžœç«¯å£å¯è®¿é—®è¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚
    |                                    ^^
165 |
166 |         """
    |

TRY300 Consider moving this statement to an `else` block
   --> app/utils/sqlserver_connection_utils.py:172:13
    |
170 |             result = sock.connect_ex((host, port))
171 |             sock.close()
172 |             return result == 0
    |             ^^^^^^^^^^^^^^^^^^
173 |         except Exception:
174 |             return False
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/utils/sqlserver_connection_utils.py:173:16
    |
171 |             sock.close()
172 |             return result == 0
173 |         except Exception:
    |                ^^^^^^^^^
174 |             return False
    |

E501 Line too long (124 > 120)
   --> app/utils/sqlserver_connection_utils.py:176:121
    |
174 |             return False
175 |
176 |     def get_connection_string_suggestions(self, host: str, port: int, username: str, database: str = "master") -> list[str]:
    |                                                                                                                         ^^^^
177 |         """èŽ·å–è¿žæŽ¥å­—ç¬¦ä¸²å»ºè®®ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/sqlserver_connection_utils.py:179:34
    |
177 |         """èŽ·å–è¿žæŽ¥å­—ç¬¦ä¸²å»ºè®®ã€‚.
178 |
179 |         ç”Ÿæˆå¤šç§ SQL Server è¿žæŽ¥å­—ç¬¦ä¸²é…ç½®å»ºè®®ï¼ŒåŒ…æ‹¬åŸºæœ¬è¿žæŽ¥ã€å¸¦è¶…æ—¶ã€
    |                                               ^^
180 |         å¸¦åŠ å¯†å’Œå¸¦é‡è¯•çš„é…ç½®ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/sqlserver_connection_utils.py:186:28
    |
184 |             port: ç«¯å£å·ã€‚
185 |             username: ç”¨æˆ·åã€‚
186 |             database: æ•°æ®åº“åç§°ï¼Œé»˜è®¤ä¸º 'master'ã€‚
    |                                 ^^
187 |
188 |         Returns:
    |

E501 Line too long (126 > 120)
   --> app/utils/sqlserver_connection_utils.py:204:121
    |
203 |         # å¸¦è¶…æ—¶çš„è¿žæŽ¥å­—ç¬¦ä¸²
204 |         suggestions.append(f"Server={host},{port};Database={database};User Id={username};Password=***;Connection Timeout=60;")
    |                                                                                                                         ^^^^^^
205 |
206 |         # å¸¦åŠ å¯†çš„è¿žæŽ¥å­—ç¬¦ä¸²
    |

E501 Line too long (145 > 120)
   --> app/utils/sqlserver_connection_utils.py:207:121
    |
206 | â€¦
207 | â€¦e};User Id={username};Password=***;Encrypt=True;TrustServerCertificate=True;")
    |                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^
208 | â€¦
209 | â€¦
    |

E501 Line too long (146 > 120)
   --> app/utils/sqlserver_connection_utils.py:210:121
    |
209 | â€¦
210 | â€¦e};User Id={username};Password=***;Connection Timeout=60;Command Timeout=300;")
    |                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^
211 | â€¦
212 | â€¦
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/sqlserver_connection_utils.py:223:19
    |
222 |         Returns:
223 |             é”™è¯¯æ¨¡å¼å­—å…¸ï¼ŒåŒ…å«ä»¥ä¸‹å¸ƒå°”å­—æ®µï¼š
    |                         ^^
224 |             - has_network_error: æ˜¯å¦åŒ…å«ç½‘ç»œé”™è¯¯
225 |             - has_auth_error: æ˜¯å¦åŒ…å«è®¤è¯é”™è¯¯
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/sqlserver_connection_utils.py:223:28
    |
222 |         Returns:
223 |             é”™è¯¯æ¨¡å¼å­—å…¸ï¼ŒåŒ…å«ä»¥ä¸‹å¸ƒå°”å­—æ®µï¼š
    |                                           ^^
224 |             - has_network_error: æ˜¯å¦åŒ…å«ç½‘ç»œé”™è¯¯
225 |             - has_auth_error: æ˜¯å¦åŒ…å«è®¤è¯é”™è¯¯
    |

E501 Line too long (138 > 120)
   --> app/utils/sqlserver_connection_utils.py:237:121
    |
235 | â€¦
236 | â€¦
237 | â€¦ower() for keyword in ["timeout", "connection", "network", "unreachable"]),
    |                                                           ^^^^^^^^^^^^^^^^^^
238 | â€¦r() for keyword in ["login", "authentication", "password", "user"]),
239 | â€¦wer() for keyword in ["server", "service", "database", "sql"]),
    |

E501 Line too long (131 > 120)
   --> app/utils/sqlserver_connection_utils.py:238:121
    |
236 | â€¦
237 | â€¦e.lower() for keyword in ["timeout", "connection", "network", "unreachable"]),
238 | â€¦ower() for keyword in ["login", "authentication", "password", "user"]),
    |                                                              ^^^^^^^^^^^
239 | â€¦.lower() for keyword in ["server", "service", "database", "sql"]),
240 | â€¦sage.lower() for keyword in ["permission", "access", "denied", "unauthorized"]),
    |

E501 Line too long (126 > 120)
   --> app/utils/sqlserver_connection_utils.py:239:121
    |
237 | â€¦         "has_network_error": any(keyword in error_message.lower() for keyword in ["timeout", "connection", "network", "unreachable"â€¦
238 | â€¦         "has_auth_error": any(keyword in error_message.lower() for keyword in ["login", "authentication", "password", "user"]),
239 | â€¦         "has_server_error": any(keyword in error_message.lower() for keyword in ["server", "service", "database", "sql"]),
    |                                                                                                                       ^^^^^^
240 | â€¦         "has_permission_error": any(keyword in error_message.lower() for keyword in ["permission", "access", "denied", "unauthorizeâ€¦
241 | â€¦     }
    |

E501 Line too long (140 > 120)
   --> app/utils/sqlserver_connection_utils.py:240:121
    |
238 | â€¦() for keyword in ["login", "authentication", "password", "user"]),
239 | â€¦er() for keyword in ["server", "service", "database", "sql"]),
240 | â€¦.lower() for keyword in ["permission", "access", "denied", "unauthorized"]),
    |                                                          ^^^^^^^^^^^^^^^^^^^^
241 | â€¦
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/structlog_config.py:33:27
   |
31 |     """structlog é…ç½®æ ¸å¿ƒç±»ã€‚.
32 |
33 |     è´Ÿè´£é…ç½®å’Œç®¡ç† structlog æ—¥å¿—ç³»ç»Ÿï¼ŒåŒ…æ‹¬å¤„ç†å™¨ã€è¿‡æ»¤å™¨å’Œå·¥ä½œçº¿ç¨‹ã€‚
   |                                      ^^
34 |     æ”¯æŒæ•°æ®åº“æ—¥å¿—æŒä¹…åŒ–ã€å¼‚æ­¥æ‰¹é‡å†™å…¥å’Œè°ƒè¯•æ—¥å¿—è¿‡æ»¤ã€‚
   |

ANN001 Missing type annotation for function argument `app`
  --> app/utils/structlog_config.py:55:25
   |
53 |         self.configured = False
54 |
55 |     def configure(self, app=None) -> None:
   |                         ^^^
56 |         """åˆå§‹åŒ– structlog å¤„ç†å™¨ï¼ˆå¹‚ç­‰ï¼‰ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/structlog_config.py:56:29
   |
55 |     def configure(self, app=None) -> None:
56 |         """åˆå§‹åŒ– structlog å¤„ç†å™¨ï¼ˆå¹‚ç­‰ï¼‰ã€‚.
   |                                   ^^
57 |
58 |         é…ç½® structlog çš„å¤„ç†å™¨é“¾ã€ä¸Šä¸‹æ–‡ç®¡ç†å’Œæ—¥å¿—å·¥åŽ‚ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/structlog_config.py:56:32
   |
55 |     def configure(self, app=None) -> None:
56 |         """åˆå§‹åŒ– structlog å¤„ç†å™¨ï¼ˆå¹‚ç­‰ï¼‰ã€‚.
   |                                         ^^
57 |
58 |         é…ç½® structlog çš„å¤„ç†å™¨é“¾ã€ä¸Šä¸‹æ–‡ç®¡ç†å’Œæ—¥å¿—å·¥åŽ‚ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/structlog_config.py:59:15
   |
58 |         é…ç½® structlog çš„å¤„ç†å™¨é“¾ã€ä¸Šä¸‹æ–‡ç®¡ç†å’Œæ—¥å¿—å·¥åŽ‚ã€‚
59 |         å¯ä»¥å¤šæ¬¡è°ƒç”¨ï¼Œåªä¼šé…ç½®ä¸€æ¬¡ã€‚
   |                     ^^
60 |
61 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/structlog_config.py:62:28
   |
61 |         Args:
62 |             app: Flask åº”ç”¨å®žä¾‹ï¼Œå¯é€‰ã€‚å¦‚æžœæä¾›ï¼Œå°†é™„åŠ åº”ç”¨ç‰¹å®šé…ç½®ã€‚
   |                                ^^
63 |
64 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/structlog_config.py:62:36
   |
61 |         Args:
62 |             app: Flask åº”ç”¨å®žä¾‹ï¼Œå¯é€‰ã€‚å¦‚æžœæä¾›ï¼Œå°†é™„åŠ åº”ç”¨ç‰¹å®šé…ç½®ã€‚
   |                                                ^^
63 |
64 |         Returns:
   |

ANN001 Missing type annotation for function argument `app`
  --> app/utils/structlog_config.py:93:27
   |
91 |             self._attach_app(app)
92 |
93 |     def _attach_app(self, app) -> None:
   |                           ^^^
94 |         """ç»‘å®šä½äºŽ Flask åº”ç”¨ä¸Šçš„é˜Ÿåˆ—é…ç½®ã€‚.
   |

ANN202 Missing return type annotation for private function `_add_request_context`
   --> app/utils/structlog_config.py:118:9
    |
116 |         self.debug_filter.set_enabled(enable_debug)
117 |
118 |     def _add_request_context(self, logger, method_name, event_dict):
    |         ^^^^^^^^^^^^^^^^^^^^
119 |         """å‘äº‹ä»¶å­—å…¸å†™å…¥è¯·æ±‚ä¸Šä¸‹æ–‡ã€‚.
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `logger`
   --> app/utils/structlog_config.py:118:36
    |
116 |         self.debug_filter.set_enabled(enable_debug)
117 |
118 |     def _add_request_context(self, logger, method_name, event_dict):
    |                                    ^^^^^^
119 |         """å‘äº‹ä»¶å­—å…¸å†™å…¥è¯·æ±‚ä¸Šä¸‹æ–‡ã€‚.
    |

ARG002 Unused method argument: `logger`
   --> app/utils/structlog_config.py:118:36
    |
116 |         self.debug_filter.set_enabled(enable_debug)
117 |
118 |     def _add_request_context(self, logger, method_name, event_dict):
    |                                    ^^^^^^
119 |         """å‘äº‹ä»¶å­—å…¸å†™å…¥è¯·æ±‚ä¸Šä¸‹æ–‡ã€‚.
    |

ANN001 Missing type annotation for function argument `method_name`
   --> app/utils/structlog_config.py:118:44
    |
116 |         self.debug_filter.set_enabled(enable_debug)
117 |
118 |     def _add_request_context(self, logger, method_name, event_dict):
    |                                            ^^^^^^^^^^^
119 |         """å‘äº‹ä»¶å­—å…¸å†™å…¥è¯·æ±‚ä¸Šä¸‹æ–‡ã€‚.
    |

ARG002 Unused method argument: `method_name`
   --> app/utils/structlog_config.py:118:44
    |
116 |         self.debug_filter.set_enabled(enable_debug)
117 |
118 |     def _add_request_context(self, logger, method_name, event_dict):
    |                                            ^^^^^^^^^^^
119 |         """å‘äº‹ä»¶å­—å…¸å†™å…¥è¯·æ±‚ä¸Šä¸‹æ–‡ã€‚.
    |

ANN001 Missing type annotation for function argument `event_dict`
   --> app/utils/structlog_config.py:118:57
    |
116 |         self.debug_filter.set_enabled(enable_debug)
117 |
118 |     def _add_request_context(self, logger, method_name, event_dict):
    |                                                         ^^^^^^^^^^
119 |         """å‘äº‹ä»¶å­—å…¸å†™å…¥è¯·æ±‚ä¸Šä¸‹æ–‡ã€‚.
    |

ANN202 Missing return type annotation for private function `_add_user_context`
   --> app/utils/structlog_config.py:135:9
    |
133 |         return event_dict
134 |
135 |     def _add_user_context(self, logger, method_name, event_dict):
    |         ^^^^^^^^^^^^^^^^^
136 |         """é™„åŠ å½“å‰ç”¨æˆ·ä¸Šä¸‹æ–‡ã€‚.
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `logger`
   --> app/utils/structlog_config.py:135:33
    |
133 |         return event_dict
134 |
135 |     def _add_user_context(self, logger, method_name, event_dict):
    |                                 ^^^^^^
136 |         """é™„åŠ å½“å‰ç”¨æˆ·ä¸Šä¸‹æ–‡ã€‚.
    |

ARG002 Unused method argument: `logger`
   --> app/utils/structlog_config.py:135:33
    |
133 |         return event_dict
134 |
135 |     def _add_user_context(self, logger, method_name, event_dict):
    |                                 ^^^^^^
136 |         """é™„åŠ å½“å‰ç”¨æˆ·ä¸Šä¸‹æ–‡ã€‚.
    |

ANN001 Missing type annotation for function argument `method_name`
   --> app/utils/structlog_config.py:135:41
    |
133 |         return event_dict
134 |
135 |     def _add_user_context(self, logger, method_name, event_dict):
    |                                         ^^^^^^^^^^^
136 |         """é™„åŠ å½“å‰ç”¨æˆ·ä¸Šä¸‹æ–‡ã€‚.
    |

ARG002 Unused method argument: `method_name`
   --> app/utils/structlog_config.py:135:41
    |
133 |         return event_dict
134 |
135 |     def _add_user_context(self, logger, method_name, event_dict):
    |                                         ^^^^^^^^^^^
136 |         """é™„åŠ å½“å‰ç”¨æˆ·ä¸Šä¸‹æ–‡ã€‚.
    |

ANN001 Missing type annotation for function argument `event_dict`
   --> app/utils/structlog_config.py:135:54
    |
133 |         return event_dict
134 |
135 |     def _add_user_context(self, logger, method_name, event_dict):
    |                                                      ^^^^^^^^^^
136 |         """é™„åŠ å½“å‰ç”¨æˆ·ä¸Šä¸‹æ–‡ã€‚.
    |

S110 `try`-`except`-`pass` detected, consider logging the exception
   --> app/utils/structlog_config.py:151:9
    |
149 |                   event_dict["current_user_id"] = getattr(current_user, "id", None)
150 |                   event_dict["current_username"] = getattr(current_user, "username", None)
151 | /         except Exception:
152 | |             pass
    | |________________^
153 |           return event_dict
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/utils/structlog_config.py:151:16
    |
149 |                 event_dict["current_user_id"] = getattr(current_user, "id", None)
150 |                 event_dict["current_username"] = getattr(current_user, "username", None)
151 |         except Exception:
    |                ^^^^^^^^^
152 |             pass
153 |         return event_dict
    |

ANN202 Missing return type annotation for private function `_add_global_context`
   --> app/utils/structlog_config.py:155:9
    |
153 |         return event_dict
154 |
155 |     def _add_global_context(self, logger, method_name, event_dict):
    |         ^^^^^^^^^^^^^^^^^^^
156 |         """é™„åŠ çŽ¯å¢ƒã€ç‰ˆæœ¬ç­‰å…¨å±€ä¸Šä¸‹æ–‡ã€‚.
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `logger`
   --> app/utils/structlog_config.py:155:35
    |
153 |         return event_dict
154 |
155 |     def _add_global_context(self, logger, method_name, event_dict):
    |                                   ^^^^^^
156 |         """é™„åŠ çŽ¯å¢ƒã€ç‰ˆæœ¬ç­‰å…¨å±€ä¸Šä¸‹æ–‡ã€‚.
    |

ANN001 Missing type annotation for function argument `method_name`
   --> app/utils/structlog_config.py:155:43
    |
153 |         return event_dict
154 |
155 |     def _add_global_context(self, logger, method_name, event_dict):
    |                                           ^^^^^^^^^^^
156 |         """é™„åŠ çŽ¯å¢ƒã€ç‰ˆæœ¬ç­‰å…¨å±€ä¸Šä¸‹æ–‡ã€‚.
    |

ARG002 Unused method argument: `method_name`
   --> app/utils/structlog_config.py:155:43
    |
153 |         return event_dict
154 |
155 |     def _add_global_context(self, logger, method_name, event_dict):
    |                                           ^^^^^^^^^^^
156 |         """é™„åŠ çŽ¯å¢ƒã€ç‰ˆæœ¬ç­‰å…¨å±€ä¸Šä¸‹æ–‡ã€‚.
    |

ANN001 Missing type annotation for function argument `event_dict`
   --> app/utils/structlog_config.py:155:56
    |
153 |         return event_dict
154 |
155 |     def _add_global_context(self, logger, method_name, event_dict):
    |                                                        ^^^^^^^^^^
156 |         """é™„åŠ çŽ¯å¢ƒã€ç‰ˆæœ¬ç­‰å…¨å±€ä¸Šä¸‹æ–‡ã€‚.
    |

ANN202 Missing return type annotation for private function `_get_console_renderer`
   --> app/utils/structlog_config.py:181:9
    |
179 |         return event_dict
180 |
181 |     def _get_console_renderer(self):
    |         ^^^^^^^^^^^^^^^^^^^^^
182 |         """æ ¹æ®ç»ˆç«¯èƒ½åŠ›è¿”å›žæ¸²æŸ“å™¨ã€‚.
    |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/structlog_config.py:185:31
    |
184 |         Returns:
185 |             structlog rendererï¼Œç”¨äºŽæŽ§åˆ¶å°è¾“å‡ºã€‚
    |                               ^^
186 |
187 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/structlog_config.py:198:19
    |
196 |         """å…³é—­æ—¥å¿—ç³»ç»Ÿã€‚.
197 |
198 |         åœæ­¢æ—¥å¿—é˜Ÿåˆ—å·¥ä½œçº¿ç¨‹ï¼Œåˆ·æ–°æ‰€æœ‰å¾…å¤„ç†çš„æ—¥å¿—ã€‚
    |                             ^^
199 |         é€šå¸¸åœ¨åº”ç”¨é€€å‡ºæ—¶è‡ªåŠ¨è°ƒç”¨ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/structlog_config.py:219:22
    |
218 |     Args:
219 |         name: æ—¥å¿—è®°å½•å™¨åç§°ï¼Œé€šå¸¸ä½¿ç”¨æ¨¡å—åã€‚
    |                             ^^
220 |
221 |     Returns:
    |

ANN001 Missing type annotation for function argument `app`
   --> app/utils/structlog_config.py:233:25
    |
233 | def configure_structlog(app) -> None:
    |                         ^^^
234 |     """é…ç½® structlog å¹¶æ³¨å†Œ Flask é’©å­ã€‚.
    |

ANN001 Missing type annotation for function argument `exception`
   --> app/utils/structlog_config.py:246:28
    |
245 |     @app.teardown_appcontext
246 |     def log_teardown_error(exception) -> None:
    |                            ^^^^^^^^^
247 |         if exception:
248 |             get_logger("app").error("åº”ç”¨è¯·æ±‚å¤„ç†å¼‚å¸¸", module="system", exception=str(exception))
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/structlog_config.py:255:24
    |
254 |     Returns:
255 |         å¦‚æžœå¯ç”¨è°ƒè¯•æ—¥å¿—è¿”å›ž Trueï¼Œå¦åˆ™è¿”å›ž Falseã€‚
    |                                  ^^
256 |
257 |     """
    |

ANN003 Missing type annotation for `**kwargs`
   --> app/utils/structlog_config.py:264:49
    |
264 | def log_info(message: str, module: str = "app", **kwargs) -> None:
    |                                                 ^^^^^^^^
265 |     """è®°å½•ä¿¡æ¯çº§åˆ«æ—¥å¿—ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/structlog_config.py:269:21
    |
267 |     Args:
268 |         message: æ—¥å¿—æ¶ˆæ¯ã€‚
269 |         module: æ¨¡å—åç§°ï¼Œé»˜è®¤ä¸º 'app'ã€‚
    |                         ^^
270 |         **kwargs: é¢å¤–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚
    |

ANN003 Missing type annotation for `**kwargs`
   --> app/utils/structlog_config.py:283:88
    |
283 | def log_warning(message: str, module: str = "app", exception: Exception | None = None, **kwargs) -> None:
    |                                                                                        ^^^^^^^^
284 |     """è®°å½•è­¦å‘Šçº§åˆ«æ—¥å¿—ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/structlog_config.py:288:21
    |
286 |     Args:
287 |         message: æ—¥å¿—æ¶ˆæ¯ã€‚
288 |         module: æ¨¡å—åç§°ï¼Œé»˜è®¤ä¸º 'app'ã€‚
    |                         ^^
289 |         exception: å¯é€‰çš„å¼‚å¸¸å¯¹è±¡ã€‚
290 |         **kwargs: é¢å¤–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚
    |

ANN003 Missing type annotation for `**kwargs`
   --> app/utils/structlog_config.py:306:86
    |
306 | def log_error(message: str, module: str = "app", exception: Exception | None = None, **kwargs) -> None:
    |                                                                                      ^^^^^^^^
307 |     """è®°å½•é”™è¯¯çº§åˆ«æ—¥å¿—ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/structlog_config.py:311:21
    |
309 |     Args:
310 |         message: æ—¥å¿—æ¶ˆæ¯ã€‚
311 |         module: æ¨¡å—åç§°ï¼Œé»˜è®¤ä¸º 'app'ã€‚
    |                         ^^
312 |         exception: å¯é€‰çš„å¼‚å¸¸å¯¹è±¡ï¼Œä¼šè®°å½•å †æ ˆä¿¡æ¯ã€‚
313 |         **kwargs: é¢å¤–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/structlog_config.py:312:27
    |
310 |         message: æ—¥å¿—æ¶ˆæ¯ã€‚
311 |         module: æ¨¡å—åç§°ï¼Œé»˜è®¤ä¸º 'app'ã€‚
312 |         exception: å¯é€‰çš„å¼‚å¸¸å¯¹è±¡ï¼Œä¼šè®°å½•å †æ ˆä¿¡æ¯ã€‚
    |                                  ^^
313 |         **kwargs: é¢å¤–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚
    |

ANN003 Missing type annotation for `**kwargs`
   --> app/utils/structlog_config.py:332:89
    |
332 | def log_critical(message: str, module: str = "app", exception: Exception | None = None, **kwargs) -> None:
    |                                                                                         ^^^^^^^^
333 |     """è®°å½•ä¸¥é‡é”™è¯¯çº§åˆ«æ—¥å¿—ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/structlog_config.py:337:21
    |
335 |     Args:
336 |         message: æ—¥å¿—æ¶ˆæ¯ã€‚
337 |         module: æ¨¡å—åç§°ï¼Œé»˜è®¤ä¸º 'app'ã€‚
    |                         ^^
338 |         exception: å¯é€‰çš„å¼‚å¸¸å¯¹è±¡ï¼Œä¼šè®°å½•å †æ ˆä¿¡æ¯ã€‚
339 |         **kwargs: é¢å¤–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/structlog_config.py:338:27
    |
336 |         message: æ—¥å¿—æ¶ˆæ¯ã€‚
337 |         module: æ¨¡å—åç§°ï¼Œé»˜è®¤ä¸º 'app'ã€‚
338 |         exception: å¯é€‰çš„å¼‚å¸¸å¯¹è±¡ï¼Œä¼šè®°å½•å †æ ˆä¿¡æ¯ã€‚
    |                                  ^^
339 |         **kwargs: é¢å¤–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚
    |

ANN003 Missing type annotation for `**kwargs`
   --> app/utils/structlog_config.py:355:50
    |
355 | def log_debug(message: str, module: str = "app", **kwargs) -> None:
    |                                                  ^^^^^^^^
356 |     """è®°å½•è°ƒè¯•çº§åˆ«æ—¥å¿—ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/structlog_config.py:362:21
    |
360 |     Args:
361 |         message: æ—¥å¿—æ¶ˆæ¯ã€‚
362 |         module: æ¨¡å—åç§°ï¼Œé»˜è®¤ä¸º 'app'ã€‚
    |                         ^^
363 |         **kwargs: é¢å¤–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/structlog_config.py:446:19
    |
444 |     """å¢žå¼ºçš„é”™è¯¯å¤„ç†å™¨ã€‚.
445 |
446 |     å°†å¼‚å¸¸è½¬æ¢ä¸ºç»“æž„åŒ–çš„é”™è¯¯å“åº”ï¼ŒåŒ…å«é”™è¯¯åˆ†ç±»ã€ä¸¥é‡çº§åˆ«å’Œå»ºè®®ã€‚
    |                                 ^^
447 |
448 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/structlog_config.py:450:23
    |
448 |     Args:
449 |         error: å¼‚å¸¸å¯¹è±¡ã€‚
450 |         context: é”™è¯¯ä¸Šä¸‹æ–‡ï¼Œå¯é€‰ã€‚å¦‚æžœæœªæä¾›ä¼šè‡ªåŠ¨åˆ›å»ºã€‚
    |                            ^^
451 |         extra: é¢å¤–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¯é€‰ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/structlog_config.py:451:24
    |
449 |         error: å¼‚å¸¸å¯¹è±¡ã€‚
450 |         context: é”™è¯¯ä¸Šä¸‹æ–‡ï¼Œå¯é€‰ã€‚å¦‚æžœæœªæä¾›ä¼šè‡ªåŠ¨åˆ›å»ºã€‚
451 |         extra: é¢å¤–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¯é€‰ã€‚
    |                                ^^
452 |
453 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/structlog_config.py:454:19
    |
453 |     Returns:
454 |         ç»“æž„åŒ–çš„é”™è¯¯å“åº”å­—å…¸ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
    |                             ^^
455 |         - error_id: é”™è¯¯å”¯ä¸€æ ‡è¯†
456 |         - category: é”™è¯¯åˆ†ç±»
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/structlog_config.py:454:26
    |
453 |     Returns:
454 |         ç»“æž„åŒ–çš„é”™è¯¯å“åº”å­—å…¸ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
    |                                           ^^
455 |         - error_id: é”™è¯¯å”¯ä¸€æ ‡è¯†
456 |         - category: é”™è¯¯åˆ†ç±»
    |

ANN201 Missing return type annotation for public function `error_handler`
   --> app/utils/structlog_config.py:530:5
    |
530 | def error_handler(func: Callable):
    |     ^^^^^^^^^^^^^
531 |     """Flask è§†å›¾è£…é¥°å™¨ï¼Œç»Ÿä¸€æ•èŽ·å¼‚å¸¸å¹¶è¾“å‡ºç»“æž„åŒ–æ—¥å¿—ã€‚.
    |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/structlog_config.py:531:19
    |
530 | def error_handler(func: Callable):
531 |     """Flask è§†å›¾è£…é¥°å™¨ï¼Œç»Ÿä¸€æ•èŽ·å¼‚å¸¸å¹¶è¾“å‡ºç»“æž„åŒ–æ—¥å¿—ã€‚.
    |                        ^^
532 |
533 |     Args:
    |

PLC0415 `import` should be at the top-level of a file
   --> app/utils/structlog_config.py:540:5
    |
539 |     """
540 |     from functools import wraps
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
541 |
542 |     from flask import jsonify
    |

PLC0415 `import` should be at the top-level of a file
   --> app/utils/structlog_config.py:542:5
    |
540 |     from functools import wraps
541 |
542 |     from flask import jsonify
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
543 |
544 |     @wraps(func)
    |

ANN202 Missing return type annotation for private function `wrapper`
   --> app/utils/structlog_config.py:545:9
    |
544 |     @wraps(func)
545 |     def wrapper(*args, **kwargs):
    |         ^^^^^^^
546 |         try:
547 |             return func(*args, **kwargs)
    |
help: Add return type annotation

ANN002 Missing type annotation for `*args`
   --> app/utils/structlog_config.py:545:17
    |
544 |     @wraps(func)
545 |     def wrapper(*args, **kwargs):
    |                 ^^^^^
546 |         try:
547 |             return func(*args, **kwargs)
    |

ANN003 Missing type annotation for `**kwargs`
   --> app/utils/structlog_config.py:545:24
    |
544 |     @wraps(func)
545 |     def wrapper(*args, **kwargs):
    |                        ^^^^^^^^
546 |         try:
547 |             return func(*args, **kwargs)
    |

BLE001 Do not catch blind exception: `Exception`
   --> app/utils/structlog_config.py:548:16
    |
546 |         try:
547 |             return func(*args, **kwargs)
548 |         except Exception as error:
    |                ^^^^^^^^^
549 |             context = ErrorContext(error)
550 |             payload = enhanced_error_handler(error, context)
    |

D205 1 blank line required between summary line and description
 --> app/utils/time_utils.py:1:1
  |
1 | / """ç»Ÿä¸€æ—¶é—´å¤„ç†å·¥å…·æ¨¡å—
2 | | åŸºäºŽPython 3.9+çš„zoneinfoæ¨¡å—ï¼Œæä¾›ä¸€è‡´çš„æ—¶é—´å¤„ç†åŠŸèƒ½.
3 | | """
  | |___^
4 |
5 |   from datetime import UTC, date, datetime
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/utils/time_utils.py:2:25
  |
1 | """ç»Ÿä¸€æ—¶é—´å¤„ç†å·¥å…·æ¨¡å—
2 | åŸºäºŽPython 3.9+çš„zoneinfoæ¨¡å—ï¼Œæä¾›ä¸€è‡´çš„æ—¶é—´å¤„ç†åŠŸèƒ½.
  |                              ^^
3 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/time_utils.py:40:16
   |
38 |     """ç»Ÿä¸€æ—¶é—´å¤„ç†å·¥å…·ç±»ã€‚.
39 |
40 |     æä¾›ä¸€è‡´çš„æ—¶é—´å¤„ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ—¶åŒºè½¬æ¢ã€æ—¶é—´æ ¼å¼åŒ–ã€
   |                           ^^
41 |     ç›¸å¯¹æ—¶é—´è®¡ç®—ç­‰ã€‚åŸºäºŽ Python 3.9+ çš„ zoneinfo æ¨¡å—ã€‚
42 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/time_utils.py:69:23
   |
68 |         Args:
69 |             dt: å¾…è½¬æ¢çš„æ—¶é—´ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€date æˆ– datetime å¯¹è±¡ã€‚
   |                             ^^
70 |
71 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/time_utils.py:72:23
   |
71 |         Returns:
72 |             è½¬æ¢åŽçš„ä¸­å›½æ—¶åŒºæ—¶é—´ï¼Œè½¬æ¢å¤±è´¥æ—¶è¿”å›ž Noneã€‚
   |                                 ^^
73 |
74 |         """
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/time_utils.py:88:27
   |
87 |             if dt.tzinfo is None:
88 |                 # å¦‚æžœæ²¡æœ‰æ—¶åŒºä¿¡æ¯ï¼Œå‡è®¾ä¸ºUTC
   |                                   ^^
89 |                 dt = dt.replace(tzinfo=UTC_TZ)
   |

PLC0415 `import` should be at the top-level of a file
  --> app/utils/time_utils.py:93:13
   |
91 |             return dt.astimezone(CHINA_TZ)
92 |         except (ValueError, TypeError) as e:
93 |             from app.utils.structlog_config import get_system_logger
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
94 |
95 |             get_system_logger().warning(f"æ—¶é—´è½¬æ¢é”™è¯¯: {e}")
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/time_utils.py:103:23
    |
102 |         Args:
103 |             dt: å¾…è½¬æ¢çš„æ—¶é—´ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€date æˆ– datetime å¯¹è±¡ã€‚
    |                             ^^
104 |
105 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/time_utils.py:106:26
    |
105 |         Returns:
106 |             è½¬æ¢åŽçš„ UTC æ—¶åŒºæ—¶é—´ï¼Œè½¬æ¢å¤±è´¥æ—¶è¿”å›ž Noneã€‚
    |                                  ^^
107 |
108 |         """
    |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/time_utils.py:121:27
    |
120 |             if dt.tzinfo is None:
121 |                 # å¦‚æžœæ²¡æœ‰æ—¶åŒºä¿¡æ¯ï¼Œå‡è®¾ä¸ºä¸­å›½æ—¶é—´
    |                                   ^^
122 |                 dt = dt.replace(tzinfo=CHINA_TZ)
    |

PLC0415 `import` should be at the top-level of a file
   --> app/utils/time_utils.py:126:13
    |
124 |             return dt.astimezone(UTC_TZ)
125 |         except (ValueError, TypeError) as e:
126 |             from app.utils.structlog_config import get_system_logger
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
127 |
128 |             get_system_logger().warning(f"æ—¶é—´è½¬æ¢é”™è¯¯: {e}")
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/time_utils.py:139:32
    |
137 |         Args:
138 |             dt: å¾…æ ¼å¼åŒ–çš„æ—¶é—´ã€‚
139 |             format_str: æ—¶é—´æ ¼å¼å­—ç¬¦ä¸²ï¼Œé»˜è®¤ä¸º '%Y-%m-%d %H:%M:%S'ã€‚
    |                                       ^^
140 |
141 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/time_utils.py:142:23
    |
141 |         Returns:
142 |             æ ¼å¼åŒ–åŽçš„æ—¶é—´å­—ç¬¦ä¸²ï¼Œå¤±è´¥æ—¶è¿”å›ž '-'ã€‚
    |                                 ^^
143 |
144 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/time_utils.py:160:38
    |
158 |         Args:
159 |             dt: å¾…æ ¼å¼åŒ–çš„æ—¥æœŸæ—¶é—´å¯¹è±¡æˆ– ISO å­—ç¬¦ä¸²ã€‚
160 |             format_str: strftime å…¼å®¹æ ¼å¼ï¼Œé»˜è®¤ä¸º `%Y-%m-%d %H:%M:%S`ã€‚
    |                                          ^^
161 |
162 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/utils/time_utils.py:163:31
    |
162 |         Returns:
163 |             æˆåŠŸæ—¶è¿”å›žæ ¼å¼åŒ–åŽçš„ UTC å­—ç¬¦ä¸²ï¼›è½¬æ¢å¤±è´¥æ—¶è¿”å›ž `-`ã€‚
    |                                            ^^
164 |
165 |         """
    |

PLR0911 Too many return statements (7 > 6)
   --> app/utils/time_utils.py:176:9
    |
175 |     @staticmethod
176 |     def get_relative_time(dt: str | date | datetime | None) -> str:
    |         ^^^^^^^^^^^^^^^^^
177 |         """èŽ·å–ç›¸å¯¹æ—¶é—´æè¿°ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/time_utils.py:179:26
    |
177 |         """èŽ·å–ç›¸å¯¹æ—¶é—´æè¿°ã€‚.
178 |
179 |         å°†æ—¶é—´è½¬æ¢ä¸ºäººç±»å¯è¯»çš„ç›¸å¯¹æ—¶é—´æè¿°ï¼Œå¦‚"åˆšåˆš"ã€"5åˆ†é’Ÿå‰"ã€"2å°æ—¶å‰"ç­‰ã€‚
    |                                           ^^
180 |
181 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/time_utils.py:185:22
    |
184 |         Returns:
185 |             ç›¸å¯¹æ—¶é—´æè¿°å­—ç¬¦ä¸²ï¼Œå¤±è´¥æ—¶è¿”å›ž '-'ã€‚
    |                               ^^
186 |
187 |         """
    |

PLR2004 Magic value used in comparison, consider replacing `60` with a constant variable
   --> app/utils/time_utils.py:196:39
    |
194 |             diff = now - china_dt
195 |
196 |             if diff.total_seconds() < 60:
    |                                       ^^
197 |                 return "åˆšåˆš"
198 |             if diff.total_seconds() < TimeConstants.ONE_HOUR:
    |

PLR2004 Magic value used in comparison, consider replacing `7` with a constant variable
   --> app/utils/time_utils.py:204:28
    |
202 |                 hours = int(diff.total_seconds() / TimeConstants.ONE_HOUR)
203 |                 return f"{hours}å°æ—¶å‰"
204 |             if diff.days < 7:
    |                            ^
205 |                 return f"{diff.days}å¤©å‰"
206 |             return TimeUtils.format_china_time(china_dt)
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/time_utils.py:212:24
    |
210 |     @staticmethod
211 |     def is_today(dt: str | date | datetime | None) -> bool:
212 |         """åˆ¤æ–­ç»™å®šæ—¶é—´æ˜¯å¦å±žäºŽä»Šå¤©ï¼ˆä»¥ä¸­å›½æ—¶åŒºä¸ºå‡†ï¼‰ã€‚.
    |                                    ^^
213 |
214 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/time_utils.py:212:32
    |
210 |     @staticmethod
211 |     def is_today(dt: str | date | datetime | None) -> bool:
212 |         """åˆ¤æ–­ç»™å®šæ—¶é—´æ˜¯å¦å±žäºŽä»Šå¤©ï¼ˆä»¥ä¸­å›½æ—¶åŒºä¸ºå‡†ï¼‰ã€‚.
    |                                                    ^^
213 |
214 |         Args:
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/utils/time_utils.py:218:28
    |
217 |         Returns:
218 |             True è¡¨ç¤ºåœ¨å½“å‰ä¸­å›½æ—¥æœŸå†…ï¼›æ— æ³•è§£æžæˆ–ä¸å±žäºŽä»Šå¤©åˆ™ä¸º Falseã€‚
    |                                      ^^
219 |
220 |         """
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/time_utils.py:236:28
    |
235 |         Args:
236 |             hours: å‘å‰è¿½æº¯çš„å°æ—¶æ•°ï¼Œé»˜è®¤ 24 å°æ—¶ã€‚
    |                                    ^^
237 |
238 |         Returns:
    |

PLR2004 Magic value used in comparison, consider replacing `24` with a constant variable
   --> app/utils/time_utils.py:244:20
    |
242 |         now = TimeUtils.now_china()
243 |         start = now.replace(hour=0, minute=0, second=0, microsecond=0)
244 |         if hours < 24:
    |                    ^^
245 |             start = now.replace(hour=now.hour - hours, minute=0, second=0, microsecond=0)
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/utils/time_utils.py:262:22
    |
261 |         Returns:
262 |             ISO æ ¼å¼å­—ç¬¦ä¸²ï¼›è‹¥æ— æ³•è½¬æ¢åˆ™è¿”å›ž Noneã€‚
    |                           ^^
263 |
264 |         """
    |

TRY300 Consider moving this statement to an `else` block
   --> app/utils/time_utils.py:275:13
    |
273 |             if isinstance(dt, date):
274 |                 return dt.isoformat()
275 |             return None
    |             ^^^^^^^^^^^
276 |         except (ValueError, TypeError):
277 |             return None
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> app/utils/time_utils.py:287:5
    |
287 | # å¸¸é‡ï¼ˆå‘åŽå…¼å®¹ï¼‰
    |       ^^
288 | # UTC_TZ å·²åœ¨æ–‡ä»¶é¡¶éƒ¨å®šä¹‰
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> app/utils/time_utils.py:287:10
    |
287 | # å¸¸é‡ï¼ˆå‘åŽå…¼å®¹ï¼‰
    |                 ^^
288 | # UTC_TZ å·²åœ¨æ–‡ä»¶é¡¶éƒ¨å®šä¹‰
    |

EXE001 Shebang is present but file is not executable
 --> app/utils/version_parser.py:1:1
  |
1 | #!/usr/bin/env python3
  | ^^^^^^^^^^^^^^^^^^^^^^
2 | """æ•°æ®åº“ç‰ˆæœ¬è§£æžå·¥å…·
3 | ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–ç®€æ´çš„ç‰ˆæœ¬ä¿¡æ¯.
  |

D205 1 blank line required between summary line and description
 --> app/utils/version_parser.py:2:1
  |
1 |   #!/usr/bin/env python3
2 | / """æ•°æ®åº“ç‰ˆæœ¬è§£æžå·¥å…·
3 | | ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–ç®€æ´çš„ç‰ˆæœ¬ä¿¡æ¯.
4 | | """
  | |___^
5 |
6 |   import re
  |
help: Insert single blank line

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> app/utils/version_parser.py:29:24
   |
28 |       # ç‰ˆæœ¬æå–æ­£åˆ™è¡¨è¾¾å¼
29 |       VERSION_PATTERNS = {
   |  ________________________^
30 | |         "mysql": [
31 | |             r"(\d+\.\d+\.\d+)",  # 8.0.32
32 | |             r"(\d+\.\d+)",  # 8.0
33 | |         ],
34 | |         "postgresql": [
35 | |             r"PostgreSQL\s+(\d+\.\d+)",  # PostgreSQL 13.4
36 | |             r"(\d+\.\d+)",  # 13.4
37 | |         ],
38 | |         "sqlserver": [
39 | |             r"Microsoft SQL Server \d+\s+\([^)]+\)\s+\([^)]+\)\s+-\s+(\d+\.\d+\.\d+\.\d+)",  # 14.0.3465.1
40 | |             r"(\d+\.\d+\.\d+\.\d+)",  # 14.0.3465.1
41 | |         ],
42 | |         "oracle": [
43 | |             r"Oracle Database \d+g Release (\d+\.\d+\.\d+\.\d+\.\d+)",  # Oracle Database 11g Release 11.2.0.1.0
44 | |             r"(\d+\.\d+\.\d+\.\d+\.\d+)",  # 11.2.0.1.0
45 | |         ],
46 | |     }
   | |_____^
47 |
48 |       @classmethod
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/version_parser.py:55:27
   |
54 |         Args:
55 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'mysql'ã€'postgresql'ã€'sqlserver'ã€'oracle'ã€‚
   |                                ^^
56 |             version_string: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ 'MySQL 8.0.32-community'ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/utils/version_parser.py:55:31
   |
54 |         Args:
55 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'mysql'ã€'postgresql'ã€'sqlserver'ã€'oracle'ã€‚
   |                                        ^^
56 |             version_string: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ 'MySQL 8.0.32-community'ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/version_parser.py:56:36
   |
54 |         Args:
55 |             db_type: æ•°æ®åº“ç±»åž‹ï¼Œå¯é€‰å€¼ï¼š'mysql'ã€'postgresql'ã€'sqlserver'ã€'oracle'ã€‚
56 |             version_string: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ 'MySQL 8.0.32-community'ã€‚
   |                                           ^^
57 |
58 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> app/utils/version_parser.py:59:22
   |
58 |         Returns:
59 |             åŒ…å«ä»¥ä¸‹å­—æ®µçš„å­—å…¸ï¼š
   |                               ^^
60 |             - main_version: ä¸»ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ '8.0'
61 |             - detailed_version: è¯¦ç»†ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ '8.0.32'
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/version_parser.py:60:33
   |
58 |         Returns:
59 |             åŒ…å«ä»¥ä¸‹å­—æ®µçš„å­—å…¸ï¼š
60 |             - main_version: ä¸»ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ '8.0'
   |                                     ^^
61 |             - detailed_version: è¯¦ç»†ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ '8.0.32'
62 |             - original: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/version_parser.py:61:38
   |
59 |             åŒ…å«ä»¥ä¸‹å­—æ®µçš„å­—å…¸ï¼š
60 |             - main_version: ä¸»ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ '8.0'
61 |             - detailed_version: è¯¦ç»†ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ '8.0.32'
   |                                           ^^
62 |             - original: åŽŸå§‹ç‰ˆæœ¬å­—ç¬¦ä¸²
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/version_parser.py:84:18
   |
82 |                 return {"main_version": main_version, "detailed_version": version, "original": version_string}
83 |
84 |         # å¦‚æžœæ²¡æœ‰åŒ¹é…åˆ°ï¼Œè¿”å›žåŽŸå§‹å­—ç¬¦ä¸²
   |                         ^^
85 |         return {
86 |             "main_version": "æœªçŸ¥",
   |

PLR2004 Magic value used in comparison, consider replacing `50` with a constant variable
  --> app/utils/version_parser.py:87:86
   |
85 |         return {
86 |             "main_version": "æœªçŸ¥",
87 |             "detailed_version": version_string[:50] + "..." if len(version_string) > 50 else version_string,
   |                                                                                      ^^
88 |             "original": version_string,
89 |         }
   |

C901 `_extract_main_version` is too complex (11 > 10)
  --> app/utils/version_parser.py:92:9
   |
91 |     @classmethod
92 |     def _extract_main_version(cls, version: str, db_type: str) -> str:
   |         ^^^^^^^^^^^^^^^^^^^^^
93 |         """æå–ä¸»ç‰ˆæœ¬å·ã€‚.
   |

PLR0911 Too many return statements (11 > 6)
  --> app/utils/version_parser.py:92:9
   |
91 |     @classmethod
92 |     def _extract_main_version(cls, version: str, db_type: str) -> str:
   |         ^^^^^^^^^^^^^^^^^^^^^
93 |         """æå–ä¸»ç‰ˆæœ¬å·ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/utils/version_parser.py:95:29
   |
93 |         """æå–ä¸»ç‰ˆæœ¬å·ã€‚.
94 |
95 |         æ ¹æ®æ•°æ®åº“ç±»åž‹ä»Žè¯¦ç»†ç‰ˆæœ¬å·ä¸­æå–ä¸»ç‰ˆæœ¬å·ï¼ˆé€šå¸¸æ˜¯å‰ä¸¤ä½ï¼‰ã€‚
   |                                                 ^^
96 |
97 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/utils/version_parser.py:95:36
   |
93 |         """æå–ä¸»ç‰ˆæœ¬å·ã€‚.
94 |
95 |         æ ¹æ®æ•°æ®åº“ç±»åž‹ä»Žè¯¦ç»†ç‰ˆæœ¬å·ä¸­æå–ä¸»ç‰ˆæœ¬å·ï¼ˆé€šå¸¸æ˜¯å‰ä¸¤ä½ï¼‰ã€‚
   |                                                               ^^
96 |
97 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/utils/version_parser.py:98:27
   |
97 |         Args:
98 |             version: è¯¦ç»†ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ '8.0.32' æˆ– '11.2.0.1.0'ã€‚
   |                                ^^
99 |             db_type: æ•°æ®åº“ç±»åž‹ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/version_parser.py:102:17
    |
101 |         Returns:
102 |             ä¸»ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ '8.0' æˆ– '11.2'ã€‚
    |                     ^^
103 |
104 |         Example:
    |

PLR2004 Magic value used in comparison, consider replacing `2` with a constant variable
   --> app/utils/version_parser.py:116:30
    |
114 |             # MySQL: 8.0.32 -> 8.0
115 |             parts = version.split(".")
116 |             if len(parts) >= 2:
    |                              ^
117 |                 return f"{parts[0]}.{parts[1]}"
118 |             return version
    |

PLR2004 Magic value used in comparison, consider replacing `2` with a constant variable
   --> app/utils/version_parser.py:123:30
    |
121 |             # PostgreSQL: 13.4 -> 13.4
122 |             parts = version.split(".")
123 |             if len(parts) >= 2:
    |                              ^
124 |                 return f"{parts[0]}.{parts[1]}"
125 |             return version
    |

PLR2004 Magic value used in comparison, consider replacing `2` with a constant variable
   --> app/utils/version_parser.py:130:30
    |
128 |             # SQL Server: 14.0.3465.1 -> 14.0
129 |             parts = version.split(".")
130 |             if len(parts) >= 2:
    |                              ^
131 |                 return f"{parts[0]}.{parts[1]}"
132 |             return version
    |

PLR2004 Magic value used in comparison, consider replacing `2` with a constant variable
   --> app/utils/version_parser.py:137:30
    |
135 |             # Oracle: 11.2.0.1.0 -> 11.2
136 |             parts = version.split(".")
137 |             if len(parts) >= 2:
    |                              ^
138 |                 return f"{parts[0]}.{parts[1]}"
139 |             return version
    |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> app/utils/version_parser.py:141:15
    |
139 |             return version
140 |
141 |         # é»˜è®¤æƒ…å†µï¼šå–å‰ä¸¤ä¸ªéƒ¨åˆ†
    |                   ^^
142 |         parts = version.split(".")
143 |         if len(parts) >= 2:
    |

PLR2004 Magic value used in comparison, consider replacing `2` with a constant variable
   --> app/utils/version_parser.py:143:26
    |
141 |         # é»˜è®¤æƒ…å†µï¼šå–å‰ä¸¤ä¸ªéƒ¨åˆ†
142 |         parts = version.split(".")
143 |         if len(parts) >= 2:
    |                          ^
144 |             return f"{parts[0]}.{parts[1]}"
145 |         return version
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/utils/version_parser.py:158:36
    |
157 |         Returns:
158 |             æ ¼å¼åŒ–åŽçš„ç‰ˆæœ¬å­—ç¬¦ä¸²ã€‚å¦‚æžœä¸»ç‰ˆæœ¬å’Œè¯¦ç»†ç‰ˆæœ¬ç›¸åŒï¼Œåªè¿”å›žä¸»ç‰ˆæœ¬ï¼›
    |                                                           ^^
159 |             å¦åˆ™è¿”å›ž 'ä¸»ç‰ˆæœ¬ (è¯¦ç»†ç‰ˆæœ¬)' æ ¼å¼ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
   --> app/utils/version_parser.py:158:43
    |
157 |         Returns:
158 |             æ ¼å¼åŒ–åŽçš„ç‰ˆæœ¬å­—ç¬¦ä¸²ã€‚å¦‚æžœä¸»ç‰ˆæœ¬å’Œè¯¦ç»†ç‰ˆæœ¬ç›¸åŒï¼Œåªè¿”å›žä¸»ç‰ˆæœ¬ï¼›
    |                                                                         ^^
159 |             å¦åˆ™è¿”å›ž 'ä¸»ç‰ˆæœ¬ (è¯¦ç»†ç‰ˆæœ¬)' æ ¼å¼ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> app/views/__init__.py:5:5
  |
3 | æä¾›è§†å›¾ç›¸å…³çš„è¾…åŠ©åŠŸèƒ½å’Œæ··å…¥ç±»ã€‚
4 |
5 | ä¸»è¦ç»„ä»¶ï¼š
  |         ^^
6 | - mixins: è§†å›¾æ··å…¥ç±»é›†åˆ
7 | """
  |

ANN202 Missing return type annotation for private function `_resolve_success_redirect`
  --> app/views/classification_forms.py:20:9
   |
18 |     form_definition = CLASSIFICATION_FORM_DEFINITION
19 |
20 |     def _resolve_success_redirect(self, instance):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^
21 |         """è§£æžæˆåŠŸåŽçš„é‡å®šå‘åœ°å€ã€‚.
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `instance`
  --> app/views/classification_forms.py:20:41
   |
18 |     form_definition = CLASSIFICATION_FORM_DEFINITION
19 |
20 |     def _resolve_success_redirect(self, instance):
   |                                         ^^^^^^^^
21 |         """è§£æžæˆåŠŸåŽçš„é‡å®šå‘åœ°å€ã€‚.
   |

ARG002 Unused method argument: `instance`
  --> app/views/classification_forms.py:20:41
   |
18 |     form_definition = CLASSIFICATION_FORM_DEFINITION
19 |
20 |     def _resolve_success_redirect(self, instance):
   |                                         ^^^^^^^^
21 |         """è§£æžæˆåŠŸåŽçš„é‡å®šå‘åœ°å€ã€‚.
   |

ANN202 Missing return type annotation for private function `_success_redirect_kwargs`
  --> app/views/classification_forms.py:32:9
   |
30 |         return url_for("account_classification.index")
31 |
32 |     def _success_redirect_kwargs(self, instance):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^
33 |         """èŽ·å–é‡å®šå‘çš„é¢å¤–å‚æ•°ã€‚.
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `instance`
  --> app/views/classification_forms.py:32:40
   |
30 |         return url_for("account_classification.index")
31 |
32 |     def _success_redirect_kwargs(self, instance):
   |                                        ^^^^^^^^
33 |         """èŽ·å–é‡å®šå‘çš„é¢å¤–å‚æ•°ã€‚.
   |

ARG002 Unused method argument: `instance`
  --> app/views/classification_forms.py:32:40
   |
30 |         return url_for("account_classification.index")
31 |
32 |     def _success_redirect_kwargs(self, instance):
   |                                        ^^^^^^^^
33 |         """èŽ·å–é‡å®šå‘çš„é¢å¤–å‚æ•°ã€‚.
   |

ANN001 Missing type annotation for function argument `instance`
  --> app/views/classification_forms.py:44:35
   |
42 |         return {}
43 |
44 |     def get_success_message(self, instance) -> str:
   |                                   ^^^^^^^^
45 |         """èŽ·å–æˆåŠŸæ¶ˆæ¯ã€‚.
   |

ARG002 Unused method argument: `instance`
  --> app/views/classification_forms.py:44:35
   |
42 |         return {}
43 |
44 |     def get_success_message(self, instance) -> str:
   |                                   ^^^^^^^^
45 |         """èŽ·å–æˆåŠŸæ¶ˆæ¯ã€‚.
   |

ANN202 Missing return type annotation for private function `_resolve_success_redirect`
  --> app/views/classification_forms.py:67:9
   |
65 |     form_definition = CLASSIFICATION_RULE_FORM_DEFINITION
66 |
67 |     def _resolve_success_redirect(self, instance):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^
68 |         """è§£æžæˆåŠŸåŽçš„é‡å®šå‘åœ°å€ã€‚.
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `instance`
  --> app/views/classification_forms.py:67:41
   |
65 |     form_definition = CLASSIFICATION_RULE_FORM_DEFINITION
66 |
67 |     def _resolve_success_redirect(self, instance):
   |                                         ^^^^^^^^
68 |         """è§£æžæˆåŠŸåŽçš„é‡å®šå‘åœ°å€ã€‚.
   |

ARG002 Unused method argument: `instance`
  --> app/views/classification_forms.py:67:41
   |
65 |     form_definition = CLASSIFICATION_RULE_FORM_DEFINITION
66 |
67 |     def _resolve_success_redirect(self, instance):
   |                                         ^^^^^^^^
68 |         """è§£æžæˆåŠŸåŽçš„é‡å®šå‘åœ°å€ã€‚.
   |

ANN001 Missing type annotation for function argument `instance`
  --> app/views/classification_forms.py:79:35
   |
77 |         return url_for("account_classification.index")
78 |
79 |     def get_success_message(self, instance) -> str:
   |                                   ^^^^^^^^
80 |         """èŽ·å–æˆåŠŸæ¶ˆæ¯ã€‚.
   |

ARG002 Unused method argument: `instance`
  --> app/views/classification_forms.py:79:35
   |
77 |         return url_for("account_classification.index")
78 |
79 |     def get_success_message(self, instance) -> str:
   |                                   ^^^^^^^^
80 |         """èŽ·å–æˆåŠŸæ¶ˆæ¯ã€‚.
   |

ANN202 Missing return type annotation for private function `_resolve_success_redirect`
  --> app/views/credential_forms.py:19:9
   |
17 |     form_definition = CREDENTIAL_FORM_DEFINITION
18 |
19 |     def _resolve_success_redirect(self, instance):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^
20 |         """è§£æžæˆåŠŸåŽçš„é‡å®šå‘åœ°å€ã€‚.
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `instance`
  --> app/views/credential_forms.py:19:41
   |
17 |     form_definition = CREDENTIAL_FORM_DEFINITION
18 |
19 |     def _resolve_success_redirect(self, instance):
   |                                         ^^^^^^^^
20 |         """è§£æžæˆåŠŸåŽçš„é‡å®šå‘åœ°å€ã€‚.
   |

ANN001 Missing type annotation for function argument `instance`
  --> app/views/credential_forms.py:33:35
   |
31 |         return super()._resolve_success_redirect(instance)
32 |
33 |     def get_success_message(self, instance) -> str:
   |                                   ^^^^^^^^
34 |         """èŽ·å–æˆåŠŸæ¶ˆæ¯ã€‚.
   |

ARG002 Unused method argument: `instance`
  --> app/views/credential_forms.py:33:35
   |
31 |         return super()._resolve_success_redirect(instance)
32 |
33 |     def get_success_message(self, instance) -> str:
   |                                   ^^^^^^^^
34 |         """èŽ·å–æˆåŠŸæ¶ˆæ¯ã€‚.
   |

RUF001 String contains ambiguous `ï¼` (FULLWIDTH EXCLAMATION MARK). Did you mean `!` (EXCLAMATION MARK)?
  --> app/views/credential_forms.py:44:27
   |
42 |         """
43 |         if request.view_args and request.view_args.get("credential_id"):
44 |             return "å‡­æ®æ›´æ–°æˆåŠŸï¼"
   |                                 ^^
45 |         return "å‡­æ®åˆ›å»ºæˆåŠŸï¼"
   |

RUF001 String contains ambiguous `ï¼` (FULLWIDTH EXCLAMATION MARK). Did you mean `!` (EXCLAMATION MARK)?
  --> app/views/credential_forms.py:45:23
   |
43 |         if request.view_args and request.view_args.get("credential_id"):
44 |             return "å‡­æ®æ›´æ–°æˆåŠŸï¼"
45 |         return "å‡­æ®åˆ›å»ºæˆåŠŸï¼"
   |                             ^^
   |

ANN202 Missing return type annotation for private function `_resolve_success_redirect`
  --> app/views/instance_forms.py:19:9
   |
17 |     form_definition = INSTANCE_FORM_DEFINITION
18 |
19 |     def _resolve_success_redirect(self, instance):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^
20 |         """è§£æžæˆåŠŸåŽçš„é‡å®šå‘åœ°å€ã€‚.
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `instance`
  --> app/views/instance_forms.py:19:41
   |
17 |     form_definition = INSTANCE_FORM_DEFINITION
18 |
19 |     def _resolve_success_redirect(self, instance):
   |                                         ^^^^^^^^
20 |         """è§£æžæˆåŠŸåŽçš„é‡å®šå‘åœ°å€ã€‚.
   |

ANN001 Missing type annotation for function argument `instance`
  --> app/views/instance_forms.py:33:35
   |
31 |         return super()._resolve_success_redirect(instance)
32 |
33 |     def get_success_message(self, instance) -> str:
   |                                   ^^^^^^^^
34 |         """èŽ·å–æˆåŠŸæ¶ˆæ¯ã€‚.
   |

ARG002 Unused method argument: `instance`
  --> app/views/instance_forms.py:33:35
   |
31 |         return super()._resolve_success_redirect(instance)
32 |
33 |     def get_success_message(self, instance) -> str:
   |                                   ^^^^^^^^
34 |         """èŽ·å–æˆåŠŸæ¶ˆæ¯ã€‚.
   |

RUF001 String contains ambiguous `ï¼` (FULLWIDTH EXCLAMATION MARK). Did you mean `!` (EXCLAMATION MARK)?
  --> app/views/instance_forms.py:44:27
   |
42 |         """
43 |         if request.view_args and (request.view_args.get("resource_id") or request.view_args.get("instance_id")):
44 |             return "å®žä¾‹æ›´æ–°æˆåŠŸï¼"
   |                                 ^^
45 |         return "å®žä¾‹åˆ›å»ºæˆåŠŸï¼"
   |

RUF001 String contains ambiguous `ï¼` (FULLWIDTH EXCLAMATION MARK). Did you mean `!` (EXCLAMATION MARK)?
  --> app/views/instance_forms.py:45:23
   |
43 |         if request.view_args and (request.view_args.get("resource_id") or request.view_args.get("instance_id")):
44 |             return "å®žä¾‹æ›´æ–°æˆåŠŸï¼"
45 |         return "å®žä¾‹åˆ›å»ºæˆåŠŸï¼"
   |                             ^^
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/views/mixins/__init__.py:3:12
  |
1 | """è§†å›¾æ··å…¥ç±»æ¨¡å—ã€‚.
2 |
3 | æä¾›å¯å¤ç”¨çš„è§†å›¾æ··å…¥ç±»ï¼Œç”¨äºŽæ‰©å±•è§†å›¾åŠŸèƒ½ã€‚
  |                       ^^
4 | """
  |

D205 1 blank line required between summary line and description
 --> app/views/mixins/resource_forms.py:1:1
  |
1 | / """é€šç”¨èµ„æºè¡¨å•è§†å›¾.
2 | | ------------------
3 | | é›†æˆ GET/POST é€»è¾‘ï¼Œä¾èµ– ResourceFormDefinition ä¸Ž BaseResourceServiceã€‚
4 | | """
  | |___^
5 |
6 |   from __future__ import annotations
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> app/views/mixins/resource_forms.py:3:15
  |
1 | """é€šç”¨èµ„æºè¡¨å•è§†å›¾.
2 | ------------------
3 | é›†æˆ GET/POST é€»è¾‘ï¼Œä¾èµ– ResourceFormDefinition ä¸Ž BaseResourceServiceã€‚
  |                   ^^
4 | """
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/views/mixins/resource_forms.py:30:22
   |
29 | class ResourceFormView(MethodView):
30 |     """é€šç”¨ GET/POST è§†å›¾ï¼Œå­ç±»åªéœ€è®¾ç½® form_definitionã€‚.
   |                          ^^
31 |
32 |     æä¾›ç»Ÿä¸€çš„èµ„æºè¡¨å•å¤„ç†é€»è¾‘ï¼ŒåŒ…æ‹¬ GET æ˜¾ç¤ºè¡¨å•å’Œ POST æäº¤è¡¨å•ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/views/mixins/resource_forms.py:32:18
   |
30 |     """é€šç”¨ GET/POST è§†å›¾ï¼Œå­ç±»åªéœ€è®¾ç½® form_definitionã€‚.
31 |
32 |     æä¾›ç»Ÿä¸€çš„èµ„æºè¡¨å•å¤„ç†é€»è¾‘ï¼ŒåŒ…æ‹¬ GET æ˜¾ç¤ºè¡¨å•å’Œ POST æäº¤è¡¨å•ã€‚
   |                               ^^
33 |     å­ç±»åªéœ€é…ç½® form_definition å³å¯ä½¿ç”¨ã€‚
   |

ANN003 Missing type annotation for `**kwargs`
  --> app/views/mixins/resource_forms.py:58:51
   |
56 |     # HTTP Methods
57 |     # ------------------------------------------------------------------ #
58 |     def get(self, resource_id: int | None = None, **kwargs) -> str:
   |                                                   ^^^^^^^^
59 |         """GET è¯·æ±‚å¤„ç†ï¼Œæ˜¾ç¤ºè¡¨å•ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/views/mixins/resource_forms.py:59:20
   |
57 |     # ------------------------------------------------------------------ #
58 |     def get(self, resource_id: int | None = None, **kwargs) -> str:
59 |         """GET è¯·æ±‚å¤„ç†ï¼Œæ˜¾ç¤ºè¡¨å•ã€‚.
   |                        ^^
60 |
61 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/views/mixins/resource_forms.py:62:31
   |
61 |         Args:
62 |             resource_id: èµ„æº IDï¼Œå¦‚æžœä¸º None åˆ™ä¸ºåˆ›å»ºæ¨¡å¼ã€‚
   |                                 ^^
63 |             **kwargs: é¢å¤–çš„å…³é”®å­—å‚æ•°ã€‚
   |

ANN003 Missing type annotation for `**kwargs`
  --> app/views/mixins/resource_forms.py:73:52
   |
71 |         return render_template(self.form_definition.template, **context)
72 |
73 |     def post(self, resource_id: int | None = None, **kwargs) -> str | Response:
   |                                                    ^^^^^^^^
74 |         """POST è¯·æ±‚å¤„ç†ï¼Œæäº¤è¡¨å•ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/views/mixins/resource_forms.py:74:21
   |
73 |     def post(self, resource_id: int | None = None, **kwargs) -> str | Response:
74 |         """POST è¯·æ±‚å¤„ç†ï¼Œæäº¤è¡¨å•ã€‚.
   |                         ^^
75 |
76 |         Args:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/views/mixins/resource_forms.py:77:31
   |
76 |         Args:
77 |             resource_id: èµ„æº IDï¼Œå¦‚æžœä¸º None åˆ™ä¸ºåˆ›å»ºæ¨¡å¼ã€‚
   |                                 ^^
78 |             **kwargs: é¢å¤–çš„å…³é”®å­—å‚æ•°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/views/mixins/resource_forms.py:81:23
   |
80 |         Returns:
81 |             æˆåŠŸæ—¶è¿”å›žé‡å®šå‘å“åº”ï¼Œå¤±è´¥æ—¶è¿”å›žæ¸²æŸ“çš„ HTML å­—ç¬¦ä¸²ã€‚
   |                                 ^^
82 |
83 |         """
   |

ANN202 Missing return type annotation for private function `_load_resource`
   --> app/views/mixins/resource_forms.py:102:9
    |
100 |     # Helpers
101 |     # ------------------------------------------------------------------ #
102 |     def _load_resource(self, resource_id: int | None):
    |         ^^^^^^^^^^^^^^
103 |         """åŠ è½½èµ„æºå¯¹è±¡ã€‚.
    |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/views/mixins/resource_forms.py:106:31
    |
105 |         Args:
106 |             resource_id: èµ„æº IDï¼Œå¦‚æžœä¸º None åˆ™è¿”å›ž Noneã€‚
    |                                 ^^
107 |
108 |         Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> app/views/mixins/resource_forms.py:119:20
    |
117 |         """è§£æžèµ„æº IDã€‚.
118 |
119 |         ä»Žå‚æ•°ä¸­æå–èµ„æº IDï¼Œæ”¯æŒå¤šç§å‘½åæ–¹å¼ã€‚
    |                            ^^
120 |
121 |         Args:
    |

ANN001 Missing type annotation for function argument `req`
   --> app/views/mixins/resource_forms.py:136:32
    |
134 |         return None
135 |
136 |     def _extract_payload(self, req) -> Mapping[str, Any]:
    |                                ^^^
137 |         """æå–è¯·æ±‚è´Ÿè½½æ•°æ®ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `resource`
   --> app/views/mixins/resource_forms.py:152:19
    |
150 |     def _build_context(
151 |         self,
152 |         resource: Any | None,
    |                   ^^^^^^^^^^
153 |         form_data: Mapping[str, Any] | None,
154 |         errors: str | None = None,
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `instance`
   --> app/views/mixins/resource_forms.py:185:51
    |
183 |         return base_context
184 |
185 |     def _resolve_success_redirect(self, instance: Any) -> str:
    |                                                   ^^^
186 |         """è§£æžæˆåŠŸåŽçš„é‡å®šå‘åœ°å€ã€‚.
    |

ARG002 Unused method argument: `instance`
   --> app/views/mixins/resource_forms.py:200:40
    |
198 |         return url_for(endpoint, **self._success_redirect_kwargs(instance))
199 |
200 |     def _success_redirect_kwargs(self, instance: Any) -> dict[str, Any]:
    |                                        ^^^^^^^^
201 |         """èŽ·å–é‡å®šå‘çš„é¢å¤–å‚æ•°ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `instance`
   --> app/views/mixins/resource_forms.py:200:50
    |
198 |         return url_for(endpoint, **self._success_redirect_kwargs(instance))
199 |
200 |     def _success_redirect_kwargs(self, instance: Any) -> dict[str, Any]:
    |                                                  ^^^
201 |         """èŽ·å–é‡å®šå‘çš„é¢å¤–å‚æ•°ã€‚.
    |

ARG002 Unused method argument: `instance`
   --> app/views/mixins/resource_forms.py:212:35
    |
210 |         return {}
211 |
212 |     def get_success_message(self, instance: Any) -> str:
    |                                   ^^^^^^^^
213 |         """èŽ·å–æˆåŠŸæ¶ˆæ¯ã€‚.
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `instance`
   --> app/views/mixins/resource_forms.py:212:45
    |
210 |         return {}
211 |
212 |     def get_success_message(self, instance: Any) -> str:
    |                                             ^^^
213 |         """èŽ·å–æˆåŠŸæ¶ˆæ¯ã€‚.
    |

ANN202 Missing return type annotation for private function `_load_resource`
  --> app/views/password_forms.py:19:9
   |
17 |     form_definition = CHANGE_PASSWORD_FORM_DEFINITION
18 |
19 |     def _load_resource(self, resource_id):
   |         ^^^^^^^^^^^^^^
20 |         """åŠ è½½ç”¨æˆ·èµ„æºã€‚.
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `resource_id`
  --> app/views/password_forms.py:19:30
   |
17 |     form_definition = CHANGE_PASSWORD_FORM_DEFINITION
18 |
19 |     def _load_resource(self, resource_id):
   |                              ^^^^^^^^^^^
20 |         """åŠ è½½ç”¨æˆ·èµ„æºã€‚.
   |

ARG002 Unused method argument: `resource_id`
  --> app/views/password_forms.py:19:30
   |
17 |     form_definition = CHANGE_PASSWORD_FORM_DEFINITION
18 |
19 |     def _load_resource(self, resource_id):
   |                              ^^^^^^^^^^^
20 |         """åŠ è½½ç”¨æˆ·èµ„æºã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/views/password_forms.py:23:31
   |
22 |         Args:
23 |             resource_id: èµ„æº IDï¼ˆæœªä½¿ç”¨ï¼‰ã€‚
   |                                 ^^
24 |
25 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/views/password_forms.py:23:35
   |
22 |         Args:
23 |             resource_id: èµ„æº IDï¼ˆæœªä½¿ç”¨ï¼‰ã€‚
   |                                         ^^
24 |
25 |         Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/views/password_forms.py:26:21
   |
25 |         Returns:
26 |             å½“å‰ç™»å½•ç”¨æˆ·å¯¹è±¡ï¼Œå¦‚æžœæœªç™»å½•åˆ™è¿”å›ž Noneã€‚
   |                             ^^
27 |
28 |         """
   |

A004 Import `SystemError` is shadowing a Python builtin
 --> app/views/scheduler_forms.py:7:39
  |
5 | from flask import Response, request
6 |
7 | from app.errors import NotFoundError, SystemError, ValidationError
  |                                       ^^^^^^^^^^^
8 | from app.forms.definitions.scheduler_job import SCHEDULER_JOB_FORM_DEFINITION
9 | from app.utils.response_utils import jsonify_unified_error_message, jsonify_unified_success
  |

ANN002 Missing type annotation for `*args`
  --> app/views/scheduler_forms.py:23:19
   |
21 |     form_definition = SCHEDULER_JOB_FORM_DEFINITION
22 |
23 |     def get(self, *args, **kwargs) -> Never:
   |                   ^^^^^
24 |         """GET è¯·æ±‚å¤„ç†ï¼ˆä¸æ”¯æŒï¼‰ã€‚.
   |

ARG002 Unused method argument: `args`
  --> app/views/scheduler_forms.py:23:20
   |
21 |     form_definition = SCHEDULER_JOB_FORM_DEFINITION
22 |
23 |     def get(self, *args, **kwargs) -> Never:
   |                    ^^^^
24 |         """GET è¯·æ±‚å¤„ç†ï¼ˆä¸æ”¯æŒï¼‰ã€‚.
   |

ANN003 Missing type annotation for `**kwargs`
  --> app/views/scheduler_forms.py:23:26
   |
21 |     form_definition = SCHEDULER_JOB_FORM_DEFINITION
22 |
23 |     def get(self, *args, **kwargs) -> Never:
   |                          ^^^^^^^^
24 |         """GET è¯·æ±‚å¤„ç†ï¼ˆä¸æ”¯æŒï¼‰ã€‚.
   |

ARG002 Unused method argument: `kwargs`
  --> app/views/scheduler_forms.py:23:28
   |
21 |     form_definition = SCHEDULER_JOB_FORM_DEFINITION
22 |
23 |     def get(self, *args, **kwargs) -> Never:
   |                            ^^^^^^
24 |         """GET è¯·æ±‚å¤„ç†ï¼ˆä¸æ”¯æŒï¼‰ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/views/scheduler_forms.py:24:20
   |
23 |     def get(self, *args, **kwargs) -> Never:
24 |         """GET è¯·æ±‚å¤„ç†ï¼ˆä¸æ”¯æŒï¼‰ã€‚.
   |                        ^^
25 |
26 |         Raises:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/views/scheduler_forms.py:24:24
   |
23 |     def get(self, *args, **kwargs) -> Never:
24 |         """GET è¯·æ±‚å¤„ç†ï¼ˆä¸æ”¯æŒï¼‰ã€‚.
   |                                ^^
25 |
26 |         Raises:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/views/scheduler_forms.py:27:32
   |
26 |         Raises:
27 |             NotFoundError: å§‹ç»ˆæŠ›å‡ºï¼Œå› ä¸ºä¸æ”¯æŒæ­¤æ“ä½œã€‚
   |                                    ^^
28 |
29 |         Returns:
   |

ANN002 Missing type annotation for `*args`
  --> app/views/scheduler_forms.py:36:20
   |
34 |         raise NotFoundError(msg)
35 |
36 |     def post(self, *args, **kwargs) -> Never:
   |                    ^^^^^
37 |         """POST è¯·æ±‚å¤„ç†ï¼ˆä¸æ”¯æŒï¼‰ã€‚.
   |

ARG002 Unused method argument: `args`
  --> app/views/scheduler_forms.py:36:21
   |
34 |         raise NotFoundError(msg)
35 |
36 |     def post(self, *args, **kwargs) -> Never:
   |                     ^^^^
37 |         """POST è¯·æ±‚å¤„ç†ï¼ˆä¸æ”¯æŒï¼‰ã€‚.
   |

ANN003 Missing type annotation for `**kwargs`
  --> app/views/scheduler_forms.py:36:27
   |
34 |         raise NotFoundError(msg)
35 |
36 |     def post(self, *args, **kwargs) -> Never:
   |                           ^^^^^^^^
37 |         """POST è¯·æ±‚å¤„ç†ï¼ˆä¸æ”¯æŒï¼‰ã€‚.
   |

ARG002 Unused method argument: `kwargs`
  --> app/views/scheduler_forms.py:36:29
   |
34 |         raise NotFoundError(msg)
35 |
36 |     def post(self, *args, **kwargs) -> Never:
   |                             ^^^^^^
37 |         """POST è¯·æ±‚å¤„ç†ï¼ˆä¸æ”¯æŒï¼‰ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> app/views/scheduler_forms.py:37:21
   |
36 |     def post(self, *args, **kwargs) -> Never:
37 |         """POST è¯·æ±‚å¤„ç†ï¼ˆä¸æ”¯æŒï¼‰ã€‚.
   |                         ^^
38 |
39 |         Raises:
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> app/views/scheduler_forms.py:37:25
   |
36 |     def post(self, *args, **kwargs) -> Never:
37 |         """POST è¯·æ±‚å¤„ç†ï¼ˆä¸æ”¯æŒï¼‰ã€‚.
   |                                 ^^
38 |
39 |         Raises:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/views/scheduler_forms.py:40:32
   |
39 |         Raises:
40 |             NotFoundError: å§‹ç»ˆæŠ›å‡ºï¼Œå› ä¸ºä¸æ”¯æŒæ­¤æ“ä½œã€‚
   |                                    ^^
41 |
42 |         Returns:
   |

ANN003 Missing type annotation for `**kwargs`
  --> app/views/scheduler_forms.py:49:32
   |
47 |         raise NotFoundError(msg)
48 |
49 |     def put(self, job_id: str, **kwargs) -> Response:
   |                                ^^^^^^^^
50 |         """PUT è¯·æ±‚å¤„ç†ï¼Œæ›´æ–°å®šæ—¶ä»»åŠ¡ã€‚.
   |

ARG002 Unused method argument: `kwargs`
  --> app/views/scheduler_forms.py:49:34
   |
47 |         raise NotFoundError(msg)
48 |
49 |     def put(self, job_id: str, **kwargs) -> Response:
   |                                  ^^^^^^
50 |         """PUT è¯·æ±‚å¤„ç†ï¼Œæ›´æ–°å®šæ—¶ä»»åŠ¡ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> app/views/scheduler_forms.py:50:20
   |
49 |     def put(self, job_id: str, **kwargs) -> Response:
50 |         """PUT è¯·æ±‚å¤„ç†ï¼Œæ›´æ–°å®šæ—¶ä»»åŠ¡ã€‚.
   |                        ^^
51 |
52 |         Args:
   |

BLE001 Do not catch blind exception: `Exception`
  --> app/views/scheduler_forms.py:78:16
   |
76 |         except (NotFoundError, ValidationError, SystemError):
77 |             raise
78 |         except Exception as exc:
   |                ^^^^^^^^^
79 |             return jsonify_unified_error_message(message="ä»»åŠ¡æ›´æ–°å¤±è´¥", extra={"exception": str(exc)})
   |

ANN202 Missing return type annotation for private function `_load_resource`
  --> app/views/scheduler_forms.py:81:9
   |
79 |             return jsonify_unified_error_message(message="ä»»åŠ¡æ›´æ–°å¤±è´¥", extra={"exception": str(exc)})
80 |
81 |     def _load_resource(self, job_id):
   |         ^^^^^^^^^^^^^^
82 |         """åŠ è½½ä»»åŠ¡èµ„æºã€‚.
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `job_id`
  --> app/views/scheduler_forms.py:81:30
   |
79 |             return jsonify_unified_error_message(message="ä»»åŠ¡æ›´æ–°å¤±è´¥", extra={"exception": str(exc)})
80 |
81 |     def _load_resource(self, job_id):
   |                              ^^^^^^
82 |         """åŠ è½½ä»»åŠ¡èµ„æºã€‚.
   |

ANN202 Missing return type annotation for private function `_resolve_success_redirect`
  --> app/views/tag_forms.py:19:9
   |
17 |     form_definition = TAG_FORM_DEFINITION
18 |
19 |     def _resolve_success_redirect(self, instance):
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^
20 |         """è§£æžæˆåŠŸåŽçš„é‡å®šå‘åœ°å€ã€‚.
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `instance`
  --> app/views/tag_forms.py:19:41
   |
17 |     form_definition = TAG_FORM_DEFINITION
18 |
19 |     def _resolve_success_redirect(self, instance):
   |                                         ^^^^^^^^
20 |         """è§£æžæˆåŠŸåŽçš„é‡å®šå‘åœ°å€ã€‚.
   |

ANN001 Missing type annotation for function argument `instance`
  --> app/views/tag_forms.py:33:35
   |
31 |         return super()._resolve_success_redirect(instance)
32 |
33 |     def get_success_message(self, instance) -> str:
   |                                   ^^^^^^^^
34 |         """èŽ·å–æˆåŠŸæ¶ˆæ¯ã€‚.
   |

ARG002 Unused method argument: `instance`
  --> app/views/tag_forms.py:33:35
   |
31 |         return super()._resolve_success_redirect(instance)
32 |
33 |     def get_success_message(self, instance) -> str:
   |                                   ^^^^^^^^
34 |         """èŽ·å–æˆåŠŸæ¶ˆæ¯ã€‚.
   |

ANN001 Missing type annotation for function argument `instance`
  --> app/views/user_forms.py:19:35
   |
17 |     form_definition = USER_FORM_DEFINITION
18 |
19 |     def get_success_message(self, instance) -> str:
   |                                   ^^^^^^^^
20 |         """èŽ·å–æˆåŠŸæ¶ˆæ¯ã€‚.
   |

ARG002 Unused method argument: `instance`
  --> app/views/user_forms.py:19:35
   |
17 |     form_definition = USER_FORM_DEFINITION
18 |
19 |     def get_success_message(self, instance) -> str:
   |                                   ^^^^^^^^
20 |         """èŽ·å–æˆåŠŸæ¶ˆæ¯ã€‚.
   |

INP001 File `examples/logging/unified_logging_example.py` is part of an implicit namespace package. Add an `__init__.py`.
--> examples/logging/unified_logging_example.py:1:1

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> examples/logging/unified_logging_example.py:3:5
  |
1 | """Unified logging ç¤ºä¾‹è„šæœ¬ã€‚.
2 |
3 | æ‰§è¡Œæ–¹å¼ï¼š
  |         ^^
4 |     $ python examples/logging/unified_logging_example.py
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> examples/logging/unified_logging_example.py:6:34
  |
4 |     $ python examples/logging/unified_logging_example.py
5 |
6 | ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨ä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨ç»Ÿä¸€çš„ structlog æ—¥å¿—å·¥å…·ï¼ŒåŒ…æ‹¬ï¼š
  |                                                        ^^
7 | 1. ç»‘å®š/æ¸…ç†å…¨å±€ä¸Šä¸‹æ–‡
8 | 2. ç»‘å®šè¯·æ±‚ä¸Šä¸‹æ–‡ï¼ˆrequest_idã€ç”¨æˆ·ä¿¡æ¯ç­‰ï¼‰
  |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> examples/logging/unified_logging_example.py:6:37
  |
4 |     $ python examples/logging/unified_logging_example.py
5 |
6 | ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨ä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨ç»Ÿä¸€çš„ structlog æ—¥å¿—å·¥å…·ï¼ŒåŒ…æ‹¬ï¼š
  |                                                              ^^
7 | 1. ç»‘å®š/æ¸…ç†å…¨å±€ä¸Šä¸‹æ–‡
8 | 2. ç»‘å®šè¯·æ±‚ä¸Šä¸‹æ–‡ï¼ˆrequest_idã€ç”¨æˆ·ä¿¡æ¯ç­‰ï¼‰
  |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> examples/logging/unified_logging_example.py:8:11
   |
 6 | ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨ä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨ç»Ÿä¸€çš„ structlog æ—¥å¿—å·¥å…·ï¼ŒåŒ…æ‹¬ï¼š
 7 | 1. ç»‘å®š/æ¸…ç†å…¨å±€ä¸Šä¸‹æ–‡
 8 | 2. ç»‘å®šè¯·æ±‚ä¸Šä¸‹æ–‡ï¼ˆrequest_idã€ç”¨æˆ·ä¿¡æ¯ç­‰ï¼‰
   |                  ^^
 9 | 3. ä½¿ç”¨ log_info/log_warning/log_error ç­‰å¿«æ·æ–¹æ³•
10 | 4. ç»“åˆè‡ªå®šä¹‰å¼‚å¸¸è®°å½•ç»“æž„åŒ–é”™è¯¯æ—¥å¿—
   |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> examples/logging/unified_logging_example.py:8:28
   |
 6 | ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨ä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨ç»Ÿä¸€çš„ structlog æ—¥å¿—å·¥å…·ï¼ŒåŒ…æ‹¬ï¼š
 7 | 1. ç»‘å®š/æ¸…ç†å…¨å±€ä¸Šä¸‹æ–‡
 8 | 2. ç»‘å®šè¯·æ±‚ä¸Šä¸‹æ–‡ï¼ˆrequest_idã€ç”¨æˆ·ä¿¡æ¯ç­‰ï¼‰
   |                                          ^^
 9 | 3. ä½¿ç”¨ log_info/log_warning/log_error ç­‰å¿«æ·æ–¹æ³•
10 | 4. ç»“åˆè‡ªå®šä¹‰å¼‚å¸¸è®°å½•ç»“æž„åŒ–é”™è¯¯æ—¥å¿—
   |

S311 Standard pseudo-random generators are not suitable for cryptographic purposes
  --> examples/logging/unified_logging_example.py:43:15
   |
41 |     """æ¨¡æ‹Ÿä¸€æ¬¡è¯·æ±‚å¤„ç†ç”Ÿå‘½å‘¨æœŸ."""
42 |     request_id = str(uuid.uuid4())
43 |     user_id = random.randint(1, 100)
   |               ^^^^^^^^^^^^^^^^^^^^^^
44 |
45 |     bind_request_context(request_id=request_id, user_id=user_id)
   |

S311 Standard pseudo-random generators are not suitable for cryptographic purposes
  --> examples/logging/unified_logging_example.py:50:37
   |
48 |     try:
49 |         # æ¨¡æ‹Ÿä¸šåŠ¡æ ¡éªŒ
50 |         validate_payload({"amount": random.choice([10, -5, 20])})
   |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
51 |
52 |         # æ¨¡æ‹Ÿä¸šåŠ¡é€»è¾‘ä¸Žå¤–éƒ¨è°ƒç”¨
   |

BLE001 Do not catch blind exception: `Exception`
  --> examples/logging/unified_logging_example.py:65:12
   |
63 |             payload=exc.extra,
64 |         )
65 |     except Exception as exc:
   |            ^^^^^^^^^
66 |         log_error(
67 |             "è¯·æ±‚å¤„ç†å‘ç”Ÿæœªé¢„æœŸé”™è¯¯",
   |

D103 Missing docstring in public function
  --> examples/logging/unified_logging_example.py:94:5
   |
94 | def main() -> None:
   |     ^^^^
95 |     bootstrap_logging()
96 |     for path in ("/api/accounts", "/api/databases", "/api/aggregations"):
   |

INP001 File `examples/time/unified_time_example.py` is part of an implicit namespace package. Add an `__init__.py`.
--> examples/time/unified_time_example.py:1:1

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> examples/time/unified_time_example.py:3:5
  |
1 | """Unified time processing ç¤ºä¾‹è„šæœ¬ã€‚.
2 |
3 | æ‰§è¡Œæ–¹å¼ï¼š
  |         ^^
4 |     $ python examples/time/unified_time_example.py
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> examples/time/unified_time_example.py:6:25
  |
4 |     $ python examples/time/unified_time_example.py
5 |
6 | ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨ä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨ç»Ÿä¸€çš„æ—¶é—´å¤„ç†å·¥å…·ï¼ŒåŒ…æ‹¬ï¼š
  |                                                 ^^
7 | 1. ç»Ÿä¸€çš„æ—¶é—´èŽ·å–å’Œè½¬æ¢
8 | 2. ç»Ÿä¸€çš„æ—¶é—´æ ¼å¼åŒ–å’Œæ˜¾ç¤º
  |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> examples/time/unified_time_example.py:6:28
  |
4 |     $ python examples/time/unified_time_example.py
5 |
6 | ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨ä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨ç»Ÿä¸€çš„æ—¶é—´å¤„ç†å·¥å…·ï¼ŒåŒ…æ‹¬ï¼š
  |                                                       ^^
7 | 1. ç»Ÿä¸€çš„æ—¶é—´èŽ·å–å’Œè½¬æ¢
8 | 2. ç»Ÿä¸€çš„æ—¶é—´æ ¼å¼åŒ–å’Œæ˜¾ç¤º
  |

PLC0415 `import` should be at the top-level of a file
   --> examples/time/unified_time_example.py:209:5
    |
207 | def demonstrate_performance_considerations() -> None:
208 |     """æ¼”ç¤ºæ€§èƒ½è€ƒè™‘."""
209 |     import time as time_module
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^
210 |
211 |     # æµ‹è¯•æ‰¹é‡æ—¶é—´æ ¼å¼åŒ–æ€§èƒ½
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> examples/time/unified_time_example.py:230:11
    |
229 | def main() -> None:
230 |     """ä¸»å‡½æ•°ï¼šè¿è¡Œæ‰€æœ‰æ¼”ç¤º."""
    |              ^^
231 |     # è¿è¡Œæ‰€æœ‰æ¼”ç¤º
232 |     demonstrate_basic_time_operations()
    |

INP001 File `examples/validation/standard_api_templates.py` is part of an implicit namespace package. Add an `__init__.py`.
--> examples/validation/standard_api_templates.py:1:1

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> examples/validation/standard_api_templates.py:3:21
  |
1 | """æ ‡å‡†APIæŽ¥å£å®žçŽ°æ¨¡æ¿.
2 |
3 | è¿™äº›æ¨¡æ¿å±•ç¤ºäº†ç»Ÿä¸€éªŒè¯è§„èŒƒçš„æ ‡å‡†å®žçŽ°æ–¹å¼ï¼Œå¯ä»¥ä½œä¸ºå¼€å‘æ–°æŽ¥å£æˆ–é‡æž„æ—§æŽ¥å£çš„å‚è€ƒã€‚
  |                                         ^^
4 | """
  |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> examples/validation/standard_api_templates.py:18:15
   |
17 | # ============================================================================
18 | # æ¨¡æ¿1: JSONå†™æŽ¥å£ï¼ˆPOSTï¼‰
   |                    ^^
19 | # ============================================================================
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> examples/validation/standard_api_templates.py:18:20
   |
17 | # ============================================================================
18 | # æ¨¡æ¿1: JSONå†™æŽ¥å£ï¼ˆPOSTï¼‰
   |                          ^^
19 | # ============================================================================
   |

ANN201 Missing return type annotation for public function `create_resource`
  --> examples/validation/standard_api_templates.py:23:5
   |
21 | @blueprint.route("/api/resources", methods=["POST"])
22 | @create_required
23 | def create_resource():
   |     ^^^^^^^^^^^^^^^
24 |     """åˆ›å»ºèµ„æºæŽ¥å£æ¨¡æ¿.
   |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> examples/validation/standard_api_templates.py:26:10
   |
24 |     """åˆ›å»ºèµ„æºæŽ¥å£æ¨¡æ¿.
25 |
26 |     è£…é¥°å™¨é¡ºåºï¼š
   |               ^^
27 |     1. @create_required - éªŒè¯åˆ›å»ºæƒé™
28 |     """
   |

ERA001 Found commented-out code
  --> examples/validation/standard_api_templates.py:50:5
   |
49 |     # 4. ä¸šåŠ¡é€»è¾‘
50 |     # resource = Resource(**data)
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
51 |     # db.session.add(resource)
52 |     # db.session.commit()
   |
help: Remove commented-out code

ERA001 Found commented-out code
  --> examples/validation/standard_api_templates.py:51:5
   |
49 |     # 4. ä¸šåŠ¡é€»è¾‘
50 |     # resource = Resource(**data)
51 |     # db.session.add(resource)
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^
52 |     # db.session.commit()
   |
help: Remove commented-out code

ERA001 Found commented-out code
  --> examples/validation/standard_api_templates.py:52:5
   |
50 |     # resource = Resource(**data)
51 |     # db.session.add(resource)
52 |     # db.session.commit()
   |     ^^^^^^^^^^^^^^^^^^^^^
53 |
54 |     # 5. è¿”å›žæˆåŠŸå“åº”
   |
help: Remove commented-out code

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> examples/validation/standard_api_templates.py:62:12
   |
61 | # ============================================================================
62 | # æ¨¡æ¿2: æŸ¥è¯¢æŽ¥å£ï¼ˆGETï¼‰
   |                  ^^
63 | # ============================================================================
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> examples/validation/standard_api_templates.py:62:16
   |
61 | # ============================================================================
62 | # æ¨¡æ¿2: æŸ¥è¯¢æŽ¥å£ï¼ˆGETï¼‰
   |                       ^^
63 | # ============================================================================
   |

ANN201 Missing return type annotation for public function `list_resources`
  --> examples/validation/standard_api_templates.py:67:5
   |
65 | @blueprint.route("/api/resources")
66 | @view_required
67 | def list_resources():
   |     ^^^^^^^^^^^^^^
68 |     """æŸ¥è¯¢èµ„æºåˆ—è¡¨æŽ¥å£æ¨¡æ¿.
   |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> examples/validation/standard_api_templates.py:70:7
   |
68 |     """æŸ¥è¯¢èµ„æºåˆ—è¡¨æŽ¥å£æ¨¡æ¿.
69 |
70 |     ç‰¹ç‚¹ï¼š
   |         ^^
71 |     - ä½¿ç”¨ type å‚æ•°å®‰å…¨è½¬æ¢ç±»åž‹
72 |     - å‚æ•°éªŒè¯ä½¿ç”¨å¼‚å¸¸æŠ›å‡º
   |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> examples/validation/standard_api_templates.py:75:14
   |
73 |     - ç»Ÿä¸€çš„åˆ†é¡µå“åº”æ ¼å¼
74 |     """
75 |     # 1. èŽ·å–å‚æ•°ï¼ˆä½¿ç”¨ type å‚æ•°å®‰å…¨è½¬æ¢ï¼‰
   |                  ^^
76 |     page = request.args.get("page", 1, type=int)
77 |     per_page = request.args.get("per_page", 20, type=int)
   |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> examples/validation/standard_api_templates.py:75:29
   |
73 |     - ç»Ÿä¸€çš„åˆ†é¡µå“åº”æ ¼å¼
74 |     """
75 |     # 1. èŽ·å–å‚æ•°ï¼ˆä½¿ç”¨ type å‚æ•°å®‰å…¨è½¬æ¢ï¼‰
   |                                          ^^
76 |     page = request.args.get("page", 1, type=int)
77 |     per_page = request.args.get("per_page", 20, type=int)
   |

PLR2004 Magic value used in comparison, consider replacing `100` with a constant variable
  --> examples/validation/standard_api_templates.py:85:35
   |
83 |         msg = "é¡µç å¿…é¡»å¤§äºŽ0"
84 |         raise ValidationError(msg)
85 |     if per_page < 1 or per_page > 100:
   |                                   ^^^
86 |         msg = "æ¯é¡µæ•°é‡å¿…é¡»åœ¨1-100ä¹‹é—´"
87 |         raise ValidationError(msg)
   |

ERA001 Found commented-out code
  --> examples/validation/standard_api_templates.py:90:5
   |
89 |     # 3. æž„å»ºæŸ¥è¯¢
90 |     # query = Resource.query
   |     ^^^^^^^^^^^^^^^^^^^^^^^^
91 |     #
92 |     # if search:
   |
help: Remove commented-out code

ERA001 Found commented-out code
  --> examples/validation/standard_api_templates.py:93:5
   |
91 |     #
92 |     # if search:
93 |     #     query = query.filter(Resource.name.contains(search))
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
94 |     #
95 |     # if status:
   |
help: Remove commented-out code

ERA001 Found commented-out code
  --> examples/validation/standard_api_templates.py:96:5
   |
94 |     #
95 |     # if status:
96 |     #     query = query.filter(Resource.status == status)
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
97 |
98 |     # 4. åˆ†é¡µ
   |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:99:5
    |
 98 |     # 4. åˆ†é¡µ
 99 |     # pagination = query.paginate(
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
100 |     #     page=page,
101 |     #     per_page=per_page,
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:100:5
    |
 98 |     # 4. åˆ†é¡µ
 99 |     # pagination = query.paginate(
100 |     #     page=page,
    |     ^^^^^^^^^^^^^^^^
101 |     #     per_page=per_page,
102 |     #     error_out=False
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:101:5
    |
 99 |     # pagination = query.paginate(
100 |     #     page=page,
101 |     #     per_page=per_page,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^
102 |     #     error_out=False
103 |     # )
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:102:5
    |
100 |     #     page=page,
101 |     #     per_page=per_page,
102 |     #     error_out=False
    |     ^^^^^^^^^^^^^^^^^^^^^
103 |     # )
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:103:5
    |
101 |     #     per_page=per_page,
102 |     #     error_out=False
103 |     # )
    |     ^^^
104 |
105 |     # 5. è¿”å›žå“åº”
    |
help: Remove commented-out code

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> examples/validation/standard_api_templates.py:122:12
    |
121 | # ============================================================================
122 | # æ¨¡æ¿3: æ›´æ–°æŽ¥å£ï¼ˆPUT/PATCHï¼‰
    |                  ^^
123 | # ============================================================================
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> examples/validation/standard_api_templates.py:122:22
    |
121 | # ============================================================================
122 | # æ¨¡æ¿3: æ›´æ–°æŽ¥å£ï¼ˆPUT/PATCHï¼‰
    |                             ^^
123 | # ============================================================================
    |

ANN201 Missing return type annotation for public function `update_resource`
   --> examples/validation/standard_api_templates.py:127:5
    |
125 | @blueprint.route("/api/resources/<int:resource_id>", methods=["PUT"])
126 | @update_required
127 | def update_resource(resource_id: int):
    |     ^^^^^^^^^^^^^^^
128 |     """æ›´æ–°èµ„æºæŽ¥å£æ¨¡æ¿.
    |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> examples/validation/standard_api_templates.py:130:7
    |
128 |     """æ›´æ–°èµ„æºæŽ¥å£æ¨¡æ¿.
129 |
130 |     ç‰¹ç‚¹ï¼š
    |         ^^
131 |     - å…ˆæ£€æŸ¥èµ„æºæ˜¯å¦å­˜åœ¨
132 |     - éªŒè¯æ•°æ®åŽå†æ›´æ–°
    |

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:136:5
    |
134 |     """
135 |     # 1. æŸ¥æ‰¾èµ„æº
136 |     # resource = Resource.query.get(resource_id)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
137 |     # if not resource:
138 |     #     raise NotFoundError("èµ„æºä¸å­˜åœ¨")
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:138:5
    |
136 |     # resource = Resource.query.get(resource_id)
137 |     # if not resource:
138 |     #     raise NotFoundError("èµ„æºä¸å­˜åœ¨")
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
139 |
140 |     # 2. èŽ·å–å¹¶æ¸…ç†æ•°æ®
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:159:5
    |
157 |     # for key, value in data.items():
158 |     #     if hasattr(resource, key):
159 |     #         setattr(resource, key, value)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
160 |     #
161 |     # db.session.commit()
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:161:5
    |
159 |     #         setattr(resource, key, value)
160 |     #
161 |     # db.session.commit()
    |     ^^^^^^^^^^^^^^^^^^^^^
162 |
163 |     # 5. è¿”å›žæˆåŠŸå“åº”
    |
help: Remove commented-out code

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> examples/validation/standard_api_templates.py:171:12
    |
170 | # ============================================================================
171 | # æ¨¡æ¿4: åˆ é™¤æŽ¥å£ï¼ˆDELETEï¼‰
    |                  ^^
172 | # ============================================================================
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> examples/validation/standard_api_templates.py:171:19
    |
170 | # ============================================================================
171 | # æ¨¡æ¿4: åˆ é™¤æŽ¥å£ï¼ˆDELETEï¼‰
    |                          ^^
172 | # ============================================================================
    |

ANN201 Missing return type annotation for public function `delete_resource`
   --> examples/validation/standard_api_templates.py:176:5
    |
174 | @blueprint.route("/api/resources/<int:resource_id>", methods=["DELETE"])
175 | @delete_required
176 | def delete_resource(resource_id: int):
    |     ^^^^^^^^^^^^^^^
177 |     """åˆ é™¤èµ„æºæŽ¥å£æ¨¡æ¿.
    |
help: Add return type annotation

ARG001 Unused function argument: `resource_id`
   --> examples/validation/standard_api_templates.py:176:21
    |
174 | @blueprint.route("/api/resources/<int:resource_id>", methods=["DELETE"])
175 | @delete_required
176 | def delete_resource(resource_id: int):
    |                     ^^^^^^^^^^^
177 |     """åˆ é™¤èµ„æºæŽ¥å£æ¨¡æ¿.
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> examples/validation/standard_api_templates.py:179:7
    |
177 |     """åˆ é™¤èµ„æºæŽ¥å£æ¨¡æ¿.
178 |
179 |     ç‰¹ç‚¹ï¼š
    |         ^^
180 |     - ç®€æ´çš„åˆ é™¤é€»è¾‘
181 |     - ä½¿ç”¨ NotFoundError å¤„ç†èµ„æºä¸å­˜åœ¨
    |

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:185:5
    |
183 |     """
184 |     # 1. æŸ¥æ‰¾èµ„æº
185 |     # resource = Resource.query.get(resource_id)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
186 |     # if not resource:
187 |     #     raise NotFoundError("èµ„æºä¸å­˜åœ¨")
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:187:5
    |
185 |     # resource = Resource.query.get(resource_id)
186 |     # if not resource:
187 |     #     raise NotFoundError("èµ„æºä¸å­˜åœ¨")
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
188 |
189 |     # 2. åˆ é™¤èµ„æº
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:190:5
    |
189 |     # 2. åˆ é™¤èµ„æº
190 |     # db.session.delete(resource)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
191 |     # db.session.commit()
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:191:5
    |
189 |     # 2. åˆ é™¤èµ„æº
190 |     # db.session.delete(resource)
191 |     # db.session.commit()
    |     ^^^^^^^^^^^^^^^^^^^^^
192 |
193 |     # 3. è¿”å›žæˆåŠŸå“åº”
    |
help: Remove commented-out code

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> examples/validation/standard_api_templates.py:198:14
    |
197 | # ============================================================================
198 | # æ¨¡æ¿5: æ‰¹é‡æ“ä½œæŽ¥å£ï¼ˆPOSTï¼‰
    |                      ^^
199 | # ============================================================================
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> examples/validation/standard_api_templates.py:198:19
    |
197 | # ============================================================================
198 | # æ¨¡æ¿5: æ‰¹é‡æ“ä½œæŽ¥å£ï¼ˆPOSTï¼‰
    |                            ^^
199 | # ============================================================================
    |

ANN201 Missing return type annotation for public function `batch_operation`
   --> examples/validation/standard_api_templates.py:203:5
    |
201 | @blueprint.route("/api/resources/batch", methods=["POST"])
202 | @update_required
203 | def batch_operation():
    |     ^^^^^^^^^^^^^^^
204 |     """æ‰¹é‡æ“ä½œæŽ¥å£æ¨¡æ¿.
    |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> examples/validation/standard_api_templates.py:206:7
    |
204 |     """æ‰¹é‡æ“ä½œæŽ¥å£æ¨¡æ¿.
205 |
206 |     ç‰¹ç‚¹ï¼š
    |         ^^
207 |     - éªŒè¯æ‰¹é‡æ•°æ®
208 |     - ç»Ÿè®¡æ“ä½œç»“æžœ
    |

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:240:5
    |
239 |     # for resource_id in ids:
240 |     #     try:
    |     ^^^^^^^^^^
241 |     #         resource = Resource.query.get(resource_id)
242 |     #         if resource:
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:241:5
    |
239 |     # for resource_id in ids:
240 |     #     try:
241 |     #         resource = Resource.query.get(resource_id)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
242 |     #         if resource:
243 |     #             if action == "enable":
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:244:5
    |
242 |     #         if resource:
243 |     #             if action == "enable":
244 |     #                 resource.is_active = True
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
245 |     #             elif action == "disable":
246 |     #                 resource.is_active = False
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:245:5
    |
243 |     #             if action == "enable":
244 |     #                 resource.is_active = True
245 |     #             elif action == "disable":
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
246 |     #                 resource.is_active = False
247 |     #             elif action == "delete":
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:246:5
    |
244 |     #                 resource.is_active = True
245 |     #             elif action == "disable":
246 |     #                 resource.is_active = False
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
247 |     #             elif action == "delete":
248 |     #                 db.session.delete(resource)
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:247:5
    |
245 |     #             elif action == "disable":
246 |     #                 resource.is_active = False
247 |     #             elif action == "delete":
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
248 |     #                 db.session.delete(resource)
249 |     #             success_count += 1
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:248:5
    |
246 |     #                 resource.is_active = False
247 |     #             elif action == "delete":
248 |     #                 db.session.delete(resource)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
249 |     #             success_count += 1
250 |     #         else:
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:249:5
    |
247 |     #             elif action == "delete":
248 |     #                 db.session.delete(resource)
249 |     #             success_count += 1
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
250 |     #         else:
251 |     #             failed_count += 1
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:250:5
    |
248 |     #                 db.session.delete(resource)
249 |     #             success_count += 1
250 |     #         else:
    |     ^^^^^^^^^^^^^^^
251 |     #             failed_count += 1
252 |     #     except Exception:
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:251:5
    |
249 |     #             success_count += 1
250 |     #         else:
251 |     #             failed_count += 1
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
252 |     #     except Exception:
253 |     #         failed_count += 1
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:252:5
    |
250 |     #         else:
251 |     #             failed_count += 1
252 |     #     except Exception:
    |     ^^^^^^^^^^^^^^^^^^^^^^^
253 |     #         failed_count += 1
254 |     #
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:253:5
    |
251 |     #             failed_count += 1
252 |     #     except Exception:
253 |     #         failed_count += 1
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
254 |     #
255 |     # db.session.commit()
    |
help: Remove commented-out code

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:255:5
    |
253 |     #         failed_count += 1
254 |     #
255 |     # db.session.commit()
    |     ^^^^^^^^^^^^^^^^^^^^^
256 |
257 |     # 4. è¿”å›žæ“ä½œç»“æžœ
    |
help: Remove commented-out code

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> examples/validation/standard_api_templates.py:264:25
    |
262 |             "failed": failed_count,
263 |         },
264 |         message=f"æ‰¹é‡æ“ä½œå®Œæˆï¼ŒæˆåŠŸ {success_count} ä¸ªï¼Œå¤±è´¥ {failed_count} ä¸ª",
    |                               ^^
265 |     )
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> examples/validation/standard_api_templates.py:264:46
    |
262 |             "failed": failed_count,
263 |         },
264 |         message=f"æ‰¹é‡æ“ä½œå®Œæˆï¼ŒæˆåŠŸ {success_count} ä¸ªï¼Œå¤±è´¥ {failed_count} ä¸ª",
    |                                                        ^^
265 |     )
    |

RUF003 Comment contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> examples/validation/standard_api_templates.py:269:7
    |
268 | # ============================================================================
269 | # åé¢ç¤ºä¾‹ï¼šä¸è¦è¿™æ ·å†™
    |           ^^
270 | # ============================================================================
    |

ANN201 Missing return type annotation for public function `bad_example_create`
   --> examples/validation/standard_api_templates.py:272:5
    |
270 | # ============================================================================
271 |
272 | def bad_example_create():
    |     ^^^^^^^^^^^^^^^^^^
273 |     """âŒ é”™è¯¯ç¤ºä¾‹ï¼šä¸è¦è¿™æ ·å†™.
    |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> examples/validation/standard_api_templates.py:273:14
    |
272 | def bad_example_create():
273 |     """âŒ é”™è¯¯ç¤ºä¾‹ï¼šä¸è¦è¿™æ ·å†™.
    |                   ^^
274 |
275 |     é—®é¢˜ï¼š
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> examples/validation/standard_api_templates.py:275:7
    |
273 |     """âŒ é”™è¯¯ç¤ºä¾‹ï¼šä¸è¦è¿™æ ·å†™.
274 |
275 |     é—®é¢˜ï¼š
    |         ^^
276 |     1. ç¼ºå°‘è£…é¥°å™¨éªŒè¯
277 |     2. ä½¿ç”¨å†…è”é”™è¯¯è¿”å›ž
    |

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:293:5
    |
292 |     # âŒ æ²¡æœ‰æ•°æ®æ¸…ç†
293 |     # resource = Resource(**data)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
294 |
295 |     return {"success": True, "data": {}}, 200
    |
help: Remove commented-out code

ANN201 Missing return type annotation for public function `bad_example_list`
   --> examples/validation/standard_api_templates.py:298:5
    |
298 | def bad_example_list():
    |     ^^^^^^^^^^^^^^^^
299 |     """âŒ é”™è¯¯ç¤ºä¾‹ï¼šä¸è¦è¿™æ ·å†™.
    |
help: Add return type annotation

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> examples/validation/standard_api_templates.py:299:14
    |
298 | def bad_example_list():
299 |     """âŒ é”™è¯¯ç¤ºä¾‹ï¼šä¸è¦è¿™æ ·å†™.
    |                   ^^
300 |
301 |     é—®é¢˜ï¼š
    |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> examples/validation/standard_api_templates.py:301:7
    |
299 |     """âŒ é”™è¯¯ç¤ºä¾‹ï¼šä¸è¦è¿™æ ·å†™.
300 |
301 |     é—®é¢˜ï¼š
    |         ^^
302 |     1. ä¸å®‰å…¨çš„ç±»åž‹è½¬æ¢
303 |     2. æ²¡æœ‰å‚æ•°éªŒè¯
    |

RUF003 Comment contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> examples/validation/standard_api_templates.py:306:17
    |
304 |     3. å“åº”æ ¼å¼ä¸ç»Ÿä¸€
305 |     """
306 |     # âŒ ä¸å®‰å…¨çš„ç±»åž‹è½¬æ¢ï¼ˆå¯èƒ½æŠ›å‡º ValueErrorï¼‰
    |                          ^^
307 |     int(request.args.get("page", 1))
308 |     int(request.args.get("per_page", 20))
    |

RUF003 Comment contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> examples/validation/standard_api_templates.py:306:33
    |
304 |     3. å“åº”æ ¼å¼ä¸ç»Ÿä¸€
305 |     """
306 |     # âŒ ä¸å®‰å…¨çš„ç±»åž‹è½¬æ¢ï¼ˆå¯èƒ½æŠ›å‡º ValueErrorï¼‰
    |                                               ^^
307 |     int(request.args.get("page", 1))
308 |     int(request.args.get("per_page", 20))
    |

ERA001 Found commented-out code
   --> examples/validation/standard_api_templates.py:311:5
    |
310 |     # âŒ æ²¡æœ‰å‚æ•°éªŒè¯
311 |     # query = Resource.query.paginate(page=page, per_page=per_page)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
312 |
313 |     # âŒ å“åº”æ ¼å¼ä¸ç»Ÿä¸€
    |
help: Remove commented-out code

INP001 File `migrations/env.py` is part of an implicit namespace package. Add an `__init__.py`.
--> migrations/env.py:1:1

D100 Missing docstring in public module
--> migrations/env.py:1:1

ANN201 Missing return type annotation for public function `get_engine`
  --> migrations/env.py:17:5
   |
17 | def get_engine():
   |     ^^^^^^^^^^
18 |     try:
19 |         # this works with Flask-SQLAlchemy<3 and Alchemical
   |
help: Add return type annotation

D103 Missing docstring in public function
  --> migrations/env.py:17:5
   |
17 | def get_engine():
   |     ^^^^^^^^^^
18 |     try:
19 |         # this works with Flask-SQLAlchemy<3 and Alchemical
   |

ANN201 Missing return type annotation for public function `get_engine_url`
  --> migrations/env.py:26:5
   |
26 | def get_engine_url():
   |     ^^^^^^^^^^^^^^
27 |     try:
28 |         return get_engine().url.render_as_string(hide_password=False).replace(
   |
help: Add return type annotation

D103 Missing docstring in public function
  --> migrations/env.py:26:5
   |
26 | def get_engine_url():
   |     ^^^^^^^^^^^^^^
27 |     try:
28 |         return get_engine().url.render_as_string(hide_password=False).replace(
   |

ERA001 Found commented-out code
  --> migrations/env.py:36:1
   |
34 | # add your model's MetaData object here
35 | # for 'autogenerate' support
36 | # from myapp import mymodel
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^
37 | # target_metadata = mymodel.Base.metadata
38 | config.set_main_option("sqlalchemy.url", get_engine_url())
   |
help: Remove commented-out code

ERA001 Found commented-out code
  --> migrations/env.py:37:1
   |
35 | # for 'autogenerate' support
36 | # from myapp import mymodel
37 | # target_metadata = mymodel.Base.metadata
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
38 | config.set_main_option("sqlalchemy.url", get_engine_url())
39 | target_db = current_app.extensions["migrate"].db
   |
help: Remove commented-out code

ERA001 Found commented-out code
  --> migrations/env.py:43:1
   |
41 | # other values from the config, defined by the needs of env.py,
42 | # can be acquired:
43 | # my_important_option = config.get_main_option("my_important_option")
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
44 | # ... etc.
   |
help: Remove commented-out code

ANN201 Missing return type annotation for public function `get_metadata`
  --> migrations/env.py:47:5
   |
47 | def get_metadata():
   |     ^^^^^^^^^^^^
48 |     if hasattr(target_db, "metadatas"):
49 |         return target_db.metadatas[None]
   |
help: Add return type annotation

D103 Missing docstring in public function
  --> migrations/env.py:47:5
   |
47 | def get_metadata():
   |     ^^^^^^^^^^^^
48 |     if hasattr(target_db, "metadatas"):
49 |         return target_db.metadatas[None]
   |

ANN001 Missing type annotation for function argument `context`
  --> migrations/env.py:85:37
   |
83 |     # when there are no changes to the schema
84 |     # reference: http://alembic.zzzcomputing.com/en/latest/cookbook.html
85 |     def process_revision_directives(context, revision, directives) -> None:
   |                                     ^^^^^^^
86 |         if getattr(config.cmd_opts, "autogenerate", False):
87 |             script = directives[0]
   |

ARG001 Unused function argument: `context`
  --> migrations/env.py:85:37
   |
83 |     # when there are no changes to the schema
84 |     # reference: http://alembic.zzzcomputing.com/en/latest/cookbook.html
85 |     def process_revision_directives(context, revision, directives) -> None:
   |                                     ^^^^^^^
86 |         if getattr(config.cmd_opts, "autogenerate", False):
87 |             script = directives[0]
   |

ANN001 Missing type annotation for function argument `revision`
  --> migrations/env.py:85:46
   |
83 |     # when there are no changes to the schema
84 |     # reference: http://alembic.zzzcomputing.com/en/latest/cookbook.html
85 |     def process_revision_directives(context, revision, directives) -> None:
   |                                              ^^^^^^^^
86 |         if getattr(config.cmd_opts, "autogenerate", False):
87 |             script = directives[0]
   |

ARG001 Unused function argument: `revision`
  --> migrations/env.py:85:46
   |
83 |     # when there are no changes to the schema
84 |     # reference: http://alembic.zzzcomputing.com/en/latest/cookbook.html
85 |     def process_revision_directives(context, revision, directives) -> None:
   |                                              ^^^^^^^^
86 |         if getattr(config.cmd_opts, "autogenerate", False):
87 |             script = directives[0]
   |

ANN001 Missing type annotation for function argument `directives`
  --> migrations/env.py:85:56
   |
83 |     # when there are no changes to the schema
84 |     # reference: http://alembic.zzzcomputing.com/en/latest/cookbook.html
85 |     def process_revision_directives(context, revision, directives) -> None:
   |                                                        ^^^^^^^^^^
86 |         if getattr(config.cmd_opts, "autogenerate", False):
87 |             script = directives[0]
   |

INP001 File `nginx/gunicorn/gunicorn-dev.conf.py` is part of an implicit namespace package. Add an `__init__.py`.
--> nginx/gunicorn/gunicorn-dev.conf.py:1:1

D100 Missing docstring in public module
--> nginx/gunicorn/gunicorn-dev.conf.py:1:1

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> nginx/gunicorn/gunicorn-dev.conf.py:9:33
   |
 7 | # å·¥ä½œè¿›ç¨‹ - å¼€å‘çŽ¯å¢ƒç®€åŒ–é…ç½®
 8 | workers = 1  # å¼€å‘çŽ¯å¢ƒä½¿ç”¨å•è¿›ç¨‹
 9 | worker_class = "sync"  # ä½¿ç”¨åŒæ­¥å·¥ä½œå™¨ï¼Œä¾¿äºŽè°ƒè¯•
   |                                        ^^
10 | timeout = 60  # å¼€å‘çŽ¯å¢ƒè¶…æ—¶æ—¶é—´æ›´é•¿
11 | keepalive = 2
   |

INP001 File `nginx/gunicorn/gunicorn-prod.conf.py` is part of an implicit namespace package. Add an `__init__.py`.
--> nginx/gunicorn/gunicorn-prod.conf.py:1:1

D100 Missing docstring in public module
--> nginx/gunicorn/gunicorn-prod.conf.py:1:1

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> nginx/gunicorn/gunicorn-prod.conf.py:8:22
   |
 7 | # å·¥ä½œè¿›ç¨‹ - ç®€åŒ–é…ç½®
 8 | workers = 1  # å›ºå®š2ä¸ªè¿›ç¨‹ï¼Œé¿å…å¤æ‚é…ç½®
   |                           ^^
 9 | worker_class = "gevent"  # ä½¿ç”¨geventå·¥ä½œå™¨ï¼Œæ”¯æŒå¼‚æ­¥
10 | worker_connections = 1000  # geventå·¥ä½œå™¨è¿žæŽ¥æ•°
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> nginx/gunicorn/gunicorn-prod.conf.py:9:39
   |
 7 | # å·¥ä½œè¿›ç¨‹ - ç®€åŒ–é…ç½®
 8 | workers = 1  # å›ºå®š2ä¸ªè¿›ç¨‹ï¼Œé¿å…å¤æ‚é…ç½®
 9 | worker_class = "gevent"  # ä½¿ç”¨geventå·¥ä½œå™¨ï¼Œæ”¯æŒå¼‚æ­¥
   |                                            ^^
10 | worker_connections = 1000  # geventå·¥ä½œå™¨è¿žæŽ¥æ•°
11 | timeout = 120
   |

RUF003 Comment contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> nginx/gunicorn/gunicorn-prod.conf.py:22:30
   |
20 | accesslog = "/app/userdata/logs/gunicorn_access.log"
21 | errorlog = "/app/userdata/logs/gunicorn_error.log"
22 | loglevel = "info"  # æ”¹ä¸ºinfoçº§åˆ«ï¼Œå‡å°‘æ—¥å¿—é‡
   |                                  ^^
23 | access_log_format = '%(h)s %(l)s %(u)s %(t)s "%(r)s" %(s)s %(b)s "%(f)s" "%(a)s" %(D)s'
   |

S108 Probable insecure usage of temporary file or directory: "/dev/shm"
  --> nginx/gunicorn/gunicorn-prod.conf.py:48:18
   |
47 | # Geventç‰¹å®šé…ç½®
48 | worker_tmp_dir = "/dev/shm"  # ä½¿ç”¨å†…å­˜æ–‡ä»¶ç³»ç»Ÿæé«˜æ€§èƒ½
   |                  ^^^^^^^^^^
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> scripts/audit_colors.py:2:17
  |
1 | #!/usr/bin/env python3
2 | """æ‰«æé™æ€èµ„æºä¸­çš„ç¡¬ç¼–ç é¢œè‰²ï¼Œè¾…åŠ©è‰²å½©æ”¶æ•›ä¸“é¡¹ã€‚.
  |                              ^^
3 |
4 | é»˜è®¤æ‰«æ `app/static/css` ä¸Ž `app/static/js`ï¼Œå¿½ç•¥ vendor ç›®å½•ä»¥åŠ
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> scripts/audit_colors.py:4:40
  |
2 | """æ‰«æé™æ€èµ„æºä¸­çš„ç¡¬ç¼–ç é¢œè‰²ï¼Œè¾…åŠ©è‰²å½©æ”¶æ•›ä¸“é¡¹ã€‚.
3 |
4 | é»˜è®¤æ‰«æ `app/static/css` ä¸Ž `app/static/js`ï¼Œå¿½ç•¥ vendor ç›®å½•ä»¥åŠ
  |                                             ^^
5 | `variables.css`/`theme-orange.css` ç­‰ token å®šä¹‰æ–‡ä»¶ã€‚å¯é€šè¿‡å‚æ•°
6 | `--json` è¾“å‡ºæœºå™¨å¯è¯»çš„ç»“æžœï¼Œä½¿ç”¨ `--strict` åœ¨å‘çŽ°è¿è§„æ—¶è¿”å›žéžé›¶çŠ¶æ€ã€‚
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> scripts/audit_colors.py:6:19
  |
4 | é»˜è®¤æ‰«æ `app/static/css` ä¸Ž `app/static/js`ï¼Œå¿½ç•¥ vendor ç›®å½•ä»¥åŠ
5 | `variables.css`/`theme-orange.css` ç­‰ token å®šä¹‰æ–‡ä»¶ã€‚å¯é€šè¿‡å‚æ•°
6 | `--json` è¾“å‡ºæœºå™¨å¯è¯»çš„ç»“æžœï¼Œä½¿ç”¨ `--strict` åœ¨å‘çŽ°è¿è§„æ—¶è¿”å›žéžé›¶çŠ¶æ€ã€‚
  |                            ^^
7 | """
8 | from __future__ import annotations
  |

D103 Missing docstring in public function
  --> scripts/audit_colors.py:38:5
   |
38 | def iter_files(paths: Sequence[Path]) -> Sequence[Path]:
   |     ^^^^^^^^^^
39 |     for base in paths:
40 |         if not base.exists():
   |

D103 Missing docstring in public function
  --> scripts/audit_colors.py:54:5
   |
54 | def scan_file(path: Path) -> list[tuple[int, str]]:
   |     ^^^^^^^^^
55 |     if path in ALLOWLIST:
56 |         return []
   |

D103 Missing docstring in public function
  --> scripts/audit_colors.py:76:5
   |
76 | def format_report(results: dict[str, list[tuple[int, str]]]) -> str:
   |     ^^^^^^^^^^^^^
77 |     lines: list[str] = []
78 |     for path, entries in sorted(results.items()):
   |

D103 Missing docstring in public function
  --> scripts/audit_colors.py:86:5
   |
86 | def main(argv: Sequence[str]) -> int:
   |     ^^^^
87 |     parser = argparse.ArgumentParser(description=__doc__)
88 |     parser.add_argument("paths", nargs="*", type=Path, default=DEFAULT_SCAN_ROOTS,
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> scripts/audit_colors.py:89:39
   |
87 |     parser = argparse.ArgumentParser(description=__doc__)
88 |     parser.add_argument("paths", nargs="*", type=Path, default=DEFAULT_SCAN_ROOTS,
89 |                         help="å¾…æ‰«æç›®å½•æˆ–æ–‡ä»¶ï¼Œé»˜è®¤æ£€æŸ¥ app/static/css, app/static/js")
   |                                               ^^
90 |     parser.add_argument("--json", action="store_true", dest="as_json",
91 |                         help="ä»¥ JSON å½¢å¼è¾“å‡ºç»“æžœ")
   |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/audit_colors.py:118:31
    |
116 |         LOGGER.info("%s", format_report(findings))
117 |     else:
118 |         LOGGER.info("æœªæ£€æµ‹åˆ°ç¡¬ç¼–ç é¢œè‰²ï¼Œå·²å…¨éƒ¨å¼•ç”¨ token âœ…")
    |                                        ^^
119 |
120 |     if args.strict and findings:
    |

EXE001 Shebang is present but file is not executable
 --> scripts/check_missing_docs_smart.py:1:1
  |
1 | #!/usr/bin/env python3
  | ^^^^^^^^^^^^^^^^^^^^^^
2 | """Docstring ç¼ºå¤±æ£€æµ‹è„šæœ¬ã€‚.
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> scripts/check_missing_docs_smart.py:4:22
  |
2 | """Docstring ç¼ºå¤±æ£€æµ‹è„šæœ¬ã€‚.
3 |
4 | è¯¥è„šæœ¬æ‰«ææŒ‡å®šç›®å½•ä¸‹çš„ Python æ–‡ä»¶ï¼Œè¯†åˆ«ç¼ºå¤± docstring çš„æ¨¡å—ã€ç±»ã€
  |                                   ^^
5 | å‡½æ•°ï¼Œå¹¶ç”Ÿæˆ Markdown æŠ¥å‘Šï¼Œå¸®åŠ©å›¢é˜ŸæŒç»­å¯¹é½ Google é£Žæ ¼æ–‡æ¡£è§„èŒƒã€‚
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> scripts/check_missing_docs_smart.py:5:3
  |
4 | è¯¥è„šæœ¬æ‰«ææŒ‡å®šç›®å½•ä¸‹çš„ Python æ–‡ä»¶ï¼Œè¯†åˆ«ç¼ºå¤± docstring çš„æ¨¡å—ã€ç±»ã€
5 | å‡½æ•°ï¼Œå¹¶ç”Ÿæˆ Markdown æŠ¥å‘Šï¼Œå¸®åŠ©å›¢é˜ŸæŒç»­å¯¹é½ Google é£Žæ ¼æ–‡æ¡£è§„èŒƒã€‚
  |     ^^
6 |
7 | Typical usage example::
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> scripts/check_missing_docs_smart.py:5:19
  |
4 | è¯¥è„šæœ¬æ‰«ææŒ‡å®šç›®å½•ä¸‹çš„ Python æ–‡ä»¶ï¼Œè¯†åˆ«ç¼ºå¤± docstring çš„æ¨¡å—ã€ç±»ã€
5 | å‡½æ•°ï¼Œå¹¶ç”Ÿæˆ Markdown æŠ¥å‘Šï¼Œå¸®åŠ©å›¢é˜ŸæŒç»­å¯¹é½ Google é£Žæ ¼æ–‡æ¡£è§„èŒƒã€‚
  |                           ^^
6 |
7 | Typical usage example::
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> scripts/check_missing_docs_smart.py:52:25
   |
50 |         name: éœ€è¦è¡¥å……æ–‡æ¡£çš„å¯¹è±¡åç§°ã€‚
51 |         line: è¯¥å¯¹è±¡åœ¨æºæ–‡ä»¶ä¸­çš„è¡Œå·ã€‚
52 |         details: ç¼ºå¤±éƒ¨åˆ†çš„åˆ—è¡¨ï¼Œä¾‹å¦‚ Args æˆ– @returnsã€‚
   |                                ^^
53 |
54 |     """
   |

C901 `analyze_python_file` is too complex (16 > 10)
   --> scripts/check_missing_docs_smart.py:141:5
    |
141 | def analyze_python_file(path: Path) -> MissingDocReport | None:
    |     ^^^^^^^^^^^^^^^^^^^
142 |     """Create a missing docstring report for a single Python file.
    |

PLR0912 Too many branches (17 > 12)
   --> scripts/check_missing_docs_smart.py:141:5
    |
141 | def analyze_python_file(path: Path) -> MissingDocReport | None:
    |     ^^^^^^^^^^^^^^^^^^^
142 |     """Create a missing docstring report for a single Python file.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/check_missing_docs_smart.py:208:22
    |
206 |     """è¿”å›žå‡½æ•°æ–‡æ¡£ç¼ºå¤±çš„ Google é£Žæ ¼æ®µè½ã€‚.
207 |
208 |     è¯»å–å‡½æ•°å®šä¹‰çš„ docstringï¼Œå¹¶æ£€æŸ¥æ˜¯å¦åŒ…å« Args ä¸Ž Returns åŒºå—ï¼Œ
    |                             ^^
209 |     ä»¥ä¾¿æŠ¥å‘Šè„šæœ¬èƒ½å¤Ÿç²¾å‡†æç¤ºç¼ºå¤±é¡¹ç›®ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/check_missing_docs_smart.py:208:48
    |
206 |     """è¿”å›žå‡½æ•°æ–‡æ¡£ç¼ºå¤±çš„ Google é£Žæ ¼æ®µè½ã€‚.
207 |
208 |     è¯»å–å‡½æ•°å®šä¹‰çš„ docstringï¼Œå¹¶æ£€æŸ¥æ˜¯å¦åŒ…å« Args ä¸Ž Returns åŒºå—ï¼Œ
    |                                                                  ^^
209 |     ä»¥ä¾¿æŠ¥å‘Šè„šæœ¬èƒ½å¤Ÿç²¾å‡†æç¤ºç¼ºå¤±é¡¹ç›®ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/check_missing_docs_smart.py:216:29
    |
215 |     Returns:
216 |         list[str]: ç¼ºå¤±çš„æ®µè½åç§°åˆ—è¡¨ï¼Œä¾‹å¦‚ ``"Args"`` æˆ– ``"Returns"``ã€‚
    |                                      ^^
217 |
218 |     """
    |

C901 `analyze_js_file` is too complex (18 > 10)
   --> scripts/check_missing_docs_smart.py:241:5
    |
241 | def analyze_js_file(path: Path) -> MissingDocReport | None:
    |     ^^^^^^^^^^^^^^^
242 |     """Create a missing JSDoc report for a JavaScript file.
    |

PLR0912 Too many branches (19 > 12)
   --> scripts/check_missing_docs_smart.py:241:5
    |
241 | def analyze_js_file(path: Path) -> MissingDocReport | None:
    |     ^^^^^^^^^^^^^^^
242 |     """Create a missing JSDoc report for a JavaScript file.
    |

PLR0915 Too many statements (59 > 50)
   --> scripts/check_missing_docs_smart.py:241:5
    |
241 | def analyze_js_file(path: Path) -> MissingDocReport | None:
    |     ^^^^^^^^^^^^^^^
242 |     """Create a missing JSDoc report for a JavaScript file.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/check_missing_docs_smart.py:346:21
    |
344 |     """åˆ¤æ–­åŒ¹é…çš„ JavaScript å‡½æ•°æ˜¯å¦å£°æ˜Žå‚æ•°ã€‚.
345 |
346 |     é€šè¿‡è§£æžå‡½æ•°å®šä¹‰æ‰€åœ¨è¡ŒåŠå…¶åŽç»­è¡Œï¼Œæ‹¼åˆå®Œæ•´ç­¾åå¹¶æ£€æµ‹æ‹¬å·å†…çš„
    |                                     ^^
347 |     å­—ç¬¦æ˜¯å¦ä¸ºç©ºï¼Œä»¥æ­¤å†³å®šæ˜¯å¦éœ€è¦ @param æç¤ºã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/check_missing_docs_smart.py:347:11
    |
346 |     é€šè¿‡è§£æžå‡½æ•°å®šä¹‰æ‰€åœ¨è¡ŒåŠå…¶åŽç»­è¡Œï¼Œæ‹¼åˆå®Œæ•´ç­¾åå¹¶æ£€æµ‹æ‹¬å·å†…çš„
347 |     å­—ç¬¦æ˜¯å¦ä¸ºç©ºï¼Œä»¥æ­¤å†³å®šæ˜¯å¦éœ€è¦ @param æç¤ºã€‚
    |                 ^^
348 |
349 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> scripts/check_missing_docs_smart.py:380:10
    |
379 | def _collect_js_signature(lines: Sequence[str], start_index: int) -> str:
380 |     """æ”¶é›†ï¼ˆå¯èƒ½è·¨è¡Œçš„ï¼‰å‡½æ•°ç­¾åæ–‡æœ¬ã€‚.
    |            ^^
381 |
382 |     Args:
    |

RUF002 Docstring contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> scripts/check_missing_docs_smart.py:380:16
    |
379 | def _collect_js_signature(lines: Sequence[str], start_index: int) -> str:
380 |     """æ”¶é›†ï¼ˆå¯èƒ½è·¨è¡Œçš„ï¼‰å‡½æ•°ç­¾åæ–‡æœ¬ã€‚.
    |                        ^^
381 |
382 |     Args:
    |

DTZ005 `datetime.datetime.now()` called without a `tz` argument
   --> scripts/check_missing_docs_smart.py:423:17
    |
421 |     missing_classes = sum(len(rpt.classes) for rpt in results.values())
422 |     missing_functions = sum(len(rpt.functions) for rpt in results.values())
423 |     timestamp = dt.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
    |                 ^^^^^^^^^^^^^^^^^
424 |     lines = [
425 |         "# ç¼ºå¤± Docstring ç»Ÿè®¡æŠ¥å‘Š",
    |
help: Pass a `datetime.timezone` object to the `tz` parameter

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> scripts/check_missing_docs_smart.py:427:17
    |
425 |         "# ç¼ºå¤± Docstring ç»Ÿè®¡æŠ¥å‘Š",
426 |         "",
427 |         f"- ç”Ÿæˆæ—¶é—´ï¼š{timestamp}",
    |                     ^^
428 |         f"- æ‰«ææ–‡ä»¶ï¼š{scanned_files}",
429 |         f"- æ¨¡å—ç¼ºå¤±ï¼š{missing_modules}",
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> scripts/check_missing_docs_smart.py:428:17
    |
426 |         "",
427 |         f"- ç”Ÿæˆæ—¶é—´ï¼š{timestamp}",
428 |         f"- æ‰«ææ–‡ä»¶ï¼š{scanned_files}",
    |                     ^^
429 |         f"- æ¨¡å—ç¼ºå¤±ï¼š{missing_modules}",
430 |         f"- ç±»ç¼ºå¤±ï¼š{missing_classes}",
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> scripts/check_missing_docs_smart.py:429:17
    |
427 |         f"- ç”Ÿæˆæ—¶é—´ï¼š{timestamp}",
428 |         f"- æ‰«ææ–‡ä»¶ï¼š{scanned_files}",
429 |         f"- æ¨¡å—ç¼ºå¤±ï¼š{missing_modules}",
    |                     ^^
430 |         f"- ç±»ç¼ºå¤±ï¼š{missing_classes}",
431 |         f"- å‡½æ•°/æ–¹æ³•ç¼ºå¤±ï¼š{missing_functions}",
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> scripts/check_missing_docs_smart.py:430:16
    |
428 |         f"- æ‰«ææ–‡ä»¶ï¼š{scanned_files}",
429 |         f"- æ¨¡å—ç¼ºå¤±ï¼š{missing_modules}",
430 |         f"- ç±»ç¼ºå¤±ï¼š{missing_classes}",
    |                   ^^
431 |         f"- å‡½æ•°/æ–¹æ³•ç¼ºå¤±ï¼š{missing_functions}",
432 |         "",
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> scripts/check_missing_docs_smart.py:431:20
    |
429 |         f"- æ¨¡å—ç¼ºå¤±ï¼š{missing_modules}",
430 |         f"- ç±»ç¼ºå¤±ï¼š{missing_classes}",
431 |         f"- å‡½æ•°/æ–¹æ³•ç¼ºå¤±ï¼š{missing_functions}",
    |                          ^^
432 |         "",
433 |         "> è¯´æ˜Žï¼šä»…ç»Ÿè®¡å¯¹å¤–/å…¬å…±å®šä¹‰ï¼ˆæŽ’é™¤äº†ç§æœ‰ã€`__init__`ã€æµ‹è¯•å‡½æ•°ç­‰ï¼‰ï¼Œè¯·æŒ‰éœ€è¡¥å…… docstringã€‚",
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> scripts/check_missing_docs_smart.py:433:14
    |
431 |         f"- å‡½æ•°/æ–¹æ³•ç¼ºå¤±ï¼š{missing_functions}",
432 |         "",
433 |         "> è¯´æ˜Žï¼šä»…ç»Ÿè®¡å¯¹å¤–/å…¬å…±å®šä¹‰ï¼ˆæŽ’é™¤äº†ç§æœ‰ã€`__init__`ã€æµ‹è¯•å‡½æ•°ç­‰ï¼‰ï¼Œè¯·æŒ‰éœ€è¡¥å…… docstringã€‚",
    |                ^^
434 |         "",
435 |     ]
    |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> scripts/check_missing_docs_smart.py:433:25
    |
431 |         f"- å‡½æ•°/æ–¹æ³•ç¼ºå¤±ï¼š{missing_functions}",
432 |         "",
433 |         "> è¯´æ˜Žï¼šä»…ç»Ÿè®¡å¯¹å¤–/å…¬å…±å®šä¹‰ï¼ˆæŽ’é™¤äº†ç§æœ‰ã€`__init__`ã€æµ‹è¯•å‡½æ•°ç­‰ï¼‰ï¼Œè¯·æŒ‰éœ€è¡¥å…… docstringã€‚",
    |                                     ^^
434 |         "",
435 |     ]
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> scripts/check_missing_docs_smart.py:433:48
    |
431 |         f"- å‡½æ•°/æ–¹æ³•ç¼ºå¤±ï¼š{missing_functions}",
432 |         "",
433 |         "> è¯´æ˜Žï¼šä»…ç»Ÿè®¡å¯¹å¤–/å…¬å…±å®šä¹‰ï¼ˆæŽ’é™¤äº†ç§æœ‰ã€`__init__`ã€æµ‹è¯•å‡½æ•°ç­‰ï¼‰ï¼Œè¯·æŒ‰éœ€è¡¥å…… docstringã€‚",
    |                                                                         ^^
434 |         "",
435 |     ]
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/check_missing_docs_smart.py:433:49
    |
431 |         f"- å‡½æ•°/æ–¹æ³•ç¼ºå¤±ï¼š{missing_functions}",
432 |         "",
433 |         "> è¯´æ˜Žï¼šä»…ç»Ÿè®¡å¯¹å¤–/å…¬å…±å®šä¹‰ï¼ˆæŽ’é™¤äº†ç§æœ‰ã€`__init__`ã€æµ‹è¯•å‡½æ•°ç­‰ï¼‰ï¼Œè¯·æŒ‰éœ€è¡¥å…… docstringã€‚",
    |                                                                           ^^
434 |         "",
435 |     ]
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> scripts/check_missing_docs_smart.py:445:45
    |
443 |             lines.append(f"- æ¨¡å—ç¼ºå°‘ {doc_label}")
444 |         if rpt.classes:
445 |             lines.append(f"- ç±»ç¼ºå°‘ {doc_label}ï¼š")
    |                                                ^^
446 |             for entry in rpt.classes:
447 |                 lines.append(f"  - `{entry.name}` (è¡Œ {entry.line})")
    |

PERF401 Use `list.extend` to create a transformed list
   --> scripts/check_missing_docs_smart.py:447:17
    |
445 |             lines.append(f"- ç±»ç¼ºå°‘ {doc_label}ï¼š")
446 |             for entry in rpt.classes:
447 |                 lines.append(f"  - `{entry.name}` (è¡Œ {entry.line})")
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
448 |         if rpt.functions:
449 |             lines.append(f"- å‡½æ•°/æ–¹æ³•ç¼ºå°‘ {doc_label}ï¼š")
    |
help: Replace for loop with list.extend

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> scripts/check_missing_docs_smart.py:449:49
    |
447 |                 lines.append(f"  - `{entry.name}` (è¡Œ {entry.line})")
448 |         if rpt.functions:
449 |             lines.append(f"- å‡½æ•°/æ–¹æ³•ç¼ºå°‘ {doc_label}ï¼š")
    |                                                       ^^
450 |             for entry in rpt.functions:
451 |                 lines.append(f"  - `{entry.name}` (è¡Œ {entry.line})")
    |

PERF401 Use `list.extend` to create a transformed list
   --> scripts/check_missing_docs_smart.py:451:17
    |
449 |             lines.append(f"- å‡½æ•°/æ–¹æ³•ç¼ºå°‘ {doc_label}ï¼š")
450 |             for entry in rpt.functions:
451 |                 lines.append(f"  - `{entry.name}` (è¡Œ {entry.line})")
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
452 |         if rpt.function_sections:
453 |             lines.append("- å‡½æ•°/æ–¹æ³•æ–‡æ¡£ä¸å®Œæ•´ï¼š")
    |
help: Replace for loop with list.extend

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> scripts/check_missing_docs_smart.py:453:39
    |
451 |                 lines.append(f"  - `{entry.name}` (è¡Œ {entry.line})")
452 |         if rpt.function_sections:
453 |             lines.append("- å‡½æ•°/æ–¹æ³•æ–‡æ¡£ä¸å®Œæ•´ï¼š")
    |                                                ^^
454 |             for entry in rpt.function_sections:
455 |                 detail = ", ".join(entry.details)
    |

RUF001 String contains ambiguous `ï¼` (FULLWIDTH EXCLAMATION MARK). Did you mean `!` (EXCLAMATION MARK)?
   --> scripts/check_missing_docs_smart.py:460:48
    |
459 |     if not results:
460 |         lines.append("ðŸŽ‰ æ‰€æœ‰è¢«æ‰«æçš„æ–‡ä»¶ docstring å‡å·²å®Œå–„ï¼")
    |                                                             ^^
461 |
462 |     return "\n".join(lines)
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/check_missing_docs_smart.py:468:12
    |
466 |     """Docstring æ‰«æ CLI çš„å…¥å£å‡½æ•°ã€‚.
467 |
468 |     è§£æžå‘½ä»¤è¡Œå‚æ•°ï¼ŒéåŽ† Python ä¸Ž JavaScript æ–‡ä»¶å¹¶ç”Ÿæˆ Markdown æŠ¥å‘Šï¼Œ
    |                   ^^
469 |     ä¾›å›¢é˜Ÿå¯¹ç…§ä¿®å¤ç¼ºå¤±çš„æ–‡æ¡£æ¡ç›®ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/check_missing_docs_smart.py:468:53
    |
466 |     """Docstring æ‰«æ CLI çš„å…¥å£å‡½æ•°ã€‚.
467 |
468 |     è§£æžå‘½ä»¤è¡Œå‚æ•°ï¼ŒéåŽ† Python ä¸Ž JavaScript æ–‡ä»¶å¹¶ç”Ÿæˆ Markdown æŠ¥å‘Šï¼Œ
    |                                                                       ^^
469 |     ä¾›å›¢é˜Ÿå¯¹ç…§ä¿®å¤ç¼ºå¤±çš„æ–‡æ¡£æ¡ç›®ã€‚
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/check_missing_docs_smart.py:472:27
    |
471 |     Returns:
472 |         None: å‡½æ•°ä»¥å‰¯ä½œç”¨æ‰§è¡Œ I/Oï¼Œä¸è¿”å›žä»»ä½•å€¼ã€‚
    |                                   ^^
473 |
474 |     """
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/check_missing_docs_smart.py:480:21
    |
478 |         nargs="*",
479 |         default=DEFAULT_INCLUDE,
480 |         help="è¦æ‰«æçš„ç›®å½•ï¼Œé»˜è®¤ app scripts tests",
    |                           ^^
481 |     )
482 |     parser.add_argument(
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/check_missing_docs_smart.py:486:33
    |
484 |         nargs="*",
485 |         default=DEFAULT_JS_INCLUDE,
486 |         help="è¦æ‰«æçš„ JavaScript ç›®å½•ï¼Œé»˜è®¤ static/js",
    |                                       ^^
487 |     )
488 |     parser.add_argument(
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/check_missing_docs_smart.py:491:28
    |
489 |         "--skip-js",
490 |         action="store_true",
491 |         help="ä»…æ‰«æ Python æ–‡ä»¶ï¼Œä¸æ£€æµ‹ JSDoc",
    |                                 ^^
492 |     )
493 |     parser.add_argument(
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> scripts/check_missing_docs_smart.py:523:17
    |
521 |     output_path.write_text(markdown, encoding="utf-8")
522 |     summary_parts = [
523 |         f"âœ… æ‰«æå®Œæˆï¼šå…± {total_files} ä¸ªæ–‡ä»¶",
    |                      ^^
524 |         f"Pythonï¼š{len(python_files)}",
525 |     ]
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> scripts/check_missing_docs_smart.py:524:17
    |
522 |     summary_parts = [
523 |         f"âœ… æ‰«æå®Œæˆï¼šå…± {total_files} ä¸ªæ–‡ä»¶",
524 |         f"Pythonï¼š{len(python_files)}",
    |                 ^^
525 |     ]
526 |     if js_files:
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> scripts/check_missing_docs_smart.py:527:42
    |
525 |     ]
526 |     if js_files:
527 |         summary_parts.append(f"JavaScriptï¼š{len(js_files)}")
    |                                          ^^
528 |     LOGGER.info("%sï¼Œå‘çŽ° %d ä¸ªæ–‡ä»¶ç¼ºå°‘æ–‡æ¡£ã€‚", "ï¼Œ".join(summary_parts), len(results))
529 |     LOGGER.info("ðŸ“„ è¯¦ç»†ç»“æžœå·²ä¿å­˜åˆ° %s", output_path)
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/check_missing_docs_smart.py:528:20
    |
526 |     if js_files:
527 |         summary_parts.append(f"JavaScriptï¼š{len(js_files)}")
528 |     LOGGER.info("%sï¼Œå‘çŽ° %d ä¸ªæ–‡ä»¶ç¼ºå°‘æ–‡æ¡£ã€‚", "ï¼Œ".join(summary_parts), len(results))
    |                    ^^
529 |     LOGGER.info("ðŸ“„ è¯¦ç»†ç»“æžœå·²ä¿å­˜åˆ° %s", output_path)
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/check_missing_docs_smart.py:528:39
    |
526 |     if js_files:
527 |         summary_parts.append(f"JavaScriptï¼š{len(js_files)}")
528 |     LOGGER.info("%sï¼Œå‘çŽ° %d ä¸ªæ–‡ä»¶ç¼ºå°‘æ–‡æ¡£ã€‚", "ï¼Œ".join(summary_parts), len(results))
    |                                                  ^^
529 |     LOGGER.info("ðŸ“„ è¯¦ç»†ç»“æžœå·²ä¿å­˜åˆ° %s", output_path)
    |

D205 1 blank line required between summary line and description
 --> scripts/code/analyze_code.py:2:1
  |
1 |   #!/usr/bin/env python3
2 | / """ä»£ç ç»Ÿè®¡åˆ†æžè„šæœ¬
3 | | ç”¨äºŽç”Ÿæˆé¡¹ç›®ä»£ç çš„è¯¦ç»†ç»Ÿè®¡æŠ¥å‘Š.
4 | | """
  | |___^
5 |
6 |   import json
  |
help: Insert single blank line

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> scripts/code/analyze_code.py:14:23
   |
13 | def _echo(message: str = "") -> None:
14 |     """å‘ stdout è¾“å‡ºä¸€è¡Œæ–‡æœ¬ï¼Œæ›¿ä»£ print é¿å… Ruff T201ã€‚."""
   |                              ^^
15 |     sys.stdout.write(f"{message}\n")
   |

ANN201 Missing return type annotation for public function `count_lines`
  --> scripts/code/analyze_code.py:18:5
   |
18 | def count_lines(filepath):
   |     ^^^^^^^^^^^
19 |     """ç»Ÿè®¡æŒ‡å®šæ–‡ä»¶çš„æœ‰æ•ˆè¡Œæ•°ã€‚.
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `filepath`
  --> scripts/code/analyze_code.py:18:17
   |
18 | def count_lines(filepath):
   |                 ^^^^^^^^
19 |     """ç»Ÿè®¡æŒ‡å®šæ–‡ä»¶çš„æœ‰æ•ˆè¡Œæ•°ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> scripts/code/analyze_code.py:22:28
   |
21 |     Args:
22 |         filepath: éœ€è¦ç»Ÿè®¡çš„æ–‡ä»¶è·¯å¾„ï¼Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„ã€‚
   |                                     ^^
23 |
24 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
  --> scripts/code/analyze_code.py:25:18
   |
24 |     Returns:
25 |         int: æ–‡ä»¶è¡Œæ•°ï¼›å½“æ–‡ä»¶ä¸å¯è¯»æˆ–è§£ç å¤±è´¥æ—¶è¿”å›ž 0ã€‚
   |                      ^^
26 |
27 |     """
   |

PTH123 `open()` should be replaced by `Path.open()`
  --> scripts/code/analyze_code.py:29:14
   |
27 |     """
28 |     try:
29 |         with open(filepath, encoding="utf-8") as f:
   |              ^^^^
30 |             return len(f.readlines())
31 |     except:
   |
help: Replace with `Path.open()`

E722 Do not use bare `except`
  --> scripts/code/analyze_code.py:31:5
   |
29 |         with open(filepath, encoding="utf-8") as f:
30 |             return len(f.readlines())
31 |     except:
   |     ^^^^^^
32 |         return 0
   |

ANN201 Missing return type annotation for public function `analyze_directory`
  --> scripts/code/analyze_code.py:34:5
   |
32 |         return 0
33 |
34 | def analyze_directory(base_dir, exclude_patterns=None):
   |     ^^^^^^^^^^^^^^^^^
35 |     """åˆ†æžç›®å½•ç»“æž„å’Œä»£ç ç»Ÿè®¡.
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `base_dir`
  --> scripts/code/analyze_code.py:34:23
   |
32 |         return 0
33 |
34 | def analyze_directory(base_dir, exclude_patterns=None):
   |                       ^^^^^^^^
35 |     """åˆ†æžç›®å½•ç»“æž„å’Œä»£ç ç»Ÿè®¡.
   |

ANN001 Missing type annotation for function argument `exclude_patterns`
  --> scripts/code/analyze_code.py:34:33
   |
32 |         return 0
33 |
34 | def analyze_directory(base_dir, exclude_patterns=None):
   |                                 ^^^^^^^^^^^^^^^^
35 |     """åˆ†æžç›®å½•ç»“æž„å’Œä»£ç ç»Ÿè®¡.
   |

PTH118 `os.path.join()` should be replaced by `Path` with `/` operator
  --> scripts/code/analyze_code.py:63:28
   |
61 |         for file in files:
62 |             if file.endswith(valid_extensions):
63 |                 filepath = os.path.join(root, file)
   |                            ^^^^^^^^^^^^
64 |                 lines = count_lines(filepath)
65 |                 rel_path = os.path.relpath(filepath, base_dir)
   |

PTH122 `os.path.splitext()` should be replaced by `Path.suffix`, `Path.stem`, and `Path.parent`
  --> scripts/code/analyze_code.py:66:23
   |
64 |                 lines = count_lines(filepath)
65 |                 rel_path = os.path.relpath(filepath, base_dir)
66 |                 ext = os.path.splitext(file)[1]
   |                       ^^^^^^^^^^^^^^^^
67 |
68 |                 # èŽ·å–ç›®å½•
   |

PTH120 `os.path.dirname()` should be replaced by `Path.parent`
  --> scripts/code/analyze_code.py:69:28
   |
68 |                 # èŽ·å–ç›®å½•
69 |                 dir_path = os.path.dirname(rel_path) if os.path.dirname(rel_path) else "æ ¹ç›®å½•"
   |                            ^^^^^^^^^^^^^^^
70 |
71 |                 files_by_dir[dir_path].append({
   |
help: Replace with `Path(...).parent`

PTH120 `os.path.dirname()` should be replaced by `Path.parent`
  --> scripts/code/analyze_code.py:69:57
   |
68 |                 # èŽ·å–ç›®å½•
69 |                 dir_path = os.path.dirname(rel_path) if os.path.dirname(rel_path) else "æ ¹ç›®å½•"
   |                                                         ^^^^^^^^^^^^^^^
70 |
71 |                 files_by_dir[dir_path].append({
   |
help: Replace with `Path(...).parent`

ANN001 Missing type annotation for function argument `stats`
  --> scripts/code/analyze_code.py:90:19
   |
88 |     }
89 |
90 | def print_summary(stats) -> None:
   |                   ^^^^^
91 |     """æ‰“å°æ±‡æ€»ç»Ÿè®¡ä¿¡æ¯ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> scripts/code/analyze_code.py:97:25
   |
96 |     Returns:
97 |         None: ä»…å‘æ ‡å‡†è¾“å‡ºæ‰“å°ç»“æžœï¼Œä¸è¿”å›žå€¼ã€‚
   |                                   ^^
98 |
99 |     """
   |

ANN001 Missing type annotation for function argument `stats`
   --> scripts/code/analyze_code.py:115:21
    |
113 |     _echo("")
114 |
115 | def print_top_files(stats, top_n=20) -> None:
    |                     ^^^^^
116 |     """å±•ç¤ºè¡Œæ•°æœ€å¤šçš„æ–‡ä»¶åˆ—è¡¨ã€‚.
    |

ANN001 Missing type annotation for function argument `top_n`
   --> scripts/code/analyze_code.py:115:28
    |
113 |     _echo("")
114 |
115 | def print_top_files(stats, top_n=20) -> None:
    |                            ^^^^^
116 |     """å±•ç¤ºè¡Œæ•°æœ€å¤šçš„æ–‡ä»¶åˆ—è¡¨ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/code/analyze_code.py:120:25
    |
118 |     Args:
119 |         stats: åŒ…å« ``files_by_dir`` çš„èšåˆç»Ÿè®¡æ•°æ®ã€‚
120 |         top_n: éœ€è¦å±•ç¤ºçš„æ–‡ä»¶æ•°é‡ï¼Œé»˜è®¤ 20 ä¸ªã€‚
    |                                  ^^
121 |
122 |     Returns:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/code/analyze_code.py:123:24
    |
122 |     Returns:
123 |         None: ç»“æžœæ‰“å°åˆ°æ ‡å‡†è¾“å‡ºï¼Œä¸è¿”å›žå€¼ã€‚
    |                                 ^^
124 |
125 |     """
    |

PERF401 Use `list.extend` to create a transformed list
   --> scripts/code/analyze_code.py:129:13
    |
127 |       for files in stats["files_by_dir"].values():
128 |           for file_info in files:
129 | /             all_files.append({
130 | |                 "path": file_info["name"],
131 | |                 "lines": file_info["lines"],
132 | |             })
    | |______________^
133 |
134 |       all_files.sort(key=lambda x: x["lines"], reverse=True)
    |
help: Replace for loop with list.extend

ANN001 Missing type annotation for function argument `stats`
   --> scripts/code/analyze_code.py:142:20
    |
140 |     _echo("")
141 |
142 | def export_to_json(stats, output_file) -> None:
    |                    ^^^^^
143 |     """å°†ç»Ÿè®¡ç»“æžœå¯¼å‡ºä¸º JSON æ–‡ä»¶ã€‚.
    |

ANN001 Missing type annotation for function argument `output_file`
   --> scripts/code/analyze_code.py:142:27
    |
140 |     _echo("")
141 |
142 | def export_to_json(stats, output_file) -> None:
    |                           ^^^^^^^^^^^
143 |     """å°†ç»Ÿè®¡ç»“æžœå¯¼å‡ºä¸º JSON æ–‡ä»¶ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/code/analyze_code.py:150:27
    |
149 |     Returns:
150 |         None: ä»¥å†™æ–‡ä»¶çš„æ–¹å¼äº§ç”Ÿå‰¯ä½œç”¨ï¼Œä¸è¿”å›žå€¼ã€‚
    |                                       ^^
151 |
152 |     """
    |

PTH123 `open()` should be replaced by `Path.open()`
   --> scripts/code/analyze_code.py:153:10
    |
152 |     """
153 |     with open(output_file, "w", encoding="utf-8") as f:
    |          ^^^^
154 |         json.dump(stats, f, indent=2, ensure_ascii=False)
155 |     _echo(f"ç»Ÿè®¡ç»“æžœå·²å¯¼å‡ºåˆ°: {output_file}")
    |
help: Replace with `Path.open()`

ANN001 Missing type annotation for function argument `stats`
   --> scripts/code/analyze_code.py:157:30
    |
155 |     _echo(f"ç»Ÿè®¡ç»“æžœå·²å¯¼å‡ºåˆ°: {output_file}")
156 |
157 | def generate_markdown_report(stats, output_file) -> None:
    |                              ^^^^^
158 |     """ç”Ÿæˆ Markdown ç‰ˆæœ¬çš„ä»£ç ç»Ÿè®¡æŠ¥å‘Šã€‚.
    |

ANN001 Missing type annotation for function argument `output_file`
   --> scripts/code/analyze_code.py:157:37
    |
155 |     _echo(f"ç»Ÿè®¡ç»“æžœå·²å¯¼å‡ºåˆ°: {output_file}")
156 |
157 | def generate_markdown_report(stats, output_file) -> None:
    |                                     ^^^^^^^^^^^
158 |     """ç”Ÿæˆ Markdown ç‰ˆæœ¬çš„ä»£ç ç»Ÿè®¡æŠ¥å‘Šã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/code/analyze_code.py:165:24
    |
164 |     Returns:
165 |         None: ç»“æžœå†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿï¼Œä¸è¿”å›žå€¼ã€‚
    |                                 ^^
166 |
167 |     """
    |

PTH123 `open()` should be replaced by `Path.open()`
   --> scripts/code/analyze_code.py:168:10
    |
167 |     """
168 |     with open(output_file, "w", encoding="utf-8") as f:
    |          ^^^^
169 |         f.write("# ä»£ç ç»Ÿè®¡æŠ¥å‘Š\n\n")
170 |         f.write(f"ç”Ÿæˆæ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n\n")
    |
help: Replace with `Path.open()`

DTZ005 `datetime.datetime.now()` called without a `tz` argument
   --> scripts/code/analyze_code.py:170:26
    |
168 |     with open(output_file, "w", encoding="utf-8") as f:
169 |         f.write("# ä»£ç ç»Ÿè®¡æŠ¥å‘Š\n\n")
170 |         f.write(f"ç”Ÿæˆæ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n\n")
    |                              ^^^^^^^^^^^^^^
171 |
172 |         f.write("## æ€»ä½“ç»Ÿè®¡\n\n")
    |
help: Pass a `datetime.timezone` object to the `tz` parameter

E501 Line too long (150 > 120)
   --> scripts/code/analyze_code.py:195:121
    |
193 | â€¦
194 | â€¦
195 | â€¦s']} |\n" for file_info in sorted(files, key=lambda x: x["lines"], reverse=True))
    |                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
196 | â€¦
    |

INP001 File `scripts/code/safe_update_code_analysis.py` is part of an implicit namespace package. Add an `__init__.py`.
--> scripts/code/safe_update_code_analysis.py:1:1

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> scripts/code/safe_update_code_analysis.py:3:19
  |
1 | """ç»´æŠ¤ docs/reports/code_analysis_report.md çš„é™æ€ä»£ç åˆ†æžè„šæœ¬ã€‚.
2 |
3 | æ‰«æ app ç›®å½•ç»Ÿè®¡æ–‡ä»¶æ•°é‡ä¸Žè¡Œæ•°ï¼Œç”Ÿæˆ Markdown è¡¨æ ¼å¹¶å†™å›žæŠ¥å‘Šã€‚
  |                                ^^
4 | """
  |

PTH100 `os.path.abspath()` should be replaced by `Path.resolve()`
  --> scripts/code/safe_update_code_analysis.py:13:11
   |
12 | # --- CONFIGURATION ---
13 | APP_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), "../app"))
   |           ^^^^^^^^^^^^^^^
14 | REPORT_PATH = os.path.abspath(os.path.join(os.path.dirname(__file__), "../docs/reports/code_analysis_report.md"))
15 | EXCLUDE_DIRS = [os.path.join(APP_DIR, "static/vendor")]
   |
help: Replace with `Path(...).resolve()`

PTH118 `os.path.join()` should be replaced by `Path` with `/` operator
  --> scripts/code/safe_update_code_analysis.py:13:27
   |
12 | # --- CONFIGURATION ---
13 | APP_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), "../app"))
   |                           ^^^^^^^^^^^^
14 | REPORT_PATH = os.path.abspath(os.path.join(os.path.dirname(__file__), "../docs/reports/code_analysis_report.md"))
15 | EXCLUDE_DIRS = [os.path.join(APP_DIR, "static/vendor")]
   |

PTH120 `os.path.dirname()` should be replaced by `Path.parent`
  --> scripts/code/safe_update_code_analysis.py:13:40
   |
12 | # --- CONFIGURATION ---
13 | APP_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), "../app"))
   |                                        ^^^^^^^^^^^^^^^
14 | REPORT_PATH = os.path.abspath(os.path.join(os.path.dirname(__file__), "../docs/reports/code_analysis_report.md"))
15 | EXCLUDE_DIRS = [os.path.join(APP_DIR, "static/vendor")]
   |
help: Replace with `Path(...).parent`

PTH100 `os.path.abspath()` should be replaced by `Path.resolve()`
  --> scripts/code/safe_update_code_analysis.py:14:15
   |
12 | # --- CONFIGURATION ---
13 | APP_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), "../app"))
14 | REPORT_PATH = os.path.abspath(os.path.join(os.path.dirname(__file__), "../docs/reports/code_analysis_report.md"))
   |               ^^^^^^^^^^^^^^^
15 | EXCLUDE_DIRS = [os.path.join(APP_DIR, "static/vendor")]
16 | FILE_EXTENSIONS = (".py", ".js", ".html", ".css", ".yaml", ".yml")
   |
help: Replace with `Path(...).resolve()`

PTH118 `os.path.join()` should be replaced by `Path` with `/` operator
  --> scripts/code/safe_update_code_analysis.py:14:31
   |
12 | # --- CONFIGURATION ---
13 | APP_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), "../app"))
14 | REPORT_PATH = os.path.abspath(os.path.join(os.path.dirname(__file__), "../docs/reports/code_analysis_report.md"))
   |                               ^^^^^^^^^^^^
15 | EXCLUDE_DIRS = [os.path.join(APP_DIR, "static/vendor")]
16 | FILE_EXTENSIONS = (".py", ".js", ".html", ".css", ".yaml", ".yml")
   |

PTH120 `os.path.dirname()` should be replaced by `Path.parent`
  --> scripts/code/safe_update_code_analysis.py:14:44
   |
12 | # --- CONFIGURATION ---
13 | APP_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), "../app"))
14 | REPORT_PATH = os.path.abspath(os.path.join(os.path.dirname(__file__), "../docs/reports/code_analysis_report.md"))
   |                                            ^^^^^^^^^^^^^^^
15 | EXCLUDE_DIRS = [os.path.join(APP_DIR, "static/vendor")]
16 | FILE_EXTENSIONS = (".py", ".js", ".html", ".css", ".yaml", ".yml")
   |
help: Replace with `Path(...).parent`

PTH118 `os.path.join()` should be replaced by `Path` with `/` operator
  --> scripts/code/safe_update_code_analysis.py:15:17
   |
13 | APP_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), "../app"))
14 | REPORT_PATH = os.path.abspath(os.path.join(os.path.dirname(__file__), "../docs/reports/code_analysis_report.md"))
15 | EXCLUDE_DIRS = [os.path.join(APP_DIR, "static/vendor")]
   |                 ^^^^^^^^^^^^
16 | FILE_EXTENSIONS = (".py", ".js", ".html", ".css", ".yaml", ".yml")
   |

ANN201 Missing return type annotation for public function `analyze_directory`
  --> scripts/code/safe_update_code_analysis.py:23:5
   |
21 | # --- ANALYSIS FUNCTIONS ---
22 |
23 | def analyze_directory(path, exclude_dirs, extensions):
   |     ^^^^^^^^^^^^^^^^^
24 |     """æ‰«æç›®å½•å¹¶åº”ç”¨æŽ’é™¤ä¸Žæ‰©å±•åè¿‡æ»¤è§„åˆ™ã€‚.
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `path`
  --> scripts/code/safe_update_code_analysis.py:23:23
   |
21 | # --- ANALYSIS FUNCTIONS ---
22 |
23 | def analyze_directory(path, exclude_dirs, extensions):
   |                       ^^^^
24 |     """æ‰«æç›®å½•å¹¶åº”ç”¨æŽ’é™¤ä¸Žæ‰©å±•åè¿‡æ»¤è§„åˆ™ã€‚.
   |

ANN001 Missing type annotation for function argument `exclude_dirs`
  --> scripts/code/safe_update_code_analysis.py:23:29
   |
21 | # --- ANALYSIS FUNCTIONS ---
22 |
23 | def analyze_directory(path, exclude_dirs, extensions):
   |                             ^^^^^^^^^^^^
24 |     """æ‰«æç›®å½•å¹¶åº”ç”¨æŽ’é™¤ä¸Žæ‰©å±•åè¿‡æ»¤è§„åˆ™ã€‚.
   |

ANN001 Missing type annotation for function argument `extensions`
  --> scripts/code/safe_update_code_analysis.py:23:43
   |
21 | # --- ANALYSIS FUNCTIONS ---
22 |
23 | def analyze_directory(path, exclude_dirs, extensions):
   |                                           ^^^^^^^^^^
24 |     """æ‰«æç›®å½•å¹¶åº”ç”¨æŽ’é™¤ä¸Žæ‰©å±•åè¿‡æ»¤è§„åˆ™ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> scripts/code/safe_update_code_analysis.py:29:31
   |
27 |         path: éœ€è¦åˆ†æžçš„åº”ç”¨ç›®å½•ç»å¯¹è·¯å¾„ã€‚
28 |         exclude_dirs: éœ€è¦å¿½ç•¥çš„å­ç›®å½•å‰ç¼€åˆ—è¡¨ã€‚
29 |         extensions: å…è®¸ç»Ÿè®¡çš„æ–‡ä»¶æ‰©å±•åï¼ŒåŒ…å«å¼€å¤´çš„ç‚¹ã€‚
   |                                         ^^
30 |
31 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> scripts/code/safe_update_code_analysis.py:33:27
   |
31 |     Returns:
32 |         tuple[dict[str, dict[str, int]], list[dict[str, int]]]:
33 |         ç¬¬ä¸€ä¸ªå…ƒç´ æŒ‰æ‰©å±•åèšåˆæ–‡ä»¶æ•°é‡ä¸Žè¡Œæ•°ï¼Œç¬¬äºŒä¸ªå…ƒç´ åˆ—å‡ºå•ä¸ªæ–‡ä»¶
   |                                             ^^
34 |         çš„è·¯å¾„å’Œè¡Œæ•°ï¼Œä¾›åŽç»­æŠ¥å‘Šç”Ÿæˆä½¿ç”¨ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> scripts/code/safe_update_code_analysis.py:34:15
   |
32 |         tuple[dict[str, dict[str, int]], list[dict[str, int]]]:
33 |         ç¬¬ä¸€ä¸ªå…ƒç´ æŒ‰æ‰©å±•åèšåˆæ–‡ä»¶æ•°é‡ä¸Žè¡Œæ•°ï¼Œç¬¬äºŒä¸ªå…ƒç´ åˆ—å‡ºå•ä¸ªæ–‡ä»¶
34 |         çš„è·¯å¾„å’Œè¡Œæ•°ï¼Œä¾›åŽç»­æŠ¥å‘Šç”Ÿæˆä½¿ç”¨ã€‚
   |                     ^^
35 |
36 |     """
   |

PTH118 `os.path.join()` should be replaced by `Path` with `/` operator
  --> scripts/code/safe_update_code_analysis.py:48:25
   |
46 |                 continue
47 |
48 |             file_path = os.path.join(root, file)
   |                         ^^^^^^^^^^^^
49 |             try:
50 |                 with open(file_path, encoding="utf-8", errors="ignore") as f:
   |

PTH123 `open()` should be replaced by `Path.open()`
  --> scripts/code/safe_update_code_analysis.py:50:22
   |
48 |             file_path = os.path.join(root, file)
49 |             try:
50 |                 with open(file_path, encoding="utf-8", errors="ignore") as f:
   |                      ^^^^
51 |                     line_count = sum(1 for _ in f)
52 |             except OSError:
   |
help: Replace with `Path.open()`

PTH122 `os.path.splitext()` should be replaced by `Path.suffix`, `Path.stem`, and `Path.parent`
  --> scripts/code/safe_update_code_analysis.py:55:19
   |
53 |                 line_count = 0
54 |
55 |             ext = os.path.splitext(file)[1].upper().replace(".", "")
   |                   ^^^^^^^^^^^^^^^^
56 |             if ext == "YML": ext = "YAML"
   |

E701 Multiple statements on one line (colon)
  --> scripts/code/safe_update_code_analysis.py:56:28
   |
55 |             ext = os.path.splitext(file)[1].upper().replace(".", "")
56 |             if ext == "YML": ext = "YAML"
   |                            ^
57 |
58 |             file_stats[ext]["count"] += 1
   |

ANN201 Missing return type annotation for public function `get_directory_breakdown`
  --> scripts/code/safe_update_code_analysis.py:67:5
   |
65 |     return dict(file_stats), detailed_files
66 |
67 | def get_directory_breakdown(detailed_files):
   |     ^^^^^^^^^^^^^^^^^^^^^^^
68 |     """æŒ‰å­ç›®å½•èšåˆæ–‡ä»¶ç»Ÿè®¡æ•°æ®ã€‚.
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `detailed_files`
  --> scripts/code/safe_update_code_analysis.py:67:29
   |
65 |     return dict(file_stats), detailed_files
66 |
67 | def get_directory_breakdown(detailed_files):
   |                             ^^^^^^^^^^^^^^
68 |     """æŒ‰å­ç›®å½•èšåˆæ–‡ä»¶ç»Ÿè®¡æ•°æ®ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> scripts/code/safe_update_code_analysis.py:71:56
   |
70 |     Args:
71 |         detailed_files: ``analyze_directory`` è¿”å›žçš„æ–‡ä»¶ä¿¡æ¯åˆ—è¡¨ï¼ŒåŒ…å«ç›¸å¯¹
   |                                                                 ^^
72 |             è·¯å¾„ä¸Žè¡Œæ•°ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> scripts/code/safe_update_code_analysis.py:75:50
   |
74 |     Returns:
75 |         dict[str, dict[str, object]]: ä»¥ç›®å½•åä¸ºé”®çš„ç»Ÿè®¡ç»“æžœï¼Œè®°å½•æ–‡ä»¶æ•°ã€
   |                                                             ^^
76 |         è¡Œæ•°ä»¥åŠæŽ’åºåŽçš„æ–‡ä»¶è¯¦æƒ…ã€‚
   |

PTH120 `os.path.dirname()` should be replaced by `Path.parent`
  --> scripts/code/safe_update_code_analysis.py:81:20
   |
79 |     breakdown = defaultdict(lambda: {"count": 0, "lines": 0, "files": []})
80 |     for file_info in detailed_files:
81 |         dir_name = os.path.dirname(file_info["path"])
   |                    ^^^^^^^^^^^^^^^
82 |         dir_name = "app æ ¹ç›®å½•" if dir_name == "" else f"app/{dir_name}"
   |
help: Replace with `Path(...).parent`

ANN201 Missing return type annotation for public function `generate_file_type_table`
  --> scripts/code/safe_update_code_analysis.py:96:5
   |
94 | # --- MARKDOWN GENERATION ---
95 |
96 | def generate_file_type_table(stats, total_files, total_lines):
   |     ^^^^^^^^^^^^^^^^^^^^^^^^
97 |     """ç”Ÿæˆæ–‡ä»¶ç±»åž‹åˆ†å¸ƒçš„ Markdown è¡¨æ ¼ã€‚.
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `stats`
  --> scripts/code/safe_update_code_analysis.py:96:30
   |
94 | # --- MARKDOWN GENERATION ---
95 |
96 | def generate_file_type_table(stats, total_files, total_lines):
   |                              ^^^^^
97 |     """ç”Ÿæˆæ–‡ä»¶ç±»åž‹åˆ†å¸ƒçš„ Markdown è¡¨æ ¼ã€‚.
   |

ANN001 Missing type annotation for function argument `total_files`
  --> scripts/code/safe_update_code_analysis.py:96:37
   |
94 | # --- MARKDOWN GENERATION ---
95 |
96 | def generate_file_type_table(stats, total_files, total_lines):
   |                                     ^^^^^^^^^^^
97 |     """ç”Ÿæˆæ–‡ä»¶ç±»åž‹åˆ†å¸ƒçš„ Markdown è¡¨æ ¼ã€‚.
   |

ANN001 Missing type annotation for function argument `total_lines`
  --> scripts/code/safe_update_code_analysis.py:96:50
   |
94 | # --- MARKDOWN GENERATION ---
95 |
96 | def generate_file_type_table(stats, total_files, total_lines):
   |                                                  ^^^^^^^^^^^
97 |     """ç”Ÿæˆæ–‡ä»¶ç±»åž‹åˆ†å¸ƒçš„ Markdown è¡¨æ ¼ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/code/safe_update_code_analysis.py:100:27
    |
 99 |     Args:
100 |         stats: ä»¥æ‰©å±•åä¸ºé”®çš„ç»Ÿè®¡å­—å…¸ï¼ŒåŒ…å« ``count`` ä¸Ž ``lines``ã€‚
    |                                      ^^
101 |         total_files: æ‰€æœ‰æ‰©å±•åçš„æ–‡ä»¶æ€»æ•°ã€‚
102 |         total_lines: æ‰€æœ‰æ‰©å±•åçš„æ€»è¡Œæ•°ã€‚
    |

ANN201 Missing return type annotation for public function `generate_directory_detail_table`
   --> scripts/code/safe_update_code_analysis.py:118:5
    |
116 |     return "\n".join(table)
117 |
118 | def generate_directory_detail_table(file_list):
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
119 |     """ç”Ÿæˆå•ä¸ªç›®å½•çš„æ–‡ä»¶æ˜Žç»†è¡¨æ ¼ã€‚.
    |
help: Add return type annotation

ANN001 Missing type annotation for function argument `file_list`
   --> scripts/code/safe_update_code_analysis.py:118:37
    |
116 |     return "\n".join(table)
117 |
118 | def generate_directory_detail_table(file_list):
    |                                     ^^^^^^^^^
119 |     """ç”Ÿæˆå•ä¸ªç›®å½•çš„æ–‡ä»¶æ˜Žç»†è¡¨æ ¼ã€‚.
    |

PERF401 Use `list.extend` to create a transformed list
   --> scripts/code/safe_update_code_analysis.py:132:9
    |
130 |         # In a real scenario, you might have a way to get descriptions.
131 |         # For now, we leave it blank.
132 |         table.append(f"| `app/{file_info['path']}` | {file_info['lines']} |          |")
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
133 |     return "\n".join(table)
    |
help: Replace for loop with list.extend

ANN001 Missing type annotation for function argument `report_path`
   --> scripts/code/safe_update_code_analysis.py:137:19
    |
135 | # --- REPORT UPDATE FUNCTION ---
136 |
137 | def update_report(report_path, content) -> None:
    |                   ^^^^^^^^^^^
138 |     """å°†ç”Ÿæˆçš„æŠ¥å‘Šå†…å®¹å†™å›žç£ç›˜ã€‚.
    |

ANN001 Missing type annotation for function argument `content`
   --> scripts/code/safe_update_code_analysis.py:137:32
    |
135 | # --- REPORT UPDATE FUNCTION ---
136 |
137 | def update_report(report_path, content) -> None:
    |                                ^^^^^^^
138 |     """å°†ç”Ÿæˆçš„æŠ¥å‘Šå†…å®¹å†™å›žç£ç›˜ã€‚.
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/code/safe_update_code_analysis.py:145:25
    |
144 |     Returns:
145 |         None: é€šè¿‡å†™æ–‡ä»¶äº§ç”Ÿå‰¯ä½œç”¨ï¼Œä¸è¿”å›žå€¼ã€‚
    |                                   ^^
146 |
147 |     """
    |

PTH123 `open()` should be replaced by `Path.open()`
   --> scripts/code/safe_update_code_analysis.py:149:14
    |
147 |     """
148 |     try:
149 |         with open(report_path, "w", encoding="utf-8") as f:
    |              ^^^^
150 |             f.write(content)
151 |         LOGGER.info("æŠ¥å‘Šå·²æˆåŠŸæ›´æ–°: %s", report_path)
    |
help: Replace with `Path.open()`

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> scripts/code/safe_update_code_analysis.py:153:29
    |
151 |         LOGGER.info("æŠ¥å‘Šå·²æˆåŠŸæ›´æ–°: %s", report_path)
152 |     except OSError as e:
153 |         LOGGER.exception("é”™è¯¯ï¼šæ— æ³•å†™å…¥æŠ¥å‘Šæ–‡ä»¶ %sã€‚é”™è¯¯ä¿¡æ¯: %s", report_path, e)
    |                               ^^
154 |
155 | def main() -> None:
    |

TRY401 Redundant exception object included in `logging.exception` call
   --> scripts/code/safe_update_code_analysis.py:153:66
    |
151 |         LOGGER.info("æŠ¥å‘Šå·²æˆåŠŸæ›´æ–°: %s", report_path)
152 |     except OSError as e:
153 |         LOGGER.exception("é”™è¯¯ï¼šæ— æ³•å†™å…¥æŠ¥å‘Šæ–‡ä»¶ %sã€‚é”™è¯¯ä¿¡æ¯: %s", report_path, e)
    |                                                                                  ^
154 |
155 | def main() -> None:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/code/safe_update_code_analysis.py:159:25
    |
158 |     Returns:
159 |         None: ä»¥ CLI å½¢å¼è¿è¡Œï¼Œä»…æ‰“å°æ—¥å¿—å¹¶å†™å…¥æ–‡ä»¶ã€‚
    |                              ^^
160 |
161 |     """
    |

PTH123 `open()` should be replaced by `Path.open()`
   --> scripts/code/safe_update_code_analysis.py:170:14
    |
168 |     LOGGER.info("æ­£åœ¨è¯»å–åŽŸå§‹æŠ¥å‘Š...")
169 |     try:
170 |         with open(REPORT_PATH, encoding="utf-8") as f:
    |              ^^^^
171 |             original_content = f.read()
172 |     except FileNotFoundError:
    |
help: Replace with `Path.open()`

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> scripts/code/safe_update_code_analysis.py:177:63
    |
176 |     # --- Replace Project Overview ---
177 |     overview_section = f"## é¡¹ç›®æ¦‚è§ˆ\n- **æ€»æ–‡ä»¶æ•°**: {total_files}ä¸ªæ–‡ä»¶ï¼ˆä»…ç»Ÿè®¡ä»£ç æ–‡ä»¶ï¼Œä¸åŒ…å« `app/static/vendor`ï¼‰\n- **æ€»ä»£ç è¡Œ                           â€¦
    |                                                                          ^^
178 |     new_content = re.sub(r"## é¡¹ç›®æ¦‚è§ˆ\n- \*\*æ€»æ–‡ä»¶æ•°\*\*:.*?è¡Œï¼ˆ.*?ï¼‰", overview_section, original_content, flags=re.DOTALL)
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/code/safe_update_code_analysis.py:177:71
    |
176 |     # --- Replace Project Overview ---
177 |     overview_section = f"## é¡¹ç›®æ¦‚è§ˆ\n- **æ€»æ–‡ä»¶æ•°**: {total_files}ä¸ªæ–‡ä»¶ï¼ˆä»…ç»Ÿè®¡ä»£ç æ–‡ä»¶ï¼Œä¸åŒ…å« `app/static/vendor`ï¼‰\n- **æ€»ä»£ç è¡Œ                           â€¦
    |                                                                                          ^^
178 |     new_content = re.sub(r"## é¡¹ç›®æ¦‚è§ˆ\n- \*\*æ€»æ–‡ä»¶æ•°\*\*:.*?è¡Œï¼ˆ.*?ï¼‰", overview_section, original_content, flags=re.DOTALL)
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> scripts/code/safe_update_code_analysis.py:177:95
    |
176 |     # --- Replace Project Overview ---
177 |     overview_section = f"## é¡¹ç›®æ¦‚è§ˆ\n- **æ€»æ–‡ä»¶æ•°**: {total_files}ä¸ªæ–‡ä»¶ï¼ˆä»…ç»Ÿè®¡ä»£ç æ–‡ä»¶ï¼Œä¸åŒ…å« `app/static/vendor`ï¼‰\n- **æ€»ä»£ç è¡Œ                           â€¦
    |                                                                                                                      ^^
178 |     new_content = re.sub(r"## é¡¹ç›®æ¦‚è§ˆ\n- \*\*æ€»æ–‡ä»¶æ•°\*\*:.*?è¡Œï¼ˆ.*?ï¼‰", overview_section, original_content, flags=re.DOTALL)
    |

E501 Line too long (190 > 120)
   --> scripts/code/safe_update_code_analysis.py:177:97
    |
176 | â€¦
177 | â€¦ndor`ï¼‰\n- **æ€»ä»£ç è¡Œæ•°**: {total_lines:,}è¡Œï¼ˆ.py/.html/.js/.css/.yaml/.ymlï¼‰"
    |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
178 | â€¦_content, flags=re.DOTALL)
    |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> scripts/code/safe_update_code_analysis.py:177:127
    |
176 | â€¦
177 | â€¦or`ï¼‰\n- **æ€»ä»£ç è¡Œæ•°**: {total_lines:,}è¡Œï¼ˆ.py/.html/.js/.css/.yaml/.ymlï¼‰"
    |                                            ^^
178 | â€¦ontent, flags=re.DOTALL)
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> scripts/code/safe_update_code_analysis.py:177:157
    |
176 | â€¦
177 | â€¦:,}è¡Œï¼ˆ.py/.html/.js/.css/.yaml/.ymlï¼‰"
    |                                      ^^
178 | â€¦
    |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> scripts/code/safe_update_code_analysis.py:178:56
    |
176 |     # --- Replace Project Overview ---
177 |     overview_section = f"## é¡¹ç›®æ¦‚è§ˆ\n- **æ€»æ–‡ä»¶æ•°**: {total_files}ä¸ªæ–‡ä»¶ï¼ˆä»…ç»Ÿè®¡ä»£ç æ–‡ä»¶ï¼Œä¸åŒ…å« `app/static/vendor`ï¼‰\n- **æ€»ä»£ç è¡Œ                           â€¦
178 |     new_content = re.sub(r"## é¡¹ç›®æ¦‚è§ˆ\n- \*\*æ€»æ–‡ä»¶æ•°\*\*:.*?è¡Œï¼ˆ.*?ï¼‰", overview_section, original_content, flags=re.DOTALL)
    |                                                                 ^^
179 |
180 |     # --- Replace File Type Distribution Table ---
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> scripts/code/safe_update_code_analysis.py:178:60
    |
176 |     # --- Replace Project Overview ---
177 |     overview_section = f"## é¡¹ç›®æ¦‚è§ˆ\n- **æ€»æ–‡ä»¶æ•°**: {total_files}ä¸ªæ–‡ä»¶ï¼ˆä»…ç»Ÿè®¡ä»£ç æ–‡ä»¶ï¼Œä¸åŒ…å« `app/static/vendor`ï¼‰\n- **æ€»ä»£ç è¡Œ                           â€¦
178 |     new_content = re.sub(r"## é¡¹ç›®æ¦‚è§ˆ\n- \*\*æ€»æ–‡ä»¶æ•°\*\*:.*?è¡Œï¼ˆ.*?ï¼‰", overview_section, original_content, flags=re.DOTALL)
    |                                                                      ^^
179 |
180 |     # --- Replace File Type Distribution Table ---
    |

E501 Line too long (126 > 120)
   --> scripts/code/safe_update_code_analysis.py:178:110
    |
176 |     # --- Replace Project Overview ---
177 |     overview_section = f"## é¡¹ç›®æ¦‚è§ˆ\n- **æ€»æ–‡ä»¶æ•°**: {total_files}ä¸ªæ–‡ä»¶ï¼ˆä»…ç»Ÿè®¡ä»£ç æ–‡ä»¶ï¼Œä¸åŒ…å« `app/static/vendor`ï¼‰\n- **æ€»ä»£ç è¡Œ                           â€¦
178 |     new_content = re.sub(r"## é¡¹ç›®æ¦‚è§ˆ\n- \*\*æ€»æ–‡ä»¶æ•°\*\*:.*?è¡Œï¼ˆ.*?ï¼‰", overview_section, original_content, flags=re.DOTALL)
    |                                                                                                                         ^^^^^^
179 |
180 |     # --- Replace File Type Distribution Table ---
    |

E501 Line too long (123 > 120)
   --> scripts/code/safe_update_code_analysis.py:183:115
    |
181 |     file_type_table = generate_file_type_table(file_stats, total_files, total_lines)
182 |     dist_header = "### æ–‡ä»¶ç±»åž‹åˆ†å¸ƒ"
183 |     new_content = re.sub(f"({dist_header}\n)(\\| æ–‡ä»¶ç±»åž‹.*?\\|.*?\\|\n(?:\\|---.*?\\|\n)+)(?:\\| \\*\\*æ€»è®¡\\*\\*.*?\\|)",
    |                                                                                                                         ^^^
184 |                          f"\1{file_type_table}", new_content, flags=re.DOTALL)
    |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> scripts/code/safe_update_code_analysis.py:189:43
    |
187 |     dir_breakdown = get_directory_breakdown(detailed_files)
188 |
189 |     dir_analysis_start_marker = "## ç›®å½•ç»“æž„åˆ†æžï¼ˆapp/ï¼‰"
    |                                                 ^^
190 |     quality_analysis_start_marker = "## ä»£ç è´¨é‡åˆ†æž"
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> scripts/code/safe_update_code_analysis.py:189:48
    |
187 |     dir_breakdown = get_directory_breakdown(detailed_files)
188 |
189 |     dir_analysis_start_marker = "## ç›®å½•ç»“æž„åˆ†æžï¼ˆapp/ï¼‰"
    |                                                       ^^
190 |     quality_analysis_start_marker = "## ä»£ç è´¨é‡åˆ†æž"
    |

E501 Line too long (122 > 120)
   --> scripts/code/safe_update_code_analysis.py:202:118
    |
201 |         # Manually order some key directories first
202 |         order = ["app æ ¹ç›®å½•", "app/routes", "app/models", "app/services", "app/utils", "app/static/js", "app/static/css"]
    |                                                                                                                         ^^
203 |         sorted_dir_keys = [d for d in order if d in dir_breakdown] + [d for d in sorted(dir_breakdown.keys()) if d not in order]
    |

E501 Line too long (128 > 120)
   --> scripts/code/safe_update_code_analysis.py:203:121
    |
201 |         # Manually order some key directories first
202 |         order = ["app æ ¹ç›®å½•", "app/routes", "app/models", "app/services", "app/utils", "app/static/js", "app/static/css"]
203 |         sorted_dir_keys = [d for d in order if d in dir_breakdown] + [d for d in sorted(dir_breakdown.keys()) if d not in order]
    |                                                                                                                         ^^^^^^^^
204 |
205 |         for i, dir_name in enumerate(sorted_dir_keys, 1):
    |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> scripts/code/safe_update_code_analysis.py:209:39
    |
207 |             display_name = dir_name.replace("app/", "").replace("app ", "")
208 |             if display_name == "æ ¹ç›®å½•":
209 |                 display_name = "æ ¸å¿ƒåº”ç”¨æ–‡ä»¶ï¼ˆapp æ ¹ç›®å½•ï¼‰"
    |                                             ^^
210 |             else:
211 |                 display_name = f"{display_name.replace('/', ' ').title()}æ¨¡å—ï¼ˆ{dir_name}/ï¼‰"
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> scripts/code/safe_update_code_analysis.py:209:47
    |
207 |             display_name = dir_name.replace("app/", "").replace("app ", "")
208 |             if display_name == "æ ¹ç›®å½•":
209 |                 display_name = "æ ¸å¿ƒåº”ç”¨æ–‡ä»¶ï¼ˆapp æ ¹ç›®å½•ï¼‰"
    |                                                         ^^
210 |             else:
211 |                 display_name = f"{display_name.replace('/', ' ').title()}æ¨¡å—ï¼ˆ{dir_name}/ï¼‰"
    |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> scripts/code/safe_update_code_analysis.py:211:76
    |
209 |                 display_name = "æ ¸å¿ƒåº”ç”¨æ–‡ä»¶ï¼ˆapp æ ¹ç›®å½•ï¼‰"
210 |             else:
211 |                 display_name = f"{display_name.replace('/', ' ').title()}æ¨¡å—ï¼ˆ{dir_name}/ï¼‰"
    |                                                                              ^^
212 |
213 |             new_dir_analysis_section.append(f"### {i}. {display_name}")
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> scripts/code/safe_update_code_analysis.py:211:88
    |
209 |                 display_name = "æ ¸å¿ƒåº”ç”¨æ–‡ä»¶ï¼ˆapp æ ¹ç›®å½•ï¼‰"
210 |             else:
211 |                 display_name = f"{display_name.replace('/', ' ').title()}æ¨¡å—ï¼ˆ{dir_name}/ï¼‰"
    |                                                                                           ^^
212 |
213 |             new_dir_analysis_section.append(f"### {i}. {display_name}")
    |

DTZ005 `datetime.datetime.now()` called without a `tz` argument
   --> scripts/code/safe_update_code_analysis.py:224:36
    |
223 |         # Add a timestamp before the final appendix
224 |         timestamp = f"\n*æŠ¥å‘Šæœ€åŽæ›´æ–°äºŽ: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}*\n"
    |                                           ^^^^^^^^^^^^^^
225 |         final_content = final_content.replace("## é™„å½•", f"{timestamp}\n## é™„å½•")
    |
help: Pass a `datetime.timezone` object to the `tz` parameter

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> scripts/code/safe_update_code_analysis.py:230:55
    |
229 |     except ValueError:
230 |         LOGGER.exception("é”™è¯¯: æ— æ³•åœ¨æŠ¥å‘Šä¸­æ‰¾åˆ°é¢„æœŸçš„æ ‡è®° '## ç›®å½•ç»“æž„åˆ†æžï¼ˆapp/ï¼‰' æˆ– '## ä»£ç è´¨é‡åˆ†æž'ã€‚æ›´æ–°ä¸­æ­¢ã€‚")
    |                                                                            ^^
231 |
232 | if __name__ == "__main__":
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> scripts/code/safe_update_code_analysis.py:230:60
    |
229 |     except ValueError:
230 |         LOGGER.exception("é”™è¯¯: æ— æ³•åœ¨æŠ¥å‘Šä¸­æ‰¾åˆ°é¢„æœŸçš„æ ‡è®° '## ç›®å½•ç»“æž„åˆ†æžï¼ˆapp/ï¼‰' æˆ– '## ä»£ç è´¨é‡åˆ†æž'ã€‚æ›´æ–°ä¸­æ­¢ã€‚")
    |                                                                                  ^^
231 |
232 | if __name__ == "__main__":
    |

EXE001 Shebang is present but file is not executable
 --> scripts/crud_smoke.py:1:1
  |
1 | #!/usr/bin/env python3
  | ^^^^^^^^^^^^^^^^^^^^^^
2 | """CRUD åœºæ™¯çƒŸé›¾æµ‹è¯•è„šæœ¬ã€‚.
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
 --> scripts/crud_smoke.py:4:36
  |
2 | """CRUD åœºæ™¯çƒŸé›¾æµ‹è¯•è„šæœ¬ã€‚.
3 |
4 | è¯¥è„šæœ¬é€šè¿‡é…ç½®åŒ–æ–¹å¼å¯¹æŒ‡å®šèµ„æºå®Œæˆâ€œæ–°å¢ž-æŸ¥è¯¢-æ›´æ–°-åˆ é™¤â€å…¨é“¾è·¯æ ¡éªŒï¼Œ
  |                                                                  ^^
5 | é»˜è®¤è°ƒç”¨æ­£åœ¨è¿è¡Œçš„ Flask æœåŠ¡æŽ¥å£ï¼š
  |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
 --> scripts/crud_smoke.py:5:21
  |
4 | è¯¥è„šæœ¬é€šè¿‡é…ç½®åŒ–æ–¹å¼å¯¹æŒ‡å®šèµ„æºå®Œæˆâ€œæ–°å¢ž-æŸ¥è¯¢-æ›´æ–°-åˆ é™¤â€å…¨é“¾è·¯æ ¡éªŒï¼Œ
5 | é»˜è®¤è°ƒç”¨æ­£åœ¨è¿è¡Œçš„ Flask æœåŠ¡æŽ¥å£ï¼š
  |                                  ^^
6 |
7 | 1. å…ˆèŽ·å– CSRF ä»¤ç‰Œå¹¶å®Œæˆç™»å½•ï¼›
  |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
 --> scripts/crud_smoke.py:7:20
  |
5 | é»˜è®¤è°ƒç”¨æ­£åœ¨è¿è¡Œçš„ Flask æœåŠ¡æŽ¥å£ï¼š
6 |
7 | 1. å…ˆèŽ·å– CSRF ä»¤ç‰Œå¹¶å®Œæˆç™»å½•ï¼›
  |                              ^^
8 | 2. æ ¹æ® YAML åœºæ™¯é…ç½®é€æ­¥å‘é€è¯·æ±‚ï¼Œè‡ªåŠ¨æ›¿æ¢å˜é‡ã€å†™å…¥ä¸Šä¸‹æ–‡ï¼›
9 | 3. æ ¡éªŒ HTTP çŠ¶æ€ç ä»¥åŠå…³é”® JSON å­—æ®µï¼›
  |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> scripts/crud_smoke.py:8:22
   |
 7 | 1. å…ˆèŽ·å– CSRF ä»¤ç‰Œå¹¶å®Œæˆç™»å½•ï¼›
 8 | 2. æ ¹æ® YAML åœºæ™¯é…ç½®é€æ­¥å‘é€è¯·æ±‚ï¼Œè‡ªåŠ¨æ›¿æ¢å˜é‡ã€å†™å…¥ä¸Šä¸‹æ–‡ï¼›
   |                                  ^^
 9 | 3. æ ¡éªŒ HTTP çŠ¶æ€ç ä»¥åŠå…³é”® JSON å­—æ®µï¼›
10 | 4. å°†æ¯ä¸€æ­¥çš„ç»“æžœæ‰“å°ä¸ºä¸­æ–‡æŠ¥å‘Šï¼Œå¤±è´¥æ—¶è¿”å›žéžé›¶çŠ¶æ€ç ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
  --> scripts/crud_smoke.py:8:35
   |
 7 | 1. å…ˆèŽ·å– CSRF ä»¤ç‰Œå¹¶å®Œæˆç™»å½•ï¼›
 8 | 2. æ ¹æ® YAML åœºæ™¯é…ç½®é€æ­¥å‘é€è¯·æ±‚ï¼Œè‡ªåŠ¨æ›¿æ¢å˜é‡ã€å†™å…¥ä¸Šä¸‹æ–‡ï¼›
   |                                                            ^^
 9 | 3. æ ¡éªŒ HTTP çŠ¶æ€ç ä»¥åŠå…³é”® JSON å­—æ®µï¼›
10 | 4. å°†æ¯ä¸€æ­¥çš„ç»“æžœæ‰“å°ä¸ºä¸­æ–‡æŠ¥å‘Šï¼Œå¤±è´¥æ—¶è¿”å›žéžé›¶çŠ¶æ€ç ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
  --> scripts/crud_smoke.py:9:27
   |
 7 | 1. å…ˆèŽ·å– CSRF ä»¤ç‰Œå¹¶å®Œæˆç™»å½•ï¼›
 8 | 2. æ ¹æ® YAML åœºæ™¯é…ç½®é€æ­¥å‘é€è¯·æ±‚ï¼Œè‡ªåŠ¨æ›¿æ¢å˜é‡ã€å†™å…¥ä¸Šä¸‹æ–‡ï¼›
 9 | 3. æ ¡éªŒ HTTP çŠ¶æ€ç ä»¥åŠå…³é”® JSON å­—æ®µï¼›
   |                                      ^^
10 | 4. å°†æ¯ä¸€æ­¥çš„ç»“æžœæ‰“å°ä¸ºä¸­æ–‡æŠ¥å‘Šï¼Œå¤±è´¥æ—¶è¿”å›žéžé›¶çŠ¶æ€ç ã€‚
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> scripts/crud_smoke.py:10:18
   |
 8 | 2. æ ¹æ® YAML åœºæ™¯é…ç½®é€æ­¥å‘é€è¯·æ±‚ï¼Œè‡ªåŠ¨æ›¿æ¢å˜é‡ã€å†™å…¥ä¸Šä¸‹æ–‡ï¼›
 9 | 3. æ ¡éªŒ HTTP çŠ¶æ€ç ä»¥åŠå…³é”® JSON å­—æ®µï¼›
10 | 4. å°†æ¯ä¸€æ­¥çš„ç»“æžœæ‰“å°ä¸ºä¸­æ–‡æŠ¥å‘Šï¼Œå¤±è´¥æ—¶è¿”å›žéžé›¶çŠ¶æ€ç ã€‚
   |                                ^^
11 |
12 | ç¤ºä¾‹ç”¨æ³•ï¼š
   |

RUF002 Docstring contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
  --> scripts/crud_smoke.py:12:5
   |
10 | 4. å°†æ¯ä¸€æ­¥çš„ç»“æžœæ‰“å°ä¸ºä¸­æ–‡æŠ¥å‘Šï¼Œå¤±è´¥æ—¶è¿”å›žéžé›¶çŠ¶æ€ç ã€‚
11 |
12 | ç¤ºä¾‹ç”¨æ³•ï¼š
   |         ^^
13 |
14 |     python scripts/crud_smoke.py \
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> scripts/crud_smoke.py:19:27
   |
17 |         --username admin --password secret
18 |
19 | å¯ä»¥é…åˆ `--dry-run` å…ˆéªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œå†è¿žæŽ¥çœŸå®žçŽ¯å¢ƒæ‰§è¡Œã€‚
   |                                        ^^
20 | """
   |

TRY004 Prefer `TypeError` exception for invalid type
  --> scripts/crud_smoke.py:81:9
   |
79 |     if not isinstance(scenarios, list):
80 |         msg = "'scenarios' å¿…é¡»æ˜¯åˆ—è¡¨"
81 |         raise ValueError(msg)
   |         ^^^^^^^^^^^^^^^^^^^^^
82 |     return [s for s in scenarios if isinstance(s, Mapping)]
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `value`
  --> scripts/crud_smoke.py:85:28
   |
85 | def render_template(value: Any, context: Mapping[str, Any]) -> Any:
   |                            ^^^
86 |     """é€’å½’æ›¿æ¢æ¨¡æ¿å ä½ç¬¦ã€‚."""
87 |     if isinstance(value, str) and "{{" in value and "}}" in value:
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `render_template`
  --> scripts/crud_smoke.py:85:64
   |
85 | def render_template(value: Any, context: Mapping[str, Any]) -> Any:
   |                                                                ^^^
86 |     """é€’å½’æ›¿æ¢æ¨¡æ¿å ä½ç¬¦ã€‚."""
87 |     if isinstance(value, str) and "{{" in value and "}}" in value:
   |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `payload`
   --> scripts/crud_smoke.py:107:28
    |
107 | def extract_value(payload: Any, path: str) -> Any:
    |                            ^^^
108 |     """é€šè¿‡ç®€å•è·¯å¾„è¯­æ³•ä»Ž JSON ç»“æž„ä¸­æå–å€¼ã€‚."""
109 |     if not path:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `extract_value`
   --> scripts/crud_smoke.py:107:47
    |
107 | def extract_value(payload: Any, path: str) -> Any:
    |                                               ^^^
108 |     """é€šè¿‡ç®€å•è·¯å¾„è¯­æ³•ä»Ž JSON ç»“æž„ä¸­æå–å€¼ã€‚."""
109 |     if not path:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `current`
   --> scripts/crud_smoke.py:119:26
    |
119 | def _walk_token(current: Any, token: str) -> Any:
    |                          ^^^
120 |     """å¤„ç† `foo[0]` è¿™ç±» tokenã€‚."""
121 |     while token:
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `_walk_token`
   --> scripts/crud_smoke.py:119:46
    |
119 | def _walk_token(current: Any, token: str) -> Any:
    |                                              ^^^
120 |     """å¤„ç† `foo[0]` è¿™ç±» tokenã€‚."""
121 |     while token:
    |

PLR0913 Too many arguments in function definition (10 > 5)
   --> scripts/crud_smoke.py:140:9
    |
138 |     """æ ¹æ®é…ç½®æ‰§è¡Œ CRUD åœºæ™¯çš„æ‰§è¡Œå™¨ã€‚."""
139 |
140 |     def __init__(
    |         ^^^^^^^^
141 |         self,
142 |         *,
    |

D107 Missing docstring in `__init__`
   --> scripts/crud_smoke.py:140:9
    |
138 |     """æ ¹æ®é…ç½®æ‰§è¡Œ CRUD åœºæ™¯çš„æ‰§è¡Œå™¨ã€‚."""
139 |
140 |     def __init__(
    |         ^^^^^^^^
141 |         self,
142 |         *,
    |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> scripts/crud_smoke.py:181:42
    |
179 |                 continue
180 |             if not scenario.get("enabled", True):
181 |                 LOGGER.info("âšªï¸ è·³è¿‡åœºæ™¯ `%s`ï¼ˆenabled=falseï¼‰", name)
    |                                              ^^
182 |                 continue
183 |             LOGGER.info("")
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> scripts/crud_smoke.py:181:56
    |
179 |                 continue
180 |             if not scenario.get("enabled", True):
181 |                 LOGGER.info("âšªï¸ è·³è¿‡åœºæ™¯ `%s`ï¼ˆenabled=falseï¼‰", name)
    |                                                             ^^
182 |                 continue
183 |             LOGGER.info("")
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/crud_smoke.py:193:33
    |
191 |                 self._run_step(name, step, context)
192 |                 if self.stop_on_failure and self.results and not self.results[-1].success:
193 |                     msg = "æ£€æµ‹åˆ°å¤±è´¥ï¼Œå·²æ ¹æ®å‚æ•°ä¸­æ­¢æ‰§è¡Œ"
    |                                      ^^
194 |                     raise CrudScenarioError(msg)
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/crud_smoke.py:208:28
    |
206 |         self._ensure_success_response(resp, expected_status=200, step_name="ç™»å½•")
207 |         self._refresh_csrf_token()
208 |         LOGGER.info("âœ… ç™»å½•æˆåŠŸï¼Œå¼€å§‹æ‰§è¡Œ CRUD åœºæ™¯")
    |                                 ^^
209 |
210 |     def _run_step(self, scenario_name: str, step_cfg: Mapping[str, Any], context: MutableMapping[str, Any]) -> None:
    |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> scripts/crud_smoke.py:214:38
    |
212 |         step_name = str(step_cfg.get("name") or f"step_{len(self.results) + 1}")
213 |         if not step_cfg.get("enabled", True):
214 |             LOGGER.info("  âšªï¸ è·³è¿‡æ­¥éª¤ %sï¼ˆenabled=falseï¼‰", step_name)
    |                                          ^^
215 |             return
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> scripts/crud_smoke.py:214:52
    |
212 |         step_name = str(step_cfg.get("name") or f"step_{len(self.results) + 1}")
213 |         if not step_cfg.get("enabled", True):
214 |             LOGGER.info("  âšªï¸ è·³è¿‡æ­¥éª¤ %sï¼ˆenabled=falseï¼‰", step_name)
    |                                                         ^^
215 |             return
    |

TRY401 Redundant exception object included in `logging.exception` call
   --> scripts/crud_smoke.py:295:55
    |
293 |                 ),
294 |             )
295 |             LOGGER.exception("  âŒ %s: %s", step_name, exc)
    |                                                        ^^^
296 |
297 |     # ------------------------------------------------------------------
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/crud_smoke.py:308:31
    |
306 |             token = str(payload["data"]["csrf_token"])
307 |         except Exception as exc:
308 |             msg = "CSRF æŽ¥å£è¿”å›žå¼‚å¸¸ï¼Œç¼ºå°‘ data.csrf_token"
    |                                     ^^
309 |             raise ValueError(msg) from exc
310 |         self.current_csrf = token
    |

PLR0913 Too many arguments in function definition (6 > 5)
   --> scripts/crud_smoke.py:313:9
    |
311 |         return token
312 |
313 |     def _ensure_success_response(
    |         ^^^^^^^^^^^^^^^^^^^^^^^^
314 |         self,
315 |         response: requests.Response,
    |

ARG002 Unused method argument: `step_name`
   --> scripts/crud_smoke.py:318:9
    |
316 |         *,
317 |         expected_status: int,
318 |         step_name: str,
    |         ^^^^^^^^^
319 |         expect_json: Mapping[str, Any] | None = None,
320 |         store: Mapping[str, str] | None = None,
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/crud_smoke.py:325:44
    |
323 |         """æ ¡éªŒçŠ¶æ€ç ä¸Ž JSON å†…å®¹ã€‚."""
324 |         if response.status_code != expected_status:
325 |             msg = f"æœŸæœ›çŠ¶æ€ç  {expected_status}ï¼Œå®žå¾— {response.status_code}ï¼Œå“åº”ä½“: {response.text}"
    |                                                 ^^
326 |             raise AssertionError(
327 |                 msg,
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/crud_smoke.py:325:70
    |
323 |         """æ ¡éªŒçŠ¶æ€ç ä¸Ž JSON å†…å®¹ã€‚."""
324 |         if response.status_code != expected_status:
325 |             msg = f"æœŸæœ›çŠ¶æ€ç  {expected_status}ï¼Œå®žå¾— {response.status_code}ï¼Œå“åº”ä½“: {response.text}"
    |                                                                              ^^
326 |             raise AssertionError(
327 |                 msg,
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/crud_smoke.py:340:47
    |
338 |                 rendered_expected = render_template(expected, context or {}) if context else expected
339 |                 if actual != rendered_expected:
340 |                     msg = f"å­—æ®µ {raw_path} æ ¡éªŒå¤±è´¥ï¼ŒæœŸæœ› {rendered_expected}ï¼Œå®žå¾— {actual}"
    |                                                     ^^
341 |                     raise AssertionError(
342 |                         msg,
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/crud_smoke.py:340:70
    |
338 |                 rendered_expected = render_template(expected, context or {}) if context else expected
339 |                 if actual != rendered_expected:
340 |                     msg = f"å­—æ®µ {raw_path} æ ¡éªŒå¤±è´¥ï¼ŒæœŸæœ› {rendered_expected}ï¼Œå®žå¾— {actual}"
    |                                                                               ^^
341 |                     raise AssertionError(
342 |                         msg,
    |

ANN401 Dynamically typed expressions (typing.Any) are disallowed in `_safe_json`
   --> scripts/crud_smoke.py:349:58
    |
347 |                 context[str(alias)] = extract_value(payload, str(raw_path))
348 |
349 |     def _safe_json(self, response: requests.Response) -> Any:
    |                                                          ^^^
350 |         """è§£æž JSONï¼Œå¤±è´¥æ—¶æŠ›å‡ºè¯¦ç»†å¼‚å¸¸ã€‚."""
351 |         try:
    |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/crud_smoke.py:350:19
    |
349 |     def _safe_json(self, response: requests.Response) -> Any:
350 |         """è§£æž JSONï¼Œå¤±è´¥æ—¶æŠ›å‡ºè¯¦ç»†å¼‚å¸¸ã€‚."""
    |                     ^^
351 |         try:
352 |             return response.json()
    |

RUF001 String contains ambiguous `ï¼š` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   --> scripts/crud_smoke.py:354:30
    |
352 |             return response.json()
353 |         except json.JSONDecodeError as exc:
354 |             msg = f"å“åº”å¹¶éž JSONï¼š{response.text[:200]}"
    |                                  ^^
355 |             raise ValueError(msg) from exc
    |

PLC0415 `import` should be at the top-level of a file
   --> scripts/crud_smoke.py:359:9
    |
357 |     def _build_base_context(self, scenario: Mapping[str, Any]) -> MutableMapping[str, Any]:
358 |         """æž„å»ºæ¯ä¸ªåœºæ™¯çš„åŸºç¡€ä¸Šä¸‹æ–‡ã€‚."""
359 |         from datetime import datetime
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
360 |         from uuid import uuid4
    |

PLC0415 `import` should be at the top-level of a file
   --> scripts/crud_smoke.py:360:9
    |
358 |         """æž„å»ºæ¯ä¸ªåœºæ™¯çš„åŸºç¡€ä¸Šä¸‹æ–‡ã€‚."""
359 |         from datetime import datetime
360 |         from uuid import uuid4
    |         ^^^^^^^^^^^^^^^^^^^^^^
361 |
362 |         ctx: MutableMapping[str, Any] = {
    |

DTZ003 `datetime.datetime.utcnow()` used
   --> scripts/crud_smoke.py:365:26
    |
363 |             "uuid": uuid4().hex,
364 |             "rand_suffix": uuid4().hex[:8],
365 |             "timestamp": datetime.utcnow().isoformat(),
    |                          ^^^^^^^^^^^^^^^^^
366 |         }
367 |         extra_vars = scenario.get("variables")
    |
help: Use `datetime.datetime.now(tz=...)` instead

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/crud_smoke.py:379:30
    |
377 |         step_name: str,
378 |     ) -> None:
379 |         """å°† store å­—æ®µè½¬æ¢ä¸ºå‡çš„å ä½ç¬¦ï¼Œä¾¿äºŽ dry-run æ¸²æŸ“ã€‚."""
    |                                         ^^
380 |         store_cfg = step_cfg.get("store")
381 |         if not isinstance(store_cfg, Mapping):
    |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
   --> scripts/crud_smoke.py:395:76
    |
393 |     parser.add_argument("--password", help="ç™»å½•å¯†ç ")
394 |     parser.add_argument("--only", nargs="*", metavar="NAME", help="åªæ‰§è¡ŒæŒ‡å®šåœºæ™¯åç§°")
395 |     parser.add_argument("--timeout", type=float, default=20.0, help="è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰")
    |                                                                                  ^^
396 |     parser.add_argument("--stop-on-failure", action="store_true", help="é‡åˆ°å¤±è´¥ç«‹å³åœæ­¢")
397 |     parser.add_argument("--dry-run", action="store_true", help="ä»…æ‰“å°æ­¥éª¤ï¼Œä¸å‘é€è¯·æ±‚")
    |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
   --> scripts/crud_smoke.py:395:78
    |
393 |     parser.add_argument("--password", help="ç™»å½•å¯†ç ")
394 |     parser.add_argument("--only", nargs="*", metavar="NAME", help="åªæ‰§è¡ŒæŒ‡å®šåœºæ™¯åç§°")
395 |     parser.add_argument("--timeout", type=float, default=20.0, help="è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰")
    |                                                                                      ^^
396 |     parser.add_argument("--stop-on-failure", action="store_true", help="é‡åˆ°å¤±è´¥ç«‹å³åœæ­¢")
397 |     parser.add_argument("--dry-run", action="store_true", help="ä»…æ‰“å°æ­¥éª¤ï¼Œä¸å‘é€è¯·æ±‚")
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/crud_smoke.py:397:70
    |
395 |     parser.add_argument("--timeout", type=float, default=20.0, help="è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰")
396 |     parser.add_argument("--stop-on-failure", action="store_true", help="é‡åˆ°å¤±è´¥ç«‹å³åœæ­¢")
397 |     parser.add_argument("--dry-run", action="store_true", help="ä»…æ‰“å°æ­¥éª¤ï¼Œä¸å‘é€è¯·æ±‚")
    |                                                                           ^^
398 |     parser.add_argument("--login-path", default="/auth/api/login", help="ç™»å½•æŽ¥å£è·¯å¾„")
399 |     parser.add_argument("--csrf-path", default="/auth/api/csrf-token", help="CSRF æŽ¥å£è·¯å¾„")
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/crud_smoke.py:409:34
    |
408 |     if not args.dry_run and (not args.username or not args.password):
409 |         LOGGER.error("âŒ æœªæä¾›ç”¨æˆ·å/å¯†ç ï¼Œæ— æ³•æ‰§è¡Œç™»å½•")
    |                                           ^^
410 |         return 2
    |

TRY401 Redundant exception object included in `logging.exception` call
   --> scripts/crud_smoke.py:428:34
    |
426 |         runner.run()
427 |     except CrudScenarioError as exc:
428 |         LOGGER.exception("âŒ %s", exc)
    |                                   ^^^
429 |     except Exception as exc:
430 |         LOGGER.exception("âŒ æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºçŽ°å¼‚å¸¸: %s", exc)
    |

TRY401 Redundant exception object included in `logging.exception` call
   --> scripts/crud_smoke.py:430:45
    |
428 |         LOGGER.exception("âŒ %s", exc)
429 |     except Exception as exc:
430 |         LOGGER.exception("âŒ æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºçŽ°å¼‚å¸¸: %s", exc)
    |                                                       ^^^
431 |
432 |     failed = [result for result in runner.results if not result.success]
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/crud_smoke.py:451:35
    |
449 |     if failed:
450 |         LOGGER.error("")
451 |         LOGGER.error("âŒ å…± %d ä¸ªæ­¥éª¤å¤±è´¥ï¼Œè¯·æŸ¥çœ‹ä¸Šæ–¹æ—¥å¿—ã€‚", len(failed))
    |                                          ^^
452 |         return 1
    |

RUF001 String contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   --> scripts/crud_smoke.py:455:28
    |
454 |     LOGGER.info("")
455 |     LOGGER.info("âœ… æ‰€æœ‰æ­¥éª¤æ‰§è¡Œå®Œæˆï¼Œæ— å¤±è´¥ã€‚")
    |                                     ^^
456 |     return 0
    |

D205 1 blank line required between summary line and description
 --> scripts/password/reset_admin_password.py:2:1
  |
1 |   #!/usr/bin/env python3
2 | / """é‡ç½®ç®¡ç†å‘˜å¯†ç çš„è„šæœ¬
3 | | å¯ä»¥ç”Ÿæˆæ–°çš„éšæœºå¯†ç æˆ–è®¾ç½®æŒ‡å®šå¯†ç .
4 | | """
  | |___^
5 |
6 |   import argparse
  |
help: Insert single blank line

ANN201 Missing return type annotation for public function `generate_random_password`
  --> scripts/password/reset_admin_password.py:21:5
   |
21 | def generate_random_password(length=12):
   |     ^^^^^^^^^^^^^^^^^^^^^^^^
22 |     """ç”Ÿæˆæ»¡è¶³å¤æ‚åº¦è¦æ±‚çš„éšæœºå¯†ç ã€‚.
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `length`
  --> scripts/password/reset_admin_password.py:21:30
   |
21 | def generate_random_password(length=12):
   |                              ^^^^^^
22 |     """ç”Ÿæˆæ»¡è¶³å¤æ‚åº¦è¦æ±‚çš„éšæœºå¯†ç ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> scripts/password/reset_admin_password.py:25:21
   |
24 |     Args:
25 |         length: å¯†ç é•¿åº¦ï¼Œé»˜è®¤ä¸º 12 ä¸ªå­—ç¬¦ï¼Œå¯æŒ‰éœ€è°ƒæ•´ã€‚
   |                         ^^
26 |
27 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> scripts/password/reset_admin_password.py:25:32
   |
24 |     Args:
25 |         length: å¯†ç é•¿åº¦ï¼Œé»˜è®¤ä¸º 12 ä¸ªå­—ç¬¦ï¼Œå¯æŒ‰éœ€è°ƒæ•´ã€‚
   |                                           ^^
26 |
27 |     Returns:
   |

ANN001 Missing type annotation for function argument `new_password`
  --> scripts/password/reset_admin_password.py:34:26
   |
32 |     return "".join(secrets.choice(alphabet) for _ in range(length))
33 |
34 | def reset_admin_password(new_password=None) -> None:
   |                          ^^^^^^^^^^^^
35 |     """é‡ç½®ç®¡ç†å‘˜è´¦æˆ·å¯†ç ã€‚.
   |

RUF002 Docstring contains ambiguous `ï¼›` (FULLWIDTH SEMICOLON). Did you mean `;` (SEMICOLON)?
  --> scripts/password/reset_admin_password.py:38:29
   |
37 |     Args:
38 |         new_password: æŒ‡å®šçš„æ–°å¯†ç ï¼›å¦‚æžœä¸ºç©ºåˆ™è‡ªåŠ¨ç”Ÿæˆéšæœºå¯†ç ã€‚
   |                                   ^^
39 |
40 |     Returns:
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> scripts/password/reset_admin_password.py:41:32
   |
40 |     Returns:
41 |         None: é€šè¿‡æ•°æ®åº“äº‹åŠ¡ä¸Žæ—¥å¿—è®°å½•äº§ç”Ÿå‰¯ä½œç”¨ï¼Œä¸è¿”å›žå€¼ã€‚
   |                                                 ^^
42 |
43 |     """
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> scripts/password/reset_admin_password.py:84:24
   |
83 |     Returns:
84 |         None: ä½œä¸º CLI å…¥å£ï¼Œä»…è°ƒåº¦è¾…åŠ©å‡½æ•°ã€‚
   |                            ^^
85 |
86 |     """
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> scripts/password/reset_admin_password.py:88:56
   |
86 |     """
87 |     parser = argparse.ArgumentParser(description="é‡ç½®ç®¡ç†å‘˜å¯†ç ")
88 |     parser.add_argument("--password", "-p", help="æŒ‡å®šæ–°å¯†ç ï¼ˆä¸æŒ‡å®šåˆ™ç”Ÿæˆéšæœºå¯†ç ï¼‰")
   |                                                             ^^
89 |     parser.add_argument("--length", "-l", type=int, default=12, help="éšæœºå¯†ç é•¿åº¦ï¼ˆé»˜è®¤12ä½ï¼‰")
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> scripts/password/reset_admin_password.py:88:67
   |
86 |     """
87 |     parser = argparse.ArgumentParser(description="é‡ç½®ç®¡ç†å‘˜å¯†ç ")
88 |     parser.add_argument("--password", "-p", help="æŒ‡å®šæ–°å¯†ç ï¼ˆä¸æŒ‡å®šåˆ™ç”Ÿæˆéšæœºå¯†ç ï¼‰")
   |                                                                                   ^^
89 |     parser.add_argument("--length", "-l", type=int, default=12, help="éšæœºå¯†ç é•¿åº¦ï¼ˆé»˜è®¤12ä½ï¼‰")
   |

RUF001 String contains ambiguous `ï¼ˆ` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
  --> scripts/password/reset_admin_password.py:89:77
   |
87 |     parser = argparse.ArgumentParser(description="é‡ç½®ç®¡ç†å‘˜å¯†ç ")
88 |     parser.add_argument("--password", "-p", help="æŒ‡å®šæ–°å¯†ç ï¼ˆä¸æŒ‡å®šåˆ™ç”Ÿæˆéšæœºå¯†ç ï¼‰")
89 |     parser.add_argument("--length", "-l", type=int, default=12, help="éšæœºå¯†ç é•¿åº¦ï¼ˆé»˜è®¤12ä½ï¼‰")
   |                                                                                   ^^
90 |
91 |     args = parser.parse_args()
   |

RUF001 String contains ambiguous `ï¼‰` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
  --> scripts/password/reset_admin_password.py:89:83
   |
87 |     parser = argparse.ArgumentParser(description="é‡ç½®ç®¡ç†å‘˜å¯†ç ")
88 |     parser.add_argument("--password", "-p", help="æŒ‡å®šæ–°å¯†ç ï¼ˆä¸æŒ‡å®šåˆ™ç”Ÿæˆéšæœºå¯†ç ï¼‰")
89 |     parser.add_argument("--length", "-l", type=int, default=12, help="éšæœºå¯†ç é•¿åº¦ï¼ˆé»˜è®¤12ä½ï¼‰")
   |                                                                                             ^^
90 |
91 |     args = parser.parse_args()
   |

EXE001 Shebang is present but file is not executable
 --> scripts/password/show_admin_password.py:1:1
  |
1 | #!/usr/bin/env python3
  | ^^^^^^^^^^^^^^^^^^^^^^
2 | """å±•ç¤ºé»˜è®¤ç®¡ç†å‘˜å‡­æ®çš„è¾…åŠ©è„šæœ¬ã€‚."""
  |

INP001 File `tests/conftest.py` is part of an implicit namespace package. Add an `__init__.py`.
--> tests/conftest.py:1:1

D100 Missing docstring in public module
--> tests/conftest.py:1:1

INP001 File `tests/unit/services/test_aggregation_service_periods.py` is part of an implicit namespace package. Add an `__init__.py`.
--> tests/unit/services/test_aggregation_service_periods.py:1:1

ANN202 Missing return type annotation for private function `aggregate_period`
  --> tests/unit/services/test_aggregation_service_periods.py:20:9
   |
18 |         self.calls: list[tuple[str, date, date]] = []
19 |
20 |     def aggregate_period(self, period_type, start_date, end_date, **_):
   |         ^^^^^^^^^^^^^^^^
21 |         self.calls.append((period_type, start_date, end_date))
22 |         return {
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `period_type`
  --> tests/unit/services/test_aggregation_service_periods.py:20:32
   |
18 |         self.calls: list[tuple[str, date, date]] = []
19 |
20 |     def aggregate_period(self, period_type, start_date, end_date, **_):
   |                                ^^^^^^^^^^^
21 |         self.calls.append((period_type, start_date, end_date))
22 |         return {
   |

ANN001 Missing type annotation for function argument `start_date`
  --> tests/unit/services/test_aggregation_service_periods.py:20:45
   |
18 |         self.calls: list[tuple[str, date, date]] = []
19 |
20 |     def aggregate_period(self, period_type, start_date, end_date, **_):
   |                                             ^^^^^^^^^^
21 |         self.calls.append((period_type, start_date, end_date))
22 |         return {
   |

ANN001 Missing type annotation for function argument `end_date`
  --> tests/unit/services/test_aggregation_service_periods.py:20:57
   |
18 |         self.calls: list[tuple[str, date, date]] = []
19 |
20 |     def aggregate_period(self, period_type, start_date, end_date, **_):
   |                                                         ^^^^^^^^
21 |         self.calls.append((period_type, start_date, end_date))
22 |         return {
   |

ANN003 Missing type annotation for `**_`
  --> tests/unit/services/test_aggregation_service_periods.py:20:67
   |
18 |         self.calls: list[tuple[str, date, date]] = []
19 |
20 |     def aggregate_period(self, period_type, start_date, end_date, **_):
   |                                                                   ^^^
21 |         self.calls.append((period_type, start_date, end_date))
22 |         return {
   |

ANN001 Missing type annotation for function argument `monkeypatch`
  --> tests/unit/services/test_aggregation_service_periods.py:29:57
   |
28 | @pytest.mark.unit
29 | def test_aggregate_database_periods_uses_previous_daily(monkeypatch) -> None:
   |                                                         ^^^^^^^^^^^
30 |     """éªŒè¯è¦†ç›–é…ç½®åŽï¼Œæ—¥èšåˆä¼šä½¿ç”¨ä¸Šä¸€æ—¥çª—å£ã€‚."""
31 |     calc = PeriodCalculator(now_func=lambda: date(2025, 12, 1))
   |

ARG001 Unused function argument: `monkeypatch`
  --> tests/unit/services/test_aggregation_service_periods.py:29:57
   |
28 | @pytest.mark.unit
29 | def test_aggregate_database_periods_uses_previous_daily(monkeypatch) -> None:
   |                                                         ^^^^^^^^^^^
30 |     """éªŒè¯è¦†ç›–é…ç½®åŽï¼Œæ—¥èšåˆä¼šä½¿ç”¨ä¸Šä¸€æ—¥çª—å£ã€‚."""
31 |     calc = PeriodCalculator(now_func=lambda: date(2025, 12, 1))
   |

RUF002 Docstring contains ambiguous `ï¼Œ` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
  --> tests/unit/services/test_aggregation_service_periods.py:30:15
   |
28 | @pytest.mark.unit
29 | def test_aggregate_database_periods_uses_previous_daily(monkeypatch) -> None:
30 |     """éªŒè¯è¦†ç›–é…ç½®åŽï¼Œæ—¥èšåˆä¼šä½¿ç”¨ä¸Šä¸€æ—¥çª—å£ã€‚."""
   |                      ^^
31 |     calc = PeriodCalculator(now_func=lambda: date(2025, 12, 1))
32 |     service = AggregationService(period_calculator=calc)
   |

ANN001 Missing type annotation for function argument `monkeypatch`
  --> tests/unit/services/test_aggregation_service_periods.py:49:47
   |
48 | @pytest.mark.unit
49 | def test_instance_aggregations_daily_override(monkeypatch) -> None:
   |                                               ^^^^^^^^^^^
50 |     """calculate_instance_aggregations æŽ¥æ”¶è¦†ç›–é…ç½®åŽä¼šå‘ä¸‹æ¸¸é€ä¼ ã€‚."""
51 |     calc = PeriodCalculator(now_func=lambda: date(2025, 12, 1))
   |

ANN202 Missing return type annotation for private function `get`
  --> tests/unit/services/test_aggregation_service_periods.py:57:13
   |
56 |     class _Query:
57 |         def get(self, _instance_id):
   |             ^^^
58 |             return stub_instance
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `_instance_id`
  --> tests/unit/services/test_aggregation_service_periods.py:57:23
   |
56 |     class _Query:
57 |         def get(self, _instance_id):
   |                       ^^^^^^^^^^^^
58 |             return stub_instance
   |

ANN202 Missing return type annotation for private function `_fake_daily`
  --> tests/unit/services/test_aggregation_service_periods.py:64:9
   |
62 |     captured = {}
63 |
64 |     def _fake_daily(self, instance_id, *, use_current_period=True):
   |         ^^^^^^^^^^^
65 |         captured["instance_id"] = instance_id
66 |         captured["use_current_period"] = use_current_period
   |
help: Add return type annotation

ANN001 Missing type annotation for function argument `self`
  --> tests/unit/services/test_aggregation_service_periods.py:64:21
   |
62 |     captured = {}
63 |
64 |     def _fake_daily(self, instance_id, *, use_current_period=True):
   |                     ^^^^
65 |         captured["instance_id"] = instance_id
66 |         captured["use_current_period"] = use_current_period
   |

ARG001 Unused function argument: `self`
  --> tests/unit/services/test_aggregation_service_periods.py:64:21
   |
62 |     captured = {}
63 |
64 |     def _fake_daily(self, instance_id, *, use_current_period=True):
   |                     ^^^^
65 |         captured["instance_id"] = instance_id
66 |         captured["use_current_period"] = use_current_period
   |

ANN001 Missing type annotation for function argument `instance_id`
  --> tests/unit/services/test_aggregation_service_periods.py:64:27
   |
62 |     captured = {}
63 |
64 |     def _fake_daily(self, instance_id, *, use_current_period=True):
   |                           ^^^^^^^^^^^
65 |         captured["instance_id"] = instance_id
66 |         captured["use_current_period"] = use_current_period
   |

ANN001 Missing type annotation for function argument `use_current_period`
  --> tests/unit/services/test_aggregation_service_periods.py:64:43
   |
62 |     captured = {}
63 |
64 |     def _fake_daily(self, instance_id, *, use_current_period=True):
   |                                           ^^^^^^^^^^^^^^^^^^
65 |         captured["instance_id"] = instance_id
66 |         captured["use_current_period"] = use_current_period
   |

INP001 File `tests/unit/services/test_classification_form_service.py` is part of an implicit namespace package. Add an `__init__.py`.
--> tests/unit/services/test_classification_form_service.py:1:1

D100 Missing docstring in public module
--> tests/unit/services/test_classification_form_service.py:1:1

D103 Missing docstring in public function
  --> tests/unit/services/test_classification_form_service.py:11:5
   |
10 | @pytest.mark.unit
11 | def test_validate_flags_duplicate_name(monkeypatch) -> None:
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
12 |     service = ClassificationFormService()
   |

ANN001 Missing type annotation for function argument `monkeypatch`
  --> tests/unit/services/test_classification_form_service.py:11:40
   |
10 | @pytest.mark.unit
11 | def test_validate_flags_duplicate_name(monkeypatch) -> None:
   |                                        ^^^^^^^^^^^
12 |     service = ClassificationFormService()
   |

ARG005 Unused lambda argument: `self`
  --> tests/unit/services/test_classification_form_service.py:17:16
   |
15 |         ClassificationFormService,
16 |         "_name_exists",
17 |         lambda self, name, resource: True,
   |                ^^^^
18 |         raising=False,
19 |     )
   |

ARG005 Unused lambda argument: `name`
  --> tests/unit/services/test_classification_form_service.py:17:22
   |
15 |         ClassificationFormService,
16 |         "_name_exists",
17 |         lambda self, name, resource: True,
   |                      ^^^^
18 |         raising=False,
19 |     )
   |

ARG005 Unused lambda argument: `resource`
  --> tests/unit/services/test_classification_form_service.py:17:28
   |
15 |         ClassificationFormService,
16 |         "_name_exists",
17 |         lambda self, name, resource: True,
   |                            ^^^^^^^^
18 |         raising=False,
19 |     )
   |

D103 Missing docstring in public function
  --> tests/unit/services/test_classification_form_service.py:38:5
   |
37 | @pytest.mark.unit
38 | def test_validate_sets_is_create_flag(monkeypatch) -> None:
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
39 |     service = ClassificationFormService()
   |

ANN001 Missing type annotation for function argument `monkeypatch`
  --> tests/unit/services/test_classification_form_service.py:38:39
   |
37 | @pytest.mark.unit
38 | def test_validate_sets_is_create_flag(monkeypatch) -> None:
   |                                       ^^^^^^^^^^^
39 |     service = ClassificationFormService()
   |

ARG005 Unused lambda argument: `self`
  --> tests/unit/services/test_classification_form_service.py:44:16
   |
42 |         ClassificationFormService,
43 |         "_name_exists",
44 |         lambda self, name, resource: False,
   |                ^^^^
45 |         raising=False,
46 |     )
   |

ARG005 Unused lambda argument: `name`
  --> tests/unit/services/test_classification_form_service.py:44:22
   |
42 |         ClassificationFormService,
43 |         "_name_exists",
44 |         lambda self, name, resource: False,
   |                      ^^^^
45 |         raising=False,
46 |     )
   |

ARG005 Unused lambda argument: `resource`
  --> tests/unit/services/test_classification_form_service.py:44:28
   |
42 |         ClassificationFormService,
43 |         "_name_exists",
44 |         lambda self, name, resource: False,
   |                            ^^^^^^^^
45 |         raising=False,
46 |     )
   |

INP001 File `tests/unit/services/test_classification_rule_form_service.py` is part of an implicit namespace package. Add an `__init__.py`.
--> tests/unit/services/test_classification_rule_form_service.py:1:1

D100 Missing docstring in public module
--> tests/unit/services/test_classification_rule_form_service.py:1:1

D103 Missing docstring in public function
  --> tests/unit/services/test_classification_rule_form_service.py:12:5
   |
11 | @pytest.mark.unit
12 | def test_validate_uses_dynamic_db_types(monkeypatch) -> None:
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
13 |     service = ClassificationRuleFormService()
   |

ANN001 Missing type annotation for function argument `monkeypatch`
  --> tests/unit/services/test_classification_rule_form_service.py:12:41
   |
11 | @pytest.mark.unit
12 | def test_validate_uses_dynamic_db_types(monkeypatch) -> None:
   |                                         ^^^^^^^^^^^
13 |     service = ClassificationRuleFormService()
   |

PLC0415 `import` should be at the top-level of a file
  --> tests/unit/services/test_classification_rule_form_service.py:15:5
   |
13 |     service = ClassificationRuleFormService()
14 |
15 |     from app.services import database_type_service
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
16 |
17 |     monkeypatch.setattr(
   |

ARG005 Unused lambda argument: `self`
  --> tests/unit/services/test_classification_rule_form_service.py:34:16
   |
32 |         ClassificationRuleFormService,
33 |         "_get_classification_by_id",
34 |         lambda self, _: SimpleNamespace(id=1),
   |                ^^^^
35 |         raising=False,
36 |     )
   |

ARG005 Unused lambda argument: `self`
  --> tests/unit/services/test_classification_rule_form_service.py:41:16
   |
39 |         ClassificationRuleFormService,
40 |         "_rule_name_exists",
41 |         lambda self, data, resource: False,
   |                ^^^^
42 |         raising=False,
43 |     )
   |

ARG005 Unused lambda argument: `data`
  --> tests/unit/services/test_classification_rule_form_service.py:41:22
   |
39 |         ClassificationRuleFormService,
40 |         "_rule_name_exists",
41 |         lambda self, data, resource: False,
   |                      ^^^^
42 |         raising=False,
43 |     )
   |

ARG005 Unused lambda argument: `resource`
  --> tests/unit/services/test_classification_rule_form_service.py:41:28
   |
39 |         ClassificationRuleFormService,
40 |         "_rule_name_exists",
41 |         lambda self, data, resource: False,
   |                            ^^^^^^^^
42 |         raising=False,
43 |     )
   |

ARG005 Unused lambda argument: `self`
  --> tests/unit/services/test_classification_rule_form_service.py:47:16
   |
45 |         ClassificationRuleFormService,
46 |         "_expression_exists",
47 |         lambda self, expr, classification_id, resource: False,
   |                ^^^^
48 |         raising=False,
49 |     )
   |

ARG005 Unused lambda argument: `expr`
  --> tests/unit/services/test_classification_rule_form_service.py:47:22
   |
45 |         ClassificationRuleFormService,
46 |         "_expression_exists",
47 |         lambda self, expr, classification_id, resource: False,
   |                      ^^^^
48 |         raising=False,
49 |     )
   |

ARG005 Unused lambda argument: `classification_id`
  --> tests/unit/services/test_classification_rule_form_service.py:47:28
   |
45 |         ClassificationRuleFormService,
46 |         "_expression_exists",
47 |         lambda self, expr, classification_id, resource: False,
   |                            ^^^^^^^^^^^^^^^^^
48 |         raising=False,
49 |     )
   |

ARG005 Unused lambda argument: `resource`
  --> tests/unit/services/test_classification_rule_form_service.py:47:47
   |
45 |         ClassificationRuleFormService,
46 |         "_expression_exists",
47 |         lambda self, expr, classification_id, resource: False,
   |                                               ^^^^^^^^
48 |         raising=False,
49 |     )
   |

D103 Missing docstring in public function
  --> tests/unit/services/test_classification_rule_form_service.py:57:5
   |
56 | @pytest.mark.unit
57 | def test_validate_blocks_duplicate_rules(monkeypatch) -> None:
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
58 |     service = ClassificationRuleFormService()
   |

ANN001 Missing type annotation for function argument `monkeypatch`
  --> tests/unit/services/test_classification_rule_form_service.py:57:42
   |
56 | @pytest.mark.unit
57 | def test_validate_blocks_duplicate_rules(monkeypatch) -> None:
   |                                          ^^^^^^^^^^^
58 |     service = ClassificationRuleFormService()
   |

ARG005 Unused lambda argument: `self`
  --> tests/unit/services/test_classification_rule_form_service.py:63:16
   |
61 |         ClassificationRuleFormService,
62 |         "_get_classification_by_id",
63 |         lambda self, _: SimpleNamespace(id=1),
   |                ^^^^
64 |         raising=False,
65 |     )
   |

ARG005 Unused lambda argument: `self`
  --> tests/unit/services/test_classification_rule_form_service.py:69:16
   |
67 |         ClassificationRuleFormService,
68 |         "_get_db_type_options",
69 |         lambda self: [{"value": "mysql"}],
   |                ^^^^
70 |         raising=False,
71 |     )
   |

ARG005 Unused lambda argument: `self`
  --> tests/unit/services/test_classification_rule_form_service.py:75:16
   |
73 |         ClassificationRuleFormService,
74 |         "_rule_name_exists",
75 |         lambda self, data, resource: True,
   |                ^^^^
76 |         raising=False,
77 |     )
   |

ARG005 Unused lambda argument: `data`
  --> tests/unit/services/test_classification_rule_form_service.py:75:22
   |
73 |         ClassificationRuleFormService,
74 |         "_rule_name_exists",
75 |         lambda self, data, resource: True,
   |                      ^^^^
76 |         raising=False,
77 |     )
   |

ARG005 Unused lambda argument: `resource`
  --> tests/unit/services/test_classification_rule_form_service.py:75:28
   |
73 |         ClassificationRuleFormService,
74 |         "_rule_name_exists",
75 |         lambda self, data, resource: True,
   |                            ^^^^^^^^
76 |         raising=False,
77 |     )
   |

INP001 File `tests/unit/services/test_database_ledger_service.py` is part of an implicit namespace package. Add an `__init__.py`.
--> tests/unit/services/test_database_ledger_service.py:1:1

D100 Missing docstring in public module
--> tests/unit/services/test_database_ledger_service.py:1:1

D103 Missing docstring in public function
  --> tests/unit/services/test_database_ledger_service.py:14:5
   |
13 | @pytest.mark.unit
14 | def test_format_size_handles_megabytes() -> None:
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
15 |     service = DatabaseLedgerService(session=object())
16 |     assert service._format_size(None) == "æœªé‡‡é›†"
   |

SLF001 Private member accessed: `_format_size`
  --> tests/unit/services/test_database_ledger_service.py:16:12
   |
14 | def test_format_size_handles_megabytes() -> None:
15 |     service = DatabaseLedgerService(session=object())
16 |     assert service._format_size(None) == "æœªé‡‡é›†"
   |            ^^^^^^^^^^^^^^^^^^^^
17 |     assert service._format_size(512) == "512 MB"
18 |     assert service._format_size(2048) == "2.00 GB"
   |

SLF001 Private member accessed: `_format_size`
  --> tests/unit/services/test_database_ledger_service.py:17:12
   |
15 |     service = DatabaseLedgerService(session=object())
16 |     assert service._format_size(None) == "æœªé‡‡é›†"
17 |     assert service._format_size(512) == "512 MB"
   |            ^^^^^^^^^^^^^^^^^^^^
18 |     assert service._format_size(2048) == "2.00 GB"
   |

SLF001 Private member accessed: `_format_size`
  --> tests/unit/services/test_database_ledger_service.py:18:12
   |
16 |     assert service._format_size(None) == "æœªé‡‡é›†"
17 |     assert service._format_size(512) == "512 MB"
18 |     assert service._format_size(2048) == "2.00 GB"
   |            ^^^^^^^^^^^^^^^^^^^^
   |

D103 Missing docstring in public function
  --> tests/unit/services/test_database_ledger_service.py:22:5
   |
21 | @pytest.mark.unit
22 | def test_resolve_sync_status_recent(monkeypatch) -> None:
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
23 |     service = DatabaseLedgerService(session=object())
24 |     now = datetime.datetime(2025, 11, 27, 12, 0, tzinfo=datetime.UTC)
   |

ANN001 Missing type annotation for function argument `monkeypatch`
  --> tests/unit/services/test_database_ledger_service.py:22:37
   |
21 | @pytest.mark.unit
22 | def test_resolve_sync_status_recent(monkeypatch) -> None:
   |                                     ^^^^^^^^^^^
23 |     service = DatabaseLedgerService(session=object())
24 |     now = datetime.datetime(2025, 11, 27, 12, 0, tzinfo=datetime.UTC)
   |

SLF001 Private member accessed: `_resolve_sync_status`
  --> tests/unit/services/test_database_ledger_service.py:26:14
   |
24 |     now = datetime.datetime(2025, 11, 27, 12, 0, tzinfo=datetime.UTC)
25 |     monkeypatch.setattr("app.services.ledgers.database_ledger_service.time_utils.now", lambda: now)
26 |     status = service._resolve_sync_status(now - datetime.timedelta(hours=2))
   |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
27 |     assert status["value"] == SyncStatus.COMPLETED
   |

D103 Missing docstring in public function
  --> tests/unit/services/test_database_ledger_service.py:31:5
   |
30 | @pytest.mark.unit
31 | def test_resolve_sync_status_timeout(monkeypatch) -> None:
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
32 |     service = DatabaseLedgerService(session=object())
33 |     now = datetime.datetime(2025, 11, 27, 12, 0, tzinfo=datetime.UTC)
   |

ANN001 Missing type annotation for function argument `monkeypatch`
  --> tests/unit/services/test_database_ledger_service.py:31:38
   |
30 | @pytest.mark.unit
31 | def test_resolve_sync_status_timeout(monkeypatch) -> None:
   |                                      ^^^^^^^^^^^
32 |     service = DatabaseLedgerService(session=object())
33 |     now = datetime.datetime(2025, 11, 27, 12, 0, tzinfo=datetime.UTC)
   |

SLF001 Private member accessed: `_resolve_sync_status`
  --> tests/unit/services/test_database_ledger_service.py:35:14
   |
33 |     now = datetime.datetime(2025, 11, 27, 12, 0, tzinfo=datetime.UTC)
34 |     monkeypatch.setattr("app.services.ledgers.database_ledger_service.time_utils.now", lambda: now)
35 |     status = service._resolve_sync_status(now - datetime.timedelta(days=3))
   |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
36 |     assert status["value"] == SyncStatus.FAILED
   |

INP001 File `tests/unit/services/test_user_form_service.py` is part of an implicit namespace package. Add an `__init__.py`.
--> tests/unit/services/test_user_form_service.py:1:1

D100 Missing docstring in public module
--> tests/unit/services/test_user_form_service.py:1:1

ANN202 Missing return type annotation for private function `filter`
  --> tests/unit/services/test_user_form_service.py:13:9
   |
12 | class _DummyQuery:
13 |     def filter(self, *args, **kwargs):
   |         ^^^^^^
14 |         return self
   |
help: Add return type annotation

ANN002 Missing type annotation for `*args`
  --> tests/unit/services/test_user_form_service.py:13:22
   |
12 | class _DummyQuery:
13 |     def filter(self, *args, **kwargs):
   |                      ^^^^^
14 |         return self
   |

ARG002 Unused method argument: `args`
  --> tests/unit/services/test_user_form_service.py:13:23
   |
12 | class _DummyQuery:
13 |     def filter(self, *args, **kwargs):
   |                       ^^^^
14 |         return self
   |

ANN003 Missing type annotation for `**kwargs`
  --> tests/unit/services/test_user_form_service.py:13:29
   |
12 | class _DummyQuery:
13 |     def filter(self, *args, **kwargs):
   |                             ^^^^^^^^
14 |         return self
   |

ARG002 Unused method argument: `kwargs`
  --> tests/unit/services/test_user_form_service.py:13:31
   |
12 | class _DummyQuery:
13 |     def filter(self, *args, **kwargs):
   |                               ^^^^^^
14 |         return self
   |

ANN202 Missing return type annotation for private function `filter_by`
  --> tests/unit/services/test_user_form_service.py:16:9
   |
14 |         return self
15 |
16 |     def filter_by(self, *args, **kwargs):
   |         ^^^^^^^^^
17 |         return self
   |
help: Add return type annotation

ANN002 Missing type annotation for `*args`
  --> tests/unit/services/test_user_form_service.py:16:25
   |
14 |         return self
15 |
16 |     def filter_by(self, *args, **kwargs):
   |                         ^^^^^
17 |         return self
   |

ARG002 Unused method argument: `args`
  --> tests/unit/services/test_user_form_service.py:16:26
   |
14 |         return self
15 |
16 |     def filter_by(self, *args, **kwargs):
   |                          ^^^^
17 |         return self
   |

ANN003 Missing type annotation for `**kwargs`
  --> tests/unit/services/test_user_form_service.py:16:32
   |
14 |         return self
15 |
16 |     def filter_by(self, *args, **kwargs):
   |                                ^^^^^^^^
17 |         return self
   |

ARG002 Unused method argument: `kwargs`
  --> tests/unit/services/test_user_form_service.py:16:34
   |
14 |         return self
15 |
16 |     def filter_by(self, *args, **kwargs):
   |                                  ^^^^^^
17 |         return self
   |

D103 Missing docstring in public function
  --> tests/unit/services/test_user_form_service.py:24:5
   |
23 | @pytest.mark.unit
24 | def test_validate_prevents_disabling_last_admin(monkeypatch) -> None:
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
25 |     service = UserFormService()
26 |     admin = User(username="root", role=UserRole.ADMIN)
   |

ANN001 Missing type annotation for function argument `monkeypatch`
  --> tests/unit/services/test_user_form_service.py:24:49
   |
23 | @pytest.mark.unit
24 | def test_validate_prevents_disabling_last_admin(monkeypatch) -> None:
   |                                                 ^^^^^^^^^^^
25 |     service = UserFormService()
26 |     admin = User(username="root", role=UserRole.ADMIN)
   |

ARG005 Unused lambda argument: `self`
  --> tests/unit/services/test_user_form_service.py:30:64
   |
28 |     admin.is_active = True
29 |
30 |     monkeypatch.setattr(UserFormService, "_user_query", lambda self: _DummyQuery(), raising=False)
   |                                                                ^^^^
31 |     monkeypatch.setattr(
32 |         User,
   |

ARG005 Unused lambda argument: `cls`
  --> tests/unit/services/test_user_form_service.py:34:28
   |
32 |         User,
33 |         "active_admin_count",
34 |         classmethod(lambda cls, *, exclude_user_id=None: 0),
   |                            ^^^
35 |     )
   |

ARG005 Unused lambda argument: `exclude_user_id`
  --> tests/unit/services/test_user_form_service.py:34:36
   |
32 |         User,
33 |         "active_admin_count",
34 |         classmethod(lambda cls, *, exclude_user_id=None: 0),
   |                                    ^^^^^^^^^^^^^^^
35 |     )
   |

D103 Missing docstring in public function
  --> tests/unit/services/test_user_form_service.py:51:5
   |
50 | @pytest.mark.unit
51 | def test_validate_allows_change_when_other_admin_exists(monkeypatch) -> None:
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
52 |     service = UserFormService()
53 |     admin = User(username="root", role=UserRole.ADMIN)
   |

ANN001 Missing type annotation for function argument `monkeypatch`
  --> tests/unit/services/test_user_form_service.py:51:57
   |
50 | @pytest.mark.unit
51 | def test_validate_allows_change_when_other_admin_exists(monkeypatch) -> None:
   |                                                         ^^^^^^^^^^^
52 |     service = UserFormService()
53 |     admin = User(username="root", role=UserRole.ADMIN)
   |

ARG005 Unused lambda argument: `self`
  --> tests/unit/services/test_user_form_service.py:57:64
   |
55 |     admin.is_active = True
56 |
57 |     monkeypatch.setattr(UserFormService, "_user_query", lambda self: _DummyQuery(), raising=False)
   |                                                                ^^^^
58 |     monkeypatch.setattr(
59 |         User,
   |

ARG005 Unused lambda argument: `cls`
  --> tests/unit/services/test_user_form_service.py:61:28
   |
59 |         User,
60 |         "active_admin_count",
61 |         classmethod(lambda cls, *, exclude_user_id=None: 1),
   |                            ^^^
62 |     )
   |

ARG005 Unused lambda argument: `exclude_user_id`
  --> tests/unit/services/test_user_form_service.py:61:36
   |
59 |         User,
60 |         "active_admin_count",
61 |         classmethod(lambda cls, *, exclude_user_id=None: 1),
   |                                    ^^^^^^^^^^^^^^^
62 |     )
   |

INP001 File `tests/unit/utils/test_data_validator.py` is part of an implicit namespace package. Add an `__init__.py`.
--> tests/unit/utils/test_data_validator.py:1:1

D100 Missing docstring in public module
--> tests/unit/utils/test_data_validator.py:1:1

D103 Missing docstring in public function
  --> tests/unit/utils/test_data_validator.py:12:5
   |
11 | @pytest.mark.unit
12 | def test_validate_db_type_uses_dynamic_configs(monkeypatch) -> None:
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
13 |     from app.services import database_type_service
   |

ANN001 Missing type annotation for function argument `monkeypatch`
  --> tests/unit/utils/test_data_validator.py:12:48
   |
11 | @pytest.mark.unit
12 | def test_validate_db_type_uses_dynamic_configs(monkeypatch) -> None:
   |                                                ^^^^^^^^^^^
13 |     from app.services import database_type_service
   |

PLC0415 `import` should be at the top-level of a file
  --> tests/unit/utils/test_data_validator.py:13:5
   |
11 | @pytest.mark.unit
12 | def test_validate_db_type_uses_dynamic_configs(monkeypatch) -> None:
13 |     from app.services import database_type_service
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
14 |
15 |     monkeypatch.setattr(
   |

D103 Missing docstring in public function
  --> tests/unit/utils/test_data_validator.py:25:5
   |
24 | @pytest.mark.unit
25 | def test_validate_db_type_with_custom_override() -> None:
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
26 |     DataValidator.set_custom_db_types(["clickhouse"])
27 |     try:
   |

INP001 File `tests/unit/utils/test_sensitive_data.py` is part of an implicit namespace package. Add an `__init__.py`.
--> tests/unit/utils/test_sensitive_data.py:1:1

D100 Missing docstring in public module
--> tests/unit/utils/test_sensitive_data.py:1:1

D103 Missing docstring in public function
 --> tests/unit/utils/test_sensitive_data.py:7:5
  |
6 | @pytest.mark.unit
7 | def test_scrub_sensitive_fields_masks_nested_values() -> None:
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
8 |     payload = {
9 |         "username": "demo",
  |

S105 Possible hardcoded password assigned to: "password"
  --> tests/unit/utils/test_sensitive_data.py:17:37
   |
15 |     sanitized = scrub_sensitive_fields(payload)
16 |
17 |     assert sanitized["password"] == "***"
   |                                     ^^^^^
18 |     assert sanitized["profile"]["token"] == "***"
19 |     assert sanitized["secrets"][0]["secret"] == "***"
   |

S105 Possible hardcoded password assigned to: "token"
  --> tests/unit/utils/test_sensitive_data.py:18:45
   |
17 |     assert sanitized["password"] == "***"
18 |     assert sanitized["profile"]["token"] == "***"
   |                                             ^^^^^
19 |     assert sanitized["secrets"][0]["secret"] == "***"
20 |     assert sanitized["profile"]["display"] == "Demo"
   |

S105 Possible hardcoded password assigned to: "secret"
  --> tests/unit/utils/test_sensitive_data.py:19:49
   |
17 |     assert sanitized["password"] == "***"
18 |     assert sanitized["profile"]["token"] == "***"
19 |     assert sanitized["secrets"][0]["secret"] == "***"
   |                                                 ^^^^^
20 |     assert sanitized["profile"]["display"] == "Demo"
   |

D103 Missing docstring in public function
  --> tests/unit/utils/test_sensitive_data.py:24:5
   |
23 | @pytest.mark.unit
24 | def test_scrub_sensitive_fields_supports_extra_keys() -> None:
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
25 |     payload = {"custom": "value", "api_key": "key"}
   |

Found 4474 errors.
